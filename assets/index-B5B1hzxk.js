function qT(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in r)){const d=Object.getOwnPropertyDescriptor(a,u);d&&Object.defineProperty(r,u,d.get?d:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const E of d.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&a(E)}).observe(document,{childList:!0,subtree:!0});function t(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(u){if(u.ep)return;u.ep=!0;const d=t(u);fetch(u.href,d)}})();var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var W1={exports:{}},Qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function XT(){if(Y2)return Qc;Y2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,u,d){var E=null;if(d!==void 0&&(E=""+d),u.key!==void 0&&(E=""+u.key),"key"in u){d={};for(var C in u)C!=="key"&&(d[C]=u[C])}else d=u;return u=d.ref,{$$typeof:r,type:a,key:E,ref:u!==void 0?u:null,props:d}}return Qc.Fragment=e,Qc.jsx=t,Qc.jsxs=t,Qc}var K2;function YT(){return K2||(K2=1,W1.exports=XT()),W1.exports}var Te=YT(),Q1={exports:{}},pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2;function KT(){if(W2)return pt;W2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.iterator;function P(Z){return Z===null||typeof Z!="object"?null:(Z=R&&Z[R]||Z["@@iterator"],typeof Z=="function"?Z:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,J={};function Y(Z,be,Le){this.props=Z,this.context=be,this.refs=J,this.updater=Le||G}Y.prototype.isReactComponent={},Y.prototype.setState=function(Z,be){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,be,"setState")},Y.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function Ee(){}Ee.prototype=Y.prototype;function ue(Z,be,Le){this.props=Z,this.context=be,this.refs=J,this.updater=Le||G}var ne=ue.prototype=new Ee;ne.constructor=ue,Q(ne,Y.prototype),ne.isPureReactComponent=!0;var Se=Array.isArray,ke={H:null,A:null,T:null,S:null,V:null},Ue=Object.prototype.hasOwnProperty;function F(Z,be,Le,Be,Fe,yt){return Le=yt.ref,{$$typeof:r,type:Z,key:be,ref:Le!==void 0?Le:null,props:yt}}function z(Z,be){return F(Z.type,be,void 0,void 0,void 0,Z.props)}function B(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function ee(Z){var be={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Le){return be[Le]})}var X=/\/+/g;function K(Z,be){return typeof Z=="object"&&Z!==null&&Z.key!=null?ee(""+Z.key):be.toString(36)}function j(){}function it(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(j,j):(Z.status="pending",Z.then(function(be){Z.status==="pending"&&(Z.status="fulfilled",Z.value=be)},function(be){Z.status==="pending"&&(Z.status="rejected",Z.reason=be)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function ce(Z,be,Le,Be,Fe){var yt=typeof Z;(yt==="undefined"||yt==="boolean")&&(Z=null);var Ne=!1;if(Z===null)Ne=!0;else switch(yt){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(Z.$$typeof){case r:case e:Ne=!0;break;case b:return Ne=Z._init,ce(Ne(Z._payload),be,Le,Be,Fe)}}if(Ne)return Fe=Fe(Z),Ne=Be===""?"."+K(Z,0):Be,Se(Fe)?(Le="",Ne!=null&&(Le=Ne.replace(X,"$&/")+"/"),ce(Fe,be,Le,"",function(Ei){return Ei})):Fe!=null&&(B(Fe)&&(Fe=z(Fe,Le+(Fe.key==null||Z&&Z.key===Fe.key?"":(""+Fe.key).replace(X,"$&/")+"/")+Ne)),be.push(Fe)),1;Ne=0;var zn=Be===""?".":Be+":";if(Se(Z))for(var ot=0;ot<Z.length;ot++)Be=Z[ot],yt=zn+K(Be,ot),Ne+=ce(Be,be,Le,yt,Fe);else if(ot=P(Z),typeof ot=="function")for(Z=ot.call(Z),ot=0;!(Be=Z.next()).done;)Be=Be.value,yt=zn+K(Be,ot++),Ne+=ce(Be,be,Le,yt,Fe);else if(yt==="object"){if(typeof Z.then=="function")return ce(it(Z),be,Le,Be,Fe);throw be=String(Z),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function pe(Z,be,Le){if(Z==null)return Z;var Be=[],Fe=0;return ce(Z,Be,"","",function(yt){return be.call(Le,yt,Fe++)}),Be}function Ae(Z){if(Z._status===-1){var be=Z._result;be=be(),be.then(function(Le){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Le)},function(Le){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Le)}),Z._status===-1&&(Z._status=0,Z._result=be)}if(Z._status===1)return Z._result.default;throw Z._result}var qe=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function ht(){}return pt.Children={map:pe,forEach:function(Z,be,Le){pe(Z,function(){be.apply(this,arguments)},Le)},count:function(Z){var be=0;return pe(Z,function(){be++}),be},toArray:function(Z){return pe(Z,function(be){return be})||[]},only:function(Z){if(!B(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},pt.Component=Y,pt.Fragment=t,pt.Profiler=u,pt.PureComponent=ue,pt.StrictMode=a,pt.Suspense=x,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ke,pt.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return ke.H.useMemoCache(Z)}},pt.cache=function(Z){return function(){return Z.apply(null,arguments)}},pt.cloneElement=function(Z,be,Le){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Be=Q({},Z.props),Fe=Z.key,yt=void 0;if(be!=null)for(Ne in be.ref!==void 0&&(yt=void 0),be.key!==void 0&&(Fe=""+be.key),be)!Ue.call(be,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&be.ref===void 0||(Be[Ne]=be[Ne]);var Ne=arguments.length-2;if(Ne===1)Be.children=Le;else if(1<Ne){for(var zn=Array(Ne),ot=0;ot<Ne;ot++)zn[ot]=arguments[ot+2];Be.children=zn}return F(Z.type,Fe,void 0,void 0,yt,Be)},pt.createContext=function(Z){return Z={$$typeof:E,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:d,_context:Z},Z},pt.createElement=function(Z,be,Le){var Be,Fe={},yt=null;if(be!=null)for(Be in be.key!==void 0&&(yt=""+be.key),be)Ue.call(be,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(Fe[Be]=be[Be]);var Ne=arguments.length-2;if(Ne===1)Fe.children=Le;else if(1<Ne){for(var zn=Array(Ne),ot=0;ot<Ne;ot++)zn[ot]=arguments[ot+2];Fe.children=zn}if(Z&&Z.defaultProps)for(Be in Ne=Z.defaultProps,Ne)Fe[Be]===void 0&&(Fe[Be]=Ne[Be]);return F(Z,yt,void 0,void 0,null,Fe)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(Z){return{$$typeof:C,render:Z}},pt.isValidElement=B,pt.lazy=function(Z){return{$$typeof:b,_payload:{_status:-1,_result:Z},_init:Ae}},pt.memo=function(Z,be){return{$$typeof:A,type:Z,compare:be===void 0?null:be}},pt.startTransition=function(Z){var be=ke.T,Le={};ke.T=Le;try{var Be=Z(),Fe=ke.S;Fe!==null&&Fe(Le,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(ht,qe)}catch(yt){qe(yt)}finally{ke.T=be}},pt.unstable_useCacheRefresh=function(){return ke.H.useCacheRefresh()},pt.use=function(Z){return ke.H.use(Z)},pt.useActionState=function(Z,be,Le){return ke.H.useActionState(Z,be,Le)},pt.useCallback=function(Z,be){return ke.H.useCallback(Z,be)},pt.useContext=function(Z){return ke.H.useContext(Z)},pt.useDebugValue=function(){},pt.useDeferredValue=function(Z,be){return ke.H.useDeferredValue(Z,be)},pt.useEffect=function(Z,be,Le){var Be=ke.H;if(typeof Le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Be.useEffect(Z,be)},pt.useId=function(){return ke.H.useId()},pt.useImperativeHandle=function(Z,be,Le){return ke.H.useImperativeHandle(Z,be,Le)},pt.useInsertionEffect=function(Z,be){return ke.H.useInsertionEffect(Z,be)},pt.useLayoutEffect=function(Z,be){return ke.H.useLayoutEffect(Z,be)},pt.useMemo=function(Z,be){return ke.H.useMemo(Z,be)},pt.useOptimistic=function(Z,be){return ke.H.useOptimistic(Z,be)},pt.useReducer=function(Z,be,Le){return ke.H.useReducer(Z,be,Le)},pt.useRef=function(Z){return ke.H.useRef(Z)},pt.useState=function(Z){return ke.H.useState(Z)},pt.useSyncExternalStore=function(Z,be,Le){return ke.H.useSyncExternalStore(Z,be,Le)},pt.useTransition=function(){return ke.H.useTransition()},pt.version="19.1.1",pt}var Q2;function Q0(){return Q2||(Q2=1,Q1.exports=KT()),Q1.exports}var ye=Q0();const ai=r_(ye);var Z1={exports:{}},Zc={},J1={exports:{}},$1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z2;function WT(){return Z2||(Z2=1,(function(r){function e(pe,Ae){var qe=pe.length;pe.push(Ae);e:for(;0<qe;){var ht=qe-1>>>1,Z=pe[ht];if(0<u(Z,Ae))pe[ht]=Ae,pe[qe]=Z,qe=ht;else break e}}function t(pe){return pe.length===0?null:pe[0]}function a(pe){if(pe.length===0)return null;var Ae=pe[0],qe=pe.pop();if(qe!==Ae){pe[0]=qe;e:for(var ht=0,Z=pe.length,be=Z>>>1;ht<be;){var Le=2*(ht+1)-1,Be=pe[Le],Fe=Le+1,yt=pe[Fe];if(0>u(Be,qe))Fe<Z&&0>u(yt,Be)?(pe[ht]=yt,pe[Fe]=qe,ht=Fe):(pe[ht]=Be,pe[Le]=qe,ht=Le);else if(Fe<Z&&0>u(yt,qe))pe[ht]=yt,pe[Fe]=qe,ht=Fe;else break e}}return Ae}function u(pe,Ae){var qe=pe.sortIndex-Ae.sortIndex;return qe!==0?qe:pe.id-Ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var E=Date,C=E.now();r.unstable_now=function(){return E.now()-C}}var x=[],A=[],b=1,R=null,P=3,G=!1,Q=!1,J=!1,Y=!1,Ee=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function Se(pe){for(var Ae=t(A);Ae!==null;){if(Ae.callback===null)a(A);else if(Ae.startTime<=pe)a(A),Ae.sortIndex=Ae.expirationTime,e(x,Ae);else break;Ae=t(A)}}function ke(pe){if(J=!1,Se(pe),!Q)if(t(x)!==null)Q=!0,Ue||(Ue=!0,K());else{var Ae=t(A);Ae!==null&&ce(ke,Ae.startTime-pe)}}var Ue=!1,F=-1,z=5,B=-1;function ee(){return Y?!0:!(r.unstable_now()-B<z)}function X(){if(Y=!1,Ue){var pe=r.unstable_now();B=pe;var Ae=!0;try{e:{Q=!1,J&&(J=!1,ue(F),F=-1),G=!0;var qe=P;try{t:{for(Se(pe),R=t(x);R!==null&&!(R.expirationTime>pe&&ee());){var ht=R.callback;if(typeof ht=="function"){R.callback=null,P=R.priorityLevel;var Z=ht(R.expirationTime<=pe);if(pe=r.unstable_now(),typeof Z=="function"){R.callback=Z,Se(pe),Ae=!0;break t}R===t(x)&&a(x),Se(pe)}else a(x);R=t(x)}if(R!==null)Ae=!0;else{var be=t(A);be!==null&&ce(ke,be.startTime-pe),Ae=!1}}break e}finally{R=null,P=qe,G=!1}Ae=void 0}}finally{Ae?K():Ue=!1}}}var K;if(typeof ne=="function")K=function(){ne(X)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,it=j.port2;j.port1.onmessage=X,K=function(){it.postMessage(null)}}else K=function(){Ee(X,0)};function ce(pe,Ae){F=Ee(function(){pe(r.unstable_now())},Ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(pe){pe.callback=null},r.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<pe?Math.floor(1e3/pe):5},r.unstable_getCurrentPriorityLevel=function(){return P},r.unstable_next=function(pe){switch(P){case 1:case 2:case 3:var Ae=3;break;default:Ae=P}var qe=P;P=Ae;try{return pe()}finally{P=qe}},r.unstable_requestPaint=function(){Y=!0},r.unstable_runWithPriority=function(pe,Ae){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var qe=P;P=pe;try{return Ae()}finally{P=qe}},r.unstable_scheduleCallback=function(pe,Ae,qe){var ht=r.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?ht+qe:ht):qe=ht,pe){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=qe+Z,pe={id:b++,callback:Ae,priorityLevel:pe,startTime:qe,expirationTime:Z,sortIndex:-1},qe>ht?(pe.sortIndex=qe,e(A,pe),t(x)===null&&pe===t(A)&&(J?(ue(F),F=-1):J=!0,ce(ke,qe-ht))):(pe.sortIndex=Z,e(x,pe),Q||G||(Q=!0,Ue||(Ue=!0,K()))),pe},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(pe){var Ae=P;return function(){var qe=P;P=Ae;try{return pe.apply(this,arguments)}finally{P=qe}}}})($1)),$1}var J2;function QT(){return J2||(J2=1,J1.exports=WT()),J1.exports}var e0={exports:{}},Vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2;function ZT(){if($2)return Vi;$2=1;var r=Q0();function e(x){var A="https://react.dev/errors/"+x;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)A+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+x+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(x,A,b){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:x,containerInfo:A,implementation:b}}var E=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(x,A){if(x==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Vi.createPortal=function(x,A){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(e(299));return d(x,A,null,b)},Vi.flushSync=function(x){var A=E.T,b=a.p;try{if(E.T=null,a.p=2,x)return x()}finally{E.T=A,a.p=b,a.d.f()}},Vi.preconnect=function(x,A){typeof x=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,a.d.C(x,A))},Vi.prefetchDNS=function(x){typeof x=="string"&&a.d.D(x)},Vi.preinit=function(x,A){if(typeof x=="string"&&A&&typeof A.as=="string"){var b=A.as,R=C(b,A.crossOrigin),P=typeof A.integrity=="string"?A.integrity:void 0,G=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;b==="style"?a.d.S(x,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:R,integrity:P,fetchPriority:G}):b==="script"&&a.d.X(x,{crossOrigin:R,integrity:P,fetchPriority:G,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Vi.preinitModule=function(x,A){if(typeof x=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var b=C(A.as,A.crossOrigin);a.d.M(x,{crossOrigin:b,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&a.d.M(x)},Vi.preload=function(x,A){if(typeof x=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var b=A.as,R=C(b,A.crossOrigin);a.d.L(x,b,{crossOrigin:R,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Vi.preloadModule=function(x,A){if(typeof x=="string")if(A){var b=C(A.as,A.crossOrigin);a.d.m(x,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:b,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else a.d.m(x)},Vi.requestFormReset=function(x){a.d.r(x)},Vi.unstable_batchedUpdates=function(x,A){return x(A)},Vi.useFormState=function(x,A,b){return E.H.useFormState(x,A,b)},Vi.useFormStatus=function(){return E.H.useHostTransitionStatus()},Vi.version="19.1.1",Vi}var ey;function JT(){if(ey)return e0.exports;ey=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),e0.exports=ZT(),e0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function $T(){if(ty)return Zc;ty=1;var r=QT(),e=Q0(),t=JT();function a(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function d(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function E(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function C(n){if(d(n)!==n)throw Error(a(188))}function x(n){var s=n.alternate;if(!s){if(s=d(n),s===null)throw Error(a(188));return s!==n?null:n}for(var c=n,g=s;;){var _=c.return;if(_===null)break;var T=_.alternate;if(T===null){if(g=_.return,g!==null){c=g;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===c)return C(_),n;if(T===g)return C(_),s;T=T.sibling}throw Error(a(188))}if(c.return!==g.return)c=_,g=T;else{for(var O=!1,k=_.child;k;){if(k===c){O=!0,c=_,g=T;break}if(k===g){O=!0,g=_,c=T;break}k=k.sibling}if(!O){for(k=T.child;k;){if(k===c){O=!0,c=T,g=_;break}if(k===g){O=!0,g=T,c=_;break}k=k.sibling}if(!O)throw Error(a(189))}}if(c.alternate!==g)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?n:s}function A(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=A(n),s!==null)return s;n=n.sibling}return null}var b=Object.assign,R=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function K(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function it(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case Y:return"Profiler";case J:return"StrictMode";case ke:return"Suspense";case Ue:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case G:return"Portal";case ne:return(n.displayName||"Context")+".Provider";case ue:return(n._context.displayName||"Context")+".Consumer";case Se:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case F:return s=n.displayName||null,s!==null?s:it(n.type)||"Memo";case z:s=n._payload,n=n._init;try{return it(n(s))}catch{}}return null}var ce=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},ht=[],Z=-1;function be(n){return{current:n}}function Le(n){0>Z||(n.current=ht[Z],ht[Z]=null,Z--)}function Be(n,s){Z++,ht[Z]=n.current,n.current=s}var Fe=be(null),yt=be(null),Ne=be(null),zn=be(null);function ot(n,s){switch(Be(Ne,s),Be(yt,n),Be(Fe,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?w2(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=w2(s),n=x2(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Le(Fe),Be(Fe,n)}function Ei(){Le(Fe),Le(yt),Le(Ne)}function Kr(n){n.memoizedState!==null&&Be(zn,n);var s=Fe.current,c=x2(s,n.type);s!==c&&(Be(yt,n),Be(Fe,c))}function Hn(n){yt.current===n&&(Le(Fe),Le(yt)),zn.current===n&&(Le(zn),qc._currentValue=qe)}var Wr=Object.prototype.hasOwnProperty,At=r.unstable_scheduleCallback,lr=r.unstable_cancelCallback,Qi=r.unstable_shouldYield,Qr=r.unstable_requestPaint,Ut=r.unstable_now,jt=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,vn=r.unstable_UserBlockingPriority,ze=r.unstable_NormalPriority,va=r.unstable_LowPriority,ba=r.unstable_IdlePriority,cr=r.log,Zr=r.unstable_setDisableYieldValue,Wn=null,ti=null;function Gn(n){if(typeof cr=="function"&&Zr(n),ti&&typeof ti.setStrictMode=="function")try{ti.setStrictMode(Wn,n)}catch{}}var qt=Math.clz32?Math.clz32:cl,ll=Math.log,zs=Math.LN2;function cl(n){return n>>>=0,n===0?32:31-(ll(n)/zs|0)|0}var Xt=256,Pe=4194304;function Yt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Et(n,s,c){var g=n.pendingLanes;if(g===0)return 0;var _=0,T=n.suspendedLanes,O=n.pingedLanes;n=n.warmLanes;var k=g&134217727;return k!==0?(g=k&~T,g!==0?_=Yt(g):(O&=k,O!==0?_=Yt(O):c||(c=k&~n,c!==0&&(_=Yt(c))))):(k=g&~T,k!==0?_=Yt(k):O!==0?_=Yt(O):c||(c=g&~n,c!==0&&(_=Yt(c)))),_===0?0:s!==0&&s!==_&&(s&T)===0&&(T=_&-_,c=s&-s,T>=c||T===32&&(c&4194048)!==0)?s:_}function Kt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Dr(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hs(){var n=Xt;return Xt<<=1,(Xt&4194048)===0&&(Xt=256),n}function Jr(){var n=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),n}function xt(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function Jt(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ao(n,s,c,g,_,T){var O=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var k=n.entanglements,q=n.expirationTimes,le=n.hiddenUpdates;for(c=O&~c;0<c;){var _e=31-qt(c),Ce=1<<_e;k[_e]=0,q[_e]=-1;var he=le[_e];if(he!==null)for(le[_e]=null,_e=0;_e<he.length;_e++){var ge=he[_e];ge!==null&&(ge.lane&=-536870913)}c&=~Ce}g!==0&&$r(n,g,0),T!==0&&_===0&&n.tag!==0&&(n.suspendedLanes|=T&~(O&~s))}function $r(n,s,c){n.pendingLanes|=s,n.suspendedLanes&=~s;var g=31-qt(s);n.entangledLanes|=s,n.entanglements[g]=n.entanglements[g]|1073741824|c&4194090}function Qn(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var g=31-qt(c),_=1<<g;_&s|n[g]&s&&(n[g]|=s),c&=~_}}function Gs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Mn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ri(){var n=Ae.p;return n!==0?n:(n=window.event,n===void 0?32:z2(n.type))}function Sa(n,s){var c=Ae.p;try{return Ae.p=n,s()}finally{Ae.p=c}}var jn=Math.random().toString(36).slice(2),bn="__reactFiber$"+jn,gn="__reactProps$"+jn,ur="__reactContainer$"+jn,Pn="__reactEvents$"+jn,Gi="__reactListeners$"+jn,Ni="__reactHandles$"+jn,Ve="__reactResources$"+jn,ji="__reactMarker$"+jn;function fs(n){delete n[bn],delete n[gn],delete n[Pn],delete n[Gi],delete n[Ni]}function mn(n){var s=n[bn];if(s)return s;for(var c=n.parentNode;c;){if(s=c[ur]||c[bn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=b2(n);n!==null;){if(c=n[bn])return c;n=b2(n)}return s}n=c,c=n.parentNode}return null}function _i(n){if(n=n[bn]||n[ur]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function hr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(a(33))}function fr(n){var s=n[Ve];return s||(s=n[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ft(n){n[ji]=!0}var ul=new Set,js={};function qn(n,s){hn(n,s),hn(n+"Capture",s)}function hn(n,s){for(js[n]=s,n=0;n<s.length;n++)ul.add(s[n])}var zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dr={},qi={};function wo(n){return Wr.call(qi,n)?!0:Wr.call(dr,n)?!1:zt.test(n)?qi[n]=!0:(dr[n]=!0,!1)}function xe(n,s,c){if(wo(s))if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+c)}}function qs(n,s,c){if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+c)}}function Pt(n,s,c,g){if(g===null)n.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(s,c,""+g)}}var Zi,Ia;function _t(n){if(Zi===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Zi=s&&s[1]||"",Ia=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zi+n+Ia}var Tt=!1;function mt(n,s){if(!n||Tt)return"";Tt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ge){var he=ge}Reflect.construct(n,[],Ce)}else{try{Ce.call()}catch(ge){he=ge}n.call(Ce.prototype)}}else{try{throw Error()}catch(ge){he=ge}(Ce=n())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ge){if(ge&&he&&typeof ge.stack=="string")return[ge.stack,he.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),O=T[0],k=T[1];if(O&&k){var q=O.split(`
`),le=k.split(`
`);for(_=g=0;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;for(;_<le.length&&!le[_].includes("DetermineComponentFrameRoot");)_++;if(g===q.length||_===le.length)for(g=q.length-1,_=le.length-1;1<=g&&0<=_&&q[g]!==le[_];)_--;for(;1<=g&&0<=_;g--,_--)if(q[g]!==le[_]){if(g!==1||_!==1)do if(g--,_--,0>_||q[g]!==le[_]){var _e=`
`+q[g].replace(" at new "," at ");return n.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",n.displayName)),_e}while(1<=g&&0<=_);break}}}finally{Tt=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?_t(c):""}function xo(n){switch(n.tag){case 26:case 27:case 5:return _t(n.type);case 16:return _t("Lazy");case 13:return _t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return mt(n.type,!1);case 11:return mt(n.type.render,!1);case 1:return mt(n.type,!0);case 31:return _t("Activity");default:return""}}function Xi(n){try{var s="";do s+=xo(n),n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function cn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nn(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Oi(n){var s=nn(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),g=""+n[s];if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,T=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return _.call(this)},set:function(O){g=""+O,T.call(this,O)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ds(n){n._valueTracker||(n._valueTracker=Oi(n))}function et(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return n&&(g=nn(n)?n.checked?"true":"false":n.value),n=g,n!==c?(s.setValue(n),!0):!1}function ui(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Xs=/[\n"\\]/g;function pn(n){return n.replace(Xs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ht(n,s,c,g,_,T,O,k){n.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?n.type=O:n.removeAttribute("type"),s!=null?O==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+cn(s)):n.value!==""+cn(s)&&(n.value=""+cn(s)):O!=="submit"&&O!=="reset"||n.removeAttribute("value"),s!=null?ae(n,O,cn(s)):c!=null?ae(n,O,cn(c)):g!=null&&n.removeAttribute("value"),_==null&&T!=null&&(n.defaultChecked=!!T),_!=null&&(n.checked=_&&typeof _!="function"&&typeof _!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+cn(k):n.removeAttribute("name")}function Ln(n,s,c,g,_,T,O,k){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.type=T),s!=null||c!=null){if(!(T!=="submit"&&T!=="reset"||s!=null))return;c=c!=null?""+cn(c):"",s=s!=null?""+cn(s):c,k||s===n.value||(n.value=s),n.defaultValue=s}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,n.checked=k?n.checked:!!g,n.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(n.name=O)}function ae(n,s,c){s==="number"&&ui(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function U(n,s,c,g){if(n=n.options,s){s={};for(var _=0;_<c.length;_++)s["$"+c[_]]=!0;for(c=0;c<n.length;c++)_=s.hasOwnProperty("$"+n[c].value),n[c].selected!==_&&(n[c].selected=_),_&&g&&(n[c].defaultSelected=!0)}else{for(c=""+cn(c),s=null,_=0;_<n.length;_++){if(n[_].value===c){n[_].selected=!0,g&&(n[_].defaultSelected=!0);return}s!==null||n[_].disabled||(s=n[_])}s!==null&&(s.selected=!0)}}function Xe(n,s,c){if(s!=null&&(s=""+cn(s),s!==n.value&&(n.value=s),c==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=c!=null?""+cn(c):""}function Sn(n,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(a(92));if(ce(g)){if(1<g.length)throw Error(a(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=cn(s),n.defaultValue=c,g=n.textContent,g===c&&g!==""&&g!==null&&(n.value=g)}function yn(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var es=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ys(n,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":g?n.setProperty(s,c):typeof c!="number"||c===0||es.has(s)?s==="float"?n.cssFloat=c:n[s]=(""+c).trim():n[s]=c+"px"}function hi(n,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(n=n.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?n.setProperty(g,""):g==="float"?n.cssFloat="":n[g]="");for(var _ in s)g=s[_],s.hasOwnProperty(_)&&c[_]!==g&&Ys(n,_,g)}else for(var T in s)s.hasOwnProperty(T)&&Ys(n,T,s[T])}function Ye(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),To=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(n){return To.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ks=null;function gs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mr=null,Ai=null;function In(n){var s=_i(n);if(s&&(n=s.stateNode)){var c=n[gn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ht(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+pn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==n&&g.form===n.form){var _=g[gn]||null;if(!_)throw Error(a(90));Ht(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===n.form&&et(g)}break e;case"textarea":Xe(n,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&U(n,!!c.multiple,s,!1)}}}var mr=!1;function Di(n,s,c){if(mr)return n(s,c);mr=!0;try{var g=n(s);return g}finally{if(mr=!1,(Mr!==null||Ai!==null)&&(mh(),Mr&&(s=Mr,n=Ai,Ai=Mr=null,In(s),n)))for(s=0;s<n.length;s++)In(n[s])}}function Ke(n,s){var c=n.stateNode;if(c===null)return null;var g=c[gn]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(n=n.type,g=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!g;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tt=!1;if(wi)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){tt=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{tt=!1}var Ji=null,Qt=null,Ws=null;function Pr(){if(Ws)return Ws;var n,s=Qt,c=s.length,g,_="value"in Ji?Ji.value:Ji.textContent,T=_.length;for(n=0;n<c&&s[n]===_[n];n++);var O=c-n;for(g=1;g<=O&&s[c-g]===_[T-g];g++);return Ws=_.slice(n,1<g?1-g:void 0)}function Qs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function ts(){return!1}function En(n){function s(c,g,_,T,O){this._reactName=c,this._targetInst=_,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(c=n[k],this[k]=c?c(T):T[k]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?pr:ts,this.isPropagationStopped=ts,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),s}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yr=En(ni),Er=b({},ni,{view:0,detail:0}),kn=En(Er),Zs,ms,_r,Js=b({},Er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_r&&(_r&&n.type==="mousemove"?(Zs=n.screenX-_r.screenX,ms=n.screenY-_r.screenY):ms=Zs=0,_r=n),Zs)},movementY:function(n){return"movementY"in n?n.movementY:ms}}),$s=En(Js),uc=b({},Js,{dataTransfer:0}),Bt=En(uc),ps=b({},Er,{relatedTarget:0}),ns=En(ps),Ar=b({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=En(Ar),de=b({},ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ft=En(de),wn=b({},ni,{data:0}),ys=En(wn),vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},is={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=hl[n])?!!s[n]:!1}function Es(){return fl}var xn=b({},Er,{key:function(n){if(n.key){var s=vo[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?is[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(n){return n.type==="keypress"?Qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_s=En(xn),Ct=b({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),As=En(Ct),Lr=b({},Er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Rt=En(Lr),p=b({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=En(p),N=b({},Js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),V=En(N),re=b({},ni,{newState:0,oldState:0}),me=En(re),De=[9,13,27,32],st=wi&&"CompositionEvent"in window,sn=null;wi&&"documentMode"in document&&(sn=document.documentMode);var Vt=wi&&"TextEvent"in window&&!sn,Tn=wi&&(!st||sn&&8<sn&&11>=sn),Mi=" ",kr=!1;function fi(n,s){switch(n){case"keyup":return De.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yi(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wr=!1;function rs(n,s){switch(n){case"compositionend":return Yi(s);case"keypress":return s.which!==32?null:(kr=!0,Mi);case"textInput":return n=s.data,n===Mi&&kr?null:n;default:return null}}function ud(n,s){if(wr)return n==="compositionend"||!st&&fi(n,s)?(n=Pr(),Ws=Qt=Ji=null,wr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Tn&&s.locale!=="ko"?null:s.data;default:return null}}var ws={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bo(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ws[n.type]:s==="textarea"}function Ki(n,s,c,g){Mr?Ai?Ai.push(g):Ai=[g]:Mr=g,s=wh(s,"onChange"),0<s.length&&(c=new yr("onChange","change",null,c,g),n.push({event:c,listeners:s}))}var Ra=null,Pi=null;function hd(n){p2(n,0)}function Na(n){var s=hr(n);if(et(s))return n}function Lu(n,s){if(n==="change")return s}var hc=!1;if(wi){var $i;if(wi){var fc="oninput"in document;if(!fc){var dl=document.createElement("div");dl.setAttribute("oninput","return;"),fc=typeof dl.oninput=="function"}$i=fc}else $i=!1;hc=$i&&(!document.documentMode||9<document.documentMode)}function Oa(){Ra&&(Ra.detachEvent("onpropertychange",Nt),Pi=Ra=null)}function Nt(n){if(n.propertyName==="value"&&Na(Pi)){var s=[];Ki(s,Pi,n,gs(n)),Di(hd,s)}}function gl(n,s,c){n==="focusin"?(Oa(),Ra=s,Pi=c,Ra.attachEvent("onpropertychange",Nt)):n==="focusout"&&Oa()}function D(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Na(Pi)}function i(n,s){if(n==="click")return Na(s)}function o(n,s){if(n==="input"||n==="change")return Na(s)}function l(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var h=typeof Object.is=="function"?Object.is:l;function f(n,s){if(h(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var _=c[g];if(!Wr.call(s,_)||!h(n[_],s[_]))return!1}return!0}function m(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function y(n,s){var c=m(n);n=0;for(var g;c;){if(c.nodeType===3){if(g=n+c.textContent.length,n<=s&&g>=s)return{node:c,offset:s-n};n=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=m(c)}}function w(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?w(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function v(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ui(n.document);s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=ui(n.document)}return s}function I(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var M=wi&&"documentMode"in document&&11>=document.documentMode,L=null,H=null,W=null,$=!1;function se(n,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$||L==null||L!==ui(g)||(g=L,"selectionStart"in g&&I(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),W&&f(W,g)||(W=g,g=wh(H,"onSelect"),0<g.length&&(s=new yr("onSelect","select",null,s,c),n.push({event:s,listeners:g}),s.target=L)))}function fe(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var Oe={animationend:fe("Animation","AnimationEnd"),animationiteration:fe("Animation","AnimationIteration"),animationstart:fe("Animation","AnimationStart"),transitionrun:fe("Transition","TransitionRun"),transitionstart:fe("Transition","TransitionStart"),transitioncancel:fe("Transition","TransitionCancel"),transitionend:fe("Transition","TransitionEnd")},Me={},Ie={};wi&&(Ie=document.createElement("div").style,"AnimationEvent"in window||(delete Oe.animationend.animation,delete Oe.animationiteration.animation,delete Oe.animationstart.animation),"TransitionEvent"in window||delete Oe.transitionend.transition);function dt(n){if(Me[n])return Me[n];if(!Oe[n])return n;var s=Oe[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in Ie)return Me[n]=s[c];return n}var ct=dt("animationend"),xi=dt("animationiteration"),er=dt("animationstart"),Li=dt("transitionrun"),$t=dt("transitionstart"),ii=dt("transitioncancel"),ki=dt("transitionend"),ea=new Map,xs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xs.push("scrollEnd");function xr(n,s){ea.set(n,s),qn(s,[n])}var ku=new WeakMap;function Br(n,s){if(typeof n=="object"&&n!==null){var c=ku.get(n);return c!==void 0?c:(s={value:n,source:s,stack:Xi(s)},ku.set(n,s),s)}return{value:n,source:s,stack:Xi(s)}}var Vr=[],ml=0,fd=0;function Bu(){for(var n=ml,s=fd=ml=0;s<n;){var c=Vr[s];Vr[s++]=null;var g=Vr[s];Vr[s++]=null;var _=Vr[s];Vr[s++]=null;var T=Vr[s];if(Vr[s++]=null,g!==null&&_!==null){var O=g.pending;O===null?_.next=_:(_.next=O.next,O.next=_),g.pending=_}T!==0&&em(c,_,T)}}function Vu(n,s,c,g){Vr[ml++]=n,Vr[ml++]=s,Vr[ml++]=c,Vr[ml++]=g,fd|=g,n.lanes|=g,n=n.alternate,n!==null&&(n.lanes|=g)}function dd(n,s,c,g){return Vu(n,s,c,g),Uu(n)}function pl(n,s){return Vu(n,null,null,s),Uu(n)}function em(n,s,c){n.lanes|=c;var g=n.alternate;g!==null&&(g.lanes|=c);for(var _=!1,T=n.return;T!==null;)T.childLanes|=c,g=T.alternate,g!==null&&(g.childLanes|=c),T.tag===22&&(n=T.stateNode,n===null||n._visibility&1||(_=!0)),n=T,T=T.return;return n.tag===3?(T=n.stateNode,_&&s!==null&&(_=31-qt(c),n=T.hiddenUpdates,g=n[_],g===null?n[_]=[s]:g.push(s),s.lane=c|536870912),T):null}function Uu(n){if(50<Bc)throw Bc=0,_1=null,Error(a(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var yl={};function Nx(n,s,c,g){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(n,s,c,g){return new Nx(n,s,c,g)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ta(n,s){var c=n.alternate;return c===null?(c=Tr(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function tm(n,s){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,s=c.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Fu(n,s,c,g,_,T){var O=0;if(g=n,typeof n=="function")gd(n)&&(O=1);else if(typeof n=="string")O=DT(n,c,Fe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=Tr(31,c,s,_),n.elementType=B,n.lanes=T,n;case Q:return So(c.children,_,T,s);case J:O=8,_|=24;break;case Y:return n=Tr(12,c,s,_|2),n.elementType=Y,n.lanes=T,n;case ke:return n=Tr(13,c,s,_),n.elementType=ke,n.lanes=T,n;case Ue:return n=Tr(19,c,s,_),n.elementType=Ue,n.lanes=T,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ee:case ne:O=10;break e;case ue:O=9;break e;case Se:O=11;break e;case F:O=14;break e;case z:O=16,g=null;break e}O=29,c=Error(a(130,n===null?"null":typeof n,"")),g=null}return s=Tr(O,c,s,_),s.elementType=n,s.type=g,s.lanes=T,s}function So(n,s,c,g){return n=Tr(7,n,g,s),n.lanes=c,n}function md(n,s,c){return n=Tr(6,n,null,s),n.lanes=c,n}function pd(n,s,c){return s=Tr(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var El=[],_l=0,zu=null,Hu=0,Ur=[],Fr=0,Io=null,na=1,ia="";function Ro(n,s){El[_l++]=Hu,El[_l++]=zu,zu=n,Hu=s}function nm(n,s,c){Ur[Fr++]=na,Ur[Fr++]=ia,Ur[Fr++]=Io,Io=n;var g=na;n=ia;var _=32-qt(g)-1;g&=~(1<<_),c+=1;var T=32-qt(s)+_;if(30<T){var O=_-_%5;T=(g&(1<<O)-1).toString(32),g>>=O,_-=O,na=1<<32-qt(s)+_|c<<_|g,ia=T+n}else na=1<<T|c<<_|g,ia=n}function yd(n){n.return!==null&&(Ro(n,1),nm(n,1,0))}function Ed(n){for(;n===zu;)zu=El[--_l],El[_l]=null,Hu=El[--_l],El[_l]=null;for(;n===Io;)Io=Ur[--Fr],Ur[Fr]=null,ia=Ur[--Fr],Ur[Fr]=null,na=Ur[--Fr],Ur[Fr]=null}var Wi=null,Bn=null,Wt=!1,No=null,Ts=!1,_d=Error(a(519));function Oo(n){var s=Error(a(418,""));throw mc(Br(s,n)),_d}function im(n){var s=n.stateNode,c=n.type,g=n.memoizedProps;switch(s[bn]=n,s[gn]=g,c){case"dialog":St("cancel",s),St("close",s);break;case"iframe":case"object":case"embed":St("load",s);break;case"video":case"audio":for(c=0;c<Uc.length;c++)St(Uc[c],s);break;case"source":St("error",s);break;case"img":case"image":case"link":St("error",s),St("load",s);break;case"details":St("toggle",s);break;case"input":St("invalid",s),Ln(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),ds(s);break;case"select":St("invalid",s);break;case"textarea":St("invalid",s),Sn(s,g.value,g.defaultValue,g.children),ds(s)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||A2(s.textContent,c)?(g.popover!=null&&(St("beforetoggle",s),St("toggle",s)),g.onScroll!=null&&St("scroll",s),g.onScrollEnd!=null&&St("scrollend",s),g.onClick!=null&&(s.onclick=xh),s=!0):s=!1,s||Oo(n)}function rm(n){for(Wi=n.return;Wi;)switch(Wi.tag){case 5:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:Wi=Wi.return}}function dc(n){if(n!==Wi)return!1;if(!Wt)return rm(n),Wt=!0,!1;var s=n.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||L1(n.type,n.memoizedProps)),c=!c),c&&Bn&&Oo(n),rm(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(s===0){Bn=as(n.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;n=n.nextSibling}Bn=null}}else s===27?(s=Bn,Ya(n.type)?(n=U1,U1=null,Bn=n):Bn=s):Bn=Wi?as(n.stateNode.nextSibling):null;return!0}function gc(){Bn=Wi=null,Wt=!1}function sm(){var n=No;return n!==null&&(ir===null?ir=n:ir.push.apply(ir,n),No=null),n}function mc(n){No===null?No=[n]:No.push(n)}var Ad=be(null),Do=null,ra=null;function Da(n,s,c){Be(Ad,s._currentValue),s._currentValue=c}function sa(n){n._currentValue=Ad.current,Le(Ad)}function wd(n,s,c){for(;n!==null;){var g=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),n===c)break;n=n.return}}function xd(n,s,c,g){var _=n.child;for(_!==null&&(_.return=n);_!==null;){var T=_.dependencies;if(T!==null){var O=_.child;T=T.firstContext;e:for(;T!==null;){var k=T;T=_;for(var q=0;q<s.length;q++)if(k.context===s[q]){T.lanes|=c,k=T.alternate,k!==null&&(k.lanes|=c),wd(T.return,c,n),g||(O=null);break e}T=k.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(a(341));O.lanes|=c,T=O.alternate,T!==null&&(T.lanes|=c),wd(O,c,n),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===n){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function pc(n,s,c,g){n=null;for(var _=s,T=!1;_!==null;){if(!T){if((_.flags&524288)!==0)T=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(a(387));if(O=O.memoizedProps,O!==null){var k=_.type;h(_.pendingProps.value,O.value)||(n!==null?n.push(k):n=[k])}}else if(_===zn.current){if(O=_.alternate,O===null)throw Error(a(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(n!==null?n.push(qc):n=[qc])}_=_.return}n!==null&&xd(s,n,c,g),s.flags|=262144}function Gu(n){for(n=n.firstContext;n!==null;){if(!h(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Mo(n){Do=n,ra=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Bi(n){return am(Do,n)}function ju(n,s){return Do===null&&Mo(n),am(n,s)}function am(n,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ra===null){if(n===null)throw Error(a(308));ra=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ra=ra.next=s;return c}var Ox=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(c,g){n.push(g)}};this.abort=function(){s.aborted=!0,n.forEach(function(c){return c()})}},Dx=r.unstable_scheduleCallback,Mx=r.unstable_NormalPriority,ri={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new Ox,data:new Map,refCount:0}}function yc(n){n.refCount--,n.refCount===0&&Dx(Mx,function(){n.controller.abort()})}var Ec=null,Cd=0,Al=0,wl=null;function Px(n,s){if(Ec===null){var c=Ec=[];Cd=0,Al=b1(),wl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return Cd++,s.then(om,om),s}function om(){if(--Cd===0&&Ec!==null){wl!==null&&(wl.status="fulfilled");var n=Ec;Ec=null,Al=0,wl=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Lx(n,s){var c=[],g={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return n.then(function(){g.status="fulfilled",g.value=s;for(var _=0;_<c.length;_++)(0,c[_])(s)},function(_){for(g.status="rejected",g.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),g}var lm=pe.S;pe.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Px(n,s),lm!==null&&lm(n,s)};var Po=be(null);function vd(){var n=Po.current;return n!==null?n:dn.pooledCache}function qu(n,s){s===null?Be(Po,Po.current):Be(Po,s.pool)}function cm(){var n=vd();return n===null?null:{parent:ri._currentValue,pool:n}}var _c=Error(a(460)),um=Error(a(474)),Xu=Error(a(542)),bd={then:function(){}};function hm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Yu(){}function fm(n,s,c){switch(c=n[c],c===void 0?n.push(s):c!==s&&(s.then(Yu,Yu),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gm(n),n;default:if(typeof s.status=="string")s.then(Yu,Yu);else{if(n=dn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=s,n.status="pending",n.then(function(g){if(s.status==="pending"){var _=s;_.status="fulfilled",_.value=g}},function(g){if(s.status==="pending"){var _=s;_.status="rejected",_.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gm(n),n}throw Ac=s,_c}}var Ac=null;function dm(){if(Ac===null)throw Error(a(459));var n=Ac;return Ac=null,n}function gm(n){if(n===_c||n===Xu)throw Error(a(483))}var Ma=!1;function Sd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Pa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function La(n,s,c){var g=n.updateQueue;if(g===null)return null;if(g=g.shared,(en&2)!==0){var _=g.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),g.pending=s,s=Uu(n),em(n,null,c),s}return Vu(n,g,s,c),Uu(n)}function wc(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=n.pendingLanes,c|=g,s.lanes=c,Qn(n,c)}}function Rd(n,s){var c=n.updateQueue,g=n.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var _=null,T=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};T===null?_=T=O:T=T.next=O,c=c.next}while(c!==null);T===null?_=T=s:T=T.next=s}else _=T=s;c={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}var Nd=!1;function xc(){if(Nd){var n=wl;if(n!==null)throw n}}function Tc(n,s,c,g){Nd=!1;var _=n.updateQueue;Ma=!1;var T=_.firstBaseUpdate,O=_.lastBaseUpdate,k=_.shared.pending;if(k!==null){_.shared.pending=null;var q=k,le=q.next;q.next=null,O===null?T=le:O.next=le,O=q;var _e=n.alternate;_e!==null&&(_e=_e.updateQueue,k=_e.lastBaseUpdate,k!==O&&(k===null?_e.firstBaseUpdate=le:k.next=le,_e.lastBaseUpdate=q))}if(T!==null){var Ce=_.baseState;O=0,_e=le=q=null,k=T;do{var he=k.lane&-536870913,ge=he!==k.lane;if(ge?(Lt&he)===he:(g&he)===he){he!==0&&he===Al&&(Nd=!0),_e!==null&&(_e=_e.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var at=n,$e=k;he=s;var ln=c;switch($e.tag){case 1:if(at=$e.payload,typeof at=="function"){Ce=at.call(ln,Ce,he);break e}Ce=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=$e.payload,he=typeof at=="function"?at.call(ln,Ce,he):at,he==null)break e;Ce=b({},Ce,he);break e;case 2:Ma=!0}}he=k.callback,he!==null&&(n.flags|=64,ge&&(n.flags|=8192),ge=_.callbacks,ge===null?_.callbacks=[he]:ge.push(he))}else ge={lane:he,tag:k.tag,payload:k.payload,callback:k.callback,next:null},_e===null?(le=_e=ge,q=Ce):_e=_e.next=ge,O|=he;if(k=k.next,k===null){if(k=_.shared.pending,k===null)break;ge=k,k=ge.next,ge.next=null,_.lastBaseUpdate=ge,_.shared.pending=null}}while(!0);_e===null&&(q=Ce),_.baseState=q,_.firstBaseUpdate=le,_.lastBaseUpdate=_e,T===null&&(_.shared.lanes=0),Ga|=O,n.lanes=O,n.memoizedState=Ce}}function mm(n,s){if(typeof n!="function")throw Error(a(191,n));n.call(s)}function pm(n,s){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)mm(c[n],s)}var xl=be(null),Ku=be(0);function ym(n,s){n=fa,Be(Ku,n),Be(xl,s),fa=n|s.baseLanes}function Od(){Be(Ku,fa),Be(xl,xl.current)}function Dd(){fa=Ku.current,Le(xl),Le(Ku)}var ka=0,wt=null,an=null,Zn=null,Wu=!1,Tl=!1,Lo=!1,Qu=0,Cc=0,Cl=null,kx=0;function Xn(){throw Error(a(321))}function Md(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!h(n[c],s[c]))return!1;return!0}function Pd(n,s,c,g,_,T){return ka=T,wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pe.H=n===null||n.memoizedState===null?ep:tp,Lo=!1,T=c(g,_),Lo=!1,Tl&&(T=_m(s,c,g,_)),Em(n),T}function Em(n){pe.H=nh;var s=an!==null&&an.next!==null;if(ka=0,Zn=an=wt=null,Wu=!1,Cc=0,Cl=null,s)throw Error(a(300));n===null||di||(n=n.dependencies,n!==null&&Gu(n)&&(di=!0))}function _m(n,s,c,g){wt=n;var _=0;do{if(Tl&&(Cl=null),Cc=0,Tl=!1,25<=_)throw Error(a(301));if(_+=1,Zn=an=null,n.updateQueue!=null){var T=n.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}pe.H=Gx,T=s(c,g)}while(Tl);return T}function Bx(){var n=pe.H,s=n.useState()[0];return s=typeof s.then=="function"?vc(s):s,n=n.useState()[0],(an!==null?an.memoizedState:null)!==n&&(wt.flags|=1024),s}function Ld(){var n=Qu!==0;return Qu=0,n}function kd(n,s,c){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~c}function Bd(n){if(Wu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Wu=!1}ka=0,Zn=an=wt=null,Tl=!1,Cc=Qu=0,Cl=null}function tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?wt.memoizedState=Zn=n:Zn=Zn.next=n,Zn}function Jn(){if(an===null){var n=wt.alternate;n=n!==null?n.memoizedState:null}else n=an.next;var s=Zn===null?wt.memoizedState:Zn.next;if(s!==null)Zn=s,an=n;else{if(n===null)throw wt.alternate===null?Error(a(467)):Error(a(310));an=n,n={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Zn===null?wt.memoizedState=Zn=n:Zn=Zn.next=n}return Zn}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vc(n){var s=Cc;return Cc+=1,Cl===null&&(Cl=[]),n=fm(Cl,n,s),s=wt,(Zn===null?s.memoizedState:Zn.next)===null&&(s=s.alternate,pe.H=s===null||s.memoizedState===null?ep:tp),n}function Zu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vc(n);if(n.$$typeof===ne)return Bi(n)}throw Error(a(438,String(n)))}function Ud(n){var s=null,c=wt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=wt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(_){return _.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Vd(),wt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(n),g=0;g<n;g++)c[g]=ee;return s.index++,c}function aa(n,s){return typeof s=="function"?s(n):s}function Ju(n){var s=Jn();return Fd(s,an,n)}function Fd(n,s,c){var g=n.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=c;var _=n.baseQueue,T=g.pending;if(T!==null){if(_!==null){var O=_.next;_.next=T.next,T.next=O}s.baseQueue=_=T,g.pending=null}if(T=n.baseState,_===null)n.memoizedState=T;else{s=_.next;var k=O=null,q=null,le=s,_e=!1;do{var Ce=le.lane&-536870913;if(Ce!==le.lane?(Lt&Ce)===Ce:(ka&Ce)===Ce){var he=le.revertLane;if(he===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Ce===Al&&(_e=!0);else if((ka&he)===he){le=le.next,he===Al&&(_e=!0);continue}else Ce={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},q===null?(k=q=Ce,O=T):q=q.next=Ce,wt.lanes|=he,Ga|=he;Ce=le.action,Lo&&c(T,Ce),T=le.hasEagerState?le.eagerState:c(T,Ce)}else he={lane:Ce,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},q===null?(k=q=he,O=T):q=q.next=he,wt.lanes|=Ce,Ga|=Ce;le=le.next}while(le!==null&&le!==s);if(q===null?O=T:q.next=k,!h(T,n.memoizedState)&&(di=!0,_e&&(c=wl,c!==null)))throw c;n.memoizedState=T,n.baseState=O,n.baseQueue=q,g.lastRenderedState=T}return _===null&&(g.lanes=0),[n.memoizedState,g.dispatch]}function zd(n){var s=Jn(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=n;var g=c.dispatch,_=c.pending,T=s.memoizedState;if(_!==null){c.pending=null;var O=_=_.next;do T=n(T,O.action),O=O.next;while(O!==_);h(T,s.memoizedState)||(di=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),c.lastRenderedState=T}return[T,g]}function Am(n,s,c){var g=wt,_=Jn(),T=Wt;if(T){if(c===void 0)throw Error(a(407));c=c()}else c=s();var O=!h((an||_).memoizedState,c);O&&(_.memoizedState=c,di=!0),_=_.queue;var k=Tm.bind(null,g,_,n);if(bc(2048,8,k,[n]),_.getSnapshot!==s||O||Zn!==null&&Zn.memoizedState.tag&1){if(g.flags|=2048,vl(9,$u(),xm.bind(null,g,_,c,s),null),dn===null)throw Error(a(349));T||(ka&124)!==0||wm(g,s,c)}return c}function wm(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=wt.updateQueue,s===null?(s=Vd(),wt.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function xm(n,s,c,g){s.value=c,s.getSnapshot=g,Cm(s)&&vm(n)}function Tm(n,s,c){return c(function(){Cm(s)&&vm(n)})}function Cm(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!h(n,c)}catch{return!0}}function vm(n){var s=pl(n,2);s!==null&&Ir(s,n,2)}function Hd(n){var s=tr();if(typeof n=="function"){var c=n;if(n=c(),Lo){Gn(!0);try{c()}finally{Gn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:n},s}function bm(n,s,c,g){return n.baseState=c,Fd(n,an,typeof g=="function"?g:aa)}function Vx(n,s,c,g,_){if(th(n))throw Error(a(485));if(n=s.action,n!==null){var T={payload:_,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){T.listeners.push(O)}};pe.T!==null?c(!0):T.isTransition=!1,g(T),c=s.pending,c===null?(T.next=s.pending=T,Sm(s,T)):(T.next=c.next,s.pending=c.next=T)}}function Sm(n,s){var c=s.action,g=s.payload,_=n.state;if(s.isTransition){var T=pe.T,O={};pe.T=O;try{var k=c(_,g),q=pe.S;q!==null&&q(O,k),Im(n,s,k)}catch(le){Gd(n,s,le)}finally{pe.T=T}}else try{T=c(_,g),Im(n,s,T)}catch(le){Gd(n,s,le)}}function Im(n,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Rm(n,s,g)},function(g){return Gd(n,s,g)}):Rm(n,s,c)}function Rm(n,s,c){s.status="fulfilled",s.value=c,Nm(s),n.state=c,s=n.pending,s!==null&&(c=s.next,c===s?n.pending=null:(c=c.next,s.next=c,Sm(n,c)))}function Gd(n,s,c){var g=n.pending;if(n.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,Nm(s),s=s.next;while(s!==g)}n.action=null}function Nm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Om(n,s){return s}function Dm(n,s){if(Wt){var c=dn.formState;if(c!==null){e:{var g=wt;if(Wt){if(Bn){t:{for(var _=Bn,T=Ts;_.nodeType!==8;){if(!T){_=null;break t}if(_=as(_.nextSibling),_===null){_=null;break t}}T=_.data,_=T==="F!"||T==="F"?_:null}if(_){Bn=as(_.nextSibling),g=_.data==="F!";break e}}Oo(g)}g=!1}g&&(s=c[0])}}return c=tr(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Om,lastRenderedState:s},c.queue=g,c=Zm.bind(null,wt,g),g.dispatch=c,g=Hd(!1),T=Kd.bind(null,wt,!1,g.queue),g=tr(),_={state:s,dispatch:null,action:n,pending:null},g.queue=_,c=Vx.bind(null,wt,_,T,c),_.dispatch=c,g.memoizedState=n,[s,c,!1]}function Mm(n){var s=Jn();return Pm(s,an,n)}function Pm(n,s,c){if(s=Fd(n,s,Om)[0],n=Ju(aa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=vc(s)}catch(O){throw O===_c?Xu:O}else g=s;s=Jn();var _=s.queue,T=_.dispatch;return c!==s.memoizedState&&(wt.flags|=2048,vl(9,$u(),Ux.bind(null,_,c),null)),[g,T,n]}function Ux(n,s){n.action=s}function Lm(n){var s=Jn(),c=an;if(c!==null)return Pm(s,c,n);Jn(),s=s.memoizedState,c=Jn();var g=c.queue.dispatch;return c.memoizedState=n,[s,g,!1]}function vl(n,s,c,g){return n={tag:n,create:c,deps:g,inst:s,next:null},s=wt.updateQueue,s===null&&(s=Vd(),wt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=n.next=n:(g=c.next,c.next=n,n.next=g,s.lastEffect=n),n}function $u(){return{destroy:void 0,resource:void 0}}function km(){return Jn().memoizedState}function eh(n,s,c,g){var _=tr();g=g===void 0?null:g,wt.flags|=n,_.memoizedState=vl(1|s,$u(),c,g)}function bc(n,s,c,g){var _=Jn();g=g===void 0?null:g;var T=_.memoizedState.inst;an!==null&&g!==null&&Md(g,an.memoizedState.deps)?_.memoizedState=vl(s,T,c,g):(wt.flags|=n,_.memoizedState=vl(1|s,T,c,g))}function Bm(n,s){eh(8390656,8,n,s)}function Vm(n,s){bc(2048,8,n,s)}function Um(n,s){return bc(4,2,n,s)}function Fm(n,s){return bc(4,4,n,s)}function zm(n,s){if(typeof s=="function"){n=n();var c=s(n);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Hm(n,s,c){c=c!=null?c.concat([n]):null,bc(4,4,zm.bind(null,s,n),c)}function jd(){}function Gm(n,s){var c=Jn();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&Md(s,g[1])?g[0]:(c.memoizedState=[n,s],n)}function jm(n,s){var c=Jn();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&Md(s,g[1]))return g[0];if(g=n(),Lo){Gn(!0);try{n()}finally{Gn(!1)}}return c.memoizedState=[g,s],g}function qd(n,s,c){return c===void 0||(ka&1073741824)!==0?n.memoizedState=s:(n.memoizedState=c,n=Yp(),wt.lanes|=n,Ga|=n,c)}function qm(n,s,c,g){return h(c,s)?c:xl.current!==null?(n=qd(n,c,g),h(n,s)||(di=!0),n):(ka&42)===0?(di=!0,n.memoizedState=c):(n=Yp(),wt.lanes|=n,Ga|=n,s)}function Xm(n,s,c,g,_){var T=Ae.p;Ae.p=T!==0&&8>T?T:8;var O=pe.T,k={};pe.T=k,Kd(n,!1,s,c);try{var q=_(),le=pe.S;if(le!==null&&le(k,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var _e=Lx(q,g);Sc(n,s,_e,Sr(n))}else Sc(n,s,g,Sr(n))}catch(Ce){Sc(n,s,{then:function(){},status:"rejected",reason:Ce},Sr())}finally{Ae.p=T,pe.T=O}}function Fx(){}function Xd(n,s,c,g){if(n.tag!==5)throw Error(a(476));var _=Ym(n).queue;Xm(n,_,s,qe,c===null?Fx:function(){return Km(n),c(g)})}function Ym(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:qe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:c},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Km(n){var s=Ym(n).next.queue;Sc(n,s,{},Sr())}function Yd(){return Bi(qc)}function Wm(){return Jn().memoizedState}function Qm(){return Jn().memoizedState}function zx(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var c=Sr();n=Pa(c);var g=La(s,n,c);g!==null&&(Ir(g,s,c),wc(g,s,c)),s={cache:Td()},n.payload=s;return}s=s.return}}function Hx(n,s,c){var g=Sr();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},th(n)?Jm(s,c):(c=dd(n,s,c,g),c!==null&&(Ir(c,n,g),$m(c,s,g)))}function Zm(n,s,c){var g=Sr();Sc(n,s,c,g)}function Sc(n,s,c,g){var _={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(th(n))Jm(s,_);else{var T=n.alternate;if(n.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var O=s.lastRenderedState,k=T(O,c);if(_.hasEagerState=!0,_.eagerState=k,h(k,O))return Vu(n,s,_,0),dn===null&&Bu(),!1}catch{}finally{}if(c=dd(n,s,_,g),c!==null)return Ir(c,n,g),$m(c,s,g),!0}return!1}function Kd(n,s,c,g){if(g={lane:2,revertLane:b1(),action:g,hasEagerState:!1,eagerState:null,next:null},th(n)){if(s)throw Error(a(479))}else s=dd(n,c,g,2),s!==null&&Ir(s,n,2)}function th(n){var s=n.alternate;return n===wt||s!==null&&s===wt}function Jm(n,s){Tl=Wu=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function $m(n,s,c){if((c&4194048)!==0){var g=s.lanes;g&=n.pendingLanes,c|=g,s.lanes=c,Qn(n,c)}}var nh={readContext:Bi,use:Zu,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn,useHostTransitionStatus:Xn,useFormState:Xn,useActionState:Xn,useOptimistic:Xn,useMemoCache:Xn,useCacheRefresh:Xn},ep={readContext:Bi,use:Zu,useCallback:function(n,s){return tr().memoizedState=[n,s===void 0?null:s],n},useContext:Bi,useEffect:Bm,useImperativeHandle:function(n,s,c){c=c!=null?c.concat([n]):null,eh(4194308,4,zm.bind(null,s,n),c)},useLayoutEffect:function(n,s){return eh(4194308,4,n,s)},useInsertionEffect:function(n,s){eh(4,2,n,s)},useMemo:function(n,s){var c=tr();s=s===void 0?null:s;var g=n();if(Lo){Gn(!0);try{n()}finally{Gn(!1)}}return c.memoizedState=[g,s],g},useReducer:function(n,s,c){var g=tr();if(c!==void 0){var _=c(s);if(Lo){Gn(!0);try{c(s)}finally{Gn(!1)}}}else _=s;return g.memoizedState=g.baseState=_,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:_},g.queue=n,n=n.dispatch=Hx.bind(null,wt,n),[g.memoizedState,n]},useRef:function(n){var s=tr();return n={current:n},s.memoizedState=n},useState:function(n){n=Hd(n);var s=n.queue,c=Zm.bind(null,wt,s);return s.dispatch=c,[n.memoizedState,c]},useDebugValue:jd,useDeferredValue:function(n,s){var c=tr();return qd(c,n,s)},useTransition:function(){var n=Hd(!1);return n=Xm.bind(null,wt,n.queue,!0,!1),tr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,c){var g=wt,_=tr();if(Wt){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),dn===null)throw Error(a(349));(Lt&124)!==0||wm(g,s,c)}_.memoizedState=c;var T={value:c,getSnapshot:s};return _.queue=T,Bm(Tm.bind(null,g,T,n),[n]),g.flags|=2048,vl(9,$u(),xm.bind(null,g,T,c,s),null),c},useId:function(){var n=tr(),s=dn.identifierPrefix;if(Wt){var c=ia,g=na;c=(g&~(1<<32-qt(g)-1)).toString(32)+c,s="«"+s+"R"+c,c=Qu++,0<c&&(s+="H"+c.toString(32)),s+="»"}else c=kx++,s="«"+s+"r"+c.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:Yd,useFormState:Dm,useActionState:Dm,useOptimistic:function(n){var s=tr();s.memoizedState=s.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Kd.bind(null,wt,!0,c),c.dispatch=s,[n,s]},useMemoCache:Ud,useCacheRefresh:function(){return tr().memoizedState=zx.bind(null,wt)}},tp={readContext:Bi,use:Zu,useCallback:Gm,useContext:Bi,useEffect:Vm,useImperativeHandle:Hm,useInsertionEffect:Um,useLayoutEffect:Fm,useMemo:jm,useReducer:Ju,useRef:km,useState:function(){return Ju(aa)},useDebugValue:jd,useDeferredValue:function(n,s){var c=Jn();return qm(c,an.memoizedState,n,s)},useTransition:function(){var n=Ju(aa)[0],s=Jn().memoizedState;return[typeof n=="boolean"?n:vc(n),s]},useSyncExternalStore:Am,useId:Wm,useHostTransitionStatus:Yd,useFormState:Mm,useActionState:Mm,useOptimistic:function(n,s){var c=Jn();return bm(c,an,n,s)},useMemoCache:Ud,useCacheRefresh:Qm},Gx={readContext:Bi,use:Zu,useCallback:Gm,useContext:Bi,useEffect:Vm,useImperativeHandle:Hm,useInsertionEffect:Um,useLayoutEffect:Fm,useMemo:jm,useReducer:zd,useRef:km,useState:function(){return zd(aa)},useDebugValue:jd,useDeferredValue:function(n,s){var c=Jn();return an===null?qd(c,n,s):qm(c,an.memoizedState,n,s)},useTransition:function(){var n=zd(aa)[0],s=Jn().memoizedState;return[typeof n=="boolean"?n:vc(n),s]},useSyncExternalStore:Am,useId:Wm,useHostTransitionStatus:Yd,useFormState:Lm,useActionState:Lm,useOptimistic:function(n,s){var c=Jn();return an!==null?bm(c,an,n,s):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:Qm},bl=null,Ic=0;function ih(n){var s=Ic;return Ic+=1,bl===null&&(bl=[]),fm(bl,n,s)}function Rc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function rh(n,s){throw s.$$typeof===R?Error(a(525)):(n=Object.prototype.toString.call(s),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function np(n){var s=n._init;return s(n._payload)}function ip(n){function s(ie,te){if(n){var oe=ie.deletions;oe===null?(ie.deletions=[te],ie.flags|=16):oe.push(te)}}function c(ie,te){if(!n)return null;for(;te!==null;)s(ie,te),te=te.sibling;return null}function g(ie){for(var te=new Map;ie!==null;)ie.key!==null?te.set(ie.key,ie):te.set(ie.index,ie),ie=ie.sibling;return te}function _(ie,te){return ie=ta(ie,te),ie.index=0,ie.sibling=null,ie}function T(ie,te,oe){return ie.index=oe,n?(oe=ie.alternate,oe!==null?(oe=oe.index,oe<te?(ie.flags|=67108866,te):oe):(ie.flags|=67108866,te)):(ie.flags|=1048576,te)}function O(ie){return n&&ie.alternate===null&&(ie.flags|=67108866),ie}function k(ie,te,oe,we){return te===null||te.tag!==6?(te=md(oe,ie.mode,we),te.return=ie,te):(te=_(te,oe),te.return=ie,te)}function q(ie,te,oe,we){var je=oe.type;return je===Q?_e(ie,te,oe.props.children,we,oe.key):te!==null&&(te.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===z&&np(je)===te.type)?(te=_(te,oe.props),Rc(te,oe),te.return=ie,te):(te=Fu(oe.type,oe.key,oe.props,null,ie.mode,we),Rc(te,oe),te.return=ie,te)}function le(ie,te,oe,we){return te===null||te.tag!==4||te.stateNode.containerInfo!==oe.containerInfo||te.stateNode.implementation!==oe.implementation?(te=pd(oe,ie.mode,we),te.return=ie,te):(te=_(te,oe.children||[]),te.return=ie,te)}function _e(ie,te,oe,we,je){return te===null||te.tag!==7?(te=So(oe,ie.mode,we,je),te.return=ie,te):(te=_(te,oe),te.return=ie,te)}function Ce(ie,te,oe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=md(""+te,ie.mode,oe),te.return=ie,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case P:return oe=Fu(te.type,te.key,te.props,null,ie.mode,oe),Rc(oe,te),oe.return=ie,oe;case G:return te=pd(te,ie.mode,oe),te.return=ie,te;case z:var we=te._init;return te=we(te._payload),Ce(ie,te,oe)}if(ce(te)||K(te))return te=So(te,ie.mode,oe,null),te.return=ie,te;if(typeof te.then=="function")return Ce(ie,ih(te),oe);if(te.$$typeof===ne)return Ce(ie,ju(ie,te),oe);rh(ie,te)}return null}function he(ie,te,oe,we){var je=te!==null?te.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return je!==null?null:k(ie,te,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case P:return oe.key===je?q(ie,te,oe,we):null;case G:return oe.key===je?le(ie,te,oe,we):null;case z:return je=oe._init,oe=je(oe._payload),he(ie,te,oe,we)}if(ce(oe)||K(oe))return je!==null?null:_e(ie,te,oe,we,null);if(typeof oe.then=="function")return he(ie,te,ih(oe),we);if(oe.$$typeof===ne)return he(ie,te,ju(ie,oe),we);rh(ie,oe)}return null}function ge(ie,te,oe,we,je){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ie=ie.get(oe)||null,k(te,ie,""+we,je);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case P:return ie=ie.get(we.key===null?oe:we.key)||null,q(te,ie,we,je);case G:return ie=ie.get(we.key===null?oe:we.key)||null,le(te,ie,we,je);case z:var vt=we._init;return we=vt(we._payload),ge(ie,te,oe,we,je)}if(ce(we)||K(we))return ie=ie.get(oe)||null,_e(te,ie,we,je,null);if(typeof we.then=="function")return ge(ie,te,oe,ih(we),je);if(we.$$typeof===ne)return ge(ie,te,oe,ju(te,we),je);rh(te,we)}return null}function at(ie,te,oe,we){for(var je=null,vt=null,Qe=te,nt=te=0,mi=null;Qe!==null&&nt<oe.length;nt++){Qe.index>nt?(mi=Qe,Qe=null):mi=Qe.sibling;var Gt=he(ie,Qe,oe[nt],we);if(Gt===null){Qe===null&&(Qe=mi);break}n&&Qe&&Gt.alternate===null&&s(ie,Qe),te=T(Gt,te,nt),vt===null?je=Gt:vt.sibling=Gt,vt=Gt,Qe=mi}if(nt===oe.length)return c(ie,Qe),Wt&&Ro(ie,nt),je;if(Qe===null){for(;nt<oe.length;nt++)Qe=Ce(ie,oe[nt],we),Qe!==null&&(te=T(Qe,te,nt),vt===null?je=Qe:vt.sibling=Qe,vt=Qe);return Wt&&Ro(ie,nt),je}for(Qe=g(Qe);nt<oe.length;nt++)mi=ge(Qe,ie,nt,oe[nt],we),mi!==null&&(n&&mi.alternate!==null&&Qe.delete(mi.key===null?nt:mi.key),te=T(mi,te,nt),vt===null?je=mi:vt.sibling=mi,vt=mi);return n&&Qe.forEach(function(Ja){return s(ie,Ja)}),Wt&&Ro(ie,nt),je}function $e(ie,te,oe,we){if(oe==null)throw Error(a(151));for(var je=null,vt=null,Qe=te,nt=te=0,mi=null,Gt=oe.next();Qe!==null&&!Gt.done;nt++,Gt=oe.next()){Qe.index>nt?(mi=Qe,Qe=null):mi=Qe.sibling;var Ja=he(ie,Qe,Gt.value,we);if(Ja===null){Qe===null&&(Qe=mi);break}n&&Qe&&Ja.alternate===null&&s(ie,Qe),te=T(Ja,te,nt),vt===null?je=Ja:vt.sibling=Ja,vt=Ja,Qe=mi}if(Gt.done)return c(ie,Qe),Wt&&Ro(ie,nt),je;if(Qe===null){for(;!Gt.done;nt++,Gt=oe.next())Gt=Ce(ie,Gt.value,we),Gt!==null&&(te=T(Gt,te,nt),vt===null?je=Gt:vt.sibling=Gt,vt=Gt);return Wt&&Ro(ie,nt),je}for(Qe=g(Qe);!Gt.done;nt++,Gt=oe.next())Gt=ge(Qe,ie,nt,Gt.value,we),Gt!==null&&(n&&Gt.alternate!==null&&Qe.delete(Gt.key===null?nt:Gt.key),te=T(Gt,te,nt),vt===null?je=Gt:vt.sibling=Gt,vt=Gt);return n&&Qe.forEach(function(jT){return s(ie,jT)}),Wt&&Ro(ie,nt),je}function ln(ie,te,oe,we){if(typeof oe=="object"&&oe!==null&&oe.type===Q&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case P:e:{for(var je=oe.key;te!==null;){if(te.key===je){if(je=oe.type,je===Q){if(te.tag===7){c(ie,te.sibling),we=_(te,oe.props.children),we.return=ie,ie=we;break e}}else if(te.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===z&&np(je)===te.type){c(ie,te.sibling),we=_(te,oe.props),Rc(we,oe),we.return=ie,ie=we;break e}c(ie,te);break}else s(ie,te);te=te.sibling}oe.type===Q?(we=So(oe.props.children,ie.mode,we,oe.key),we.return=ie,ie=we):(we=Fu(oe.type,oe.key,oe.props,null,ie.mode,we),Rc(we,oe),we.return=ie,ie=we)}return O(ie);case G:e:{for(je=oe.key;te!==null;){if(te.key===je)if(te.tag===4&&te.stateNode.containerInfo===oe.containerInfo&&te.stateNode.implementation===oe.implementation){c(ie,te.sibling),we=_(te,oe.children||[]),we.return=ie,ie=we;break e}else{c(ie,te);break}else s(ie,te);te=te.sibling}we=pd(oe,ie.mode,we),we.return=ie,ie=we}return O(ie);case z:return je=oe._init,oe=je(oe._payload),ln(ie,te,oe,we)}if(ce(oe))return at(ie,te,oe,we);if(K(oe)){if(je=K(oe),typeof je!="function")throw Error(a(150));return oe=je.call(oe),$e(ie,te,oe,we)}if(typeof oe.then=="function")return ln(ie,te,ih(oe),we);if(oe.$$typeof===ne)return ln(ie,te,ju(ie,oe),we);rh(ie,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,te!==null&&te.tag===6?(c(ie,te.sibling),we=_(te,oe),we.return=ie,ie=we):(c(ie,te),we=md(oe,ie.mode,we),we.return=ie,ie=we),O(ie)):c(ie,te)}return function(ie,te,oe,we){try{Ic=0;var je=ln(ie,te,oe,we);return bl=null,je}catch(Qe){if(Qe===_c||Qe===Xu)throw Qe;var vt=Tr(29,Qe,null,ie.mode);return vt.lanes=we,vt.return=ie,vt}finally{}}}var Sl=ip(!0),rp=ip(!1),zr=be(null),Cs=null;function Ba(n){var s=n.alternate;Be(si,si.current&1),Be(zr,n),Cs===null&&(s===null||xl.current!==null||s.memoizedState!==null)&&(Cs=n)}function sp(n){if(n.tag===22){if(Be(si,si.current),Be(zr,n),Cs===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Cs=n)}}else Va()}function Va(){Be(si,si.current),Be(zr,zr.current)}function oa(n){Le(zr),Cs===n&&(Cs=null),Le(si)}var si=be(0);function sh(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||V1(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Wd(n,s,c,g){s=n.memoizedState,c=c(g,s),c=c==null?s:b({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Qd={enqueueSetState:function(n,s,c){n=n._reactInternals;var g=Sr(),_=Pa(g);_.payload=s,c!=null&&(_.callback=c),s=La(n,_,g),s!==null&&(Ir(s,n,g),wc(s,n,g))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var g=Sr(),_=Pa(g);_.tag=1,_.payload=s,c!=null&&(_.callback=c),s=La(n,_,g),s!==null&&(Ir(s,n,g),wc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=Sr(),g=Pa(c);g.tag=2,s!=null&&(g.callback=s),s=La(n,g,c),s!==null&&(Ir(s,n,c),wc(s,n,c))}};function ap(n,s,c,g,_,T,O){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(g,T,O):s.prototype&&s.prototype.isPureReactComponent?!f(c,g)||!f(_,T):!0}function op(n,s,c,g){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==n&&Qd.enqueueReplaceState(s,s.state,null)}function ko(n,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(n=n.defaultProps){c===s&&(c=b({},c));for(var _ in n)c[_]===void 0&&(c[_]=n[_])}return c}var ah=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function lp(n){ah(n)}function cp(n){console.error(n)}function up(n){ah(n)}function oh(n,s){try{var c=n.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function hp(n,s,c){try{var g=n.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Zd(n,s,c){return c=Pa(c),c.tag=3,c.payload={element:null},c.callback=function(){oh(n,s)},c}function fp(n){return n=Pa(n),n.tag=3,n}function dp(n,s,c,g){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var T=g.value;n.payload=function(){return _(T)},n.callback=function(){hp(s,c,g)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(n.callback=function(){hp(s,c,g),typeof _!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function jx(n,s,c,g,_){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&pc(s,c,_,!0),c=zr.current,c!==null){switch(c.tag){case 13:return Cs===null?w1():c.alternate===null&&Vn===0&&(Vn=3),c.flags&=-257,c.flags|=65536,c.lanes=_,g===bd?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),T1(n,g,_)),!1;case 22:return c.flags|=65536,g===bd?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),T1(n,g,_)),!1}throw Error(a(435,c.tag))}return T1(n,g,_),w1(),!1}if(Wt)return s=zr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=_,g!==_d&&(n=Error(a(422),{cause:g}),mc(Br(n,c)))):(g!==_d&&(s=Error(a(423),{cause:g}),mc(Br(s,c))),n=n.current.alternate,n.flags|=65536,_&=-_,n.lanes|=_,g=Br(g,c),_=Zd(n.stateNode,g,_),Rd(n,_),Vn!==4&&(Vn=2)),!1;var T=Error(a(520),{cause:g});if(T=Br(T,c),kc===null?kc=[T]:kc.push(T),Vn!==4&&(Vn=2),s===null)return!0;g=Br(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,n=_&-_,c.lanes|=n,n=Zd(c.stateNode,g,n),Rd(c,n),!1;case 1:if(s=c.type,T=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ja===null||!ja.has(T))))return c.flags|=65536,_&=-_,c.lanes|=_,_=fp(_),dp(_,n,c,g),Rd(c,_),!1}c=c.return}while(c!==null);return!1}var gp=Error(a(461)),di=!1;function Ti(n,s,c,g){s.child=n===null?rp(s,null,c,g):Sl(s,n.child,c,g)}function mp(n,s,c,g,_){c=c.render;var T=s.ref;if("ref"in g){var O={};for(var k in g)k!=="ref"&&(O[k]=g[k])}else O=g;return Mo(s),g=Pd(n,s,c,O,T,_),k=Ld(),n!==null&&!di?(kd(n,s,_),la(n,s,_)):(Wt&&k&&yd(s),s.flags|=1,Ti(n,s,g,_),s.child)}function pp(n,s,c,g,_){if(n===null){var T=c.type;return typeof T=="function"&&!gd(T)&&T.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=T,yp(n,s,T,g,_)):(n=Fu(c.type,null,g,s,s.mode,_),n.ref=s.ref,n.return=s,s.child=n)}if(T=n.child,!s1(n,_)){var O=T.memoizedProps;if(c=c.compare,c=c!==null?c:f,c(O,g)&&n.ref===s.ref)return la(n,s,_)}return s.flags|=1,n=ta(T,g),n.ref=s.ref,n.return=s,s.child=n}function yp(n,s,c,g,_){if(n!==null){var T=n.memoizedProps;if(f(T,g)&&n.ref===s.ref)if(di=!1,s.pendingProps=g=T,s1(n,_))(n.flags&131072)!==0&&(di=!0);else return s.lanes=n.lanes,la(n,s,_)}return Jd(n,s,c,g,_)}function Ep(n,s,c){var g=s.pendingProps,_=g.children,T=n!==null?n.memoizedState:null;if(g.mode==="hidden"){if((s.flags&128)!==0){if(g=T!==null?T.baseLanes|c:c,n!==null){for(_=s.child=n.child,T=0;_!==null;)T=T|_.lanes|_.childLanes,_=_.sibling;s.childLanes=T&~g}else s.childLanes=0,s.child=null;return _p(n,s,g,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&qu(s,T!==null?T.cachePool:null),T!==null?ym(s,T):Od(),sp(s);else return s.lanes=s.childLanes=536870912,_p(n,s,T!==null?T.baseLanes|c:c,c)}else T!==null?(qu(s,T.cachePool),ym(s,T),Va(),s.memoizedState=null):(n!==null&&qu(s,null),Od(),Va());return Ti(n,s,_,c),s.child}function _p(n,s,c,g){var _=vd();return _=_===null?null:{parent:ri._currentValue,pool:_},s.memoizedState={baseLanes:c,cachePool:_},n!==null&&qu(s,null),Od(),sp(s),n!==null&&pc(n,s,g,!0),null}function lh(n,s){var c=s.ref;if(c===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(n===null||n.ref!==c)&&(s.flags|=4194816)}}function Jd(n,s,c,g,_){return Mo(s),c=Pd(n,s,c,g,void 0,_),g=Ld(),n!==null&&!di?(kd(n,s,_),la(n,s,_)):(Wt&&g&&yd(s),s.flags|=1,Ti(n,s,c,_),s.child)}function Ap(n,s,c,g,_,T){return Mo(s),s.updateQueue=null,c=_m(s,g,c,_),Em(n),g=Ld(),n!==null&&!di?(kd(n,s,T),la(n,s,T)):(Wt&&g&&yd(s),s.flags|=1,Ti(n,s,c,T),s.child)}function wp(n,s,c,g,_){if(Mo(s),s.stateNode===null){var T=yl,O=c.contextType;typeof O=="object"&&O!==null&&(T=Bi(O)),T=new c(g,T),s.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Qd,s.stateNode=T,T._reactInternals=s,T=s.stateNode,T.props=g,T.state=s.memoizedState,T.refs={},Sd(s),O=c.contextType,T.context=typeof O=="object"&&O!==null?Bi(O):yl,T.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Wd(s,c,O,g),T.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(O=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),O!==T.state&&Qd.enqueueReplaceState(T,T.state,null),Tc(s,g,T,_),xc(),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(n===null){T=s.stateNode;var k=s.memoizedProps,q=ko(c,k);T.props=q;var le=T.context,_e=c.contextType;O=yl,typeof _e=="object"&&_e!==null&&(O=Bi(_e));var Ce=c.getDerivedStateFromProps;_e=typeof Ce=="function"||typeof T.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,_e||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k||le!==O)&&op(s,T,g,O),Ma=!1;var he=s.memoizedState;T.state=he,Tc(s,g,T,_),xc(),le=s.memoizedState,k||he!==le||Ma?(typeof Ce=="function"&&(Wd(s,c,Ce,g),le=s.memoizedState),(q=Ma||ap(s,c,q,g,he,le,O))?(_e||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=le),T.props=g,T.state=le,T.context=O,g=q):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{T=s.stateNode,Id(n,s),O=s.memoizedProps,_e=ko(c,O),T.props=_e,Ce=s.pendingProps,he=T.context,le=c.contextType,q=yl,typeof le=="object"&&le!==null&&(q=Bi(le)),k=c.getDerivedStateFromProps,(le=typeof k=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==Ce||he!==q)&&op(s,T,g,q),Ma=!1,he=s.memoizedState,T.state=he,Tc(s,g,T,_),xc();var ge=s.memoizedState;O!==Ce||he!==ge||Ma||n!==null&&n.dependencies!==null&&Gu(n.dependencies)?(typeof k=="function"&&(Wd(s,c,k,g),ge=s.memoizedState),(_e=Ma||ap(s,c,_e,g,he,ge,q)||n!==null&&n.dependencies!==null&&Gu(n.dependencies))?(le||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,ge,q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,ge,q)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=ge),T.props=g,T.state=ge,T.context=q,g=_e):(typeof T.componentDidUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&he===n.memoizedState||(s.flags|=1024),g=!1)}return T=g,lh(n,s),g=(s.flags&128)!==0,T||g?(T=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:T.render(),s.flags|=1,n!==null&&g?(s.child=Sl(s,n.child,null,_),s.child=Sl(s,null,c,_)):Ti(n,s,c,_),s.memoizedState=T.state,n=s.child):n=la(n,s,_),n}function xp(n,s,c,g){return gc(),s.flags|=256,Ti(n,s,c,g),s.child}var $d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e1(n){return{baseLanes:n,cachePool:cm()}}function t1(n,s,c){return n=n!==null?n.childLanes&~c:0,s&&(n|=Hr),n}function Tp(n,s,c){var g=s.pendingProps,_=!1,T=(s.flags&128)!==0,O;if((O=T)||(O=n!==null&&n.memoizedState===null?!1:(si.current&2)!==0),O&&(_=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,n===null){if(Wt){if(_?Ba(s):Va(),Wt){var k=Bn,q;if(q=k){e:{for(q=k,k=Ts;q.nodeType!==8;){if(!k){k=null;break e}if(q=as(q.nextSibling),q===null){k=null;break e}}k=q}k!==null?(s.memoizedState={dehydrated:k,treeContext:Io!==null?{id:na,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},q=Tr(18,null,null,0),q.stateNode=k,q.return=s,s.child=q,Wi=s,Bn=null,q=!0):q=!1}q||Oo(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return V1(k)?s.lanes=32:s.lanes=536870912,null;oa(s)}return k=g.children,g=g.fallback,_?(Va(),_=s.mode,k=ch({mode:"hidden",children:k},_),g=So(g,_,c,null),k.return=s,g.return=s,k.sibling=g,s.child=k,_=s.child,_.memoizedState=e1(c),_.childLanes=t1(n,O,c),s.memoizedState=$d,g):(Ba(s),n1(s,k))}if(q=n.memoizedState,q!==null&&(k=q.dehydrated,k!==null)){if(T)s.flags&256?(Ba(s),s.flags&=-257,s=i1(n,s,c)):s.memoizedState!==null?(Va(),s.child=n.child,s.flags|=128,s=null):(Va(),_=g.fallback,k=s.mode,g=ch({mode:"visible",children:g.children},k),_=So(_,k,c,null),_.flags|=2,g.return=s,_.return=s,g.sibling=_,s.child=g,Sl(s,n.child,null,c),g=s.child,g.memoizedState=e1(c),g.childLanes=t1(n,O,c),s.memoizedState=$d,s=_);else if(Ba(s),V1(k)){if(O=k.nextSibling&&k.nextSibling.dataset,O)var le=O.dgst;O=le,g=Error(a(419)),g.stack="",g.digest=O,mc({value:g,source:null,stack:null}),s=i1(n,s,c)}else if(di||pc(n,s,c,!1),O=(c&n.childLanes)!==0,di||O){if(O=dn,O!==null&&(g=c&-c,g=(g&42)!==0?1:Gs(g),g=(g&(O.suspendedLanes|c))!==0?0:g,g!==0&&g!==q.retryLane))throw q.retryLane=g,pl(n,g),Ir(O,n,g),gp;k.data==="$?"||w1(),s=i1(n,s,c)}else k.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=q.treeContext,Bn=as(k.nextSibling),Wi=s,Wt=!0,No=null,Ts=!1,n!==null&&(Ur[Fr++]=na,Ur[Fr++]=ia,Ur[Fr++]=Io,na=n.id,ia=n.overflow,Io=s),s=n1(s,g.children),s.flags|=4096);return s}return _?(Va(),_=g.fallback,k=s.mode,q=n.child,le=q.sibling,g=ta(q,{mode:"hidden",children:g.children}),g.subtreeFlags=q.subtreeFlags&65011712,le!==null?_=ta(le,_):(_=So(_,k,c,null),_.flags|=2),_.return=s,g.return=s,g.sibling=_,s.child=g,g=_,_=s.child,k=n.child.memoizedState,k===null?k=e1(c):(q=k.cachePool,q!==null?(le=ri._currentValue,q=q.parent!==le?{parent:le,pool:le}:q):q=cm(),k={baseLanes:k.baseLanes|c,cachePool:q}),_.memoizedState=k,_.childLanes=t1(n,O,c),s.memoizedState=$d,g):(Ba(s),c=n.child,n=c.sibling,c=ta(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,n!==null&&(O=s.deletions,O===null?(s.deletions=[n],s.flags|=16):O.push(n)),s.child=c,s.memoizedState=null,c)}function n1(n,s){return s=ch({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ch(n,s){return n=Tr(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function i1(n,s,c){return Sl(s,n.child,null,c),n=n1(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Cp(n,s,c){n.lanes|=s;var g=n.alternate;g!==null&&(g.lanes|=s),wd(n.return,s,c)}function r1(n,s,c,g,_){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:_}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=c,T.tailMode=_)}function vp(n,s,c){var g=s.pendingProps,_=g.revealOrder,T=g.tail;if(Ti(n,s,g.children,c),g=si.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Cp(n,c,s);else if(n.tag===19)Cp(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}g&=1}switch(Be(si,g),_){case"forwards":for(c=s.child,_=null;c!==null;)n=c.alternate,n!==null&&sh(n)===null&&(_=c),c=c.sibling;c=_,c===null?(_=s.child,s.child=null):(_=c.sibling,c.sibling=null),r1(s,!1,_,c,T);break;case"backwards":for(c=null,_=s.child,s.child=null;_!==null;){if(n=_.alternate,n!==null&&sh(n)===null){s.child=_;break}n=_.sibling,_.sibling=c,c=_,_=n}r1(s,!0,c,null,T);break;case"together":r1(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function la(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),Ga|=s.lanes,(c&s.childLanes)===0)if(n!==null){if(pc(n,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(a(153));if(s.child!==null){for(n=s.child,c=ta(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=ta(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function s1(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Gu(n)))}function qx(n,s,c){switch(s.tag){case 3:ot(s,s.stateNode.containerInfo),Da(s,ri,n.memoizedState.cache),gc();break;case 27:case 5:Kr(s);break;case 4:ot(s,s.stateNode.containerInfo);break;case 10:Da(s,s.type,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Ba(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Tp(n,s,c):(Ba(s),n=la(n,s,c),n!==null?n.sibling:null);Ba(s);break;case 19:var _=(n.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(pc(n,s,c,!1),g=(c&s.childLanes)!==0),_){if(g)return vp(n,s,c);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Be(si,si.current),g)break;return null;case 22:case 23:return s.lanes=0,Ep(n,s,c);case 24:Da(s,ri,n.memoizedState.cache)}return la(n,s,c)}function bp(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps)di=!0;else{if(!s1(n,c)&&(s.flags&128)===0)return di=!1,qx(n,s,c);di=(n.flags&131072)!==0}else di=!1,Wt&&(s.flags&1048576)!==0&&nm(s,Hu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var g=s.elementType,_=g._init;if(g=_(g._payload),s.type=g,typeof g=="function")gd(g)?(n=ko(g,n),s.tag=1,s=wp(null,s,g,n,c)):(s.tag=0,s=Jd(null,s,g,n,c));else{if(g!=null){if(_=g.$$typeof,_===Se){s.tag=11,s=mp(null,s,g,n,c);break e}else if(_===F){s.tag=14,s=pp(null,s,g,n,c);break e}}throw s=it(g)||g,Error(a(306,s,""))}}return s;case 0:return Jd(n,s,s.type,s.pendingProps,c);case 1:return g=s.type,_=ko(g,s.pendingProps),wp(n,s,g,_,c);case 3:e:{if(ot(s,s.stateNode.containerInfo),n===null)throw Error(a(387));g=s.pendingProps;var T=s.memoizedState;_=T.element,Id(n,s),Tc(s,g,null,c);var O=s.memoizedState;if(g=O.cache,Da(s,ri,g),g!==T.cache&&xd(s,[ri],c,!0),xc(),g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){s=xp(n,s,g,c);break e}else if(g!==_){_=Br(Error(a(424)),s),mc(_),s=xp(n,s,g,c);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Bn=as(n.firstChild),Wi=s,Wt=!0,No=null,Ts=!0,c=rp(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(gc(),g===_){s=la(n,s,c);break e}Ti(n,s,g,c)}s=s.child}return s;case 26:return lh(n,s),n===null?(c=N2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Wt||(c=s.type,n=s.pendingProps,g=Th(Ne.current).createElement(c),g[bn]=s,g[gn]=n,vi(g,c,n),Ft(g),s.stateNode=g):s.memoizedState=N2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Kr(s),n===null&&Wt&&(g=s.stateNode=S2(s.type,s.pendingProps,Ne.current),Wi=s,Ts=!0,_=Bn,Ya(s.type)?(U1=_,Bn=as(g.firstChild)):Bn=_),Ti(n,s,s.pendingProps.children,c),lh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Wt&&((_=g=Bn)&&(g=_T(g,s.type,s.pendingProps,Ts),g!==null?(s.stateNode=g,Wi=s,Bn=as(g.firstChild),Ts=!1,_=!0):_=!1),_||Oo(s)),Kr(s),_=s.type,T=s.pendingProps,O=n!==null?n.memoizedProps:null,g=T.children,L1(_,T)?g=null:O!==null&&L1(_,O)&&(s.flags|=32),s.memoizedState!==null&&(_=Pd(n,s,Bx,null,null,c),qc._currentValue=_),lh(n,s),Ti(n,s,g,c),s.child;case 6:return n===null&&Wt&&((n=c=Bn)&&(c=AT(c,s.pendingProps,Ts),c!==null?(s.stateNode=c,Wi=s,Bn=null,n=!0):n=!1),n||Oo(s)),null;case 13:return Tp(n,s,c);case 4:return ot(s,s.stateNode.containerInfo),g=s.pendingProps,n===null?s.child=Sl(s,null,g,c):Ti(n,s,g,c),s.child;case 11:return mp(n,s,s.type,s.pendingProps,c);case 7:return Ti(n,s,s.pendingProps,c),s.child;case 8:return Ti(n,s,s.pendingProps.children,c),s.child;case 12:return Ti(n,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Da(s,s.type,g.value),Ti(n,s,g.children,c),s.child;case 9:return _=s.type._context,g=s.pendingProps.children,Mo(s),_=Bi(_),g=g(_),s.flags|=1,Ti(n,s,g,c),s.child;case 14:return pp(n,s,s.type,s.pendingProps,c);case 15:return yp(n,s,s.type,s.pendingProps,c);case 19:return vp(n,s,c);case 31:return g=s.pendingProps,c=s.mode,g={mode:g.mode,children:g.children},n===null?(c=ch(g,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=ta(n.child,g),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return Ep(n,s,c);case 24:return Mo(s),g=Bi(ri),n===null?(_=vd(),_===null&&(_=dn,T=Td(),_.pooledCache=T,T.refCount++,T!==null&&(_.pooledCacheLanes|=c),_=T),s.memoizedState={parent:g,cache:_},Sd(s),Da(s,ri,_)):((n.lanes&c)!==0&&(Id(n,s),Tc(s,null,null,c),xc()),_=n.memoizedState,T=s.memoizedState,_.parent!==g?(_={parent:g,cache:g},s.memoizedState=_,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=_),Da(s,ri,g)):(g=T.cache,Da(s,ri,g),g!==_.cache&&xd(s,[ri],c,!0))),Ti(n,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function ca(n){n.flags|=4}function Sp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!L2(s)){if(s=zr.current,s!==null&&((Lt&4194048)===Lt?Cs!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||s!==Cs))throw Ac=bd,um;n.flags|=8192}}function uh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Jr():536870912,n.lanes|=s,Ol|=s)}function Nc(n,s){if(!Wt)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:g.sibling=null}}function Rn(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,g=0;if(s)for(var _=n.child;_!==null;)c|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)c|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=g,n.childLanes=c,s}function Xx(n,s,c){var g=s.pendingProps;switch(Ed(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(s),null;case 1:return Rn(s),null;case 3:return c=s.stateNode,g=null,n!==null&&(g=n.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),sa(ri),Ei(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(dc(s)?ca(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sm())),Rn(s),null;case 26:return c=s.memoizedState,n===null?(ca(s),c!==null?(Rn(s),Sp(s,c)):(Rn(s),s.flags&=-16777217)):c?c!==n.memoizedState?(ca(s),Rn(s),Sp(s,c)):(Rn(s),s.flags&=-16777217):(n.memoizedProps!==g&&ca(s),Rn(s),s.flags&=-16777217),null;case 27:Hn(s),c=Ne.current;var _=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Rn(s),null}n=Fe.current,dc(s)?im(s):(n=S2(_,g,c),s.stateNode=n,ca(s))}return Rn(s),null;case 5:if(Hn(s),c=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return Rn(s),null}if(n=Fe.current,dc(s))im(s);else{switch(_=Th(Ne.current),n){case 1:n=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof g.is=="string"?_.createElement("select",{is:g.is}):_.createElement("select"),g.multiple?n.multiple=!0:g.size&&(n.size=g.size);break;default:n=typeof g.is=="string"?_.createElement(c,{is:g.is}):_.createElement(c)}}n[bn]=s,n[gn]=g;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)n.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=n;e:switch(vi(n,c,g),c){case"button":case"input":case"select":case"textarea":n=!!g.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ca(s)}}return Rn(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==g&&ca(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(n=Ne.current,dc(s)){if(n=s.stateNode,c=s.memoizedProps,g=null,_=Wi,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}n[bn]=s,n=!!(n.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||A2(n.nodeValue,c)),n||Oo(s)}else n=Th(n).createTextNode(g),n[bn]=s,s.stateNode=n}return Rn(s),null;case 13:if(g=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_=dc(s),g!==null&&g.dehydrated!==null){if(n===null){if(!_)throw Error(a(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(a(317));_[bn]=s}else gc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Rn(s),_=!1}else _=sm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=_),_=!0;if(!_)return s.flags&256?(oa(s),s):(oa(s),null)}if(oa(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=g!==null,n=n!==null&&n.memoizedState!==null,c){g=s.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool);var T=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==_&&(g.flags|=2048)}return c!==n&&c&&(s.child.flags|=8192),uh(s,s.updateQueue),Rn(s),null;case 4:return Ei(),n===null&&N1(s.stateNode.containerInfo),Rn(s),null;case 10:return sa(s.type),Rn(s),null;case 19:if(Le(si),_=s.memoizedState,_===null)return Rn(s),null;if(g=(s.flags&128)!==0,T=_.rendering,T===null)if(g)Nc(_,!1);else{if(Vn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(T=sh(n),T!==null){for(s.flags|=128,Nc(_,!1),n=T.updateQueue,s.updateQueue=n,uh(s,n),s.subtreeFlags=0,n=c,c=s.child;c!==null;)tm(c,n),c=c.sibling;return Be(si,si.current&1|2),s.child}n=n.sibling}_.tail!==null&&Ut()>dh&&(s.flags|=128,g=!0,Nc(_,!1),s.lanes=4194304)}else{if(!g)if(n=sh(T),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,uh(s,n),Nc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Wt)return Rn(s),null}else 2*Ut()-_.renderingStartTime>dh&&c!==536870912&&(s.flags|=128,g=!0,Nc(_,!1),s.lanes=4194304);_.isBackwards?(T.sibling=s.child,s.child=T):(n=_.last,n!==null?n.sibling=T:s.child=T,_.last=T)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=Ut(),s.sibling=null,n=si.current,Be(si,g?n&1|2:n&1),s):(Rn(s),null);case 22:case 23:return oa(s),Dd(),g=s.memoizedState!==null,n!==null?n.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(Rn(s),s.subtreeFlags&6&&(s.flags|=8192)):Rn(s),c=s.updateQueue,c!==null&&uh(s,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),n!==null&&Le(Po),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),sa(ri),Rn(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function Yx(n,s){switch(Ed(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return sa(ri),Ei(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Hn(s),null;case 13:if(oa(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(a(340));gc()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Le(si),null;case 4:return Ei(),null;case 10:return sa(s.type),null;case 22:case 23:return oa(s),Dd(),n!==null&&Le(Po),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return sa(ri),null;case 25:return null;default:return null}}function Ip(n,s){switch(Ed(s),s.tag){case 3:sa(ri),Ei();break;case 26:case 27:case 5:Hn(s);break;case 4:Ei();break;case 13:oa(s);break;case 19:Le(si);break;case 10:sa(s.type);break;case 22:case 23:oa(s),Dd(),n!==null&&Le(Po);break;case 24:sa(ri)}}function Oc(n,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var _=g.next;c=_;do{if((c.tag&n)===n){g=void 0;var T=c.create,O=c.inst;g=T(),O.destroy=g}c=c.next}while(c!==_)}}catch(k){un(s,s.return,k)}}function Ua(n,s,c){try{var g=s.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var T=_.next;g=T;do{if((g.tag&n)===n){var O=g.inst,k=O.destroy;if(k!==void 0){O.destroy=void 0,_=s;var q=c,le=k;try{le()}catch(_e){un(_,q,_e)}}}g=g.next}while(g!==T)}}catch(_e){un(s,s.return,_e)}}function Rp(n){var s=n.updateQueue;if(s!==null){var c=n.stateNode;try{pm(s,c)}catch(g){un(n,n.return,g)}}}function Np(n,s,c){c.props=ko(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(g){un(n,s,g)}}function Dc(n,s){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var g=n.stateNode;break;case 30:g=n.stateNode;break;default:g=n.stateNode}typeof c=="function"?n.refCleanup=c(g):c.current=g}}catch(_){un(n,s,_)}}function vs(n,s){var c=n.ref,g=n.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(_){un(n,s,_)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){un(n,s,_)}else c.current=null}function Op(n){var s=n.type,c=n.memoizedProps,g=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(_){un(n,n.return,_)}}function a1(n,s,c){try{var g=n.stateNode;gT(g,n.type,c,s),g[gn]=s}catch(_){un(n,n.return,_)}}function Dp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ya(n.type)||n.tag===4}function o1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ya(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function l1(n,s,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(n),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=xh));else if(g!==4&&(g===27&&Ya(n.type)&&(c=n.stateNode,s=null),n=n.child,n!==null))for(l1(n,s,c),n=n.sibling;n!==null;)l1(n,s,c),n=n.sibling}function hh(n,s,c){var g=n.tag;if(g===5||g===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(g!==4&&(g===27&&Ya(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(hh(n,s,c),n=n.sibling;n!==null;)hh(n,s,c),n=n.sibling}function Mp(n){var s=n.stateNode,c=n.memoizedProps;try{for(var g=n.type,_=s.attributes;_.length;)s.removeAttributeNode(_[0]);vi(s,g,c),s[bn]=n,s[gn]=c}catch(T){un(n,n.return,T)}}var ua=!1,Yn=!1,c1=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,gi=null;function Kx(n,s){if(n=n.containerInfo,M1=Rh,n=v(n),I(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var _=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{c.nodeType,T.nodeType}catch{c=null;break e}var O=0,k=-1,q=-1,le=0,_e=0,Ce=n,he=null;t:for(;;){for(var ge;Ce!==c||_!==0&&Ce.nodeType!==3||(k=O+_),Ce!==T||g!==0&&Ce.nodeType!==3||(q=O+g),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(ge=Ce.firstChild)!==null;)he=Ce,Ce=ge;for(;;){if(Ce===n)break t;if(he===c&&++le===_&&(k=O),he===T&&++_e===g&&(q=O),(ge=Ce.nextSibling)!==null)break;Ce=he,he=Ce.parentNode}Ce=ge}c=k===-1||q===-1?null:{start:k,end:q}}else c=null}c=c||{start:0,end:0}}else c=null;for(P1={focusedElem:n,selectionRange:c},Rh=!1,gi=s;gi!==null;)if(s=gi,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,gi=n;else for(;gi!==null;){switch(s=gi,T=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&T!==null){n=void 0,c=s,_=T.memoizedProps,T=T.memoizedState,g=c.stateNode;try{var at=ko(c.type,_,c.elementType===c.type);n=g.getSnapshotBeforeUpdate(at,T),g.__reactInternalSnapshotBeforeUpdate=n}catch($e){un(c,c.return,$e)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,c=n.nodeType,c===9)B1(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":B1(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=s.sibling,n!==null){n.return=s.return,gi=n;break}gi=s.return}}function Lp(n,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:Fa(n,c),g&4&&Oc(5,c);break;case 1:if(Fa(n,c),g&4)if(n=c.stateNode,s===null)try{n.componentDidMount()}catch(O){un(c,c.return,O)}else{var _=ko(c.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(_,s,n.__reactInternalSnapshotBeforeUpdate)}catch(O){un(c,c.return,O)}}g&64&&Rp(c),g&512&&Dc(c,c.return);break;case 3:if(Fa(n,c),g&64&&(n=c.updateQueue,n!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{pm(n,s)}catch(O){un(c,c.return,O)}}break;case 27:s===null&&g&4&&Mp(c);case 26:case 5:Fa(n,c),s===null&&g&4&&Op(c),g&512&&Dc(c,c.return);break;case 12:Fa(n,c);break;case 13:Fa(n,c),g&4&&Vp(n,c),g&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=iT.bind(null,c),wT(n,c))));break;case 22:if(g=c.memoizedState!==null||ua,!g){s=s!==null&&s.memoizedState!==null||Yn,_=ua;var T=Yn;ua=g,(Yn=s)&&!T?za(n,c,(c.subtreeFlags&8772)!==0):Fa(n,c),ua=_,Yn=T}break;case 30:break;default:Fa(n,c)}}function kp(n){var s=n.alternate;s!==null&&(n.alternate=null,kp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&fs(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Cn=null,nr=!1;function ha(n,s,c){for(c=c.child;c!==null;)Bp(n,s,c),c=c.sibling}function Bp(n,s,c){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(Wn,c)}catch{}switch(c.tag){case 26:Yn||vs(c,s),ha(n,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Yn||vs(c,s);var g=Cn,_=nr;Ya(c.type)&&(Cn=c.stateNode,nr=!1),ha(n,s,c),zc(c.stateNode),Cn=g,nr=_;break;case 5:Yn||vs(c,s);case 6:if(g=Cn,_=nr,Cn=null,ha(n,s,c),Cn=g,nr=_,Cn!==null)if(nr)try{(Cn.nodeType===9?Cn.body:Cn.nodeName==="HTML"?Cn.ownerDocument.body:Cn).removeChild(c.stateNode)}catch(T){un(c,s,T)}else try{Cn.removeChild(c.stateNode)}catch(T){un(c,s,T)}break;case 18:Cn!==null&&(nr?(n=Cn,v2(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Wc(n)):v2(Cn,c.stateNode));break;case 4:g=Cn,_=nr,Cn=c.stateNode.containerInfo,nr=!0,ha(n,s,c),Cn=g,nr=_;break;case 0:case 11:case 14:case 15:Yn||Ua(2,c,s),Yn||Ua(4,c,s),ha(n,s,c);break;case 1:Yn||(vs(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&Np(c,s,g)),ha(n,s,c);break;case 21:ha(n,s,c);break;case 22:Yn=(g=Yn)||c.memoizedState!==null,ha(n,s,c),Yn=g;break;default:ha(n,s,c)}}function Vp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wc(n)}catch(c){un(s,s.return,c)}}function Wx(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Pp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Pp),s;default:throw Error(a(435,n.tag))}}function u1(n,s){var c=Wx(n);s.forEach(function(g){var _=rT.bind(null,n,g);c.has(g)||(c.add(g),g.then(_,_))})}function Cr(n,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var _=c[g],T=n,O=s,k=O;e:for(;k!==null;){switch(k.tag){case 27:if(Ya(k.type)){Cn=k.stateNode,nr=!1;break e}break;case 5:Cn=k.stateNode,nr=!1;break e;case 3:case 4:Cn=k.stateNode.containerInfo,nr=!0;break e}k=k.return}if(Cn===null)throw Error(a(160));Bp(T,O,_),Cn=null,nr=!1,T=_.alternate,T!==null&&(T.return=null),_.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Up(s,n),s=s.sibling}var ss=null;function Up(n,s){var c=n.alternate,g=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Cr(s,n),vr(n),g&4&&(Ua(3,n,n.return),Oc(3,n),Ua(5,n,n.return));break;case 1:Cr(s,n),vr(n),g&512&&(Yn||c===null||vs(c,c.return)),g&64&&ua&&(n=n.updateQueue,n!==null&&(g=n.callbacks,g!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var _=ss;if(Cr(s,n),vr(n),g&512&&(Yn||c===null||vs(c,c.return)),g&4){var T=c!==null?c.memoizedState:null;if(g=n.memoizedState,c===null)if(g===null)if(n.stateNode===null){e:{g=n.type,c=n.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":T=_.getElementsByTagName("title")[0],(!T||T[ji]||T[bn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=_.createElement(g),_.head.insertBefore(T,_.querySelector("head > title"))),vi(T,g,c),T[bn]=n,Ft(T),g=T;break e;case"link":var O=M2("link","href",_).get(g+(c.href||""));if(O){for(var k=0;k<O.length;k++)if(T=O[k],T.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&T.getAttribute("rel")===(c.rel==null?null:c.rel)&&T.getAttribute("title")===(c.title==null?null:c.title)&&T.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(k,1);break t}}T=_.createElement(g),vi(T,g,c),_.head.appendChild(T);break;case"meta":if(O=M2("meta","content",_).get(g+(c.content||""))){for(k=0;k<O.length;k++)if(T=O[k],T.getAttribute("content")===(c.content==null?null:""+c.content)&&T.getAttribute("name")===(c.name==null?null:c.name)&&T.getAttribute("property")===(c.property==null?null:c.property)&&T.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&T.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(k,1);break t}}T=_.createElement(g),vi(T,g,c),_.head.appendChild(T);break;default:throw Error(a(468,g))}T[bn]=n,Ft(T),g=T}n.stateNode=g}else P2(_,n.type,n.stateNode);else n.stateNode=D2(_,g,n.memoizedProps);else T!==g?(T===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):T.count--,g===null?P2(_,n.type,n.stateNode):D2(_,g,n.memoizedProps)):g===null&&n.stateNode!==null&&a1(n,n.memoizedProps,c.memoizedProps)}break;case 27:Cr(s,n),vr(n),g&512&&(Yn||c===null||vs(c,c.return)),c!==null&&g&4&&a1(n,n.memoizedProps,c.memoizedProps);break;case 5:if(Cr(s,n),vr(n),g&512&&(Yn||c===null||vs(c,c.return)),n.flags&32){_=n.stateNode;try{yn(_,"")}catch(ge){un(n,n.return,ge)}}g&4&&n.stateNode!=null&&(_=n.memoizedProps,a1(n,_,c!==null?c.memoizedProps:_)),g&1024&&(c1=!0);break;case 6:if(Cr(s,n),vr(n),g&4){if(n.stateNode===null)throw Error(a(162));g=n.memoizedProps,c=n.stateNode;try{c.nodeValue=g}catch(ge){un(n,n.return,ge)}}break;case 3:if(bh=null,_=ss,ss=Ch(s.containerInfo),Cr(s,n),ss=_,vr(n),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Wc(s.containerInfo)}catch(ge){un(n,n.return,ge)}c1&&(c1=!1,Fp(n));break;case 4:g=ss,ss=Ch(n.stateNode.containerInfo),Cr(s,n),vr(n),ss=g;break;case 12:Cr(s,n),vr(n);break;case 13:Cr(s,n),vr(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(p1=Ut()),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,u1(n,g)));break;case 22:_=n.memoizedState!==null;var q=c!==null&&c.memoizedState!==null,le=ua,_e=Yn;if(ua=le||_,Yn=_e||q,Cr(s,n),Yn=_e,ua=le,vr(n),g&8192)e:for(s=n.stateNode,s._visibility=_?s._visibility&-2:s._visibility|1,_&&(c===null||q||ua||Yn||Bo(n)),c=null,s=n;;){if(s.tag===5||s.tag===26){if(c===null){q=c=s;try{if(T=q.stateNode,_)O=T.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{k=q.stateNode;var Ce=q.memoizedProps.style,he=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;k.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(ge){un(q,q.return,ge)}}}else if(s.tag===6){if(c===null){q=s;try{q.stateNode.nodeValue=_?"":q.memoizedProps}catch(ge){un(q,q.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=n.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,u1(n,c))));break;case 19:Cr(s,n),vr(n),g&4&&(g=n.updateQueue,g!==null&&(n.updateQueue=null,u1(n,g)));break;case 30:break;case 21:break;default:Cr(s,n),vr(n)}}function vr(n){var s=n.flags;if(s&2){try{for(var c,g=n.return;g!==null;){if(Dp(g)){c=g;break}g=g.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var _=c.stateNode,T=o1(n);hh(n,T,_);break;case 5:var O=c.stateNode;c.flags&32&&(yn(O,""),c.flags&=-33);var k=o1(n);hh(n,k,O);break;case 3:case 4:var q=c.stateNode.containerInfo,le=o1(n);l1(n,le,q);break;default:throw Error(a(161))}}catch(_e){un(n,n.return,_e)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Fp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Fp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fa(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Lp(n,s.alternate,s),s=s.sibling}function Bo(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ua(4,s,s.return),Bo(s);break;case 1:vs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Np(s,s.return,c),Bo(s);break;case 27:zc(s.stateNode);case 26:case 5:vs(s,s.return),Bo(s);break;case 22:s.memoizedState===null&&Bo(s);break;case 30:Bo(s);break;default:Bo(s)}n=n.sibling}}function za(n,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,_=n,T=s,O=T.flags;switch(T.tag){case 0:case 11:case 15:za(_,T,c),Oc(4,T);break;case 1:if(za(_,T,c),g=T,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(le){un(g,g.return,le)}if(g=T,_=g.updateQueue,_!==null){var k=g.stateNode;try{var q=_.shared.hiddenCallbacks;if(q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<q.length;_++)mm(q[_],k)}catch(le){un(g,g.return,le)}}c&&O&64&&Rp(T),Dc(T,T.return);break;case 27:Mp(T);case 26:case 5:za(_,T,c),c&&g===null&&O&4&&Op(T),Dc(T,T.return);break;case 12:za(_,T,c);break;case 13:za(_,T,c),c&&O&4&&Vp(_,T);break;case 22:T.memoizedState===null&&za(_,T,c),Dc(T,T.return);break;case 30:break;default:za(_,T,c)}s=s.sibling}}function h1(n,s){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&yc(c))}function f1(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&yc(n))}function bs(n,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zp(n,s,c,g),s=s.sibling}function zp(n,s,c,g){var _=s.flags;switch(s.tag){case 0:case 11:case 15:bs(n,s,c,g),_&2048&&Oc(9,s);break;case 1:bs(n,s,c,g);break;case 3:bs(n,s,c,g),_&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&yc(n)));break;case 12:if(_&2048){bs(n,s,c,g),n=s.stateNode;try{var T=s.memoizedProps,O=T.id,k=T.onPostCommit;typeof k=="function"&&k(O,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(q){un(s,s.return,q)}}else bs(n,s,c,g);break;case 13:bs(n,s,c,g);break;case 23:break;case 22:T=s.stateNode,O=s.alternate,s.memoizedState!==null?T._visibility&2?bs(n,s,c,g):Mc(n,s):T._visibility&2?bs(n,s,c,g):(T._visibility|=2,Il(n,s,c,g,(s.subtreeFlags&10256)!==0)),_&2048&&h1(O,s);break;case 24:bs(n,s,c,g),_&2048&&f1(s.alternate,s);break;default:bs(n,s,c,g)}}function Il(n,s,c,g,_){for(_=_&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var T=n,O=s,k=c,q=g,le=O.flags;switch(O.tag){case 0:case 11:case 15:Il(T,O,k,q,_),Oc(8,O);break;case 23:break;case 22:var _e=O.stateNode;O.memoizedState!==null?_e._visibility&2?Il(T,O,k,q,_):Mc(T,O):(_e._visibility|=2,Il(T,O,k,q,_)),_&&le&2048&&h1(O.alternate,O);break;case 24:Il(T,O,k,q,_),_&&le&2048&&f1(O.alternate,O);break;default:Il(T,O,k,q,_)}s=s.sibling}}function Mc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=n,g=s,_=g.flags;switch(g.tag){case 22:Mc(c,g),_&2048&&h1(g.alternate,g);break;case 24:Mc(c,g),_&2048&&f1(g.alternate,g);break;default:Mc(c,g)}s=s.sibling}}var Pc=8192;function Rl(n){if(n.subtreeFlags&Pc)for(n=n.child;n!==null;)Hp(n),n=n.sibling}function Hp(n){switch(n.tag){case 26:Rl(n),n.flags&Pc&&n.memoizedState!==null&&PT(ss,n.memoizedState,n.memoizedProps);break;case 5:Rl(n);break;case 3:case 4:var s=ss;ss=Ch(n.stateNode.containerInfo),Rl(n),ss=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Pc,Pc=16777216,Rl(n),Pc=s):Rl(n));break;default:Rl(n)}}function Gp(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Lc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];gi=g,qp(g,n)}Gp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jp(n),n=n.sibling}function jp(n){switch(n.tag){case 0:case 11:case 15:Lc(n),n.flags&2048&&Ua(9,n,n.return);break;case 3:Lc(n);break;case 12:Lc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,fh(n)):Lc(n);break;default:Lc(n)}}function fh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];gi=g,qp(g,n)}Gp(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ua(8,s,s.return),fh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,fh(s));break;default:fh(s)}n=n.sibling}}function qp(n,s){for(;gi!==null;){var c=gi;switch(c.tag){case 0:case 11:case 15:Ua(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:yc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,gi=g;else e:for(c=n;gi!==null;){g=gi;var _=g.sibling,T=g.return;if(kp(g),g===c){gi=null;break e}if(_!==null){_.return=T,gi=_;break e}gi=T}}}var Qx={getCacheForType:function(n){var s=Bi(ri),c=s.data.get(n);return c===void 0&&(c=n(),s.data.set(n,c)),c}},Zx=typeof WeakMap=="function"?WeakMap:Map,en=0,dn=null,bt=null,Lt=0,tn=0,br=null,Ha=!1,Nl=!1,d1=!1,fa=0,Vn=0,Ga=0,Vo=0,g1=0,Hr=0,Ol=0,kc=null,ir=null,m1=!1,p1=0,dh=1/0,gh=null,ja=null,Ci=0,qa=null,Dl=null,Ml=0,y1=0,E1=null,Xp=null,Bc=0,_1=null;function Sr(){if((en&2)!==0&&Lt!==0)return Lt&-Lt;if(pe.T!==null){var n=Al;return n!==0?n:b1()}return Ri()}function Yp(){Hr===0&&(Hr=(Lt&536870912)===0||Wt?Hs():536870912);var n=zr.current;return n!==null&&(n.flags|=32),Hr}function Ir(n,s,c){(n===dn&&(tn===2||tn===9)||n.cancelPendingCommit!==null)&&(Pl(n,0),Xa(n,Lt,Hr,!1)),Jt(n,c),((en&2)===0||n!==dn)&&(n===dn&&((en&2)===0&&(Vo|=c),Vn===4&&Xa(n,Lt,Hr,!1)),Ss(n))}function Kp(n,s,c){if((en&6)!==0)throw Error(a(327));var g=!c&&(s&124)===0&&(s&n.expiredLanes)===0||Kt(n,s),_=g?eT(n,s):x1(n,s,!0),T=g;do{if(_===0){Nl&&!g&&Xa(n,s,0,!1);break}else{if(c=n.current.alternate,T&&!Jx(c)){_=x1(n,s,!1),T=!1;continue}if(_===2){if(T=s,n.errorRecoveryDisabledLanes&T)var O=0;else O=n.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var k=n;_=kc;var q=k.current.memoizedState.isDehydrated;if(q&&(Pl(k,O).flags|=256),O=x1(k,O,!1),O!==2){if(d1&&!q){k.errorRecoveryDisabledLanes|=T,Vo|=T,_=4;break e}T=ir,ir=_,T!==null&&(ir===null?ir=T:ir.push.apply(ir,T))}_=O}if(T=!1,_!==2)continue}}if(_===1){Pl(n,0),Xa(n,s,0,!0);break}e:{switch(g=n,T=_,T){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Xa(g,s,Hr,!Ha);break e;case 2:ir=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(_=p1+300-Ut(),10<_)){if(Xa(g,s,Hr,!Ha),Et(g,0,!0)!==0)break e;g.timeoutHandle=T2(Wp.bind(null,g,c,ir,gh,m1,s,Hr,Vo,Ol,Ha,T,2,-0,0),_);break e}Wp(g,c,ir,gh,m1,s,Hr,Vo,Ol,Ha,T,0,-0,0)}}break}while(!0);Ss(n)}function Wp(n,s,c,g,_,T,O,k,q,le,_e,Ce,he,ge){if(n.timeoutHandle=-1,Ce=s.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(jc={stylesheets:null,count:0,unsuspend:MT},Hp(s),Ce=LT(),Ce!==null)){n.cancelPendingCommit=Ce(n2.bind(null,n,s,T,c,g,_,O,k,q,_e,1,he,ge)),Xa(n,T,O,!le);return}n2(n,s,T,c,g,_,O,k,q)}function Jx(n){for(var s=n;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var _=c[g],T=_.getSnapshot;_=_.value;try{if(!h(T(),_))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xa(n,s,c,g){s&=~g1,s&=~Vo,n.suspendedLanes|=s,n.pingedLanes&=~s,g&&(n.warmLanes|=s),g=n.expirationTimes;for(var _=s;0<_;){var T=31-qt(_),O=1<<T;g[T]=-1,_&=~O}c!==0&&$r(n,c,s)}function mh(){return(en&6)===0?(Vc(0),!1):!0}function A1(){if(bt!==null){if(tn===0)var n=bt.return;else n=bt,ra=Do=null,Bd(n),bl=null,Ic=0,n=bt;for(;n!==null;)Ip(n.alternate,n),n=n.return;bt=null}}function Pl(n,s){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,pT(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),A1(),dn=n,bt=c=ta(n.current,null),Lt=s,tn=0,br=null,Ha=!1,Nl=Kt(n,s),d1=!1,Ol=Hr=g1=Vo=Ga=Vn=0,ir=kc=null,m1=!1,(s&8)!==0&&(s|=s&32);var g=n.entangledLanes;if(g!==0)for(n=n.entanglements,g&=s;0<g;){var _=31-qt(g),T=1<<_;s|=n[_],g&=~T}return fa=s,Bu(),c}function Qp(n,s){wt=null,pe.H=nh,s===_c||s===Xu?(s=dm(),tn=3):s===um?(s=dm(),tn=4):tn=s===gp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,br=s,bt===null&&(Vn=1,oh(n,Br(s,n.current)))}function Zp(){var n=pe.H;return pe.H=nh,n===null?nh:n}function Jp(){var n=pe.A;return pe.A=Qx,n}function w1(){Vn=4,Ha||(Lt&4194048)!==Lt&&zr.current!==null||(Nl=!0),(Ga&134217727)===0&&(Vo&134217727)===0||dn===null||Xa(dn,Lt,Hr,!1)}function x1(n,s,c){var g=en;en|=2;var _=Zp(),T=Jp();(dn!==n||Lt!==s)&&(gh=null,Pl(n,s)),s=!1;var O=Vn;e:do try{if(tn!==0&&bt!==null){var k=bt,q=br;switch(tn){case 8:A1(),O=6;break e;case 3:case 2:case 9:case 6:zr.current===null&&(s=!0);var le=tn;if(tn=0,br=null,Ll(n,k,q,le),c&&Nl){O=0;break e}break;default:le=tn,tn=0,br=null,Ll(n,k,q,le)}}$x(),O=Vn;break}catch(_e){Qp(n,_e)}while(!0);return s&&n.shellSuspendCounter++,ra=Do=null,en=g,pe.H=_,pe.A=T,bt===null&&(dn=null,Lt=0,Bu()),O}function $x(){for(;bt!==null;)$p(bt)}function eT(n,s){var c=en;en|=2;var g=Zp(),_=Jp();dn!==n||Lt!==s?(gh=null,dh=Ut()+500,Pl(n,s)):Nl=Kt(n,s);e:do try{if(tn!==0&&bt!==null){s=bt;var T=br;t:switch(tn){case 1:tn=0,br=null,Ll(n,s,T,1);break;case 2:case 9:if(hm(T)){tn=0,br=null,e2(s);break}s=function(){tn!==2&&tn!==9||dn!==n||(tn=7),Ss(n)},T.then(s,s);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:hm(T)?(tn=0,br=null,e2(s)):(tn=0,br=null,Ll(n,s,T,7));break;case 5:var O=null;switch(bt.tag){case 26:O=bt.memoizedState;case 5:case 27:var k=bt;if(!O||L2(O)){tn=0,br=null;var q=k.sibling;if(q!==null)bt=q;else{var le=k.return;le!==null?(bt=le,ph(le)):bt=null}break t}}tn=0,br=null,Ll(n,s,T,5);break;case 6:tn=0,br=null,Ll(n,s,T,6);break;case 8:A1(),Vn=6;break e;default:throw Error(a(462))}}tT();break}catch(_e){Qp(n,_e)}while(!0);return ra=Do=null,pe.H=g,pe.A=_,en=c,bt!==null?0:(dn=null,Lt=0,Bu(),Vn)}function tT(){for(;bt!==null&&!Qi();)$p(bt)}function $p(n){var s=bp(n.alternate,n,fa);n.memoizedProps=n.pendingProps,s===null?ph(n):bt=s}function e2(n){var s=n,c=s.alternate;switch(s.tag){case 15:case 0:s=Ap(c,s,s.pendingProps,s.type,void 0,Lt);break;case 11:s=Ap(c,s,s.pendingProps,s.type.render,s.ref,Lt);break;case 5:Bd(s);default:Ip(c,s),s=bt=tm(s,fa),s=bp(c,s,fa)}n.memoizedProps=n.pendingProps,s===null?ph(n):bt=s}function Ll(n,s,c,g){ra=Do=null,Bd(s),bl=null,Ic=0;var _=s.return;try{if(jx(n,_,s,c,Lt)){Vn=1,oh(n,Br(c,n.current)),bt=null;return}}catch(T){if(_!==null)throw bt=_,T;Vn=1,oh(n,Br(c,n.current)),bt=null;return}s.flags&32768?(Wt||g===1?n=!0:Nl||(Lt&536870912)!==0?n=!1:(Ha=n=!0,(g===2||g===9||g===3||g===6)&&(g=zr.current,g!==null&&g.tag===13&&(g.flags|=16384))),t2(s,n)):ph(s)}function ph(n){var s=n;do{if((s.flags&32768)!==0){t2(s,Ha);return}n=s.return;var c=Xx(s.alternate,s,fa);if(c!==null){bt=c;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=n}while(s!==null);Vn===0&&(Vn=5)}function t2(n,s){do{var c=Yx(n.alternate,n);if(c!==null){c.flags&=32767,bt=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(n=n.sibling,n!==null)){bt=n;return}bt=n=c}while(n!==null);Vn=6,bt=null}function n2(n,s,c,g,_,T,O,k,q){n.cancelPendingCommit=null;do yh();while(Ci!==0);if((en&6)!==0)throw Error(a(327));if(s!==null){if(s===n.current)throw Error(a(177));if(T=s.lanes|s.childLanes,T|=fd,Ao(n,c,T,O,k,q),n===dn&&(bt=dn=null,Lt=0),Dl=s,qa=n,Ml=c,y1=T,E1=_,Xp=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,sT(ze,function(){return o2(),null})):(n.callbackNode=null,n.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null,_=Ae.p,Ae.p=2,O=en,en|=4;try{Kx(n,s,c)}finally{en=O,Ae.p=_,pe.T=g}}Ci=1,i2(),r2(),s2()}}function i2(){if(Ci===1){Ci=0;var n=qa,s=Dl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=pe.T,pe.T=null;var g=Ae.p;Ae.p=2;var _=en;en|=4;try{Up(s,n);var T=P1,O=v(n.containerInfo),k=T.focusedElem,q=T.selectionRange;if(O!==k&&k&&k.ownerDocument&&w(k.ownerDocument.documentElement,k)){if(q!==null&&I(k)){var le=q.start,_e=q.end;if(_e===void 0&&(_e=le),"selectionStart"in k)k.selectionStart=le,k.selectionEnd=Math.min(_e,k.value.length);else{var Ce=k.ownerDocument||document,he=Ce&&Ce.defaultView||window;if(he.getSelection){var ge=he.getSelection(),at=k.textContent.length,$e=Math.min(q.start,at),ln=q.end===void 0?$e:Math.min(q.end,at);!ge.extend&&$e>ln&&(O=ln,ln=$e,$e=O);var ie=y(k,$e),te=y(k,ln);if(ie&&te&&(ge.rangeCount!==1||ge.anchorNode!==ie.node||ge.anchorOffset!==ie.offset||ge.focusNode!==te.node||ge.focusOffset!==te.offset)){var oe=Ce.createRange();oe.setStart(ie.node,ie.offset),ge.removeAllRanges(),$e>ln?(ge.addRange(oe),ge.extend(te.node,te.offset)):(oe.setEnd(te.node,te.offset),ge.addRange(oe))}}}}for(Ce=[],ge=k;ge=ge.parentNode;)ge.nodeType===1&&Ce.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Ce.length;k++){var we=Ce[k];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Rh=!!M1,P1=M1=null}finally{en=_,Ae.p=g,pe.T=c}}n.current=s,Ci=2}}function r2(){if(Ci===2){Ci=0;var n=qa,s=Dl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=pe.T,pe.T=null;var g=Ae.p;Ae.p=2;var _=en;en|=4;try{Lp(n,s.alternate,s)}finally{en=_,Ae.p=g,pe.T=c}}Ci=3}}function s2(){if(Ci===4||Ci===3){Ci=0,Qr();var n=qa,s=Dl,c=Ml,g=Xp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ci=5:(Ci=0,Dl=qa=null,a2(n,n.pendingLanes));var _=n.pendingLanes;if(_===0&&(ja=null),Mn(c),s=s.stateNode,ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(Wn,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=pe.T,_=Ae.p,Ae.p=2,pe.T=null;try{for(var T=n.onRecoverableError,O=0;O<g.length;O++){var k=g[O];T(k.value,{componentStack:k.stack})}}finally{pe.T=s,Ae.p=_}}(Ml&3)!==0&&yh(),Ss(n),_=n.pendingLanes,(c&4194090)!==0&&(_&42)!==0?n===_1?Bc++:(Bc=0,_1=n):Bc=0,Vc(0)}}function a2(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,yc(s)))}function yh(n){return i2(),r2(),s2(),o2()}function o2(){if(Ci!==5)return!1;var n=qa,s=y1;y1=0;var c=Mn(Ml),g=pe.T,_=Ae.p;try{Ae.p=32>c?32:c,pe.T=null,c=E1,E1=null;var T=qa,O=Ml;if(Ci=0,Dl=qa=null,Ml=0,(en&6)!==0)throw Error(a(331));var k=en;if(en|=4,jp(T.current),zp(T,T.current,O,c),en=k,Vc(0,!1),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(Wn,T)}catch{}return!0}finally{Ae.p=_,pe.T=g,a2(n,s)}}function l2(n,s,c){s=Br(c,s),s=Zd(n.stateNode,s,2),n=La(n,s,2),n!==null&&(Jt(n,2),Ss(n))}function un(n,s,c){if(n.tag===3)l2(n,n,c);else for(;s!==null;){if(s.tag===3){l2(s,n,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ja===null||!ja.has(g))){n=Br(c,n),c=fp(2),g=La(s,c,2),g!==null&&(dp(c,g,s,n),Jt(g,2),Ss(g));break}}s=s.return}}function T1(n,s,c){var g=n.pingCache;if(g===null){g=n.pingCache=new Zx;var _=new Set;g.set(s,_)}else _=g.get(s),_===void 0&&(_=new Set,g.set(s,_));_.has(c)||(d1=!0,_.add(c),n=nT.bind(null,n,s,c),s.then(n,n))}function nT(n,s,c){var g=n.pingCache;g!==null&&g.delete(s),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,dn===n&&(Lt&c)===c&&(Vn===4||Vn===3&&(Lt&62914560)===Lt&&300>Ut()-p1?(en&2)===0&&Pl(n,0):g1|=c,Ol===Lt&&(Ol=0)),Ss(n)}function c2(n,s){s===0&&(s=Jr()),n=pl(n,s),n!==null&&(Jt(n,s),Ss(n))}function iT(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),c2(n,c)}function rT(n,s){var c=0;switch(n.tag){case 13:var g=n.stateNode,_=n.memoizedState;_!==null&&(c=_.retryLane);break;case 19:g=n.stateNode;break;case 22:g=n.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),c2(n,c)}function sT(n,s){return At(n,s)}var Eh=null,kl=null,C1=!1,_h=!1,v1=!1,Uo=0;function Ss(n){n!==kl&&n.next===null&&(kl===null?Eh=kl=n:kl=kl.next=n),_h=!0,C1||(C1=!0,oT())}function Vc(n,s){if(!v1&&_h){v1=!0;do for(var c=!1,g=Eh;g!==null;){if(n!==0){var _=g.pendingLanes;if(_===0)var T=0;else{var O=g.suspendedLanes,k=g.pingedLanes;T=(1<<31-qt(42|n)+1)-1,T&=_&~(O&~k),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(c=!0,d2(g,T))}else T=Lt,T=Et(g,g===dn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Kt(g,T)||(c=!0,d2(g,T));g=g.next}while(c);v1=!1}}function aT(){u2()}function u2(){_h=C1=!1;var n=0;Uo!==0&&(mT()&&(n=Uo),Uo=0);for(var s=Ut(),c=null,g=Eh;g!==null;){var _=g.next,T=h2(g,s);T===0?(g.next=null,c===null?Eh=_:c.next=_,_===null&&(kl=c)):(c=g,(n!==0||(T&3)!==0)&&(_h=!0)),g=_}Vc(n)}function h2(n,s){for(var c=n.suspendedLanes,g=n.pingedLanes,_=n.expirationTimes,T=n.pendingLanes&-62914561;0<T;){var O=31-qt(T),k=1<<O,q=_[O];q===-1?((k&c)===0||(k&g)!==0)&&(_[O]=Dr(k,s)):q<=s&&(n.expiredLanes|=k),T&=~k}if(s=dn,c=Lt,c=Et(n,n===s?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),g=n.callbackNode,c===0||n===s&&(tn===2||tn===9)||n.cancelPendingCommit!==null)return g!==null&&g!==null&&lr(g),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Kt(n,c)){if(s=c&-c,s===n.callbackPriority)return s;switch(g!==null&&lr(g),Mn(c)){case 2:case 8:c=vn;break;case 32:c=ze;break;case 268435456:c=ba;break;default:c=ze}return g=f2.bind(null,n),c=At(c,g),n.callbackPriority=s,n.callbackNode=c,s}return g!==null&&g!==null&&lr(g),n.callbackPriority=2,n.callbackNode=null,2}function f2(n,s){if(Ci!==0&&Ci!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(yh()&&n.callbackNode!==c)return null;var g=Lt;return g=Et(n,n===dn?g:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),g===0?null:(Kp(n,g,s),h2(n,Ut()),n.callbackNode!=null&&n.callbackNode===c?f2.bind(null,n):null)}function d2(n,s){if(yh())return null;Kp(n,s,!0)}function oT(){yT(function(){(en&6)!==0?At(Ze,aT):u2()})}function b1(){return Uo===0&&(Uo=Hs()),Uo}function g2(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:gr(""+n)}function m2(n,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,n.id&&c.setAttribute("form",n.id),s.parentNode.insertBefore(c,s),n=new FormData(n),c.parentNode.removeChild(c),n}function lT(n,s,c,g,_){if(s==="submit"&&c&&c.stateNode===_){var T=g2((_[gn]||null).action),O=g.submitter;O&&(s=(s=O[gn]||null)?g2(s.formAction):O.getAttribute("formAction"),s!==null&&(T=s,O=null));var k=new yr("action","action",null,g,_);n.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Uo!==0){var q=O?m2(_,O):new FormData(_);Xd(c,{pending:!0,data:q,method:_.method,action:T},null,q)}}else typeof T=="function"&&(k.preventDefault(),q=O?m2(_,O):new FormData(_),Xd(c,{pending:!0,data:q,method:_.method,action:T},T,q))},currentTarget:_}]})}}for(var S1=0;S1<xs.length;S1++){var I1=xs[S1],cT=I1.toLowerCase(),uT=I1[0].toUpperCase()+I1.slice(1);xr(cT,"on"+uT)}xr(ct,"onAnimationEnd"),xr(xi,"onAnimationIteration"),xr(er,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(Li,"onTransitionRun"),xr($t,"onTransitionStart"),xr(ii,"onTransitionCancel"),xr(ki,"onTransitionEnd"),hn("onMouseEnter",["mouseout","mouseover"]),hn("onMouseLeave",["mouseout","mouseover"]),hn("onPointerEnter",["pointerout","pointerover"]),hn("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function p2(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var g=n[c],_=g.event;g=g.listeners;e:{var T=void 0;if(s)for(var O=g.length-1;0<=O;O--){var k=g[O],q=k.instance,le=k.currentTarget;if(k=k.listener,q!==T&&_.isPropagationStopped())break e;T=k,_.currentTarget=le;try{T(_)}catch(_e){ah(_e)}_.currentTarget=null,T=q}else for(O=0;O<g.length;O++){if(k=g[O],q=k.instance,le=k.currentTarget,k=k.listener,q!==T&&_.isPropagationStopped())break e;T=k,_.currentTarget=le;try{T(_)}catch(_e){ah(_e)}_.currentTarget=null,T=q}}}}function St(n,s){var c=s[Pn];c===void 0&&(c=s[Pn]=new Set);var g=n+"__bubble";c.has(g)||(y2(s,n,2,!1),c.add(g))}function R1(n,s,c){var g=0;s&&(g|=4),y2(c,n,g,s)}var Ah="_reactListening"+Math.random().toString(36).slice(2);function N1(n){if(!n[Ah]){n[Ah]=!0,ul.forEach(function(c){c!=="selectionchange"&&(hT.has(c)||R1(c,!1,n),R1(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ah]||(s[Ah]=!0,R1("selectionchange",!1,s))}}function y2(n,s,c,g){switch(z2(s)){case 2:var _=VT;break;case 8:_=UT;break;default:_=j1}c=_.bind(null,s,c,n),_=void 0,!tt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),g?_!==void 0?n.addEventListener(s,c,{capture:!0,passive:_}):n.addEventListener(s,c,!0):_!==void 0?n.addEventListener(s,c,{passive:_}):n.addEventListener(s,c,!1)}function O1(n,s,c,g,_){var T=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var k=g.stateNode.containerInfo;if(k===_)break;if(O===4)for(O=g.return;O!==null;){var q=O.tag;if((q===3||q===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;k!==null;){if(O=mn(k),O===null)return;if(q=O.tag,q===5||q===6||q===26||q===27){g=T=O;continue e}k=k.parentNode}}g=g.return}Di(function(){var le=T,_e=gs(c),Ce=[];e:{var he=ea.get(n);if(he!==void 0){var ge=yr,at=n;switch(n){case"keypress":if(Qs(c)===0)break e;case"keydown":case"keyup":ge=_s;break;case"focusin":at="focus",ge=ns;break;case"focusout":at="blur",ge=ns;break;case"beforeblur":case"afterblur":ge=ns;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=$s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Bt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Rt;break;case ct:case xi:case er:ge=Co;break;case ki:ge=S;break;case"scroll":case"scrollend":ge=kn;break;case"wheel":ge=V;break;case"copy":case"cut":case"paste":ge=ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=As;break;case"toggle":case"beforetoggle":ge=me}var $e=(s&4)!==0,ln=!$e&&(n==="scroll"||n==="scrollend"),ie=$e?he!==null?he+"Capture":null:he;$e=[];for(var te=le,oe;te!==null;){var we=te;if(oe=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||oe===null||ie===null||(we=Ke(te,ie),we!=null&&$e.push(Fc(te,we,oe))),ln)break;te=te.return}0<$e.length&&(he=new ge(he,at,null,c,_e),Ce.push({event:he,listeners:$e}))}}if((s&7)===0){e:{if(he=n==="mouseover"||n==="pointerover",ge=n==="mouseout"||n==="pointerout",he&&c!==Ks&&(at=c.relatedTarget||c.fromElement)&&(mn(at)||at[ur]))break e;if((ge||he)&&(he=_e.window===_e?_e:(he=_e.ownerDocument)?he.defaultView||he.parentWindow:window,ge?(at=c.relatedTarget||c.toElement,ge=le,at=at?mn(at):null,at!==null&&(ln=d(at),$e=at.tag,at!==ln||$e!==5&&$e!==27&&$e!==6)&&(at=null)):(ge=null,at=le),ge!==at)){if($e=$s,we="onMouseLeave",ie="onMouseEnter",te="mouse",(n==="pointerout"||n==="pointerover")&&($e=As,we="onPointerLeave",ie="onPointerEnter",te="pointer"),ln=ge==null?he:hr(ge),oe=at==null?he:hr(at),he=new $e(we,te+"leave",ge,c,_e),he.target=ln,he.relatedTarget=oe,we=null,mn(_e)===le&&($e=new $e(ie,te+"enter",at,c,_e),$e.target=oe,$e.relatedTarget=ln,we=$e),ln=we,ge&&at)t:{for($e=ge,ie=at,te=0,oe=$e;oe;oe=Bl(oe))te++;for(oe=0,we=ie;we;we=Bl(we))oe++;for(;0<te-oe;)$e=Bl($e),te--;for(;0<oe-te;)ie=Bl(ie),oe--;for(;te--;){if($e===ie||ie!==null&&$e===ie.alternate)break t;$e=Bl($e),ie=Bl(ie)}$e=null}else $e=null;ge!==null&&E2(Ce,he,ge,$e,!1),at!==null&&ln!==null&&E2(Ce,ln,at,$e,!0)}}e:{if(he=le?hr(le):window,ge=he.nodeName&&he.nodeName.toLowerCase(),ge==="select"||ge==="input"&&he.type==="file")var je=Lu;else if(bo(he))if(hc)je=o;else{je=D;var vt=gl}else ge=he.nodeName,!ge||ge.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?le&&Ye(le.elementType)&&(je=Lu):je=i;if(je&&(je=je(n,le))){Ki(Ce,je,c,_e);break e}vt&&vt(n,he,le),n==="focusout"&&le&&he.type==="number"&&le.memoizedProps.value!=null&&ae(he,"number",he.value)}switch(vt=le?hr(le):window,n){case"focusin":(bo(vt)||vt.contentEditable==="true")&&(L=vt,H=le,W=null);break;case"focusout":W=H=L=null;break;case"mousedown":$=!0;break;case"contextmenu":case"mouseup":case"dragend":$=!1,se(Ce,c,_e);break;case"selectionchange":if(M)break;case"keydown":case"keyup":se(Ce,c,_e)}var Qe;if(st)e:{switch(n){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else wr?fi(n,c)&&(nt="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(nt="onCompositionStart");nt&&(Tn&&c.locale!=="ko"&&(wr||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&wr&&(Qe=Pr()):(Ji=_e,Qt="value"in Ji?Ji.value:Ji.textContent,wr=!0)),vt=wh(le,nt),0<vt.length&&(nt=new ys(nt,n,null,c,_e),Ce.push({event:nt,listeners:vt}),Qe?nt.data=Qe:(Qe=Yi(c),Qe!==null&&(nt.data=Qe)))),(Qe=Vt?rs(n,c):ud(n,c))&&(nt=wh(le,"onBeforeInput"),0<nt.length&&(vt=new ys("onBeforeInput","beforeinput",null,c,_e),Ce.push({event:vt,listeners:nt}),vt.data=Qe)),lT(Ce,n,le,c,_e)}p2(Ce,s)})}function Fc(n,s,c){return{instance:n,listener:s,currentTarget:c}}function wh(n,s){for(var c=s+"Capture",g=[];n!==null;){var _=n,T=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||T===null||(_=Ke(n,c),_!=null&&g.unshift(Fc(n,_,T)),_=Ke(n,s),_!=null&&g.push(Fc(n,_,T))),n.tag===3)return g;n=n.return}return[]}function Bl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function E2(n,s,c,g,_){for(var T=s._reactName,O=[];c!==null&&c!==g;){var k=c,q=k.alternate,le=k.stateNode;if(k=k.tag,q!==null&&q===g)break;k!==5&&k!==26&&k!==27||le===null||(q=le,_?(le=Ke(c,T),le!=null&&O.unshift(Fc(c,le,q))):_||(le=Ke(c,T),le!=null&&O.push(Fc(c,le,q)))),c=c.return}O.length!==0&&n.push({event:s,listeners:O})}var fT=/\r\n?/g,dT=/\u0000|\uFFFD/g;function _2(n){return(typeof n=="string"?n:""+n).replace(fT,`
`).replace(dT,"")}function A2(n,s){return s=_2(s),_2(n)===s}function xh(){}function on(n,s,c,g,_,T){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||yn(n,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&yn(n,""+g);break;case"className":qs(n,"class",g);break;case"tabIndex":qs(n,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":qs(n,c,g);break;case"style":hi(n,g,T);break;case"data":if(s!=="object"){qs(n,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){n.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(c);break}g=gr(""+g),n.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(c==="formAction"?(s!=="input"&&on(n,s,"name",_.name,_,null),on(n,s,"formEncType",_.formEncType,_,null),on(n,s,"formMethod",_.formMethod,_,null),on(n,s,"formTarget",_.formTarget,_,null)):(on(n,s,"encType",_.encType,_,null),on(n,s,"method",_.method,_,null),on(n,s,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){n.removeAttribute(c);break}g=gr(""+g),n.setAttribute(c,g);break;case"onClick":g!=null&&(n.onclick=xh);break;case"onScroll":g!=null&&St("scroll",n);break;case"onScrollEnd":g!=null&&St("scrollend",n);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(c=g.__html,c!=null){if(_.children!=null)throw Error(a(60));n.innerHTML=c}}break;case"multiple":n.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":n.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){n.removeAttribute("xlink:href");break}c=gr(""+g),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(c,""+g):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":g===!0?n.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?n.setAttribute(c,g):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?n.setAttribute(c,g):n.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?n.removeAttribute(c):n.setAttribute(c,g);break;case"popover":St("beforetoggle",n),St("toggle",n),xe(n,"popover",g);break;case"xlinkActuate":Pt(n,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Pt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Pt(n,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Pt(n,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Pt(n,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Pt(n,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Pt(n,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":xe(n,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=rn.get(c)||c,xe(n,c,g))}}function D1(n,s,c,g,_,T){switch(c){case"style":hi(n,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(c=g.__html,c!=null){if(_.children!=null)throw Error(a(60));n.innerHTML=c}}break;case"children":typeof g=="string"?yn(n,g):(typeof g=="number"||typeof g=="bigint")&&yn(n,""+g);break;case"onScroll":g!=null&&St("scroll",n);break;case"onScrollEnd":g!=null&&St("scrollend",n);break;case"onClick":g!=null&&(n.onclick=xh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!js.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),s=c.slice(2,_?c.length-7:void 0),T=n[gn]||null,T=T!=null?T[c]:null,typeof T=="function"&&n.removeEventListener(s,T,_),typeof g=="function")){typeof T!="function"&&T!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(s,g,_);break e}c in n?n[c]=g:g===!0?n.setAttribute(c,""):xe(n,c,g)}}}function vi(n,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",n),St("load",n);var g=!1,_=!1,T;for(T in c)if(c.hasOwnProperty(T)){var O=c[T];if(O!=null)switch(T){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:on(n,s,T,O,c,null)}}_&&on(n,s,"srcSet",c.srcSet,c,null),g&&on(n,s,"src",c.src,c,null);return;case"input":St("invalid",n);var k=T=O=_=null,q=null,le=null;for(g in c)if(c.hasOwnProperty(g)){var _e=c[g];if(_e!=null)switch(g){case"name":_=_e;break;case"type":O=_e;break;case"checked":q=_e;break;case"defaultChecked":le=_e;break;case"value":T=_e;break;case"defaultValue":k=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(a(137,s));break;default:on(n,s,g,_e,c,null)}}Ln(n,T,k,q,le,O,_,!1),ds(n);return;case"select":St("invalid",n),g=O=T=null;for(_ in c)if(c.hasOwnProperty(_)&&(k=c[_],k!=null))switch(_){case"value":T=k;break;case"defaultValue":O=k;break;case"multiple":g=k;default:on(n,s,_,k,c,null)}s=T,c=O,n.multiple=!!g,s!=null?U(n,!!g,s,!1):c!=null&&U(n,!!g,c,!0);return;case"textarea":St("invalid",n),T=_=g=null;for(O in c)if(c.hasOwnProperty(O)&&(k=c[O],k!=null))switch(O){case"value":g=k;break;case"defaultValue":_=k;break;case"children":T=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(91));break;default:on(n,s,O,k,c,null)}Sn(n,g,_,T),ds(n);return;case"option":for(q in c)if(c.hasOwnProperty(q)&&(g=c[q],g!=null))switch(q){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:on(n,s,q,g,c,null)}return;case"dialog":St("beforetoggle",n),St("toggle",n),St("cancel",n),St("close",n);break;case"iframe":case"object":St("load",n);break;case"video":case"audio":for(g=0;g<Uc.length;g++)St(Uc[g],n);break;case"image":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"embed":case"source":case"link":St("error",n),St("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in c)if(c.hasOwnProperty(le)&&(g=c[le],g!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:on(n,s,le,g,c,null)}return;default:if(Ye(s)){for(_e in c)c.hasOwnProperty(_e)&&(g=c[_e],g!==void 0&&D1(n,s,_e,g,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(g=c[k],g!=null&&on(n,s,k,g,c,null))}function gT(n,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,T=null,O=null,k=null,q=null,le=null,_e=null;for(ge in c){var Ce=c[ge];if(c.hasOwnProperty(ge)&&Ce!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":q=Ce;default:g.hasOwnProperty(ge)||on(n,s,ge,null,g,Ce)}}for(var he in g){var ge=g[he];if(Ce=c[he],g.hasOwnProperty(he)&&(ge!=null||Ce!=null))switch(he){case"type":T=ge;break;case"name":_=ge;break;case"checked":le=ge;break;case"defaultChecked":_e=ge;break;case"value":O=ge;break;case"defaultValue":k=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(a(137,s));break;default:ge!==Ce&&on(n,s,he,ge,g,Ce)}}Ht(n,O,k,q,le,_e,T,_);return;case"select":ge=O=k=he=null;for(T in c)if(q=c[T],c.hasOwnProperty(T)&&q!=null)switch(T){case"value":break;case"multiple":ge=q;default:g.hasOwnProperty(T)||on(n,s,T,null,g,q)}for(_ in g)if(T=g[_],q=c[_],g.hasOwnProperty(_)&&(T!=null||q!=null))switch(_){case"value":he=T;break;case"defaultValue":k=T;break;case"multiple":O=T;default:T!==q&&on(n,s,_,T,g,q)}s=k,c=O,g=ge,he!=null?U(n,!!c,he,!1):!!g!=!!c&&(s!=null?U(n,!!c,s,!0):U(n,!!c,c?[]:"",!1));return;case"textarea":ge=he=null;for(k in c)if(_=c[k],c.hasOwnProperty(k)&&_!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:on(n,s,k,null,g,_)}for(O in g)if(_=g[O],T=c[O],g.hasOwnProperty(O)&&(_!=null||T!=null))switch(O){case"value":he=_;break;case"defaultValue":ge=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:_!==T&&on(n,s,O,_,g,T)}Xe(n,he,ge);return;case"option":for(var at in c)if(he=c[at],c.hasOwnProperty(at)&&he!=null&&!g.hasOwnProperty(at))switch(at){case"selected":n.selected=!1;break;default:on(n,s,at,null,g,he)}for(q in g)if(he=g[q],ge=c[q],g.hasOwnProperty(q)&&he!==ge&&(he!=null||ge!=null))switch(q){case"selected":n.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:on(n,s,q,he,g,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in c)he=c[$e],c.hasOwnProperty($e)&&he!=null&&!g.hasOwnProperty($e)&&on(n,s,$e,null,g,he);for(le in g)if(he=g[le],ge=c[le],g.hasOwnProperty(le)&&he!==ge&&(he!=null||ge!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(a(137,s));break;default:on(n,s,le,he,g,ge)}return;default:if(Ye(s)){for(var ln in c)he=c[ln],c.hasOwnProperty(ln)&&he!==void 0&&!g.hasOwnProperty(ln)&&D1(n,s,ln,void 0,g,he);for(_e in g)he=g[_e],ge=c[_e],!g.hasOwnProperty(_e)||he===ge||he===void 0&&ge===void 0||D1(n,s,_e,he,g,ge);return}}for(var ie in c)he=c[ie],c.hasOwnProperty(ie)&&he!=null&&!g.hasOwnProperty(ie)&&on(n,s,ie,null,g,he);for(Ce in g)he=g[Ce],ge=c[Ce],!g.hasOwnProperty(Ce)||he===ge||he==null&&ge==null||on(n,s,Ce,he,g,ge)}var M1=null,P1=null;function Th(n){return n.nodeType===9?n:n.ownerDocument}function w2(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x2(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function L1(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var k1=null;function mT(){var n=window.event;return n&&n.type==="popstate"?n===k1?!1:(k1=n,!0):(k1=null,!1)}var T2=typeof setTimeout=="function"?setTimeout:void 0,pT=typeof clearTimeout=="function"?clearTimeout:void 0,C2=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof C2<"u"?function(n){return C2.resolve(null).then(n).catch(ET)}:T2;function ET(n){setTimeout(function(){throw n})}function Ya(n){return n==="head"}function v2(n,s){var c=s,g=0,_=0;do{var T=c.nextSibling;if(n.removeChild(c),T&&T.nodeType===8)if(c=T.data,c==="/$"){if(0<g&&8>g){c=g;var O=n.ownerDocument;if(c&1&&zc(O.documentElement),c&2&&zc(O.body),c&4)for(c=O.head,zc(c),O=c.firstChild;O;){var k=O.nextSibling,q=O.nodeName;O[ji]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&O.rel.toLowerCase()==="stylesheet"||c.removeChild(O),O=k}}if(_===0){n.removeChild(T),Wc(s);return}_--}else c==="$"||c==="$?"||c==="$!"?_++:g=c.charCodeAt(0)-48;else g=0;c=T}while(c);Wc(s)}function B1(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":B1(c),fs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function _T(n,s,c,g){for(;n.nodeType===1;){var _=c;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(g){if(!n[ji])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(T=n.getAttribute("rel"),T==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(T!==_.rel||n.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||n.getAttribute("title")!==(_.title==null?null:_.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(T=n.getAttribute("src"),(T!==(_.src==null?null:_.src)||n.getAttribute("type")!==(_.type==null?null:_.type)||n.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&T&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var T=_.name==null?null:""+_.name;if(_.type==="hidden"&&n.getAttribute("name")===T)return n}else return n;if(n=as(n.nextSibling),n===null)break}return null}function AT(n,s,c){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=as(n.nextSibling),n===null))return null;return n}function V1(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function wT(n,s){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),n._reactRetry=g}}function as(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var U1=null;function b2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return n;s--}else c==="/$"&&s++}n=n.previousSibling}return null}function S2(n,s,c){switch(s=Th(c),n){case"html":if(n=s.documentElement,!n)throw Error(a(452));return n;case"head":if(n=s.head,!n)throw Error(a(453));return n;case"body":if(n=s.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function zc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);fs(n)}var Gr=new Map,I2=new Set;function Ch(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var da=Ae.d;Ae.d={f:xT,r:TT,D:CT,C:vT,L:bT,m:ST,X:RT,S:IT,M:NT};function xT(){var n=da.f(),s=mh();return n||s}function TT(n){var s=_i(n);s!==null&&s.tag===5&&s.type==="form"?Km(s):da.r(n)}var Vl=typeof document>"u"?null:document;function R2(n,s,c){var g=Vl;if(g&&typeof s=="string"&&s){var _=pn(s);_='link[rel="'+n+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),I2.has(_)||(I2.add(_),n={rel:n,crossOrigin:c,href:s},g.querySelector(_)===null&&(s=g.createElement("link"),vi(s,"link",n),Ft(s),g.head.appendChild(s)))}}function CT(n){da.D(n),R2("dns-prefetch",n,null)}function vT(n,s){da.C(n,s),R2("preconnect",n,s)}function bT(n,s,c){da.L(n,s,c);var g=Vl;if(g&&n&&s){var _='link[rel="preload"][as="'+pn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+pn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+pn(c.imageSizes)+'"]')):_+='[href="'+pn(n)+'"]';var T=_;switch(s){case"style":T=Ul(n);break;case"script":T=Fl(n)}Gr.has(T)||(n=b({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:n,as:s},c),Gr.set(T,n),g.querySelector(_)!==null||s==="style"&&g.querySelector(Hc(T))||s==="script"&&g.querySelector(Gc(T))||(s=g.createElement("link"),vi(s,"link",n),Ft(s),g.head.appendChild(s)))}}function ST(n,s){da.m(n,s);var c=Vl;if(c&&n){var g=s&&typeof s.as=="string"?s.as:"script",_='link[rel="modulepreload"][as="'+pn(g)+'"][href="'+pn(n)+'"]',T=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Fl(n)}if(!Gr.has(T)&&(n=b({rel:"modulepreload",href:n},s),Gr.set(T,n),c.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Gc(T)))return}g=c.createElement("link"),vi(g,"link",n),Ft(g),c.head.appendChild(g)}}}function IT(n,s,c){da.S(n,s,c);var g=Vl;if(g&&n){var _=fr(g).hoistableStyles,T=Ul(n);s=s||"default";var O=_.get(T);if(!O){var k={loading:0,preload:null};if(O=g.querySelector(Hc(T)))k.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":s},c),(c=Gr.get(T))&&F1(n,c);var q=O=g.createElement("link");Ft(q),vi(q,"link",n),q._p=new Promise(function(le,_e){q.onload=le,q.onerror=_e}),q.addEventListener("load",function(){k.loading|=1}),q.addEventListener("error",function(){k.loading|=2}),k.loading|=4,vh(O,s,g)}O={type:"stylesheet",instance:O,count:1,state:k},_.set(T,O)}}}function RT(n,s){da.X(n,s);var c=Vl;if(c&&n){var g=fr(c).hoistableScripts,_=Fl(n),T=g.get(_);T||(T=c.querySelector(Gc(_)),T||(n=b({src:n,async:!0},s),(s=Gr.get(_))&&z1(n,s),T=c.createElement("script"),Ft(T),vi(T,"link",n),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(_,T))}}function NT(n,s){da.M(n,s);var c=Vl;if(c&&n){var g=fr(c).hoistableScripts,_=Fl(n),T=g.get(_);T||(T=c.querySelector(Gc(_)),T||(n=b({src:n,async:!0,type:"module"},s),(s=Gr.get(_))&&z1(n,s),T=c.createElement("script"),Ft(T),vi(T,"link",n),c.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(_,T))}}function N2(n,s,c,g){var _=(_=Ne.current)?Ch(_):null;if(!_)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Ul(c.href),c=fr(_).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Ul(c.href);var T=fr(_).hoistableStyles,O=T.get(n);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(n,O),(T=_.querySelector(Hc(n)))&&!T._p&&(O.instance=T,O.state.loading=5),Gr.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Gr.set(n,c),T||OT(_,n,c,O.state))),s&&g===null)throw Error(a(528,""));return O}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Fl(c),c=fr(_).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Ul(n){return'href="'+pn(n)+'"'}function Hc(n){return'link[rel="stylesheet"]['+n+"]"}function O2(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function OT(n,s,c,g){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=n.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),vi(s,"link",c),Ft(s),n.head.appendChild(s))}function Fl(n){return'[src="'+pn(n)+'"]'}function Gc(n){return"script[async]"+n}function D2(n,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=n.querySelector('style[data-href~="'+pn(c.href)+'"]');if(g)return s.instance=g,Ft(g),g;var _=b({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(n.ownerDocument||n).createElement("style"),Ft(g),vi(g,"style",_),vh(g,c.precedence,n),s.instance=g;case"stylesheet":_=Ul(c.href);var T=n.querySelector(Hc(_));if(T)return s.state.loading|=4,s.instance=T,Ft(T),T;g=O2(c),(_=Gr.get(_))&&F1(g,_),T=(n.ownerDocument||n).createElement("link"),Ft(T);var O=T;return O._p=new Promise(function(k,q){O.onload=k,O.onerror=q}),vi(T,"link",g),s.state.loading|=4,vh(T,c.precedence,n),s.instance=T;case"script":return T=Fl(c.src),(_=n.querySelector(Gc(T)))?(s.instance=_,Ft(_),_):(g=c,(_=Gr.get(T))&&(g=b({},c),z1(g,_)),n=n.ownerDocument||n,_=n.createElement("script"),Ft(_),vi(_,"link",g),n.head.appendChild(_),s.instance=_);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,vh(g,c.precedence,n));return s.instance}function vh(n,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,T=_,O=0;O<g.length;O++){var k=g[O];if(k.dataset.precedence===s)T=k;else if(T!==_)break}T?T.parentNode.insertBefore(n,T.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(n,s.firstChild))}function F1(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function z1(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var bh=null;function M2(n,s,c){if(bh===null){var g=new Map,_=bh=new Map;_.set(c,g)}else _=bh,g=_.get(c),g||(g=new Map,_.set(c,g));if(g.has(n))return g;for(g.set(n,null),c=c.getElementsByTagName(n),_=0;_<c.length;_++){var T=c[_];if(!(T[ji]||T[bn]||n==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var O=T.getAttribute(s)||"";O=n+O;var k=g.get(O);k?k.push(T):g.set(O,[T])}}return g}function P2(n,s,c){n=n.ownerDocument||n,n.head.insertBefore(c,s==="title"?n.querySelector("head > title"):null)}function DT(n,s,c){if(c===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function L2(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var jc=null;function MT(){}function PT(n,s,c){if(jc===null)throw Error(a(475));var g=jc;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var _=Ul(c.href),T=n.querySelector(Hc(_));if(T){n=T._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(g.count++,g=Sh.bind(g),n.then(g,g)),s.state.loading|=4,s.instance=T,Ft(T);return}T=n.ownerDocument||n,c=O2(c),(_=Gr.get(_))&&F1(c,_),T=T.createElement("link"),Ft(T);var O=T;O._p=new Promise(function(k,q){O.onload=k,O.onerror=q}),vi(T,"link",c),s.instance=T}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(g.count++,s=Sh.bind(g),n.addEventListener("load",s),n.addEventListener("error",s))}}function LT(){if(jc===null)throw Error(a(475));var n=jc;return n.stylesheets&&n.count===0&&H1(n,n.stylesheets),0<n.count?function(s){var c=setTimeout(function(){if(n.stylesheets&&H1(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(c)}}:null}function Sh(){if(this.count--,this.count===0){if(this.stylesheets)H1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ih=null;function H1(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ih=new Map,s.forEach(kT,n),Ih=null,Sh.call(n))}function kT(n,s){if(!(s.state.loading&4)){var c=Ih.get(n);if(c)var g=c.get(null);else{c=new Map,Ih.set(n,c);for(var _=n.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<_.length;T++){var O=_[T];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),g=O)}g&&c.set(null,g)}_=s.instance,O=_.getAttribute("data-precedence"),T=c.get(O)||g,T===g&&c.set(null,_),c.set(O,_),this.count++,g=Sh.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),T?T.parentNode.insertBefore(_,T.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(_,n.firstChild)),s.state.loading|=4}}var qc={$$typeof:ne,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function BT(n,s,c,g,_,T,O,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.hiddenUpdates=xt(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=T,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function k2(n,s,c,g,_,T,O,k,q,le,_e,Ce){return n=new BT(n,s,c,O,k,q,le,Ce),s=1,T===!0&&(s|=24),T=Tr(3,null,null,s),n.current=T,T.stateNode=n,s=Td(),s.refCount++,n.pooledCache=s,s.refCount++,T.memoizedState={element:g,isDehydrated:c,cache:s},Sd(T),n}function B2(n){return n?(n=yl,n):yl}function V2(n,s,c,g,_,T){_=B2(_),g.context===null?g.context=_:g.pendingContext=_,g=Pa(s),g.payload={element:c},T=T===void 0?null:T,T!==null&&(g.callback=T),c=La(n,g,s),c!==null&&(Ir(c,n,s),wc(c,n,s))}function U2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function G1(n,s){U2(n,s),(n=n.alternate)&&U2(n,s)}function F2(n){if(n.tag===13){var s=pl(n,67108864);s!==null&&Ir(s,n,67108864),G1(n,67108864)}}var Rh=!0;function VT(n,s,c,g){var _=pe.T;pe.T=null;var T=Ae.p;try{Ae.p=2,j1(n,s,c,g)}finally{Ae.p=T,pe.T=_}}function UT(n,s,c,g){var _=pe.T;pe.T=null;var T=Ae.p;try{Ae.p=8,j1(n,s,c,g)}finally{Ae.p=T,pe.T=_}}function j1(n,s,c,g){if(Rh){var _=q1(g);if(_===null)O1(n,s,g,Nh,c),H2(n,g);else if(zT(_,n,s,c,g))g.stopPropagation();else if(H2(n,g),s&4&&-1<FT.indexOf(n)){for(;_!==null;){var T=_i(_);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var O=Yt(T.pendingLanes);if(O!==0){var k=T;for(k.pendingLanes|=2,k.entangledLanes|=2;O;){var q=1<<31-qt(O);k.entanglements[1]|=q,O&=~q}Ss(T),(en&6)===0&&(dh=Ut()+500,Vc(0))}}break;case 13:k=pl(T,2),k!==null&&Ir(k,T,2),mh(),G1(T,2)}if(T=q1(g),T===null&&O1(n,s,g,Nh,c),T===_)break;_=T}_!==null&&g.stopPropagation()}else O1(n,s,g,null,c)}}function q1(n){return n=gs(n),X1(n)}var Nh=null;function X1(n){if(Nh=null,n=mn(n),n!==null){var s=d(n);if(s===null)n=null;else{var c=s.tag;if(c===13){if(n=E(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Nh=n,null}function z2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jt()){case Ze:return 2;case vn:return 8;case ze:case va:return 32;case ba:return 268435456;default:return 32}default:return 32}}var Y1=!1,Ka=null,Wa=null,Qa=null,Xc=new Map,Yc=new Map,Za=[],FT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H2(n,s){switch(n){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Xc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(s.pointerId)}}function Kc(n,s,c,g,_,T){return n===null||n.nativeEvent!==T?(n={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:T,targetContainers:[_]},s!==null&&(s=_i(s),s!==null&&F2(s)),n):(n.eventSystemFlags|=g,s=n.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),n)}function zT(n,s,c,g,_){switch(s){case"focusin":return Ka=Kc(Ka,n,s,c,g,_),!0;case"dragenter":return Wa=Kc(Wa,n,s,c,g,_),!0;case"mouseover":return Qa=Kc(Qa,n,s,c,g,_),!0;case"pointerover":var T=_.pointerId;return Xc.set(T,Kc(Xc.get(T)||null,n,s,c,g,_)),!0;case"gotpointercapture":return T=_.pointerId,Yc.set(T,Kc(Yc.get(T)||null,n,s,c,g,_)),!0}return!1}function G2(n){var s=mn(n.target);if(s!==null){var c=d(s);if(c!==null){if(s=c.tag,s===13){if(s=E(c),s!==null){n.blockedOn=s,Sa(n.priority,function(){if(c.tag===13){var g=Sr();g=Gs(g);var _=pl(c,g);_!==null&&Ir(_,c,g),G1(c,g)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Oh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=q1(n.nativeEvent);if(c===null){c=n.nativeEvent;var g=new c.constructor(c.type,c);Ks=g,c.target.dispatchEvent(g),Ks=null}else return s=_i(c),s!==null&&F2(s),n.blockedOn=c,!1;s.shift()}return!0}function j2(n,s,c){Oh(n)&&c.delete(s)}function HT(){Y1=!1,Ka!==null&&Oh(Ka)&&(Ka=null),Wa!==null&&Oh(Wa)&&(Wa=null),Qa!==null&&Oh(Qa)&&(Qa=null),Xc.forEach(j2),Yc.forEach(j2)}function Dh(n,s){n.blockedOn===s&&(n.blockedOn=null,Y1||(Y1=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,HT)))}var Mh=null;function q2(n){Mh!==n&&(Mh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Mh===n&&(Mh=null);for(var s=0;s<n.length;s+=3){var c=n[s],g=n[s+1],_=n[s+2];if(typeof g!="function"){if(X1(g||c)===null)continue;break}var T=_i(c);T!==null&&(n.splice(s,3),s-=3,Xd(T,{pending:!0,data:_,method:c.method,action:g},g,_))}}))}function Wc(n){function s(q){return Dh(q,n)}Ka!==null&&Dh(Ka,n),Wa!==null&&Dh(Wa,n),Qa!==null&&Dh(Qa,n),Xc.forEach(s),Yc.forEach(s);for(var c=0;c<Za.length;c++){var g=Za[c];g.blockedOn===n&&(g.blockedOn=null)}for(;0<Za.length&&(c=Za[0],c.blockedOn===null);)G2(c),c.blockedOn===null&&Za.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var _=c[g],T=c[g+1],O=_[gn]||null;if(typeof T=="function")O||q2(c);else if(O){var k=null;if(T&&T.hasAttribute("formAction")){if(_=T,O=T[gn]||null)k=O.formAction;else if(X1(_)!==null)continue}else k=O.action;typeof k=="function"?c[g+1]=k:(c.splice(g,3),g-=3),q2(c)}}}function K1(n){this._internalRoot=n}Ph.prototype.render=K1.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,g=Sr();V2(c,g,n,s,null,null)},Ph.prototype.unmount=K1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;V2(n.current,2,null,n,null,null),mh(),s[ur]=null}};function Ph(n){this._internalRoot=n}Ph.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ri();n={blockedOn:null,target:n,priority:s};for(var c=0;c<Za.length&&s!==0&&s<Za[c].priority;c++);Za.splice(c,0,n),c===0&&G2(n)}};var X2=e.version;if(X2!=="19.1.1")throw Error(a(527,X2,"19.1.1"));Ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=x(s),n=n!==null?A(n):null,n=n===null?null:n.stateNode,n};var GT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Wn=Lh.inject(GT),ti=Lh}catch{}}return Zc.createRoot=function(n,s){if(!u(n))throw Error(a(299));var c=!1,g="",_=lp,T=cp,O=up,k=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(_=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=k2(n,1,!1,null,null,c,g,_,T,O,k,null),n[ur]=s.current,N1(n),new K1(s)},Zc.hydrateRoot=function(n,s,c){if(!u(n))throw Error(a(299));var g=!1,_="",T=lp,O=cp,k=up,q=null,le=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks),c.formState!==void 0&&(le=c.formState)),s=k2(n,1,!0,s,c??null,g,_,T,O,k,q,le),s.context=B2(null),c=s.current,g=Sr(),g=Gs(g),_=Pa(g),_.callback=null,La(c,_,g),c=g,s.current.lanes=c,Jt(s,c),Ss(s),n[ur]=s.current,N1(n),new Ph(s)},Zc.version="19.1.1",Zc}var ny;function eC(){if(ny)return Z1.exports;ny=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Z1.exports=$T(),Z1.exports}var tC=eC();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var iy="popstate";function nC(r={}){function e(u,d){let{pathname:E="/",search:C="",hash:x=""}=tl(u.location.hash.substring(1));return!E.startsWith("/")&&!E.startsWith(".")&&(E="/"+E),_0("",{pathname:E,search:C,hash:x},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function t(u,d){let E=u.document.querySelector("base"),C="";if(E&&E.getAttribute("href")){let x=u.location.href,A=x.indexOf("#");C=A===-1?x:x.slice(0,A)}return C+"#"+(typeof d=="string"?d:fu(d))}function a(u,d){us(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return rC(e,t,a,r)}function On(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function us(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iC(){return Math.random().toString(36).substring(2,10)}function ry(r,e){return{usr:r.state,key:r.key,idx:e}}function _0(r,e,t=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?tl(e):e,state:t,key:e&&e.key||a||iC()}}function fu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function tl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function rC(r,e,t,a={}){let{window:u=document.defaultView,v5Compat:d=!1}=a,E=u.history,C="POP",x=null,A=b();A==null&&(A=0,E.replaceState({...E.state,idx:A},""));function b(){return(E.state||{idx:null}).idx}function R(){C="POP";let Y=b(),Ee=Y==null?null:Y-A;A=Y,x&&x({action:C,location:J.location,delta:Ee})}function P(Y,Ee){C="PUSH";let ue=_0(J.location,Y,Ee);t&&t(ue,Y),A=b()+1;let ne=ry(ue,A),Se=J.createHref(ue);try{E.pushState(ne,"",Se)}catch(ke){if(ke instanceof DOMException&&ke.name==="DataCloneError")throw ke;u.location.assign(Se)}d&&x&&x({action:C,location:J.location,delta:1})}function G(Y,Ee){C="REPLACE";let ue=_0(J.location,Y,Ee);t&&t(ue,Y),A=b();let ne=ry(ue,A),Se=J.createHref(ue);E.replaceState(ne,"",Se),d&&x&&x({action:C,location:J.location,delta:0})}function Q(Y){return sC(Y)}let J={get action(){return C},get location(){return r(u,E)},listen(Y){if(x)throw new Error("A history only accepts one active listener");return u.addEventListener(iy,R),x=Y,()=>{u.removeEventListener(iy,R),x=null}},createHref(Y){return e(u,Y)},createURL:Q,encodeLocation(Y){let Ee=Q(Y);return{pathname:Ee.pathname,search:Ee.search,hash:Ee.hash}},push:P,replace:G,go(Y){return E.go(Y)}};return J}function sC(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),On(t,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:fu(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function s_(r,e,t="/"){return aC(r,e,t,!1)}function aC(r,e,t,a){let u=typeof e=="string"?tl(e):e,d=_a(u.pathname||"/",t);if(d==null)return null;let E=a_(r);oC(E);let C=null;for(let x=0;C==null&&x<E.length;++x){let A=EC(d);C=pC(E[x],A,a)}return C}function a_(r,e=[],t=[],a="",u=!1){let d=(E,C,x=u,A)=>{let b={relativePath:A===void 0?E.path||"":A,caseSensitive:E.caseSensitive===!0,childrenIndex:C,route:E};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&x)return;On(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let R=Ea([a,b.relativePath]),P=t.concat(b);E.children&&E.children.length>0&&(On(E.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),a_(E.children,e,P,R,x)),!(E.path==null&&!E.index)&&e.push({path:R,score:gC(R,E.index),routesMeta:P})};return r.forEach((E,C)=>{if(E.path===""||!E.path?.includes("?"))d(E,C);else for(let x of o_(E.path))d(E,C,!0,x)}),e}function o_(r){let e=r.split("/");if(e.length===0)return[];let[t,...a]=e,u=t.endsWith("?"),d=t.replace(/\?$/,"");if(a.length===0)return u?[d,""]:[d];let E=o_(a.join("/")),C=[];return C.push(...E.map(x=>x===""?d:[d,x].join("/"))),u&&C.push(...E),C.map(x=>r.startsWith("/")&&x===""?"/":x)}function oC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:mC(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var lC=/^:[\w-]+$/,cC=3,uC=2,hC=1,fC=10,dC=-2,sy=r=>r==="*";function gC(r,e){let t=r.split("/"),a=t.length;return t.some(sy)&&(a+=dC),e&&(a+=uC),t.filter(u=>!sy(u)).reduce((u,d)=>u+(lC.test(d)?cC:d===""?hC:fC),a)}function mC(r,e){return r.length===e.length&&r.slice(0,-1).every((a,u)=>a===e[u])?r[r.length-1]-e[e.length-1]:0}function pC(r,e,t=!1){let{routesMeta:a}=r,u={},d="/",E=[];for(let C=0;C<a.length;++C){let x=a[C],A=C===a.length-1,b=d==="/"?e:e.slice(d.length)||"/",R=af({path:x.relativePath,caseSensitive:x.caseSensitive,end:A},b),P=x.route;if(!R&&A&&t&&!a[a.length-1].route.index&&(R=af({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},b)),!R)return null;Object.assign(u,R.params),E.push({params:u,pathname:Ea([d,R.pathname]),pathnameBase:xC(Ea([d,R.pathnameBase])),route:P}),R.pathnameBase!=="/"&&(d=Ea([d,R.pathnameBase]))}return E}function af(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,a]=yC(r.path,r.caseSensitive,r.end),u=e.match(t);if(!u)return null;let d=u[0],E=d.replace(/(.)\/+$/,"$1"),C=u.slice(1);return{params:a.reduce((A,{paramName:b,isOptional:R},P)=>{if(b==="*"){let Q=C[P]||"";E=d.slice(0,d.length-Q.length).replace(/(.)\/+$/,"$1")}const G=C[P];return R&&!G?A[b]=void 0:A[b]=(G||"").replace(/%2F/g,"/"),A},{}),pathname:d,pathnameBase:E,pattern:r}}function yC(r,e=!1,t=!0){us(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,C,x)=>(a.push({paramName:C,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(a.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),a]}function EC(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return us(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function _a(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}function _C(r,e="/"){let{pathname:t,search:a="",hash:u=""}=typeof r=="string"?tl(r):r;return{pathname:t?t.startsWith("/")?t:AC(t,e):e,search:TC(a),hash:CC(u)}}function AC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?t.length>1&&t.pop():u!=="."&&t.push(u)}),t.length>1?t.join("/"):"/"}function t0(r,e,t,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function l_(r){let e=wC(r);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function c_(r,e,t,a=!1){let u;typeof r=="string"?u=tl(r):(u={...r},On(!u.pathname||!u.pathname.includes("?"),t0("?","pathname","search",u)),On(!u.pathname||!u.pathname.includes("#"),t0("#","pathname","hash",u)),On(!u.search||!u.search.includes("#"),t0("#","search","hash",u)));let d=r===""||u.pathname==="",E=d?"/":u.pathname,C;if(E==null)C=t;else{let R=e.length-1;if(!a&&E.startsWith("..")){let P=E.split("/");for(;P[0]==="..";)P.shift(),R-=1;u.pathname=P.join("/")}C=R>=0?e[R]:"/"}let x=_C(u,C),A=E&&E!=="/"&&E.endsWith("/"),b=(d||E===".")&&t.endsWith("/");return!x.pathname.endsWith("/")&&(A||b)&&(x.pathname+="/"),x}var Ea=r=>r.join("/").replace(/\/\/+/g,"/"),xC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),TC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,CC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function vC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var u_=["POST","PUT","PATCH","DELETE"];new Set(u_);var bC=["GET",...u_];new Set(bC);var rc=ye.createContext(null);rc.displayName="DataRouter";var Lf=ye.createContext(null);Lf.displayName="DataRouterState";ye.createContext(!1);var h_=ye.createContext({isTransitioning:!1});h_.displayName="ViewTransition";var SC=ye.createContext(new Map);SC.displayName="Fetchers";var IC=ye.createContext(null);IC.displayName="Await";var Us=ye.createContext(null);Us.displayName="Navigation";var Tu=ye.createContext(null);Tu.displayName="Location";var Ca=ye.createContext({outlet:null,matches:[],isDataRoute:!1});Ca.displayName="Route";var Z0=ye.createContext(null);Z0.displayName="RouteError";function RC(r,{relative:e}={}){On(Cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=ye.useContext(Us),{hash:u,pathname:d,search:E}=vu(r,{relative:e}),C=d;return t!=="/"&&(C=d==="/"?t:Ea([t,d])),a.createHref({pathname:C,search:E,hash:u})}function Cu(){return ye.useContext(Tu)!=null}function nl(){return On(Cu(),"useLocation() may be used only in the context of a <Router> component."),ye.useContext(Tu).location}var f_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function d_(r){ye.useContext(Us).static||ye.useLayoutEffect(r)}function NC(){let{isDataRoute:r}=ye.useContext(Ca);return r?GC():OC()}function OC(){On(Cu(),"useNavigate() may be used only in the context of a <Router> component.");let r=ye.useContext(rc),{basename:e,navigator:t}=ye.useContext(Us),{matches:a}=ye.useContext(Ca),{pathname:u}=nl(),d=JSON.stringify(l_(a)),E=ye.useRef(!1);return d_(()=>{E.current=!0}),ye.useCallback((x,A={})=>{if(us(E.current,f_),!E.current)return;if(typeof x=="number"){t.go(x);return}let b=c_(x,JSON.parse(d),u,A.relative==="path");r==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Ea([e,b.pathname])),(A.replace?t.replace:t.push)(b,A.state,A)},[e,t,d,u,r])}ye.createContext(null);function vu(r,{relative:e}={}){let{matches:t}=ye.useContext(Ca),{pathname:a}=nl(),u=JSON.stringify(l_(t));return ye.useMemo(()=>c_(r,JSON.parse(u),a,e==="path"),[r,u,a,e])}function DC(r,e){return g_(r,e)}function g_(r,e,t,a,u){On(Cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=ye.useContext(Us),{matches:E}=ye.useContext(Ca),C=E[E.length-1],x=C?C.params:{},A=C?C.pathname:"/",b=C?C.pathnameBase:"/",R=C&&C.route;{let ue=R&&R.path||"";m_(A,!R||ue.endsWith("*")||ue.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${ue}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ue}"> to <Route path="${ue==="/"?"*":`${ue}/*`}">.`)}let P=nl(),G;if(e){let ue=typeof e=="string"?tl(e):e;On(b==="/"||ue.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${ue.pathname}" was given in the \`location\` prop.`),G=ue}else G=P;let Q=G.pathname||"/",J=Q;if(b!=="/"){let ue=b.replace(/^\//,"").split("/");J="/"+Q.replace(/^\//,"").split("/").slice(ue.length).join("/")}let Y=s_(r,{pathname:J});us(R||Y!=null,`No routes matched location "${G.pathname}${G.search}${G.hash}" `),us(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${G.pathname}${G.search}${G.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Ee=BC(Y&&Y.map(ue=>Object.assign({},ue,{params:Object.assign({},x,ue.params),pathname:Ea([b,d.encodeLocation?d.encodeLocation(ue.pathname).pathname:ue.pathname]),pathnameBase:ue.pathnameBase==="/"?b:Ea([b,d.encodeLocation?d.encodeLocation(ue.pathnameBase).pathname:ue.pathnameBase])})),E,t,a,u);return e&&Ee?ye.createElement(Tu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...G},navigationType:"POP"}},Ee):Ee}function MC(){let r=HC(),e=vC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},d={padding:"2px 4px",backgroundColor:a},E=null;return console.error("Error handled by React Router default ErrorBoundary:",r),E=ye.createElement(ye.Fragment,null,ye.createElement("p",null,"💿 Hey developer 👋"),ye.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ye.createElement("code",{style:d},"ErrorBoundary")," or"," ",ye.createElement("code",{style:d},"errorElement")," prop on your route.")),ye.createElement(ye.Fragment,null,ye.createElement("h2",null,"Unexpected Application Error!"),ye.createElement("h3",{style:{fontStyle:"italic"}},e),t?ye.createElement("pre",{style:u},t):null,E)}var PC=ye.createElement(MC,null),LC=class extends ye.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?ye.createElement(Ca.Provider,{value:this.props.routeContext},ye.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kC({routeContext:r,match:e,children:t}){let a=ye.useContext(rc);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),ye.createElement(Ca.Provider,{value:r},t)}function BC(r,e=[],t=null,a=null,u=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let d=r,E=t?.errors;if(E!=null){let A=d.findIndex(b=>b.route.id&&E?.[b.route.id]!==void 0);On(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(E).join(",")}`),d=d.slice(0,Math.min(d.length,A+1))}let C=!1,x=-1;if(t)for(let A=0;A<d.length;A++){let b=d[A];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(x=A),b.route.id){let{loaderData:R,errors:P}=t,G=b.route.loader&&!R.hasOwnProperty(b.route.id)&&(!P||P[b.route.id]===void 0);if(b.route.lazy||G){C=!0,x>=0?d=d.slice(0,x+1):d=[d[0]];break}}}return d.reduceRight((A,b,R)=>{let P,G=!1,Q=null,J=null;t&&(P=E&&b.route.id?E[b.route.id]:void 0,Q=b.route.errorElement||PC,C&&(x<0&&R===0?(m_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,J=null):x===R&&(G=!0,J=b.route.hydrateFallbackElement||null)));let Y=e.concat(d.slice(0,R+1)),Ee=()=>{let ue;return P?ue=Q:G?ue=J:b.route.Component?ue=ye.createElement(b.route.Component,null):b.route.element?ue=b.route.element:ue=A,ye.createElement(kC,{match:b,routeContext:{outlet:A,matches:Y,isDataRoute:t!=null},children:ue})};return t&&(b.route.ErrorBoundary||b.route.errorElement||R===0)?ye.createElement(LC,{location:t.location,revalidation:t.revalidation,component:Q,error:P,children:Ee(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},unstable_onError:a}):Ee()},null)}function J0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VC(r){let e=ye.useContext(rc);return On(e,J0(r)),e}function UC(r){let e=ye.useContext(Lf);return On(e,J0(r)),e}function FC(r){let e=ye.useContext(Ca);return On(e,J0(r)),e}function $0(r){let e=FC(r),t=e.matches[e.matches.length-1];return On(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function zC(){return $0("useRouteId")}function HC(){let r=ye.useContext(Z0),e=UC("useRouteError"),t=$0("useRouteError");return r!==void 0?r:e.errors?.[t]}function GC(){let{router:r}=VC("useNavigate"),e=$0("useNavigate"),t=ye.useRef(!1);return d_(()=>{t.current=!0}),ye.useCallback(async(u,d={})=>{us(t.current,f_),t.current&&(typeof u=="number"?r.navigate(u):await r.navigate(u,{fromRouteId:e,...d}))},[r,e])}var ay={};function m_(r,e,t){!e&&!ay[r]&&(ay[r]=!0,us(!1,t))}ye.memo(jC);function jC({routes:r,future:e,state:t,unstable_onError:a}){return g_(r,void 0,t,a,e)}function eo(r){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qC({basename:r="/",children:e=null,location:t,navigationType:a="POP",navigator:u,static:d=!1}){On(!Cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let E=r.replace(/^\/*/,"/"),C=ye.useMemo(()=>({basename:E,navigator:u,static:d,future:{}}),[E,u,d]);typeof t=="string"&&(t=tl(t));let{pathname:x="/",search:A="",hash:b="",state:R=null,key:P="default"}=t,G=ye.useMemo(()=>{let Q=_a(x,E);return Q==null?null:{location:{pathname:Q,search:A,hash:b,state:R,key:P},navigationType:a}},[E,x,A,b,R,P,a]);return us(G!=null,`<Router basename="${E}"> is not able to match the URL "${x}${A}${b}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:ye.createElement(Us.Provider,{value:C},ye.createElement(Tu.Provider,{children:e,value:G}))}function XC({children:r,location:e}){return DC(A0(r),e)}function A0(r,e=[]){let t=[];return ye.Children.forEach(r,(a,u)=>{if(!ye.isValidElement(a))return;let d=[...e,u];if(a.type===ye.Fragment){t.push.apply(t,A0(a.props.children,d));return}On(a.type===eo,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!a.props.index||!a.props.children,"An index route cannot have child routes.");let E={id:a.props.id||d.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(E.children=A0(a.props.children,d)),t.push(E)}),t}var Xh="get",Yh="application/x-www-form-urlencoded";function kf(r){return r!=null&&typeof r.tagName=="string"}function YC(r){return kf(r)&&r.tagName.toLowerCase()==="button"}function KC(r){return kf(r)&&r.tagName.toLowerCase()==="form"}function WC(r){return kf(r)&&r.tagName.toLowerCase()==="input"}function QC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ZC(r,e){return r.button===0&&(!e||e==="_self")&&!QC(r)}var Bh=null;function JC(){if(Bh===null)try{new FormData(document.createElement("form"),0),Bh=!1}catch{Bh=!0}return Bh}var $C=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function n0(r){return r!=null&&!$C.has(r)?(us(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yh}"`),null):r}function e3(r,e){let t,a,u,d,E;if(KC(r)){let C=r.getAttribute("action");a=C?_a(C,e):null,t=r.getAttribute("method")||Xh,u=n0(r.getAttribute("enctype"))||Yh,d=new FormData(r)}else if(YC(r)||WC(r)&&(r.type==="submit"||r.type==="image")){let C=r.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=r.getAttribute("formaction")||C.getAttribute("action");if(a=x?_a(x,e):null,t=r.getAttribute("formmethod")||C.getAttribute("method")||Xh,u=n0(r.getAttribute("formenctype"))||n0(C.getAttribute("enctype"))||Yh,d=new FormData(C,r),!JC()){let{name:A,type:b,value:R}=r;if(b==="image"){let P=A?`${A}.`:"";d.append(`${P}x`,"0"),d.append(`${P}y`,"0")}else A&&d.append(A,R)}}else{if(kf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Xh,a=null,u=Yh,E=r}return d&&u==="text/plain"&&(E=d,d=void 0),{action:a,method:t.toLowerCase(),encType:u,formData:d,body:E}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function eg(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function t3(r,e,t){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&_a(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function n3(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function i3(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function r3(r,e,t){let a=await Promise.all(r.map(async u=>{let d=e.routes[u.route.id];if(d){let E=await n3(d,t);return E.links?E.links():[]}return[]}));return l3(a.flat(1).filter(i3).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function oy(r,e,t,a,u,d){let E=(x,A)=>t[A]?x.route.id!==t[A].route.id:!0,C=(x,A)=>t[A].pathname!==x.pathname||t[A].route.path?.endsWith("*")&&t[A].params["*"]!==x.params["*"];return d==="assets"?e.filter((x,A)=>E(x,A)||C(x,A)):d==="data"?e.filter((x,A)=>{let b=a.routes[x.route.id];if(!b||!b.hasLoader)return!1;if(E(x,A)||C(x,A))return!0;if(x.route.shouldRevalidate){let R=x.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function s3(r,e,{includeHydrateFallback:t}={}){return a3(r.map(a=>{let u=e.routes[a.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),t&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function a3(r){return[...new Set(r)]}function o3(r){let e={},t=Object.keys(r).sort();for(let a of t)e[a]=r[a];return e}function l3(r,e){let t=new Set;return new Set(e),r.reduce((a,u)=>{let d=JSON.stringify(o3(u));return t.has(d)||(t.add(d),a.push({key:d,link:u})),a},[])}function p_(){let r=ye.useContext(rc);return eg(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function c3(){let r=ye.useContext(Lf);return eg(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var tg=ye.createContext(void 0);tg.displayName="FrameworkContext";function y_(){let r=ye.useContext(tg);return eg(r,"You must render this element inside a <HydratedRouter> element"),r}function u3(r,e){let t=ye.useContext(tg),[a,u]=ye.useState(!1),[d,E]=ye.useState(!1),{onFocus:C,onBlur:x,onMouseEnter:A,onMouseLeave:b,onTouchStart:R}=e,P=ye.useRef(null);ye.useEffect(()=>{if(r==="render"&&E(!0),r==="viewport"){let J=Ee=>{Ee.forEach(ue=>{E(ue.isIntersecting)})},Y=new IntersectionObserver(J,{threshold:.5});return P.current&&Y.observe(P.current),()=>{Y.disconnect()}}},[r]),ye.useEffect(()=>{if(a){let J=setTimeout(()=>{E(!0)},100);return()=>{clearTimeout(J)}}},[a]);let G=()=>{u(!0)},Q=()=>{u(!1),E(!1)};return t?r!=="intent"?[d,P,{}]:[d,P,{onFocus:Jc(C,G),onBlur:Jc(x,Q),onMouseEnter:Jc(A,G),onMouseLeave:Jc(b,Q),onTouchStart:Jc(R,G)}]:[!1,P,{}]}function Jc(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function h3({page:r,...e}){let{router:t}=p_(),a=ye.useMemo(()=>s_(t.routes,r,t.basename),[t.routes,r,t.basename]);return a?ye.createElement(d3,{page:r,matches:a,...e}):null}function f3(r){let{manifest:e,routeModules:t}=y_(),[a,u]=ye.useState([]);return ye.useEffect(()=>{let d=!1;return r3(r,e,t).then(E=>{d||u(E)}),()=>{d=!0}},[r,e,t]),a}function d3({page:r,matches:e,...t}){let a=nl(),{manifest:u,routeModules:d}=y_(),{basename:E}=p_(),{loaderData:C,matches:x}=c3(),A=ye.useMemo(()=>oy(r,e,x,u,a,"data"),[r,e,x,u,a]),b=ye.useMemo(()=>oy(r,e,x,u,a,"assets"),[r,e,x,u,a]),R=ye.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let Q=new Set,J=!1;if(e.forEach(Ee=>{let ue=u.routes[Ee.route.id];!ue||!ue.hasLoader||(!A.some(ne=>ne.route.id===Ee.route.id)&&Ee.route.id in C&&d[Ee.route.id]?.shouldRevalidate||ue.hasClientLoader?J=!0:Q.add(Ee.route.id))}),Q.size===0)return[];let Y=t3(r,E,"data");return J&&Q.size>0&&Y.searchParams.set("_routes",e.filter(Ee=>Q.has(Ee.route.id)).map(Ee=>Ee.route.id).join(",")),[Y.pathname+Y.search]},[E,C,a,u,A,e,r,d]),P=ye.useMemo(()=>s3(b,u),[b,u]),G=f3(b);return ye.createElement(ye.Fragment,null,R.map(Q=>ye.createElement("link",{key:Q,rel:"prefetch",as:"fetch",href:Q,...t})),P.map(Q=>ye.createElement("link",{key:Q,rel:"modulepreload",href:Q,...t})),G.map(({key:Q,link:J})=>ye.createElement("link",{key:Q,nonce:t.nonce,...J})))}function g3(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var E_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E_&&(window.__reactRouterVersion="7.9.1")}catch{}function m3({basename:r,children:e,window:t}){let a=ye.useRef();a.current==null&&(a.current=nC({window:t,v5Compat:!0}));let u=a.current,[d,E]=ye.useState({action:u.action,location:u.location}),C=ye.useCallback(x=>{ye.startTransition(()=>E(x))},[E]);return ye.useLayoutEffect(()=>u.listen(C),[u,C]),ye.createElement(qC,{basename:r,children:e,location:d.location,navigationType:d.action,navigator:u})}var __=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bf=ye.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:u,reloadDocument:d,replace:E,state:C,target:x,to:A,preventScrollReset:b,viewTransition:R,...P},G){let{basename:Q}=ye.useContext(Us),J=typeof A=="string"&&__.test(A),Y,Ee=!1;if(typeof A=="string"&&J&&(Y=A,E_))try{let B=new URL(window.location.href),ee=A.startsWith("//")?new URL(B.protocol+A):new URL(A),X=_a(ee.pathname,Q);ee.origin===B.origin&&X!=null?A=X+ee.search+ee.hash:Ee=!0}catch{us(!1,`<Link to="${A}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ue=RC(A,{relative:u}),[ne,Se,ke]=u3(a,P),Ue=_3(A,{replace:E,state:C,target:x,preventScrollReset:b,relative:u,viewTransition:R});function F(B){e&&e(B),B.defaultPrevented||Ue(B)}let z=ye.createElement("a",{...P,...ke,href:Y||ue,onClick:Ee||d?e:F,ref:g3(G,Se),target:x,"data-discover":!J&&t==="render"?"true":void 0});return ne&&!J?ye.createElement(ye.Fragment,null,z,ye.createElement(h3,{page:ue})):z});Bf.displayName="Link";var p3=ye.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:u=!1,style:d,to:E,viewTransition:C,children:x,...A},b){let R=vu(E,{relative:A.relative}),P=nl(),G=ye.useContext(Lf),{navigator:Q,basename:J}=ye.useContext(Us),Y=G!=null&&C3(R)&&C===!0,Ee=Q.encodeLocation?Q.encodeLocation(R).pathname:R.pathname,ue=P.pathname,ne=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;t||(ue=ue.toLowerCase(),ne=ne?ne.toLowerCase():null,Ee=Ee.toLowerCase()),ne&&J&&(ne=_a(ne,J)||ne);const Se=Ee!=="/"&&Ee.endsWith("/")?Ee.length-1:Ee.length;let ke=ue===Ee||!u&&ue.startsWith(Ee)&&ue.charAt(Se)==="/",Ue=ne!=null&&(ne===Ee||!u&&ne.startsWith(Ee)&&ne.charAt(Ee.length)==="/"),F={isActive:ke,isPending:Ue,isTransitioning:Y},z=ke?e:void 0,B;typeof a=="function"?B=a(F):B=[a,ke?"active":null,Ue?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let ee=typeof d=="function"?d(F):d;return ye.createElement(Bf,{...A,"aria-current":z,className:B,ref:b,style:ee,to:E,viewTransition:C},typeof x=="function"?x(F):x)});p3.displayName="NavLink";var y3=ye.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:u,state:d,method:E=Xh,action:C,onSubmit:x,relative:A,preventScrollReset:b,viewTransition:R,...P},G)=>{let Q=x3(),J=T3(C,{relative:A}),Y=E.toLowerCase()==="get"?"get":"post",Ee=typeof C=="string"&&__.test(C),ue=ne=>{if(x&&x(ne),ne.defaultPrevented)return;ne.preventDefault();let Se=ne.nativeEvent.submitter,ke=Se?.getAttribute("formmethod")||E;Q(Se||ne.currentTarget,{fetcherKey:e,method:ke,navigate:t,replace:u,state:d,relative:A,preventScrollReset:b,viewTransition:R})};return ye.createElement("form",{ref:G,method:Y,action:J,onSubmit:a?x:ue,...P,"data-discover":!Ee&&r==="render"?"true":void 0})});y3.displayName="Form";function E3(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A_(r){let e=ye.useContext(rc);return On(e,E3(r)),e}function _3(r,{target:e,replace:t,state:a,preventScrollReset:u,relative:d,viewTransition:E}={}){let C=NC(),x=nl(),A=vu(r,{relative:d});return ye.useCallback(b=>{if(ZC(b,e)){b.preventDefault();let R=t!==void 0?t:fu(x)===fu(A);C(r,{replace:R,state:a,preventScrollReset:u,relative:d,viewTransition:E})}},[x,C,A,t,a,e,r,u,d,E])}var A3=0,w3=()=>`__${String(++A3)}__`;function x3(){let{router:r}=A_("useSubmit"),{basename:e}=ye.useContext(Us),t=zC();return ye.useCallback(async(a,u={})=>{let{action:d,method:E,encType:C,formData:x,body:A}=e3(a,e);if(u.navigate===!1){let b=u.fetcherKey||w3();await r.fetch(b,t,u.action||d,{preventScrollReset:u.preventScrollReset,formData:x,body:A,formMethod:u.method||E,formEncType:u.encType||C,flushSync:u.flushSync})}else await r.navigate(u.action||d,{preventScrollReset:u.preventScrollReset,formData:x,body:A,formMethod:u.method||E,formEncType:u.encType||C,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,e,t])}function T3(r,{relative:e}={}){let{basename:t}=ye.useContext(Us),a=ye.useContext(Ca);On(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),d={...vu(r||".",{relative:e})},E=nl();if(r==null){d.search=E.search;let C=new URLSearchParams(d.search),x=C.getAll("index");if(x.some(b=>b==="")){C.delete("index"),x.filter(R=>R).forEach(R=>C.append("index",R));let b=C.toString();d.search=b?`?${b}`:""}}return(!r||r===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(d.pathname=d.pathname==="/"?t:Ea([t,d.pathname])),fu(d)}function C3(r,{relative:e}={}){let t=ye.useContext(h_);On(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=A_("useViewTransitionState"),u=vu(r,{relative:e});if(!t.isTransitioning)return!1;let d=_a(t.currentLocation.pathname,a)||t.currentLocation.pathname,E=_a(t.nextLocation.pathname,a)||t.nextLocation.pathname;return af(u.pathname,E)!=null||af(u.pathname,d)!=null}function v3(){const[r,e]=ye.useState(""),[t,a]=ye.useState(""),[u,d]=ye.useState(""),E=async()=>{(await fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:t})})).ok?d("登入成功！"):d("登入失敗！")};return Te.jsxs("div",{className:"page-container",children:[Te.jsx("h2",{children:"信箱 Mailbox"}),Te.jsx("input",{value:r,onChange:C=>e(C.target.value),placeholder:"帳號"}),Te.jsx("input",{value:t,onChange:C=>a(C.target.value),type:"password",placeholder:"密碼"}),Te.jsx("button",{onClick:E,children:"登入"}),Te.jsx("p",{children:u})]})}const b3=[{route:"紅線",start:"火車站",end:"科學園區",time:"06:00 - 22:00",interval:"10 分鐘",description:"途經市中心、科學園區，停靠 10 個站點"},{route:"藍線",start:"東門",end:"光復路",time:"06:30 - 21:30",interval:"15 分鐘",description:"途經東區、光復路，停靠 8 個站點"},{route:"綠線",start:"市政府",end:"高鐵站",time:"07:00 - 20:00",interval:"12 分鐘",description:"連接市政府與高鐵站，途經科學園區"},{route:"黃線",start:"北區",end:"南區",time:"06:15 - 22:15",interval:"20 分鐘",description:"貫穿北區與南區，途經主要商圈"},{route:"橘線",start:"中央公園",end:"東湖",time:"06:45 - 21:45",interval:"15 分鐘",description:"環狀路線，途經學校與住宅區"},{route:"紫線",start:"新竹站",end:"香山",time:"07:00 - 20:30",interval:"30 分鐘",description:"跨區路線，連接新竹市與香山"},{route:"粉紅線",start:"科學園區",end:"新竹市政府",time:"06:30 - 22:00",interval:"10 分鐘",description:"主要接駁園區與政府機關"},{route:"灰線",start:"南門",end:"北門",time:"06:00 - 21:00",interval:"25 分鐘",description:"連接南北區，停靠住宅與商業區"}];function S3(){const[r,e]=ye.useState([]),[t,a]=ye.useState([]);ye.useEffect(()=>{e(b3)},[]);const u=C=>{a(x=>x.includes(C)?x.filter(A=>A!==C):[...x,C])},d=["#65a6e6","#f7b267","#f79d84","#84d9a8","#d6a2e8"],E=C=>{const x=r.findIndex(A=>A.route===C);return d[x%d.length]};return Te.jsxs("div",{className:"page-container",children:[Te.jsx("h1",{className:"info-title",children:"園區公車資訊"}),Te.jsx("div",{className:"route-buttons",children:r.map(C=>Te.jsx("button",{className:`route-btn ${t.includes(C.route)?"active":""}`,onClick:()=>u(C.route),children:C.route},C.route))}),Te.jsx("div",{className:"bus-cards-container",children:t.map(C=>{const x=r.find(A=>A.route===C);return x?Te.jsxs("div",{className:"bus-card",style:{backgroundColor:E(x.route)},children:[Te.jsxs("h2",{children:[x.route,"（",x.start," → ",x.end,"）"]}),Te.jsxs("p",{children:[Te.jsx("strong",{children:"營運時間："}),x.time]}),Te.jsxs("p",{children:[Te.jsx("strong",{children:"發車間隔："}),x.interval]}),Te.jsxs("p",{children:[Te.jsx("strong",{children:"路線描述："}),x.description]})]},x.route):null})})]})}const I3={office:[{title_zh:"辦公室",title_en:"Office Room",desc_zh:"辦公人員使用",desc_en:"For office staff",phone:"1234-5678",time:"9:00-18:00"},{title_zh:"會議室",title_en:"Conference Room",desc_zh:"會議與討論空間",desc_en:"Meeting and discussion space",phone:"2345-6789",time:"9:00-18:00"},{title_zh:"無塵室",title_en:"Clean Room",desc_zh:"特殊環境",desc_en:"Special environment",phone:"3456-7890",time:"9:00-18:00"}],sport:[{title_zh:"健身房",title_en:"Gym",desc_zh:"運動健身",desc_en:"Fitness exercise",phone:"4567-8901",time:"6:00-22:00"},{title_zh:"游泳池",title_en:"Swimming Pool",desc_zh:"游泳休閒",desc_en:"Swimming leisure",phone:"5678-9012",time:"6:00-22:00"},{title_zh:"綜合球場",title_en:"Comprehensive Court",desc_zh:"多功能球場",desc_en:"Multi-purpose court",phone:"6789-0123",time:"6:00-22:00"}],leisure:[{title_zh:"圖書館",title_en:"Library",desc_zh:"閱讀書籍",desc_en:"Read books",phone:"7890-1234",time:"9:00-20:00"},{title_zh:"書店",title_en:"Book Store",desc_zh:"買書看書",desc_en:"Buy and read books",phone:"8901-2345",time:"9:00-20:00"},{title_zh:"展演廳",title_en:"Exhibition Hall",desc_zh:"展演活動",desc_en:"Exhibitions and performances",phone:"9012-3456",time:"9:00-20:00"}],food:[{title_zh:"麵包店",title_en:"Bread Store",desc_zh:"各式麵包",desc_en:"Various breads",phone:"0123-4567",time:"8:00-20:00"},{title_zh:"超商",title_en:"Convenience Store",desc_zh:"便利商店",desc_en:"Convenience store",phone:"1234-5670",time:"0:00-24:00"},{title_zh:"咖啡廳",title_en:"Coffee Shop",desc_zh:"飲品咖啡",desc_en:"Drinks and coffee",phone:"2345-6780",time:"8:00-20:00"}]};function R3({category:r,title:e,desc:t,phone:a,time:u}){return Te.jsxs("div",{className:`card ${r}`,children:[Te.jsx("h3",{children:e}),Te.jsx("p",{children:t}),Te.jsxs("p",{children:["📞 ",a]}),Te.jsxs("p",{children:["🕒 ",u]})]})}function N3({lang:r}){const[e,t]=ye.useState("office"),a=[{key:"office",label_zh:"辦公場所",label_en:"Office"},{key:"sport",label_zh:"運動設施",label_en:"Sports"},{key:"leisure",label_zh:"休閒場所",label_en:"Leisure"},{key:"food",label_zh:"美食街",label_en:"Food Court"}];return Te.jsxs("div",{className:"explore-page",children:[Te.jsx("h1",{children:r==="zh"?"探索環境":"Explore Environment"}),Te.jsx("div",{className:"category-buttons",children:a.map(u=>Te.jsx("button",{className:`category-btn ${e===u.key?"active":""}`,onClick:()=>t(u.key),children:r==="zh"?u.label_zh:u.label_en},u.key))}),Te.jsx("div",{className:"cards-container",children:I3[e].map((u,d)=>Te.jsx(R3,{category:e,title:r==="zh"?u.title_zh:u.title_en,desc:r==="zh"?u.desc_zh:u.desc_en,phone:u.phone,time:u.time},d))})]})}function ly({tasks:r=[],completedIds:e=[],onComplete:t,lang:a="zh"}){const u={zh:{point:"分",complete:"完成",done:"已完成"},en:{point:"pt",complete:"Complete",done:"Done"}};return Te.jsx("ul",{style:{listStyle:"none",padding:0,width:"100%"},children:r.map(d=>{const E=e.includes(d.id);return Te.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",border:"1px solid #eee",borderRadius:8,marginBottom:8,background:E?"#f6fff6":"#fff"},children:[Te.jsxs("div",{style:{textAlign:"left"},children:[Te.jsx("div",{style:{fontWeight:600},children:d.text}),Te.jsxs("div",{style:{fontSize:12,color:"#666"},children:[d.point," ",u[a].point]})]}),Te.jsx("button",{onClick:()=>t&&t(d),disabled:E,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:E?"#9e9e9e":"#4caf50",color:"#fff",cursor:E?"not-allowed":"pointer"},children:E?d.doneLabel||u[a].done:d.completeLabel||u[a].complete})]},d.id)})})}const O3=()=>{};var cy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=function(r){const e=[];let t=0;for(let a=0;a<r.length;a++){let u=r.charCodeAt(a);u<128?e[t++]=u:u<2048?(e[t++]=u>>6|192,e[t++]=u&63|128):(u&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(u=65536+((u&1023)<<10)+(r.charCodeAt(++a)&1023),e[t++]=u>>18|240,e[t++]=u>>12&63|128,e[t++]=u>>6&63|128,e[t++]=u&63|128):(e[t++]=u>>12|224,e[t++]=u>>6&63|128,e[t++]=u&63|128)}return e},D3=function(r){const e=[];let t=0,a=0;for(;t<r.length;){const u=r[t++];if(u<128)e[a++]=String.fromCharCode(u);else if(u>191&&u<224){const d=r[t++];e[a++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=r[t++],E=r[t++],C=r[t++],x=((u&7)<<18|(d&63)<<12|(E&63)<<6|C&63)-65536;e[a++]=String.fromCharCode(55296+(x>>10)),e[a++]=String.fromCharCode(56320+(x&1023))}else{const d=r[t++],E=r[t++];e[a++]=String.fromCharCode((u&15)<<12|(d&63)<<6|E&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let u=0;u<r.length;u+=3){const d=r[u],E=u+1<r.length,C=E?r[u+1]:0,x=u+2<r.length,A=x?r[u+2]:0,b=d>>2,R=(d&3)<<4|C>>4;let P=(C&15)<<2|A>>6,G=A&63;x||(G=64,E||(P=64)),a.push(t[b],t[R],t[P],t[G])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(w_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):D3(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let u=0;u<r.length;){const d=t[r.charAt(u++)],C=u<r.length?t[r.charAt(u)]:0;++u;const A=u<r.length?t[r.charAt(u)]:64;++u;const R=u<r.length?t[r.charAt(u)]:64;if(++u,d==null||C==null||A==null||R==null)throw new M3;const P=d<<2|C>>4;if(a.push(P),A!==64){const G=C<<4&240|A>>2;if(a.push(G),R!==64){const Q=A<<6&192|R;a.push(Q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class M3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P3=function(r){const e=w_(r);return x_.encodeByteArray(e,!0)},of=function(r){return P3(r).replace(/\./g,"")},T_=function(r){try{return x_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=()=>L3().__FIREBASE_DEFAULTS__,B3=()=>{if(typeof process>"u"||typeof cy>"u")return;const r=cy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},V3=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&T_(r[1]);return e&&JSON.parse(e)},Vf=()=>{try{return O3()||k3()||B3()||V3()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},C_=r=>Vf()?.emulatorHosts?.[r],v_=r=>{const e=C_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},b_=()=>Vf()?.config,S_=r=>Vf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ng(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",u=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const E={iss:`https://securetoken.google.com/${a}`,aud:a,iat:u,exp:u+3600,auth_time:u,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[of(JSON.stringify(t)),of(JSON.stringify(E)),""].join(".")}const ru={};function F3(){const r={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?r.emulator.push(e):r.prod.push(e);return r}function z3(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let uy=!1;function ig(r,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||ru[r]===e||ru[r]||uy)return;ru[r]=e;function t(P){return`__firebase__banner__${P}`}const a="__firebase__banner",d=F3().prod.length>0;function E(){const P=document.getElementById(a);P&&P.remove()}function C(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function x(P,G){P.setAttribute("width","24"),P.setAttribute("id",G),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function A(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{uy=!0,E()},P}function b(P,G){P.setAttribute("id",G),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function R(){const P=z3(a),G=t("text"),Q=document.getElementById(G)||document.createElement("span"),J=t("learnmore"),Y=document.getElementById(J)||document.createElement("a"),Ee=t("preprendIcon"),ue=document.getElementById(Ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const ne=P.element;C(ne),b(Y,J);const Se=A();x(ue,Ee),ne.append(ue,Q,Y,Se),document.body.appendChild(ne)}d?(Q.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hi())}function G3(){const r=Vf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R_(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function q3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X3(){const r=Hi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Y3(){return!G3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N_(){try{return typeof indexedDB=="object"}catch{return!1}}function O_(){return new Promise((r,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(a);u.onsuccess=()=>{u.result.close(),t||self.indexedDB.deleteDatabase(a),r(!0)},u.onupgradeneeded=()=>{t=!1},u.onerror=()=>{e(u.error?.message||"")}}catch(t){e(t)}})}function K3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="FirebaseError";class Yr extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=W3,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}}class rl{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},u=`${this.service}/${e}`,d=this.errors[e],E=d?Q3(d,a):"Error",C=`${this.serviceName}: ${E} (${u}).`;return new Yr(u,C,a)}}function Q3(r,e){return r.replace(Z3,(t,a)=>{const u=e[a];return u!=null?String(u):`<${a}?>`})}const Z3=/\{\$([^}]+)}/g;function J3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function co(r,e){if(r===e)return!0;const t=Object.keys(r),a=Object.keys(e);for(const u of t){if(!a.includes(u))return!1;const d=r[u],E=e[u];if(hy(d)&&hy(E)){if(!co(d,E))return!1}else if(d!==E)return!1}for(const u of a)if(!t.includes(u))return!1;return!0}function hy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r){const e=[];for(const[t,a]of Object.entries(r))Array.isArray(a)?a.forEach(u=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function $3(r,e){const t=new ev(r,e);return t.subscribe.bind(t)}class ev{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let u;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");tv(e,["next","error","complete"])?u=e:u={next:e,error:t,complete:a},u.next===void 0&&(u.next=i0),u.error===void 0&&(u.error=i0),u.complete===void 0&&(u.complete=i0);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tv(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function i0(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=1e3,iv=2,rv=14400*1e3,sv=.5;function fy(r,e=nv,t=iv){const a=e*Math.pow(t,r),u=Math.round(sv*a*(Math.random()-.5)*2);return Math.min(rv,a+u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(r){return r&&r._delegate?r._delegate:r}class Xr{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new U3;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:t});u&&a.resolve(u)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lv(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(t);try{const d=this.getOrInitializeService({instanceIdentifier:u});a.resolve(d)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[d,E]of this.instancesDeferred.entries()){const C=this.normalizeInstanceIdentifier(d);a===C&&E.resolve(u)}return u}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),u=this.onInitCallbacks.get(a)??new Set;u.add(e),this.onInitCallbacks.set(a,u);const d=this.instances.get(a);return d&&e(d,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const u of a)try{u(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:ov(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ov(r){return r===Fo?void 0:r}function lv(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new av(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const uv={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},hv=Ot.INFO,fv={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},dv=(r,e,...t)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),u=fv[e];if(u)console[u](`[${a}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uf{constructor(e){this.name=e,this._logLevel=hv,this._logHandler=dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...e),this._logHandler(this,Ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...e),this._logHandler(this,Ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...e),this._logHandler(this,Ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...e),this._logHandler(this,Ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...e),this._logHandler(this,Ot.ERROR,...e)}}const gv=(r,e)=>e.some(t=>r instanceof t);let dy,gy;function mv(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pv(){return gy||(gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D_=new WeakMap,w0=new WeakMap,M_=new WeakMap,r0=new WeakMap,rg=new WeakMap;function yv(r){const e=new Promise((t,a)=>{const u=()=>{r.removeEventListener("success",d),r.removeEventListener("error",E)},d=()=>{t(so(r.result)),u()},E=()=>{a(r.error),u()};r.addEventListener("success",d),r.addEventListener("error",E)});return e.then(t=>{t instanceof IDBCursor&&D_.set(t,r)}).catch(()=>{}),rg.set(e,r),e}function Ev(r){if(w0.has(r))return;const e=new Promise((t,a)=>{const u=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",E),r.removeEventListener("abort",E)},d=()=>{t(),u()},E=()=>{a(r.error||new DOMException("AbortError","AbortError")),u()};r.addEventListener("complete",d),r.addEventListener("error",E),r.addEventListener("abort",E)});w0.set(r,e)}let x0={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return w0.get(r);if(e==="objectStoreNames")return r.objectStoreNames||M_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return so(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function _v(r){x0=r(x0)}function Av(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=r.call(s0(this),e,...t);return M_.set(a,e.sort?e.sort():[e]),so(a)}:pv().includes(r)?function(...e){return r.apply(s0(this),e),so(D_.get(this))}:function(...e){return so(r.apply(s0(this),e))}}function wv(r){return typeof r=="function"?Av(r):(r instanceof IDBTransaction&&Ev(r),gv(r,mv())?new Proxy(r,x0):r)}function so(r){if(r instanceof IDBRequest)return yv(r);if(r0.has(r))return r0.get(r);const e=wv(r);return e!==r&&(r0.set(r,e),rg.set(e,r)),e}const s0=r=>rg.get(r);function P_(r,e,{blocked:t,upgrade:a,blocking:u,terminated:d}={}){const E=indexedDB.open(r,e),C=so(E);return a&&E.addEventListener("upgradeneeded",x=>{a(so(E.result),x.oldVersion,x.newVersion,so(E.transaction),x)}),t&&E.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),C.then(x=>{d&&x.addEventListener("close",()=>d()),u&&x.addEventListener("versionchange",A=>u(A.oldVersion,A.newVersion,A))}).catch(()=>{}),C}const xv=["get","getKey","getAll","getAllKeys","count"],Tv=["put","add","delete","clear"],a0=new Map;function my(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(a0.get(e))return a0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,u=Tv.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(u||xv.includes(t)))return;const d=async function(E,...C){const x=this.transaction(E,u?"readwrite":"readonly");let A=x.store;return a&&(A=A.index(C.shift())),(await Promise.all([A[t](...C),u&&x.done]))[0]};return a0.set(e,d),d}_v(r=>({...r,get:(e,t,a)=>my(e,t)||r.get(e,t,a),has:(e,t)=>!!my(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vv(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function vv(r){return r.getComponent()?.type==="VERSION"}const T0="@firebase/app",py="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Uf("@firebase/app"),bv="@firebase/app-compat",Sv="@firebase/analytics-compat",Iv="@firebase/analytics",Rv="@firebase/app-check-compat",Nv="@firebase/app-check",Ov="@firebase/auth",Dv="@firebase/auth-compat",Mv="@firebase/database",Pv="@firebase/data-connect",Lv="@firebase/database-compat",kv="@firebase/functions",Bv="@firebase/functions-compat",Vv="@firebase/installations",Uv="@firebase/installations-compat",Fv="@firebase/messaging",zv="@firebase/messaging-compat",Hv="@firebase/performance",Gv="@firebase/performance-compat",jv="@firebase/remote-config",qv="@firebase/remote-config-compat",Xv="@firebase/storage",Yv="@firebase/storage-compat",Kv="@firebase/firestore",Wv="@firebase/ai",Qv="@firebase/firestore-compat",Zv="firebase",Jv="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="[DEFAULT]",$v={[T0]:"fire-core",[bv]:"fire-core-compat",[Iv]:"fire-analytics",[Sv]:"fire-analytics-compat",[Nv]:"fire-app-check",[Rv]:"fire-app-check-compat",[Ov]:"fire-auth",[Dv]:"fire-auth-compat",[Mv]:"fire-rtdb",[Pv]:"fire-data-connect",[Lv]:"fire-rtdb-compat",[kv]:"fire-fn",[Bv]:"fire-fn-compat",[Vv]:"fire-iid",[Uv]:"fire-iid-compat",[Fv]:"fire-fcm",[zv]:"fire-fcm-compat",[Hv]:"fire-perf",[Gv]:"fire-perf-compat",[jv]:"fire-rc",[qv]:"fire-rc-compat",[Xv]:"fire-gcs",[Yv]:"fire-gcs-compat",[Kv]:"fire-fst",[Qv]:"fire-fst-compat",[Wv]:"fire-vertex","fire-js":"fire-js",[Zv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Map,eb=new Map,v0=new Map;function yy(r,e){try{r.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function hs(r){const e=r.name;if(v0.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;v0.set(e,r);for(const t of lf.values())yy(t,r);for(const t of eb.values())yy(t,r);return!0}function yo(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function jr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new rl("app","Firebase",tb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=Jv;function L_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const a={name:C0,automaticDataCollectionEnabled:!0,...e},u=a.name;if(typeof u!="string"||!u)throw ao.create("bad-app-name",{appName:String(u)});if(t||(t=b_()),!t)throw ao.create("no-options");const d=lf.get(u);if(d){if(co(t,d.options)&&co(a,d.config))return d;throw ao.create("duplicate-app",{appName:u})}const E=new cv(u);for(const x of v0.values())E.addComponent(x);const C=new nb(t,a,E);return lf.set(u,C),C}function Ff(r=C0){const e=lf.get(r);if(!e&&r===C0&&b_())return L_();if(!e)throw ao.create("no-app",{appName:r});return e}function ar(r,e,t){let a=$v[r]??r;t&&(a+=`-${t}`);const u=a.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const E=[`Unable to register library "${a}" with version "${e}":`];u&&E.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&d&&E.push("and"),d&&E.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(E.join(" "));return}hs(new Xr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="firebase-heartbeat-database",rb=1,du="firebase-heartbeat-store";let o0=null;function k_(){return o0||(o0=P_(ib,rb,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(du)}catch(t){console.warn(t)}}}}).catch(r=>{throw ao.create("idb-open",{originalErrorMessage:r.message})})),o0}async function sb(r){try{const t=(await k_()).transaction(du),a=await t.objectStore(du).get(B_(r));return await t.done,a}catch(e){if(e instanceof Yr)Aa.warn(e.message);else{const t=ao.create("idb-get",{originalErrorMessage:e?.message});Aa.warn(t.message)}}}async function Ey(r,e){try{const a=(await k_()).transaction(du,"readwrite");await a.objectStore(du).put(e,B_(r)),await a.done}catch(t){if(t instanceof Yr)Aa.warn(t.message);else{const a=ao.create("idb-set",{originalErrorMessage:t?.message});Aa.warn(a.message)}}}function B_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=1024,ob=30;class lb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ub(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_y();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>ob){const u=hb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_y(),{heartbeatsToSend:t,unsentEntries:a}=cb(this._heartbeatsCache.heartbeats),u=of(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return Aa.warn(e),""}}}function _y(){return new Date().toISOString().substring(0,10)}function cb(r,e=ab){const t=[];let a=r.slice();for(const u of r){const d=t.find(E=>E.agent===u.agent);if(d){if(d.dates.push(u.date),Ay(t)>e){d.dates.pop();break}}else if(t.push({agent:u.agent,dates:[u.date]}),Ay(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class ub{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N_()?O_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ey(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ey(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Ay(r){return of(JSON.stringify({version:2,heartbeats:r})).length}function hb(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let a=1;a<r.length;a++)r[a].date<t&&(t=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r){hs(new Xr("platform-logger",e=>new Cv(e),"PRIVATE")),hs(new Xr("heartbeat",e=>new lb(e),"PRIVATE")),ar(T0,py,r),ar(T0,py,"esm2020"),ar("fire-js","")}fb("");var db="firebase",gb="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(db,gb,"app");const V_="@firebase/installations",sg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=1e4,F_=`w:${sg}`,z_="FIS_v2",mb="https://firebaseinstallations.googleapis.com/v1",pb=3600*1e3,yb="installations",Eb="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ko=new rl(yb,Eb,_b);function H_(r){return r instanceof Yr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_({projectId:r}){return`${mb}/projects/${r}/installations`}function j_(r){return{token:r.token,requestStatus:2,expiresIn:wb(r.expiresIn),creationTime:Date.now()}}async function q_(r,e){const a=(await e.json()).error;return Ko.create("request-failed",{requestName:r,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function X_({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function Ab(r,{refreshToken:e}){const t=X_(r);return t.append("Authorization",xb(e)),t}async function Y_(r){const e=await r();return e.status>=500&&e.status<600?r():e}function wb(r){return Number(r.replace("s","000"))}function xb(r){return`${z_} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const a=G_(r),u=X_(r),d=e.getImmediate({optional:!0});if(d){const A=await d.getHeartbeatsHeader();A&&u.append("x-firebase-client",A)}const E={fid:t,authVersion:z_,appId:r.appId,sdkVersion:F_},C={method:"POST",headers:u,body:JSON.stringify(E)},x=await Y_(()=>fetch(a,C));if(x.ok){const A=await x.json();return{fid:A.fid||t,registrationStatus:2,refreshToken:A.refreshToken,authToken:j_(A.authToken)}}else throw await q_("Create Installation",x)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=/^[cdef][\w-]{21}$/,b0="";function bb(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=Sb(r);return vb.test(t)?t:b0}catch{return b0}}function Sb(r){return Cb(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function Q_(r,e){const t=zf(r);Z_(t,e),Ib(t,e)}function Z_(r,e){const t=W_.get(r);if(t)for(const a of t)a(e)}function Ib(r,e){const t=Rb();t&&t.postMessage({key:r,fid:e}),Nb()}let zo=null;function Rb(){return!zo&&"BroadcastChannel"in self&&(zo=new BroadcastChannel("[Firebase] FID Change"),zo.onmessage=r=>{Z_(r.data.key,r.data.fid)}),zo}function Nb(){W_.size===0&&zo&&(zo.close(),zo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebase-installations-database",Db=1,Wo="firebase-installations-store";let l0=null;function ag(){return l0||(l0=P_(Ob,Db,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Wo)}}})),l0}async function cf(r,e){const t=zf(r),u=(await ag()).transaction(Wo,"readwrite"),d=u.objectStore(Wo),E=await d.get(t);return await d.put(e,t),await u.done,(!E||E.fid!==e.fid)&&Q_(r,e.fid),e}async function J_(r){const e=zf(r),a=(await ag()).transaction(Wo,"readwrite");await a.objectStore(Wo).delete(e),await a.done}async function Hf(r,e){const t=zf(r),u=(await ag()).transaction(Wo,"readwrite"),d=u.objectStore(Wo),E=await d.get(t),C=e(E);return C===void 0?await d.delete(t):await d.put(C,t),await u.done,C&&(!E||E.fid!==C.fid)&&Q_(r,C.fid),C}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(r){let e;const t=await Hf(r.appConfig,a=>{const u=Mb(a),d=Pb(r,u);return e=d.registrationPromise,d.installationEntry});return t.fid===b0?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Mb(r){const e=r||{fid:bb(),registrationStatus:0};return $_(e)}function Pb(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const u=Promise.reject(Ko.create("app-offline"));return{installationEntry:e,registrationPromise:u}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},a=Lb(r,t);return{installationEntry:t,registrationPromise:a}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kb(r)}:{installationEntry:e}}async function Lb(r,e){try{const t=await Tb(r,e);return cf(r.appConfig,t)}catch(t){throw H_(t)&&t.customData.serverCode===409?await J_(r.appConfig):await cf(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function kb(r){let e=await wy(r.appConfig);for(;e.registrationStatus===1;)await K_(100),e=await wy(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:a}=await og(r);return a||t}return e}function wy(r){return Hf(r,e=>{if(!e)throw Ko.create("installation-not-found");return $_(e)})}function $_(r){return Bb(r)?{fid:r.fid,registrationStatus:0}:r}function Bb(r){return r.registrationStatus===1&&r.registrationTime+U_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb({appConfig:r,heartbeatServiceProvider:e},t){const a=Ub(r,t),u=Ab(r,t),d=e.getImmediate({optional:!0});if(d){const A=await d.getHeartbeatsHeader();A&&u.append("x-firebase-client",A)}const E={installation:{sdkVersion:F_,appId:r.appId}},C={method:"POST",headers:u,body:JSON.stringify(E)},x=await Y_(()=>fetch(a,C));if(x.ok){const A=await x.json();return j_(A)}else throw await q_("Generate Auth Token",x)}function Ub(r,{fid:e}){return`${G_(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lg(r,e=!1){let t;const a=await Hf(r.appConfig,d=>{if(!eA(d))throw Ko.create("not-registered");const E=d.authToken;if(!e&&Hb(E))return d;if(E.requestStatus===1)return t=Fb(r,e),d;{if(!navigator.onLine)throw Ko.create("app-offline");const C=jb(d);return t=zb(r,C),C}});return t?await t:a.authToken}async function Fb(r,e){let t=await xy(r.appConfig);for(;t.authToken.requestStatus===1;)await K_(100),t=await xy(r.appConfig);const a=t.authToken;return a.requestStatus===0?lg(r,e):a}function xy(r){return Hf(r,e=>{if(!eA(e))throw Ko.create("not-registered");const t=e.authToken;return qb(t)?{...e,authToken:{requestStatus:0}}:e})}async function zb(r,e){try{const t=await Vb(r,e),a={...e,authToken:t};return await cf(r.appConfig,a),t}catch(t){if(H_(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await J_(r.appConfig);else{const a={...e,authToken:{requestStatus:0}};await cf(r.appConfig,a)}throw t}}function eA(r){return r!==void 0&&r.registrationStatus===2}function Hb(r){return r.requestStatus===2&&!Gb(r)}function Gb(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+pb}function jb(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function qb(r){return r.requestStatus===1&&r.requestTime+U_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(r){const e=r,{installationEntry:t,registrationPromise:a}=await og(e);return a?a.catch(console.error):lg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(r,e=!1){const t=r;return await Kb(t),(await lg(t,e)).token}async function Kb(r){const{registrationPromise:e}=await og(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r){if(!r||!r.options)throw c0("App Configuration");if(!r.name)throw c0("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw c0(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function c0(r){return Ko.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="installations",Qb="installations-internal",Zb=r=>{const e=r.getProvider("app").getImmediate(),t=Wb(e),a=yo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},Jb=r=>{const e=r.getProvider("app").getImmediate(),t=yo(e,tA).getImmediate();return{getId:()=>Xb(t),getToken:u=>Yb(t,u)}};function $b(){hs(new Xr(tA,Zb,"PUBLIC")),hs(new Xr(Qb,Jb,"PRIVATE"))}$b();ar(V_,sg);ar(V_,sg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="analytics",eS="firebase_id",tS="origin",nS=60*1e3,iS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Uf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Or=new rl("analytics","Analytics",rS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r){if(!r.startsWith(cg)){const e=Or.create("invalid-gtag-resource",{gtagURL:r});return or.warn(e.message),""}return r}function nA(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function aS(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function oS(r,e){const t=aS("firebase-js-sdk-policy",{createScriptURL:sS}),a=document.createElement("script"),u=`${cg}?l=${r}&id=${e}`;a.src=t?t?.createScriptURL(u):u,a.async=!0,document.head.appendChild(a)}function lS(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function cS(r,e,t,a,u,d){const E=a[u];try{if(E)await e[E];else{const x=(await nA(t)).find(A=>A.measurementId===u);x&&await e[x.appId]}}catch(C){or.error(C)}r("config",u,d)}async function uS(r,e,t,a,u){try{let d=[];if(u&&u.send_to){let E=u.send_to;Array.isArray(E)||(E=[E]);const C=await nA(t);for(const x of E){const A=C.find(R=>R.measurementId===x),b=A&&e[A.appId];if(b)d.push(b);else{d=[];break}}}d.length===0&&(d=Object.values(e)),await Promise.all(d),r("event",a,u||{})}catch(d){or.error(d)}}function hS(r,e,t,a){async function u(d,...E){try{if(d==="event"){const[C,x]=E;await uS(r,e,t,C,x)}else if(d==="config"){const[C,x]=E;await cS(r,e,t,a,C,x)}else if(d==="consent"){const[C,x]=E;r("consent",C,x)}else if(d==="get"){const[C,x,A]=E;r("get",C,x,A)}else if(d==="set"){const[C]=E;r("set",C)}else r(d,...E)}catch(C){or.error(C)}}return u}function fS(r,e,t,a,u){let d=function(...E){window[a].push(arguments)};return window[u]&&typeof window[u]=="function"&&(d=window[u]),window[u]=hS(d,r,e,t),{gtagCore:d,wrappedGtag:window[u]}}function dS(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(cg)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=30,mS=1e3;class pS{constructor(e={},t=mS){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const iA=new pS;function yS(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function ES(r){const{appId:e,apiKey:t}=r,a={method:"GET",headers:yS(t)},u=iS.replace("{app-id}",e),d=await fetch(u,a);if(d.status!==200&&d.status!==304){let E="";try{const C=await d.json();C.error?.message&&(E=C.error.message)}catch{}throw Or.create("config-fetch-failed",{httpStatus:d.status,responseMessage:E})}return d.json()}async function _S(r,e=iA,t){const{appId:a,apiKey:u,measurementId:d}=r.options;if(!a)throw Or.create("no-app-id");if(!u){if(d)return{measurementId:d,appId:a};throw Or.create("no-api-key")}const E=e.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},C=new xS;return setTimeout(async()=>{C.abort()},nS),rA({appId:a,apiKey:u,measurementId:d},E,C,e)}async function rA(r,{throttleEndTimeMillis:e,backoffCount:t},a,u=iA){const{appId:d,measurementId:E}=r;try{await AS(a,e)}catch(C){if(E)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${E} provided in the "measurementId" field in the local Firebase config. [${C?.message}]`),{appId:d,measurementId:E};throw C}try{const C=await ES(r);return u.deleteThrottleMetadata(d),C}catch(C){const x=C;if(!wS(x)){if(u.deleteThrottleMetadata(d),E)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${E} provided in the "measurementId" field in the local Firebase config. [${x?.message}]`),{appId:d,measurementId:E};throw C}const A=Number(x?.customData?.httpStatus)===503?fy(t,u.intervalMillis,gS):fy(t,u.intervalMillis),b={throttleEndTimeMillis:Date.now()+A,backoffCount:t+1};return u.setThrottleMetadata(d,b),or.debug(`Calling attemptFetch again in ${A} millis`),rA(r,b,a,u)}}function AS(r,e){return new Promise((t,a)=>{const u=Math.max(e-Date.now(),0),d=setTimeout(t,u);r.addEventListener(()=>{clearTimeout(d),a(Or.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wS(r){if(!(r instanceof Yr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class xS{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function TS(r,e,t,a,u){if(u&&u.global){r("event",t,a);return}else{const d=await e,E={...a,send_to:d};r("event",t,E)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(){if(N_())try{await O_()}catch(r){return or.warn(Or.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return or.warn(Or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function vS(r,e,t,a,u,d,E){const C=_S(r);C.then(P=>{t[P.measurementId]=P.appId,r.options.measurementId&&P.measurementId!==r.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${P.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(P=>or.error(P)),e.push(C);const x=CS().then(P=>{if(P)return a.getId()}),[A,b]=await Promise.all([C,x]);dS(d)||oS(d,A.measurementId),u("js",new Date);const R=E?.config??{};return R[tS]="firebase",R.update=!0,b!=null&&(R[eS]=b),u("config",A.measurementId,R),A.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.app=e}_delete(){return delete su[this.app.options.appId],Promise.resolve()}}let su={},Ty=[];const Cy={};let u0="dataLayer",SS="gtag",vy,sA,by=!1;function IS(){const r=[];if(R_()&&r.push("This is a browser extension environment."),K3()||r.push("Cookies are not available."),r.length>0){const e=r.map((a,u)=>`(${u+1}) ${a}`).join(" "),t=Or.create("invalid-analytics-context",{errorInfo:e});or.warn(t.message)}}function RS(r,e,t){IS();const a=r.options.appId;if(!a)throw Or.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Or.create("no-api-key");if(su[a]!=null)throw Or.create("already-exists",{id:a});if(!by){lS(u0);const{wrappedGtag:d,gtagCore:E}=fS(su,Ty,Cy,u0,SS);sA=d,vy=E,by=!0}return su[a]=vS(r,Ty,Cy,e,vy,u0,t),new bS(r)}function NS(r=Ff()){r=yi(r);const e=yo(r,uf);return e.isInitialized()?e.getImmediate():OS(r)}function OS(r,e={}){const t=yo(r,uf);if(t.isInitialized()){const u=t.getImmediate();if(co(e,t.getOptions()))return u;throw Or.create("already-initialized")}return t.initialize({options:e})}function DS(r,e,t,a){r=yi(r),TS(sA,su[r.app.options.appId],e,t,a).catch(u=>or.error(u))}const Sy="@firebase/analytics",Iy="0.10.18";function MS(){hs(new Xr(uf,(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),u=e.getProvider("installations-internal").getImmediate();return RS(a,u,t)},"PUBLIC")),hs(new Xr("analytics-internal",r,"PRIVATE")),ar(Sy,Iy),ar(Sy,Iy,"esm2020");function r(e){try{const t=e.getProvider(uf).getImmediate();return{logEvent:(a,u,d)=>DS(t,a,u,d)}}catch(t){throw Or.create("interop-component-reg-failed",{reason:t})}}}MS();function aA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PS=aA,oA=new rl("auth","Firebase",aA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Uf("@firebase/auth");function LS(r,...e){hf.logLevel<=Ot.WARN&&hf.warn(`Auth (${sl}): ${r}`,...e)}function Kh(r,...e){hf.logLevel<=Ot.ERROR&&hf.error(`Auth (${sl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(r,...e){throw hg(r,...e)}function cs(r,...e){return hg(r,...e)}function ug(r,e,t){const a={...PS(),[e]:t};return new rl("auth","Firebase",a).create(e,{appName:r.name})}function jo(r){return ug(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kS(r,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ls(r,"argument-error"),ug(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hg(r,...e){if(typeof r!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(t,...a)}return oA.create(r,...e)}function lt(r,e,...t){if(!r)throw hg(e,...t)}function pa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Kh(e),new Error(e)}function wa(r,e){r||pa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return typeof self<"u"&&self.location?.href||""}function BS(){return Ry()==="http:"||Ry()==="https:"}function Ry(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BS()||R_()||"connection"in navigator)?navigator.onLine:!0}function US(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this.shortDelay=e,this.longDelay=t,wa(t>e,"Short delay should be less than long delay!"),this.isMobile=H3()||q3()}get(){return VS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(r,e){wa(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HS=new Su(3e4,6e4);function dg(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function sc(r,e,t,a,u={}){return cA(r,u,async()=>{let d={},E={};a&&(e==="GET"?E=a:d={body:JSON.stringify(a)});const C=bu({key:r.config.apiKey,...E}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const A={method:e,headers:x,...d};return j3()||(A.referrerPolicy="no-referrer"),r.emulatorConfig&&il(r.emulatorConfig.host)&&(A.credentials="include"),lA.fetch()(await uA(r,r.config.apiHost,t,C),A)})}async function cA(r,e,t){r._canInitEmulator=!1;const a={...FS,...e};try{const u=new jS(r),d=await Promise.race([t(),u.promise]);u.clearNetworkTimeout();const E=await d.json();if("needConfirmation"in E)throw Vh(r,"account-exists-with-different-credential",E);if(d.ok&&!("errorMessage"in E))return E;{const C=d.ok?E.errorMessage:E.error.message,[x,A]=C.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(r,"credential-already-in-use",E);if(x==="EMAIL_EXISTS")throw Vh(r,"email-already-in-use",E);if(x==="USER_DISABLED")throw Vh(r,"user-disabled",E);const b=a[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw ug(r,b,A);Ls(r,b)}}catch(u){if(u instanceof Yr)throw u;Ls(r,"network-request-failed",{message:String(u)})}}async function GS(r,e,t,a,u={}){const d=await sc(r,e,t,a,u);return"mfaPendingCredential"in d&&Ls(r,"multi-factor-auth-required",{_serverResponse:d}),d}async function uA(r,e,t,a){const u=`${e}${t}?${a}`,d=r,E=d.config.emulator?fg(r.config,u):`${r.config.apiScheme}://${u}`;return zS.includes(t)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(E).toString():E}class jS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(cs(this.auth,"network-request-failed")),HS.get())})}}function Vh(r,e,t){const a={appName:r.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const u=cs(r,e,a);return u.customData._tokenResponse=t,u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(r,e){return sc(r,"POST","/v1/accounts:delete",e)}async function ff(r,e){return sc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XS(r,e=!1){const t=yi(r),a=await t.getIdToken(e),u=gg(a);lt(u&&u.exp&&u.auth_time&&u.iat,t.auth,"internal-error");const d=typeof u.firebase=="object"?u.firebase:void 0,E=d?.sign_in_provider;return{claims:u,token:a,authTime:au(h0(u.auth_time)),issuedAtTime:au(h0(u.iat)),expirationTime:au(h0(u.exp)),signInProvider:E||null,signInSecondFactor:d?.sign_in_second_factor||null}}function h0(r){return Number(r)*1e3}function gg(r){const[e,t,a]=r.split(".");if(e===void 0||t===void 0||a===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const u=T_(t);return u?JSON.parse(u):(Kh("Failed to decode base64 JWT payload"),null)}catch(u){return Kh("Caught error parsing JWT payload as JSON",u?.toString()),null}}function Ny(r){const e=gg(r);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(r,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Yr&&YS(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function YS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(r){const e=r.auth,t=await r.getIdToken(),a=await gu(r,ff(e,{idToken:t}));lt(a?.users.length,e,"internal-error");const u=a.users[0];r._notifyReloadListener(u);const d=u.providerUserInfo?.length?hA(u.providerUserInfo):[],E=QS(r.providerData,d),C=r.isAnonymous,x=!(r.email&&u.passwordHash)&&!E?.length,A=C?x:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:E,metadata:new I0(u.createdAt,u.lastLoginAt),isAnonymous:A};Object.assign(r,b)}async function WS(r){const e=yi(r);await df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QS(r,e){return[...r.filter(a=>!e.some(u=>u.providerId===a.providerId)),...e]}function hA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(r,e){const t=await cA(r,{},async()=>{const a=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:u,apiKey:d}=r.config,E=await uA(r,u,"/v1/token",`key=${d}`),C=await r._getAdditionalHeaders();C["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:C,body:a};return r.emulatorConfig&&il(r.emulatorConfig.host)&&(x.credentials="include"),lA.fetch()(E,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JS(r,e){return sc(r,"POST","/v2/accounts:revokeToken",dg(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const t=Ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:u,expiresIn:d}=await ZS(e,t);this.updateTokensAndExpiration(a,u,Number(d))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:u,expirationTime:d}=t,E=new Yl;return a&&(lt(typeof a=="string","internal-error",{appName:e}),E.refreshToken=a),u&&(lt(typeof u=="string","internal-error",{appName:e}),E.accessToken=u),d&&(lt(typeof d=="number","internal-error",{appName:e}),E.expirationTime=d),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return pa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(r,e){lt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class os{constructor({uid:e,auth:t,stsTokenManager:a,...u}){this.providerId="firebase",this.proactiveRefresh=new KS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new I0(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await gu(this,this.stsTokenManager.getToken(this.auth,e));return lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XS(this,e)}reload(){return WS(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await df(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(jo(this.auth));const e=await this.getIdToken();return await gu(this,qS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,u=t.email??void 0,d=t.phoneNumber??void 0,E=t.photoURL??void 0,C=t.tenantId??void 0,x=t._redirectEventId??void 0,A=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:R,emailVerified:P,isAnonymous:G,providerData:Q,stsTokenManager:J}=t;lt(R&&J,e,"internal-error");const Y=Yl.fromJSON(this.name,J);lt(typeof R=="string",e,"internal-error"),$a(a,e.name),$a(u,e.name),lt(typeof P=="boolean",e,"internal-error"),lt(typeof G=="boolean",e,"internal-error"),$a(d,e.name),$a(E,e.name),$a(C,e.name),$a(x,e.name),$a(A,e.name),$a(b,e.name);const Ee=new os({uid:R,auth:e,email:u,emailVerified:P,displayName:a,isAnonymous:G,photoURL:E,phoneNumber:d,tenantId:C,stsTokenManager:Y,createdAt:A,lastLoginAt:b});return Q&&Array.isArray(Q)&&(Ee.providerData=Q.map(ue=>({...ue}))),x&&(Ee._redirectEventId=x),Ee}static async _fromIdTokenResponse(e,t,a=!1){const u=new Yl;u.updateFromServerResponse(t);const d=new os({uid:t.localId,auth:e,stsTokenManager:u,isAnonymous:a});return await df(d),d}static async _fromGetAccountInfoResponse(e,t,a){const u=t.users[0];lt(u.localId!==void 0,"internal-error");const d=u.providerUserInfo!==void 0?hA(u.providerUserInfo):[],E=!(u.email&&u.passwordHash)&&!d?.length,C=new Yl;C.updateFromIdToken(a);const x=new os({uid:u.localId,auth:e,stsTokenManager:C,isAnonymous:E}),A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new I0(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!d?.length};return Object.assign(x,A),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;function ya(r){wa(r instanceof Function,"Expected a class definition");let e=Oy.get(r);return e?(wa(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Oy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fA.type="NONE";const Dy=fA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(r,e,t){return`firebase:${r}:${e}:${t}`}class Kl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:u,name:d}=this.auth;this.fullUserKey=Wh(this.userKey,u.apiKey,d),this.fullPersistenceKey=Wh("persistence",u.apiKey,d),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ff(this.auth,{idToken:e}).catch(()=>{});return t?os._fromGetAccountInfoResponse(this.auth,t,e):null}return os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Kl(ya(Dy),e,a);const u=(await Promise.all(t.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let d=u[0]||ya(Dy);const E=Wh(a,e.config.apiKey,e.name);let C=null;for(const A of t)try{const b=await A._get(E);if(b){let R;if(typeof b=="string"){const P=await ff(e,{idToken:b}).catch(()=>{});if(!P)break;R=await os._fromGetAccountInfoResponse(e,P,b)}else R=os._fromJSON(e,b);A!==d&&(C=R),d=A;break}}catch{}const x=u.filter(A=>A._shouldAllowMigration);return!d._shouldAllowMigration||!x.length?new Kl(d,e,a):(d=x[0],C&&await d._set(E,C.toJSON()),await Promise.all(t.map(async A=>{if(A!==d)try{await A._remove(E)}catch{}})),new Kl(d,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EA(e))return"Blackberry";if(_A(e))return"Webos";if(gA(e))return"Safari";if((e.includes("chrome/")||mA(e))&&!e.includes("edge/"))return"Chrome";if(yA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(t);if(a?.length===2)return a[1]}return"Other"}function dA(r=Hi()){return/firefox\//i.test(r)}function gA(r=Hi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mA(r=Hi()){return/crios\//i.test(r)}function pA(r=Hi()){return/iemobile/i.test(r)}function yA(r=Hi()){return/android/i.test(r)}function EA(r=Hi()){return/blackberry/i.test(r)}function _A(r=Hi()){return/webos/i.test(r)}function mg(r=Hi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function $S(r=Hi()){return mg(r)&&!!window.navigator?.standalone}function eI(){return X3()&&document.documentMode===10}function AA(r=Hi()){return mg(r)||yA(r)||_A(r)||EA(r)||/windows phone/i.test(r)||pA(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(r,e=[]){let t;switch(r){case"Browser":t=My(Hi());break;case"Worker":t=`${My(Hi())}-${r}`;break;default:t=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=d=>new Promise((E,C)=>{try{const x=e(d);E(x)}catch(x){C(x)}});a.onAbort=t,this.queue.push(a);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const u of t)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(r,e={}){return sc(r,"GET","/v2/passwordPolicy",dg(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=6;class rI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),u&&(t.meetsMaxPasswordLength=e.length<=u)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let u=0;u<e.length;u++)a=e.charAt(u),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,u,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,a,u){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Py(this),this.idTokenSubscription=new Py(this),this.beforeStateQueue=new tI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=u.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ff(this,{idToken:e}),a=await os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(E=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(E,E))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,E=a?._redirectEventId,C=await this.tryRedirectSignIn(e);(!d||d===E)&&C?.user&&(a=C.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await df(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=US()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(jo(this));const t=e?yi(e):null;return t&&lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(jo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(jo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ya(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nI(this),t=new rI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rl("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await JS(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ya(e)||this._popupRedirectResolver;lt(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[ya(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,u){if(this._deleted)return()=>{};const d=typeof t=="function"?t:t.next.bind(t);let E=!1;const C=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(C,this,"internal-error"),C.then(()=>{E||d(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,a,u);return()=>{E=!0,x()}}else{const x=e.addObserver(t);return()=>{E=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Gf(r){return yi(r)}class Py{constructor(e){this.auth=e,this.observer=null,this.addObserver=$3(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aI(r){pg=r}function oI(r){return pg.loadJS(r)}function lI(){return pg.gapiScript}function cI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(r,e){const t=yo(r,"auth");if(t.isInitialized()){const u=t.getImmediate(),d=t.getOptions();if(co(d,e??{}))return u;Ls(u,"already-initialized")}return t.initialize({options:e})}function hI(r,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(ya);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e?.popupRedirectResolver)}function fI(r,e,t){const a=Gf(r);lt(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const u=!1,d=xA(e),{host:E,port:C}=dI(e),x=C===null?"":`:${C}`,A={url:`${d}//${E}${x}/`},b=Object.freeze({host:E,port:C,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:u})});if(!a._canInitEmulator){lt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),lt(co(A,a.config.emulator)&&co(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=A,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,il(E)?(ng(`${d}//${E}${x}`),ig("Auth",!0)):gI()}function xA(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function dI(r){const e=xA(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(a);if(u){const d=u[1];return{host:d,port:Ly(a.substr(d.length+1))}}else{const[d,E]=a.split(":");return{host:d,port:Ly(E)}}}function Ly(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function gI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pa("not implemented")}_getIdTokenResponse(e){return pa("not implemented")}_linkToIdToken(e,t){return pa("not implemented")}_getReauthenticationResolver(e){return pa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(r,e){return GS(r,"POST","/v1/accounts:signInWithIdp",dg(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="http://localhost";class Qo extends TA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ls("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:u,...d}=t;if(!a||!u)return null;const E=new Qo(a,u);return E.idToken=d.idToken||void 0,E.accessToken=d.accessToken||void 0,E.secret=d.secret,E.nonce=d.nonce,E.pendingToken=d.pendingToken||null,E}_getIdTokenResponse(e){const t=this.buildRequest();return Wl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Wl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wl(e,t)}buildRequest(){const e={requestUri:mI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Iu{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qo._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ma.credential(t,a)}catch{return null}}}ma.GOOGLE_SIGN_IN_METHOD="google.com";ma.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Iu{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Iu{constructor(){super("twitter.com")}static credential(e,t){return Qo._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return io.credential(t,a)}catch{return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com";io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,u=!1){const d=await os._fromIdTokenResponse(e,a,u),E=ky(a);return new Zl({user:d,providerId:E,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const u=ky(a);return new Zl({user:e,providerId:u,_tokenResponse:a,operationType:t})}}function ky(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends Yr{constructor(e,t,a,u){super(t.code,t.message),this.operationType=a,this.user=u,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,u){return new gf(e,t,a,u)}}function CA(r,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(r,d,e,a):d})}async function pI(r,e,t=!1){const a=await gu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Zl._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(r,e,t=!1){const{auth:a}=r;if(jr(a.app))return Promise.reject(jo(a));const u="reauthenticate";try{const d=await gu(r,CA(a,u,e,r),t);lt(d.idToken,a,"internal-error");const E=gg(d.idToken);lt(E,a,"internal-error");const{sub:C}=E;return lt(r.uid===C,a,"user-mismatch"),Zl._forOperation(r,u,d)}catch(d){throw d?.code==="auth/user-not-found"&&Ls(a,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e,t=!1){if(jr(r.app))return Promise.reject(jo(r));const a="signIn",u=await CA(r,a,e),d=await Zl._fromIdTokenResponse(r,a,u);return t||await r._updateCurrentUser(d.user),d}function _I(r,e,t,a){return yi(r).onIdTokenChanged(e,t,a)}function AI(r,e,t){return yi(r).beforeAuthStateChanged(e,t)}function vA(r,e,t,a){return yi(r).onAuthStateChanged(e,t,a)}function wI(r){return yi(r).signOut()}const mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=1e3,TI=10;class SA extends bA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),u=this.localCache[t];a!==u&&e(t,u,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((E,C,x)=>{this.notifyListeners(E,x)});return}const a=e.key;t?this.detachListener():this.stopPolling();const u=()=>{const E=this.storage.getItem(a);!t&&this.localCache[a]===E||this.notifyListeners(a,E)},d=this.storage.getItem(a);eI()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(u,TI):u()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const u of Array.from(a))u(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},xI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SA.type="LOCAL";const CI=SA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends bA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IA.type="SESSION";const RA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(u=>u.isListeningto(e));if(t)return t;const a=new jf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:u,data:d}=t.data,E=this.handlersMap[u];if(!E?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:u});const C=Array.from(E).map(async A=>A(t.origin,d)),x=await vI(C);t.ports[0].postMessage({status:"done",eventId:a,eventType:u,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(r="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let d,E;return new Promise((C,x)=>{const A=Eg("",20);u.port1.start();const b=setTimeout(()=>{x(new Error("unsupported_event"))},a);E={messageChannel:u,onMessage(R){const P=R;if(P.data.eventId===A)switch(P.data.status){case"ack":clearTimeout(b),d=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),C(P.data.response);break;default:clearTimeout(b),clearTimeout(d),x(new Error("invalid_response"));break}}},this.handlers.add(E),u.port1.addEventListener("message",E.onMessage),this.target.postMessage({eventType:e,eventId:A,data:t},[u.port2])}).finally(()=>{E&&this.removeMessageHandler(E)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return window}function SI(r){Rs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof Rs().WorkerGlobalScope<"u"&&typeof Rs().importScripts=="function"}async function II(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RI(){return navigator?.serviceWorker?.controller||null}function NI(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firebaseLocalStorageDb",OI=1,pf="firebaseLocalStorage",DA="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qf(r,e){return r.transaction([pf],e?"readwrite":"readonly").objectStore(pf)}function DI(){const r=indexedDB.deleteDatabase(OA);return new Ru(r).toPromise()}function R0(){const r=indexedDB.open(OA,OI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(pf,{keyPath:DA})}catch(u){t(u)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(pf)?e(a):(a.close(),await DI(),e(await R0()))})})}async function By(r,e,t){const a=qf(r,!0).put({[DA]:e,value:t});return new Ru(a).toPromise()}async function MI(r,e){const t=qf(r,!1).get(e),a=await new Ru(t).toPromise();return a===void 0?null:a.value}function Vy(r,e){const t=qf(r,!0).delete(e);return new Ru(t).toPromise()}const PI=800,LI=3;class MA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>LI)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(NI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await II(),!this.activeServiceWorker)return;this.sender=new bI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R0();return await By(e,mf,"1"),await Vy(e,mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>By(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>MI(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(u=>{const d=qf(u,!1).getAll();return new Ru(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:u,value:d}of e)a.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(d)&&(this.notifyListeners(u,d),t.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!a.has(u)&&(this.notifyListeners(u,null),t.push(u));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const u of Array.from(a))u(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MA.type="LOCAL";const kI=MA;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r,e){return e?ya(e):(lt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends TA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BI(r){return EI(r.auth,new _g(r),r.bypassAuthState)}function VI(r){const{auth:e,user:t}=r;return lt(t,e,"internal-error"),yI(t,new _g(r),r.bypassAuthState)}async function UI(r){const{auth:e,user:t}=r;return lt(t,e,"internal-error"),pI(t,new _g(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,t,a,u,d=!1){this.auth=e,this.resolver=a,this.user=u,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:u,tenantId:d,error:E,type:C}=e;if(E){this.reject(E);return}const x={auth:this.auth,requestUri:t,sessionId:a,tenantId:d||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(C)(x))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BI;case"linkViaPopup":case"linkViaRedirect":return UI;case"reauthViaPopup":case"reauthViaRedirect":return VI;default:Ls(this.auth,"internal-error")}}resolve(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Su(2e3,1e4);async function zI(r,e,t){if(jr(r.app))return Promise.reject(cs(r,"operation-not-supported-in-this-environment"));const a=Gf(r);kS(r,e,yg);const u=PA(a,t);return new Ho(a,"signInViaPopup",e,u).executeNotNull()}class Ho extends LA{constructor(e,t,a,u,d){super(e,t,u,d),this.provider=a,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){wa(this.filter.length===1,"Popup operations only handle one event");const e=Eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FI.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="pendingRedirect",Qh=new Map;class GI extends LA{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Qh.get(this.auth._key());if(!e){try{const a=await jI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Qh.set(this.auth._key(),e)}return this.bypassAuthState||Qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jI(r,e){const t=YI(e),a=XI(r);if(!await a._isAvailable())return!1;const u=await a._get(t)==="true";return await a._remove(t),u}function qI(r,e){Qh.set(r._key(),e)}function XI(r){return ya(r._redirectPersistence)}function YI(r){return Wh(HI,r.config.apiKey,r.name)}async function KI(r,e,t=!1){if(jr(r.app))return Promise.reject(jo(r));const a=Gf(r),u=PA(a,e),E=await new GI(a,u,t).execute();return E&&!t&&(delete E.user._redirectEventId,await a._persistUserIfCurrent(E.user),await a._setRedirectUser(null,e)),E}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=600*1e3;class QI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kA(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uy(e))}saveEventToCache(e){this.cachedEventUids.add(Uy(e)),this.lastProcessedEventTime=Date.now()}}function Uy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function ZI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kA(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(r,e={}){return sc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e4=/^https?/;async function t4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JI(r);for(const t of e)try{if(n4(t))return}catch{}Ls(r,"unauthorized-domain")}function n4(r){const e=S0(),{protocol:t,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const E=new URL(r);return E.hostname===""&&a===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&E.hostname===a}if(!e4.test(t))return!1;if($I.test(r))return a===r;const u=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new Su(3e4,6e4);function Fy(){const r=Rs().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function r4(r){return new Promise((e,t)=>{function a(){Fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fy(),t(cs(r,"network-request-failed"))},timeout:i4.get()})}if(Rs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rs().gapi?.load)a();else{const u=cI("iframefcb");return Rs()[u]=()=>{gapi.load?a():t(cs(r,"network-request-failed"))},oI(`${lI()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function s4(r){return Zh=Zh||r4(r),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=new Su(5e3,15e3),o4="__/auth/iframe",l4="emulator/auth/iframe",c4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h4(r){const e=r.config;lt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?fg(e,l4):`https://${r.config.authDomain}/${o4}`,a={apiKey:e.apiKey,appName:r.name,v:sl},u=u4.get(r.config.apiHost);u&&(a.eid=u);const d=r._getFrameworks();return d.length&&(a.fw=d.join(",")),`${t}?${bu(a).slice(1)}`}async function f4(r){const e=await s4(r),t=Rs().gapi;return lt(t,r,"internal-error"),e.open({where:document.body,url:h4(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c4,dontclear:!0},a=>new Promise(async(u,d)=>{await a.restyle({setHideOnLeave:!1});const E=cs(r,"network-request-failed"),C=Rs().setTimeout(()=>{d(E)},a4.get());function x(){Rs().clearTimeout(C),u(a)}a.ping(x).then(x,()=>{d(E)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g4=500,m4=600,p4="_blank",y4="http://localhost";class zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E4(r,e,t,a=g4,u=m4){const d=Math.max((window.screen.availHeight-u)/2,0).toString(),E=Math.max((window.screen.availWidth-a)/2,0).toString();let C="";const x={...d4,width:a.toString(),height:u.toString(),top:d,left:E},A=Hi().toLowerCase();t&&(C=mA(A)?p4:t),dA(A)&&(e=e||y4,x.scrollbars="yes");const b=Object.entries(x).reduce((P,[G,Q])=>`${P}${G}=${Q},`,"");if($S(A)&&C!=="_self")return _4(e||"",C),new zy(null);const R=window.open(e||"",C,b);lt(R,r,"popup-blocked");try{R.focus()}catch{}return new zy(R)}function _4(r,e){const t=document.createElement("a");t.href=r,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="__/auth/handler",w4="emulator/auth/handler",x4=encodeURIComponent("fac");async function Hy(r,e,t,a,u,d){lt(r.config.authDomain,r,"auth-domain-config-required"),lt(r.config.apiKey,r,"invalid-api-key");const E={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:a,v:sl,eventId:u};if(e instanceof yg){e.setDefaultLanguage(r.languageCode),E.providerId=e.providerId||"",J3(e.getCustomParameters())||(E.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,R]of Object.entries({}))E[b]=R}if(e instanceof Iu){const b=e.getScopes().filter(R=>R!=="");b.length>0&&(E.scopes=b.join(","))}r.tenantId&&(E.tid=r.tenantId);const C=E;for(const b of Object.keys(C))C[b]===void 0&&delete C[b];const x=await r._getAppCheckToken(),A=x?`#${x4}=${encodeURIComponent(x)}`:"";return`${T4(r)}?${bu(C).slice(1)}${A}`}function T4({config:r}){return r.emulator?fg(r,w4):`https://${r.authDomain}/${A4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="webStorageSupport";class C4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RA,this._completeRedirectFn=KI,this._overrideRedirectResult=qI}async _openPopup(e,t,a,u){wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Hy(e,t,a,S0(),u);return E4(e,d,Eg())}async _openRedirect(e,t,a,u){await this._originValidation(e);const d=await Hy(e,t,a,S0(),u);return SI(d),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:u,promise:d}=this.eventManagers[t];return u?Promise.resolve(u):(wa(d,"If manager is not set, promise should be"),d)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await f4(e),a=new QI(e);return t.register("authEvent",u=>(lt(u?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(f0,{type:f0},u=>{const d=u?.[0]?.[f0];d!==void 0&&t(!!d),Ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AA()||gA()||mg()}}const v4=C4;var Gy="@firebase/auth",jy="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I4(r){hs(new Xr("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),u=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:E,authDomain:C}=a.options;lt(E&&!E.includes(":"),"invalid-api-key",{appName:a.name});const x={apiKey:E,authDomain:C,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wA(r)},A=new sI(a,u,d,x);return hI(A,t),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),hs(new Xr("auth-internal",e=>{const t=Gf(e.getProvider("auth").getImmediate());return(a=>new b4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(Gy,jy,S4(r)),ar(Gy,jy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=300,N4=S_("authIdTokenMaxAge")||R4;let qy=null;const O4=r=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>N4)return;const u=t?.token;qy!==u&&(qy=u,await fetch(r,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function D4(r=Ff()){const e=yo(r,"auth");if(e.isInitialized())return e.getImmediate();const t=uI(r,{popupRedirectResolver:v4,persistence:[kI,CI,RA]}),a=S_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(a,location.origin);if(location.origin===d.origin){const E=O4(d.toString());AI(t,E,()=>E(t.currentUser)),_I(t,C=>E(C))}}const u=C_("auth");return u&&fI(t,`http://${u}`),t}function M4(){return document.getElementsByTagName("head")?.[0]??document}aI({loadJS(r){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=u=>{const d=cs("internal-error");d.customData=u,t(d)},a.type="text/javascript",a.charset="UTF-8",M4().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I4("Browser");var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,BA;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,z){function B(){}B.prototype=z.prototype,F.F=z.prototype,F.prototype=new B,F.prototype.constructor=F,F.D=function(ee,X,K){for(var j=Array(arguments.length-2),it=2;it<arguments.length;it++)j[it-2]=arguments[it];return z.prototype[X].apply(ee,j)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(F,z,B){B||(B=0);const ee=Array(16);if(typeof z=="string")for(var X=0;X<16;++X)ee[X]=z.charCodeAt(B++)|z.charCodeAt(B++)<<8|z.charCodeAt(B++)<<16|z.charCodeAt(B++)<<24;else for(X=0;X<16;++X)ee[X]=z[B++]|z[B++]<<8|z[B++]<<16|z[B++]<<24;z=F.g[0],B=F.g[1],X=F.g[2];let K=F.g[3],j;j=z+(K^B&(X^K))+ee[0]+3614090360&4294967295,z=B+(j<<7&4294967295|j>>>25),j=K+(X^z&(B^X))+ee[1]+3905402710&4294967295,K=z+(j<<12&4294967295|j>>>20),j=X+(B^K&(z^B))+ee[2]+606105819&4294967295,X=K+(j<<17&4294967295|j>>>15),j=B+(z^X&(K^z))+ee[3]+3250441966&4294967295,B=X+(j<<22&4294967295|j>>>10),j=z+(K^B&(X^K))+ee[4]+4118548399&4294967295,z=B+(j<<7&4294967295|j>>>25),j=K+(X^z&(B^X))+ee[5]+1200080426&4294967295,K=z+(j<<12&4294967295|j>>>20),j=X+(B^K&(z^B))+ee[6]+2821735955&4294967295,X=K+(j<<17&4294967295|j>>>15),j=B+(z^X&(K^z))+ee[7]+4249261313&4294967295,B=X+(j<<22&4294967295|j>>>10),j=z+(K^B&(X^K))+ee[8]+1770035416&4294967295,z=B+(j<<7&4294967295|j>>>25),j=K+(X^z&(B^X))+ee[9]+2336552879&4294967295,K=z+(j<<12&4294967295|j>>>20),j=X+(B^K&(z^B))+ee[10]+4294925233&4294967295,X=K+(j<<17&4294967295|j>>>15),j=B+(z^X&(K^z))+ee[11]+2304563134&4294967295,B=X+(j<<22&4294967295|j>>>10),j=z+(K^B&(X^K))+ee[12]+1804603682&4294967295,z=B+(j<<7&4294967295|j>>>25),j=K+(X^z&(B^X))+ee[13]+4254626195&4294967295,K=z+(j<<12&4294967295|j>>>20),j=X+(B^K&(z^B))+ee[14]+2792965006&4294967295,X=K+(j<<17&4294967295|j>>>15),j=B+(z^X&(K^z))+ee[15]+1236535329&4294967295,B=X+(j<<22&4294967295|j>>>10),j=z+(X^K&(B^X))+ee[1]+4129170786&4294967295,z=B+(j<<5&4294967295|j>>>27),j=K+(B^X&(z^B))+ee[6]+3225465664&4294967295,K=z+(j<<9&4294967295|j>>>23),j=X+(z^B&(K^z))+ee[11]+643717713&4294967295,X=K+(j<<14&4294967295|j>>>18),j=B+(K^z&(X^K))+ee[0]+3921069994&4294967295,B=X+(j<<20&4294967295|j>>>12),j=z+(X^K&(B^X))+ee[5]+3593408605&4294967295,z=B+(j<<5&4294967295|j>>>27),j=K+(B^X&(z^B))+ee[10]+38016083&4294967295,K=z+(j<<9&4294967295|j>>>23),j=X+(z^B&(K^z))+ee[15]+3634488961&4294967295,X=K+(j<<14&4294967295|j>>>18),j=B+(K^z&(X^K))+ee[4]+3889429448&4294967295,B=X+(j<<20&4294967295|j>>>12),j=z+(X^K&(B^X))+ee[9]+568446438&4294967295,z=B+(j<<5&4294967295|j>>>27),j=K+(B^X&(z^B))+ee[14]+3275163606&4294967295,K=z+(j<<9&4294967295|j>>>23),j=X+(z^B&(K^z))+ee[3]+4107603335&4294967295,X=K+(j<<14&4294967295|j>>>18),j=B+(K^z&(X^K))+ee[8]+1163531501&4294967295,B=X+(j<<20&4294967295|j>>>12),j=z+(X^K&(B^X))+ee[13]+2850285829&4294967295,z=B+(j<<5&4294967295|j>>>27),j=K+(B^X&(z^B))+ee[2]+4243563512&4294967295,K=z+(j<<9&4294967295|j>>>23),j=X+(z^B&(K^z))+ee[7]+1735328473&4294967295,X=K+(j<<14&4294967295|j>>>18),j=B+(K^z&(X^K))+ee[12]+2368359562&4294967295,B=X+(j<<20&4294967295|j>>>12),j=z+(B^X^K)+ee[5]+4294588738&4294967295,z=B+(j<<4&4294967295|j>>>28),j=K+(z^B^X)+ee[8]+2272392833&4294967295,K=z+(j<<11&4294967295|j>>>21),j=X+(K^z^B)+ee[11]+1839030562&4294967295,X=K+(j<<16&4294967295|j>>>16),j=B+(X^K^z)+ee[14]+4259657740&4294967295,B=X+(j<<23&4294967295|j>>>9),j=z+(B^X^K)+ee[1]+2763975236&4294967295,z=B+(j<<4&4294967295|j>>>28),j=K+(z^B^X)+ee[4]+1272893353&4294967295,K=z+(j<<11&4294967295|j>>>21),j=X+(K^z^B)+ee[7]+4139469664&4294967295,X=K+(j<<16&4294967295|j>>>16),j=B+(X^K^z)+ee[10]+3200236656&4294967295,B=X+(j<<23&4294967295|j>>>9),j=z+(B^X^K)+ee[13]+681279174&4294967295,z=B+(j<<4&4294967295|j>>>28),j=K+(z^B^X)+ee[0]+3936430074&4294967295,K=z+(j<<11&4294967295|j>>>21),j=X+(K^z^B)+ee[3]+3572445317&4294967295,X=K+(j<<16&4294967295|j>>>16),j=B+(X^K^z)+ee[6]+76029189&4294967295,B=X+(j<<23&4294967295|j>>>9),j=z+(B^X^K)+ee[9]+3654602809&4294967295,z=B+(j<<4&4294967295|j>>>28),j=K+(z^B^X)+ee[12]+3873151461&4294967295,K=z+(j<<11&4294967295|j>>>21),j=X+(K^z^B)+ee[15]+530742520&4294967295,X=K+(j<<16&4294967295|j>>>16),j=B+(X^K^z)+ee[2]+3299628645&4294967295,B=X+(j<<23&4294967295|j>>>9),j=z+(X^(B|~K))+ee[0]+4096336452&4294967295,z=B+(j<<6&4294967295|j>>>26),j=K+(B^(z|~X))+ee[7]+1126891415&4294967295,K=z+(j<<10&4294967295|j>>>22),j=X+(z^(K|~B))+ee[14]+2878612391&4294967295,X=K+(j<<15&4294967295|j>>>17),j=B+(K^(X|~z))+ee[5]+4237533241&4294967295,B=X+(j<<21&4294967295|j>>>11),j=z+(X^(B|~K))+ee[12]+1700485571&4294967295,z=B+(j<<6&4294967295|j>>>26),j=K+(B^(z|~X))+ee[3]+2399980690&4294967295,K=z+(j<<10&4294967295|j>>>22),j=X+(z^(K|~B))+ee[10]+4293915773&4294967295,X=K+(j<<15&4294967295|j>>>17),j=B+(K^(X|~z))+ee[1]+2240044497&4294967295,B=X+(j<<21&4294967295|j>>>11),j=z+(X^(B|~K))+ee[8]+1873313359&4294967295,z=B+(j<<6&4294967295|j>>>26),j=K+(B^(z|~X))+ee[15]+4264355552&4294967295,K=z+(j<<10&4294967295|j>>>22),j=X+(z^(K|~B))+ee[6]+2734768916&4294967295,X=K+(j<<15&4294967295|j>>>17),j=B+(K^(X|~z))+ee[13]+1309151649&4294967295,B=X+(j<<21&4294967295|j>>>11),j=z+(X^(B|~K))+ee[4]+4149444226&4294967295,z=B+(j<<6&4294967295|j>>>26),j=K+(B^(z|~X))+ee[11]+3174756917&4294967295,K=z+(j<<10&4294967295|j>>>22),j=X+(z^(K|~B))+ee[2]+718787259&4294967295,X=K+(j<<15&4294967295|j>>>17),j=B+(K^(X|~z))+ee[9]+3951481745&4294967295,F.g[0]=F.g[0]+z&4294967295,F.g[1]=F.g[1]+(X+(j<<21&4294967295|j>>>11))&4294967295,F.g[2]=F.g[2]+X&4294967295,F.g[3]=F.g[3]+K&4294967295}a.prototype.v=function(F,z){z===void 0&&(z=F.length);const B=z-this.blockSize,ee=this.C;let X=this.h,K=0;for(;K<z;){if(X==0)for(;K<=B;)u(this,F,K),K+=this.blockSize;if(typeof F=="string"){for(;K<z;)if(ee[X++]=F.charCodeAt(K++),X==this.blockSize){u(this,ee),X=0;break}}else for(;K<z;)if(ee[X++]=F[K++],X==this.blockSize){u(this,ee),X=0;break}}this.h=X,this.o+=z},a.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var z=1;z<F.length-8;++z)F[z]=0;z=this.o*8;for(var B=F.length-8;B<F.length;++B)F[B]=z&255,z/=256;for(this.v(F),F=Array(16),z=0,B=0;B<4;++B)for(let ee=0;ee<32;ee+=8)F[z++]=this.g[B]>>>ee&255;return F};function d(F,z){var B=C;return Object.prototype.hasOwnProperty.call(B,F)?B[F]:B[F]=z(F)}function E(F,z){this.h=z;const B=[];let ee=!0;for(let X=F.length-1;X>=0;X--){const K=F[X]|0;ee&&K==z||(B[X]=K,ee=!1)}this.g=B}var C={};function x(F){return-128<=F&&F<128?d(F,function(z){return new E([z|0],z<0?-1:0)}):new E([F|0],F<0?-1:0)}function A(F){if(isNaN(F)||!isFinite(F))return R;if(F<0)return Y(A(-F));const z=[];let B=1;for(let ee=0;F>=B;ee++)z[ee]=F/B|0,B*=4294967296;return new E(z,0)}function b(F,z){if(F.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(F.charAt(0)=="-")return Y(b(F.substring(1),z));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=A(Math.pow(z,8));let ee=R;for(let K=0;K<F.length;K+=8){var X=Math.min(8,F.length-K);const j=parseInt(F.substring(K,K+X),z);X<8?(X=A(Math.pow(z,X)),ee=ee.j(X).add(A(j))):(ee=ee.j(B),ee=ee.add(A(j)))}return ee}var R=x(0),P=x(1),G=x(16777216);r=E.prototype,r.m=function(){if(J(this))return-Y(this).m();let F=0,z=1;for(let B=0;B<this.g.length;B++){const ee=this.i(B);F+=(ee>=0?ee:4294967296+ee)*z,z*=4294967296}return F},r.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(Q(this))return"0";if(J(this))return"-"+Y(this).toString(F);const z=A(Math.pow(F,6));var B=this;let ee="";for(;;){const X=Se(B,z).g;B=Ee(B,X.j(z));let K=((B.g.length>0?B.g[0]:B.h)>>>0).toString(F);if(B=X,Q(B))return K+ee;for(;K.length<6;)K="0"+K;ee=K+ee}},r.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function Q(F){if(F.h!=0)return!1;for(let z=0;z<F.g.length;z++)if(F.g[z]!=0)return!1;return!0}function J(F){return F.h==-1}r.l=function(F){return F=Ee(this,F),J(F)?-1:Q(F)?0:1};function Y(F){const z=F.g.length,B=[];for(let ee=0;ee<z;ee++)B[ee]=~F.g[ee];return new E(B,~F.h).add(P)}r.abs=function(){return J(this)?Y(this):this},r.add=function(F){const z=Math.max(this.g.length,F.g.length),B=[];let ee=0;for(let X=0;X<=z;X++){let K=ee+(this.i(X)&65535)+(F.i(X)&65535),j=(K>>>16)+(this.i(X)>>>16)+(F.i(X)>>>16);ee=j>>>16,K&=65535,j&=65535,B[X]=j<<16|K}return new E(B,B[B.length-1]&-2147483648?-1:0)};function Ee(F,z){return F.add(Y(z))}r.j=function(F){if(Q(this)||Q(F))return R;if(J(this))return J(F)?Y(this).j(Y(F)):Y(Y(this).j(F));if(J(F))return Y(this.j(Y(F)));if(this.l(G)<0&&F.l(G)<0)return A(this.m()*F.m());const z=this.g.length+F.g.length,B=[];for(var ee=0;ee<2*z;ee++)B[ee]=0;for(ee=0;ee<this.g.length;ee++)for(let X=0;X<F.g.length;X++){const K=this.i(ee)>>>16,j=this.i(ee)&65535,it=F.i(X)>>>16,ce=F.i(X)&65535;B[2*ee+2*X]+=j*ce,ue(B,2*ee+2*X),B[2*ee+2*X+1]+=K*ce,ue(B,2*ee+2*X+1),B[2*ee+2*X+1]+=j*it,ue(B,2*ee+2*X+1),B[2*ee+2*X+2]+=K*it,ue(B,2*ee+2*X+2)}for(F=0;F<z;F++)B[F]=B[2*F+1]<<16|B[2*F];for(F=z;F<2*z;F++)B[F]=0;return new E(B,0)};function ue(F,z){for(;(F[z]&65535)!=F[z];)F[z+1]+=F[z]>>>16,F[z]&=65535,z++}function ne(F,z){this.g=F,this.h=z}function Se(F,z){if(Q(z))throw Error("division by zero");if(Q(F))return new ne(R,R);if(J(F))return z=Se(Y(F),z),new ne(Y(z.g),Y(z.h));if(J(z))return z=Se(F,Y(z)),new ne(Y(z.g),z.h);if(F.g.length>30){if(J(F)||J(z))throw Error("slowDivide_ only works with positive integers.");for(var B=P,ee=z;ee.l(F)<=0;)B=ke(B),ee=ke(ee);var X=Ue(B,1),K=Ue(ee,1);for(ee=Ue(ee,2),B=Ue(B,2);!Q(ee);){var j=K.add(ee);j.l(F)<=0&&(X=X.add(B),K=j),ee=Ue(ee,1),B=Ue(B,1)}return z=Ee(F,X.j(z)),new ne(X,z)}for(X=R;F.l(z)>=0;){for(B=Math.max(1,Math.floor(F.m()/z.m())),ee=Math.ceil(Math.log(B)/Math.LN2),ee=ee<=48?1:Math.pow(2,ee-48),K=A(B),j=K.j(z);J(j)||j.l(F)>0;)B-=ee,K=A(B),j=K.j(z);Q(K)&&(K=P),X=X.add(K),F=Ee(F,j)}return new ne(X,F)}r.B=function(F){return Se(this,F).h},r.and=function(F){const z=Math.max(this.g.length,F.g.length),B=[];for(let ee=0;ee<z;ee++)B[ee]=this.i(ee)&F.i(ee);return new E(B,this.h&F.h)},r.or=function(F){const z=Math.max(this.g.length,F.g.length),B=[];for(let ee=0;ee<z;ee++)B[ee]=this.i(ee)|F.i(ee);return new E(B,this.h|F.h)},r.xor=function(F){const z=Math.max(this.g.length,F.g.length),B=[];for(let ee=0;ee<z;ee++)B[ee]=this.i(ee)^F.i(ee);return new E(B,this.h^F.h)};function ke(F){const z=F.g.length+1,B=[];for(let ee=0;ee<z;ee++)B[ee]=F.i(ee)<<1|F.i(ee-1)>>>31;return new E(B,F.h)}function Ue(F,z){const B=z>>5;z%=32;const ee=F.g.length-B,X=[];for(let K=0;K<ee;K++)X[K]=z>0?F.i(K+B)>>>z|F.i(K+B+1)<<32-z:F.i(K+B);return new E(X,F.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,BA=a,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.B,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=A,E.fromString=b,oo=E}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VA,$c,UA,Jh,N0,FA,zA,HA;(function(){var r,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var S=0;S<p.length;++S){var N=p[S];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var a=t(this);function u(p,S){if(S)e:{var N=a;p=p.split(".");for(var V=0;V<p.length-1;V++){var re=p[V];if(!(re in N))break e;N=N[re]}p=p[p.length-1],V=N[p],S=S(V),S!=V&&S!=null&&e(N,p,{configurable:!0,writable:!0,value:S})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(S){var N=[],V;for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&N.push([V,S[V]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},E=this||self;function C(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function x(p,S,N){return p.call.apply(p.bind,arguments)}function A(p,S,N){return A=x,A.apply(null,arguments)}function b(p,S){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),p.apply(this,V)}}function R(p,S){function N(){}N.prototype=S.prototype,p.Z=S.prototype,p.prototype=new N,p.prototype.constructor=p,p.Ob=function(V,re,me){for(var De=Array(arguments.length-2),st=2;st<arguments.length;st++)De[st-2]=arguments[st];return S.prototype[re].apply(V,De)}}var P=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function G(p){const S=p.length;if(S>0){const N=Array(S);for(let V=0;V<S;V++)N[V]=p[V];return N}return[]}function Q(p,S){for(let V=1;V<arguments.length;V++){const re=arguments[V];var N=typeof re;if(N=N!="object"?N:re?Array.isArray(re)?"array":N:"null",N=="array"||N=="object"&&typeof re.length=="number"){N=p.length||0;const me=re.length||0;p.length=N+me;for(let De=0;De<me;De++)p[N+De]=re[De]}else p.push(re)}}class J{constructor(S,N){this.i=S,this.j=N,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function Y(p){E.setTimeout(()=>{throw p},0)}function Ee(){var p=F;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class ue{constructor(){this.h=this.g=null}add(S,N){const V=ne.get();V.set(S,N),this.h?this.h.next=V:this.g=V,this.h=V}}var ne=new J(()=>new Se,p=>p.reset());class Se{constructor(){this.next=this.g=this.h=null}set(S,N){this.h=S,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,Ue=!1,F=new ue,z=()=>{const p=Promise.resolve(void 0);ke=()=>{p.then(B)}};function B(){for(var p;p=Ee();){try{p.h.call(p.g)}catch(N){Y(N)}var S=ne;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}Ue=!1}function ee(){this.u=this.u,this.C=this.C}ee.prototype.u=!1,ee.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ee.prototype[Symbol.dispose]=function(){this.dispose()},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var K=(function(){if(!E.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};E.addEventListener("test",N,S),E.removeEventListener("test",N,S)}catch{}return p})();function j(p){return/^[\s\xa0]*$/.test(p)}function it(p,S){X.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}R(it,X),it.prototype.init=function(p,S){const N=this.type=p.type,V=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(N=="mouseover"?S=p.fromElement:N=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ae(p,S,N,V,re){this.listener=p,this.proxy=null,this.src=S,this.type=N,this.capture=!!V,this.ha=re,this.key=++pe,this.da=this.fa=!1}function qe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ht(p,S,N){for(const V in p)S.call(N,p[V],V,p)}function Z(p,S){for(const N in p)S.call(void 0,p[N],N,p)}function be(p){const S={};for(const N in p)S[N]=p[N];return S}const Le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(p,S){let N,V;for(let re=1;re<arguments.length;re++){V=arguments[re];for(N in V)p[N]=V[N];for(let me=0;me<Le.length;me++)N=Le[me],Object.prototype.hasOwnProperty.call(V,N)&&(p[N]=V[N])}}function Fe(p){this.src=p,this.g={},this.h=0}Fe.prototype.add=function(p,S,N,V,re){const me=p.toString();p=this.g[me],p||(p=this.g[me]=[],this.h++);const De=Ne(p,S,V,re);return De>-1?(S=p[De],N||(S.fa=!1)):(S=new Ae(S,this.src,me,!!V,re),S.fa=N,p.push(S)),S};function yt(p,S){const N=S.type;if(N in p.g){var V=p.g[N],re=Array.prototype.indexOf.call(V,S,void 0),me;(me=re>=0)&&Array.prototype.splice.call(V,re,1),me&&(qe(S),p.g[N].length==0&&(delete p.g[N],p.h--))}}function Ne(p,S,N,V){for(let re=0;re<p.length;++re){const me=p[re];if(!me.da&&me.listener==S&&me.capture==!!N&&me.ha==V)return re}return-1}var zn="closure_lm_"+(Math.random()*1e6|0),ot={};function Ei(p,S,N,V,re){if(Array.isArray(S)){for(let me=0;me<S.length;me++)Ei(p,S[me],N,V,re);return null}return N=jt(N),p&&p[ce]?p.J(S,N,C(V)?!!V.capture:!1,re):Kr(p,S,N,!1,V,re)}function Kr(p,S,N,V,re,me){if(!S)throw Error("Invalid event type");const De=C(re)?!!re.capture:!!re;let st=Qr(p);if(st||(p[zn]=st=new Fe(p)),N=st.add(S,N,V,De,me),N.proxy)return N;if(V=Hn(),N.proxy=V,V.src=p,V.listener=N,p.addEventListener)K||(re=De),re===void 0&&(re=!1),p.addEventListener(S.toString(),V,re);else if(p.attachEvent)p.attachEvent(lr(S.toString()),V);else if(p.addListener&&p.removeListener)p.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Hn(){function p(N){return S.call(p.src,p.listener,N)}const S=Qi;return p}function Wr(p,S,N,V,re){if(Array.isArray(S))for(var me=0;me<S.length;me++)Wr(p,S[me],N,V,re);else V=C(V)?!!V.capture:!!V,N=jt(N),p&&p[ce]?(p=p.i,me=String(S).toString(),me in p.g&&(S=p.g[me],N=Ne(S,N,V,re),N>-1&&(qe(S[N]),Array.prototype.splice.call(S,N,1),S.length==0&&(delete p.g[me],p.h--)))):p&&(p=Qr(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Ne(S,N,V,re)),(N=p>-1?S[p]:null)&&At(N))}function At(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[ce])yt(S.i,p);else{var N=p.type,V=p.proxy;S.removeEventListener?S.removeEventListener(N,V,p.capture):S.detachEvent?S.detachEvent(lr(N),V):S.addListener&&S.removeListener&&S.removeListener(V),(N=Qr(S))?(yt(N,p),N.h==0&&(N.src=null,S[zn]=null)):qe(p)}}}function lr(p){return p in ot?ot[p]:ot[p]="on"+p}function Qi(p,S){if(p.da)p=!0;else{S=new it(S,this);const N=p.listener,V=p.ha||p.src;p.fa&&At(p),p=N.call(V,S)}return p}function Qr(p){return p=p[zn],p instanceof Fe?p:null}var Ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function jt(p){return typeof p=="function"?p:(p[Ut]||(p[Ut]=function(S){return p.handleEvent(S)}),p[Ut])}function Ze(){ee.call(this),this.i=new Fe(this),this.M=this,this.G=null}R(Ze,ee),Ze.prototype[ce]=!0,Ze.prototype.removeEventListener=function(p,S,N,V){Wr(this,p,S,N,V)};function vn(p,S){var N,V=p.G;if(V)for(N=[];V;V=V.G)N.push(V);if(p=p.M,V=S.type||S,typeof S=="string")S=new X(S,p);else if(S instanceof X)S.target=S.target||p;else{var re=S;S=new X(V,p),Be(S,re)}re=!0;let me,De;if(N)for(De=N.length-1;De>=0;De--)me=S.g=N[De],re=ze(me,V,!0,S)&&re;if(me=S.g=p,re=ze(me,V,!0,S)&&re,re=ze(me,V,!1,S)&&re,N)for(De=0;De<N.length;De++)me=S.g=N[De],re=ze(me,V,!1,S)&&re}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const N=p.g[S];for(let V=0;V<N.length;V++)qe(N[V]);delete p.g[S],p.h--}}this.G=null},Ze.prototype.J=function(p,S,N,V){return this.i.add(String(p),S,!1,N,V)},Ze.prototype.K=function(p,S,N,V){return this.i.add(String(p),S,!0,N,V)};function ze(p,S,N,V){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let re=!0;for(let me=0;me<S.length;++me){const De=S[me];if(De&&!De.da&&De.capture==N){const st=De.listener,sn=De.ha||De.src;De.fa&&yt(p.i,De),re=st.call(sn,V)!==!1&&re}}return re&&!V.defaultPrevented}function va(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=A(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:E.setTimeout(p,S||0)}function ba(p){p.g=va(()=>{p.g=null,p.i&&(p.i=!1,ba(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class cr extends ee{constructor(S,N){super(),this.m=S,this.l=N,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(p){ee.call(this),this.h=p,this.g={}}R(Zr,ee);var Wn=[];function ti(p){ht(p.g,function(S,N){this.g.hasOwnProperty(N)&&At(S)},p),p.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),ti(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=E.JSON.stringify,qt=E.JSON.parse,ll=class{stringify(p){return E.JSON.stringify(p,void 0)}parse(p){return E.JSON.parse(p,void 0)}};function zs(){}function cl(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pe(){X.call(this,"d")}R(Pe,X);function Yt(){X.call(this,"c")}R(Yt,X);var Et={},Kt=null;function Dr(){return Kt=Kt||new Ze}Et.Ia="serverreachability";function Hs(p){X.call(this,Et.Ia,p)}R(Hs,X);function Jr(p){const S=Dr();vn(S,new Hs(S))}Et.STAT_EVENT="statevent";function xt(p,S){X.call(this,Et.STAT_EVENT,p),this.stat=S}R(xt,X);function Jt(p){const S=Dr();vn(S,new xt(S,p))}Et.Ja="timingevent";function Ao(p,S){X.call(this,Et.Ja,p),this.size=S}R(Ao,X);function $r(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){p()},S)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function Gs(p,S,N,V,re,me){p.info(function(){if(p.g)if(me){var De="",st=me.split("&");for(let Vt=0;Vt<st.length;Vt++){var sn=st[Vt].split("=");if(sn.length>1){const Tn=sn[0];sn=sn[1];const Mi=Tn.split("_");De=Mi.length>=2&&Mi[1]=="type"?De+(Tn+"="+sn+"&"):De+(Tn+"=redacted&")}}}else De=null;else De=me;return"XMLHTTP REQ ("+V+") [attempt "+re+"]: "+S+`
`+N+`
`+De})}function Mn(p,S,N,V,re,me,De){p.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+re+"]: "+S+`
`+N+`
`+me+" "+De})}function Ri(p,S,N,V){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+jn(p,N)+(V?" "+V:"")})}function Sa(p,S){p.info(function(){return"TIMEOUT: "+S})}Qn.prototype.info=function(){};function jn(p,S){if(!p.g)return S;if(!S)return null;try{const me=JSON.parse(S);if(me){for(p=0;p<me.length;p++)if(Array.isArray(me[p])){var N=me[p];if(!(N.length<2)){var V=N[1];if(Array.isArray(V)&&!(V.length<1)){var re=V[0];if(re!="noop"&&re!="stop"&&re!="close")for(let De=1;De<V.length;De++)V[De]=""}}}}return Gn(me)}catch{return S}}var bn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ur;function Pn(){}R(Pn,zs),Pn.prototype.g=function(){return new XMLHttpRequest},ur=new Pn;function Gi(p){return encodeURIComponent(String(p))}function Ni(p){var S=1;p=p.split(":");const N=[];for(;S>0&&p.length;)N.push(p.shift()),S--;return p.length&&N.push(p.join(":")),N}function Ve(p,S,N,V){this.j=p,this.i=S,this.l=N,this.S=V||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ji}function ji(){this.i=null,this.g="",this.h=!1}var fs={},mn={};function _i(p,S,N){p.M=1,p.A=ui(cn(S)),p.u=N,p.R=!0,hr(p,null)}function hr(p,S){p.F=Date.now(),js(p),p.B=cn(p.A);var N=p.B,V=p.S;Array.isArray(V)||(V=[String(V)]),rn(N.i,"t",V),p.C=0,N=p.j.L,p.h=new ji,p.g=Es(p.j,N?S:null,!p.u),p.P>0&&(p.O=new cr(A(p.Y,p,p.g),p.P)),S=p.V,N=p.g,V=p.ba;var re="readystatechange";Array.isArray(re)||(re&&(Wn[0]=re.toString()),re=Wn);for(let me=0;me<re.length;me++){const De=Ei(N,re[me],V||S.handleEvent,!1,S.h||S);if(!De)break;S.g[De.key]=De}S=p.J?be(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),Jr(),Gs(p.i,p.v,p.B,p.l,p.S,p.u)}Ve.prototype.ba=function(p){p=p.target;const S=this.O;S&&ni(p)==3?S.j():this.Y(p)},Ve.prototype.Y=function(p){try{if(p==this.g)e:{const st=ni(this.g),sn=this.g.ya(),Vt=this.g.ca();if(!(st<3)&&(st!=3||this.g&&(this.h.h||this.g.la()||yr(this.g)))){this.K||st!=4||sn==7||(sn==8||Vt<=0?Jr(3):Jr(2)),hn(this);var S=this.g.ca();this.X=S;var N=fr(this);if(this.o=S==200,Mn(this.i,this.v,this.B,this.l,this.S,st,S),this.o){if(this.U&&!this.L){t:{if(this.g){var V,re=this.g;if((V=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(V)){var me=V;break t}}me=null}if(p=me)Ri(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qi(this,p);else{this.o=!1,this.m=3,Jt(12),dr(this),zt(this);break e}}if(this.R){p=!0;let Tn;for(;!this.K&&this.C<N.length;)if(Tn=ul(this,N),Tn==mn){st==4&&(this.m=4,Jt(14),p=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==fs){this.m=4,Jt(15),Ri(this.i,this.l,N,"[Invalid Chunk]"),p=!1;break}else Ri(this.i,this.l,Tn,null),qi(this,Tn);if(Ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||N.length!=0||this.h.h||(this.m=1,Jt(16),p=!1),this.o=this.o&&p,!p)Ri(this.i,this.l,N,"[Invalid Chunked Response]"),dr(this),zt(this);else if(N.length>0&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.aa&&!De.P&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),de(De),De.P=!0,Jt(11))}}else Ri(this.i,this.l,N,null),qi(this,N);st==4&&dr(this),this.o&&!this.K&&(st==4?ys(this.j,this):(this.o=!1,js(this)))}else Er(this.g),S==400&&N.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),dr(this),zt(this)}}}catch{}finally{}};function fr(p){if(!Ft(p))return p.g.la();const S=yr(p.g);if(S==="")return"";let N="";const V=S.length,re=ni(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return dr(p),zt(p),"";p.h.i=new E.TextDecoder}for(let me=0;me<V;me++)p.h.h=!0,N+=p.h.i.decode(S[me],{stream:!(re&&me==V-1)});return S.length=0,p.h.g+=N,p.C=0,p.h.g}function Ft(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function ul(p,S){var N=p.C,V=S.indexOf(`
`,N);return V==-1?mn:(N=Number(S.substring(N,V)),isNaN(N)?fs:(V+=1,V+N>S.length?mn:(S=S.slice(V,V+N),p.C=V+N,S)))}Ve.prototype.cancel=function(){this.K=!0,dr(this)};function js(p){p.T=Date.now()+p.H,qn(p,p.H)}function qn(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=$r(A(p.aa,p),S)}function hn(p){p.D&&(E.clearTimeout(p.D),p.D=null)}Ve.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Sa(this.i,this.B),this.M!=2&&(Jr(),Jt(17)),dr(this),this.m=2,zt(this)):qn(this,this.T-p)};function zt(p){p.j.I==0||p.K||ys(p.j,p)}function dr(p){hn(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,ti(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function qi(p,S){try{var N=p.j;if(N.I!=0&&(N.g==p||Zi(N.h,p))){if(!p.L&&Zi(N.h,p)&&N.I==3){try{var V=N.Ba.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var re=V;if(re[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<p.F)wn(N),_r(N);else break e;Co(N),Jt(18)}}else N.xa=re[1],0<N.xa-N.K&&re[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=$r(A(N.Va,N),6e3));Pt(N.h)<=1&&N.ta&&(N.ta=void 0)}else is(N,11)}else if((p.L||N.g==p)&&wn(N),!j(S))for(re=N.Ba.g.parse(S),S=0;S<re.length;S++){let Vt=re[S];const Tn=Vt[0];if(!(Tn<=N.K))if(N.K=Tn,Vt=Vt[1],N.I==2)if(Vt[0]=="c"){N.M=Vt[1],N.ba=Vt[2];const Mi=Vt[3];Mi!=null&&(N.ka=Mi,N.j.info("VER="+N.ka));const kr=Vt[4];kr!=null&&(N.za=kr,N.j.info("SVER="+N.za));const fi=Vt[5];fi!=null&&typeof fi=="number"&&fi>0&&(V=1.5*fi,N.O=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const Yi=p.g;if(Yi){const wr=Yi.g?Yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wr){var me=V.h;me.g||wr.indexOf("spdy")==-1&&wr.indexOf("quic")==-1&&wr.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Ia(me,me.h),me.h=null))}if(V.G){const rs=Yi.g?Yi.g.getResponseHeader("X-HTTP-Session-Id"):null;rs&&(V.wa=rs,et(V.J,V.G,rs))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-p.F,N.j.info("Handshake RTT: "+N.T+"ms")),V=N;var De=p;if(V.na=fl(V,V.L?V.ba:null,V.W),De.L){_t(V.h,De);var st=De,sn=V.O;sn&&(st.H=sn),st.D&&(hn(st),js(st)),V.g=De}else Ar(V);N.i.length>0&&$s(N)}else Vt[0]!="stop"&&Vt[0]!="close"||is(N,7);else N.I==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?is(N,7):ms(N):Vt[0]!="noop"&&N.l&&N.l.qa(Vt),N.A=0)}}Jr(4)}catch{}}var wo=class{constructor(p,S){this.g=p,this.map=S}};function xe(p){this.l=p||10,E.PerformanceNavigationTiming?(p=E.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(E.chrome&&E.chrome.loadTimes&&E.chrome.loadTimes()&&E.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qs(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Pt(p){return p.h?1:p.g?p.g.size:0}function Zi(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Ia(p,S){p.g?p.g.add(S):p.h=S}function _t(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}xe.prototype.cancel=function(){if(this.i=Tt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Tt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const N of p.g.values())S=S.concat(N.G);return S}return G(p.i)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xo(p,S){if(p){p=p.split("&");for(let N=0;N<p.length;N++){const V=p[N].indexOf("=");let re,me=null;V>=0?(re=p[N].substring(0,V),me=p[N].substring(V+1)):re=p[N],S(re,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function Xi(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Xi?(this.l=p.l,nn(this,p.j),this.o=p.o,this.g=p.g,Oi(this,p.u),this.h=p.h,ds(this,To(p.i)),this.m=p.m):p&&(S=String(p).match(mt))?(this.l=!1,nn(this,S[1]||"",!0),this.o=Xs(S[2]||""),this.g=Xs(S[3]||"",!0),Oi(this,S[4]),this.h=Xs(S[5]||"",!0),ds(this,S[6]||"",!0),this.m=Xs(S[7]||"")):(this.l=!1,this.i=new yn(null,this.l))}Xi.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(pn(S,Ln,!0),":");var N=this.g;return(N||S=="file")&&(p.push("//"),(S=this.o)&&p.push(pn(S,Ln,!0),"@"),p.push(Gi(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&p.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(pn(N,N.charAt(0)=="/"?U:ae,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",pn(N,Sn)),p.join("")},Xi.prototype.resolve=function(p){const S=cn(this);let N=!!p.j;N?nn(S,p.j):N=!!p.o,N?S.o=p.o:N=!!p.g,N?S.g=p.g:N=p.u!=null;var V=p.h;if(N)Oi(S,p.u);else if(N=!!p.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var re=S.h.lastIndexOf("/");re!=-1&&(V=S.h.slice(0,re+1)+V)}if(re=V,re==".."||re==".")V="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){V=re.lastIndexOf("/",0)==0,re=re.split("/");const me=[];for(let De=0;De<re.length;){const st=re[De++];st=="."?V&&De==re.length&&me.push(""):st==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),V&&De==re.length&&me.push("")):(me.push(st),V=!0)}V=me.join("/")}else V=re}return N?S.h=V:N=p.i.toString()!=="",N?ds(S,To(p.i)):N=!!p.m,N&&(S.m=p.m),S};function cn(p){return new Xi(p)}function nn(p,S,N){p.j=N?Xs(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function Oi(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function ds(p,S,N){S instanceof yn?(p.i=S,Ks(p.i,p.l)):(N||(S=pn(S,Xe)),p.i=new yn(S,p.l))}function et(p,S,N){p.i.set(S,N)}function ui(p){return et(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Xs(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function pn(p,S,N){return typeof p=="string"?(p=encodeURI(p).replace(S,Ht),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Ht(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ln=/[#\/\?@]/g,ae=/[#\?:]/g,U=/[#\?]/g,Xe=/[#\?@]/g,Sn=/#/g;function yn(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function es(p){p.g||(p.g=new Map,p.h=0,p.i&&xo(p.i,function(S,N){p.add(decodeURIComponent(S.replace(/\+/g," ")),N)}))}r=yn.prototype,r.add=function(p,S){es(this),this.i=null,p=gr(this,p);let N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(S),this.h+=1,this};function Ys(p,S){es(p),S=gr(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function hi(p,S){return es(p),S=gr(p,S),p.g.has(S)}r.forEach=function(p,S){es(this),this.g.forEach(function(N,V){N.forEach(function(re){p.call(S,re,V,this)},this)},this)};function Ye(p,S){es(p);let N=[];if(typeof S=="string")hi(p,S)&&(N=N.concat(p.g.get(gr(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)N=N.concat(p[S]);return N}r.set=function(p,S){return es(this),this.i=null,p=gr(this,p),hi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},r.get=function(p,S){return p?(p=Ye(this,p),p.length>0?String(p[0]):S):S};function rn(p,S,N){Ys(p,S),N.length>0&&(p.i=null,p.g.set(gr(p,S),G(N)),p.h+=N.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let V=0;V<S.length;V++){var N=S[V];const re=Gi(N);N=Ye(this,N);for(let me=0;me<N.length;me++){let De=re;N[me]!==""&&(De+="="+Gi(N[me])),p.push(De)}}return this.i=p.join("&")};function To(p){const S=new yn;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function gr(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function Ks(p,S){S&&!p.j&&(es(p),p.i=null,p.g.forEach(function(N,V){const re=V.toLowerCase();V!=re&&(Ys(this,V),rn(this,re,N))},p)),p.j=S}function gs(p,S){const N=new Qn;if(E.Image){const V=new Image;V.onload=b(Ai,N,"TestLoadImage: loaded",!0,S,V),V.onerror=b(Ai,N,"TestLoadImage: error",!1,S,V),V.onabort=b(Ai,N,"TestLoadImage: abort",!1,S,V),V.ontimeout=b(Ai,N,"TestLoadImage: timeout",!1,S,V),E.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=p}else S(!1)}function Mr(p,S){const N=new Qn,V=new AbortController,re=setTimeout(()=>{V.abort(),Ai(N,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:V.signal}).then(me=>{clearTimeout(re),me.ok?Ai(N,"TestPingServer: ok",!0,S):Ai(N,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),Ai(N,"TestPingServer: error",!1,S)})}function Ai(p,S,N,V,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),V(N)}catch{}}function In(){this.g=new ll}function mr(p){this.i=p.Sb||null,this.h=p.ab||!1}R(mr,zs),mr.prototype.g=function(){return new Di(this.i,this.h)};function Di(p,S){Ze.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}R(Di,Ze),r=Di.prototype,r.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,tt(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||E).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,tt(this)),this.g&&(this.readyState=3,tt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof E.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ke(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ke(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?wi(this):tt(this),this.readyState==3&&Ke(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,wi(this))},r.Na=function(p){this.g&&(this.response=p,wi(this))},r.ga=function(){this.g&&wi(this)};function wi(p){p.readyState=4,p.l=null,p.j=null,p.B=null,tt(p)}r.setRequestHeader=function(p,S){this.A.append(p,S)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var N=S.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=S.next();return p.join(`\r
`)};function tt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function fn(p){let S="";return ht(p,function(N,V){S+=V,S+=":",S+=N,S+=`\r
`}),S}function Ji(p,S,N){e:{for(V in N){var V=!1;break e}V=!0}V||(N=fn(N),typeof p=="string"?N!=null&&Gi(N):et(p,S,N))}function Qt(p){Ze.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}R(Qt,Ze);var Ws=/^https?$/i,Pr=["POST","PUT"];r=Qt.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,S,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ur.g(),this.g.onreadystatechange=P(A(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(me){Qs(this,me);return}if(p=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var re in V)N.set(re,V[re]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const me of V.keys())N.set(me,V.get(me));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(me=>me.toLowerCase()=="content-type"),re=E.FormData&&p instanceof E.FormData,!(Array.prototype.indexOf.call(Pr,S,void 0)>=0)||V||re||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,De]of N)this.g.setRequestHeader(me,De);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(me){Qs(this,me)}};function Qs(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,pr(p),En(p)}function pr(p){p.A||(p.A=!0,vn(p,"complete"),vn(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,vn(this,"complete"),vn(this,"abort"),En(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),Qt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ts(this):this.Xa())},r.Xa=function(){ts(this)};function ts(p){if(p.h&&typeof d<"u"){if(p.v&&ni(p)==4)setTimeout(p.Ca.bind(p),0);else if(vn(p,"readystatechange"),ni(p)==4){p.h=!1;try{const me=p.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var N;if(!(N=S)){var V;if(V=me===0){let De=String(p.D).match(mt)[1]||null;!De&&E.self&&E.self.location&&(De=E.self.location.protocol.slice(0,-1)),V=!Ws.test(De?De.toLowerCase():"")}N=V}if(N)vn(p,"complete"),vn(p,"success");else{p.o=6;try{var re=ni(p)>2?p.g.statusText:""}catch{re=""}p.l=re+" ["+p.ca()+"]",pr(p)}}finally{En(p)}}}}function En(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const N=p.g;p.g=null,S||vn(p,"ready");try{N.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ni(p){return p.g?p.g.readyState:0}r.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),qt(S)}};function yr(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Er(p){const S={};p=(p.g&&ni(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<p.length;V++){if(j(p[V]))continue;var N=Ni(p[V]);const re=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const me=S[re]||[];S[re]=me,me.push(N)}Z(S,function(V){return V.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kn(p,S,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||S}function Zs(p){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kn("baseRetryDelayMs",5e3,p),this.Za=kn("retryDelaySeedMs",1e4,p),this.Ta=kn("forwardChannelMaxRetries",2,p),this.va=kn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new xe(p&&p.concurrentRequestLimit),this.Ba=new In,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Zs.prototype,r.ka=8,r.I=1,r.connect=function(p,S,N,V){Jt(0),this.W=p,this.H=S||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.J=fl(this,null,this.W),$s(this)};function ms(p){if(Js(p),p.I==3){var S=p.V++,N=cn(p.J);if(et(N,"SID",p.M),et(N,"RID",S),et(N,"TYPE","terminate"),ps(p,N),S=new Ve(p,p.j,S),S.M=2,S.A=ui(cn(N)),N=!1,E.navigator&&E.navigator.sendBeacon)try{N=E.navigator.sendBeacon(S.A.toString(),"")}catch{}!N&&E.Image&&(new Image().src=S.A,N=!0),N||(S.g=Es(S.j,null),S.g.ea(S.A)),S.F=Date.now(),js(S)}hl(p)}function _r(p){p.g&&(de(p),p.g.cancel(),p.g=null)}function Js(p){_r(p),p.v&&(E.clearTimeout(p.v),p.v=null),wn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&E.clearTimeout(p.m),p.m=null)}function $s(p){if(!qs(p.h)&&!p.m){p.m=!0;var S=p.Ea;ke||z(),Ue||(ke(),Ue=!0),F.add(S,p),p.D=0}}function uc(p,S){return Pt(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=$r(A(p.Ea,p,S),vo(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const re=new Ve(this,this.j,p);let me=this.o;if(this.U&&(me?(me=be(me),Be(me,this.U)):me=this.U),this.u!==null||this.R||(re.J=me,me=null),this.S)e:{for(var S=0,N=0;N<this.i.length;N++){t:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,S>4096){S=N;break e}if(S===4096||N===this.i.length-1){S=N+1;break e}}S=1e3}else S=1e3;S=ns(this,re,S),N=cn(this.J),et(N,"RID",p),et(N,"CVER",22),this.G&&et(N,"X-HTTP-Session-Id",this.G),ps(this,N),me&&(this.R?S="headers="+Gi(fn(me))+"&"+S:this.u&&Ji(N,this.u,me)),Ia(this.h,re),this.Ra&&et(N,"TYPE","init"),this.S?(et(N,"$req",S),et(N,"SID","null"),re.U=!0,_i(re,N,null)):_i(re,N,S),this.I=2}}else this.I==3&&(p?Bt(this,p):this.i.length==0||qs(this.h)||Bt(this))};function Bt(p,S){var N;S?N=S.l:N=p.V++;const V=cn(p.J);et(V,"SID",p.M),et(V,"RID",N),et(V,"AID",p.K),ps(p,V),p.u&&p.o&&Ji(V,p.u,p.o),N=new Ve(p,p.j,N,p.D+1),p.u===null&&(N.J=p.o),S&&(p.i=S.G.concat(p.i)),S=ns(p,N,1e3),N.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Ia(p.h,N),_i(N,V,S)}function ps(p,S){p.H&&ht(p.H,function(N,V){et(S,V,N)}),p.l&&ht({},function(N,V){et(S,V,N)})}function ns(p,S,N){N=Math.min(p.i.length,N);const V=p.l?A(p.l.Ka,p.l,p):null;e:{var re=p.i;let st=-1;for(;;){const sn=["count="+N];st==-1?N>0?(st=re[0].g,sn.push("ofs="+st)):st=0:sn.push("ofs="+st);let Vt=!0;for(let Tn=0;Tn<N;Tn++){var me=re[Tn].g;const Mi=re[Tn].map;if(me-=st,me<0)st=Math.max(0,re[Tn].g-100),Vt=!1;else try{me="req"+me+"_"||"";try{var De=Mi instanceof Map?Mi:Object.entries(Mi);for(const[kr,fi]of De){let Yi=fi;C(fi)&&(Yi=Gn(fi)),sn.push(me+kr+"="+encodeURIComponent(Yi))}}catch(kr){throw sn.push(me+"type="+encodeURIComponent("_badmap")),kr}}catch{V&&V(Mi)}}if(Vt){De=sn.join("&");break e}}De=void 0}return p=p.i.splice(0,N),S.G=p,De}function Ar(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;ke||z(),Ue||(ke(),Ue=!0),F.add(S,p),p.A=0}}function Co(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=$r(A(p.Da,p),vo(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,ft(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=$r(A(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),_r(this),ft(this))};function de(p){p.B!=null&&(E.clearTimeout(p.B),p.B=null)}function ft(p){p.g=new Ve(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=cn(p.na);et(S,"RID","rpc"),et(S,"SID",p.M),et(S,"AID",p.K),et(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&et(S,"TO",p.ia),et(S,"TYPE","xmlhttp"),ps(p,S),p.u&&p.o&&Ji(S,p.u,p.o),p.O&&(p.g.H=p.O);var N=p.g;p=p.ba,N.M=1,N.A=ui(cn(S)),N.u=null,N.R=!0,hr(N,p)}r.Va=function(){this.C!=null&&(this.C=null,_r(this),Co(this),Jt(19))};function wn(p){p.C!=null&&(E.clearTimeout(p.C),p.C=null)}function ys(p,S){var N=null;if(p.g==S){wn(p),de(p),p.g=null;var V=2}else if(Zi(p.h,S))N=S.G,_t(p.h,S),V=1;else return;if(p.I!=0){if(S.o)if(V==1){N=S.u?S.u.length:0,S=Date.now()-S.F;var re=p.D;V=Dr(),vn(V,new Ao(V,N)),$s(p)}else Ar(p);else if(re=S.m,re==3||re==0&&S.X>0||!(V==1&&uc(p,S)||V==2&&Co(p)))switch(N&&N.length>0&&(S=p.h,S.i=S.i.concat(N)),re){case 1:is(p,5);break;case 4:is(p,10);break;case 3:is(p,6);break;default:is(p,2)}}}function vo(p,S){let N=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(N*=2),N*S}function is(p,S){if(p.j.info("Error code "+S),S==2){var N=A(p.bb,p),V=p.Ua;const re=!V;V=new Xi(V||"//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||nn(V,"https"),ui(V),re?gs(V.toString(),N):Mr(V.toString(),N)}else Jt(2);p.I=0,p.l&&p.l.pa(S),hl(p),Js(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function hl(p){if(p.I=0,p.ja=[],p.l){const S=Tt(p.h);(S.length!=0||p.i.length!=0)&&(Q(p.ja,S),Q(p.ja,p.i),p.h.i.length=0,G(p.i),p.i.length=0),p.l.oa()}}function fl(p,S,N){var V=N instanceof Xi?cn(N):new Xi(N);if(V.g!="")S&&(V.g=S+"."+V.g),Oi(V,V.u);else{var re=E.location;V=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;const me=new Xi(null);V&&nn(me,V),S&&(me.g=S),re&&Oi(me,re),N&&(me.h=N),V=me}return N=p.G,S=p.wa,N&&S&&et(V,N,S),et(V,"VER",p.ka),ps(p,V),V}function Es(p,S,N){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new Qt(new mr({ab:N})):new Qt(p.ma),S.Fa(p.L),S}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xn(){}r=xn.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function _s(){}_s.prototype.g=function(p,S){return new Ct(p,S)};function Ct(p,S){Ze.call(this),this.g=new Zs(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!j(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!j(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Rt(this)}R(Ct,Ze),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){ms(this.g)},Ct.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.v&&(N={},N.__data__=Gn(p),p=N);S.i.push(new wo(S.Ya++,p)),S.I==3&&$s(S)},Ct.prototype.N=function(){this.g.l=null,delete this.j,ms(this.g),delete this.g,Ct.Z.N.call(this)};function As(p){Pe.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const N in S){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}R(As,Pe);function Lr(){Yt.call(this),this.status=1}R(Lr,Yt);function Rt(p){this.g=p}R(Rt,xn),Rt.prototype.ra=function(){vn(this.g,"a")},Rt.prototype.qa=function(p){vn(this.g,new As(p))},Rt.prototype.pa=function(p){vn(this.g,new Lr)},Rt.prototype.oa=function(){vn(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,HA=function(){return new _s},zA=function(){return Dr()},FA=Et,N0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bn.NO_ERROR=0,bn.TIMEOUT=8,bn.HTTP_ERROR=6,Jh=bn,gn.COMPLETE="complete",UA=gn,cl.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,$c=cl,Qt.prototype.listenOnce=Qt.prototype.K,Qt.prototype.getLastError=Qt.prototype.Ha,Qt.prototype.getLastErrorCode=Qt.prototype.ya,Qt.prototype.getStatus=Qt.prototype.ca,Qt.prototype.getResponseJson=Qt.prototype.La,Qt.prototype.getResponseText=Qt.prototype.la,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Fa,VA=Qt}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const Yy="@firebase/firestore",Ky="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Uf("@firebase/firestore");function zl(){return Zo.logLevel}function He(r,...e){if(Zo.logLevel<=Ot.DEBUG){const t=e.map(Ag);Zo.debug(`Firestore (${ac}): ${r}`,...t)}}function xa(r,...e){if(Zo.logLevel<=Ot.ERROR){const t=e.map(Ag);Zo.error(`Firestore (${ac}): ${r}`,...t)}}function Jl(r,...e){if(Zo.logLevel<=Ot.WARN){const t=e.map(Ag);Zo.warn(`Firestore (${ac}): ${r}`,...t)}}function Ag(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(r,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,GA(r,a,t)}function GA(r,e,t){let a=`FIRESTORE (${ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw xa(a),new Error(a)}function Zt(r,e,t,a){let u="Unexpected state";typeof t=="string"?u=t:a=t,r||GA(e,u,a)}function gt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends Yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Fi.UNAUTHENTICATED)))}shutdown(){}}class L4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k4{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zt(this.o===void 0,42304);let a=this.i;const u=x=>this.i!==a?(a=this.i,t(x)):Promise.resolve();let d=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new lo,e.enqueueRetryable((()=>u(this.currentUser)))};const E=()=>{const x=d;e.enqueueRetryable((async()=>{await x.promise,await u(this.currentUser)}))},C=x=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit((x=>C(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?C(x):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new lo)}}),0),E()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Zt(typeof a.accessToken=="string",31837,{l:a}),new jA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new Fi(e)}}class B4{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class V4{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new B4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Fi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zt(this.o===void 0,3512);const a=d=>{d.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const E=d.token!==this.m;return this.m=d.token,He("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>a(d)))};const u=d=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>u(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?u(d):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Zt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<r;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const u=F4(40);for(let d=0;d<u.length;++d)a.length<20&&u[d]<t&&(a+=e.charAt(u[d]%62))}return a}}function Dt(r,e){return r<e?-1:r>e?1:0}function O0(r,e){const t=Math.min(r.length,e.length);for(let a=0;a<t;a++){const u=r.charAt(a),d=e.charAt(a);if(u!==d)return d0(u)===d0(d)?Dt(u,d):d0(u)?1:-1}return Dt(r.length,e.length)}const z4=55296,H4=57343;function d0(r){const e=r.charCodeAt(0);return e>=z4&&e<=H4}function $l(r,e,t){return r.length===e.length&&r.every(((a,u)=>t(a,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="__name__";class Is{constructor(e,t,a){t===void 0?t=0:t>e.length&&rt(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&rt(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let u=0;u<a;u++){const d=Is.compareSegments(e.get(u),t.get(u));if(d!==0)return d}return Dt(e.length,t.length)}static compareSegments(e,t){const a=Is.isNumericId(e),u=Is.isNumericId(t);return a&&!u?-1:!a&&u?1:a&&u?Is.extractNumericId(e).compare(Is.extractNumericId(t)):O0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class Nn extends Is{construct(e,t,a){return new Nn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new We(Re.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((u=>u.length>0)))}return new Nn(t)}static emptyPath(){return new Nn([])}}const G4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends Is{construct(e,t,a){return new Si(e,t,a)}static isValidIdentifier(e){return G4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qy}static keyField(){return new Si([Qy])}static fromServerFormat(e){const t=[];let a="",u=0;const d=()=>{if(a.length===0)throw new We(Re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let E=!1;for(;u<e.length;){const C=e[u];if(C==="\\"){if(u+1===e.length)throw new We(Re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[u+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new We(Re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=x,u+=2}else C==="`"?(E=!E,u++):C!=="."||E?(a+=C,u++):(d(),u++)}if(d(),E)throw new We(Re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Si(t)}static emptyPath(){return new Si([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Nn.fromString(e))}static fromName(e){return new Je(Nn.fromString(e).popFirst(5))}static empty(){return new Je(Nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Nn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(r,e,t){if(!t)throw new We(Re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function q4(r,e,t,a){if(e===!0&&a===!0)throw new We(Re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Zy(r){if(!Je.isDocumentKey(r))throw new We(Re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function qA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xg(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":rt(12329,{type:typeof r})}function Jo(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new We(Re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xg(r);throw new We(Re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,e){const t={typeString:r};return e&&(t.value=e),t}function Nu(r,e){if(!qA(r))throw new We(Re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const u=e[a].typeString,d="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){t=`JSON missing required field: '${a}'`;break}const E=r[a];if(u&&typeof E!==u){t=`JSON field '${a}' must be a ${u}.`;break}if(d!==void 0&&E!==d.value){t=`Expected '${a}' field to equal '${d.value}'`;break}}if(t)throw new We(Re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=-62135596800,$y=1e6;class An{static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*$y);return new An(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new We(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new We(Re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Jy)throw new We(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$y}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:An._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,An._jsonSchema))return new An(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}An._jsonSchemaVersion="firestore/timestamp/1.0",An._jsonSchema={type:ei("string",An._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new An(0,0))}static max(){return new ut(new An(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function X4(r,e){const t=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,u=ut.fromTimestamp(a===1e9?new An(t+1,0):new An(t,a));return new uo(u,Je.empty(),e)}function Y4(r){return new uo(r.readTime,r.key,mu)}class uo{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new uo(ut.min(),Je.empty(),mu)}static max(){return new uo(ut.max(),Je.empty(),mu)}}function K4(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Je.comparator(r.documentKey,e.documentKey),t!==0?t:Dt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(r){if(r.code!==Re.FAILED_PRECONDITION||r.message!==W4)throw r;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve(((a,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(a,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(a,u)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.reject(t)}static resolve(e){return new ve(((t,a)=>{t(e)}))}static reject(e){return new ve(((t,a)=>{a(e)}))}static waitFor(e){return new ve(((t,a)=>{let u=0,d=0,E=!1;e.forEach((C=>{++u,C.next((()=>{++d,E&&d===u&&t()}),(x=>a(x)))})),E=!0,d===u&&t()}))}static or(e){let t=ve.resolve(!1);for(const a of e)t=t.next((u=>u?ve.resolve(u):a()));return t}static forEach(e,t){const a=[];return e.forEach(((u,d)=>{a.push(t.call(this,u,d))})),this.waitFor(a)}static mapArray(e,t){return new ve(((a,u)=>{const d=e.length,E=new Array(d);let C=0;for(let x=0;x<d;x++){const A=x;t(e[A]).next((b=>{E[A]=b,++C,C===d&&a(E)}),(b=>u(b)))}}))}static doWhile(e,t){return new ve(((a,u)=>{const d=()=>{e()===!0?t().next((()=>{d()}),u):a()};d()}))}}function Z4(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=-1;function Yf(r){return r==null}function yf(r){return r===0&&1/r==-1/0}function J4(r){return typeof r=="number"&&Number.isInteger(r)&&!yf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="";function $4(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=eE(e)),e=eR(r.get(t),e);return eE(e)}function eR(r,e){let t=e;const a=r.length;for(let u=0;u<a;u++){const d=r.charAt(u);switch(d){case"\0":t+="";break;case XA:t+="";break;default:t+=d}}return t}function eE(r){return r+XA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Eo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function YA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new Dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const u=this.comparator(e,a.key);if(u===0)return t+a.left.size;u<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,t,a,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?a(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,a,u,d){this.key=e,this.value=t,this.color=a??bi.RED,this.left=u??bi.EMPTY,this.right=d??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,u,d){return new bi(e??this.key,t??this.value,a??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let u=this;const d=a(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,a),null):d===0?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,a)),u.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),t(e,u.key)===0){if(u.right.isEmpty())return bi.EMPTY;a=u.right.min(),u=u.copy(a.key,a.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1;bi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,t,a,u,d){return this}insert(e,t,a){return new bi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const u=a.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nE(this.data.getIterator())}getIteratorFrom(e){return new nE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=a.getNext().key;if(this.comparator(u,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ci(this.comparator);return t.data=e,t}}class nE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.fields=e,e.sort(Si.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new ci(Si.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $l(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new KA("Invalid base64 string: "+d):d}})(e);return new Ii(t)}static fromUint8Array(e){const t=(function(u){let d="";for(let E=0;E<u.length;++E)d+=String.fromCharCode(u[E]);return d})(e);return new Ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let u=0;u<t.length;u++)a[u]=t.charCodeAt(u);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const tR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(r){if(Zt(!!r,39018),typeof r=="string"){let e=0;const t=tR.exec(r);if(Zt(!!t,46558,{timestamp:r}),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Kn(r.seconds),nanos:Kn(r.nanos)}}function Kn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fo(r){return typeof r=="string"?Ii.fromBase64String(r):Ii.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="server_timestamp",QA="__type__",ZA="__previous_value__",JA="__local_write_time__";function Cg(r){return(r?.mapValue?.fields||{})[QA]?.stringValue===WA}function Kf(r){const e=r.mapValue.fields[ZA];return Cg(e)?Kf(e):e}function pu(r){const e=ho(r.mapValue.fields[JA].timestampValue);return new An(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t,a,u,d,E,C,x,A,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=u,this.ssl=d,this.forceLongPolling=E,this.autoDetectLongPolling=C,this.longPollingOptions=x,this.useFetchStreams=A,this.isUsingEmulator=b}}const Ef="(default)";class yu{constructor(e,t){this.projectId=e,this.database=t||Ef}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="__type__",iR="__max__",zh={mapValue:{}},ew="__vector__",_f="value";function go(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cg(r)?4:sR(r)?9007199254740991:rR(r)?10:11:rt(28295,{value:r})}function ks(r,e){if(r===e)return!0;const t=go(r);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return pu(r).isEqual(pu(e));case 3:return(function(u,d){if(typeof u.timestampValue=="string"&&typeof d.timestampValue=="string"&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const E=ho(u.timestampValue),C=ho(d.timestampValue);return E.seconds===C.seconds&&E.nanos===C.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(u,d){return fo(u.bytesValue).isEqual(fo(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(u,d){return Kn(u.geoPointValue.latitude)===Kn(d.geoPointValue.latitude)&&Kn(u.geoPointValue.longitude)===Kn(d.geoPointValue.longitude)})(r,e);case 2:return(function(u,d){if("integerValue"in u&&"integerValue"in d)return Kn(u.integerValue)===Kn(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const E=Kn(u.doubleValue),C=Kn(d.doubleValue);return E===C?yf(E)===yf(C):isNaN(E)&&isNaN(C)}return!1})(r,e);case 9:return $l(r.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return(function(u,d){const E=u.mapValue.fields||{},C=d.mapValue.fields||{};if(tE(E)!==tE(C))return!1;for(const x in E)if(E.hasOwnProperty(x)&&(C[x]===void 0||!ks(E[x],C[x])))return!1;return!0})(r,e);default:return rt(52216,{left:r})}}function Eu(r,e){return(r.values||[]).find((t=>ks(t,e)))!==void 0}function ec(r,e){if(r===e)return 0;const t=go(r),a=go(e);if(t!==a)return Dt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dt(r.booleanValue,e.booleanValue);case 2:return(function(d,E){const C=Kn(d.integerValue||d.doubleValue),x=Kn(E.integerValue||E.doubleValue);return C<x?-1:C>x?1:C===x?0:isNaN(C)?isNaN(x)?0:-1:1})(r,e);case 3:return iE(r.timestampValue,e.timestampValue);case 4:return iE(pu(r),pu(e));case 5:return O0(r.stringValue,e.stringValue);case 6:return(function(d,E){const C=fo(d),x=fo(E);return C.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(d,E){const C=d.split("/"),x=E.split("/");for(let A=0;A<C.length&&A<x.length;A++){const b=Dt(C[A],x[A]);if(b!==0)return b}return Dt(C.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,E){const C=Dt(Kn(d.latitude),Kn(E.latitude));return C!==0?C:Dt(Kn(d.longitude),Kn(E.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return rE(r.arrayValue,e.arrayValue);case 10:return(function(d,E){const C=d.fields||{},x=E.fields||{},A=C[_f]?.arrayValue,b=x[_f]?.arrayValue,R=Dt(A?.values?.length||0,b?.values?.length||0);return R!==0?R:rE(A,b)})(r.mapValue,e.mapValue);case 11:return(function(d,E){if(d===zh.mapValue&&E===zh.mapValue)return 0;if(d===zh.mapValue)return 1;if(E===zh.mapValue)return-1;const C=d.fields||{},x=Object.keys(C),A=E.fields||{},b=Object.keys(A);x.sort(),b.sort();for(let R=0;R<x.length&&R<b.length;++R){const P=O0(x[R],b[R]);if(P!==0)return P;const G=ec(C[x[R]],A[b[R]]);if(G!==0)return G}return Dt(x.length,b.length)})(r.mapValue,e.mapValue);default:throw rt(23264,{he:t})}}function iE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Dt(r,e);const t=ho(r),a=ho(e),u=Dt(t.seconds,a.seconds);return u!==0?u:Dt(t.nanos,a.nanos)}function rE(r,e){const t=r.values||[],a=e.values||[];for(let u=0;u<t.length&&u<a.length;++u){const d=ec(t[u],a[u]);if(d)return d}return Dt(t.length,a.length)}function tc(r){return D0(r)}function D0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const a=ho(t);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return fo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Je.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let a="[",u=!0;for(const d of t.values||[])u?u=!1:a+=",",a+=D0(d);return a+"]"})(r.arrayValue):"mapValue"in r?(function(t){const a=Object.keys(t.fields||{}).sort();let u="{",d=!0;for(const E of a)d?d=!1:u+=",",u+=`${E}:${D0(t.fields[E])}`;return u+"}"})(r.mapValue):rt(61005,{value:r})}function $h(r){switch(go(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(r);return e?16+$h(e):16;case 5:return 2*r.stringValue.length;case 6:return fo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((u,d)=>u+$h(d)),0)})(r.arrayValue);case 10:case 11:return(function(a){let u=0;return Eo(a.fields,((d,E)=>{u+=d.length+$h(E)})),u})(r.mapValue);default:throw rt(13486,{value:r})}}function M0(r){return!!r&&"integerValue"in r}function vg(r){return!!r&&"arrayValue"in r}function sE(r){return!!r&&"nullValue"in r}function aE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ef(r){return!!r&&"mapValue"in r}function rR(r){return(r?.mapValue?.fields||{})[$A]?.stringValue===ew}function ou(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Eo(r.mapValue.fields,((t,a)=>e.mapValue.fields[t]=ou(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(r.arrayValue.values[t]);return e}return{...r}}function sR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=Si.emptyPath(),a={},u=[];e.forEach(((E,C)=>{if(!t.isImmediateParentOf(C)){const x=this.getFieldsMap(t);this.applyChanges(x,a,u),a={},u=[],t=C.popLast()}E?a[C.lastSegment()]=ou(E):u.push(C.lastSegment())}));const d=this.getFieldsMap(t);this.applyChanges(d,a,u)}delete(e){const t=this.field(e.popLast());ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let u=t.mapValue.fields[e.get(a)];ef(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,a){Eo(t,((u,d)=>e[u]=d));for(const u of a)delete e[u]}clone(){return new sr(ou(this.value))}}function tw(r){const e=[];return Eo(r.fields,((t,a)=>{const u=new Si([t]);if(ef(a)){const d=tw(a.mapValue).fields;if(d.length===0)e.push(u);else for(const E of d)e.push(u.child(E))}else e.push(u)})),new Nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,a,u,d,E,C){this.key=e,this.documentType=t,this.version=a,this.readTime=u,this.createTime=d,this.data=E,this.documentState=C}static newInvalidDocument(e){return new zi(e,0,ut.min(),ut.min(),ut.min(),sr.empty(),0)}static newFoundDocument(e,t,a,u){return new zi(e,1,t,ut.min(),a,u,0)}static newNoDocument(e,t){return new zi(e,2,t,ut.min(),ut.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new zi(e,3,t,ut.min(),ut.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.position=e,this.inclusive=t}}function oE(r,e,t){let a=0;for(let u=0;u<r.position.length;u++){const d=e[u],E=r.position[u];if(d.field.isKeyField()?a=Je.comparator(Je.fromName(E.referenceValue),t.key):a=ec(E,t.data.field(d.field)),d.dir==="desc"&&(a*=-1),a!==0)break}return a}function lE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ks(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t="asc"){this.field=e,this.dir=t}}function aR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{}class oi extends nw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new lR(e,t,a):t==="array-contains"?new hR(e,a):t==="in"?new fR(e,a):t==="not-in"?new dR(e,a):t==="array-contains-any"?new gR(e,a):new oi(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new cR(e,a):new uR(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ec(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bs extends nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bs(e,t)}matches(e){return iw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iw(r){return r.op==="and"}function rw(r){return oR(r)&&iw(r)}function oR(r){for(const e of r.filters)if(e instanceof Bs)return!1;return!0}function P0(r){if(r instanceof oi)return r.field.canonicalString()+r.op.toString()+tc(r.value);if(rw(r))return r.filters.map((e=>P0(e))).join(",");{const e=r.filters.map((t=>P0(t))).join(",");return`${r.op}(${e})`}}function sw(r,e){return r instanceof oi?(function(a,u){return u instanceof oi&&a.op===u.op&&a.field.isEqual(u.field)&&ks(a.value,u.value)})(r,e):r instanceof Bs?(function(a,u){return u instanceof Bs&&a.op===u.op&&a.filters.length===u.filters.length?a.filters.reduce(((d,E,C)=>d&&sw(E,u.filters[C])),!0):!1})(r,e):void rt(19439)}function aw(r){return r instanceof oi?(function(t){return`${t.field.canonicalString()} ${t.op} ${tc(t.value)}`})(r):r instanceof Bs?(function(t){return t.op.toString()+" {"+t.getFilters().map(aw).join(" ,")+"}"})(r):"Filter"}class lR extends oi{constructor(e,t,a){super(e,t,a),this.key=Je.fromName(a.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.matchesComparison(t)}}class cR extends oi{constructor(e,t){super(e,"in",t),this.keys=ow("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uR extends oi{constructor(e,t){super(e,"not-in",t),this.keys=ow("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ow(r,e){return(e.arrayValue?.values||[]).map((t=>Je.fromName(t.referenceValue)))}class hR extends oi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vg(t)&&Eu(t.arrayValue,this.value)}}class fR extends oi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}}class dR extends oi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}}class gR extends oi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Eu(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t=null,a=[],u=[],d=null,E=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=u,this.limit=d,this.startAt=E,this.endAt=C,this.Te=null}}function cE(r,e=null,t=[],a=[],u=null,d=null,E=null){return new mR(r,e,t,a,u,d,E)}function bg(r){const e=gt(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>P0(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(d){return d.field.canonicalString()+d.dir})(a))).join(","),Yf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>tc(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>tc(a))).join(",")),e.Te=t}return e.Te}function Sg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!aR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!sw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!lE(r.startAt,e.startAt)&&lE(r.endAt,e.endAt)}function L0(r){return Je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t=null,a=[],u=[],d=null,E="F",C=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=u,this.limit=d,this.limitType=E,this.startAt=C,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pR(r,e,t,a,u,d,E,C){return new Wf(r,e,t,a,u,d,E,C)}function Ig(r){return new Wf(r)}function uE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yR(r){return r.collectionGroup!==null}function lu(r){const e=gt(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),t.add(d.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(E){let C=new ci(Si.comparator);return E.filters.forEach((x=>{x.getFlattenedFilters().forEach((A=>{A.isInequality()&&(C=C.add(A.field))}))})),C})(e).forEach((d=>{t.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new wf(d,a))})),t.has(Si.keyField().canonicalString())||e.Ie.push(new wf(Si.keyField(),a))}return e.Ie}function Ns(r){const e=gt(r);return e.Ee||(e.Ee=ER(e,lu(r))),e.Ee}function ER(r,e){if(r.limitType==="F")return cE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((u=>{const d=u.dir==="desc"?"asc":"desc";return new wf(u.field,d)}));const t=r.endAt?new Af(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Af(r.startAt.position,r.startAt.inclusive):null;return cE(r.path,r.collectionGroup,e,r.filters,r.limit,t,a)}}function k0(r,e,t){return new Wf(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Qf(r,e){return Sg(Ns(r),Ns(e))&&r.limitType===e.limitType}function lw(r){return`${bg(Ns(r))}|lt:${r.limitType}`}function Hl(r){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((u=>aw(u))).join(", ")}]`),Yf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((u=>(function(E){return`${E.field.canonicalString()} (${E.dir})`})(u))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((u=>tc(u))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((u=>tc(u))).join(",")),`Target(${a})`})(Ns(r))}; limitType=${r.limitType})`}function Zf(r,e){return e.isFoundDocument()&&(function(a,u){const d=u.key.path;return a.collectionGroup!==null?u.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(d):Je.isDocumentKey(a.path)?a.path.isEqual(d):a.path.isImmediateParentOf(d)})(r,e)&&(function(a,u){for(const d of lu(a))if(!d.field.isKeyField()&&u.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(a,u){for(const d of a.filters)if(!d.matches(u))return!1;return!0})(r,e)&&(function(a,u){return!(a.startAt&&!(function(E,C,x){const A=oE(E,C,x);return E.inclusive?A<=0:A<0})(a.startAt,lu(a),u)||a.endAt&&!(function(E,C,x){const A=oE(E,C,x);return E.inclusive?A>=0:A>0})(a.endAt,lu(a),u))})(r,e)}function _R(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cw(r){return(e,t)=>{let a=!1;for(const u of lu(r)){const d=AR(u,e,t);if(d!==0)return d;a=a||u.field.isKeyField()}return 0}}function AR(r,e,t){const a=r.field.isKeyField()?Je.comparator(e.key,t.key):(function(d,E,C){const x=E.data.field(d),A=C.data.field(d);return x!==null&&A!==null?ec(x,A):rt(42886)})(r.field,e,t);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return rt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[u,d]of a)if(this.equalsFn(u,e))return d}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),u=this.inner[a];if(u===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return a.length===1?delete this.inner[t]:a.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,((t,a)=>{for(const[u,d]of a)e(u,d)}))}isEmpty(){return YA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new Dn(Je.comparator);function Ta(){return wR}const uw=new Dn(Je.comparator);function eu(...r){let e=uw;for(const t of r)e=e.insert(t.key,t);return e}function hw(r){let e=uw;return r.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Go(){return cu()}function fw(){return cu()}function cu(){return new al((r=>r.toString()),((r,e)=>r.isEqual(e)))}const xR=new Dn(Je.comparator),TR=new ci(Je.comparator);function Mt(...r){let e=TR;for(const t of r)e=e.add(t);return e}const CR=new ci(Dt);function vR(){return CR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function dw(r){return{integerValue:""+r}}function bR(r,e){return J4(e)?dw(e):Rg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function SR(r,e,t){return r instanceof _u?(function(u,d){const E={fields:{[QA]:{stringValue:WA},[JA]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&Cg(d)&&(d=Kf(d)),d&&(E.fields[ZA]=d),{mapValue:E}})(t,e):r instanceof Au?mw(r,e):r instanceof wu?pw(r,e):(function(u,d){const E=gw(u,d),C=hE(E)+hE(u.Ae);return M0(E)&&M0(u.Ae)?dw(C):Rg(u.serializer,C)})(r,e)}function IR(r,e,t){return r instanceof Au?mw(r,e):r instanceof wu?pw(r,e):t}function gw(r,e){return r instanceof xf?(function(a){return M0(a)||(function(d){return!!d&&"doubleValue"in d})(a)})(e)?e:{integerValue:0}:null}class _u extends Jf{}class Au extends Jf{constructor(e){super(),this.elements=e}}function mw(r,e){const t=yw(e);for(const a of r.elements)t.some((u=>ks(u,a)))||t.push(a);return{arrayValue:{values:t}}}class wu extends Jf{constructor(e){super(),this.elements=e}}function pw(r,e){let t=yw(e);for(const a of r.elements)t=t.filter((u=>!ks(u,a)));return{arrayValue:{values:t}}}class xf extends Jf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hE(r){return Kn(r.integerValue||r.doubleValue)}function yw(r){return vg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.field=e,this.transform=t}}function NR(r,e){return r.field.isEqual(e.field)&&(function(a,u){return a instanceof Au&&u instanceof Au||a instanceof wu&&u instanceof wu?$l(a.elements,u.elements,ks):a instanceof xf&&u instanceof xf?ks(a.Ae,u.Ae):a instanceof _u&&u instanceof _u})(r.transform,e.transform)}class OR{constructor(e,t){this.version=e,this.transformResults=t}}class Os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $f{}function Ew(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Aw(r.key,Os.none()):new Ou(r.key,r.data,Os.none());{const t=r.data,a=sr.empty();let u=new ci(Si.comparator);for(let d of e.fields)if(!u.has(d)){let E=t.field(d);E===null&&d.length>1&&(d=d.popLast(),E=t.field(d)),E===null?a.delete(d):a.set(d,E),u=u.add(d)}return new _o(r.key,a,new Nr(u.toArray()),Os.none())}}function DR(r,e,t){r instanceof Ou?(function(u,d,E){const C=u.value.clone(),x=dE(u.fieldTransforms,d,E.transformResults);C.setAll(x),d.convertToFoundDocument(E.version,C).setHasCommittedMutations()})(r,e,t):r instanceof _o?(function(u,d,E){if(!tf(u.precondition,d))return void d.convertToUnknownDocument(E.version);const C=dE(u.fieldTransforms,d,E.transformResults),x=d.data;x.setAll(_w(u)),x.setAll(C),d.convertToFoundDocument(E.version,x).setHasCommittedMutations()})(r,e,t):(function(u,d,E){d.convertToNoDocument(E.version).setHasCommittedMutations()})(0,e,t)}function uu(r,e,t,a){return r instanceof Ou?(function(d,E,C,x){if(!tf(d.precondition,E))return C;const A=d.value.clone(),b=gE(d.fieldTransforms,x,E);return A.setAll(b),E.convertToFoundDocument(E.version,A).setHasLocalMutations(),null})(r,e,t,a):r instanceof _o?(function(d,E,C,x){if(!tf(d.precondition,E))return C;const A=gE(d.fieldTransforms,x,E),b=E.data;return b.setAll(_w(d)),b.setAll(A),E.convertToFoundDocument(E.version,b).setHasLocalMutations(),C===null?null:C.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((R=>R.field)))})(r,e,t,a):(function(d,E,C){return tf(d.precondition,E)?(E.convertToNoDocument(E.version).setHasLocalMutations(),null):C})(r,e,t)}function MR(r,e){let t=null;for(const a of r.fieldTransforms){const u=e.data.field(a.field),d=gw(a.transform,u||null);d!=null&&(t===null&&(t=sr.empty()),t.set(a.field,d))}return t||null}function fE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,u){return a===void 0&&u===void 0||!(!a||!u)&&$l(a,u,((d,E)=>NR(d,E)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ou extends $f{constructor(e,t,a,u=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class _o extends $f{constructor(e,t,a,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function _w(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=r.data.field(t);e.set(t,a)}})),e}function dE(r,e,t){const a=new Map;Zt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let u=0;u<t.length;u++){const d=r[u],E=d.transform,C=e.data.field(d.field);a.set(d.field,IR(E,C,t[u]))}return a}function gE(r,e,t){const a=new Map;for(const u of r){const d=u.transform,E=t.data.field(u.field);a.set(u.field,SR(d,E,e))}return a}class Aw extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PR extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,a,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=u}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&DR(d,e,a[u])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=uu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=uu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=fw();return this.mutations.forEach((u=>{const d=e.get(u.key),E=d.overlayedDocument;let C=this.applyToLocalView(E,d.mutatedFields);C=t.has(u.key)?null:C;const x=Ew(E,C);x!==null&&a.set(u.key,x),E.isValidDocument()||E.convertToNoDocument(ut.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Mt())}isEqual(e){return this.batchId===e.batchId&&$l(this.mutations,e.mutations,((t,a)=>fE(t,a)))&&$l(this.baseMutations,e.baseMutations,((t,a)=>fE(t,a)))}}class Ng{constructor(e,t,a,u){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=u}static from(e,t,a){Zt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let u=(function(){return xR})();const d=e.mutations;for(let E=0;E<d.length;E++)u=u.insert(d[E].key,a[E].version);return new Ng(e,t,a,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n,kt;function VR(r){switch(r){case Re.OK:return rt(64938);case Re.CANCELLED:case Re.UNKNOWN:case Re.DEADLINE_EXCEEDED:case Re.RESOURCE_EXHAUSTED:case Re.INTERNAL:case Re.UNAVAILABLE:case Re.UNAUTHENTICATED:return!1;case Re.INVALID_ARGUMENT:case Re.NOT_FOUND:case Re.ALREADY_EXISTS:case Re.PERMISSION_DENIED:case Re.FAILED_PRECONDITION:case Re.ABORTED:case Re.OUT_OF_RANGE:case Re.UNIMPLEMENTED:case Re.DATA_LOSS:return!0;default:return rt(15467,{code:r})}}function ww(r){if(r===void 0)return xa("GRPC error has no .code"),Re.UNKNOWN;switch(r){case $n.OK:return Re.OK;case $n.CANCELLED:return Re.CANCELLED;case $n.UNKNOWN:return Re.UNKNOWN;case $n.DEADLINE_EXCEEDED:return Re.DEADLINE_EXCEEDED;case $n.RESOURCE_EXHAUSTED:return Re.RESOURCE_EXHAUSTED;case $n.INTERNAL:return Re.INTERNAL;case $n.UNAVAILABLE:return Re.UNAVAILABLE;case $n.UNAUTHENTICATED:return Re.UNAUTHENTICATED;case $n.INVALID_ARGUMENT:return Re.INVALID_ARGUMENT;case $n.NOT_FOUND:return Re.NOT_FOUND;case $n.ALREADY_EXISTS:return Re.ALREADY_EXISTS;case $n.PERMISSION_DENIED:return Re.PERMISSION_DENIED;case $n.FAILED_PRECONDITION:return Re.FAILED_PRECONDITION;case $n.ABORTED:return Re.ABORTED;case $n.OUT_OF_RANGE:return Re.OUT_OF_RANGE;case $n.UNIMPLEMENTED:return Re.UNIMPLEMENTED;case $n.DATA_LOSS:return Re.DATA_LOSS;default:return rt(39323,{code:r})}}(kt=$n||($n={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new oo([4294967295,4294967295],0);function mE(r){const e=UR().encode(r),t=new BA;return t.update(e),new Uint8Array(t.digest())}function pE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new oo([t,a],0),new oo([u,d],0)]}class Og{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(a<0)throw new tu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oo.fromNumber(this.ge)}ye(e,t,a){let u=e.add(t.multiply(oo.fromNumber(a)));return u.compare(FR)===1&&(u=new oo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=mE(e),[a,u]=pE(t);for(let d=0;d<this.hashCount;d++){const E=this.ye(a,u,d);if(!this.we(E))return!1}return!0}static create(e,t,a){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),E=new Og(d,u,t);return a.forEach((C=>E.insert(C))),E}insert(e){if(this.ge===0)return;const t=mE(e),[a,u]=pE(t);for(let d=0;d<this.hashCount;d++){const E=this.ye(a,u,d);this.Se(E)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,a,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const u=new Map;return u.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new ed(ut.min(),u,new Dn(Dt),Ta(),Mt())}}class Du{constructor(e,t,a,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Du(a,t,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,a,u){this.be=e,this.removedTargetIds=t,this.key=a,this.De=u}}class xw{constructor(e,t){this.targetId=e,this.Ce=t}}class Tw{constructor(e,t,a=Ii.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=u}}class yE{constructor(){this.ve=0,this.Fe=EE(),this.Me=Ii.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mt(),t=Mt(),a=Mt();return this.Fe.forEach(((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:a=a.add(u);break;default:rt(38017,{changeType:d})}})),new Du(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=EE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ta(),this.Je=Hh(),this.He=Hh(),this.Ye=new Dn(Dt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,u)=>{this.rt(u)&&t(u)}))}st(e){const t=e.targetId,a=e.Ce.count,u=this.ot(t);if(u){const d=u.target;if(L0(d))if(a===0){const E=new Je(d.path);this.et(t,E,zi.newNoDocument(E,ut.min()))}else Zt(a===1,20013,{expectedCount:a});else{const E=this._t(t);if(E!==a){const C=this.ut(e),x=C?this.ct(C,e,E):1;if(x!==0){this.it(t);const A=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,A)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:u=0},hashCount:d=0}=t;let E,C;try{E=fo(a).toUint8Array()}catch(x){if(x instanceof KA)return Jl("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{C=new Og(E,u,d)}catch(x){return Jl(x instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return C.ge===0?null:C}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let u=0;return a.forEach((d=>{const E=this.Ge.ht(),C=`projects/${E.projectId}/databases/${E.database}/documents/${d.path.canonicalString()}`;e.mightContain(C)||(this.et(t,d,null),u++)})),u}Tt(e){const t=new Map;this.ze.forEach(((d,E)=>{const C=this.ot(E);if(C){if(d.current&&L0(C.target)){const x=new Je(C.target.path);this.It(x).has(E)||this.Et(E,x)||this.et(E,x,zi.newNoDocument(x,e))}d.Be&&(t.set(E,d.ke()),d.qe())}}));let a=Mt();this.He.forEach(((d,E)=>{let C=!0;E.forEachWhile((x=>{const A=this.ot(x);return!A||A.purpose==="TargetPurposeLimboResolution"||(C=!1,!1)})),C&&(a=a.add(d))})),this.je.forEach(((d,E)=>E.setReadTime(e)));const u=new ed(e,t,this.Ye,this.je,a);return this.je=Ta(),this.Je=Hh(),this.He=Hh(),this.Ye=new Dn(Dt),u}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,t)?u.Qe(t,1):u.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new yE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ci(Dt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ci(Dt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||He("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hh(){return new Dn(Je.comparator)}function EE(){return new Dn(Je.comparator)}const HR={asc:"ASCENDING",desc:"DESCENDING"},GR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jR={and:"AND",or:"OR"};class qR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function B0(r,e){return r.useProto3Json||Yf(e)?e:{value:e}}function Tf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function XR(r,e){return Tf(r,e.toTimestamp())}function Ds(r){return Zt(!!r,49232),ut.fromTimestamp((function(t){const a=ho(t);return new An(a.seconds,a.nanos)})(r))}function Dg(r,e){return V0(r,e).canonicalString()}function V0(r,e){const t=(function(u){return new Nn(["projects",u.projectId,"databases",u.database])})(r).child("documents");return e===void 0?t:t.child(e)}function vw(r){const e=Nn.fromString(r);return Zt(Nw(e),10190,{key:e.toString()}),e}function U0(r,e){return Dg(r.databaseId,e.path)}function g0(r,e){const t=vw(e);if(t.get(1)!==r.databaseId.projectId)throw new We(Re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new We(Re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Je(Sw(t))}function bw(r,e){return Dg(r.databaseId,e)}function YR(r){const e=vw(r);return e.length===4?Nn.emptyPath():Sw(e)}function F0(r){return new Nn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Sw(r){return Zt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function _E(r,e,t){return{name:U0(r,e),fields:t.value.mapValue.fields}}function KR(r,e){let t;if("targetChange"in e){e.targetChange;const a=(function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:rt(39313,{state:A})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],d=(function(A,b){return A.useProto3Json?(Zt(b===void 0||typeof b=="string",58123),Ii.fromBase64String(b||"")):(Zt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Ii.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),E=e.targetChange.cause,C=E&&(function(A){const b=A.code===void 0?Re.UNKNOWN:ww(A.code);return new We(b,A.message||"")})(E);t=new Tw(a,u,d,C||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const u=g0(r,a.document.name),d=Ds(a.document.updateTime),E=a.document.createTime?Ds(a.document.createTime):ut.min(),C=new sr({mapValue:{fields:a.document.fields}}),x=zi.newFoundDocument(u,d,E,C),A=a.targetIds||[],b=a.removedTargetIds||[];t=new nf(A,b,x.key,x)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const u=g0(r,a.document),d=a.readTime?Ds(a.readTime):ut.min(),E=zi.newNoDocument(u,d),C=a.removedTargetIds||[];t=new nf([],C,E.key,E)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const u=g0(r,a.document),d=a.removedTargetIds||[];t=new nf([],d,u,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:u=0,unchangedNames:d}=a,E=new BR(u,d),C=a.targetId;t=new xw(C,E)}}return t}function WR(r,e){let t;if(e instanceof Ou)t={update:_E(r,e.key,e.value)};else if(e instanceof Aw)t={delete:U0(r,e.key)};else if(e instanceof _o)t={update:_E(r,e.key,e.data),updateMask:r8(e.fieldMask)};else{if(!(e instanceof PR))return rt(16599,{Vt:e.type});t={verify:U0(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(d,E){const C=E.transform;if(C instanceof _u)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Au)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof wu)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof xf)return{fieldPath:E.field.canonicalString(),increment:C.Ae};throw rt(20930,{transform:E.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(u,d){return d.updateTime!==void 0?{updateTime:XR(u,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:rt(27497)})(r,e.precondition)),t}function QR(r,e){return r&&r.length>0?(Zt(e!==void 0,14353),r.map((t=>(function(u,d){let E=u.updateTime?Ds(u.updateTime):Ds(d);return E.isEqual(ut.min())&&(E=Ds(d)),new OR(E,u.transformResults||[])})(t,e)))):[]}function ZR(r,e){return{documents:[bw(r,e.path)]}}function JR(r,e){const t={structuredQuery:{}},a=e.path;let u;e.collectionGroup!==null?(u=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=bw(r,u);const d=(function(A){if(A.length!==0)return Rw(Bs.create(A,"and"))})(e.filters);d&&(t.structuredQuery.where=d);const E=(function(A){if(A.length!==0)return A.map((b=>(function(P){return{field:Gl(P.field),direction:t8(P.dir)}})(b)))})(e.orderBy);E&&(t.structuredQuery.orderBy=E);const C=B0(r,e.limit);return C!==null&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt=(function(A){return{before:A.inclusive,values:A.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(A){return{before:!A.inclusive,values:A.position}})(e.endAt)),{ft:t,parent:u}}function $R(r){let e=YR(r.parent);const t=r.structuredQuery,a=t.from?t.from.length:0;let u=null;if(a>0){Zt(a===1,65062);const b=t.from[0];b.allDescendants?u=b.collectionId:e=e.child(b.collectionId)}let d=[];t.where&&(d=(function(R){const P=Iw(R);return P instanceof Bs&&rw(P)?P.getFilters():[P]})(t.where));let E=[];t.orderBy&&(E=(function(R){return R.map((P=>(function(Q){return new wf(jl(Q.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(P)))})(t.orderBy));let C=null;t.limit&&(C=(function(R){let P;return P=typeof R=="object"?R.value:R,Yf(P)?null:P})(t.limit));let x=null;t.startAt&&(x=(function(R){const P=!!R.before,G=R.values||[];return new Af(G,P)})(t.startAt));let A=null;return t.endAt&&(A=(function(R){const P=!R.before,G=R.values||[];return new Af(G,P)})(t.endAt)),pR(e,u,E,d,C,"F",x,A)}function e8(r,e){const t=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:u})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Iw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=jl(t.unaryFilter.field);return oi.create(a,"==",{doubleValue:NaN});case"IS_NULL":const u=jl(t.unaryFilter.field);return oi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=jl(t.unaryFilter.field);return oi.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const E=jl(t.unaryFilter.field);return oi.create(E,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return oi.create(jl(t.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Bs.create(t.compositeFilter.filters.map((a=>Iw(a))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return rt(1026)}})(t.compositeFilter.op))})(r):rt(30097,{filter:r})}function t8(r){return HR[r]}function n8(r){return GR[r]}function i8(r){return jR[r]}function Gl(r){return{fieldPath:r.canonicalString()}}function jl(r){return Si.fromServerFormat(r.fieldPath)}function Rw(r){return r instanceof oi?(function(t){if(t.op==="=="){if(aE(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(sE(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aE(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(sE(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:n8(t.op),value:t.value}}})(r):r instanceof Bs?(function(t){const a=t.getFilters().map((u=>Rw(u)));return a.length===1?a[0]:{compositeFilter:{op:i8(t.op),filters:a}}})(r):rt(54877,{filter:r})}function r8(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Nw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t,a,u,d=ut.min(),E=ut.min(),C=Ii.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=C,this.expectedCount=x}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.yt=e}}function a8(r){const e=$R({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?k0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this.Cn=new l8}addToCollectionParentIndex(e,t){return this.Cn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(uo.min())}updateCollectionGroup(e,t,a){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class l8{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),u=this.index[t]||new ci(Nn.comparator),d=!u.has(a);return this.index[t]=u.add(a),d}has(e){const t=e.lastSegment(),a=e.popLast(),u=this.index[t];return u&&u.has(a)}getEntries(e){return(this.index[e]||new ci(Nn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ow=41943040;class rr{static withCacheSize(e){return new rr(e,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(Ow,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nc(0)}static cr(){return new nc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="LruGarbageCollector",c8=1048576;function xE([r,e],[t,a]){const u=Dt(r,t);return u===0?Dt(e,a):u}class u8{constructor(e){this.Ir=e,this.buffer=new ci(xE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();xE(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class h8{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(wE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lc(t)?He(wE,"Ignoring IndexedDB error during garbage collection: ",t):await oc(t)}await this.Vr(3e5)}))}}class f8{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ve.resolve(Xf.ce);const a=new u8(t);return this.mr.forEachTarget(e,(u=>a.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>a.Ar(u))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(AE)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,u,d,E,C,x,A;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),u=this.params.maximumSequenceNumbersToCollect):u=R,E=Date.now(),this.nthSequenceNumber(e,u)))).next((R=>(a=R,C=Date.now(),this.removeTargets(e,a,t)))).next((R=>(d=R,x=Date.now(),this.removeOrphanedDocuments(e,a)))).next((R=>(A=Date.now(),zl()<=Ot.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-b}ms
	Determined least recently used ${u} in `+(C-E)+`ms
	Removed ${d} targets in `+(x-C)+`ms
	Removed ${R} documents in `+(A-x)+`ms
Total Duration: ${A-b}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:R}))))}}function d8(r,e){return new f8(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.changes=new al((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ve.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,t,a,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=u}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((u=>(a=u,this.remoteDocumentCache.getEntry(e,t)))).next((u=>(a!==null&&uu(a.mutation,u,Nr.empty(),An.now()),u)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,Mt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=Mt()){const u=Go();return this.populateOverlays(e,u,t).next((()=>this.computeViews(e,t,u,a).next((d=>{let E=eu();return d.forEach(((C,x)=>{E=E.insert(C,x.overlayedDocument)})),E}))))}getOverlayedDocuments(e,t){const a=Go();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,Mt())))}populateOverlays(e,t,a){const u=[];return a.forEach((d=>{t.has(d)||u.push(d)})),this.documentOverlayCache.getOverlays(e,u).next((d=>{d.forEach(((E,C)=>{t.set(E,C)}))}))}computeViews(e,t,a,u){let d=Ta();const E=cu(),C=(function(){return cu()})();return t.forEach(((x,A)=>{const b=a.get(A.key);u.has(A.key)&&(b===void 0||b.mutation instanceof _o)?d=d.insert(A.key,A):b!==void 0?(E.set(A.key,b.mutation.getFieldMask()),uu(b.mutation,A,b.mutation.getFieldMask(),An.now())):E.set(A.key,Nr.empty())})),this.recalculateAndSaveOverlays(e,d).next((x=>(x.forEach(((A,b)=>E.set(A,b))),t.forEach(((A,b)=>C.set(A,new m8(b,E.get(A)??null)))),C)))}recalculateAndSaveOverlays(e,t){const a=cu();let u=new Dn(((E,C)=>E-C)),d=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((E=>{for(const C of E)C.keys().forEach((x=>{const A=t.get(x);if(A===null)return;let b=a.get(x)||Nr.empty();b=C.applyToLocalView(A,b),a.set(x,b);const R=(u.get(C.batchId)||Mt()).add(x);u=u.insert(C.batchId,R)}))})).next((()=>{const E=[],C=u.getReverseIterator();for(;C.hasNext();){const x=C.getNext(),A=x.key,b=x.value,R=fw();b.forEach((P=>{if(!d.has(P)){const G=Ew(t.get(P),a.get(P));G!==null&&R.set(P,G),d=d.add(P)}})),E.push(this.documentOverlayCache.saveOverlays(e,A,R))}return ve.waitFor(E)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,u){return(function(E){return Je.isDocumentKey(E.path)&&E.collectionGroup===null&&E.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,u):this.getDocumentsMatchingCollectionQuery(e,t,a,u)}getNextDocuments(e,t,a,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,u).next((d=>{const E=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,u-d.size):ve.resolve(Go());let C=mu,x=d;return E.next((A=>ve.forEach(A,((b,R)=>(C<R.largestBatchId&&(C=R.largestBatchId),d.get(b)?ve.resolve():this.remoteDocumentCache.getEntry(e,b).next((P=>{x=x.insert(b,P)}))))).next((()=>this.populateOverlays(e,A,d))).next((()=>this.computeViews(e,x,A,Mt()))).next((b=>({batchId:C,changes:hw(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Je(t)).next((a=>{let u=eu();return a.isFoundDocument()&&(u=u.insert(a.key,a)),u}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,u){const d=t.collectionGroup;let E=eu();return this.indexManager.getCollectionParents(e,d).next((C=>ve.forEach(C,(x=>{const A=(function(R,P){return new Wf(P,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(t,x.child(d));return this.getDocumentsMatchingCollectionQuery(e,A,a,u).next((b=>{b.forEach(((R,P)=>{E=E.insert(R,P)}))}))})).next((()=>E))))}getDocumentsMatchingCollectionQuery(e,t,a,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((E=>(d=E,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,d,u)))).next((E=>{d.forEach(((x,A)=>{const b=A.getKey();E.get(b)===null&&(E=E.insert(b,zi.newInvalidDocument(b)))}));let C=eu();return E.forEach(((x,A)=>{const b=d.get(x);b!==void 0&&uu(b.mutation,A,Nr.empty(),An.now()),Zf(t,A)&&(C=C.insert(x,A))})),C}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ve.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(u){return{id:u.id,version:u.version,createTime:Ds(u.createTime)}})(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(u){return{name:u.name,query:a8(u.bundledQuery),readTime:Ds(u.readTime)}})(t)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(){this.overlays=new Dn(Je.comparator),this.qr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Go();return ve.forEach(t,(u=>this.getOverlay(e,u).next((d=>{d!==null&&a.set(u,d)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((u,d)=>{this.St(e,t,d)})),ve.resolve()}removeOverlaysForBatchId(e,t,a){const u=this.qr.get(a);return u!==void 0&&(u.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(a)),ve.resolve()}getOverlaysForCollection(e,t,a){const u=Go(),d=t.length+1,E=new Je(t.child("")),C=this.overlays.getIteratorFrom(E);for(;C.hasNext();){const x=C.getNext().value,A=x.getKey();if(!t.isPrefixOf(A.path))break;A.path.length===d&&x.largestBatchId>a&&u.set(x.getKey(),x)}return ve.resolve(u)}getOverlaysForCollectionGroup(e,t,a,u){let d=new Dn(((A,b)=>A-b));const E=this.overlays.getIterator();for(;E.hasNext();){const A=E.getNext().value;if(A.getKey().getCollectionGroup()===t&&A.largestBatchId>a){let b=d.get(A.largestBatchId);b===null&&(b=Go(),d=d.insert(A.largestBatchId,b)),b.set(A.getKey(),A)}}const C=Go(),x=d.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((A,b)=>C.set(A,b))),!(C.size()>=u)););return ve.resolve(C)}St(e,t,a){const u=this.overlays.get(a.key);if(u!==null){const E=this.qr.get(u.largestBatchId).delete(a.key);this.qr.set(u.largestBatchId,E)}this.overlays=this.overlays.insert(a.key,new kR(t,a));let d=this.qr.get(t);d===void 0&&(d=Mt(),this.qr.set(t,d)),this.qr.set(t,d.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(){this.sessionToken=Ii.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Qr=new ci(pi.$r),this.Ur=new ci(pi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new pi(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new pi(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new Je(new Nn([])),a=new pi(t,e),u=new pi(t,e+1),d=[];return this.Ur.forEachInRange([a,u],(E=>{this.Gr(E),d.push(E.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Je(new Nn([])),a=new pi(t,e),u=new pi(t,e+1);let d=Mt();return this.Ur.forEachInRange([a,u],(E=>{d=d.add(E.key)})),d}containsKey(e){const t=new pi(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class pi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Je.comparator(e.key,t.key)||Dt(e.Yr,t.Yr)}static Kr(e,t){return Dt(e.Yr,t.Yr)||Je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ci(pi.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,u){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const E=new LR(d,t,a,u);this.mutationQueue.push(E);for(const C of u)this.Zr=this.Zr.add(new pi(C.key,d)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return ve.resolve(E)}lookupMutationBatch(e,t){return ve.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,u=this.ei(a),d=u<0?0:u;return ve.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?Tg:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new pi(t,0),u=new pi(t,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([a,u],(E=>{const C=this.Xr(E.Yr);d.push(C)})),ve.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new ci(Dt);return t.forEach((u=>{const d=new pi(u,0),E=new pi(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,E],(C=>{a=a.add(C.Yr)}))})),ve.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,u=a.length+1;let d=a;Je.isDocumentKey(d)||(d=d.child(""));const E=new pi(new Je(d),0);let C=new ci(Dt);return this.Zr.forEachWhile((x=>{const A=x.key.path;return!!a.isPrefixOf(A)&&(A.length===u&&(C=C.add(x.Yr)),!0)}),E),ve.resolve(this.ti(C))}ti(e){const t=[];return e.forEach((a=>{const u=this.Xr(a);u!==null&&t.push(u)})),t}removeMutationBatch(e,t){Zt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ve.forEach(t.mutations,(u=>{const d=new pi(u.key,t.batchId);return a=a.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new pi(t,0),u=this.Zr.firstAfterOrEqual(a);return ve.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e){this.ri=e,this.docs=(function(){return new Dn(Je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,u=this.docs.get(a),d=u?u.size:0,E=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:E}),this.size+=E-d,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ve.resolve(a?a.document.mutableCopy():zi.newInvalidDocument(t))}getEntries(e,t){let a=Ta();return t.forEach((u=>{const d=this.docs.get(u);a=a.insert(u,d?d.document.mutableCopy():zi.newInvalidDocument(u))})),ve.resolve(a)}getDocumentsMatchingQuery(e,t,a,u){let d=Ta();const E=t.path,C=new Je(E.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(C);for(;x.hasNext();){const{key:A,value:{document:b}}=x.getNext();if(!E.isPrefixOf(A.path))break;A.path.length>E.length+1||K4(Y4(b),a)<=0||(u.has(b.key)||Zf(t,b))&&(d=d.insert(b.key,b.mutableCopy()))}return ve.resolve(d)}getAllFromCollectionGroup(e,t,a,u){rt(9500)}ii(e,t){return ve.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new x8(this)}getSize(e){return ve.resolve(this.size)}}class x8 extends g8{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,u)=>{u.isValidDocument()?t.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(a)})),ve.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.persistence=e,this.si=new al((t=>bg(t)),Sg),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new Mg,this.targetCount=0,this.ai=nc.ur()}forEachTarget(e,t){return this.si.forEach(((a,u)=>t(u))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),ve.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Pr(t),ve.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,a){let u=0;const d=[];return this.si.forEach(((E,C)=>{C.sequenceNumber<=t&&a.get(C.targetId)===null&&(this.si.delete(E),d.push(this.removeMatchingKeysForTargetId(e,C.targetId)),u++)})),ve.waitFor(d).next((()=>u))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return ve.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),ve.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach((E=>{d.push(u.markPotentiallyOrphaned(e,E))})),ve.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return ve.resolve(a)}containsKey(e,t){return ve.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xf(0),this.li=!1,this.li=!0,this.hi=new _8,this.referenceDelegate=e(this),this.Pi=new T8(this),this.indexManager=new o8,this.remoteDocumentCache=(function(u){return new w8(u)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new s8(t),this.Ii=new y8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new A8(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){He("MemoryPersistence","Starting transaction:",e);const u=new C8(this.ci.next());return this.referenceDelegate.Ei(),a(u).next((d=>this.referenceDelegate.di(u).next((()=>d)))).toPromise().then((d=>(u.raiseOnCommittedEvent(),d)))}Ai(e,t){return ve.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class C8 extends Q4{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Ri=new Mg,this.Vi=null}static mi(e){return new Pg(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),ve.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((u=>this.fi.add(u.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((u=>{u.forEach((d=>this.fi.add(d.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(a=>{const u=Je.fromPath(a);return this.gi(e,u).next((d=>{d||t.removeEntry(u,ut.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ve.or([()=>ve.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Cf{constructor(e,t){this.persistence=e,this.pi=new al((a=>$4(a.path)),((a,u)=>a.isEqual(u))),this.garbageCollector=d8(this,t)}static mi(e,t){return new Cf(e,t)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((u=>a+u))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return ve.forEach(this.pi,((a,u)=>this.br(e,a,u).next((d=>d?ve.resolve():t(u)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const u=this.persistence.getRemoteDocumentCache(),d=u.newChangeBuffer();return u.ii(e,(E=>this.br(e,E,t).next((C=>{C||(a++,d.removeEntry(E,ut.min()))})))).next((()=>d.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ve.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$h(e.data.value)),t}br(e,t,a){return ve.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const u=this.pi.get(t);return ve.resolve(u!==void 0&&u>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t,a,u){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=u}static As(e,t){let a=Mt(),u=Mt();for(const d of t.docChanges)switch(d.type){case 0:a=a.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Lg(e,t.fromCache,a,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Y3()?8:Z4(Hi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,u){const d={result:null};return this.ys(e,t).next((E=>{d.result=E})).next((()=>{if(!d.result)return this.ws(e,t,u,a).next((E=>{d.result=E}))})).next((()=>{if(d.result)return;const E=new v8;return this.Ss(e,t,E).next((C=>{if(d.result=C,this.Vs)return this.bs(e,t,E,C.size)}))})).next((()=>d.result))}bs(e,t,a,u){return a.documentReadCount<this.fs?(zl()<=Ot.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",Hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(zl()<=Ot.DEBUG&&He("QueryEngine","Query:",Hl(t),"scans",a.documentReadCount,"local documents and returns",u,"documents as results."),a.documentReadCount>this.gs*u?(zl()<=Ot.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",Hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(t))):ve.resolve())}ys(e,t){if(uE(t))return ve.resolve(null);let a=Ns(t);return this.indexManager.getIndexType(e,a).next((u=>u===0?null:(t.limit!==null&&u===1&&(t=k0(t,null,"F"),a=Ns(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((d=>{const E=Mt(...d);return this.ps.getDocuments(e,E).next((C=>this.indexManager.getMinOffset(e,a).next((x=>{const A=this.Ds(t,C);return this.Cs(t,A,E,x.readTime)?this.ys(e,k0(t,null,"F")):this.vs(e,A,t,x)}))))})))))}ws(e,t,a,u){return uE(t)||u.isEqual(ut.min())?ve.resolve(null):this.ps.getDocuments(e,a).next((d=>{const E=this.Ds(t,d);return this.Cs(t,E,a,u)?ve.resolve(null):(zl()<=Ot.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Hl(t)),this.vs(e,E,t,X4(u,mu)).next((C=>C)))}))}Ds(e,t){let a=new ci(cw(e));return t.forEach(((u,d)=>{Zf(e,d)&&(a=a.add(d))})),a}Cs(e,t,a,u){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const d=e.limitType==="F"?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Ss(e,t,a){return zl()<=Ot.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Hl(t)),this.ps.getDocumentsMatchingQuery(e,t,uo.min(),a)}vs(e,t,a,u){return this.ps.getDocumentsMatchingQuery(e,a,u).next((d=>(t.forEach((E=>{d=d.insert(E.key,E)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="LocalStore",S8=3e8;class I8{constructor(e,t,a,u){this.persistence=e,this.Fs=t,this.serializer=u,this.Ms=new Dn(Dt),this.xs=new al((d=>bg(d)),Sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function R8(r,e,t,a){return new I8(r,e,t,a)}async function Mw(r,e){const t=gt(r);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let u;return t.mutationQueue.getAllMutationBatches(a).next((d=>(u=d,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((d=>{const E=[],C=[];let x=Mt();for(const A of u){E.push(A.batchId);for(const b of A.mutations)x=x.add(b.key)}for(const A of d){C.push(A.batchId);for(const b of A.mutations)x=x.add(b.key)}return t.localDocuments.getDocuments(a,x).next((A=>({Ls:A,removedBatchIds:E,addedBatchIds:C})))}))}))}function N8(r,e){const t=gt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const u=e.batch.keys(),d=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(C,x,A,b){const R=A.batch,P=R.keys();let G=ve.resolve();return P.forEach((Q=>{G=G.next((()=>b.getEntry(x,Q))).next((J=>{const Y=A.docVersions.get(Q);Zt(Y!==null,48541),J.version.compareTo(Y)<0&&(R.applyToRemoteDocument(J,A),J.isValidDocument()&&(J.setReadTime(A.commitVersion),b.addEntry(J)))}))})),G.next((()=>C.mutationQueue.removeMutationBatch(x,R)))})(t,a,e,d).next((()=>d.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,u,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(C){let x=Mt();for(let A=0;A<C.mutationResults.length;++A)C.mutationResults[A].transformResults.length>0&&(x=x.add(C.batch.mutations[A].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(a,u)))}))}function Pw(r){const e=gt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function O8(r,e){const t=gt(r),a=e.snapshotVersion;let u=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const E=t.Ns.newChangeBuffer({trackRemovals:!0});u=t.Ms;const C=[];e.targetChanges.forEach(((b,R)=>{const P=u.get(R);if(!P)return;C.push(t.Pi.removeMatchingKeys(d,b.removedDocuments,R).next((()=>t.Pi.addMatchingKeys(d,b.addedDocuments,R))));let G=P.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(R)!==null?G=G.withResumeToken(Ii.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):b.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(b.resumeToken,a)),u=u.insert(R,G),(function(J,Y,Ee){return J.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=S8?!0:Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0})(P,G,b)&&C.push(t.Pi.updateTargetData(d,G))}));let x=Ta(),A=Mt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(d,b))})),C.push(D8(d,E,e.documentUpdates).next((b=>{x=b.ks,A=b.qs}))),!a.isEqual(ut.min())){const b=t.Pi.getLastRemoteSnapshotVersion(d).next((R=>t.Pi.setTargetsMetadata(d,d.currentSequenceNumber,a)));C.push(b)}return ve.waitFor(C).next((()=>E.apply(d))).next((()=>t.localDocuments.getLocalViewOfDocuments(d,x,A))).next((()=>x))})).then((d=>(t.Ms=u,d)))}function D8(r,e,t){let a=Mt(),u=Mt();return t.forEach((d=>a=a.add(d))),e.getEntries(r,a).next((d=>{let E=Ta();return t.forEach(((C,x)=>{const A=d.get(C);x.isFoundDocument()!==A.isFoundDocument()&&(u=u.add(C)),x.isNoDocument()&&x.version.isEqual(ut.min())?(e.removeEntry(C,x.readTime),E=E.insert(C,x)):!A.isValidDocument()||x.version.compareTo(A.version)>0||x.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(x),E=E.insert(C,x)):He(kg,"Ignoring outdated watch update for ",C,". Current version:",A.version," Watch version:",x.version)})),{ks:E,qs:u}}))}function M8(r,e){const t=gt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Tg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function P8(r,e){const t=gt(r);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let u;return t.Pi.getTargetData(a,e).next((d=>d?(u=d,ve.resolve(u)):t.Pi.allocateTargetId(a).next((E=>(u=new ro(e,E,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,u).next((()=>u)))))))})).then((a=>{const u=t.Ms.get(a.targetId);return(u===null||a.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function z0(r,e,t){const a=gt(r),u=a.Ms.get(e),d=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",d,(E=>a.persistence.referenceDelegate.removeTarget(E,u)))}catch(E){if(!lc(E))throw E;He(kg,`Failed to update sequence numbers for target ${e}: ${E}`)}a.Ms=a.Ms.remove(e),a.xs.delete(u.target)}function TE(r,e,t){const a=gt(r);let u=ut.min(),d=Mt();return a.persistence.runTransaction("Execute query","readwrite",(E=>(function(x,A,b){const R=gt(x),P=R.xs.get(b);return P!==void 0?ve.resolve(R.Ms.get(P)):R.Pi.getTargetData(A,b)})(a,E,Ns(e)).next((C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(E,C.targetId).next((x=>{d=x}))})).next((()=>a.Fs.getDocumentsMatchingQuery(E,e,t?u:ut.min(),t?d:Mt()))).next((C=>(L8(a,_R(e),C),{documents:C,Qs:d})))))}function L8(r,e,t){let a=r.Os.get(e)||ut.min();t.forEach(((u,d)=>{d.readTime.compareTo(a)>0&&(a=d.readTime)})),r.Os.set(e,a)}class CE{constructor(){this.activeTargetIds=vR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k8{constructor(){this.Mo=new CE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new CE,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="ConnectivityMonitor";class bE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(vE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(vE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function H0(){return Gh===null?Gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="RestConnection",V8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${u}`,this.Wo=this.databaseId.database===Ef?`project_id=${a}`:`project_id=${a}&database_id=${u}`}Go(e,t,a,u,d){const E=H0(),C=this.zo(e,t.toUriEncodedString());He(m0,`Sending RPC '${e}' ${E}:`,C,a);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,u,d);const{host:A}=new URL(C),b=il(A);return this.Jo(e,C,x,a,b).then((R=>(He(m0,`Received RPC '${e}' ${E}: `,R),R)),(R=>{throw Jl(m0,`RPC '${e}' ${E} failed with error: `,R,"url: ",C,"request:",a),R}))}Ho(e,t,a,u,d,E){return this.Go(e,t,a,u,d)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((u,d)=>e[d]=u)),a&&a.headers.forEach(((u,d)=>e[d]=u))}zo(e,t){const a=V8[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="WebChannelConnection";class z8 extends U8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,u,d){const E=H0();return new Promise(((C,x)=>{const A=new VA;A.setWithCredentials(!0),A.listenOnce(UA.COMPLETE,(()=>{try{switch(A.getLastErrorCode()){case Jh.NO_ERROR:const R=A.getResponseJson();He(Ui,`XHR for RPC '${e}' ${E} received:`,JSON.stringify(R)),C(R);break;case Jh.TIMEOUT:He(Ui,`RPC '${e}' ${E} timed out`),x(new We(Re.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const P=A.getStatus();if(He(Ui,`RPC '${e}' ${E} failed with status:`,P,"response text:",A.getResponseText()),P>0){let G=A.getResponseJson();Array.isArray(G)&&(G=G[0]);const Q=G?.error;if(Q&&Q.status&&Q.message){const J=(function(Ee){const ue=Ee.toLowerCase().replace(/_/g,"-");return Object.values(Re).indexOf(ue)>=0?ue:Re.UNKNOWN})(Q.status);x(new We(J,Q.message))}else x(new We(Re.UNKNOWN,"Server responded with status "+A.getStatus()))}else x(new We(Re.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:E,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{He(Ui,`RPC '${e}' ${E} completed.`)}}));const b=JSON.stringify(u);He(Ui,`RPC '${e}' ${E} sending request:`,u),A.send(t,"POST",b,a,15)}))}T_(e,t,a){const u=H0(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=HA(),C=zA(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(x.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,t,a),x.encodeInitMessageHeaders=!0;const b=d.join("");He(Ui,`Creating RPC '${e}' stream ${u}: ${b}`,x);const R=E.createWebChannel(b,x);this.I_(R);let P=!1,G=!1;const Q=new F8({Yo:Y=>{G?He(Ui,`Not sending because RPC '${e}' stream ${u} is closed:`,Y):(P||(He(Ui,`Opening RPC '${e}' stream ${u} transport.`),R.open(),P=!0),He(Ui,`RPC '${e}' stream ${u} sending:`,Y),R.send(Y))},Zo:()=>R.close()}),J=(Y,Ee,ue)=>{Y.listen(Ee,(ne=>{try{ue(ne)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return J(R,$c.EventType.OPEN,(()=>{G||(He(Ui,`RPC '${e}' stream ${u} transport opened.`),Q.o_())})),J(R,$c.EventType.CLOSE,(()=>{G||(G=!0,He(Ui,`RPC '${e}' stream ${u} transport closed`),Q.a_(),this.E_(R))})),J(R,$c.EventType.ERROR,(Y=>{G||(G=!0,Jl(Ui,`RPC '${e}' stream ${u} transport errored. Name:`,Y.name,"Message:",Y.message),Q.a_(new We(Re.UNAVAILABLE,"The operation could not be completed")))})),J(R,$c.EventType.MESSAGE,(Y=>{if(!G){const Ee=Y.data[0];Zt(!!Ee,16349);const ue=Ee,ne=ue?.error||ue[0]?.error;if(ne){He(Ui,`RPC '${e}' stream ${u} received error:`,ne);const Se=ne.status;let ke=(function(z){const B=$n[z];if(B!==void 0)return ww(B)})(Se),Ue=ne.message;ke===void 0&&(ke=Re.INTERNAL,Ue="Unknown error status: "+Se+" with message "+ne.message),G=!0,Q.a_(new We(ke,Ue)),R.close()}else He(Ui,`RPC '${e}' stream ${u} received:`,Ee),Q.u_(Ee)}})),J(C,FA.STAT_EVENT,(Y=>{Y.stat===N0.PROXY?He(Ui,`RPC '${e}' stream ${u} detected buffering proxy`):Y.stat===N0.NOPROXY&&He(Ui,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function p0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(r){return new qR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,t,a=1e3,u=1.5,d=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=u,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),u=Math.max(0,t-a);u>0&&He("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="PersistentStream";class kw{constructor(e,t,a,u,d,E,C,x){this.Mi=e,this.S_=a,this.b_=u,this.connection=d,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=C,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Re.RESOURCE_EXHAUSTED?(xa(t.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,u])=>{this.D_===t&&this.G_(a,u)}),(a=>{e((()=>{const u=new We(Re.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(u)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{a((()=>this.z_(u)))})),this.stream.onMessage((u=>{a((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(SE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(He(SE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class H8 extends kw{constructor(e,t,a,u,d,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,u,E),this.serializer=d}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KR(this.serializer,e),a=(function(d){if(!("targetChange"in d))return ut.min();const E=d.targetChange;return E.targetIds&&E.targetIds.length?ut.min():E.readTime?Ds(E.readTime):ut.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=F0(this.serializer),t.addTarget=(function(d,E){let C;const x=E.target;if(C=L0(x)?{documents:ZR(d,x)}:{query:JR(d,x).ft},C.targetId=E.targetId,E.resumeToken.approximateByteSize()>0){C.resumeToken=Cw(d,E.resumeToken);const A=B0(d,E.expectedCount);A!==null&&(C.expectedCount=A)}else if(E.snapshotVersion.compareTo(ut.min())>0){C.readTime=Tf(d,E.snapshotVersion.toTimestamp());const A=B0(d,E.expectedCount);A!==null&&(C.expectedCount=A)}return C})(this.serializer,e);const a=e8(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=F0(this.serializer),t.removeTarget=e,this.q_(t)}}class G8 extends kw{constructor(e,t,a,u,d,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,u,E),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=QR(e.writeResults,e.commitTime),a=Ds(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=F0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>WR(this.serializer,a)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{}class q8 extends j8{constructor(e,t,a,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new We(Re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,E])=>this.connection.Go(e,V0(t,a),u,d,E))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new We(Re.UNKNOWN,d.toString())}))}Ho(e,t,a,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([E,C])=>this.connection.Ho(e,V0(t,a),u,E,C,d))).catch((E=>{throw E.name==="FirebaseError"?(E.code===Re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new We(Re.UNKNOWN,E.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class X8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xa(t),this.aa=!1):He("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RemoteStore";class Y8{constructor(e,t,a,u,d){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((E=>{a.enqueueAndForget((async()=>{ol(this)&&(He($o,"Restarting streams for network reachability change."),await(async function(x){const A=gt(x);A.Ea.add(4),await Mu(A),A.Ra.set("Unknown"),A.Ea.delete(4),await nd(A)})(this))}))})),this.Ra=new X8(a,u)}}async function nd(r){if(ol(r))for(const e of r.da)await e(!0)}async function Mu(r){for(const e of r.da)await e(!1)}function Bw(r,e){const t=gt(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fg(t)?Ug(t):cc(t).O_()&&Vg(t,e))}function Bg(r,e){const t=gt(r),a=cc(t);t.Ia.delete(e),a.O_()&&Vw(t,e),t.Ia.size===0&&(a.O_()?a.L_():ol(t)&&t.Ra.set("Unknown"))}function Vg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cc(r).Y_(e)}function Vw(r,e){r.Va.Ue(e),cc(r).Z_(e)}function Ug(r){r.Va=new zR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),cc(r).start(),r.Ra.ua()}function Fg(r){return ol(r)&&!cc(r).x_()&&r.Ia.size>0}function ol(r){return gt(r).Ea.size===0}function Uw(r){r.Va=void 0}async function K8(r){r.Ra.set("Online")}async function W8(r){r.Ia.forEach(((e,t)=>{Vg(r,e)}))}async function Q8(r,e){Uw(r),Fg(r)?(r.Ra.ha(e),Ug(r)):r.Ra.set("Unknown")}async function Z8(r,e,t){if(r.Ra.set("Online"),e instanceof Tw&&e.state===2&&e.cause)try{await(async function(u,d){const E=d.cause;for(const C of d.targetIds)u.Ia.has(C)&&(await u.remoteSyncer.rejectListen(C,E),u.Ia.delete(C),u.Va.removeTarget(C))})(r,e)}catch(a){He($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await vf(r,a)}else if(e instanceof nf?r.Va.Ze(e):e instanceof xw?r.Va.st(e):r.Va.tt(e),!t.isEqual(ut.min()))try{const a=await Pw(r.localStore);t.compareTo(a)>=0&&await(function(d,E){const C=d.Va.Tt(E);return C.targetChanges.forEach(((x,A)=>{if(x.resumeToken.approximateByteSize()>0){const b=d.Ia.get(A);b&&d.Ia.set(A,b.withResumeToken(x.resumeToken,E))}})),C.targetMismatches.forEach(((x,A)=>{const b=d.Ia.get(x);if(!b)return;d.Ia.set(x,b.withResumeToken(Ii.EMPTY_BYTE_STRING,b.snapshotVersion)),Vw(d,x);const R=new ro(b.target,x,A,b.sequenceNumber);Vg(d,R)})),d.remoteSyncer.applyRemoteEvent(C)})(r,t)}catch(a){He($o,"Failed to raise snapshot:",a),await vf(r,a)}}async function vf(r,e,t){if(!lc(e))throw e;r.Ea.add(1),await Mu(r),r.Ra.set("Offline"),t||(t=()=>Pw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{He($o,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await nd(r)}))}function Fw(r,e){return e().catch((t=>vf(r,t,e)))}async function id(r){const e=gt(r),t=mo(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tg;for(;J8(e);)try{const u=await M8(e.localStore,a);if(u===null){e.Ta.length===0&&t.L_();break}a=u.batchId,$8(e,u)}catch(u){await vf(e,u)}zw(e)&&Hw(e)}function J8(r){return ol(r)&&r.Ta.length<10}function $8(r,e){r.Ta.push(e);const t=mo(r);t.O_()&&t.X_&&t.ea(e.mutations)}function zw(r){return ol(r)&&!mo(r).x_()&&r.Ta.length>0}function Hw(r){mo(r).start()}async function e6(r){mo(r).ra()}async function t6(r){const e=mo(r);for(const t of r.Ta)e.ea(t.mutations)}async function n6(r,e,t){const a=r.Ta.shift(),u=Ng.from(a,e,t);await Fw(r,(()=>r.remoteSyncer.applySuccessfulWrite(u))),await id(r)}async function i6(r,e){e&&mo(r).X_&&await(async function(a,u){if((function(E){return VR(E)&&E!==Re.ABORTED})(u.code)){const d=a.Ta.shift();mo(a).B_(),await Fw(a,(()=>a.remoteSyncer.rejectFailedWrite(d.batchId,u))),await id(a)}})(r,e),zw(r)&&Hw(r)}async function IE(r,e){const t=gt(r);t.asyncQueue.verifyOperationInProgress(),He($o,"RemoteStore received new credentials");const a=ol(t);t.Ea.add(3),await Mu(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nd(t)}async function r6(r,e){const t=gt(r);e?(t.Ea.delete(2),await nd(t)):e||(t.Ea.add(2),await Mu(t),t.Ra.set("Unknown"))}function cc(r){return r.ma||(r.ma=(function(t,a,u){const d=gt(t);return d.sa(),new H8(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(r.datastore,r.asyncQueue,{Xo:K8.bind(null,r),t_:W8.bind(null,r),r_:Q8.bind(null,r),H_:Z8.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Fg(r)?Ug(r):r.Ra.set("Unknown")):(await r.ma.stop(),Uw(r))}))),r.ma}function mo(r){return r.fa||(r.fa=(function(t,a,u){const d=gt(t);return d.sa(),new G8(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:e6.bind(null,r),r_:i6.bind(null,r),ta:t6.bind(null,r),na:n6.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await id(r)):(await r.fa.stop(),r.Ta.length>0&&(He($o,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,a,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=u,this.removalCallback=d,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((E=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,u,d){const E=Date.now()+a,C=new zg(e,t,E,u,d);return C.start(a),C}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hg(r,e){if(xa("AsyncQueue",`${e}: ${r}`),lc(r))return new We(Re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Je.comparator(t.key,a.key):(t,a)=>Je.comparator(t.key,a.key),this.keyedMap=eu(),this.sortedSet=new Dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=a.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Ql;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.ga=new Dn(Je.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class ic{constructor(e,t,a,u,d,E,C,x,A){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=u,this.mutatedKeys=d,this.fromCache=E,this.syncStateChanged=C,this.excludesMetadataChanges=x,this.hasCachedResults=A}static fromInitialDocuments(e,t,a,u,d){const E=[];return t.forEach((C=>{E.push({type:0,doc:C})})),new ic(e,t,Ql.emptySet(t),E,a,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==a[u].type||!t[u].doc.isEqual(a[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class a6{constructor(){this.queries=NE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const u=gt(t),d=u.queries;u.queries=NE(),d.forEach(((E,C)=>{for(const x of C.Sa)x.onError(a)}))})(this,new We(Re.ABORTED,"Firestore shutting down"))}}function NE(){return new al((r=>lw(r)),Qf)}async function o6(r,e){const t=gt(r);let a=3;const u=e.query;let d=t.queries.get(u);d?!d.ba()&&e.Da()&&(a=2):(d=new s6,a=e.Da()?0:1);try{switch(a){case 0:d.wa=await t.onListen(u,!0);break;case 1:d.wa=await t.onListen(u,!1);break;case 2:await t.onFirstRemoteStoreListen(u)}}catch(E){const C=Hg(E,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(C)}t.queries.set(u,d),d.Sa.push(e),e.va(t.onlineState),d.wa&&e.Fa(d.wa)&&Gg(t)}async function l6(r,e){const t=gt(r),a=e.query;let u=3;const d=t.queries.get(a);if(d){const E=d.Sa.indexOf(e);E>=0&&(d.Sa.splice(E,1),d.Sa.length===0?u=e.Da()?0:1:!d.ba()&&e.Da()&&(u=2))}switch(u){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function c6(r,e){const t=gt(r);let a=!1;for(const u of e){const d=u.query,E=t.queries.get(d);if(E){for(const C of E.Sa)C.Fa(u)&&(a=!0);E.wa=u}}a&&Gg(t)}function u6(r,e,t){const a=gt(r),u=a.queries.get(e);if(u)for(const d of u.Sa)d.onError(t);a.queries.delete(e)}function Gg(r){r.Ca.forEach((e=>{e.next()}))}var G0,OE;(OE=G0||(G0={})).Ma="default",OE.Cache="cache";class h6{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const u of e.docChanges)u.type!==3&&a.push(u);e=new ic(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==G0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.key=e}}class jw{constructor(e){this.key=e}}class f6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=cw(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new RE,u=t?t.tu:this.tu;let d=t?t.mutatedKeys:this.mutatedKeys,E=u,C=!1;const x=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,A=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((b,R)=>{const P=u.get(b),G=Zf(this.query,R)?R:null,Q=!!P&&this.mutatedKeys.has(P.key),J=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Y=!1;P&&G?P.data.isEqual(G.data)?Q!==J&&(a.track({type:3,doc:G}),Y=!0):this.su(P,G)||(a.track({type:2,doc:G}),Y=!0,(x&&this.eu(G,x)>0||A&&this.eu(G,A)<0)&&(C=!0)):!P&&G?(a.track({type:0,doc:G}),Y=!0):P&&!G&&(a.track({type:1,doc:P}),Y=!0,(x||A)&&(C=!0)),Y&&(G?(E=E.add(G),d=J?d.add(b):d.delete(b)):(E=E.delete(b),d=d.delete(b)))})),this.query.limit!==null)for(;E.size>this.query.limit;){const b=this.query.limitType==="F"?E.last():E.first();E=E.delete(b.key),d=d.delete(b.key),a.track({type:1,doc:b})}return{tu:E,iu:a,Cs:C,mutatedKeys:d}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,u){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const E=e.iu.ya();E.sort(((b,R)=>(function(G,Q){const J=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:Y})}};return J(G)-J(Q)})(b.type,R.type)||this.eu(b.doc,R.doc))),this.ou(a),u=u??!1;const C=t&&!u?this._u():[],x=this.Xa.size===0&&this.current&&!u?1:0,A=x!==this.Za;return this.Za=x,E.length!==0||A?{snapshot:new ic(this.query,e.tu,d,E,e.mutatedKeys,x===0,A,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:C}:{au:C}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new RE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new jw(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new Gw(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=Mt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jg="SyncEngine";class d6{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class g6{constructor(e){this.key=e,this.hu=!1}}class m6{constructor(e,t,a,u,d,E){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=E,this.Pu={},this.Tu=new al((C=>lw(C)),Qf),this.Iu=new Map,this.Eu=new Set,this.du=new Dn(Je.comparator),this.Au=new Map,this.Ru=new Mg,this.Vu={},this.mu=new Map,this.fu=nc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function p6(r,e,t=!0){const a=Qw(r);let u;const d=a.Tu.get(e);return d?(a.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.lu()):u=await qw(a,e,t,!0),u}async function y6(r,e){const t=Qw(r);await qw(t,e,!0,!1)}async function qw(r,e,t,a){const u=await P8(r.localStore,Ns(e)),d=u.targetId,E=r.sharedClientState.addLocalQueryTarget(d,t);let C;return a&&(C=await E6(r,e,d,E==="current",u.resumeToken)),r.isPrimaryClient&&t&&Bw(r.remoteStore,u),C}async function E6(r,e,t,a,u){r.pu=(R,P,G)=>(async function(J,Y,Ee,ue){let ne=Y.view.ru(Ee);ne.Cs&&(ne=await TE(J.localStore,Y.query,!1).then((({documents:F})=>Y.view.ru(F,ne))));const Se=ue&&ue.targetChanges.get(Y.targetId),ke=ue&&ue.targetMismatches.get(Y.targetId)!=null,Ue=Y.view.applyChanges(ne,J.isPrimaryClient,Se,ke);return ME(J,Y.targetId,Ue.au),Ue.snapshot})(r,R,P,G);const d=await TE(r.localStore,e,!0),E=new f6(e,d.Qs),C=E.ru(d.documents),x=Du.createSynthesizedTargetChangeForCurrentChange(t,a&&r.onlineState!=="Offline",u),A=E.applyChanges(C,r.isPrimaryClient,x);ME(r,t,A.au);const b=new d6(e,t,E);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),A.snapshot}async function _6(r,e,t){const a=gt(r),u=a.Tu.get(e),d=a.Iu.get(u.targetId);if(d.length>1)return a.Iu.set(u.targetId,d.filter((E=>!Qf(E,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(u.targetId),a.sharedClientState.isActiveQueryTarget(u.targetId)||await z0(a.localStore,u.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(u.targetId),t&&Bg(a.remoteStore,u.targetId),j0(a,u.targetId)})).catch(oc)):(j0(a,u.targetId),await z0(a.localStore,u.targetId,!0))}async function A6(r,e){const t=gt(r),a=t.Tu.get(e),u=t.Iu.get(a.targetId);t.isPrimaryClient&&u.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Bg(t.remoteStore,a.targetId))}async function w6(r,e,t){const a=I6(r);try{const u=await(function(E,C){const x=gt(E),A=An.now(),b=C.reduce(((G,Q)=>G.add(Q.key)),Mt());let R,P;return x.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let Q=Ta(),J=Mt();return x.Ns.getEntries(G,b).next((Y=>{Q=Y,Q.forEach(((Ee,ue)=>{ue.isValidDocument()||(J=J.add(Ee))}))})).next((()=>x.localDocuments.getOverlayedDocuments(G,Q))).next((Y=>{R=Y;const Ee=[];for(const ue of C){const ne=MR(ue,R.get(ue.key).overlayedDocument);ne!=null&&Ee.push(new _o(ue.key,ne,tw(ne.value.mapValue),Os.exists(!0)))}return x.mutationQueue.addMutationBatch(G,A,Ee,C)})).next((Y=>{P=Y;const Ee=Y.applyToLocalDocumentSet(R,J);return x.documentOverlayCache.saveOverlays(G,Y.batchId,Ee)}))})).then((()=>({batchId:P.batchId,changes:hw(R)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(u.batchId),(function(E,C,x){let A=E.Vu[E.currentUser.toKey()];A||(A=new Dn(Dt)),A=A.insert(C,x),E.Vu[E.currentUser.toKey()]=A})(a,u.batchId,t),await Pu(a,u.changes),await id(a.remoteStore)}catch(u){const d=Hg(u,"Failed to persist write");t.reject(d)}}async function Xw(r,e){const t=gt(r);try{const a=await O8(t.localStore,e);e.targetChanges.forEach(((u,d)=>{const E=t.Au.get(d);E&&(Zt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?E.hu=!0:u.modifiedDocuments.size>0?Zt(E.hu,14607):u.removedDocuments.size>0&&(Zt(E.hu,42227),E.hu=!1))})),await Pu(t,a,e)}catch(a){await oc(a)}}function DE(r,e,t){const a=gt(r);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const u=[];a.Tu.forEach(((d,E)=>{const C=E.view.va(e);C.snapshot&&u.push(C.snapshot)})),(function(E,C){const x=gt(E);x.onlineState=C;let A=!1;x.queries.forEach(((b,R)=>{for(const P of R.Sa)P.va(C)&&(A=!0)})),A&&Gg(x)})(a.eventManager,e),u.length&&a.Pu.H_(u),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function x6(r,e,t){const a=gt(r);a.sharedClientState.updateQueryState(e,"rejected",t);const u=a.Au.get(e),d=u&&u.key;if(d){let E=new Dn(Je.comparator);E=E.insert(d,zi.newNoDocument(d,ut.min()));const C=Mt().add(d),x=new ed(ut.min(),new Map,new Dn(Dt),E,C);await Xw(a,x),a.du=a.du.remove(d),a.Au.delete(e),qg(a)}else await z0(a.localStore,e,!1).then((()=>j0(a,e,t))).catch(oc)}async function T6(r,e){const t=gt(r),a=e.batch.batchId;try{const u=await N8(t.localStore,e);Kw(t,a,null),Yw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Pu(t,u)}catch(u){await oc(u)}}async function C6(r,e,t){const a=gt(r);try{const u=await(function(E,C){const x=gt(E);return x.persistence.runTransaction("Reject batch","readwrite-primary",(A=>{let b;return x.mutationQueue.lookupMutationBatch(A,C).next((R=>(Zt(R!==null,37113),b=R.keys(),x.mutationQueue.removeMutationBatch(A,R)))).next((()=>x.mutationQueue.performConsistencyCheck(A))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(A,b,C))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,b))).next((()=>x.localDocuments.getDocuments(A,b)))}))})(a.localStore,e);Kw(a,e,t),Yw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Pu(a,u)}catch(u){await oc(u)}}function Yw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Kw(r,e,t){const a=gt(r);let u=a.Vu[a.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),a.Vu[a.currentUser.toKey()]=u}}function j0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),t&&r.Pu.yu(a,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||Ww(r,a)}))}function Ww(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Bg(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),qg(r))}function ME(r,e,t){for(const a of t)a instanceof Gw?(r.Ru.addReference(a.key,e),v6(r,a)):a instanceof jw?(He(jg,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||Ww(r,a.key)):rt(19791,{wu:a})}function v6(r,e){const t=e.key,a=t.path.canonicalString();r.du.get(t)||r.Eu.has(a)||(He(jg,"New document in limbo: "+t),r.Eu.add(a),qg(r))}function qg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Je(Nn.fromString(e)),a=r.fu.next();r.Au.set(a,new g6(t)),r.du=r.du.insert(t,a),Bw(r.remoteStore,new ro(Ns(Ig(t.path)),a,"TargetPurposeLimboResolution",Xf.ce))}}async function Pu(r,e,t){const a=gt(r),u=[],d=[],E=[];a.Tu.isEmpty()||(a.Tu.forEach(((C,x)=>{E.push(a.pu(x,e,t).then((A=>{if((A||t)&&a.isPrimaryClient){const b=A?!A.fromCache:t?.targetChanges.get(x.targetId)?.current;a.sharedClientState.updateQueryState(x.targetId,b?"current":"not-current")}if(A){u.push(A);const b=Lg.As(x.targetId,A);d.push(b)}})))})),await Promise.all(E),a.Pu.H_(u),await(async function(x,A){const b=gt(x);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>ve.forEach(A,(P=>ve.forEach(P.Es,(G=>b.persistence.referenceDelegate.addReference(R,P.targetId,G))).next((()=>ve.forEach(P.ds,(G=>b.persistence.referenceDelegate.removeReference(R,P.targetId,G)))))))))}catch(R){if(!lc(R))throw R;He(kg,"Failed to update sequence numbers: "+R)}for(const R of A){const P=R.targetId;if(!R.fromCache){const G=b.Ms.get(P),Q=G.snapshotVersion,J=G.withLastLimboFreeSnapshotVersion(Q);b.Ms=b.Ms.insert(P,J)}}})(a.localStore,d))}async function b6(r,e){const t=gt(r);if(!t.currentUser.isEqual(e)){He(jg,"User change. New user:",e.toKey());const a=await Mw(t.localStore,e);t.currentUser=e,(function(d,E){d.mu.forEach((C=>{C.forEach((x=>{x.reject(new We(Re.CANCELLED,E))}))})),d.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Pu(t,a.Ls)}}function S6(r,e){const t=gt(r),a=t.Au.get(e);if(a&&a.hu)return Mt().add(a.key);{let u=Mt();const d=t.Iu.get(e);if(!d)return u;for(const E of d){const C=t.Tu.get(E);u=u.unionWith(C.view.nu)}return u}}function Qw(r){const e=gt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x6.bind(null,e),e.Pu.H_=c6.bind(null,e.eventManager),e.Pu.yu=u6.bind(null,e.eventManager),e}function I6(r){const e=gt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C6.bind(null,e),e}class bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return R8(this.persistence,new b8,e.initialUser,this.serializer)}Cu(e){return new Dw(Pg.mi,this.serializer)}Du(e){return new k8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bf.provider={build:()=>new bf};class R6 extends bf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Zt(this.persistence.referenceDelegate instanceof Cf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new h8(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rr.withCacheSize(this.cacheSizeBytes):rr.DEFAULT;return new Dw((a=>Cf.mi(a,t)),this.serializer)}}class q0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>DE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=b6.bind(null,this.syncEngine),await r6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new a6})()}createDatastore(e){const t=td(e.databaseInfo.databaseId),a=(function(d){return new z8(d)})(e.databaseInfo);return(function(d,E,C,x){return new q8(d,E,C,x)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,u,d,E,C){return new Y8(a,u,d,E,C)})(this.localStore,this.datastore,e.asyncQueue,(t=>DE(this.syncEngine,t,0)),(function(){return bE.v()?new bE:new B8})())}createSyncEngine(e,t){return(function(u,d,E,C,x,A,b){const R=new m6(u,d,E,C,x,A);return b&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=gt(t);He($o,"RemoteStore shutting down."),a.Ea.add(5),await Mu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}q0.provider={build:()=>new q0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="FirestoreClient";class O6{constructor(e,t,a,u,d){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=u,this.user=Fi.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(a,(async E=>{He(po,"Received user=",E.uid),await this.authCredentialListener(E),this.user=E})),this.appCheckCredentials.start(a,(E=>(He(po,"Received new app check token=",E),this.appCheckCredentialListener(E,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Hg(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function y0(r,e){r.asyncQueue.verifyOperationInProgress(),He(po,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let a=t.initialUser;r.setCredentialChangeListener((async u=>{a.isEqual(u)||(await Mw(e.localStore,u),a=u)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function PE(r,e){r.asyncQueue.verifyOperationInProgress();const t=await D6(r);He(po,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((a=>IE(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,u)=>IE(e.remoteStore,u))),r._onlineComponents=e}async function D6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){He(po,"Using user provided OfflineComponentProvider");try{await y0(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(u){return u.name==="FirebaseError"?u.code===Re.FAILED_PRECONDITION||u.code===Re.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(t))throw t;Jl("Error using user provided cache. Falling back to memory cache: "+t),await y0(r,new bf)}}else He(po,"Using default OfflineComponentProvider"),await y0(r,new R6(void 0));return r._offlineComponents}async function Zw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(He(po,"Using user provided OnlineComponentProvider"),await PE(r,r._uninitializedComponentsProvider._online)):(He(po,"Using default OnlineComponentProvider"),await PE(r,new q0))),r._onlineComponents}function M6(r){return Zw(r).then((e=>e.syncEngine))}async function P6(r){const e=await Zw(r),t=e.eventManager;return t.onListen=p6.bind(null,e.syncEngine),t.onUnlisten=_6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=y6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A6.bind(null,e.syncEngine),t}function L6(r,e,t={}){const a=new lo;return r.asyncQueue.enqueueAndForget((async()=>(function(d,E,C,x,A){const b=new N6({next:P=>{b.Nu(),E.enqueueAndForget((()=>l6(d,R)));const G=P.docs.has(C);!G&&P.fromCache?A.reject(new We(Re.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&P.fromCache&&x&&x.source==="server"?A.reject(new We(Re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(P)},error:P=>A.reject(P)}),R=new h6(Ig(C.path),b,{includeMetadataChanges:!0,qa:!0});return o6(d,R)})(await P6(r),r.asyncQueue,e,t,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firestore.googleapis.com",kE=!0;class BE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new We(Re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$w,this.ssl=kE}else this.host=e.host,this.ssl=e.ssl??kE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ow;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c8)throw new We(Re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new We(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new We(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new We(Re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,u){return a.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xg{constructor(e,t,a,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new P4;switch(a.type){case"firstParty":return new V4(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new We(Re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=LE.get(t);a&&(He("ComponentProvider","Removing Datastore"),LE.delete(t),a.terminate())})(this),Promise.resolve()}}function k6(r,e,t,a={}){r=Jo(r,Xg);const u=il(e),d=r._getSettings(),E={...d,emulatorOptions:r._getEmulatorOptions()},C=`${e}:${t}`;u&&(ng(`https://${C}`),ig("Firestore",!0)),d.host!==$w&&d.host!==C&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...d,host:C,ssl:u,emulatorOptions:a};if(!co(x,E)&&(r._setSettings(x),a.mockUserToken)){let A,b;if(typeof a.mockUserToken=="string")A=a.mockUserToken,b=Fi.MOCK_USER;else{A=I_(a.mockUserToken,r._app?.options.projectId);const R=a.mockUserToken.sub||a.mockUserToken.user_id;if(!R)throw new We(Re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Fi(R)}r._authCredentials=new L4(new jA(A,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Yg(this.firestore,e,this._query)}}class li{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new li(this.firestore,e,this._key)}toJSON(){return{type:li._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Nu(t,li._jsonSchema))return new li(e,a||null,new Je(Nn.fromString(t.referencePath)))}}li._jsonSchemaVersion="firestore/documentReference/1.0",li._jsonSchema={type:ei("string",li._jsonSchemaVersion),referencePath:ei("string")};class xu extends Yg{constructor(e,t,a){super(e,t,Ig(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new li(this.firestore,null,new Je(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function qo(r,e,...t){if(r=yi(r),arguments.length===1&&(e=wg.newId()),j4("doc","path",e),r instanceof Xg){const a=Nn.fromString(e,...t);return Zy(a),new li(r,null,new Je(a))}{if(!(r instanceof li||r instanceof xu))throw new We(Re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Nn.fromString(e,...t));return Zy(a),new li(r.firestore,r instanceof xu?r.converter:null,new Je(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="AsyncQueue";class UE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lw(this,"async_queue_retry"),this._c=()=>{const a=p0();a&&He(VE,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=p0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=p0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lc(e))throw e;He(VE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,xa("INTERNAL UNHANDLED ERROR: ",FE(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const u=zg.createAndSchedule(this,e,t,a,(d=>this.hc(d)));return this.tc.push(u),u}uc(){this.nc&&rt(47125,{Pc:FE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function FE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class rd extends Xg{constructor(e,t,a,u){super(e,t,a,u),this.type="firestore",this._queue=new UE,this._persistenceKey=u?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UE(e),this._firestoreClient=void 0,await e}}}function B6(r,e){const t=typeof r=="object"?r:Ff(),a=typeof r=="string"?r:Ef,u=yo(t,"firestore").getImmediate({identifier:a});if(!u._initialized){const d=v_("firestore");d&&k6(u,...d)}return u}function ex(r){if(r._terminated)throw new We(Re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||V6(r),r._firestoreClient}function V6(r){const e=r._freezeSettings(),t=(function(u,d,E,C){return new nR(u,d,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,Jw(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new O6(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qr(Ii.fromBase64String(e))}catch(t){throw new We(Re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qr(Ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,qr._jsonSchema))return qr.fromBase64String(e.bytes)}}qr._jsonSchemaVersion="firestore/bytes/1.0",qr._jsonSchema={type:ei("string",qr._jsonSchemaVersion),bytes:ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new We(Re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new We(Re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new We(Re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ms._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,Ms._jsonSchema))return new Ms(e.latitude,e.longitude)}}Ms._jsonSchemaVersion="firestore/geoPoint/1.0",Ms._jsonSchema={type:ei("string",Ms._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,u){if(a.length!==u.length)return!1;for(let d=0;d<a.length;++d)if(a[d]!==u[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ps(e.vectorValues);throw new We(Re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:ei("string",Ps._jsonSchemaVersion),vectorValues:ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=/^__.*__$/;class F6{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}class tx{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new _o(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nx(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:r})}}class Kg{constructor(e,t,a,u,d,E){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=u,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nx(this.Ac)&&U6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class z6{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||td(e)}Cc(e,t,a,u=!1){return new Kg({Ac:e,methodName:t,Dc:a,path:Si.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ix(r){const e=r._freezeSettings(),t=td(r._databaseId);return new z6(r._databaseId,!!e.ignoreUndefinedProperties,t)}function H6(r,e,t,a,u,d={}){const E=r.Cc(d.merge||d.mergeFields?2:0,e,t,u);Qg("Data must be an object, but it was:",E,a);const C=rx(a,E);let x,A;if(d.merge)x=new Nr(E.fieldMask),A=E.fieldTransforms;else if(d.mergeFields){const b=[];for(const R of d.mergeFields){const P=X0(e,R,t);if(!E.contains(P))throw new We(Re.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);ax(b,P)||b.push(P)}x=new Nr(b),A=E.fieldTransforms.filter((R=>x.covers(R.field)))}else x=null,A=E.fieldTransforms;return new F6(new sr(C),x,A)}class od extends ad{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}class Wg extends ad{_toFieldTransform(e){return new RR(e.path,new _u)}isEqual(e){return e instanceof Wg}}function G6(r,e,t,a){const u=r.Cc(1,e,t);Qg("Data must be an object, but it was:",u,a);const d=[],E=sr.empty();Eo(a,((x,A)=>{const b=Zg(e,x,t);A=yi(A);const R=u.yc(b);if(A instanceof od)d.push(b);else{const P=ld(A,R);P!=null&&(d.push(b),E.set(b,P))}}));const C=new Nr(d);return new tx(E,C,u.fieldTransforms)}function j6(r,e,t,a,u,d){const E=r.Cc(1,e,t),C=[X0(e,a,t)],x=[u];if(d.length%2!=0)throw new We(Re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<d.length;P+=2)C.push(X0(e,d[P])),x.push(d[P+1]);const A=[],b=sr.empty();for(let P=C.length-1;P>=0;--P)if(!ax(A,C[P])){const G=C[P];let Q=x[P];Q=yi(Q);const J=E.yc(G);if(Q instanceof od)A.push(G);else{const Y=ld(Q,J);Y!=null&&(A.push(G),b.set(G,Y))}}const R=new Nr(A);return new tx(b,R,E.fieldTransforms)}function ld(r,e){if(sx(r=yi(r)))return Qg("Unsupported field value:",e,r),rx(r,e);if(r instanceof ad)return(function(a,u){if(!nx(u.Ac))throw u.Sc(`${a._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${a._methodName}() is not currently supported inside arrays`);const d=a._toFieldTransform(u);d&&u.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,u){const d=[];let E=0;for(const C of a){let x=ld(C,u.wc(E));x==null&&(x={nullValue:"NULL_VALUE"}),d.push(x),E++}return{arrayValue:{values:d}}})(r,e)}return(function(a,u){if((a=yi(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return bR(u.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const d=An.fromDate(a);return{timestampValue:Tf(u.serializer,d)}}if(a instanceof An){const d=new An(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Tf(u.serializer,d)}}if(a instanceof Ms)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof qr)return{bytesValue:Cw(u.serializer,a._byteString)};if(a instanceof li){const d=u.databaseId,E=a.firestore._databaseId;if(!E.isEqual(d))throw u.Sc(`Document reference is for database ${E.projectId}/${E.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Dg(a.firestore._databaseId||u.databaseId,a._key.path)}}if(a instanceof Ps)return(function(E,C){return{mapValue:{fields:{[$A]:{stringValue:ew},[_f]:{arrayValue:{values:E.toArray().map((A=>{if(typeof A!="number")throw C.Sc("VectorValues must only contain numeric values.");return Rg(C.serializer,A)}))}}}}}})(a,u);throw u.Sc(`Unsupported field value: ${xg(a)}`)})(r,e)}function rx(r,e){const t={};return YA(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(r,((a,u)=>{const d=ld(u,e.mc(a));d!=null&&(t[a]=d)})),{mapValue:{fields:t}}}function sx(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof An||r instanceof Ms||r instanceof qr||r instanceof li||r instanceof ad||r instanceof Ps)}function Qg(r,e,t){if(!sx(t)||!qA(t)){const a=xg(t);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function X0(r,e,t){if((e=yi(e))instanceof sd)return e._internalPath;if(typeof e=="string")return Zg(r,e);throw Sf("Field path arguments must be of type string or ",r,!1,void 0,t)}const q6=new RegExp("[~\\*/\\[\\]]");function Zg(r,e,t){if(e.search(q6)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new sd(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sf(r,e,t,a,u){const d=a&&!a.isEmpty(),E=u!==void 0;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let x="";return(d||E)&&(x+=" (found",d&&(x+=` in field ${a}`),E&&(x+=` in document ${u}`),x+=")"),new We(Re.INVALID_ARGUMENT,C+r+x)}function ax(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t,a,u,d){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new li(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class X6 extends ox{data(){return super.data()}}function lx(r,e){return typeof e=="string"?Zg(r,e):e instanceof sd?e._internalPath:e._delegate._internalPath}class Y6{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Eo(e,((u,d)=>{a[u]=this.convertValue(d,t)})),a}convertVectorValue(e){const t=e.fields?.[_f].arrayValue?.values?.map((a=>Kn(a.doubleValue)));return new Ps(t)}convertGeoPoint(e){return new Ms(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Kf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=ho(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Nn.fromString(e);Zt(Nw(a),9688,{name:e});const u=new yu(a.get(1),a.get(3)),d=new Je(a.popFirst(5));return u.isEqual(t)||xa(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(r,e,t){let a;return a=r?r.toFirestore(e):e,a}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends ox{constructor(e,t,a,u,d,E){super(e,t,a,u,E),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(lx("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new We(Re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:ei("string",Xo._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};class rf extends Xo{data(e={}){return super.data(e)}}class hu{constructor(e,t,a,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new nu(u.hasPendingWrites,u.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new rf(this._firestore,this._userDataWriter,a.key,a,new nu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new We(Re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(u,d){if(u._snapshot.oldDocs.isEmpty()){let E=0;return u._snapshot.docChanges.map((C=>{const x=new rf(u._firestore,u._userDataWriter,C.doc.key,C.doc,new nu(u._snapshot.mutatedKeys.has(C.doc.key),u._snapshot.fromCache),u.query.converter);return C.doc,{type:"added",doc:x,oldIndex:-1,newIndex:E++}}))}{let E=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((C=>d||C.type!==3)).map((C=>{const x=new rf(u._firestore,u._userDataWriter,C.doc.key,C.doc,new nu(u._snapshot.mutatedKeys.has(C.doc.key),u._snapshot.fromCache),u.query.converter);let A=-1,b=-1;return C.type!==0&&(A=E.indexOf(C.doc.key),E=E.delete(C.doc.key)),C.type!==1&&(E=E.add(C.doc),b=E.indexOf(C.doc.key)),{type:W6(C.type),doc:x,oldIndex:A,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new We(Re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],u=[];return this.docs.forEach((d=>{d._document!==null&&(t.push(d._document),a.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),u.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(r){r=Jo(r,li);const e=Jo(r.firestore,rd);return L6(ex(e),r._key).then((t=>J6(e,r,t)))}hu._jsonSchemaVersion="firestore/querySnapshot/1.0",hu._jsonSchema={type:ei("string",hu._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};class Q6 extends Y6{constructor(e){super(),this.firestore=e}convertBytes(e){return new qr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new li(this.firestore,null,t)}}function Z6(r,e,t){r=Jo(r,li);const a=Jo(r.firestore,rd),u=K6(r.converter,e);return cx(a,[H6(ix(a),"setDoc",r._key,u,r.converter!==null,t).toMutation(r._key,Os.none())])}function Jg(r,e,t,...a){r=Jo(r,li);const u=Jo(r.firestore,rd),d=ix(u);let E;return E=typeof(e=yi(e))=="string"||e instanceof sd?j6(d,"updateDoc",r._key,e,t,a):G6(d,"updateDoc",r._key,e),cx(u,[E.toMutation(r._key,Os.exists(!0))])}function cx(r,e){return(function(a,u){const d=new lo;return a.asyncQueue.enqueueAndForget((async()=>w6(await M6(a),u,d))),d.promise})(ex(r),e)}function J6(r,e,t){const a=t.docs.get(e._key),u=new Q6(r);return new Xo(r,u,e._key,a,new nu(t.hasPendingWrites,t.fromCache),e.converter)}function $6(){return new Wg("serverTimestamp")}(function(e,t=!0){(function(u){ac=u})(sl),hs(new Xr("firestore",((a,{instanceIdentifier:u,options:d})=>{const E=a.getProvider("app").getImmediate(),C=new rd(new k4(a.getProvider("auth-internal")),new U4(E,a.getProvider("app-check-internal")),(function(A,b){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new We(Re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(A.options.projectId,b)})(E,u),E);return d={useFetchStreams:t,...d},C._setSettings(d),C}),"PUBLIC").setMultipleInstances(!0)),ar(Yy,Ky,e),ar(Yy,Ky,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebasestorage.googleapis.com",eN="storageBucket",tN=120*1e3,nN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Yr{constructor(e,t,a=0){super(E0(e),`Firebase Storage: ${t} (${E0(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return E0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vs;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vs||(Vs={}));function E0(r){return"storage/"+r}function iN(){const r="An unknown error occurred, please check the error payload for server response.";return new Fs(Vs.UNKNOWN,r)}function rN(){return new Fs(Vs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sN(){return new Fs(Vs.CANCELED,"User canceled the upload/download.")}function aN(r){return new Fs(Vs.INVALID_URL,"Invalid URL '"+r+"'.")}function oN(r){return new Fs(Vs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function zE(r){return new Fs(Vs.INVALID_ARGUMENT,r)}function hx(){return new Fs(Vs.APP_DELETED,"The Firebase app was deleted.")}function lN(r){return new Fs(Vs.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(a.path==="")return a;throw oN(e)}static makeFromUrl(e,t){let a=null;const u="([A-Za-z0-9.\\-_]+)";function d(Se){Se.path.charAt(Se.path.length-1)==="/"&&(Se.path_=Se.path_.slice(0,-1))}const E="(/(.*))?$",C=new RegExp("^gs://"+u+E,"i"),x={bucket:1,path:3};function A(Se){Se.path_=decodeURIComponent(Se.path)}const b="v[A-Za-z0-9_]+",R=t.replace(/[.]/g,"\\."),P="(/([^?#]*).*)?$",G=new RegExp(`^https?://${R}/${b}/b/${u}/o${P}`,"i"),Q={bucket:1,path:3},J=t===ux?"(?:storage.googleapis.com|storage.cloud.google.com)":t,Y="([^?#]*)",Ee=new RegExp(`^https?://${J}/${u}/${Y}`,"i"),ne=[{regex:C,indices:x,postModify:d},{regex:G,indices:Q,postModify:A},{regex:Ee,indices:{bucket:1,path:2},postModify:A}];for(let Se=0;Se<ne.length;Se++){const ke=ne[Se],Ue=ke.regex.exec(e);if(Ue){const F=Ue[ke.indices.bucket];let z=Ue[ke.indices.path];z||(z=""),a=new ls(F,z),ke.postModify(a);break}}if(a==null)throw aN(e);return a}}class cN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(r,e,t){let a=1,u=null,d=null,E=!1,C=0;function x(){return C===2}let A=!1;function b(...Y){A||(A=!0,e.apply(null,Y))}function R(Y){u=setTimeout(()=>{u=null,r(G,x())},Y)}function P(){d&&clearTimeout(d)}function G(Y,...Ee){if(A){P();return}if(Y){P(),b.call(null,Y,...Ee);return}if(x()||E){P(),b.call(null,Y,...Ee);return}a<64&&(a*=2);let ne;C===1?(C=2,ne=0):ne=(a+Math.random())*1e3,R(ne)}let Q=!1;function J(Y){Q||(Q=!0,P(),!A&&(u!==null?(Y||(C=2),clearTimeout(u),R(0)):Y||(C=1)))}return R(0),d=setTimeout(()=>{E=!0,J(!0)},t),J}function hN(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(r){return r!==void 0}function HE(r,e,t,a){if(a<e)throw zE(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>t)throw zE(`Invalid value for '${r}'. Expected ${t} or less.`)}function dN(r){const e=encodeURIComponent;let t="?";for(const a in r)if(r.hasOwnProperty(a)){const u=e(a)+"="+e(r[a]);t=t+u+"&"}return t=t.slice(0,-1),t}var Rf;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Rf||(Rf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(r,e){const t=r>=500&&r<600,u=[408,429].indexOf(r)!==-1,d=e.indexOf(r)!==-1;return t||u||d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,a,u,d,E,C,x,A,b,R,P=!0,G=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=u,this.successCodes_=d,this.additionalRetryCodes_=E,this.callback_=C,this.errorCallback_=x,this.timeout_=A,this.progressCallback_=b,this.connectionFactory_=R,this.retry=P,this.isUsingEmulator=G,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,J)=>{this.resolve_=Q,this.reject_=J,this.start_()})}start_(){const e=(a,u)=>{if(u){a(!1,new jh(!1,null,!0));return}const d=this.connectionFactory_();this.pendingConnection_=d;const E=C=>{const x=C.loaded,A=C.lengthComputable?C.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,A)};this.progressCallback_!==null&&d.addUploadProgressListener(E),d.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&d.removeUploadProgressListener(E),this.pendingConnection_=null;const C=d.getErrorCode()===Rf.NO_ERROR,x=d.getStatus();if(!C||gN(x,this.additionalRetryCodes_)&&this.retry){const b=d.getErrorCode()===Rf.ABORT;a(!1,new jh(!1,null,b));return}const A=this.successCodes_.indexOf(x)!==-1;a(!0,new jh(A,d))})},t=(a,u)=>{const d=this.resolve_,E=this.reject_,C=u.connection;if(u.wasSuccessCode)try{const x=this.callback_(C,C.getResponse());fN(x)?d(x):d()}catch(x){E(x)}else if(C!==null){const x=iN();x.serverResponse=C.getErrorText(),this.errorCallback_?E(this.errorCallback_(C,x)):E(x)}else if(u.canceled){const x=this.appDelete_?hx():sN();E(x)}else{const x=rN();E(x)}};this.canceled_?t(!1,new jh(!1,null,!0)):this.backoffId_=uN(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&hN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jh{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function pN(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function yN(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EN(r,e){e&&(r["X-Firebase-GMPID"]=e)}function _N(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function AN(r,e,t,a,u,d,E=!0,C=!1){const x=dN(r.urlParams),A=r.url+x,b=Object.assign({},r.headers);return EN(b,e),pN(b,t),yN(b,d),_N(b,a),new mN(A,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,u,E,C)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function xN(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this._service=e,t instanceof ls?this._location=t:this._location=ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Nf(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xN(this._location.path)}get storage(){return this._service}get parent(){const e=wN(this._location.path);if(e===null)return null;const t=new ls(this._location.bucket,e);return new Nf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lN(e)}}function GE(r,e){const t=e?.[eN];return t==null?null:ls.makeFromBucketSpec(t,r)}function TN(r,e,t,a={}){r.host=`${e}:${t}`;const u=il(e);u&&(ng(`https://${r.host}/b`),ig("Storage",!0)),r._isUsingEmulator=!0,r._protocol=u?"https":"http";const{mockUserToken:d}=a;d&&(r._overrideAuthToken=typeof d=="string"?d:I_(d,r.app.options.projectId))}class CN{constructor(e,t,a,u,d,E=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=u,this._firebaseVersion=d,this._isUsingEmulator=E,this._bucket=null,this._host=ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tN,this._maxUploadRetryTime=nN,this._requests=new Set,u!=null?this._bucket=ls.makeFromBucketSpec(u,this._host):this._bucket=GE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ls.makeFromBucketSpec(this._url,e):this._bucket=GE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nf(this,e)}_makeRequest(e,t,a,u,d=!0){if(this._deleted)return new cN(hx());{const E=AN(e,this._appId,a,u,t,this._firebaseVersion,d,this._isUsingEmulator);return this._requests.add(E),E.getPromise().then(()=>this._requests.delete(E),()=>this._requests.delete(E)),E}}async makeRequestWithTokens(e,t){const[a,u]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,u).getPromise()}}const jE="@firebase/storage",qE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="storage";function vN(r=Ff(),e){r=yi(r);const a=yo(r,fx).getImmediate({identifier:e}),u=v_("storage");return u&&bN(a,...u),a}function bN(r,e,t,a={}){TN(r,e,t,a)}function SN(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),u=r.getProvider("app-check-internal");return new CN(t,a,u,e,sl)}function IN(){hs(new Xr(fx,SN,"PUBLIC").setMultipleInstances(!0)),ar(jE,qE,""),ar(jE,qE,"esm2020")}IN();const RN={apiKey:"AIzaSyCLL-yZ9m6vgZ04Yj0x-wDjtxkJOzCiEMc",authDomain:"basecamp-app-e6386.firebaseapp.com",projectId:"basecamp-app-e6386",storageBucket:"basecamp-app-e6386.firebasestorage.app",messagingSenderId:"929651436196",appId:"1:929651436196:web:790b5001a09d8db991d431",measurementId:"G-L0L3JE5SCM"},cd=L_(RN);NS(cd);const sf=D4(cd),Yo=B6(cd);vN(cd);const dx=ye.createContext(),NN=({children:r})=>{const[e,t]=ye.useState(null),[a,u]=ye.useState(null);return ye.useEffect(()=>{const d=vA(sf,async E=>{if(E){t(E);const C=qo(Yo,"profiles",E.uid),x=await If(C);x.exists()?u(x.data()):u(null)}else t(null),u(null)});return()=>d()},[]),Te.jsx(dx.Provider,{value:{user:e,setUser:t,profile:a,setProfile:u},children:r})},gx=()=>ye.useContext(dx);function ON({lang:r}){const{user:e,profile:t,setProfile:a}=gx(),E=r==="zh"?[{id:1,text:"找同事喝咖啡(掃描QRCODE以完成任務)",point:10},{id:2,text:"和同事吃午餐(掃描QRCODE以完成任務)",point:10},{id:3,text:"共用辦公設備",point:10},{id:4,text:"一起參加公司活動",point:20},{id:5,text:"認識實習生(掃描QRCODE以完成任務)連結gmail",point:20},{id:6,text:"分享工作經驗",point:15},{id:7,text:"參與團隊會議並提出建議",point:15},{id:8,text:"組織團隊建設活動",point:25},{id:9,text:"參加公司志願者活動",point:30},{id:10,text:"推薦優秀人才加入公司",point:50},{id:11,text:"與同事合作完成專案",point:40},{id:12,text:"參加跨部門合作",point:35},{id:13,text:"完成編輯個人檔案",point:15}]:[{id:1,text:"Have coffee with colleagues",point:10},{id:2,text:"Have lunch together",point:10},{id:3,text:"Share office equipment",point:10},{id:4,text:"Participate in company events",point:20},{id:5,text:"Get to know interns",point:20},{id:6,text:"Share work experience",point:15},{id:7,text:"Attend team meetings and provide suggestions",point:15},{id:8,text:"Organize team-building activities",point:25},{id:9,text:"Join company volunteer activities",point:30},{id:10,text:"Refer talented individuals to join the company",point:50},{id:11,text:"Collaborate with colleagues to complete projects",point:40},{id:12,text:"Participate in cross-departmental collaboration",point:35},{id:13,text:"Complete and edit personal profile",point:15}],[C,x]=ye.useState(t?.completedIds||[]),[A,b]=ye.useState("tasks");ye.useEffect(()=>{x(t?.completedIds||[])},[t]);const R=async P=>{if(!e||!t||C.includes(P.id))return;const G=(t.scores||0)+P.point,Q=[...C,P.id],J=qo(Yo,"profiles",e.uid);await Jg(J,{scores:G,completedIds:Q}),a({...t,scores:G,completedIds:Q}),x(Q)};return Te.jsxs("div",{className:"page-container",style:{textAlign:"center"},children:[Te.jsx("h2",{children:r==="zh"?"社交任務":"Social Tasks"}),Te.jsx("p",{children:r==="zh"?"完成與同梯互動的任務":"Complete social tasks with colleagues"}),Te.jsxs("div",{style:{marginBottom:"20px"},children:[Te.jsx("button",{onClick:()=>b("tasks"),style:{marginRight:"10px",backgroundColor:A==="tasks"?"#4caf50":"#eee",color:A==="tasks"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:r==="zh"?"任務列表":"Task List"}),Te.jsx("button",{onClick:()=>b("completed"),style:{backgroundColor:A==="completed"?"#4caf50":"#eee",color:A==="completed"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:r==="zh"?"已完成任務":"Completed Tasks"})]}),A==="completed"&&Te.jsx(ly,{tasks:E.filter(P=>C.includes(P.id)),completedIds:C,onComplete:()=>{},lang:r}),A==="tasks"&&Te.jsx(ly,{tasks:E.filter(P=>!C.includes(P.id)),completedIds:C,onComplete:R,lang:r})]})}function DN({lang:r}){const e=[{id:1,text_zh:"咖啡券",text_en:"Coffee Coupon",points:30},{id:2,text_zh:"小點心",text_en:"Snack",points:50},{id:3,text_zh:"電影票",text_en:"Movie Ticket",points:200},{id:4,text_zh:"購物禮券",text_en:"Shopping Voucher",points:100},{id:5,text_zh:"電子產品折扣",text_en:"Electronics Discount",points:300}],{user:t,profile:a,setProfile:u}=gx(),[d,E]=ye.useState([]),[C,x]=ye.useState("progress");ye.useEffect(()=>{if(!t)return;(async()=>{const R=qo(Yo,"profiles",t.uid),P=await If(R);if(P.exists()){const G=P.data();E(G.redeemedIds||[])}})()},[t]);const A=async b=>{if(!(!a||!t)&&a.scores>=b.points&&!d.includes(b.id)){const R=a.scores-b.points,P=[...d,b.id],G=qo(Yo,"profiles",t.uid);await Jg(G,{scores:R,redeemedIds:P}),u({...a,scores:R}),E(P),alert(r==="zh"?"🎉 兌換成功！":"🎉 Redeemed!")}};return Te.jsxs("div",{className:"page-container",style:{maxWidth:500,margin:"0 auto",textAlign:"center"},children:[Te.jsx("h2",{children:r==="zh"?"獎勵頁面":"Rewards Page"}),Te.jsxs("div",{style:{marginBottom:20},children:[Te.jsx("button",{onClick:()=>x("progress"),style:{marginRight:10,backgroundColor:C==="progress"?"#4caf50":"#eee",color:C==="progress"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:r==="zh"?"分數進度":"Progress"}),Te.jsx("button",{onClick:()=>x("list"),style:{backgroundColor:C==="list"?"#4caf50":"#eee",color:C==="list"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:r==="zh"?"可兌換獎勵":"Reward List"})]}),C==="progress"&&Te.jsxs("div",{children:[Te.jsxs("p",{children:[r==="zh"?"你的分數: ":"Your Score: "," ",a?.scores||0]}),Te.jsx("div",{style:{height:25,width:"100%",backgroundColor:"#eee",borderRadius:12,overflow:"hidden",marginBottom:10},children:Te.jsx("div",{style:{width:`${Math.min((a?.scores||0)%30/30,1)*100}%`,height:"100%",backgroundColor:"#4caf50",transition:"width 0.3s"}})})]}),C==="list"&&Te.jsx("ul",{style:{listStyle:"none",padding:0},children:e.map(b=>{const R=d.includes(b.id);return Te.jsxs("li",{style:{marginBottom:10,padding:10,border:"1px solid #ccc",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:R?"#f6fff6":"#fff"},children:[Te.jsxs("span",{children:[r==="zh"?b.text_zh:b.text_en," - ",b.points," ",r==="zh"?"分":"pts"]}),Te.jsx("button",{onClick:()=>A(b),disabled:R||(a?.scores||0)<b.points,style:{padding:"5px 10px",border:"none",borderRadius:6,backgroundColor:R?"#9e9e9e":"#4caf50",color:"#fff",cursor:R||(a?.scores||0)<b.points?"not-allowed":"pointer"},children:R?r==="zh"?"已兌換":"Redeemed":r==="zh"?"兌換":"Redeem"})]},b.id)})})]})}var MN=Object.defineProperty,Of=Object.getOwnPropertySymbols,mx=Object.prototype.hasOwnProperty,px=Object.prototype.propertyIsEnumerable,XE=(r,e,t)=>e in r?MN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Y0=(r,e)=>{for(var t in e||(e={}))mx.call(e,t)&&XE(r,t,e[t]);if(Of)for(var t of Of(e))px.call(e,t)&&XE(r,t,e[t]);return r},K0=(r,e)=>{var t={};for(var a in r)mx.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&Of)for(var a of Of(r))e.indexOf(a)<0&&px.call(r,a)&&(t[a]=r[a]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var el;(r=>{const e=class It{constructor(x,A,b,R){if(this.version=x,this.errorCorrectionLevel=A,this.modules=[],this.isFunction=[],x<It.MIN_VERSION||x>It.MAX_VERSION)throw new RangeError("Version value out of range");if(R<-1||R>7)throw new RangeError("Mask value out of range");this.size=x*4+17;let P=[];for(let Q=0;Q<this.size;Q++)P.push(!1);for(let Q=0;Q<this.size;Q++)this.modules.push(P.slice()),this.isFunction.push(P.slice());this.drawFunctionPatterns();const G=this.addEccAndInterleave(b);if(this.drawCodewords(G),R==-1){let Q=1e9;for(let J=0;J<8;J++){this.applyMask(J),this.drawFormatBits(J);const Y=this.getPenaltyScore();Y<Q&&(R=J,Q=Y),this.applyMask(J)}}u(0<=R&&R<=7),this.mask=R,this.applyMask(R),this.drawFormatBits(R),this.isFunction=[]}static encodeText(x,A){const b=r.QrSegment.makeSegments(x);return It.encodeSegments(b,A)}static encodeBinary(x,A){const b=r.QrSegment.makeBytes(x);return It.encodeSegments([b],A)}static encodeSegments(x,A,b=1,R=40,P=-1,G=!0){if(!(It.MIN_VERSION<=b&&b<=R&&R<=It.MAX_VERSION)||P<-1||P>7)throw new RangeError("Invalid value");let Q,J;for(Q=b;;Q++){const ne=It.getNumDataCodewords(Q,A)*8,Se=E.getTotalBits(x,Q);if(Se<=ne){J=Se;break}if(Q>=R)throw new RangeError("Data too long")}for(const ne of[It.Ecc.MEDIUM,It.Ecc.QUARTILE,It.Ecc.HIGH])G&&J<=It.getNumDataCodewords(Q,ne)*8&&(A=ne);let Y=[];for(const ne of x){t(ne.mode.modeBits,4,Y),t(ne.numChars,ne.mode.numCharCountBits(Q),Y);for(const Se of ne.getData())Y.push(Se)}u(Y.length==J);const Ee=It.getNumDataCodewords(Q,A)*8;u(Y.length<=Ee),t(0,Math.min(4,Ee-Y.length),Y),t(0,(8-Y.length%8)%8,Y),u(Y.length%8==0);for(let ne=236;Y.length<Ee;ne^=253)t(ne,8,Y);let ue=[];for(;ue.length*8<Y.length;)ue.push(0);return Y.forEach((ne,Se)=>ue[Se>>>3]|=ne<<7-(Se&7)),new It(Q,A,ue,P)}getModule(x,A){return 0<=x&&x<this.size&&0<=A&&A<this.size&&this.modules[A][x]}getModules(){return this.modules}drawFunctionPatterns(){for(let b=0;b<this.size;b++)this.setFunctionModule(6,b,b%2==0),this.setFunctionModule(b,6,b%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const x=this.getAlignmentPatternPositions(),A=x.length;for(let b=0;b<A;b++)for(let R=0;R<A;R++)b==0&&R==0||b==0&&R==A-1||b==A-1&&R==0||this.drawAlignmentPattern(x[b],x[R]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(x){const A=this.errorCorrectionLevel.formatBits<<3|x;let b=A;for(let P=0;P<10;P++)b=b<<1^(b>>>9)*1335;const R=(A<<10|b)^21522;u(R>>>15==0);for(let P=0;P<=5;P++)this.setFunctionModule(8,P,a(R,P));this.setFunctionModule(8,7,a(R,6)),this.setFunctionModule(8,8,a(R,7)),this.setFunctionModule(7,8,a(R,8));for(let P=9;P<15;P++)this.setFunctionModule(14-P,8,a(R,P));for(let P=0;P<8;P++)this.setFunctionModule(this.size-1-P,8,a(R,P));for(let P=8;P<15;P++)this.setFunctionModule(8,this.size-15+P,a(R,P));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let x=this.version;for(let b=0;b<12;b++)x=x<<1^(x>>>11)*7973;const A=this.version<<12|x;u(A>>>18==0);for(let b=0;b<18;b++){const R=a(A,b),P=this.size-11+b%3,G=Math.floor(b/3);this.setFunctionModule(P,G,R),this.setFunctionModule(G,P,R)}}drawFinderPattern(x,A){for(let b=-4;b<=4;b++)for(let R=-4;R<=4;R++){const P=Math.max(Math.abs(R),Math.abs(b)),G=x+R,Q=A+b;0<=G&&G<this.size&&0<=Q&&Q<this.size&&this.setFunctionModule(G,Q,P!=2&&P!=4)}}drawAlignmentPattern(x,A){for(let b=-2;b<=2;b++)for(let R=-2;R<=2;R++)this.setFunctionModule(x+R,A+b,Math.max(Math.abs(R),Math.abs(b))!=1)}setFunctionModule(x,A,b){this.modules[A][x]=b,this.isFunction[A][x]=!0}addEccAndInterleave(x){const A=this.version,b=this.errorCorrectionLevel;if(x.length!=It.getNumDataCodewords(A,b))throw new RangeError("Invalid argument");const R=It.NUM_ERROR_CORRECTION_BLOCKS[b.ordinal][A],P=It.ECC_CODEWORDS_PER_BLOCK[b.ordinal][A],G=Math.floor(It.getNumRawDataModules(A)/8),Q=R-G%R,J=Math.floor(G/R);let Y=[];const Ee=It.reedSolomonComputeDivisor(P);for(let ne=0,Se=0;ne<R;ne++){let ke=x.slice(Se,Se+J-P+(ne<Q?0:1));Se+=ke.length;const Ue=It.reedSolomonComputeRemainder(ke,Ee);ne<Q&&ke.push(0),Y.push(ke.concat(Ue))}let ue=[];for(let ne=0;ne<Y[0].length;ne++)Y.forEach((Se,ke)=>{(ne!=J-P||ke>=Q)&&ue.push(Se[ne])});return u(ue.length==G),ue}drawCodewords(x){if(x.length!=Math.floor(It.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let A=0;for(let b=this.size-1;b>=1;b-=2){b==6&&(b=5);for(let R=0;R<this.size;R++)for(let P=0;P<2;P++){const G=b-P,J=(b+1&2)==0?this.size-1-R:R;!this.isFunction[J][G]&&A<x.length*8&&(this.modules[J][G]=a(x[A>>>3],7-(A&7)),A++)}}u(A==x.length*8)}applyMask(x){if(x<0||x>7)throw new RangeError("Mask value out of range");for(let A=0;A<this.size;A++)for(let b=0;b<this.size;b++){let R;switch(x){case 0:R=(b+A)%2==0;break;case 1:R=A%2==0;break;case 2:R=b%3==0;break;case 3:R=(b+A)%3==0;break;case 4:R=(Math.floor(b/3)+Math.floor(A/2))%2==0;break;case 5:R=b*A%2+b*A%3==0;break;case 6:R=(b*A%2+b*A%3)%2==0;break;case 7:R=((b+A)%2+b*A%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[A][b]&&R&&(this.modules[A][b]=!this.modules[A][b])}}getPenaltyScore(){let x=0;for(let P=0;P<this.size;P++){let G=!1,Q=0,J=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[P][Y]==G?(Q++,Q==5?x+=It.PENALTY_N1:Q>5&&x++):(this.finderPenaltyAddHistory(Q,J),G||(x+=this.finderPenaltyCountPatterns(J)*It.PENALTY_N3),G=this.modules[P][Y],Q=1);x+=this.finderPenaltyTerminateAndCount(G,Q,J)*It.PENALTY_N3}for(let P=0;P<this.size;P++){let G=!1,Q=0,J=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[Y][P]==G?(Q++,Q==5?x+=It.PENALTY_N1:Q>5&&x++):(this.finderPenaltyAddHistory(Q,J),G||(x+=this.finderPenaltyCountPatterns(J)*It.PENALTY_N3),G=this.modules[Y][P],Q=1);x+=this.finderPenaltyTerminateAndCount(G,Q,J)*It.PENALTY_N3}for(let P=0;P<this.size-1;P++)for(let G=0;G<this.size-1;G++){const Q=this.modules[P][G];Q==this.modules[P][G+1]&&Q==this.modules[P+1][G]&&Q==this.modules[P+1][G+1]&&(x+=It.PENALTY_N2)}let A=0;for(const P of this.modules)A=P.reduce((G,Q)=>G+(Q?1:0),A);const b=this.size*this.size,R=Math.ceil(Math.abs(A*20-b*10)/b)-1;return u(0<=R&&R<=9),x+=R*It.PENALTY_N4,u(0<=x&&x<=2568888),x}getAlignmentPatternPositions(){if(this.version==1)return[];{const x=Math.floor(this.version/7)+2,A=this.version==32?26:Math.ceil((this.version*4+4)/(x*2-2))*2;let b=[6];for(let R=this.size-7;b.length<x;R-=A)b.splice(1,0,R);return b}}static getNumRawDataModules(x){if(x<It.MIN_VERSION||x>It.MAX_VERSION)throw new RangeError("Version number out of range");let A=(16*x+128)*x+64;if(x>=2){const b=Math.floor(x/7)+2;A-=(25*b-10)*b-55,x>=7&&(A-=36)}return u(208<=A&&A<=29648),A}static getNumDataCodewords(x,A){return Math.floor(It.getNumRawDataModules(x)/8)-It.ECC_CODEWORDS_PER_BLOCK[A.ordinal][x]*It.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][x]}static reedSolomonComputeDivisor(x){if(x<1||x>255)throw new RangeError("Degree out of range");let A=[];for(let R=0;R<x-1;R++)A.push(0);A.push(1);let b=1;for(let R=0;R<x;R++){for(let P=0;P<A.length;P++)A[P]=It.reedSolomonMultiply(A[P],b),P+1<A.length&&(A[P]^=A[P+1]);b=It.reedSolomonMultiply(b,2)}return A}static reedSolomonComputeRemainder(x,A){let b=A.map(R=>0);for(const R of x){const P=R^b.shift();b.push(0),A.forEach((G,Q)=>b[Q]^=It.reedSolomonMultiply(G,P))}return b}static reedSolomonMultiply(x,A){if(x>>>8||A>>>8)throw new RangeError("Byte out of range");let b=0;for(let R=7;R>=0;R--)b=b<<1^(b>>>7)*285,b^=(A>>>R&1)*x;return u(b>>>8==0),b}finderPenaltyCountPatterns(x){const A=x[1];u(A<=this.size*3);const b=A>0&&x[2]==A&&x[3]==A*3&&x[4]==A&&x[5]==A;return(b&&x[0]>=A*4&&x[6]>=A?1:0)+(b&&x[6]>=A*4&&x[0]>=A?1:0)}finderPenaltyTerminateAndCount(x,A,b){return x&&(this.finderPenaltyAddHistory(A,b),A=0),A+=this.size,this.finderPenaltyAddHistory(A,b),this.finderPenaltyCountPatterns(b)}finderPenaltyAddHistory(x,A){A[0]==0&&(x+=this.size),A.pop(),A.unshift(x)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=e;function t(C,x,A){if(x<0||x>31||C>>>x)throw new RangeError("Value out of range");for(let b=x-1;b>=0;b--)A.push(C>>>b&1)}function a(C,x){return(C>>>x&1)!=0}function u(C){if(!C)throw new Error("Assertion error")}const d=class Un{constructor(x,A,b){if(this.mode=x,this.numChars=A,this.bitData=b,A<0)throw new RangeError("Invalid argument");this.bitData=b.slice()}static makeBytes(x){let A=[];for(const b of x)t(b,8,A);return new Un(Un.Mode.BYTE,x.length,A)}static makeNumeric(x){if(!Un.isNumeric(x))throw new RangeError("String contains non-numeric characters");let A=[];for(let b=0;b<x.length;){const R=Math.min(x.length-b,3);t(parseInt(x.substring(b,b+R),10),R*3+1,A),b+=R}return new Un(Un.Mode.NUMERIC,x.length,A)}static makeAlphanumeric(x){if(!Un.isAlphanumeric(x))throw new RangeError("String contains unencodable characters in alphanumeric mode");let A=[],b;for(b=0;b+2<=x.length;b+=2){let R=Un.ALPHANUMERIC_CHARSET.indexOf(x.charAt(b))*45;R+=Un.ALPHANUMERIC_CHARSET.indexOf(x.charAt(b+1)),t(R,11,A)}return b<x.length&&t(Un.ALPHANUMERIC_CHARSET.indexOf(x.charAt(b)),6,A),new Un(Un.Mode.ALPHANUMERIC,x.length,A)}static makeSegments(x){return x==""?[]:Un.isNumeric(x)?[Un.makeNumeric(x)]:Un.isAlphanumeric(x)?[Un.makeAlphanumeric(x)]:[Un.makeBytes(Un.toUtf8ByteArray(x))]}static makeEci(x){let A=[];if(x<0)throw new RangeError("ECI assignment value out of range");if(x<128)t(x,8,A);else if(x<16384)t(2,2,A),t(x,14,A);else if(x<1e6)t(6,3,A),t(x,21,A);else throw new RangeError("ECI assignment value out of range");return new Un(Un.Mode.ECI,0,A)}static isNumeric(x){return Un.NUMERIC_REGEX.test(x)}static isAlphanumeric(x){return Un.ALPHANUMERIC_REGEX.test(x)}getData(){return this.bitData.slice()}static getTotalBits(x,A){let b=0;for(const R of x){const P=R.mode.numCharCountBits(A);if(R.numChars>=1<<P)return 1/0;b+=4+P+R.bitData.length}return b}static toUtf8ByteArray(x){x=encodeURI(x);let A=[];for(let b=0;b<x.length;b++)x.charAt(b)!="%"?A.push(x.charCodeAt(b)):(A.push(parseInt(x.substring(b+1,b+3),16)),b+=2);return A}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let E=d;r.QrSegment=d})(el||(el={}));(r=>{(e=>{const t=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(r.QrCode||(r.QrCode={}))})(el||(el={}));(r=>{(e=>{const t=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(r.QrSegment||(r.QrSegment={}))})(el||(el={}));var ql=el;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var PN={L:ql.QrCode.Ecc.LOW,M:ql.QrCode.Ecc.MEDIUM,Q:ql.QrCode.Ecc.QUARTILE,H:ql.QrCode.Ecc.HIGH},yx=128,Ex="L",_x="#FFFFFF",Ax="#000000",wx=!1,xx=1,LN=4,kN=0,BN=.1;function Tx(r,e=0){const t=[];return r.forEach(function(a,u){let d=null;a.forEach(function(E,C){if(!E&&d!==null){t.push(`M${d+e} ${u+e}h${C-d}v1H${d+e}z`),d=null;return}if(C===a.length-1){if(!E)return;d===null?t.push(`M${C+e},${u+e} h1v1H${C+e}z`):t.push(`M${d+e},${u+e} h${C+1-d}v1H${d+e}z`);return}E&&d===null&&(d=C)})}),t.join("")}function Cx(r,e){return r.slice().map((t,a)=>a<e.y||a>=e.y+e.h?t:t.map((u,d)=>d<e.x||d>=e.x+e.w?u:!1))}function VN(r,e,t,a){if(a==null)return null;const u=r.length+t*2,d=Math.floor(e*BN),E=u/e,C=(a.width||d)*E,x=(a.height||d)*E,A=a.x==null?r.length/2-C/2:a.x*E,b=a.y==null?r.length/2-x/2:a.y*E,R=a.opacity==null?1:a.opacity;let P=null;if(a.excavate){let Q=Math.floor(A),J=Math.floor(b),Y=Math.ceil(C+A-Q),Ee=Math.ceil(x+b-J);P={x:Q,y:J,w:Y,h:Ee}}const G=a.crossOrigin;return{x:A,y:b,h:x,w:C,excavation:P,opacity:R,crossOrigin:G}}function UN(r,e){return e!=null?Math.max(Math.floor(e),0):r?LN:kN}function vx({value:r,level:e,minVersion:t,includeMargin:a,marginSize:u,imageSettings:d,size:E,boostLevel:C}){let x=ai.useMemo(()=>{const Q=(Array.isArray(r)?r:[r]).reduce((J,Y)=>(J.push(...ql.QrSegment.makeSegments(Y)),J),[]);return ql.QrCode.encodeSegments(Q,PN[e],t,void 0,void 0,C)},[r,e,t,C]);const{cells:A,margin:b,numCells:R,calculatedImageSettings:P}=ai.useMemo(()=>{let G=x.getModules();const Q=UN(a,u),J=G.length+Q*2,Y=VN(G,E,Q,d);return{cells:G,margin:Q,numCells:J,calculatedImageSettings:Y}},[x,E,d,a,u]);return{qrcode:x,margin:b,cells:A,numCells:R,calculatedImageSettings:P}}var FN=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),bx=ai.forwardRef(function(e,t){const a=e,{value:u,size:d=yx,level:E=Ex,bgColor:C=_x,fgColor:x=Ax,includeMargin:A=wx,minVersion:b=xx,boostLevel:R,marginSize:P,imageSettings:G}=a,J=K0(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:Y}=J,Ee=K0(J,["style"]),ue=G?.src,ne=ai.useRef(null),Se=ai.useRef(null),ke=ai.useCallback(it=>{ne.current=it,typeof t=="function"?t(it):t&&(t.current=it)},[t]),[Ue,F]=ai.useState(!1),{margin:z,cells:B,numCells:ee,calculatedImageSettings:X}=vx({value:u,level:E,minVersion:b,boostLevel:R,includeMargin:A,marginSize:P,imageSettings:G,size:d});ai.useEffect(()=>{if(ne.current!=null){const it=ne.current,ce=it.getContext("2d");if(!ce)return;let pe=B;const Ae=Se.current,qe=X!=null&&Ae!==null&&Ae.complete&&Ae.naturalHeight!==0&&Ae.naturalWidth!==0;qe&&X.excavation!=null&&(pe=Cx(B,X.excavation));const ht=window.devicePixelRatio||1;it.height=it.width=d*ht;const Z=d/ee*ht;ce.scale(Z,Z),ce.fillStyle=C,ce.fillRect(0,0,ee,ee),ce.fillStyle=x,FN?ce.fill(new Path2D(Tx(pe,z))):B.forEach(function(be,Le){be.forEach(function(Be,Fe){Be&&ce.fillRect(Fe+z,Le+z,1,1)})}),X&&(ce.globalAlpha=X.opacity),qe&&ce.drawImage(Ae,X.x+z,X.y+z,X.w,X.h)}}),ai.useEffect(()=>{F(!1)},[ue]);const K=Y0({height:d,width:d},Y);let j=null;return ue!=null&&(j=ai.createElement("img",{src:ue,key:ue,style:{display:"none"},onLoad:()=>{F(!0)},ref:Se,crossOrigin:X?.crossOrigin})),ai.createElement(ai.Fragment,null,ai.createElement("canvas",Y0({style:K,height:d,width:d,ref:ke,role:"img"},Ee)),j)});bx.displayName="QRCodeCanvas";var zN=ai.forwardRef(function(e,t){const a=e,{value:u,size:d=yx,level:E=Ex,bgColor:C=_x,fgColor:x=Ax,includeMargin:A=wx,minVersion:b=xx,boostLevel:R,title:P,marginSize:G,imageSettings:Q}=a,J=K0(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:Y,cells:Ee,numCells:ue,calculatedImageSettings:ne}=vx({value:u,level:E,minVersion:b,boostLevel:R,includeMargin:A,marginSize:G,imageSettings:Q,size:d});let Se=Ee,ke=null;Q!=null&&ne!=null&&(ne.excavation!=null&&(Se=Cx(Ee,ne.excavation)),ke=ai.createElement("image",{href:Q.src,height:ne.h,width:ne.w,x:ne.x+Y,y:ne.y+Y,preserveAspectRatio:"none",opacity:ne.opacity,crossOrigin:ne.crossOrigin}));const Ue=Tx(Se,Y);return ai.createElement("svg",Y0({height:d,width:d,viewBox:`0 0 ${ue} ${ue}`,ref:t,role:"img"},J),!!P&&ai.createElement("title",null,P),ai.createElement("path",{fill:C,d:`M0,0 h${ue}v${ue}H0z`,shapeRendering:"crispEdges"}),ai.createElement("path",{fill:x,d:Ue,shapeRendering:"crispEdges"}),ke)});zN.displayName="QRCodeSVG";function HN({profile:r}){if(!r)return null;const e={name:r.name,title:r.title,years:r.years,factory:r.factory,phone:r.phone,birthday:r.birthday,email:r.email};return Te.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[Te.jsx("h3",{className:"font-semibold text-sm",children:"我的 QR Code"}),Te.jsx(bx,{value:JSON.stringify(e),size:180,bgColor:"#ffffff",fgColor:"#000000",level:"Q",includeMargin:!0})]})}var Ge;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var YE=new Map([[Ge.QR_CODE,"QR_CODE"],[Ge.AZTEC,"AZTEC"],[Ge.CODABAR,"CODABAR"],[Ge.CODE_39,"CODE_39"],[Ge.CODE_93,"CODE_93"],[Ge.CODE_128,"CODE_128"],[Ge.DATA_MATRIX,"DATA_MATRIX"],[Ge.MAXICODE,"MAXICODE"],[Ge.ITF,"ITF"],[Ge.EAN_13,"EAN_13"],[Ge.EAN_8,"EAN_8"],[Ge.PDF_417,"PDF_417"],[Ge.RSS_14,"RSS_14"],[Ge.RSS_EXPANDED,"RSS_EXPANDED"],[Ge.UPC_A,"UPC_A"],[Ge.UPC_E,"UPC_E"],[Ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),KE;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(KE||(KE={}));function GN(r){return Object.values(Ge).includes(r)}var Df;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Df||(Df={}));var jN=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Df.SCAN_TYPE_CAMERA,Df.SCAN_TYPE_FILE],r})(),Sx=(function(){function r(e,t){this.format=e,this.formatName=t}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!YE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,YE.get(e))},r})(),WE=(function(){function r(){}return r.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),W0;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(W0||(W0={}));var qN=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:W0.UNKWOWN_ERROR}},r})(),XN=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function ga(r){return typeof r>"u"||r===null}var Xl=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),Ix=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var a=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),E=Object.keys(e),C=0,x=E;C<x.length;C++){var A=x[C];if(d.has(A))return t.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},r})(),iu={exports:{}},YN=iu.exports,QE;function KN(){return QE||(QE=1,(function(r,e){(function(t,a){a(e)})(YN,(function(t){function a(D){return D==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,i){D.__proto__=i}||function(D,i){for(var o in i)i.hasOwnProperty(o)&&(D[o]=i[o])};function d(D,i){u(D,i);function o(){this.constructor=D}D.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function E(D,i){var o=Object.setPrototypeOf;o?o(D,i):D.__proto__=i}function C(D,i){i===void 0&&(i=D.constructor);var o=Error.captureStackTrace;o&&o(D,i)}var x=(function(D){d(i,D);function i(o){var l=this.constructor,h=D.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),E(h,l.prototype),C(h),h}return i})(Error);class A extends x{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}A.kind="Exception";class b extends A{}b.kind="ArgumentException";class R extends A{}R.kind="IllegalArgumentException";class P{constructor(i){if(this.binarizer=i,i===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,h){const f=this.binarizer.getLuminanceSource().crop(i,o,l,h);return new P(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class G extends A{static getChecksumInstance(){return new G}}G.kind="ChecksumException";class Q{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class J{static arraycopy(i,o,l,h,f){for(;f--;)l[h++]=i[o++]}static currentTimeMillis(){return Date.now()}}class Y extends A{}Y.kind="IndexOutOfBoundsException";class Ee extends Y{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}Ee.kind="ArrayIndexOutOfBoundsException";class ue{static fill(i,o){for(let l=0,h=i.length;l<h;l++)i[l]=o}static fillWithin(i,o,l,h){ue.rangeCheck(i.length,o,l);for(let f=o;f<l;f++)i[f]=h}static rangeCheck(i,o,l){if(o>l)throw new R("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new Ee(o);if(l>i)throw new Ee(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(f=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(f=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,h=i.length;l<h;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const h=l-o,f=new Int32Array(h);return J.arraycopy(i,o,f,0,h),f}static binarySearch(i,o,l){l===void 0&&(l=ue.numberComparator);let h=0,f=i.length-1;for(;h<=f;){const m=f+h>>1,y=l(o,i[m]);if(y>0)h=m+1;else if(y<0)f=m-1;else return m}return-h-1}static numberComparator(i,o){return i-o}}class ne{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}ne.MIN_VALUE_32_BITS=-2147483648,ne.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Se{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=Se.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=Se.makeArray(i);J.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let h=Math.floor(i/32),f=l[h];f&=~((1<<(i&31))-1);const m=l.length;for(;f===0;){if(++h===m)return o;f=l[h]}const y=h*32+ne.numberOfTrailingZeros(f);return y>o?o:y}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let h=Math.floor(i/32),f=~l[h];f&=~((1<<(i&31))-1);const m=l.length;for(;f===0;){if(++h===m)return o;f=~l[h]}const y=h*32+ne.numberOfTrailingZeros(f);return y>o?o:y}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new R;if(o===i)return;o--;const l=Math.floor(i/32),h=Math.floor(o/32),f=this.bits;for(let m=l;m<=h;m++){const y=m>l?0:i&31,v=(2<<(m<h?31:o&31))-(1<<y);f[m]|=v}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new R;if(o===i)return!0;o--;const h=Math.floor(i/32),f=Math.floor(o/32),m=this.bits;for(let y=h;y<=f;y++){const w=y>h?0:i&31,I=(2<<(y<f?31:o&31))-(1<<w)&4294967295;if((m[y]&I)!==(l?I:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new R("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=i.bits[l]}toBytes(i,o,l,h){for(let f=0;f<h;f++){let m=0;for(let y=0;y<8;y++)this.get(i)&&(m|=1<<7-y),i++;o[l+f]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[o-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=i[0]>>>f;for(let y=1;y<l;y++){const w=i[y];m|=w<<32-f,i[y-1]=m,m=w>>>f}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof Se))return!1;const o=i;return this.size===o.size&&ue.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ue.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new Se(this.size,this.bits.slice())}}var ke;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ke||(ke={}));var Ue=ke;class F extends A{static getFormatInstance(){return new F}}F.kind="FormatException";var z;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(z||(z={}));class B{constructor(i,o,l,...h){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,B.VALUE_IDENTIFIER_TO_ECI.set(i,this),B.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,y=f.length;m!==y;m++){const w=f[m];B.VALUES_TO_ECI.set(w,this)}for(const m of h)B.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new F("incorect value");const o=B.VALUES_TO_ECI.get(i);if(o===void 0)throw new F("incorect value");return o}static getCharacterSetECIByName(i){const o=B.NAME_TO_ECI.get(i);if(o===void 0)throw new F("incorect value");return o}equals(i){if(!(i instanceof B))return!1;const o=i;return this.getName()===o.getName()}}B.VALUE_IDENTIFIER_TO_ECI=new Map,B.VALUES_TO_ECI=new Map,B.NAME_TO_ECI=new Map,B.Cp437=new B(z.Cp437,Int32Array.from([0,2]),"Cp437"),B.ISO8859_1=new B(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),B.ISO8859_2=new B(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),B.ISO8859_3=new B(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),B.ISO8859_4=new B(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),B.ISO8859_5=new B(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),B.ISO8859_6=new B(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),B.ISO8859_7=new B(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),B.ISO8859_8=new B(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),B.ISO8859_9=new B(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),B.ISO8859_10=new B(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),B.ISO8859_11=new B(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),B.ISO8859_13=new B(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),B.ISO8859_14=new B(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),B.ISO8859_15=new B(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),B.ISO8859_16=new B(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),B.SJIS=new B(z.SJIS,20,"SJIS","Shift_JIS"),B.Cp1250=new B(z.Cp1250,21,"Cp1250","windows-1250"),B.Cp1251=new B(z.Cp1251,22,"Cp1251","windows-1251"),B.Cp1252=new B(z.Cp1252,23,"Cp1252","windows-1252"),B.Cp1256=new B(z.Cp1256,24,"Cp1256","windows-1256"),B.UnicodeBigUnmarked=new B(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),B.UTF8=new B(z.UTF8,26,"UTF8","UTF-8"),B.ASCII=new B(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),B.Big5=new B(z.Big5,28,"Big5"),B.GB18030=new B(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),B.EUC_KR=new B(z.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends A{}ee.kind="UnsupportedOperationException";class X{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!X.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof B?i:B.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(X.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=i.length;f<m;f++){let y=i[f].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(l.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ee(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(B.UTF8)||i.equals(B.ISO8859_1)||i.equals(B.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class K{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return X.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(Ue.CHARACTER_SET)!==void 0)return o.get(Ue.CHARACTER_SET).toString();const l=i.length;let h=!0,f=!0,m=!0,y=0,w=0,v=0,I=0,M=0,L=0,H=0,W=0,$=0,se=0,fe=0;const Oe=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Me=0;Me<l&&(h||f||m);Me++){const Ie=i[Me]&255;m&&(y>0?(Ie&128)===0?m=!1:y--:(Ie&128)!==0&&((Ie&64)===0?m=!1:(y++,(Ie&32)===0?w++:(y++,(Ie&16)===0?v++:(y++,(Ie&8)===0?I++:m=!1))))),h&&(Ie>127&&Ie<160?h=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&fe++),f&&(M>0?Ie<64||Ie===127||Ie>252?f=!1:M--:Ie===128||Ie===160||Ie>239?f=!1:Ie>160&&Ie<224?(L++,W=0,H++,H>$&&($=H)):Ie>127?(M++,H=0,W++,W>se&&(se=W)):(H=0,W=0))}return m&&y>0&&(m=!1),f&&M>0&&(f=!1),m&&(Oe||w+v+I>0)?K.UTF8:f&&(K.ASSUME_SHIFT_JIS||$>=3||se>=3)?K.SHIFT_JIS:h&&f?$===2&&L===2||fe*10>=l?K.SHIFT_JIS:K.ISO88591:h?K.ISO88591:f?K.SHIFT_JIS:m?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function h(m,y,w,v,I,M){if(m==="%%")return"%";if(o[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=o[l];break;case"c":H=o[l][0];break;case"f":H=parseFloat(o[l]).toFixed(m);break;case"p":H=parseFloat(o[l]).toPrecision(m);break;case"e":H=parseFloat(o[l]).toExponential(m);break;case"x":H=parseInt(o[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(o[l],L||10).toPrecision(m)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let W=parseInt(w),$=w&&w[0]+""=="0"?"0":" ";for(;H.length<W;)H=y!==void 0?H+$:$+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}static getBytes(i,o){return X.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}K.SHIFT_JIS=B.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=B.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=B.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class j{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=K.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let h=o;o<o+l;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class it{constructor(i,o,l,h){if(this.width=i,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=i),this.height=o,i<1||o<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,h=new it(l,o);for(let f=0;f<o;f++){const m=i[f];for(let y=0;y<l;y++)m[y]&&h.set(y,f)}return h}static parseFromString(i,o,l){if(i===null)throw new R("stringRepresentation cannot be null");const h=new Array(i.length);let f=0,m=0,y=-1,w=0,v=0;for(;v<i.length;)if(i.charAt(v)===`
`||i.charAt(v)==="\r"){if(f>m){if(y===-1)y=f-m;else if(f-m!==y)throw new R("row lengths do not match");m=f,w++}v++}else if(i.substring(v,v+o.length)===o)v+=o.length,h[f]=!0,f++;else if(i.substring(v,v+l.length)===l)v+=l.length,h[f]=!1,f++;else throw new R("illegal character encountered: "+i.substring(v));if(f>m){if(y===-1)y=f-m;else if(f-m!==y)throw new R("row lengths do not match");w++}const I=new it(y,w);for(let M=0;M<f;M++)h[M]&&I.set(Math.floor(M%y),Math.floor(M/y));return I}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new R("input matrix dimensions do not match");const o=new Se(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const y=f*l,w=i.getRow(f,o).getBitArray();for(let v=0;v<l;v++)h[y+v]^=w[v]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,h){if(o<0||i<0)throw new R("Left and top must be nonnegative");if(h<1||l<1)throw new R("Height and width must be at least 1");const f=i+l,m=o+h;if(m>this.height||f>this.width)throw new R("The region must fit inside the matrix");const y=this.rowSize,w=this.bits;for(let v=o;v<m;v++){const I=v*y;for(let M=i;M<f;M++)w[I+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new Se(this.width):o.clear();const l=this.rowSize,h=this.bits,f=i*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[f+m]);return o}setRow(i,o){J.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new Se(i),h=new Se(i);for(let f=0,m=Math.floor((o+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(o-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(o-1-f,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,h=this.bits;let f=i,m=o,y=-1,w=-1;for(let v=0;v<o;v++)for(let I=0;I<l;I++){const M=h[v*l+I];if(M!==0){if(v<m&&(m=v),v>w&&(w=v),I*32<f){let L=0;for(;(M<<31-L&4294967295)===0;)L++;I*32+L<f&&(f=I*32+L)}if(I*32+31>y){let L=31;for(;!(M>>>L);)L--;I*32+L>y&&(y=I*32+L)}}}return y<f||w<m?null:Int32Array.from([f,m,y-f+1,w-m+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/i;let f=l%i*32;const m=o[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,h])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/i);let f=Math.floor(l%i)*32;const m=o[l];let y=31;for(;!(m>>>y);)y--;return f+=y,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof it))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ue.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ue.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let h=new j;for(let f=0,m=this.height;f<m;f++){for(let y=0,w=this.width;y<w;y++)h.append(this.get(y,f)?i:o);h.append(l)}return h.toString()}clone(){return new it(this.width,this.height,this.rowSize,this.bits.slice())}}class ce extends A{static getNotFoundInstance(){return new ce}}ce.kind="NotFoundException";class pe extends Q{constructor(i){super(i),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new Se(h):o.clear(),this.initArrays(h);const f=l.getRow(i,this.luminances),m=this.buckets;for(let w=0;w<h;w++)m[(f[w]&255)>>pe.LUMINANCE_SHIFT]++;const y=pe.estimateBlackPoint(m);if(h<3)for(let w=0;w<h;w++)(f[w]&255)<y&&o.set(w);else{let w=f[0]&255,v=f[1]&255;for(let I=1;I<h-1;I++){const M=f[I+1]&255;(v*4-w-M)/2<y&&o.set(I),w=v,v=M}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),h=new it(o,l);this.initArrays(o);const f=this.buckets;for(let w=1;w<5;w++){const v=Math.floor(l*w/5),I=i.getRow(v,this.luminances),M=Math.floor(o*4/5);for(let L=Math.floor(o/5);L<M;L++){const H=I[L]&255;f[H>>pe.LUMINANCE_SHIFT]++}}const m=pe.estimateBlackPoint(f),y=i.getMatrix();for(let w=0;w<l;w++){const v=w*o;for(let I=0;I<o;I++)(y[v+I]&255)<m&&h.set(I,w)}return h}createBinarizer(i){return new pe(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<pe.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,h=0,f=0;for(let I=0;I<o;I++)i[I]>f&&(h=I,f=i[I]),i[I]>l&&(l=i[I]);let m=0,y=0;for(let I=0;I<o;I++){const M=I-h,L=i[I]*M*M;L>y&&(m=I,y=L)}if(h>m){const I=h;h=m,m=I}if(m-h<=o/16)throw new ce;let w=m-1,v=-1;for(let I=m-1;I>h;I--){const M=I-h,L=M*M*(m-I)*(l-i[I]);L>v&&(w=I,v=L)}return w<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class Ae extends pe{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=Ae.MINIMUM_DIMENSION&&l>=Ae.MINIMUM_DIMENSION){const h=i.getMatrix();let f=o>>Ae.BLOCK_SIZE_POWER;(o&Ae.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>Ae.BLOCK_SIZE_POWER;(l&Ae.BLOCK_SIZE_MASK)!==0&&m++;const y=Ae.calculateBlackPoints(h,f,m,o,l),w=new it(o,l);Ae.calculateThresholdForBlock(h,f,m,o,l,y,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new Ae(i)}static calculateThresholdForBlock(i,o,l,h,f,m,y){const w=f-Ae.BLOCK_SIZE,v=h-Ae.BLOCK_SIZE;for(let I=0;I<l;I++){let M=I<<Ae.BLOCK_SIZE_POWER;M>w&&(M=w);const L=Ae.cap(I,2,l-3);for(let H=0;H<o;H++){let W=H<<Ae.BLOCK_SIZE_POWER;W>v&&(W=v);const $=Ae.cap(H,2,o-3);let se=0;for(let Oe=-2;Oe<=2;Oe++){const Me=m[L+Oe];se+=Me[$-2]+Me[$-1]+Me[$]+Me[$+1]+Me[$+2]}const fe=se/25;Ae.thresholdBlock(i,W,M,fe,h,y)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,h,f,m){for(let y=0,w=l*f+o;y<Ae.BLOCK_SIZE;y++,w+=f)for(let v=0;v<Ae.BLOCK_SIZE;v++)(i[w+v]&255)<=h&&m.set(o+v,l+y)}static calculateBlackPoints(i,o,l,h,f){const m=f-Ae.BLOCK_SIZE,y=h-Ae.BLOCK_SIZE,w=new Array(l);for(let v=0;v<l;v++){w[v]=new Int32Array(o);let I=v<<Ae.BLOCK_SIZE_POWER;I>m&&(I=m);for(let M=0;M<o;M++){let L=M<<Ae.BLOCK_SIZE_POWER;L>y&&(L=y);let H=0,W=255,$=0;for(let fe=0,Oe=I*h+L;fe<Ae.BLOCK_SIZE;fe++,Oe+=h){for(let Me=0;Me<Ae.BLOCK_SIZE;Me++){const Ie=i[Oe+Me]&255;H+=Ie,Ie<W&&(W=Ie),Ie>$&&($=Ie)}if($-W>Ae.MIN_DYNAMIC_RANGE)for(fe++,Oe+=h;fe<Ae.BLOCK_SIZE;fe++,Oe+=h)for(let Me=0;Me<Ae.BLOCK_SIZE;Me++)H+=i[Oe+Me]&255}let se=H>>Ae.BLOCK_SIZE_POWER*2;if($-W<=Ae.MIN_DYNAMIC_RANGE&&(se=W/2,v>0&&M>0)){const fe=(w[v-1][M]+2*w[v][M-1]+w[v-1][M-1])/4;W<fe&&(se=fe)}w[v][M]=se}}return w}}Ae.BLOCK_SIZE_POWER=3,Ae.BLOCK_SIZE=1<<Ae.BLOCK_SIZE_POWER,Ae.BLOCK_SIZE_MASK=Ae.BLOCK_SIZE-1,Ae.MINIMUM_DIMENSION=Ae.BLOCK_SIZE*5,Ae.MIN_DYNAMIC_RANGE=24;class qe{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,h){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new j;for(let l=0;l<this.height;l++){const h=this.getRow(l,i);for(let f=0;f<this.width;f++){const m=h[f]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class ht extends qe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(i[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,h){return new ht(this.delegate.crop(i,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ht(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ht(this.delegate.rotateCounterClockwise45())}}class Z extends qe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Z.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return Z.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const h=new Uint8ClampedArray(o*l);for(let f=0,m=0,y=i.length;f<y;f+=4,m++){let w;if(i[f+3]===0)w=255;else{const I=i[f],M=i[f+1],L=i[f+2];w=306*I+601*M+117*L+512>>10}h[m]=w}return h}getRow(i,o){if(i<0||i>=this.getHeight())throw new R("Requested row is outside the image: "+i);const l=this.getWidth(),h=i*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,h){return super.crop(i,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=i*Z.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),w=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return o.width=y,o.height=w,l.translate(y/2,w/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=Z.makeBufferFromCanvasImageData(o),this}invert(){return new ht(this)}}Z.DEGREE_TO_RADIANS=Math.PI/180;class be{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Le=(globalThis||kh||self||window||void 0)&&(globalThis||kh||self||window||void 0).__awaiter||function(D,i,o,l){function h(f){return f instanceof o?f:new o(function(m){m(f)})}return new(o||(o=Promise))(function(f,m){function y(I){try{v(l.next(I))}catch(M){m(M)}}function w(I){try{v(l.throw(I))}catch(M){m(M)}}function v(I){I.done?f(I.value):h(I.value).then(y,w)}v((l=l.apply(D,i||[])).next())})};class Be{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,y=l.groupId,w={deviceId:f,label:m,kind:h,groupId:y};o.push(w)}return o})}getVideoInputDevices(){return Le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new be(o.deviceId,o.label))})}findDeviceById(i){return Le(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Le(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(i,o){return Le(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return Le(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return Le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return Le(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,o,l)})}decodeFromConstraints(i,o,l){return Le(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(i,o,l){return Le(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Le(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Le(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new b(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new b(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new b("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new b("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new b("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new b("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new b("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new b("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new b("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new b("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=i,h}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new ce("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);f(y)}catch(y){const w=o&&y instanceof ce,I=(y instanceof G||y instanceof F)&&l;if(w||I)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(y)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const f=h instanceof G||h instanceof F,m=h instanceof ce;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new Z(o),h=new Ae(l);return new P(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(i,o,l=o==null?0:8*o.length,h,f,m=J.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=J.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);J.arraycopy(o,0,l,0,o.length),J.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var yt;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yt||(yt={}));var Ne=yt,zn;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(zn||(zn={}));var ot=zn;class Ei{constructor(i,o,l,h,f=-1,m=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Kr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new R;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Hn{constructor(i,o){if(o.length===0)throw new R;this.field=i;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),J.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let m=0,y=o.length;m!==y;m++){const w=o[m];l=Kr.addOrSubtract(l,w)}return l}l=o[0];const h=o.length,f=this.field;for(let m=1;m<h;m++)l=Kr.addOrSubtract(f.multiply(i,l),o[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const f=l.length-o.length;J.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=Kr.addOrSubtract(o[m-f],l[m]);return new Hn(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=i.coefficients,f=h.length,m=new Int32Array(l+f-1),y=this.field;for(let w=0;w<l;w++){const v=o[w];for(let I=0;I<f;I++)m[w+I]=Kr.addOrSubtract(m[w+I],y.multiply(v,h[I]))}return new Hn(y,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),f=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(f[m],i);return new Hn(l,h)}multiplyByMonomial(i,o){if(i<0)throw new R;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+i),m=this.field;for(let y=0;y<h;y++)f[y]=m.multiply(l[y],o);return new Hn(m,f)}divide(i){if(!this.field.equals(i.field))throw new R("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new R("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const f=i.getCoefficient(i.getDegree()),m=o.inverse(f);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const y=h.getDegree()-i.getDegree(),w=o.multiply(h.getCoefficient(h.getDegree()),m),v=i.multiplyByMonomial(y,w),I=o.buildMonomial(y,w);l=l.addOrSubtract(I),h=h.addOrSubtract(v)}return[l,h]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class Wr extends A{}Wr.kind="ArithmeticException";class At extends Kr{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let f=1;for(let y=0;y<o;y++)h[y]=f,f*=2,f>=o&&(f^=i,f&=o-1);this.expTable=h;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[h[y]]=y;this.logTable=m,this.zero=new Hn(this,Int32Array.from([0])),this.one=new Hn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new R;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new Hn(this,l)}inverse(i){if(i===0)throw new Wr;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ne.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}At.AZTEC_DATA_12=new At(4201,4096,1),At.AZTEC_DATA_10=new At(1033,1024,1),At.AZTEC_DATA_6=new At(67,64,1),At.AZTEC_PARAM=new At(19,16,1),At.QR_CODE_FIELD_256=new At(285,256,0),At.DATA_MATRIX_FIELD_256=new At(301,256,1),At.AZTEC_DATA_8=At.DATA_MATRIX_FIELD_256,At.MAXICODE_FIELD_64=At.AZTEC_DATA_6;class lr extends A{}lr.kind="ReedSolomonException";class Qi extends A{}Qi.kind="IllegalStateException";class Qr{constructor(i){this.field=i}decode(i,o){const l=this.field,h=new Hn(l,i),f=new Int32Array(o);let m=!0;for(let H=0;H<o;H++){const W=h.evaluateAt(l.exp(H+l.getGeneratorBase()));f[f.length-1-H]=W,W!==0&&(m=!1)}if(m)return;const y=new Hn(l,f),w=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),v=w[0],I=w[1],M=this.findErrorLocations(v),L=this.findErrorMagnitudes(I,M);for(let H=0;H<M.length;H++){const W=i.length-1-l.log(M[H]);if(W<0)throw new lr("Bad error location");i[W]=At.addOrSubtract(i[W],L[H])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const H=i;i=o,o=H}const h=this.field;let f=i,m=o,y=h.getZero(),w=h.getOne();for(;m.getDegree()>=(l/2|0);){let H=f,W=y;if(f=m,y=w,f.isZero())throw new lr("r_{i-1} was zero");m=H;let $=h.getZero();const se=f.getCoefficient(f.getDegree()),fe=h.inverse(se);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Oe=m.getDegree()-f.getDegree(),Me=h.multiply(m.getCoefficient(m.getDegree()),fe);$=$.addOrSubtract(h.buildMonomial(Oe,Me)),m=m.addOrSubtract(f.multiplyByMonomial(Oe,Me))}if(w=$.multiply(y).addOrSubtract(W),m.getDegree()>=f.getDegree())throw new Qi("Division algorithm failed to reduce polynomial?")}const v=w.getCoefficient(0);if(v===0)throw new lr("sigmaTilde(0) was zero");const I=h.inverse(v),M=w.multiplyScalar(I),L=m.multiplyScalar(I);return[M,L]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<o;m++)i.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==o)throw new lr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const y=f.inverse(o[m]);let w=1;for(let v=0;v<l;v++)if(m!==v){const I=f.multiply(o[v],y),M=(I&1)===0?I|1:I&-2;w=f.multiply(w,M)}h[m]=f.multiply(i.evaluateAt(y),f.inverse(w)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],y))}return h}}var Ut;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(Ut||(Ut={}));class jt{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),h=this.correctBits(l),f=jt.convertBoolArrayToByteArray(h),m=jt.getEncodedData(h),y=new Ei(f,m,null,null);return y.setNumBits(h.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=Ut.UPPER,h=Ut.UPPER,f="",m=0;for(;m<o;)if(h===Ut.BINARY){if(o-m<5)break;let y=jt.readCode(i,m,5);if(m+=5,y===0){if(o-m<11)break;y=jt.readCode(i,m,11)+31,m+=11}for(let w=0;w<y;w++){if(o-m<8){m=o;break}const v=jt.readCode(i,m,8);f+=K.castAsNonUtf8Char(v),m+=8}h=l}else{let y=h===Ut.DIGIT?4:5;if(o-m<y)break;let w=jt.readCode(i,m,y);m+=y;let v=jt.getCharacter(h,w);v.startsWith("CTRL_")?(l=h,h=jt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=h)):(f+=v,h=l)}return f}static getTable(i){switch(i){case"L":return Ut.LOWER;case"P":return Ut.PUNCT;case"M":return Ut.MIXED;case"D":return Ut.DIGIT;case"B":return Ut.BINARY;case"U":default:return Ut.UPPER}}static getCharacter(i,o){switch(i){case Ut.UPPER:return jt.UPPER_TABLE[o];case Ut.LOWER:return jt.LOWER_TABLE[o];case Ut.MIXED:return jt.MIXED_TABLE[o];case Ut.PUNCT:return jt.PUNCT_TABLE[o];case Ut.DIGIT:return jt.DIGIT_TABLE[o];default:throw new Qi("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=At.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=At.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=At.AZTEC_DATA_10):(l=12,o=At.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=i.length/l;if(f<h)throw new F;let m=i.length%l,y=new Int32Array(f);for(let L=0;L<f;L++,m+=l)y[L]=jt.readCode(i,m,l);try{new Qr(o).decode(y,f-h)}catch(L){throw new F(L)}let w=(1<<l)-1,v=0;for(let L=0;L<h;L++){let H=y[L];if(H===0||H===w)throw new F;(H===1||H===w-1)&&v++}let I=new Array(h*l-v),M=0;for(let L=0;L<h;L++){let H=y[L];if(H===1||H===w-1)I.fill(H>1,M,M+l-1),M+=l-1;else for(let W=l-1;W>=0;--W)I[M++]=(H&1<<W)!==0}return I}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<f.length;y++)f[y]=y;else{let y=h+1+2*ne.truncDivision(ne.truncDivision(h,2)-1,15),w=h/2,v=ne.truncDivision(y,2);for(let I=0;I<w;I++){let M=I+ne.truncDivision(I,15);f[w-I-1]=v-M-1,f[w+I]=v+M+1}}for(let y=0,w=0;y<l;y++){let v=(l-y)*4+(o?9:12),I=y*2,M=h-1-I;for(let L=0;L<v;L++){let H=L*2;for(let W=0;W<2;W++)m[w+H+W]=i.get(f[I+W],f[I+L]),m[w+2*v+H+W]=i.get(f[I+L],f[M-W]),m[w+4*v+H+W]=i.get(f[M-W],f[M-L]),m[w+6*v+H+W]=i.get(f[M-L],f[I+W])}w+=v*8}return m}static readCode(i,o,l){let h=0;for(let f=o;f<o+l;f++)h<<=1,i[f]&&(h|=1);return h}static readByte(i,o){let l=i.length-o;return l>=8?jt.readCode(i,o,8):jt.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=jt.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}jt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],jt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],jt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],jt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],jt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,h){const f=i-l,m=o-h;return Math.sqrt(f*f+m*m)}static sum(i){let o=0;for(let l=0,h=i.length;l!==h;l++){const f=i[l];o+=f}return o}}class vn{static floatToIntBits(i){return i}}vn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ze){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*vn.floatToIntBits(this.x)+vn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let f,m,y;if(l>=o&&l>=h?(m=i[0],f=i[1],y=i[2]):h>=l&&h>=o?(m=i[1],f=i[0],y=i[2]):(m=i[2],f=i[0],y=i[1]),this.crossProductZ(f,m,y)<0){const w=f;f=y,y=w}i[0]=f,i[1]=m,i[2]=y}static distance(i,o){return Ze.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const h=o.x,f=o.y;return(l.x-h)*(i.y-f)-(l.y-f)*(i.x-h)}}class va{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ba extends va{constructor(i,o,l,h,f){super(i,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class cr{constructor(i,o,l,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=cr.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const f=o/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ce}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,y=!1,w=!1,v=!1,I=!1,M=!1;const L=this.width,H=this.height;for(;m;){m=!1;let W=!0;for(;(W||!w)&&o<L;)W=this.containsBlackPoint(l,h,o,!1),W?(o++,m=!0,w=!0):w||o++;if(o>=L){f=!0;break}let $=!0;for(;($||!v)&&h<H;)$=this.containsBlackPoint(i,o,h,!0),$?(h++,m=!0,v=!0):v||h++;if(h>=H){f=!0;break}let se=!0;for(;(se||!I)&&i>=0;)se=this.containsBlackPoint(l,h,i,!1),se?(i--,m=!0,I=!0):I||i--;if(i<0){f=!0;break}let fe=!0;for(;(fe||!M)&&l>=0;)fe=this.containsBlackPoint(i,o,l,!0),fe?(l--,m=!0,M=!0):M||l--;if(l<0){f=!0;break}m&&(y=!0)}if(!f&&y){const W=o-i;let $=null;for(let Me=1;$===null&&Me<W;Me++)$=this.getBlackPointOnSegment(i,h-Me,i+Me,h);if($==null)throw new ce;let se=null;for(let Me=1;se===null&&Me<W;Me++)se=this.getBlackPointOnSegment(i,l+Me,i+Me,l);if(se==null)throw new ce;let fe=null;for(let Me=1;fe===null&&Me<W;Me++)fe=this.getBlackPointOnSegment(o,l+Me,o-Me,l);if(fe==null)throw new ce;let Oe=null;for(let Me=1;Oe===null&&Me<W;Me++)Oe=this.getBlackPointOnSegment(o,h-Me,o-Me,h);if(Oe==null)throw new ce;return this.centerEdges(Oe,$,fe,se)}else throw new ce}getBlackPointOnSegment(i,o,l,h){const f=Ze.round(Ze.distance(i,o,l,h)),m=(l-i)/f,y=(h-o)/f,w=this.image;for(let v=0;v<f;v++){const I=Ze.round(i+v*m),M=Ze.round(o+v*y);if(w.get(I,M))return new ze(I,M)}return null}centerEdges(i,o,l,h){const f=i.getX(),m=i.getY(),y=o.getX(),w=o.getY(),v=l.getX(),I=l.getY(),M=h.getX(),L=h.getY(),H=cr.CORR;return f<this.width/2?[new ze(M-H,L+H),new ze(y+H,w+H),new ze(v-H,I-H),new ze(f+H,m-H)]:[new ze(M+H,L+H),new ze(y+H,w-H),new ze(v-H,I+H),new ze(f-H,m-H)]}containsBlackPoint(i,o,l,h){const f=this.image;if(h){for(let m=i;m<=o;m++)if(f.get(m,l))return!0}else for(let m=i;m<=o;m++)if(f.get(l,m))return!0;return!1}}cr.INIT_SIZE=10,cr.CORR=1;class Zr{static checkAndNudgePoints(i,o){const l=i.getWidth(),h=i.getHeight();let f=!0;for(let m=0;m<o.length&&f;m+=2){const y=Math.floor(o[m]),w=Math.floor(o[m+1]);if(y<-1||y>l||w<-1||w>h)throw new ce;f=!1,y===-1?(o[m]=0,f=!0):y===l&&(o[m]=l-1,f=!0),w===-1?(o[m+1]=0,f=!0):w===h&&(o[m+1]=h-1,f=!0)}f=!0;for(let m=o.length-2;m>=0&&f;m-=2){const y=Math.floor(o[m]),w=Math.floor(o[m+1]);if(y<-1||y>l||w<-1||w>h)throw new ce;f=!1,y===-1?(o[m]=0,f=!0):y===l&&(o[m]=l-1,f=!0),w===-1?(o[m+1]=0,f=!0):w===h&&(o[m+1]=h-1,f=!0)}}}class Wn{constructor(i,o,l,h,f,m,y,w,v){this.a11=i,this.a21=o,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=y,this.a23=w,this.a33=v}static quadrilateralToQuadrilateral(i,o,l,h,f,m,y,w,v,I,M,L,H,W,$,se){const fe=Wn.quadrilateralToSquare(i,o,l,h,f,m,y,w);return Wn.squareToQuadrilateral(v,I,M,L,H,W,$,se).times(fe)}transformPoints(i){const o=i.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,y=this.a22,w=this.a23,v=this.a31,I=this.a32,M=this.a33;for(let L=0;L<o;L+=2){const H=i[L],W=i[L+1],$=f*H+w*W+M;i[L]=(l*H+m*W+v)/$,i[L+1]=(h*H+y*W+I)/$}}transformPointsWithValues(i,o){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,y=this.a22,w=this.a23,v=this.a31,I=this.a32,M=this.a33,L=i.length;for(let H=0;H<L;H++){const W=i[H],$=o[H],se=f*W+w*$+M;i[H]=(l*W+m*$+v)/se,o[H]=(h*W+y*$+I)/se}}static squareToQuadrilateral(i,o,l,h,f,m,y,w){const v=i-l+f-y,I=o-h+m-w;if(v===0&&I===0)return new Wn(l-i,f-l,i,h-o,m-h,o,0,0,1);{const M=l-f,L=y-f,H=h-m,W=w-m,$=M*W-L*H,se=(v*W-L*I)/$,fe=(M*I-v*H)/$;return new Wn(l-i+se*l,y-i+fe*y,i,h-o+se*h,w-o+fe*w,o,se,fe,1)}}static quadrilateralToSquare(i,o,l,h,f,m,y,w){return Wn.squareToQuadrilateral(i,o,l,h,f,m,y,w).buildAdjoint()}buildAdjoint(){return new Wn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Wn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class ti extends Zr{sampleGrid(i,o,l,h,f,m,y,w,v,I,M,L,H,W,$,se,fe,Oe,Me){const Ie=Wn.quadrilateralToQuadrilateral(h,f,m,y,w,v,I,M,L,H,W,$,se,fe,Oe,Me);return this.sampleGridWithTransform(i,o,l,Ie)}sampleGridWithTransform(i,o,l,h){if(o<=0||l<=0)throw new ce;const f=new it(o,l),m=new Float32Array(2*o);for(let y=0;y<l;y++){const w=m.length,v=y+.5;for(let I=0;I<w;I+=2)m[I]=I/2+.5,m[I+1]=v;h.transformPoints(m),Zr.checkAndNudgePoints(i,m);try{for(let I=0;I<w;I+=2)i.get(Math.floor(m[I]),Math.floor(m[I+1]))&&f.set(I/2,y)}catch{throw new ce}}return f}}class Gn{static setGridSampler(i){Gn.gridSampler=i}static getInstance(){return Gn.gridSampler}}Gn.gridSampler=new ti;class qt{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ll{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new ba(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ce;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,o){let l=0;i.forEach((h,f,m)=>{let y=(h>>o-2<<1)+(h&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(ne.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new ce}getCorrectedParameterData(i,o){let l,h;o?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let w=l-1;w>=0;--w)m[w]=i&15,i>>=4;try{new Qr(At.AZTEC_PARAM).decode(m,f)}catch{throw new ce}let y=0;for(let w=0;w<h;w++)y=(y<<4)+m[w];return y}getBullsEyeCorners(i){let o=i,l=i,h=i,f=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(o,m,1,-1),L=this.getFirstDifferent(l,m,1,1),H=this.getFirstDifferent(h,m,-1,1),W=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(W,M)*this.nbCenterLayers/(this.distancePoint(f,o)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(M,L,H,W))break}o=M,l=L,h=H,f=W,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ce;this.compact=this.nbCenterLayers===5;let y=new ze(o.getX()+.5,o.getY()-.5),w=new ze(l.getX()+.5,l.getY()+.5),v=new ze(h.getX()-.5,h.getY()+.5),I=new ze(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,w,v,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,h;try{let y=new cr(this.image).detect();i=y[0],o=y[1],l=y[2],h=y[3]}catch{let w=this.image.getWidth()/2,v=this.image.getHeight()/2;i=this.getFirstDifferent(new qt(w+7,v-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new qt(w+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qt(w-7,v+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new qt(w-7,v-7),!1,-1,-1).toResultPoint()}let f=Ze.round((i.getX()+h.getX()+o.getX()+l.getX())/4),m=Ze.round((i.getY()+h.getY()+o.getY()+l.getY())/4);try{let y=new cr(this.image,15,f,m).detect();i=y[0],o=y[1],l=y[2],h=y[3]}catch{i=this.getFirstDifferent(new qt(f+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new qt(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qt(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new qt(f-7,m-7),!1,-1,-1).toResultPoint()}return f=Ze.round((i.getX()+h.getX()+o.getX()+l.getX())/4),m=Ze.round((i.getY()+h.getY()+o.getY()+l.getY())/4),new qt(f,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,h,f){let m=Gn.getInstance(),y=this.getDimension(),w=y/2-this.nbCenterLayers,v=y/2+this.nbCenterLayers;return m.sampleGrid(i,y,y,w,w,v,w,v,v,w,v,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(i,o,l){let h=0,f=this.distanceResultPoint(i,o),m=f/l,y=i.getX(),w=i.getY(),v=m*(o.getX()-i.getX())/f,I=m*(o.getY()-i.getY())/f;for(let M=0;M<l;M++)this.image.get(Ze.round(y+M*v),Ze.round(w+M*I))&&(h|=1<<l-M-1);return h}isWhiteOrBlackRectangle(i,o,l,h){let f=3;i=new qt(i.getX()-f,i.getY()+f),o=new qt(o.getX()-f,o.getY()-f),l=new qt(l.getX()+f,l.getY()-f),h=new qt(h.getX()+f,h.getY()+f);let m=this.getColor(h,i);if(m===0)return!1;let y=this.getColor(i,o);return y!==m||(y=this.getColor(o,l),y!==m)?!1:(y=this.getColor(l,h),y===m)}getColor(i,o){let l=this.distancePoint(i,o),h=(o.getX()-i.getX())/l,f=(o.getY()-i.getY())/l,m=0,y=i.getX(),w=i.getY(),v=this.image.get(i.getX(),i.getY()),I=Math.ceil(l);for(let L=0;L<I;L++)y+=h,w+=f,this.image.get(Ze.round(y),Ze.round(w))!==v&&m++;let M=m/l;return M>.1&&M<.9?0:M<=.1===v?1:-1}getFirstDifferent(i,o,l,h){let f=i.getX()+l,m=i.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===o;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===o;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===o;)m+=h;return m-=h,new qt(f,m)}expandSquare(i,o,l){let h=l/(2*o),f=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,w=(i[0].getY()+i[2].getY())/2,v=new ze(y+h*f,w+h*m),I=new ze(y-h*f,w-h*m);f=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,w=(i[1].getY()+i[3].getY())/2;let M=new ze(y+h*f,w+h*m),L=new ze(y-h*f,w-h*m);return[v,M,I,L]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Ze.round(i.getX()),l=Ze.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return Ze.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Ze.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ne.truncDivision(this.nbLayers-4,8)+1)+15}}class zs{decode(i,o=null){let l=null,h=new ll(i.getBlackMatrix()),f=null,m=null;try{let I=h.detectMirror(!1);f=I.getPoints(),this.reportFoundResultPoints(o,f),m=new jt().decode(I)}catch(I){l=I}if(m==null)try{let I=h.detectMirror(!0);f=I.getPoints(),this.reportFoundResultPoints(o,f),m=new jt().decode(I)}catch(I){throw l??I}let y=new Fe(m.getText(),m.getRawBytes(),m.getNumBits(),f,Ne.AZTEC,J.currentTimeMillis()),w=m.getByteSegments();w!=null&&y.putMetadata(ot.BYTE_SEGMENTS,w);let v=m.getECLevel();return v!=null&&y.putMetadata(ot.ERROR_CORRECTION_LEVEL,v),y}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(Ue.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class cl extends Be{constructor(i=500){super(new zs,i)}}class Xt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(Ue.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),m=this.doDecode(f,o),y=m.getResultMetadata();let w=270;y!==null&&y.get(ot.ORIENTATION)===!0&&(w=w+y.get(ot.ORIENTATION)%360),m.putMetadata(ot.ORIENTATION,w);const v=m.getResultPoints();if(v!==null){const I=f.getHeight();for(let M=0;M<v.length;M++)v[M]=new ze(I-v[M].getY()-1,v[M].getX())}return m}else throw new ce}}reset(){}doDecode(i,o){const l=i.getWidth(),h=i.getHeight();let f=new Se(l);const m=o&&o.get(Ue.TRY_HARDER)===!0,y=Math.max(1,h>>(m?8:5));let w;m?w=h:w=15;const v=Math.trunc(h/2);for(let I=0;I<w;I++){const M=Math.trunc((I+1)/2),L=(I&1)===0,H=v+y*(L?M:-M);if(H<0||H>=h)break;try{f=i.getBlackRow(H,f)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(f.reverse(),o&&o.get(Ue.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;o.forEach((se,fe)=>$.set(fe,se)),$.delete(Ue.NEED_RESULT_POINT_CALLBACK),o=$}try{const $=this.decodeRow(H,f,o);if(W===1){$.putMetadata(ot.ORIENTATION,180);const se=$.getResultPoints();se!==null&&(se[0]=new ze(l-se[0].getX()-1,se[0].getY()),se[1]=new ze(l-se[1].getX()-1,se[1].getY()))}return $}catch{}}}throw new ce}static recordPattern(i,o,l){const h=l.length;for(let v=0;v<h;v++)l[v]=0;const f=i.getSize();if(o>=f)throw new ce;let m=!i.get(o),y=0,w=o;for(;w<f;){if(i.get(w)!==m)l[y]++;else{if(++y===h)break;l[y]=1,m=!m}w++}if(!(y===h||y===h-1&&w===f))throw new ce}static recordPatternInReverse(i,o,l){let h=l.length,f=i.get(o);for(;o>0&&h>=0;)i.get(--o)!==f&&(h--,f=!f);if(h>=0)throw new ce;Xt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const h=i.length;let f=0,m=0;for(let v=0;v<h;v++)f+=i[v],m+=o[v];if(f<m)return Number.POSITIVE_INFINITY;const y=f/m;l*=y;let w=0;for(let v=0;v<h;v++){const I=i[v],M=o[v]*y,L=I>M?I-M:M-I;if(L>l)return Number.POSITIVE_INFINITY;w+=L}return w/f}}class Pe extends Xt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const w=6;for(let v=l;v<o;v++)if(i.get(v)!==y)f[h]++;else{if(h===w-1){let I=Pe.MAX_AVG_VARIANCE,M=-1;for(let L=Pe.CODE_START_A;L<=Pe.CODE_START_C;L++){const H=Xt.patternMatchVariance(f,Pe.CODE_PATTERNS[L],Pe.MAX_INDIVIDUAL_VARIANCE);H<I&&(I=H,M=L)}if(M>=0&&i.isRange(Math.max(0,m-(v-m)/2),m,!1))return Int32Array.from([m,v,M]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,y=!y}throw new ce}static decodeCode(i,o,l){Xt.recordPattern(i,l,o);let h=Pe.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Pe.CODE_PATTERNS.length;m++){const y=Pe.CODE_PATTERNS[m],w=this.patternMatchVariance(o,y,Pe.MAX_INDIVIDUAL_VARIANCE);w<h&&(h=w,f=m)}if(f>=0)return f;throw new ce}decodeRow(i,o,l){const h=l&&l.get(Ue.ASSUME_GS1)===!0,f=Pe.findStartPattern(o),m=f[2];let y=0;const w=new Uint8Array(20);w[y++]=m;let v;switch(m){case Pe.CODE_START_A:v=Pe.CODE_CODE_A;break;case Pe.CODE_START_B:v=Pe.CODE_CODE_B;break;case Pe.CODE_START_C:v=Pe.CODE_CODE_C;break;default:throw new F}let I=!1,M=!1,L="",H=f[0],W=f[1];const $=Int32Array.from([0,0,0,0,0,0]);let se=0,fe=0,Oe=m,Me=0,Ie=!0,dt=!1,ct=!1;for(;!I;){const xs=M;switch(M=!1,se=fe,fe=Pe.decodeCode(o,$,W),w[y++]=fe,fe!==Pe.CODE_STOP&&(Ie=!0),fe!==Pe.CODE_STOP&&(Me++,Oe+=Me*fe),H=W,W+=$.reduce((xr,ku)=>xr+ku,0),fe){case Pe.CODE_START_A:case Pe.CODE_START_B:case Pe.CODE_START_C:throw new F}switch(v){case Pe.CODE_CODE_A:if(fe<64)ct===dt?L+=String.fromCharCode(32+fe):L+=String.fromCharCode(32+fe+128),ct=!1;else if(fe<96)ct===dt?L+=String.fromCharCode(fe-64):L+=String.fromCharCode(fe+64),ct=!1;else switch(fe!==Pe.CODE_STOP&&(Ie=!1),fe){case Pe.CODE_FNC_1:h&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_A:!dt&&ct?(dt=!0,ct=!1):dt&&ct?(dt=!1,ct=!1):ct=!0;break;case Pe.CODE_SHIFT:M=!0,v=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_B:v=Pe.CODE_CODE_B;break;case Pe.CODE_CODE_C:v=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:I=!0;break}break;case Pe.CODE_CODE_B:if(fe<96)ct===dt?L+=String.fromCharCode(32+fe):L+=String.fromCharCode(32+fe+128),ct=!1;else switch(fe!==Pe.CODE_STOP&&(Ie=!1),fe){case Pe.CODE_FNC_1:h&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_FNC_2:case Pe.CODE_FNC_3:break;case Pe.CODE_FNC_4_B:!dt&&ct?(dt=!0,ct=!1):dt&&ct?(dt=!1,ct=!1):ct=!0;break;case Pe.CODE_SHIFT:M=!0,v=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_A:v=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_C:v=Pe.CODE_CODE_C;break;case Pe.CODE_STOP:I=!0;break}break;case Pe.CODE_CODE_C:if(fe<100)fe<10&&(L+="0"),L+=fe;else switch(fe!==Pe.CODE_STOP&&(Ie=!1),fe){case Pe.CODE_FNC_1:h&&(L.length===0?L+="]C1":L+="");break;case Pe.CODE_CODE_A:v=Pe.CODE_CODE_A;break;case Pe.CODE_CODE_B:v=Pe.CODE_CODE_B;break;case Pe.CODE_STOP:I=!0;break}break}xs&&(v=v===Pe.CODE_CODE_A?Pe.CODE_CODE_B:Pe.CODE_CODE_A)}const xi=W-H;if(W=o.getNextUnset(W),!o.isRange(W,Math.min(o.getSize(),W+(W-H)/2),!1))throw new ce;if(Oe-=Me*se,Oe%103!==se)throw new G;const er=L.length;if(er===0)throw new ce;er>0&&Ie&&(v===Pe.CODE_CODE_C?L=L.substring(0,er-2):L=L.substring(0,er-1));const Li=(f[1]+f[0])/2,$t=H+xi/2,ii=w.length,ki=new Uint8Array(ii);for(let xs=0;xs<ii;xs++)ki[xs]=w[xs];const ea=[new ze(Li,i),new ze($t,i)];return new Fe(L,ki,0,ea,Ne.CODE_128,new Date().getTime())}}Pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Pe.MAX_AVG_VARIANCE=.25,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.CODE_SHIFT=98,Pe.CODE_CODE_C=99,Pe.CODE_CODE_B=100,Pe.CODE_CODE_A=101,Pe.CODE_FNC_1=102,Pe.CODE_FNC_2=97,Pe.CODE_FNC_3=96,Pe.CODE_FNC_4_A=101,Pe.CODE_FNC_4_B=100,Pe.CODE_START_A=103,Pe.CODE_START_B=104,Pe.CODE_START_C=105,Pe.CODE_STOP=106;class Yt extends Xt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Yt.findAsteriskPattern(o,h),m=o.getNextSet(f[1]),y=o.getSize(),w,v;do{Yt.recordPattern(o,m,h);let $=Yt.toNarrowWidePattern(h);if($<0)throw new ce;w=Yt.patternToChar($),this.decodeRowResult+=w,v=m;for(let se of h)m+=se;m=o.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let $ of h)I+=$;let M=m-v-I;if(m!==y&&M*2<I)throw new ce;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,se=0;for(let fe=0;fe<$;fe++)se+=Yt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt($)!==Yt.ALPHABET_STRING.charAt(se%43))throw new G;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new ce;let L;this.extendedMode?L=Yt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let H=(f[1]+f[0])/2,W=v+I/2;return new Fe(L,null,0,[new ze(H,i),new ze(W,i)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),h=i.getNextSet(0),f=0,m=h,y=!1,w=o.length;for(let v=h;v<l;v++)if(i.get(v)!==y)o[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(o)===Yt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((v-m)/2)),m,!1))return[m,v];m+=o[0]+o[1],o.copyWithin(0,2,2+f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,y=!y}throw new ce}static toNarrowWidePattern(i){let o=i.length,l=0,h;do{let f=2147483647;for(let w of i)w<f&&w>l&&(f=w);l=f,h=0;let m=0,y=0;for(let w=0;w<o;w++){let v=i[w];v>l&&(y|=1<<o-1-w,h++,m+=v)}if(h===3){for(let w=0;w<o&&h>0;w++){let v=i[w];if(v>l&&(h--,v*2>=m))return-1}return y}}while(h>3);return-1}static patternToChar(i){for(let o=0;o<Yt.CHARACTER_ENCODINGS.length;o++)if(Yt.CHARACTER_ENCODINGS[o]===i)return Yt.ALPHABET_STRING.charAt(o);if(i===Yt.ASTERISK_ENCODING)return"*";throw new ce}static decodeExtended(i){let o=i.length,l="";for(let h=0;h<o;h++){let f=i.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=i.charAt(h+1),y="\0";switch(f){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new F;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new F;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new F;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new F;break}l+=y,h++}else l+=f}return l}}Yt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Yt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Yt.ASTERISK_ENCODING=148;class Et extends Xt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let h=this.decodeStart(o),f=this.decodeEnd(o),m=new j;Et.decodeMiddle(o,h[1],f[0],m);let y=m.toString(),w=null;l!=null&&(w=l.get(Ue.ALLOWED_LENGTHS)),w==null&&(w=Et.DEFAULT_ALLOWED_LENGTHS);let v=y.length,I=!1,M=0;for(let W of w){if(v===W){I=!0;break}W>M&&(M=W)}if(!I&&v>M&&(I=!0),!I)throw new F;const L=[new ze(h[1],i),new ze(f[0],i)];return new Fe(y,null,0,L,Ne.ITF,new Date().getTime())}static decodeMiddle(i,o,l,h){let f=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),m.fill(0),y.fill(0);o<l;){Xt.recordPattern(i,o,f);for(let v=0;v<5;v++){let I=2*v;m[v]=f[I],y[v]=f[I+1]}let w=Et.decodeDigit(m);h.append(w.toString()),w=this.decodeDigit(y),h.append(w.toString()),f.forEach(function(v){o+=v})}}decodeStart(i){let o=Et.skipWhiteSpace(i),l=Et.findGuardPattern(i,o,Et.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!i.get(h);h--)l--;if(l!==0)throw new ce}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new ce;return l}decodeEnd(i){i.reverse();try{let o=Et.skipWhiteSpace(i),l;try{l=Et.findGuardPattern(i,o,Et.END_PATTERN_REVERSED[0])}catch(f){f instanceof ce&&(l=Et.findGuardPattern(i,o,Et.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let h=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-h,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let h=l.length,f=new Int32Array(h),m=i.getSize(),y=!1,w=0,v=o;f.fill(0);for(let I=o;I<m;I++)if(i.get(I)!==y)f[w]++;else{if(w===h-1){if(Xt.patternMatchVariance(f,l,Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return[v,I];v+=f[0]+f[1],J.arraycopy(f,2,f,0,w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,y=!y}throw new ce}static decodeDigit(i){let o=Et.MAX_AVG_VARIANCE,l=-1,h=Et.PATTERNS.length;for(let f=0;f<h;f++){let m=Et.PATTERNS[f],y=Xt.patternMatchVariance(i,m,Et.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=f):y===o&&(l=-1)}if(l>=0)return l%10;throw new ce}}Et.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Et.MAX_AVG_VARIANCE=.38,Et.MAX_INDIVIDUAL_VARIANCE=.5,Et.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Et.START_PATTERN=Int32Array.from([1,1,1,1]),Et.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Kt extends Xt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!o;){f=Int32Array.from([0,0,0]),l=Kt.findGuardPattern(i,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let y=m-(h-m);y>=0&&(o=i.isRange(y,m,!1))}return l}static checkChecksum(i){return Kt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return Kt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let h=o-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let h=o-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}static decodeEnd(i,o){return Kt.findGuardPattern(i,o,!1,Kt.START_END_PATTERN,new Int32Array(Kt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,h){return this.findGuardPattern(i,o,l,h,new Int32Array(h.length))}static findGuardPattern(i,o,l,h,f){let m=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let y=0,w=o,v=h.length,I=l;for(let M=o;M<m;M++)if(i.get(M)!==I)f[y]++;else{if(y===v-1){if(Xt.patternMatchVariance(f,h,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return Int32Array.from([w,M]);w+=f[0]+f[1];let L=f.slice(2,f.length-1);for(let H=0;H<y-1;H++)f[H]=L[H];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,I=!I}throw new ce}static decodeDigit(i,o,l,h){this.recordPattern(i,l,o);let f=this.MAX_AVG_VARIANCE,m=-1,y=h.length;for(let w=0;w<y;w++){let v=h[w],I=Xt.patternMatchVariance(o,v,Kt.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,m=w)}if(m>=0)return m;throw new ce}}Kt.MAX_AVG_VARIANCE=.48,Kt.MAX_INDIVIDUAL_VARIANCE=.7,Kt.START_END_PATTERN=Int32Array.from([1,1,1]),Kt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Kt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Dr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(o,l,h),m=h.toString(),y=Dr.parseExtensionString(m),w=[new ze((l[0]+l[1])/2,i),new ze(f,i)],v=new Fe(m,null,0,w,Ne.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&v.putAllMetadata(y),v}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=o[1],y=0;for(let v=0;v<5&&m<f;v++){let I=Kt.decodeDigit(i,h,m,Kt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of h)m+=M;I>=10&&(y|=1<<4-v),v!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new ce;let w=this.determineCheckDigit(y);if(Dr.extensionChecksum(l.toString())!==w)throw new ce;return m}static extensionChecksum(i){let o=i.length,l=0;for(let h=o-2;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ce}static parseExtensionString(i){if(i.length!==5)return null;let o=Dr.parseExtension5String(i);return o==null?null:new Map([[ot.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return o+h+"."+m}}class Hs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(o,l,h),m=h.toString(),y=Hs.parseExtensionString(m),w=[new ze((l[0]+l[1])/2,i),new ze(f,i)],v=new Fe(m,null,0,w,Ne.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&v.putAllMetadata(y),v}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=o[1],y=0;for(let w=0;w<2&&m<f;w++){let v=Kt.decodeDigit(i,h,m,Kt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let I of h)m+=I;v>=10&&(y|=1<<1-w),w!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new ce;if(parseInt(l.toString())%4!==y)throw new ce;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[ot.ISSUE_NUMBER,parseInt(i)]])}}class Jr{static decodeRow(i,o,l){let h=Kt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Dr().decodeRow(i,o,h)}catch{return new Hs().decodeRow(i,o,h)}}}Jr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xt extends Kt{constructor(){super(),this.decodeRowStringBuffer="",xt.L_AND_G_PATTERNS=xt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=xt.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];xt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let h=xt.findStartGuardPattern(o),f=l==null?null:l.get(Ue.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ie=new ze((h[0]+h[1])/2,i);f.foundPossibleResultPoint(Ie)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),y=m.rowOffset,w=m.resultString;if(f!=null){const Ie=new ze(y,i);f.foundPossibleResultPoint(Ie)}let v=this.decodeEnd(o,y);if(f!=null){const Ie=new ze((v[0]+v[1])/2,i);f.foundPossibleResultPoint(Ie)}let I=v[1],M=I+(I-v[0]);if(M>=o.getSize()||!o.isRange(I,M,!1))throw new ce;let L=w.toString();if(L.length<8)throw new F;if(!xt.checkChecksum(L))throw new G;let H=(h[1]+h[0])/2,W=(v[1]+v[0])/2,$=this.getBarcodeFormat(),se=[new ze(H,i),new ze(W,i)],fe=new Fe(L,null,0,se,$,new Date().getTime()),Oe=0;try{let Ie=Jr.decodeRow(i,o,v[1]);fe.putMetadata(ot.UPC_EAN_EXTENSION,Ie.getText()),fe.putAllMetadata(Ie.getResultMetadata()),fe.addResultPoints(Ie.getResultPoints()),Oe=Ie.getText().length}catch{}let Me=l==null?null:l.get(Ue.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Ie=!1;for(let dt in Me)if(Oe.toString()===dt){Ie=!0;break}if(!Ie)throw new ce}return fe}decodeEnd(i,o){return xt.findGuardPattern(i,o,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return xt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return xt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let h=o-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}l*=3;for(let h=o-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new F;l+=f}return(1e3-l)%10}}class Jt extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=o[1],y=0;for(let v=0;v<6&&m<f;v++){let I=xt.decodeDigit(i,h,m,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of h)m+=M;I>=10&&(y|=1<<5-v)}l=Jt.determineFirstDigit(l,y),m=xt.findGuardPattern(i,m,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&m<f;v++){let I=xt.decodeDigit(i,h,m,xt.L_PATTERNS);l+=String.fromCharCode(48+I);for(let M of h)m+=M}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new ce}}Jt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ao extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=o[1];for(let w=0;w<4&&m<f;w++){let v=xt.decodeDigit(i,h,m,xt.L_PATTERNS);l+=String.fromCharCode(48+v);for(let I of h)m+=I}m=xt.findGuardPattern(i,m,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&m<f;w++){let v=xt.decodeDigit(i,h,m,xt.L_PATTERNS);l+=String.fromCharCode(48+v);for(let I of h)m+=I}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Ne.EAN_8}}class $r extends xt{constructor(){super(...arguments),this.ean13Reader=new Jt}getBarcodeFormat(){return Ne.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new Fe(o.substring(1),null,null,i.getResultPoints(),Ne.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new ce}reset(){this.ean13Reader.reset()}}class Qn extends xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const h=this.decodeMiddleCounters.map(v=>v);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=i.getSize();let m=o[1],y=0;for(let v=0;v<6&&m<f;v++){const I=Qn.decodeDigit(i,h,m,Qn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let M of h)m+=M;I>=10&&(y|=1<<5-v)}let w=Qn.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:w}}decodeEnd(i,o){return Qn.findGuardPatternWithoutCounters(i,o,!0,Qn.MIDDLE_END_PATTERN)}checkChecksum(i){return xt.checkChecksum(Qn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+i+m}throw ce.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new j;l.append(i.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Qn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gs extends Xt{constructor(i){super();let o=i==null?null:i.get(Ue.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new Jt),l.push(new $r),l.push(new Ao),l.push(new Qn)):(o.indexOf(Ne.EAN_13)>-1&&l.push(new Jt),o.indexOf(Ne.UPC_A)>-1&&l.push(new $r),o.indexOf(Ne.EAN_8)>-1&&l.push(new Ao),o.indexOf(Ne.UPC_E)>-1&&l.push(new Qn)),this.readers=l}decodeRow(i,o,l){for(let h of this.readers)try{const f=h.decodeRow(i,o,l),m=f.getBarcodeFormat()===Ne.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(Ue.POSSIBLE_FORMATS),w=y==null||y.includes(Ne.UPC_A);if(m&&w){const v=f.getRawBytes(),I=new Fe(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),Ne.UPC_A);return I.putAllMetadata(f.getResultMetadata()),I}return f}catch{}throw new ce}reset(){for(let i of this.readers)i.reset()}}class Mn extends Xt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(Xt.patternMatchVariance(i,o[l],Mn.MAX_INDIVIDUAL_VARIANCE)<Mn.MAX_AVG_VARIANCE)return l;throw new ce}static count(i){return Ze.sum(new Int32Array(i))}static increment(i,o){let l=0,h=o[0];for(let f=1;f<i.length;f++)o[f]>h&&(h=o[f],l=f);i[l]++}static decrement(i,o){let l=0,h=o[0];for(let f=1;f<i.length;f++)o[f]<h&&(h=o[f],l=f);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],h=o/l;if(h>=Mn.MIN_FINDER_PATTERN_RATIO&&h<=Mn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of i)y>m&&(m=y),y<f&&(f=y);return m<10*f}return!1}}Mn.MAX_AVG_VARIANCE=.2,Mn.MAX_INDIVIDUAL_VARIANCE=.45,Mn.MIN_FINDER_PATTERN_RATIO=9.5/12,Mn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ri{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Ri))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Sa{constructor(i,o,l,h,f){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new ze(l,f)),this.resultPoints.push(new ze(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Sa))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class jn{constructor(){}static getRSSvalue(i,o,l){let h=0;for(let w of i)h+=w;let f=0,m=0,y=i.length;for(let w=0;w<y-1;w++){let v;for(v=1,m|=1<<w;v<i[w];v++,m&=~(1<<w)){let I=jn.combins(h-v-1,y-w-2);if(l&&m===0&&h-v-(y-w-1)>=y-w-1&&(I-=jn.combins(h-v-(y-w),y-w-2)),y-w-1>1){let M=0;for(let L=h-v-(y-w-2);L>o;L--)M+=jn.combins(h-v-L-1,y-w-3);I-=M*(y-1-w)}else h-v>o&&I--;f+=I}h-=v}return f}static combins(i,o){let l,h;i-o>o?(h=o,l=i-o):(h=i-o,l=o);let f=1,m=1;for(let y=i;y>l;y--)f*=y,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class bn{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new Se(l),f=0,y=i[0].getRightChar().getValue();for(let w=11;w>=0;--w)(y&1<<w)!=0&&h.set(f),f++;for(let w=1;w<i.length;++w){let v=i[w],I=v.getLeftChar().getValue();for(let M=11;M>=0;--M)(I&1<<M)!=0&&h.set(f),f++;if(v.getRightChar()!=null){let M=v.getRightChar().getValue();for(let L=11;L>=0;--L)(M&1<<L)!=0&&h.set(f),f++}}return h}}class gn{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ur{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Pn extends ur{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Pn.FNC1}}Pn.FNC1="$";class Gi extends ur{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ni extends ur{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new F;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ni.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ni.FNC1}isAnyFNC1(){return this.firstDigit===Ni.FNC1||this.secondDigit===Ni.FNC1}}Ni.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ce;let o=i.substring(0,2);for(let f of Ve.TWO_DIGIT_DATA_LENGTH)if(f[0]===o)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,f[2],i):Ve.processFixedAI(2,f[1],i);if(i.length<3)throw new ce;let l=i.substring(0,3);for(let f of Ve.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,f[2],i):Ve.processFixedAI(3,f[1],i);for(let f of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);if(i.length<4)throw new ce;let h=i.substring(0,4);for(let f of Ve.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);throw new ce}static processFixedAI(i,o,l){if(l.length<i)throw new ce;let h=l.substring(0,i);if(l.length<i+o)throw new ce;let f=l.substring(i,i+o),m=l.substring(i+o),y="("+h+")"+f,w=Ve.parseFieldsInGeneralPurpose(m);return w==null?y:y+w}static processVariableAI(i,o,l){let h=l.substring(0,i),f;l.length<i+o?f=l.length:f=i+o;let m=l.substring(i,f),y=l.substring(f),w="("+h+")"+m,v=Ve.parseFieldsInGeneralPurpose(y);return v==null?w:w+v}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class ji{constructor(i){this.buffer=new j,this.information=i}decodeAllCodes(i,o){let l=o,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=Ve.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&i.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new Ni(this.information.getSize(),Ni.FNC1,Ni.FNC1):new Ni(this.information.getSize(),f-1,Ni.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,h=(o-8)%11;return new Ni(i+7,l,h)}extractNumericValueFromBitArray(i,o){return ji.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let h=0;for(let f=0;f<l;++f)i.get(o+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Gi(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Gi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new Gi(this.current.getPosition(),this.buffer.toString()):o=new Gi(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new gn(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new Gi(this.current.getPosition(),this.buffer.toString());return new gn(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Gi(this.current.getPosition(),this.buffer.toString());return new gn(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Gi(this.current.getPosition(),this.buffer.toString());return new gn(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gn(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Pn(i+5,Pn.FNC1);if(o>=5&&o<15)return new Pn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Pn(i+7,""+(l+1));if(l>=90&&l<116)return new Pn(i+7,""+(l+7));let h=this.extractNumericValueFromBitArray(i,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new F}return new Pn(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Pn(i+5,Pn.FNC1);if(o>=5&&o<15)return new Pn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Pn(i+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Qi("Decoding invalid alphanumeric value: "+l)}return new Pn(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class fs{constructor(i){this.information=i,this.generalDecoder=new ji(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class mn extends fs{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}mn.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let h=0;h<13;h++){let f=i.charAt(h+o).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}mn.GTIN_SIZE=40;class _i extends mn{constructor(i){super(i)}parseInformation(){let i=new j;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(_i.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,_i.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,_i.HEADER_SIZE+44)}}_i.HEADER_SIZE=4;class hr extends fs{constructor(i){super(i)}parseInformation(){let i=new j;return this.getGeneralDecoder().decodeAllCodes(i,hr.HEADER_SIZE)}}hr.HEADER_SIZE=5;class fr extends mn{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,h);let f=this.checkWeight(h),m=1e5;for(let y=0;y<5;++y)f/m===0&&i.append("0"),m/=10;i.append(f)}}class Ft extends fr{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Ft.HEADER_SIZE+fr.GTIN_SIZE+Ft.WEIGHT_SIZE)throw new ce;let i=new j;return this.encodeCompressedGtin(i,Ft.HEADER_SIZE),this.encodeCompressedWeight(i,Ft.HEADER_SIZE+fr.GTIN_SIZE,Ft.WEIGHT_SIZE),i.toString()}}Ft.HEADER_SIZE=5,Ft.WEIGHT_SIZE=15;class ul extends Ft{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class js extends Ft{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class qn extends mn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<qn.HEADER_SIZE+mn.GTIN_SIZE)throw new ce;let i=new j;this.encodeCompressedGtin(i,qn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(qn.HEADER_SIZE+mn.GTIN_SIZE,qn.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(qn.HEADER_SIZE+mn.GTIN_SIZE+qn.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}qn.HEADER_SIZE=8,qn.LAST_DIGIT_SIZE=2;class hn extends mn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<hn.HEADER_SIZE+mn.GTIN_SIZE)throw new ce;let i=new j;this.encodeCompressedGtin(i,hn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+mn.GTIN_SIZE,hn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+mn.GTIN_SIZE+hn.LAST_DIGIT_SIZE,hn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(hn.HEADER_SIZE+mn.GTIN_SIZE+hn.LAST_DIGIT_SIZE+hn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}hn.HEADER_SIZE=8,hn.LAST_DIGIT_SIZE=2,hn.FIRST_THREE_DIGITS_SIZE=10;class zt extends fr{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=zt.HEADER_SIZE+zt.GTIN_SIZE+zt.WEIGHT_SIZE+zt.DATE_SIZE)throw new ce;let i=new j;return this.encodeCompressedGtin(i,zt.HEADER_SIZE),this.encodeCompressedWeight(i,zt.HEADER_SIZE+zt.GTIN_SIZE,zt.WEIGHT_SIZE),this.encodeCompressedDate(i,zt.HEADER_SIZE+zt.GTIN_SIZE+zt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,zt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),f/10==0&&i.append("0"),i.append(f),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}zt.HEADER_SIZE=8,zt.WEIGHT_SIZE=20,zt.DATE_SIZE=16;function dr(D){try{if(D.get(1))return new _i(D);if(!D.get(2))return new hr(D);switch(ji.extractNumericValueFromBitArray(D,1,4)){case 4:return new ul(D);case 5:return new js(D)}switch(ji.extractNumericValueFromBitArray(D,1,5)){case 12:return new qn(D);case 13:return new hn(D)}switch(ji.extractNumericValueFromBitArray(D,1,7)){case 56:return new zt(D,"310","11");case 57:return new zt(D,"320","11");case 58:return new zt(D,"310","13");case 59:return new zt(D,"320","13");case 60:return new zt(D,"310","15");case 61:return new zt(D,"320","15");case 62:return new zt(D,"310","17");case 63:return new zt(D,"320","17")}}catch(i){throw console.log(i),new Qi("unknown decoder: "+D)}}class qi{constructor(i,o,l,h){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof qi?qi.equalsOrNull(i.leftchar,o.leftchar)&&qi.equalsOrNull(i.rightchar,o.rightchar)&&qi.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:qi.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class wo{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof wo?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((h,f)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class xe extends Mn{constructor(i){super(...arguments),this.pairs=new Array(xe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return xe.constructResult(this.decodeRow2pairs(i,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,xe.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(f){if(f instanceof ce){if(!this.pairs.length)throw new ce;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ce}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!xe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new ce}static isValidSequence(i){for(let o of xe.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||xe.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new wo(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let h of l.getPairs())for(let f of i)if(qi.equals(h,f))break}}static isPartialRow(i,o){for(let l of o){let h=!0;for(let f of i){let m=!1;for(let y of l.getPairs())if(f.equals(y)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=bn.buildBitArray(i),h=dr(o).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],m[0],m[1]];return new Fe(h,null,null,y,Ne.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let w=this.pairs.get(y);h+=w.getLeftChar().getChecksumPortion(),f++;let v=w.getRightChar();v!=null&&(h+=v.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,y=-1;do this.findNextPair(i,o,y),f=this.parseFoundFinderPattern(i,l,h),f==null?y=xe.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let w=this.decodeDataCharacter(i,f,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ce;let v;try{v=this.decodeDataCharacter(i,f,h,!1)}catch(I){v=null,this.verbose&&console.log(I)}return new qi(w,v,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let w=!1;for(;m<f&&(w=!i.get(m),!!w);)m++;let v=0,I=m;for(let M=m;M<f;M++)if(i.get(M)!=w)h[v]++;else{if(v==3){if(y&&xe.reverseCounters(h),xe.isFinderPattern(h)){this.startEnd[0]=I,this.startEnd[1]=M;return}y&&xe.reverseCounters(h),I+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,v--}else v++;h[v]=1,w=!w}throw new ce}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let h=i[l];i[l]=i[o-l-1],i[o-l-1]=h}}parseFoundFinderPattern(i,o,l){let h,f,m;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!i.get(v);)v--;v++,h=this.startEnd[0]-v,f=v,m=this.startEnd[1]}else f=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let y=this.getDecodeFinderCounters();J.arraycopy(y,0,y,1,y.length-1),y[0]=h;let w;try{w=this.parseFinderValue(y,xe.FINDER_PATTERNS)}catch{return null}return new Sa(w,[f,m],f,m,o)}decodeDataCharacter(i,o,l,h){let f=this.getDataCharacterCounters();for(let $t=0;$t<f.length;$t++)f[$t]=0;if(h)xe.recordPatternInReverse(i,o.getStartEnd()[0],f);else{xe.recordPattern(i,o.getStartEnd()[1],f);for(let $t=0,ii=f.length-1;$t<ii;$t++,ii--){let ki=f[$t];f[$t]=f[ii],f[ii]=ki}}let m=17,y=Ze.sum(new Int32Array(f))/m,w=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-w)/w>.3)throw new ce;let v=this.getOddCounts(),I=this.getEvenCounts(),M=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let $t=0;$t<f.length;$t++){let ii=1*f[$t]/y,ki=ii+.5;if(ki<1){if(ii<.3)throw new ce;ki=1}else if(ki>8){if(ii>8.7)throw new ce;ki=8}let ea=$t/2;($t&1)==0?(v[ea]=ki,M[ea]=ii-ki):(I[ea]=ki,L[ea]=ii-ki)}this.adjustOddEvenCounts(m);let H=4*o.getValue()+(l?0:2)+(h?0:1)-1,W=0,$=0;for(let $t=v.length-1;$t>=0;$t--){if(xe.isNotA1left(o,l,h)){let ii=xe.WEIGHTS[H][2*$t];$+=v[$t]*ii}W+=v[$t]}let se=0;for(let $t=I.length-1;$t>=0;$t--)if(xe.isNotA1left(o,l,h)){let ii=xe.WEIGHTS[H][2*$t+1];se+=I[$t]*ii}let fe=$+se;if((W&1)!=0||W>13||W<4)throw new ce;let Oe=(13-W)/2,Me=xe.SYMBOL_WIDEST[Oe],Ie=9-Me,dt=jn.getRSSvalue(v,Me,!0),ct=jn.getRSSvalue(I,Ie,!1),xi=xe.EVEN_TOTAL_SUBSET[Oe],er=xe.GSUM[Oe],Li=dt*xi+ct+er;return new Ri(Li,fe)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=Ze.sum(new Int32Array(this.getOddCounts())),l=Ze.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;o>13?f=!0:o<4&&(h=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let w=o+l-i,v=(o&1)==1,I=(l&1)==0;if(w==1)if(v){if(I)throw new ce;f=!0}else{if(!I)throw new ce;y=!0}else if(w==-1)if(v){if(I)throw new ce;h=!0}else{if(!I)throw new ce;m=!0}else if(w==0){if(v){if(!I)throw new ce;o<l?(h=!0,y=!0):(f=!0,m=!0)}else if(I)throw new ce}else throw new ce;if(h){if(f)throw new ce;xe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&xe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new ce;xe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&xe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}xe.SYMBOL_WIDEST=[7,5,4,3,1],xe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],xe.GSUM=[0,348,1388,2948,3988],xe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],xe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],xe.FINDER_PAT_A=0,xe.FINDER_PAT_B=1,xe.FINDER_PAT_C=2,xe.FINDER_PAT_D=3,xe.FINDER_PAT_E=4,xe.FINDER_PAT_F=5,xe.FINDER_PATTERN_SEQUENCES=[[xe.FINDER_PAT_A,xe.FINDER_PAT_A],[xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B],[xe.FINDER_PAT_A,xe.FINDER_PAT_C,xe.FINDER_PAT_B,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_C],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_E,xe.FINDER_PAT_B,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F],[xe.FINDER_PAT_A,xe.FINDER_PAT_A,xe.FINDER_PAT_B,xe.FINDER_PAT_B,xe.FINDER_PAT_C,xe.FINDER_PAT_D,xe.FINDER_PAT_D,xe.FINDER_PAT_E,xe.FINDER_PAT_E,xe.FINDER_PAT_F,xe.FINDER_PAT_F]],xe.MAX_PAIRS=11;class qs extends Ri{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Pt extends Mn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const h=this.decodePair(o,!1,i,l);Pt.addOrTally(this.possibleLeftPairs,h),o.reverse();let f=this.decodePair(o,!0,i,l);Pt.addOrTally(this.possibleRightPairs,f),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Pt.checkChecksum(m,y))return Pt.constructResult(m,y)}throw new ce}static addOrTally(i,o){if(o==null)return;let l=!1;for(let h of i)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),h=new String(l).toString(),f=new j;for(let v=13-h.length;v>0;v--)f.append("0");f.append(h);let m=0;for(let v=0;v<13;v++){let I=f.charAt(v).charCodeAt(0)-48;m+=(v&1)===0?3*I:I}m=10-m%10,m===10&&(m=0),f.append(m.toString());let y=i.getFinderPattern().getResultPoints(),w=o.getFinderPattern().getResultPoints();return new Fe(f.toString(),null,0,[y[0],y[1],w[0],w[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(i,o,l,h){try{let f=this.findFinderPattern(i,o),m=this.parseFoundFinderPattern(i,l,o,f),y=h==null?null:h.get(Ue.NEED_RESULT_POINT_CALLBACK);if(y!=null){let I=(f[0]+f[1])/2;o&&(I=i.getSize()-1-I),y.foundPossibleResultPoint(new ze(I,l))}let w=this.decodeDataCharacter(i,m,!0),v=this.decodeDataCharacter(i,m,!1);return new qs(1597*w.getValue()+v.getValue(),w.getChecksumPortion()+4*v.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,o,l){let h=this.getDataCharacterCounters();for(let se=0;se<h.length;se++)h[se]=0;if(l)Xt.recordPatternInReverse(i,o.getStartEnd()[0],h);else{Xt.recordPattern(i,o.getStartEnd()[1]+1,h);for(let se=0,fe=h.length-1;se<fe;se++,fe--){let Oe=h[se];h[se]=h[fe],h[fe]=Oe}}let f=l?16:15,m=Ze.sum(new Int32Array(h))/f,y=this.getOddCounts(),w=this.getEvenCounts(),v=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let se=0;se<h.length;se++){let fe=h[se]/m,Oe=Math.floor(fe+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let Me=Math.floor(se/2);(se&1)===0?(y[Me]=Oe,v[Me]=fe-Oe):(w[Me]=Oe,I[Me]=fe-Oe)}this.adjustOddEvenCounts(l,f);let M=0,L=0;for(let se=y.length-1;se>=0;se--)L*=9,L+=y[se],M+=y[se];let H=0,W=0;for(let se=w.length-1;se>=0;se--)H*=9,H+=w[se],W+=w[se];let $=L+3*H;if(l){if((M&1)!==0||M>12||M<4)throw new ce;let se=(12-M)/2,fe=Pt.OUTSIDE_ODD_WIDEST[se],Oe=9-fe,Me=jn.getRSSvalue(y,fe,!1),Ie=jn.getRSSvalue(w,Oe,!0),dt=Pt.OUTSIDE_EVEN_TOTAL_SUBSET[se],ct=Pt.OUTSIDE_GSUM[se];return new Ri(Me*dt+Ie+ct,$)}else{if((W&1)!==0||W>10||W<4)throw new ce;let se=(10-W)/2,fe=Pt.INSIDE_ODD_WIDEST[se],Oe=9-fe,Me=jn.getRSSvalue(y,fe,!0),Ie=jn.getRSSvalue(w,Oe,!1),dt=Pt.INSIDE_ODD_TOTAL_SUBSET[se],ct=Pt.INSIDE_GSUM[se];return new Ri(Ie*dt+Me+ct,$)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=i.getSize(),f=!1,m=0;for(;m<h&&(f=!i.get(m),o!==f);)m++;let y=0,w=m;for(let v=m;v<h;v++)if(i.get(v)!==f)l[y]++;else{if(y===3){if(Mn.isFinderPattern(l))return[w,v];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new ce}parseFoundFinderPattern(i,o,l,h){let f=i.get(h[0]),m=h[0]-1;for(;m>=0&&f!==i.get(m);)m--;m++;const y=h[0]-m,w=this.getDecodeFinderCounters(),v=new Int32Array(w.length);J.arraycopy(w,0,v,1,w.length-1),v[0]=y;const I=this.parseFinderValue(v,Pt.FINDER_PATTERNS);let M=m,L=h[1];return l&&(M=i.getSize()-1-M,L=i.getSize()-1-L),new Sa(I,[m,h[1]],M,L,o)}adjustOddEvenCounts(i,o){let l=Ze.sum(new Int32Array(this.getOddCounts())),h=Ze.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,y=!1,w=!1;i?(l>12?m=!0:l<4&&(f=!0),h>12?w=!0:h<4&&(y=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?w=!0:h<4&&(y=!0));let v=l+h-o,I=(l&1)===(i?1:0),M=(h&1)===1;if(v===1)if(I){if(M)throw new ce;m=!0}else{if(!M)throw new ce;w=!0}else if(v===-1)if(I){if(M)throw new ce;f=!0}else{if(!M)throw new ce;y=!0}else if(v===0){if(I){if(!M)throw new ce;l<h?(f=!0,w=!0):(m=!0,y=!0)}else if(M)throw new ce}else throw new ce;if(f){if(m)throw new ce;Mn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Mn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(w)throw new ce;Mn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Mn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Pt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Pt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Pt.OUTSIDE_GSUM=[0,161,961,2015,2715],Pt.INSIDE_GSUM=[0,336,1036,1516],Pt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Pt.INSIDE_ODD_WIDEST=[2,4,6,8],Pt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Zi extends Xt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(Ue.POSSIBLE_FORMATS):null,h=i&&i.get(Ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ne.EAN_13)||l.includes(Ne.UPC_A)||l.includes(Ne.EAN_8)||l.includes(Ne.UPC_E))&&this.readers.push(new Gs(i)),l.includes(Ne.CODE_39)&&this.readers.push(new Yt(h)),l.includes(Ne.CODE_128)&&this.readers.push(new Pe),l.includes(Ne.ITF)&&this.readers.push(new Et),l.includes(Ne.RSS_14)&&this.readers.push(new Pt),l.includes(Ne.RSS_EXPANDED)&&this.readers.push(new xe(this.verbose))):(this.readers.push(new Gs(i)),this.readers.push(new Yt),this.readers.push(new Gs(i)),this.readers.push(new Pe),this.readers.push(new Et),this.readers.push(new Pt),this.readers.push(new xe(this.verbose)))}decodeRow(i,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,o,l)}catch{}throw new ce}reset(){this.readers.forEach(i=>i.reset())}}class Ia extends Be{constructor(i=500,o){super(new Zi(o),i,o)}}class _t{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Tt{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class mt{constructor(i,o,l,h,f,m){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let y=0;const w=m.getECCodewords(),v=m.getECBlocks();for(let I of v)y+=I.getCount()*(I.getDataCodewords()+w);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new F;for(let l of mt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new mt(1,10,10,8,8,new _t(5,new Tt(1,3))),new mt(2,12,12,10,10,new _t(7,new Tt(1,5))),new mt(3,14,14,12,12,new _t(10,new Tt(1,8))),new mt(4,16,16,14,14,new _t(12,new Tt(1,12))),new mt(5,18,18,16,16,new _t(14,new Tt(1,18))),new mt(6,20,20,18,18,new _t(18,new Tt(1,22))),new mt(7,22,22,20,20,new _t(20,new Tt(1,30))),new mt(8,24,24,22,22,new _t(24,new Tt(1,36))),new mt(9,26,26,24,24,new _t(28,new Tt(1,44))),new mt(10,32,32,14,14,new _t(36,new Tt(1,62))),new mt(11,36,36,16,16,new _t(42,new Tt(1,86))),new mt(12,40,40,18,18,new _t(48,new Tt(1,114))),new mt(13,44,44,20,20,new _t(56,new Tt(1,144))),new mt(14,48,48,22,22,new _t(68,new Tt(1,174))),new mt(15,52,52,24,24,new _t(42,new Tt(2,102))),new mt(16,64,64,14,14,new _t(56,new Tt(2,140))),new mt(17,72,72,16,16,new _t(36,new Tt(4,92))),new mt(18,80,80,18,18,new _t(48,new Tt(4,114))),new mt(19,88,88,20,20,new _t(56,new Tt(4,144))),new mt(20,96,96,22,22,new _t(68,new Tt(4,174))),new mt(21,104,104,24,24,new _t(56,new Tt(6,136))),new mt(22,120,120,18,18,new _t(68,new Tt(6,175))),new mt(23,132,132,20,20,new _t(62,new Tt(8,163))),new mt(24,144,144,22,22,new _t(62,new Tt(8,156),new Tt(2,155))),new mt(25,8,18,6,16,new _t(7,new Tt(1,5))),new mt(26,8,32,6,14,new _t(11,new Tt(1,10))),new mt(27,12,26,10,24,new _t(14,new Tt(1,16))),new mt(28,12,36,10,16,new _t(18,new Tt(1,22))),new mt(29,16,36,14,16,new _t(24,new Tt(1,32))),new mt(30,16,48,14,22,new _t(28,new Tt(1,49)))]}}mt.VERSIONS=mt.buildVersions();class xo{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new F;this.version=xo.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new it(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return mt.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,w=!1,v=!1,I=!1;do if(l===f&&h===0&&!y)i[o++]=this.readCorner1(f,m)&255,l-=2,h+=2,y=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!w)i[o++]=this.readCorner2(f,m)&255,l-=2,h+=2,w=!0;else if(l===f+4&&h===2&&(m&7)===0&&!v)i[o++]=this.readCorner3(f,m)&255,l-=2,h+=2,v=!0;else if(l===f-2&&h===0&&(m&7)===4&&!I)i[o++]=this.readCorner4(f,m)&255,l-=2,h+=2,I=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(i[o++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(i[o++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(o!==this.version.getTotalCodewords())throw new F;return i}readModule(i,o,l,h){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,h){let f=0;return this.readModule(i-2,o-2,l,h)&&(f|=1),f<<=1,this.readModule(i-2,o-1,l,h)&&(f|=1),f<<=1,this.readModule(i-1,o-2,l,h)&&(f|=1),f<<=1,this.readModule(i-1,o-1,l,h)&&(f|=1),f<<=1,this.readModule(i-1,o,l,h)&&(f|=1),f<<=1,this.readModule(i,o-2,l,h)&&(f|=1),f<<=1,this.readModule(i,o-1,l,h)&&(f|=1),f<<=1,this.readModule(i,o,l,h)&&(f|=1),f}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new R("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=o/h|0,y=l/f|0,w=m*h,v=y*f,I=new it(v,w);for(let M=0;M<m;++M){const L=M*h;for(let H=0;H<y;++H){const W=H*f;for(let $=0;$<h;++$){const se=M*(h+2)+1+$,fe=L+$;for(let Oe=0;Oe<f;++Oe){const Me=H*(f+2)+1+Oe;if(i.get(Me,se)){const Ie=W+Oe;I.set(Ie,fe)}}}}}return I}}class Xi{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let h=0;const f=l.getECBlocks();for(let $ of f)h+=$.getCount();const m=new Array(h);let y=0;for(let $ of f)for(let se=0;se<$.getCount();se++){const fe=$.getDataCodewords(),Oe=l.getECCodewords()+fe;m[y++]=new Xi(fe,new Uint8Array(Oe))}const v=m[0].codewords.length-l.getECCodewords(),I=v-1;let M=0;for(let $=0;$<I;$++)for(let se=0;se<y;se++)m[se].codewords[$]=i[M++];const L=o.getVersionNumber()===24,H=L?8:y;for(let $=0;$<H;$++)m[$].codewords[v-1]=i[M++];const W=m[0].codewords.length;for(let $=v;$<W;$++)for(let se=0;se<y;se++){const fe=L?(se+8)%y:se,Oe=L&&fe>7?$-1:$;m[fe].codewords[Oe]=i[M++]}if(M!==i.length)throw new R;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class cn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new R(""+i);let o=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,y=i<m?i:m,w=m-y,v=255>>8-y<<w;o=(f[h]&v)>>w,i-=y,l+=y,l===8&&(l=0,h++)}if(i>0){for(;i>=8;)o=o<<8|f[h]&255,h++,i-=8;if(i>0){const m=8-i,y=255>>m<<m;o=o<<i|(f[h]&y)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var nn;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(nn||(nn={}));class Oi{static decode(i){const o=new cn(i),l=new j,h=new j,f=new Array;let m=nn.ASCII_ENCODE;do if(m===nn.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case nn.C40_ENCODE:this.decodeC40Segment(o,l);break;case nn.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case nn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case nn.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case nn.BASE256_ENCODE:this.decodeBase256Segment(o,l,f);break;default:throw new F}m=nn.ASCII_ENCODE}while(m!==nn.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new Ei(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,o,l){let h=!1;do{let f=i.readBits(8);if(f===0)throw new F;if(f<=128)return h&&(f+=128),o.append(String.fromCharCode(f-1)),nn.ASCII_ENCODE;if(f===129)return nn.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&o.append("0"),o.append(""+m)}else switch(f){case 230:return nn.C40_ENCODE;case 231:return nn.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return nn.ANSIX12_ENCODE;case 239:return nn.TEXT_ENCODE;case 240:return nn.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new F;break}}while(i.available()>0);return nn.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const h=[];let f=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let y=0;y<3;y++){const w=h[y];switch(f){case 0:if(w<3)f=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[w];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else throw new F;break;case 1:l?(o.append(String.fromCharCode(w+128)),l=!1):o.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[w];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else switch(w){case 27:o.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:l?(o.append(String.fromCharCode(w+224)),l=!1):o.append(String.fromCharCode(w+96)),f=0;break;default:throw new F}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,h=[],f=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let y=0;y<3;y++){const w=h[y];switch(f){case 0:if(w<3)f=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[w];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else throw new F;break;case 1:l?(o.append(String.fromCharCode(w+128)),l=!1):o.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[w];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else switch(w){case 27:o.append("");break;case 30:l=!0;break;default:throw new F}f=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[w];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v),f=0}else throw new F;break;default:throw new F}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new F;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let h=(i<<8)+o-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let h=i.readBits(6);if(h===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(h&32)===0&&(h|=64),o.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let h=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),h++);let m;if(f===0?m=i.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(i.readBits(8),h++),m<0)throw new F;const y=new Uint8Array(m);for(let w=0;w<m;w++){if(i.available()<8)throw new F;y[w]=this.unrandomize255State(i.readBits(8),h++)}l.push(y);try{o.append(X.decode(y,K.ISO88591))}catch(w){throw new Qi("Platform does not support required encoding: "+w.message)}}static unrandomize255State(i,o){const l=149*o%255+1,h=i-l;return h>=0?h:h+256}}Oi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Oi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Oi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Oi.TEXT_SHIFT2_SET_CHARS=Oi.C40_SHIFT2_SET_CHARS,Oi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ds{constructor(){this.rsDecoder=new Qr(At.DATA_MATRIX_FIELD_256)}decode(i){const o=new xo(i),l=o.getVersion(),h=o.readCodewords(),f=Xi.getDataBlocks(h,l);let m=0;for(let v of f)m+=v.getNumDataCodewords();const y=new Uint8Array(m),w=f.length;for(let v=0;v<w;v++){const I=f[v],M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)y[H*w+v]=M[H]}return Oi.decode(y)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new G}for(let h=0;h<o;h++)i[h]=l[h]}}class et{constructor(i){this.image=i,this.rectangleDetector=new cr(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ce;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],f=o[2],m=o[3];let y=this.transitionsBetween(l,m)+1,w=this.transitionsBetween(f,m)+1;(y&1)===1&&(y+=1),(w&1)===1&&(w+=1),4*y<7*w&&4*w<7*y&&(y=w=Math.max(y,w));let v=et.sampleGrid(this.image,l,h,f,m,y,w);return new va(v,[l,h,f,m])}static shiftPoint(i,o,l){let h=(o.getX()-i.getX())/(l+1),f=(o.getY()-i.getY())/(l+1);return new ze(i.getX()+h,i.getY()+f)}static moveAway(i,o,l){let h=i.getX(),f=i.getY();return h<o?h-=1:h+=1,f<l?f-=1:f+=1,new ze(h,f)}detectSolid1(i){let o=i[0],l=i[1],h=i[3],f=i[2],m=this.transitionsBetween(o,l),y=this.transitionsBetween(l,h),w=this.transitionsBetween(h,f),v=this.transitionsBetween(f,o),I=m,M=[f,o,l,h];return I>y&&(I=y,M[0]=o,M[1]=l,M[2]=h,M[3]=f),I>w&&(I=w,M[0]=l,M[1]=h,M[2]=f,M[3]=o),I>v&&(M[0]=h,M[1]=f,M[2]=o,M[3]=l),M}detectSolid2(i){let o=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(o,f),y=et.shiftPoint(l,h,(m+1)*4),w=et.shiftPoint(h,l,(m+1)*4),v=this.transitionsBetween(y,o),I=this.transitionsBetween(w,f);return v<I?(i[0]=o,i[1]=l,i[2]=h,i[3]=f):(i[0]=l,i[1]=h,i[2]=f,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(o,f),y=this.transitionsBetween(l,f),w=et.shiftPoint(o,l,(y+1)*4),v=et.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(w,f),y=this.transitionsBetween(v,f);let I=new ze(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),M=new ze(f.getX()+(o.getX()-l.getX())/(y+1),f.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(I))return this.isValid(M)?M:null;if(!this.isValid(M))return I;let L=this.transitionsBetween(w,I)+this.transitionsBetween(v,I),H=this.transitionsBetween(w,M)+this.transitionsBetween(v,M);return L>H?I:M}shiftToModuleCenter(i){let o=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(o,f)+1,y=this.transitionsBetween(h,f)+1,w=et.shiftPoint(o,l,y*4),v=et.shiftPoint(h,l,m*4);m=this.transitionsBetween(w,f)+1,y=this.transitionsBetween(v,f)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let I=(o.getX()+l.getX()+h.getX()+f.getX())/4,M=(o.getY()+l.getY()+h.getY()+f.getY())/4;o=et.moveAway(o,I,M),l=et.moveAway(l,I,M),h=et.moveAway(h,I,M),f=et.moveAway(f,I,M);let L,H;return w=et.shiftPoint(o,l,y*4),w=et.shiftPoint(w,f,m*4),L=et.shiftPoint(l,o,y*4),L=et.shiftPoint(L,h,m*4),v=et.shiftPoint(h,f,y*4),v=et.shiftPoint(v,l,m*4),H=et.shiftPoint(f,h,y*4),H=et.shiftPoint(H,o,m*4),[w,L,v,H]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,h,f,m,y){return Gn.getInstance().sampleGrid(i,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),h=Math.trunc(i.getY()),f=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-h)>Math.abs(f-l);if(y){let $=l;l=h,h=$,$=f,f=m,m=$}let w=Math.abs(f-l),v=Math.abs(m-h),I=-w/2,M=h<m?1:-1,L=l<f?1:-1,H=0,W=this.image.get(y?h:l,y?l:h);for(let $=l,se=h;$!==f;$+=L){let fe=this.image.get(y?se:$,y?$:se);if(fe!==W&&(H++,W=fe),I+=v,I>0){if(se===m)break;se+=M,I-=w}}return H}}class ui{constructor(){this.decoder=new ds}decode(i,o=null){let l,h;if(o!=null&&o.has(Ue.PURE_BARCODE)){const v=ui.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(v),h=ui.NO_POINTS}else{const v=new et(i.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),h=v.getPoints()}const f=l.getRawBytes(),m=new Fe(l.getText(),f,8*f.length,h,Ne.DATA_MATRIX,J.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(ot.BYTE_SEGMENTS,y);const w=l.getECLevel();return w!=null&&m.putMetadata(ot.ERROR_CORRECTION_LEVEL,w),m}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new ce;const h=this.moduleSize(o,i);let f=o[1];const m=l[1];let y=o[0];const v=(l[0]-y+1)/h,I=(m-f+1)/h;if(v<=0||I<=0)throw new ce;const M=h/2;f+=M,y+=M;const L=new it(v,I);for(let H=0;H<I;H++){const W=f+H*h;for(let $=0;$<v;$++)i.get(y+$*h,W)&&L.set($,H)}return L}static moduleSize(i,o){const l=o.getWidth();let h=i[0];const f=i[1];for(;h<l&&o.get(h,f);)h++;if(h===l)throw new ce;const m=h-i[0];if(m===0)throw new ce;return m}}ui.NO_POINTS=[];class Xs extends Be{constructor(i=500){super(new ui,i)}}var pn;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(pn||(pn={}));class Ht{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,Ht.FOR_BITS.set(l,this),Ht.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Ht.L;case"M":return Ht.M;case"Q":return Ht.Q;case"H":return Ht.H;default:throw new b(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Ht))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=Ht.FOR_BITS.size)throw new R;return Ht.FOR_BITS.get(i)}}Ht.FOR_BITS=new Map,Ht.FOR_VALUE=new Map,Ht.L=new Ht(pn.L,"L",1),Ht.M=new Ht(pn.M,"M",0),Ht.Q=new Ht(pn.Q,"Q",3),Ht.H=new Ht(pn.H,"H",2);class Ln{constructor(i){this.errorCorrectionLevel=Ht.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return ne.bitCount(i^o)}static decodeFormatInformation(i,o){const l=Ln.doDecodeFormatInformation(i,o);return l!==null?l:Ln.doDecodeFormatInformation(i^Ln.FORMAT_INFO_MASK_QR,o^Ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of Ln.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===i||m===o)return new Ln(f[1]);let y=Ln.numBitsDiffering(i,m);y<l&&(h=f[1],l=y),i!==o&&(y=Ln.numBitsDiffering(o,m),y<l&&(h=f[1],l=y))}return l<=3?new Ln(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Ln))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Ln.FORMAT_INFO_MASK_QR=21522,Ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)h+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new F;try{return this.getVersionForNumber((i-17)/4)}catch{throw new F}}static getVersionForNumber(i){if(i<1||i>40)throw new R;return Xe.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Xe.VERSION_DECODE_INFO.length;h++){const f=Xe.VERSION_DECODE_INFO[h];if(f===i)return Xe.getVersionForNumber(h+7);const m=Ln.numBitsDiffering(i,f);m<o&&(l=h+7,o=m)}return o<=3?Xe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new it(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new ae(7,new U(1,19)),new ae(10,new U(1,16)),new ae(13,new U(1,13)),new ae(17,new U(1,9))),new Xe(2,Int32Array.from([6,18]),new ae(10,new U(1,34)),new ae(16,new U(1,28)),new ae(22,new U(1,22)),new ae(28,new U(1,16))),new Xe(3,Int32Array.from([6,22]),new ae(15,new U(1,55)),new ae(26,new U(1,44)),new ae(18,new U(2,17)),new ae(22,new U(2,13))),new Xe(4,Int32Array.from([6,26]),new ae(20,new U(1,80)),new ae(18,new U(2,32)),new ae(26,new U(2,24)),new ae(16,new U(4,9))),new Xe(5,Int32Array.from([6,30]),new ae(26,new U(1,108)),new ae(24,new U(2,43)),new ae(18,new U(2,15),new U(2,16)),new ae(22,new U(2,11),new U(2,12))),new Xe(6,Int32Array.from([6,34]),new ae(18,new U(2,68)),new ae(16,new U(4,27)),new ae(24,new U(4,19)),new ae(28,new U(4,15))),new Xe(7,Int32Array.from([6,22,38]),new ae(20,new U(2,78)),new ae(18,new U(4,31)),new ae(18,new U(2,14),new U(4,15)),new ae(26,new U(4,13),new U(1,14))),new Xe(8,Int32Array.from([6,24,42]),new ae(24,new U(2,97)),new ae(22,new U(2,38),new U(2,39)),new ae(22,new U(4,18),new U(2,19)),new ae(26,new U(4,14),new U(2,15))),new Xe(9,Int32Array.from([6,26,46]),new ae(30,new U(2,116)),new ae(22,new U(3,36),new U(2,37)),new ae(20,new U(4,16),new U(4,17)),new ae(24,new U(4,12),new U(4,13))),new Xe(10,Int32Array.from([6,28,50]),new ae(18,new U(2,68),new U(2,69)),new ae(26,new U(4,43),new U(1,44)),new ae(24,new U(6,19),new U(2,20)),new ae(28,new U(6,15),new U(2,16))),new Xe(11,Int32Array.from([6,30,54]),new ae(20,new U(4,81)),new ae(30,new U(1,50),new U(4,51)),new ae(28,new U(4,22),new U(4,23)),new ae(24,new U(3,12),new U(8,13))),new Xe(12,Int32Array.from([6,32,58]),new ae(24,new U(2,92),new U(2,93)),new ae(22,new U(6,36),new U(2,37)),new ae(26,new U(4,20),new U(6,21)),new ae(28,new U(7,14),new U(4,15))),new Xe(13,Int32Array.from([6,34,62]),new ae(26,new U(4,107)),new ae(22,new U(8,37),new U(1,38)),new ae(24,new U(8,20),new U(4,21)),new ae(22,new U(12,11),new U(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new ae(30,new U(3,115),new U(1,116)),new ae(24,new U(4,40),new U(5,41)),new ae(20,new U(11,16),new U(5,17)),new ae(24,new U(11,12),new U(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new ae(22,new U(5,87),new U(1,88)),new ae(24,new U(5,41),new U(5,42)),new ae(30,new U(5,24),new U(7,25)),new ae(24,new U(11,12),new U(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new ae(24,new U(5,98),new U(1,99)),new ae(28,new U(7,45),new U(3,46)),new ae(24,new U(15,19),new U(2,20)),new ae(30,new U(3,15),new U(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new ae(28,new U(1,107),new U(5,108)),new ae(28,new U(10,46),new U(1,47)),new ae(28,new U(1,22),new U(15,23)),new ae(28,new U(2,14),new U(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new ae(30,new U(5,120),new U(1,121)),new ae(26,new U(9,43),new U(4,44)),new ae(28,new U(17,22),new U(1,23)),new ae(28,new U(2,14),new U(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new ae(28,new U(3,113),new U(4,114)),new ae(26,new U(3,44),new U(11,45)),new ae(26,new U(17,21),new U(4,22)),new ae(26,new U(9,13),new U(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new ae(28,new U(3,107),new U(5,108)),new ae(26,new U(3,41),new U(13,42)),new ae(30,new U(15,24),new U(5,25)),new ae(28,new U(15,15),new U(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new ae(28,new U(4,116),new U(4,117)),new ae(26,new U(17,42)),new ae(28,new U(17,22),new U(6,23)),new ae(30,new U(19,16),new U(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new ae(28,new U(2,111),new U(7,112)),new ae(28,new U(17,46)),new ae(30,new U(7,24),new U(16,25)),new ae(24,new U(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new ae(30,new U(4,121),new U(5,122)),new ae(28,new U(4,47),new U(14,48)),new ae(30,new U(11,24),new U(14,25)),new ae(30,new U(16,15),new U(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new ae(30,new U(6,117),new U(4,118)),new ae(28,new U(6,45),new U(14,46)),new ae(30,new U(11,24),new U(16,25)),new ae(30,new U(30,16),new U(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new ae(26,new U(8,106),new U(4,107)),new ae(28,new U(8,47),new U(13,48)),new ae(30,new U(7,24),new U(22,25)),new ae(30,new U(22,15),new U(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new ae(28,new U(10,114),new U(2,115)),new ae(28,new U(19,46),new U(4,47)),new ae(28,new U(28,22),new U(6,23)),new ae(30,new U(33,16),new U(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new ae(30,new U(8,122),new U(4,123)),new ae(28,new U(22,45),new U(3,46)),new ae(30,new U(8,23),new U(26,24)),new ae(30,new U(12,15),new U(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new U(3,117),new U(10,118)),new ae(28,new U(3,45),new U(23,46)),new ae(30,new U(4,24),new U(31,25)),new ae(30,new U(11,15),new U(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new U(7,116),new U(7,117)),new ae(28,new U(21,45),new U(7,46)),new ae(30,new U(1,23),new U(37,24)),new ae(30,new U(19,15),new U(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new U(5,115),new U(10,116)),new ae(28,new U(19,47),new U(10,48)),new ae(30,new U(15,24),new U(25,25)),new ae(30,new U(23,15),new U(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new U(13,115),new U(3,116)),new ae(28,new U(2,46),new U(29,47)),new ae(30,new U(42,24),new U(1,25)),new ae(30,new U(23,15),new U(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new U(17,115)),new ae(28,new U(10,46),new U(23,47)),new ae(30,new U(10,24),new U(35,25)),new ae(30,new U(19,15),new U(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new U(17,115),new U(1,116)),new ae(28,new U(14,46),new U(21,47)),new ae(30,new U(29,24),new U(19,25)),new ae(30,new U(11,15),new U(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new U(13,115),new U(6,116)),new ae(28,new U(14,46),new U(23,47)),new ae(30,new U(44,24),new U(7,25)),new ae(30,new U(59,16),new U(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new U(12,121),new U(7,122)),new ae(28,new U(12,47),new U(26,48)),new ae(30,new U(39,24),new U(14,25)),new ae(30,new U(22,15),new U(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new U(6,121),new U(14,122)),new ae(28,new U(6,47),new U(34,48)),new ae(30,new U(46,24),new U(10,25)),new ae(30,new U(2,15),new U(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new U(17,122),new U(4,123)),new ae(28,new U(29,46),new U(14,47)),new ae(30,new U(49,24),new U(10,25)),new ae(30,new U(24,15),new U(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new U(4,122),new U(18,123)),new ae(28,new U(13,46),new U(32,47)),new ae(30,new U(48,24),new U(14,25)),new ae(30,new U(42,15),new U(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new U(20,117),new U(4,118)),new ae(28,new U(40,47),new U(7,48)),new ae(30,new U(43,24),new U(22,25)),new ae(30,new U(10,15),new U(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new U(19,118),new U(6,119)),new ae(28,new U(18,47),new U(31,48)),new ae(30,new U(34,24),new U(34,25)),new ae(30,new U(20,15),new U(61,16)))];var Sn;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Sn||(Sn={}));class yn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&i.flip(h,l)}}yn.values=new Map([[Sn.DATA_MASK_000,new yn(Sn.DATA_MASK_000,(D,i)=>(D+i&1)===0)],[Sn.DATA_MASK_001,new yn(Sn.DATA_MASK_001,(D,i)=>(D&1)===0)],[Sn.DATA_MASK_010,new yn(Sn.DATA_MASK_010,(D,i)=>i%3===0)],[Sn.DATA_MASK_011,new yn(Sn.DATA_MASK_011,(D,i)=>(D+i)%3===0)],[Sn.DATA_MASK_100,new yn(Sn.DATA_MASK_100,(D,i)=>(Math.floor(D/2)+Math.floor(i/3)&1)===0)],[Sn.DATA_MASK_101,new yn(Sn.DATA_MASK_101,(D,i)=>D*i%6===0)],[Sn.DATA_MASK_110,new yn(Sn.DATA_MASK_110,(D,i)=>D*i%6<3)],[Sn.DATA_MASK_111,new yn(Sn.DATA_MASK_111,(D,i)=>(D+i+D*i%3&1)===0)]]);class es{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new F;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let f=o-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=o-8;f<o;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Ln.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return Xe.getVersionForNumber(o);let l=0;const h=i-11;for(let m=5;m>=0;m--)for(let y=i-9;y>=h;y--)l=this.copyBit(y,m,l);let f=Xe.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let y=i-9;y>=h;y--)l=this.copyBit(m,y,l);if(f=Xe.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new F}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=yn.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let w=0,v=0,I=0;for(let M=h-1;M>0;M-=2){M===6&&M--;for(let L=0;L<h;L++){const H=m?h-1-L:L;for(let W=0;W<2;W++)f.get(M-W,H)||(I++,v<<=1,this.bitMatrix.get(M-W,H)&&(v|=1),I===8&&(y[w++]=v,I=0,v=0))}m=!m}if(w!==o.getTotalCodewords())throw new F;return y}remask(){if(this.parsedFormatInfo===null)return;const i=yn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let h=o+1,f=i.getHeight();h<f;h++)i.get(o,h)!==i.get(h,o)&&(i.flip(h,o),i.flip(o,h))}}class Ys{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new R;const h=o.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const W of m)f+=W.getCount();const y=new Array(f);let w=0;for(const W of m)for(let $=0;$<W.getCount();$++){const se=W.getDataCodewords(),fe=h.getECCodewordsPerBlock()+se;y[w++]=new Ys(se,new Uint8Array(fe))}const v=y[0].codewords.length;let I=y.length-1;for(;I>=0&&y[I].codewords.length!==v;)I--;I++;const M=v-h.getECCodewordsPerBlock();let L=0;for(let W=0;W<M;W++)for(let $=0;$<w;$++)y[$].codewords[W]=i[L++];for(let W=I;W<w;W++)y[W].codewords[M]=i[L++];const H=y[0].codewords.length;for(let W=M;W<H;W++)for(let $=0;$<w;$++){const se=$<I?W:W+1;y[$].codewords[se]=i[L++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hi;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(hi||(hi={}));class Ye{constructor(i,o,l,h){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,Ye.FOR_BITS.set(h,this),Ye.FOR_VALUE.set(i,this)}static forBits(i){const o=Ye.FOR_BITS.get(i);if(o===void 0)throw new R;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ye))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(hi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(hi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(hi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(hi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(hi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(hi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(hi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(hi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(hi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(hi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class rn{static decode(i,o,l,h){const f=new cn(i);let m=new j;const y=new Array;let w=-1,v=-1;try{let I=null,M=!1,L;do{if(f.available()<4)L=Ye.TERMINATOR;else{const H=f.readBits(4);L=Ye.forBits(H)}switch(L){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:M=!0;break;case Ye.STRUCTURED_APPEND:if(f.available()<16)throw new F;w=f.readBits(8),v=f.readBits(8);break;case Ye.ECI:const H=rn.parseECIValue(f);if(I=B.getCharacterSetECIByValue(H),I===null)throw new F;break;case Ye.HANZI:const W=f.readBits(4),$=f.readBits(L.getCharacterCountBits(o));W===rn.GB2312_SUBSET&&rn.decodeHanziSegment(f,m,$);break;default:const se=f.readBits(L.getCharacterCountBits(o));switch(L){case Ye.NUMERIC:rn.decodeNumericSegment(f,m,se);break;case Ye.ALPHANUMERIC:rn.decodeAlphanumericSegment(f,m,se,M);break;case Ye.BYTE:rn.decodeByteSegment(f,m,se,I,y,h);break;case Ye.KANJI:rn.decodeKanjiSegment(f,m,se);break;default:throw new F}break}}while(L!==Ye.TERMINATOR)}catch{throw new F}return new Ei(i,m.toString(),y.length===0?null:y,l===null?null:l.toString(),w,v)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new F;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=i.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,h[f]=y>>8&255,h[f+1]=y&255,f+=2,l--}try{o.append(X.decode(h,K.GB2312))}catch(m){throw new F(m)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new F;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=i.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,h[f]=y>>8,h[f+1]=y,f+=2,l--}try{o.append(X.decode(h,K.SHIFT_JIS))}catch(m){throw new F(m)}}static decodeByteSegment(i,o,l,h,f,m){if(8*l>i.available())throw new F;const y=new Uint8Array(l);for(let v=0;v<l;v++)y[v]=i.readBits(8);let w;h===null?w=K.guessEncoding(y,m):w=h.getName();try{o.append(X.decode(y,w))}catch(v){throw new F(v)}f.push(y)}static toAlphaNumericChar(i){if(i>=rn.ALPHANUMERIC_CHARS.length)throw new F;return rn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,h){const f=o.length();for(;l>1;){if(i.available()<11)throw new F;const m=i.readBits(11);o.append(rn.toAlphaNumericChar(Math.floor(m/45))),o.append(rn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new F;o.append(rn.toAlphaNumericChar(i.readBits(6)))}if(h)for(let m=f;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new F;const h=i.readBits(10);if(h>=1e3)throw new F;o.append(rn.toAlphaNumericChar(Math.floor(h/100))),o.append(rn.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(rn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(i.available()<7)throw new F;const h=i.readBits(7);if(h>=100)throw new F;o.append(rn.toAlphaNumericChar(Math.floor(h/10))),o.append(rn.toAlphaNumericChar(h%10))}else if(l===1){if(i.available()<4)throw new F;const h=i.readBits(4);if(h>=10)throw new F;o.append(rn.toAlphaNumericChar(h))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new F}}rn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",rn.GB2312_SUBSET=1;class To{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class gr{constructor(){this.rsDecoder=new Qr(At.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(it.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new es(i);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,o);return f.setOther(new To(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(i,o){const l=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),m=Ys.getDataBlocks(f,l,h);let y=0;for(const I of m)y+=I.getNumDataCodewords();const w=new Uint8Array(y);let v=0;for(const I of m){const M=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(M,L);for(let H=0;H<L;H++)w[v++]=M[H]}return rn.decode(w,l,h,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new G}for(let h=0;h<o;h++)i[h]=l[h]}}class Ks extends ze{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const h=(this.getX()+o)/2,f=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Ks(h,f,m)}}class gs{constructor(i,o,l,h,f,m,y){this.image=i,this.startX=o,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,h=i+l,f=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let w=0;w<o;w++){const v=f+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));m[0]=0,m[1]=0,m[2]=0;let I=i;for(;I<h&&!y.get(I,v);)I++;let M=0;for(;I<h;){if(y.get(I,v))if(M===1)m[1]++;else if(M===2){if(this.foundPatternCross(m)){const L=this.handlePossibleCenter(m,v,I);if(L!==null)return L}m[0]=m[2],m[1]=1,m[2]=0,M=1}else m[++M]++;else M===1&&M++,m[M]++;I++}if(this.foundPatternCross(m)){const L=this.handlePossibleCenter(m,v,h);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ce}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-i[h])>=l)return!1;return!0}crossCheckVertical(i,o,l,h){const f=this.image,m=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let w=i;for(;w>=0&&f.get(o,w)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&!f.get(o,w)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=i+1;w<m&&f.get(o,w)&&y[1]<=l;)y[1]++,w++;if(w===m||y[1]>l)return NaN;for(;w<m&&!f.get(o,w)&&y[2]<=l;)y[2]++,w++;if(y[2]>l)return NaN;const v=y[0]+y[1]+y[2];return 5*Math.abs(v-h)>=2*h?NaN:this.foundPatternCross(y)?gs.centerFromEnd(y,w):NaN}handlePossibleCenter(i,o,l){const h=i[0]+i[1]+i[2],f=gs.centerFromEnd(i,l),m=this.crossCheckVertical(o,f,2*i[1],h);if(!isNaN(m)){const y=(i[0]+i[1]+i[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(y,m,f))return v.combineEstimate(m,f,y);const w=new Ks(f,m,y);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class Mr extends ze{constructor(i,o,l,h){super(i,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const h=this.count+1,f=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+i)/h,y=(this.count*this.estimatedModuleSize+l)/h;return new Mr(f,m,y,h)}}class Ai{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class In{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(Ue.TRY_HARDER)!==void 0,l=i!=null&&i.get(Ue.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let y=Math.floor(3*f/(4*In.MAX_MODULES));(y<In.MIN_SKIP||o)&&(y=In.MIN_SKIP);let w=!1;const v=new Int32Array(5);for(let M=y-1;M<f&&!w;M+=y){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let L=0;for(let H=0;H<m;H++)if(h.get(H,M))(L&1)===1&&L++,v[L]++;else if((L&1)===0)if(L===4)if(In.foundPatternCross(v)){if(this.handlePossibleCenter(v,M,H,l)===!0)if(y=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>v[2]&&(M+=$-v[2]-y,H=m-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,L=3;continue}L=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,L=3;else v[++L]++;else v[L]++;In.foundPatternCross(v)&&this.handlePossibleCenter(v,M,m,l)===!0&&(y=v[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return ze.orderBestPatterns(I),new Ai(I)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let f=0;f<5;f++){const m=i[f];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-i[0])<h&&Math.abs(l-i[1])<h&&Math.abs(3*l-i[2])<3*h&&Math.abs(l-i[3])<h&&Math.abs(l-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,h){const f=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;i>=m&&o>=m&&y.get(o-m,i-m);)f[2]++,m++;if(i<m||o<m)return!1;for(;i>=m&&o>=m&&!y.get(o-m,i-m)&&f[1]<=l;)f[1]++,m++;if(i<m||o<m||f[1]>l)return!1;for(;i>=m&&o>=m&&y.get(o-m,i-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const w=y.getHeight(),v=y.getWidth();for(m=1;i+m<w&&o+m<v&&y.get(o+m,i+m);)f[2]++,m++;if(i+m>=w||o+m>=v)return!1;for(;i+m<w&&o+m<v&&!y.get(o+m,i+m)&&f[3]<l;)f[3]++,m++;if(i+m>=w||o+m>=v||f[3]>=l)return!1;for(;i+m<w&&o+m<v&&y.get(o+m,i+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const I=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(I-h)<2*h&&In.foundPatternCross(f)}crossCheckVertical(i,o,l,h){const f=this.image,m=f.getHeight(),y=this.getCrossCheckStateCount();let w=i;for(;w>=0&&f.get(o,w);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(o,w)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&f.get(o,w)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=i+1;w<m&&f.get(o,w);)y[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(o,w)&&y[3]<l;)y[3]++,w++;if(w===m||y[3]>=l)return NaN;for(;w<m&&f.get(o,w)&&y[4]<l;)y[4]++,w++;if(y[4]>=l)return NaN;const v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-h)>=2*h?NaN:In.foundPatternCross(y)?In.centerFromEnd(y,w):NaN}crossCheckHorizontal(i,o,l,h){const f=this.image,m=f.getWidth(),y=this.getCrossCheckStateCount();let w=i;for(;w>=0&&f.get(w,o);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,o)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&f.get(w,o)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=i+1;w<m&&f.get(w,o);)y[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(w,o)&&y[3]<l;)y[3]++,w++;if(w===m||y[3]>=l)return NaN;for(;w<m&&f.get(w,o)&&y[4]<l;)y[4]++,w++;if(y[4]>=l)return NaN;const v=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(v-h)>=h?NaN:In.foundPatternCross(y)?In.centerFromEnd(y,w):NaN}handlePossibleCenter(i,o,l,h){const f=i[0]+i[1]+i[2]+i[3]+i[4];let m=In.centerFromEnd(i,l),y=this.crossCheckVertical(o,Math.floor(m),i[2],f);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),i[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),i[2],f)))){const w=f/7;let v=!1;const I=this.possibleCenters;for(let M=0,L=I.length;M<L;M++){const H=I[M];if(H.aboutEquals(w,y,m)){I[M]=H.combineEstimate(y,m,w),v=!0;break}}if(!v){const M=new Mr(m,y,w);I.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=In.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=In.CENTER_QUORUM&&(i++,o+=m.getEstimatedModuleSize());if(i<3)return!1;const h=o/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ce;const o=this.possibleCenters;let l;if(i>3){let h=0,f=0;for(const w of this.possibleCenters){const v=w.getEstimatedModuleSize();h+=v,f+=v*v}l=h/i;let m=Math.sqrt(f/i-l*l);o.sort((w,v)=>{const I=Math.abs(v.getEstimatedModuleSize()-l),M=Math.abs(w.getEstimatedModuleSize()-l);return I<M?-1:I>M?1:0});const y=Math.max(.2*l,m);for(let w=0;w<o.length&&o.length>3;w++){const v=o[w];Math.abs(v.getEstimatedModuleSize()-l)>y&&(o.splice(w,1),w--)}}if(o.length>3){let h=0;for(const f of o)h+=f.getEstimatedModuleSize();l=h/o.length,o.sort((f,m)=>{if(m.getCount()===f.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),w=Math.abs(f.getEstimatedModuleSize()-l);return y<w?1:y>w?-1:0}else return m.getCount()-f.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}In.CENTER_QUORUM=2,In.MIN_SKIP=3,In.MAX_MODULES=57;class mr{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Ue.NEED_RESULT_POINT_CALLBACK);const l=new In(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),h=i.getBottomLeft(),f=this.calculateModuleSize(o,l,h);if(f<1)throw new ce("No pattern found in proccess finder.");const m=mr.computeDimension(o,l,h,f),y=Xe.getProvisionalVersionForDimension(m),w=y.getDimensionForVersion()-7;let v=null;if(y.getAlignmentPatternCenters().length>0){const H=l.getX()-o.getX()+h.getX(),W=l.getY()-o.getY()+h.getY(),$=1-3/w,se=Math.floor(o.getX()+$*(H-o.getX())),fe=Math.floor(o.getY()+$*(W-o.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{v=this.findAlignmentInRegion(f,se,fe,Oe);break}catch(Me){if(!(Me instanceof ce))throw Me}}const I=mr.createTransform(o,l,h,v,m),M=mr.sampleGrid(this.image,I,m);let L;return v===null?L=[h,o,l]:L=[h,o,l,v],new va(M,L)}static createTransform(i,o,l,h,f){const m=f-3.5;let y,w,v,I;return h!==null?(y=h.getX(),w=h.getY(),v=m-3,I=v):(y=o.getX()-i.getX()+l.getX(),w=o.getY()-i.getY()+l.getY(),v=m,I=m),Wn.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,v,I,3.5,m,i.getX(),i.getY(),o.getX(),o.getY(),y,w,l.getX(),l.getY())}static sampleGrid(i,o,l){return Gn.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,h){const f=Ze.round(ze.distance(i,o)/h),m=Ze.round(ze.distance(i,l)/h);let y=Math.floor((f+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ce("Dimensions could be not found.")}return y}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,h){let f=this.sizeOfBlackWhiteBlackRun(i,o,l,h),m=1,y=i-(l-i);y<0?(m=i/(i-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let w=Math.floor(o-(h-o)*m);return m=1,w<0?(m=o/(o-w),w=0):w>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(w-o),w=this.image.getHeight()-1),y=Math.floor(i+(y-i)*m),f+=this.sizeOfBlackWhiteBlackRun(i,o,y,w),f-1}sizeOfBlackWhiteBlackRun(i,o,l,h){const f=Math.abs(h-o)>Math.abs(l-i);if(f){let H=i;i=o,o=H,H=l,l=h,h=H}const m=Math.abs(l-i),y=Math.abs(h-o);let w=-m/2;const v=i<l?1:-1,I=o<h?1:-1;let M=0;const L=l+v;for(let H=i,W=o;H!==L;H+=v){const $=f?W:H,se=f?H:W;if(M===1===this.image.get($,se)){if(M===2)return Ze.distance(H,W,i,o);M++}if(w+=y,w>0){if(W===h)break;W+=I,w-=m}}return M===2?Ze.distance(l+v,h,i,o):NaN}findAlignmentInRegion(i,o,l,h){const f=Math.floor(h*i),m=Math.max(0,o-f),y=Math.min(this.image.getWidth()-1,o+f);if(y-m<i*3)throw new ce("Alignment top exceeds estimated module size.");const w=Math.max(0,l-f),v=Math.min(this.image.getHeight()-1,l+f);if(v-w<i*3)throw new ce("Alignment bottom exceeds estimated module size.");return new gs(this.image,m,w,y-m,v-w,i,this.resultPointCallback).find()}}class Di{constructor(){this.decoder=new gr}getDecoder(){return this.decoder}decode(i,o){let l,h;if(o!=null&&o.get(Ue.PURE_BARCODE)!==void 0){const w=Di.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,o),h=Di.NO_POINTS}else{const w=new mr(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(w.getBits(),o),h=w.getPoints()}l.getOther()instanceof To&&l.getOther().applyMirroredCorrection(h);const f=new Fe(l.getText(),l.getRawBytes(),void 0,h,Ne.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(ot.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&f.putMetadata(ot.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(ot.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(ot.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new ce;const h=this.moduleSize(o,i);let f=o[1],m=l[1],y=o[0],w=l[0];if(y>=w||f>=m)throw new ce;if(m-f!==w-y&&(w=y+(m-f),w>=i.getWidth()))throw new ce;const v=Math.round((w-y+1)/h),I=Math.round((m-f+1)/h);if(v<=0||I<=0)throw new ce;if(I!==v)throw new ce;const M=Math.floor(h/2);f+=M,y+=M;const L=y+Math.floor((v-1)*h)-w;if(L>0){if(L>M)throw new ce;y-=L}const H=f+Math.floor((I-1)*h)-m;if(H>0){if(H>M)throw new ce;f-=H}const W=new it(v,I);for(let $=0;$<I;$++){const se=f+Math.floor($*h);for(let fe=0;fe<v;fe++)i.get(y+Math.floor(fe*h),se)&&W.set(fe,$)}return W}static moduleSize(i,o){const l=o.getHeight(),h=o.getWidth();let f=i[0],m=i[1],y=!0,w=0;for(;f<h&&m<l;){if(y!==o.get(f,m)){if(++w===5)break;y=!y}f++,m++}if(f===h||m===l)throw new ce;return(f-i[0])/7}}Di.NO_POINTS=new Array;class Ke{PDF417Common(){}static getBitCountSum(i){return Ze.sum(i)}static toIntArray(i){if(i==null||!i.length)return Ke.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const h of i)o[l++]=h;return o}static getCodeword(i){const o=ue.binarySearch(Ke.SYMBOL_TABLE,i&262143);return o<0?-1:(Ke.CODEWORD_TABLE[o]-1)%Ke.NUMBER_OF_CODEWORDS}}Ke.NUMBER_OF_CODEWORDS=929,Ke.MAX_CODEWORDS_IN_BARCODE=Ke.NUMBER_OF_CODEWORDS-1,Ke.MIN_ROWS_IN_BARCODE=3,Ke.MAX_ROWS_IN_BARCODE=90,Ke.MODULES_IN_CODEWORD=17,Ke.MODULES_IN_STOP_PATTERN=18,Ke.BARS_IN_MODULE=8,Ke.EMPTY_INT_ARRAY=new Int32Array([]),Ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wi{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class tt{static detectMultiple(i,o,l){let h=i.getBlackMatrix(),f=tt.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=tt.detect(l,h)),new wi(h,f)}static detect(i,o){const l=new Array;let h=0,f=0,m=!1;for(;h<o.getHeight();){const y=tt.findVertices(o,h,f);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,f=0;for(const w of l)w[1]!=null&&(h=Math.trunc(Math.max(h,w[1].getY()))),w[3]!=null&&(h=Math.max(h,Math.trunc(w[3].getY())));h+=tt.ROW_STEP;continue}if(m=!0,l.push(y),!i)break;y[2]!=null?(f=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return l}static findVertices(i,o,l){const h=i.getHeight(),f=i.getWidth(),m=new Array(8);return tt.copyToResult(m,tt.findRowsWithPattern(i,h,f,o,l,tt.START_PATTERN),tt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),tt.copyToResult(m,tt.findRowsWithPattern(i,h,f,o,l,tt.STOP_PATTERN),tt.INDEXES_STOP_PATTERN),m}static copyToResult(i,o,l){for(let h=0;h<l.length;h++)i[l[h]]=o[h]}static findRowsWithPattern(i,o,l,h,f,m){const y=new Array(4);let w=!1;const v=new Int32Array(m.length);for(;h<o;h+=tt.ROW_STEP){let M=tt.findGuardPattern(i,f,h,l,!1,m,v);if(M!=null){for(;h>0;){const L=tt.findGuardPattern(i,f,--h,l,!1,m,v);if(L!=null)M=L;else{h++;break}}y[0]=new ze(M[0],h),y[1]=new ze(M[1],h),w=!0;break}}let I=h+1;if(w){let M=0,L=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;I<o;I++){const H=tt.findGuardPattern(i,L[0],I,l,!1,m,v);if(H!=null&&Math.abs(L[0]-H[0])<tt.MAX_PATTERN_DRIFT&&Math.abs(L[1]-H[1])<tt.MAX_PATTERN_DRIFT)L=H,M=0;else{if(M>tt.SKIPPED_ROW_COUNT_MAX)break;M++}}I-=M+1,y[2]=new ze(L[0],I),y[3]=new ze(L[1],I)}return I-h<tt.BARCODE_MIN_HEIGHT&&ue.fill(y,null),y}static findGuardPattern(i,o,l,h,f,m,y){ue.fillWithin(y,0,y.length,0);let w=o,v=0;for(;i.get(w,l)&&w>0&&v++<tt.MAX_PIXEL_DRIFT;)w--;let I=w,M=0,L=m.length;for(let H=f;I<h;I++)if(i.get(I,l)!==H)y[M]++;else{if(M===L-1){if(tt.patternMatchVariance(y,m,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return new Int32Array([w,I]);w+=y[0]+y[1],J.arraycopy(y,2,y,0,M-1),y[M-1]=0,y[M]=0,M--}else M++;y[M]=1,H=!H}return M===L-1&&tt.patternMatchVariance(y,m,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE?new Int32Array([w,I-1]):null}static patternMatchVariance(i,o,l){let h=i.length,f=0,m=0;for(let v=0;v<h;v++)f+=i[v],m+=o[v];if(f<m)return 1/0;let y=f/m;l*=y;let w=0;for(let v=0;v<h;v++){let I=i[v],M=o[v]*y,L=I>M?I-M:M-I;if(L>l)return 1/0;w+=L}return w/f}}tt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tt.MAX_AVG_VARIANCE=.42,tt.MAX_INDIVIDUAL_VARIANCE=.8,tt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tt.MAX_PIXEL_DRIFT=3,tt.MAX_PATTERN_DRIFT=5,tt.SKIPPED_ROW_COUNT_MAX=25,tt.ROW_STEP=5,tt.BARCODE_MIN_HEIGHT=10;class fn{constructor(i,o){if(o.length===0)throw new R;this.field=i;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),J.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(i,o),this.coefficients[h]);return o}add(i){if(!this.field.equals(i.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),f=l.length-o.length;J.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(o[m-f],l[m]);return new fn(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new R("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof fn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new fn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=i.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let y=0;y<l;y++){let w=o[y];for(let v=0;v<f;v++)m[y+v]=this.field.add(m[y+v],this.field.multiply(w,h[v]))}return new fn(this.field,m)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new fn(this.field,o)}multiplyScalar(i){if(i===0)return new fn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],i);return new fn(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new R;if(o===0)return new fn(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+i);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],o);return new fn(this.field,h)}toString(){let i=new j;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class Ji{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new R;return this.logTable[i]}inverse(i){if(i===0)throw new Wr;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Qt extends Ji{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let h=0;h<i;h++)this.expTable[h]=l,l=l*o%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new fn(this,new Int32Array([0])),this.one=new fn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new R;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new fn(this,l)}}Qt.PDF417_GF=new Qt(Ke.NUMBER_OF_CODEWORDS,3);class Ws{constructor(){this.field=Qt.PDF417_GF}decode(i,o,l){let h=new fn(this.field,i),f=new Int32Array(o),m=!1;for(let W=o;W>0;W--){let $=h.evaluateAt(this.field.exp(W));f[o-W]=$,$!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const W of l){let $=this.field.exp(i.length-1-W),se=new fn(this.field,new Int32Array([this.field.subtract(0,$),1]));y=y.multiply(se)}let w=new fn(this.field,f),v=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),w,o),I=v[0],M=v[1],L=this.findErrorLocations(I),H=this.findErrorMagnitudes(M,I,L);for(let W=0;W<L.length;W++){let $=i.length-1-this.field.log(L[W]);if($<0)throw G.getChecksumInstance();i[$]=this.field.subtract(i[$],H[W])}return L.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let L=i;i=o,o=L}let h=i,f=o,m=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let L=h,H=m;if(h=f,m=y,h.isZero())throw G.getChecksumInstance();f=L;let W=this.field.getZero(),$=h.getCoefficient(h.getDegree()),se=this.field.inverse($);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let fe=f.getDegree()-h.getDegree(),Oe=this.field.multiply(f.getCoefficient(f.getDegree()),se);W=W.add(this.field.buildMonomial(fe,Oe)),f=f.subtract(h.multiplyByMonomial(fe,Oe))}y=W.multiply(m).subtract(H).negative()}let w=y.getCoefficient(0);if(w===0)throw G.getChecksumInstance();let v=this.field.inverse(w),I=y.multiply(v),M=f.multiply(v);return[I,M]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),h=0;for(let f=1;f<this.field.getSize()&&h<o;f++)i.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==o)throw G.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let h=o.getDegree(),f=new Int32Array(h);for(let v=1;v<=h;v++)f[h-v]=this.field.multiply(v,o.getCoefficient(v));let m=new fn(this.field,f),y=l.length,w=new Int32Array(y);for(let v=0;v<y;v++){let I=this.field.inverse(l[v]),M=this.field.subtract(0,i.evaluateAt(I)),L=this.field.inverse(m.evaluateAt(I));w[v]=this.field.multiply(M,L)}return w}}class Pr{constructor(i,o,l,h,f){i instanceof Pr?this.constructor_2(i):this.constructor_1(i,o,l,h,f)}constructor_1(i,o,l,h,f){const m=o==null||l==null,y=h==null||f==null;if(m&&y)throw new ce;m?(o=new ze(0,h.getY()),l=new ze(0,f.getY())):y&&(h=new ze(i.getWidth()-1,o.getY()),f=new ze(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Pr(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(i>0){let w=l?this.topLeft:this.topRight,v=Math.trunc(w.getY()-i);v<0&&(v=0);let I=new ze(w.getX(),v);l?h=I:m=I}if(o>0){let w=l?this.bottomLeft:this.bottomRight,v=Math.trunc(w.getY()+o);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let I=new ze(w.getX(),v);l?f=I:y=I}return new Pr(this.image,h,f,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Qs{constructor(i,o,l,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class pr{constructor(){this.buffer=""}static form(i,o){let l=-1;function h(m,y,w,v,I,M){if(m==="%%")return"%";if(o[++l]===void 0)return;m=v?parseInt(v.substr(1)):void 0;let L=I?parseInt(I.substr(1)):void 0,H;switch(M){case"s":H=o[l];break;case"c":H=o[l][0];break;case"f":H=parseFloat(o[l]).toFixed(m);break;case"p":H=parseFloat(o[l]).toPrecision(m);break;case"e":H=parseFloat(o[l]).toExponential(m);break;case"x":H=parseInt(o[l]).toString(L||16);break;case"d":H=parseFloat(parseInt(o[l],L||10).toPrecision(m)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(L);let W=parseInt(w),$=w&&w[0]+""=="0"?"0":" ";for(;H.length<W;)H=y!==void 0?H+$:$+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}format(i,...o){this.buffer+=pr.form(i,o)}toString(){return this.buffer}}class ts{constructor(i){this.boundingBox=new Pr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<ts.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(i)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(i)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new pr;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}ts.MAX_NEARBY_DISTANCE=5;class En{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>i?(i=f.getValue(),o=[],o.push(f.getKey())):f.getValue()===i&&o.push(f.getKey())}return Ke.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class ni extends ts{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=-1,v=1,I=0;for(let M=m;M<y;M++){if(o[M]==null)continue;let L=o[M],H=L.getRowNumber()-w;if(H===0)I++;else if(H===1)v=Math.max(v,I),I=1,w=L.getRowNumber();else if(H<0||L.getRowNumber()>=i.getRowCount()||H>M)o[M]=null;else{let W;v>2?W=(v-2)*H:W=H;let $=W>=M;for(let se=1;se<=W&&!$;se++)$=o[M-se]!=null;$?o[M]=null:(w=L.getRowNumber(),I=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),w=-1;for(let v=f;v<m;v++){if(y[v]==null)continue;let I=y[v];I.setRowNumberAsRowIndicatorColumn();let M=I.getRowNumber()-w;M===0||(M===1?w=I.getRowNumber():I.getRowNumber()>=i.getRowCount()?y[v]=null:w=I.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new En,l=new En,h=new En,f=new En;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let w=y.getValue()%30,v=y.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(w*3+1);break;case 1:f.setValue(w/3),h.setValue(w%3);break;case 2:o.setValue(w+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Ke.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Ke.MAX_ROWS_IN_BARCODE)return null;let m=new Qs(o.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let h=i[l];if(i[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==o.getErrorCorrectionLevel()||f%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class yr{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Ke.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(f=yr.adjustRowNumberIfValid(h,f,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(f=yr.adjustRowNumberIfValid(h,f,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let h=l[o],f=this.detectionResultColumns[i-1].getCodewords(),m=f;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=f[o],y[3]=m[o],o>0&&(y[0]=l[o-1],y[4]=f[o-1],y[5]=m[o-1]),o>1&&(y[8]=l[o-2],y[10]=f[o-2],y[11]=m[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=f[o+1],y[7]=m[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=f[o+2],y[13]=m[o+2]);for(let w of y)if(yr.adjustRowNumber(h,w))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new pr;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){o.format("    |   ");continue}o.format(" %3d|%3d",f.getRowNumber(),f.getValue())}o.format("%n")}return o.toString()}}class Er{constructor(i,o,l,h){this.rowNumber=Er.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Er.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Er.BARCODE_ROW_UNKNOWN=-1;class kn{static initialize(){for(let i=0;i<Ke.SYMBOL_TABLE.length;i++){let o=Ke.SYMBOL_TABLE[i],l=o&1;for(let h=0;h<Ke.BARS_IN_MODULE;h++){let f=0;for(;(o&1)===l;)f+=1,o>>=1;l=o&1,kn.RATIOS_TABLE[i]||(kn.RATIOS_TABLE[i]=new Array(Ke.BARS_IN_MODULE)),kn.RATIOS_TABLE[i][Ke.BARS_IN_MODULE-h-1]=Math.fround(f/Ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=kn.getDecodedCodewordValue(kn.sampleBitCounts(i));return o!==-1?o:kn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Ze.sum(i),l=new Int32Array(Ke.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<Ke.MODULES_IN_CODEWORD;m++){let y=o/(2*Ke.MODULES_IN_CODEWORD)+m*o/Ke.MODULES_IN_CODEWORD;f+i[h]<=y&&(f+=i[h],h++),l[h]++}return l}static getDecodedCodewordValue(i){let o=kn.getBitValue(i);return Ke.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let h=0;h<i[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Ze.sum(i),l=new Array(Ke.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/o);let h=vn.MAX_VALUE,f=-1;this.bSymbolTableReady||kn.initialize();for(let m=0;m<kn.RATIOS_TABLE.length;m++){let y=0,w=kn.RATIOS_TABLE[m];for(let v=0;v<Ke.BARS_IN_MODULE;v++){let I=Math.fround(w[v]-l[v]);if(y+=Math.fround(I*I),y>=h)break}y<h&&(h=y,f=Ke.SYMBOL_TABLE[m])}return f}}kn.bSymbolTableReady=!1,kn.RATIOS_TABLE=new Array(Ke.SYMBOL_TABLE.length).map(D=>new Array(Ke.BARS_IN_MODULE));class Zs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class ms{static parseLong(i,o=void 0){return parseInt(i,o)}}class _r extends A{}_r.kind="NullPointerException";class Js{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new _r;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new Y;if(l===0)return;for(let h=0;h<l;h++)this.write(i[o+h])}flush(){}close(){}}class $s extends A{}class uc extends Js{constructor(i=32){if(super(),this.count=0,i<0)throw new R("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new $s;l=ne.MAX_VALUE}this.buf=ue.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new Y;this.ensureCapacity(this.count+l),J.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ue.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Bt;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Bt||(Bt={}));function ps(){if(typeof window<"u")return window.BigInt||null;if(typeof kh<"u")return kh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ns;function Ar(D){if(typeof ns>"u"&&(ns=ps()),ns===null)throw new Error("BigInt is not supported!");return ns(D)}function Co(){let D=[];D[0]=Ar(1);let i=Ar(900);D[1]=i;for(let o=2;o<16;o++)D[o]=D[o-1]*i;return D}class de{static decode(i,o){let l=new j(""),h=B.ISO8859_1;l.enableDecoding(h);let f=1,m=i[f++],y=new Zs;for(;f<i[0];){switch(m){case de.TEXT_COMPACTION_MODE_LATCH:f=de.textCompaction(i,f,l);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:f=de.byteCompaction(m,i,h,f,l);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:f=de.numericCompaction(i,f,l);break;case de.ECI_CHARSET:B.getCharacterSetECIByValue(i[f++]);break;case de.ECI_GENERAL_PURPOSE:f+=2;break;case de.ECI_USER_DEFINED:f++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=de.decodeMacroBlock(i,f,y);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new F;default:f--,f=de.textCompaction(i,f,l);break}if(f<i.length)m=i[f++];else throw F.getFormatInstance()}if(l.length()===0)throw F.getFormatInstance();let w=new Ei(null,l.toString(),null,o);return w.setOther(y),w}static decodeMacroBlock(i,o,l){if(o+de.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw F.getFormatInstance();let h=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<de.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)h[y]=i[o];l.setSegmentIndex(ne.parseInt(de.decodeBase900toBase10(h,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new j;o=de.textCompaction(i,o,f),l.setFileId(f.toString());let m=-1;for(i[o]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<i[0];)switch(i[o]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new j;o=de.textCompaction(i,o+1,y),l.setFileName(y.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new j;o=de.textCompaction(i,o+1,w),l.setSender(w.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new j;o=de.textCompaction(i,o+1,v),l.setAddressee(v.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new j;o=de.numericCompaction(i,o+1,I),l.setSegmentCount(ne.parseInt(I.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new j;o=de.numericCompaction(i,o+1,M),l.setTimestamp(ms.parseLong(M.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new j;o=de.numericCompaction(i,o+1,L),l.setChecksum(ne.parseInt(L.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new j;o=de.numericCompaction(i,o+1,H),l.setFileSize(ms.parseLong(H.toString()));break;default:throw F.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(m!==-1){let y=o-m;l.isLastSegment()&&y--,l.setOptionalData(ue.copyOfRange(i,m,m+y))}return o}static textCompaction(i,o,l){let h=new Int32Array((i[0]-o)*2),f=new Int32Array((i[0]-o)*2),m=0,y=!1;for(;o<i[0]&&!y;){let w=i[o++];if(w<de.TEXT_COMPACTION_MODE_LATCH)h[m]=w/30,h[m+1]=w%30,m+=2;else switch(w){case de.TEXT_COMPACTION_MODE_LATCH:h[m++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=i[o++],f[m]=w,m++;break}}return de.decodeTextCompaction(h,f,m,l),o}static decodeTextCompaction(i,o,l,h){let f=Bt.ALPHA,m=Bt.ALPHA,y=0;for(;y<l;){let w=i[y],v="";switch(f){case Bt.ALPHA:if(w<26)v=String.fromCharCode(65+w);else switch(w){case 26:v=" ";break;case de.LL:f=Bt.LOWER;break;case de.ML:f=Bt.MIXED;break;case de.PS:m=f,f=Bt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=Bt.ALPHA;break}break;case Bt.LOWER:if(w<26)v=String.fromCharCode(97+w);else switch(w){case 26:v=" ";break;case de.AS:m=f,f=Bt.ALPHA_SHIFT;break;case de.ML:f=Bt.MIXED;break;case de.PS:m=f,f=Bt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=Bt.ALPHA;break}break;case Bt.MIXED:if(w<de.PL)v=de.MIXED_CHARS[w];else switch(w){case de.PL:f=Bt.PUNCT;break;case 26:v=" ";break;case de.LL:f=Bt.LOWER;break;case de.AL:f=Bt.ALPHA;break;case de.PS:m=f,f=Bt.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=Bt.ALPHA;break}break;case Bt.PUNCT:if(w<de.PAL)v=de.PUNCT_CHARS[w];else switch(w){case de.PAL:f=Bt.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=Bt.ALPHA;break}break;case Bt.ALPHA_SHIFT:if(f=m,w<26)v=String.fromCharCode(65+w);else switch(w){case 26:v=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:f=Bt.ALPHA;break}break;case Bt.PUNCT_SHIFT:if(f=m,w<de.PAL)v=de.PUNCT_CHARS[w];else switch(w){case de.PAL:f=Bt.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case de.TEXT_COMPACTION_MODE_LATCH:f=Bt.ALPHA;break}break}v!==""&&h.append(v),y++}}static byteCompaction(i,o,l,h,f){let m=new uc,y=0,w=0,v=!1;switch(i){case de.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),M=o[h++];for(;h<o[0]&&!v;)switch(I[y++]=M,w=900*w+M,M=o[h++],M){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:h--,v=!0;break;default:if(y%5===0&&y>0){for(let L=0;L<6;++L)m.write(Number(Ar(w)>>Ar(8*(5-L))));w=0,y=0}break}h===o[0]&&M<de.TEXT_COMPACTION_MODE_LATCH&&(I[y++]=M);for(let L=0;L<y;L++)m.write(I[L]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!v;){let L=o[h++];if(L<de.TEXT_COMPACTION_MODE_LATCH)y++,w=900*w+L;else switch(L){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:h--,v=!0;break}if(y%5===0&&y>0){for(let H=0;H<6;++H)m.write(Number(Ar(w)>>Ar(8*(5-H))));w=0,y=0}}break}return f.append(X.decode(m.toByteArray(),l)),h}static numericCompaction(i,o,l){let h=0,f=!1,m=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!f;){let y=i[o++];if(o===i[0]&&(f=!0),y<de.TEXT_COMPACTION_MODE_LATCH)m[h]=y,h++;else switch(y){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:o--,f=!0;break}(h%de.MAX_NUMERIC_CODEWORDS===0||y===de.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(de.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(i,o){let l=Ar(0);for(let f=0;f<o;f++)l+=de.EXP900[o-f-1]*Ar(i[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new F;return h.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=ps()?Co():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ft{constructor(){}static decode(i,o,l,h,f,m,y){let w=new Pr(i,o,l,h,f),v=null,I=null,M;for(let W=!0;;W=!1){if(o!=null&&(v=ft.getRowIndicatorColumn(i,w,o,!0,m,y)),h!=null&&(I=ft.getRowIndicatorColumn(i,w,h,!1,m,y)),M=ft.merge(v,I),M==null)throw ce.getNotFoundInstance();let $=M.getBoundingBox();if(W&&$!=null&&($.getMinY()<w.getMinY()||$.getMaxY()>w.getMaxY()))w=$;else break}M.setBoundingBox(w);let L=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,v),M.setDetectionResultColumn(L,I);let H=v!=null;for(let W=1;W<=L;W++){let $=H?W:L-W;if(M.getDetectionResultColumn($)!==void 0)continue;let se;$===0||$===L?se=new ni(w,$===0):se=new ts(w),M.setDetectionResultColumn($,se);let fe=-1,Oe=fe;for(let Me=w.getMinY();Me<=w.getMaxY();Me++){if(fe=ft.getStartColumn(M,$,Me,H),fe<0||fe>w.getMaxX()){if(Oe===-1)continue;fe=Oe}let Ie=ft.detectCodeword(i,w.getMinX(),w.getMaxX(),H,fe,Me,m,y);Ie!=null&&(se.setCodeword(Me,Ie),Oe=fe,m=Math.min(m,Ie.getWidth()),y=Math.max(y,Ie.getWidth()))}}return ft.createDecoderResult(M)}static merge(i,o){if(i==null&&o==null)return null;let l=ft.getBarcodeMetadata(i,o);if(l==null)return null;let h=Pr.merge(ft.adjustBoundingBox(i),ft.adjustBoundingBox(o));return new yr(l,h)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=ft.getMax(o),h=0;for(let y of o)if(h+=l-y,y>0)break;let f=i.getCodewords();for(let y=0;h>0&&f[y]==null;y++)h--;let m=0;for(let y=o.length-1;y>=0&&(m+=l-o[y],!(o[y]>0));y--);for(let y=f.length-1;m>0&&f[y]==null;y--)m--;return i.getBoundingBox().addMissingRows(h,m,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,h,f,m){let y=new ni(o,h);for(let w=0;w<2;w++){let v=w===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=o.getMaxY()&&M>=o.getMinY();M+=v){let L=ft.detectCodeword(i,0,i.getWidth(),h,I,M,f,m);L!=null&&(y.setCodeword(M,L),h?I=L.getStartX():I=L.getEndX())}}return y}static adjustCodewordCount(i,o){let l=o[0][1],h=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ft.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(f<1||f>Ke.MAX_CODEWORDS_IN_BARCODE)throw ce.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(i){let o=ft.createBarcodeMatrix(i);ft.adjustCodewordCount(i,o);let l=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],m=new Array;for(let w=0;w<i.getBarcodeRowCount();w++)for(let v=0;v<i.getBarcodeColumnCount();v++){let I=o[w][v+1].getValue(),M=w*i.getBarcodeColumnCount()+v;I.length===0?l.push(M):I.length===1?h[M]=I[0]:(m.push(M),f.push(I))}let y=new Array(f.length);for(let w=0;w<y.length;w++)y[w]=f[w];return ft.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,Ke.toIntArray(l),Ke.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(i,o,l,h,f){let m=new Int32Array(h.length),y=100;for(;y-- >0;){for(let w=0;w<m.length;w++)o[h[w]]=f[w][m[w]];try{return ft.decodeCodewords(o,i,l)}catch(w){if(!(w instanceof G))throw w}if(m.length===0)throw G.getChecksumInstance();for(let w=0;w<m.length;w++)if(m[w]<f[w].length-1){m[w]++;break}else if(m[w]=0,w===m.length-1)throw G.getChecksumInstance()}throw G.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let f=0;f<o[h].length;f++)o[h][f]=new En;let l=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(f.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,h){let f=h?1:-1,m=null;if(ft.isValidBarcodeColumn(i,o-f)&&(m=i.getDetectionResultColumn(o-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(ft.isValidBarcodeColumn(i,o-f)&&(m=i.getDetectionResultColumn(o-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let y=0;for(;ft.isValidBarcodeColumn(i,o-f);){o-=f;for(let w of i.getDetectionResultColumn(o).getCodewords())if(w!=null)return(h?w.getEndX():w.getStartX())+f*y*(w.getEndX()-w.getStartX());y++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,h,f,m,y,w){f=ft.adjustCodewordStartColumn(i,o,l,h,f,m);let v=ft.getModuleBitCount(i,o,l,h,f,m);if(v==null)return null;let I,M=Ze.sum(v);if(h)I=f+M;else{for(let W=0;W<v.length/2;W++){let $=v[W];v[W]=v[v.length-1-W],v[v.length-1-W]=$}I=f,f=I-M}if(!ft.checkCodewordSkew(M,y,w))return null;let L=kn.getDecodedValue(v),H=Ke.getCodeword(L);return H===-1?null:new Er(f,I,ft.getCodewordBucketNumber(L),H)}static getModuleBitCount(i,o,l,h,f,m){let y=f,w=new Int32Array(8),v=0,I=h?1:-1,M=h;for(;(h?y<l:y>=o)&&v<w.length;)i.get(y,m)===M?(w[v]++,y+=I):(v++,M=!M);return v===w.length||y===(h?l:o)&&v===w.length-1?w:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,h,f,m){let y=f,w=h?-1:1;for(let v=0;v<2;v++){for(;(h?y>=o:y<l)&&h===i.get(y,m);){if(Math.abs(f-y)>ft.CODEWORD_SKEW_SIZE)return f;y+=w}w=-w,h=!h}return y}static checkCodewordSkew(i,o,l){return o-ft.CODEWORD_SKEW_SIZE<=i&&i<=l+ft.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw F.getFormatInstance();let h=1<<o+1,f=ft.correctErrors(i,l,h);ft.verifyCodewordCount(i,h);let m=de.decode(i,""+o);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+ft.MAX_ERRORS||l<0||l>ft.MAX_EC_CODEWORDS)throw G.getChecksumInstance();return ft.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw F.getFormatInstance();let l=i[0];if(l>i.length)throw F.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw F.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((i&1)!==l&&(l=i&1,h--,h<0));)o[h]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ft.getCodewordBucketNumber(ft.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new pr;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let h=0;h<i[l].length;h++){let f=i[l][h];f.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}o.format("%n")}return o.toString()}}ft.CODEWORD_SKEW_SIZE=2,ft.MAX_ERRORS=3,ft.MAX_EC_CODEWORDS=512,ft.errorCorrection=new Ws;class wn{decode(i,o=null){let l=wn.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw ce.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return wn.decode(i,o,!0)}catch(l){throw l instanceof F||l instanceof G?ce.getNotFoundInstance():l}}static decode(i,o,l){const h=new Array,f=tt.detectMultiple(i,o,l);for(const m of f.getPoints()){const y=ft.decode(f.getBits(),m[4],m[5],m[6],m[7],wn.getMinCodewordWidth(m),wn.getMaxCodewordWidth(m)),w=new Fe(y.getText(),y.getRawBytes(),void 0,m,Ne.PDF_417);w.putMetadata(ot.ERROR_CORRECTION_LEVEL,y.getECLevel());const v=y.getOther();v!=null&&w.putMetadata(ot.PDF417_EXTRA_METADATA,v),h.push(w)}return h.map(m=>m)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?ne.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(wn.getMaxWidth(i[0],i[4]),wn.getMaxWidth(i[6],i[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.max(wn.getMaxWidth(i[1],i[5]),wn.getMaxWidth(i[7],i[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(wn.getMinWidth(i[0],i[4]),wn.getMinWidth(i[6],i[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.min(wn.getMinWidth(i[1],i[5]),wn.getMinWidth(i[7],i[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class ys extends A{}ys.kind="ReaderException";class vo{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!a(i)&&i.get(Ue.TRY_HARDER)===!0,l=a(i)?null:i.get(Ue.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const f=l.some(m=>m===Ne.UPC_A||m===Ne.UPC_E||m===Ne.EAN_13||m===Ne.EAN_8||m===Ne.CODABAR||m===Ne.CODE_39||m===Ne.CODE_93||m===Ne.CODE_128||m===Ne.ITF||m===Ne.RSS_14||m===Ne.RSS_EXPANDED);f&&!o&&h.push(new Zi(i,this.verbose)),l.includes(Ne.QR_CODE)&&h.push(new Di),l.includes(Ne.DATA_MATRIX)&&h.push(new ui),l.includes(Ne.AZTEC)&&h.push(new zs),l.includes(Ne.PDF_417)&&h.push(new wn),f&&o&&h.push(new Zi(i,this.verbose))}h.length===0&&(o||h.push(new Zi(i,this.verbose)),h.push(new Di),h.push(new ui),h.push(new zs),h.push(new wn),o&&h.push(new Zi(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ys("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof ys)continue}throw new ce("No MultiFormat Readers were able to detect the code.")}}class is extends Be{constructor(i=null,o=500){const l=new vo;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class hl extends Be{constructor(i=500){super(new wn,i)}}class fl extends Be{constructor(i=500){super(new Di,i)}}var Es;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Es||(Es={}));var xn=Es;class _s{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Hn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const h=this.field;for(let f=o.length;f<=i;f++){const m=l.multiply(new Hn(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[i]}encode(i,o){if(o===0)throw new R("No error correction bytes");const l=i.length-o;if(l<=0)throw new R("No data bytes provided");const h=this.buildGenerator(o),f=new Int32Array(l);J.arraycopy(i,0,f,0,l);let m=new Hn(this.field,f);m=m.multiplyByMonomial(o,1);const w=m.divide(h)[1].getCoefficients(),v=o-w.length;for(let I=0;I<v;I++)i[l+I]=0;J.arraycopy(w,0,i,l+v,w.length)}}class Ct{constructor(){}static applyMaskPenaltyRule1(i){return Ct.applyMaskPenaltyRule1Internal(i,!0)+Ct.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let m=0;m<f-1;m++){const y=l[m];for(let w=0;w<h-1;w++){const v=y[w];v===y[w+1]&&v===l[m+1][w]&&v===l[m+1][w+1]&&o++}}return Ct.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let m=0;m<f;m++)for(let y=0;y<h;y++){const w=l[m];y+6<h&&w[y]===1&&w[y+1]===0&&w[y+2]===1&&w[y+3]===1&&w[y+4]===1&&w[y+5]===0&&w[y+6]===1&&(Ct.isWhiteHorizontal(w,y-4,y)||Ct.isWhiteHorizontal(w,y+7,y+11))&&o++,m+6<f&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(Ct.isWhiteVertical(l,y,m-4,m)||Ct.isWhiteVertical(l,y,m+7,m+11))&&o++}return o*Ct.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let h=o;h<l;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,o,l,h){l=Math.max(l,0),h=Math.min(h,i.length);for(let f=l;f<h;f++)if(i[f][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let w=0;w<f;w++){const v=l[w];for(let I=0;I<h;I++)v[I]===1&&o++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Ct.N4}static getDataMaskBit(i,o,l){let h,f;switch(i){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:f=l*o,h=(f&1)+f%3;break;case 6:f=l*o,h=(f&1)+f%3&1;break;case 7:f=l*o,h=f%3+(l+o&1)&1;break;default:throw new R("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const h=o?i.getHeight():i.getWidth(),f=o?i.getWidth():i.getHeight(),m=i.getArray();for(let y=0;y<h;y++){let w=0,v=-1;for(let I=0;I<f;I++){const M=o?m[y][I]:m[I][y];M===v?w++:(w>=5&&(l+=Ct.N1+(w-5)),w=1,v=M)}w>=5&&(l+=Ct.N1+(w-5))}return l}}Ct.N1=3,Ct.N2=3,Ct.N3=40,Ct.N4=10;class As{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)ue.fill(o,i)}equals(i){if(!(i instanceof As))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=o.bytes[l];for(let y=0,w=this.width;y<w;++y)if(f[y]!==m[y])return!1}return!0}toString(){const i=new j;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Lr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new j;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Lr.NUM_MASK_PATTERNS}}Lr.NUM_MASK_PATTERNS=8;class Rt extends A{}Rt.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,h,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(o,h,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,h,f)}static embedBasicPatterns(i,o){p.embedPositionDetectionPatternsAndSeparators(o),p.embedDarkDotAtLeftBottomCorner(o),p.maybeEmbedPositionAdjustmentPatterns(i,o),p.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const h=new Se;p.makeTypeInfoBits(i,o,h);for(let f=0,m=h.getSize();f<m;++f){const y=h.get(h.getSize()-1-f),w=p.TYPE_INFO_COORDINATES[f],v=w[0],I=w[1];if(l.setBoolean(v,I,y),f<8){const M=l.getWidth()-f-1;l.setBoolean(M,8,y)}else{const L=l.getHeight()-7+(f-8);l.setBoolean(8,L,y)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new Se;p.makeVersionInfoBits(i,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const y=l.get(h);h--,o.setBoolean(f,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,f,y)}}static embedDataBits(i,o,l){let h=0,f=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let w=0;w<2;++w){const v=m-w;if(!p.isEmpty(l.get(v,y)))continue;let I;h<i.getSize()?(I=i.get(h),++h):I=!1,o!==255&&Ct.getDataMaskBit(o,v,y)&&(I=!I),l.setBoolean(v,y,I)}y+=f}f=-f,y+=f,m-=2}if(h!==i.getSize())throw new Rt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-ne.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new R("0 polynomial");const l=p.findMSBSet(o);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=o<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!Lr.isValidMaskPattern(o))throw new Rt("Invalid mask pattern");const h=i.getBits()<<3|o;l.appendBits(h,5);const f=p.calculateBCHCode(h,p.TYPE_INFO_POLY);l.appendBits(f,10);const m=new Se;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Rt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Rt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;p.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),p.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Rt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let h=0;h<8;++h){if(!p.isEmpty(l.get(i+h,o)))throw new Rt;l.setNumber(i+h,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let h=0;h<7;++h){if(!p.isEmpty(l.get(i,o+h)))throw new Rt;l.setNumber(i,o+h,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let h=0;h<5;++h){const f=p.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(i+m,o+h,f[m])}}static embedPositionDetectionPattern(i,o,l){for(let h=0;h<7;++h){const f=p.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(i+m,o+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(i){const o=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-o,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const h=7;p.embedVerticalSeparationPattern(h,0,i),p.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),p.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,h=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const y=h[f];if(y>=0)for(let w=0;w!==m;w++){const v=h[w];v>=0&&p.isEmpty(o.get(v,y))&&p.embedPositionAdjustmentPattern(v-2,y-2,o)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class N{constructor(){}static calculateMaskPenalty(i){return Ct.applyMaskPenaltyRule1(i)+Ct.applyMaskPenaltyRule2(i)+Ct.applyMaskPenaltyRule3(i)+Ct.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let h=N.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(xn.CHARACTER_SET)!==void 0;f&&(h=l.get(xn.CHARACTER_SET).toString());const m=this.chooseMode(i,h),y=new Se;if(m===Ye.BYTE&&(f||N.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=B.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,y)}this.appendModeInfo(m,y);const w=new Se;this.appendBytes(i,m,w,h);let v;if(l!==null&&l.get(xn.QR_VERSION)!==void 0){const Me=Number.parseInt(l.get(xn.QR_VERSION).toString(),10);v=Xe.getVersionForNumber(Me);const Ie=this.calculateBitsNeeded(m,y,w,v);if(!this.willFit(Ie,v,o))throw new Rt("Data too big for requested version")}else v=this.recommendVersion(o,m,y,w);const I=new Se;I.appendBitArray(y);const M=m===Ye.BYTE?w.getSizeInBytes():i.length;this.appendLengthInfo(M,v,m,I),I.appendBitArray(w);const L=v.getECBlocksForLevel(o),H=v.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(H,I);const W=this.interleaveWithECBytes(I,v.getTotalCodewords(),H,L.getNumBlocks()),$=new Lr;$.setECLevel(o),$.setMode(m),$.setVersion(v);const se=v.getDimensionForVersion(),fe=new As(se,se),Oe=this.chooseMaskPattern(W,o,v,fe);return $.setMaskPattern(Oe),p.buildMatrix(W,o,v,Oe,fe),$.setMatrix(fe),$}static recommendVersion(i,o,l,h){const f=this.calculateBitsNeeded(o,l,h,Xe.getVersionForNumber(1)),m=this.chooseVersion(f,i),y=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,o,l,h){return o.getSize()+i.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(i){return i<N.ALPHANUMERIC_TABLE.length?N.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(B.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Ye.KANJI;let l=!1,h=!1;for(let f=0,m=i.length;f<m;++f){const y=i.charAt(f);if(N.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return Ye.BYTE}return h?Ye.ALPHANUMERIC:l?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=X.encode(i,B.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=o[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,o,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<Lr.NUM_MASK_PATTERNS;y++){p.buildMatrix(i,o,l,y,h);let w=this.calculateMaskPenalty(h);w<f&&(f=w,m=y)}return m}static chooseVersion(i,o){for(let l=1;l<=40;l++){const h=Xe.getVersionForNumber(l);if(N.willFit(i,h,o))return h}throw new Rt("Data too big")}static willFit(i,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),y=h-m,w=(i+7)/8;return y>=w}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Rt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const f=i-o.getSizeInBytes();for(let m=0;m<f;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Rt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,h,f,m){if(h>=l)throw new Rt("Block ID too large");const y=i%l,w=l-y,v=Math.floor(i/l),I=v+1,M=Math.floor(o/l),L=M+1,H=v-M,W=I-L;if(H!==W)throw new Rt("EC bytes mismatch");if(l!==w+y)throw new Rt("RS blocks mismatch");if(i!==(M+H)*w+(L+W)*y)throw new Rt("Total bytes mismatch");h<w?(f[0]=M,m[0]=H):(f[0]=L,m[0]=W)}static interleaveWithECBytes(i,o,l,h){if(i.getSizeInBytes()!==l)throw new Rt("Number of bits and data bytes does not match");let f=0,m=0,y=0;const w=new Array;for(let I=0;I<h;++I){const M=new Int32Array(1),L=new Int32Array(1);N.getNumDataBytesAndNumECBytesForBlockID(o,l,h,I,M,L);const H=M[0],W=new Uint8Array(H);i.toBytes(8*f,W,0,H);const $=N.generateECBytes(W,L[0]);w.push(new S(W,$)),m=Math.max(m,H),y=Math.max(y,$.length),f+=M[0]}if(l!==f)throw new Rt("Data bytes does not match offset");const v=new Se;for(let I=0;I<m;++I)for(const M of w){const L=M.getDataBytes();I<L.length&&v.appendBits(L[I],8)}for(let I=0;I<y;++I)for(const M of w){const L=M.getErrorCorrectionBytes();I<L.length&&v.appendBits(L[I],8)}if(o!==v.getSizeInBytes())throw new Rt("Interleaving error: "+o+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(i,o){const l=i.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=i[m]&255;new _s(At.QR_CODE_FIELD_256).encode(h,o);const f=new Uint8Array(o);for(let m=0;m<o;m++)f[m]=h[l+m];return f}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,h){const f=l.getCharacterCountBits(o);if(i>=1<<f)throw new Rt(i+" is bigger than "+((1<<f)-1));h.appendBits(i,f)}static appendBytes(i,o,l,h){switch(o){case Ye.NUMERIC:N.appendNumericBytes(i,l);break;case Ye.ALPHANUMERIC:N.appendAlphanumericBytes(i,l);break;case Ye.BYTE:N.append8BitBytes(i,l,h);break;case Ye.KANJI:N.appendKanjiBytes(i,l);break;default:throw new Rt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=N.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let h=0;for(;h<l;){const f=N.getDigit(i.charAt(h));if(h+2<l){const m=N.getDigit(i.charAt(h+1)),y=N.getDigit(i.charAt(h+2));o.appendBits(f*100+m*10+y,10),h+=3}else if(h+1<l){const m=N.getDigit(i.charAt(h+1));o.appendBits(f*10+m,7),h+=2}else o.appendBits(f,4),h++}}static appendAlphanumericBytes(i,o){const l=i.length;let h=0;for(;h<l;){const f=N.getAlphanumericCode(i.charCodeAt(h));if(f===-1)throw new Rt;if(h+1<l){const m=N.getAlphanumericCode(i.charCodeAt(h+1));if(m===-1)throw new Rt;o.appendBits(f*45+m,11),h+=2}else o.appendBits(f,6),h++}}static append8BitBytes(i,o,l){let h;try{h=X.encode(i,l)}catch(f){throw new Rt(f)}for(let f=0,m=h.length;f!==m;f++){const y=h[f];o.appendBits(y,8)}}static appendKanjiBytes(i,o){let l;try{l=X.encode(i,B.SJIS)}catch(f){throw new Rt(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,y=l[f+1]&255,w=m<<8&4294967295|y;let v=-1;if(w>=33088&&w<=40956?v=w-33088:w>=57408&&w<=60351&&(v=w-49472),v===-1)throw new Rt("Invalid byte sequence");const I=(v>>8)*192+(v&255);o.appendBits(I,13)}}static appendECI(i,o){o.appendBits(Ye.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}N.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),N.DEFAULT_BYTE_MODE_ENCODING=B.UTF8.getName();class V{write(i,o,l,h=null){if(i.length===0)throw new R("Found empty contents");if(o<0||l<0)throw new R("Requested dimensions are too small: "+o+"x"+l);let f=Ht.L,m=V.QUIET_ZONE_SIZE;h!==null&&(h.get(xn.ERROR_CORRECTION)!==void 0&&(f=Ht.fromString(h.get(xn.ERROR_CORRECTION).toString())),h.get(xn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(xn.MARGIN).toString(),10)));const y=N.encode(i,f,h);return this.renderResult(y,o,l,m)}writeToDom(i,o,l,h,f=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(o,l,h,f);i&&i.appendChild(m)}renderResult(i,o,l,h){const f=i.getMatrix();if(f===null)throw new Qi;const m=f.getWidth(),y=f.getHeight(),w=m+h*2,v=y+h*2,I=Math.max(o,w),M=Math.max(l,v),L=Math.min(Math.floor(I/w),Math.floor(M/v)),H=Math.floor((I-m*L)/2),W=Math.floor((M-y*L)/2),$=this.createSVGElement(I,M);for(let se=0,fe=W;se<y;se++,fe+=L)for(let Oe=0,Me=H;Oe<m;Oe++,Me+=L)if(f.get(Oe,se)===1){const Ie=this.createSvgRectElement(Me,fe,L,L);$.appendChild(Ie)}return $}createSVGElement(i,o){const l=document.createElementNS(V.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,h){const f=document.createElementNS(V.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",o.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}V.QUIET_ZONE_SIZE=4,V.SVG_NS="http://www.w3.org/2000/svg";class re{encode(i,o,l,h,f){if(i.length===0)throw new R("Found empty contents");if(o!==Ne.QR_CODE)throw new R("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new R(`Requested dimensions are too small: ${l}x${h}`);let m=Ht.L,y=re.QUIET_ZONE_SIZE;f!==null&&(f.get(xn.ERROR_CORRECTION)!==void 0&&(m=Ht.fromString(f.get(xn.ERROR_CORRECTION).toString())),f.get(xn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(xn.MARGIN).toString(),10)));const w=N.encode(i,m,f);return re.renderResult(w,l,h,y)}static renderResult(i,o,l,h){const f=i.getMatrix();if(f===null)throw new Qi;const m=f.getWidth(),y=f.getHeight(),w=m+h*2,v=y+h*2,I=Math.max(o,w),M=Math.max(l,v),L=Math.min(Math.floor(I/w),Math.floor(M/v)),H=Math.floor((I-m*L)/2),W=Math.floor((M-y*L)/2),$=new it(I,M);for(let se=0,fe=W;se<y;se++,fe+=L)for(let Oe=0,Me=H;Oe<m;Oe++,Me+=L)f.get(Oe,se)===1&&$.setRegion(Me,fe,L,L);return $}}re.QUIET_ZONE_SIZE=4;class me{encode(i,o,l,h,f){let m;switch(o){case Ne.QR_CODE:m=new re;break;default:throw new R("No encoder available for format "+o)}return m.encode(i,o,l,h,f)}}class De extends qe{constructor(i,o,l,h,f,m,y,w){if(super(m,y),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=f,h+m>o||f+y>l)throw new R("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(m,y)}getRow(i,o){if(i<0||i>=this.getHeight())throw new R("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return J.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return J.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<o;m++){const y=m*i;J.arraycopy(this.yuvData,f,h,y,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,o,l,h){return new De(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,h,!1)}renderThumbnail(){const i=this.getWidth()/De.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/De.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*i;for(let w=0;w<i;w++){const v=h[f+w*De.THUMBNAIL_SCALE_FACTOR]&255;l[y+w]=4278190080|v*65793}f+=this.dataWidth*De.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/De.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/De.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<o;h++,f+=this.dataWidth){const m=f+i/2;for(let y=f,w=f+i-1;y<m;y++,w--){const v=l[y];l[y]=l[w],l[w]=v}}}invert(){return new ht(this)}}De.THUMBNAIL_SCALE_FACTOR=2;class st extends qe{constructor(i,o,l,h,f,m,y){if(super(o,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=y,i.BYTES_PER_ELEMENT===4){const w=o*l,v=new Uint8ClampedArray(w);for(let I=0;I<w;I++){const M=i[I],L=M>>16&255,H=M>>7&510,W=M&255;v[I]=(L+H+W)/4&255}this.luminances=v}else this.luminances=i;if(h===void 0&&(this.dataWidth=o),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new R("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return J.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return J.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<o;m++){const y=m*i;J.arraycopy(this.luminances,f,h,y,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,o,l,h){return new st(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new ht(this)}}class sn extends B{static forName(i){return this.getCharacterSetECIByName(i)}}class Vt{}Vt.ISO_8859_1=B.ISO8859_1;class Tn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Mi{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class kr{constructor(i){this.previous=i}getPrevious(){return this.previous}}class fi extends kr{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new fi(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fi(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+ne.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Yi extends fi{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new Yi(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wr(D,i,o){return new Yi(D,i,o)}function rs(D,i,o){return new fi(D,i,o)}const ud=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ws=0,bo=1,Ki=2,Ra=3,Pi=4,hd=new fi(null,0,0),Na=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Lu(D){for(let i of D)ue.fill(i,-1);return D[ws][Pi]=0,D[bo][Pi]=0,D[bo][ws]=28,D[Ra][Pi]=0,D[Ki][Pi]=0,D[Ki][ws]=15,D}const hc=Lu(ue.createInt32Array(6,6));class $i{constructor(i,o,l,h){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,h=this.token;if(i!==this.mode){let m=Na[this.mode][i];h=rs(h,m&65535,m>>16),l+=m>>16}let f=i===Ki?4:5;return h=rs(h,o,f),new $i(h,i,0,l+f)}shiftAndAppend(i,o){let l=this.token,h=this.mode===Ki?4:5;return l=rs(l,hc[this.mode][i],h),l=rs(l,o,5),new $i(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===Pi||this.mode===Ki){let y=Na[l][ws];o=rs(o,y&65535,y>>16),h+=y>>16,l=ws}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new $i(o,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=wr(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new $i(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(Na[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=$i.calculateBinaryShiftCost(i)-$i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new Se;for(const h of o)h.appendTo(l,i);return l}toString(){return K.format("%s bits=%d bytes=%d",ud[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}$i.INITIAL_STATE=new $i(hd,ws,0,0);function fc(D){const i=K.getCharCode(" "),o=K.getCharCode("."),l=K.getCharCode(",");D[ws][i]=1;const h=K.getCharCode("Z"),f=K.getCharCode("A");for(let L=f;L<=h;L++)D[ws][L]=L-f+2;D[bo][i]=1;const m=K.getCharCode("z"),y=K.getCharCode("a");for(let L=y;L<=m;L++)D[bo][L]=L-y+2;D[Ki][i]=1;const w=K.getCharCode("9"),v=K.getCharCode("0");for(let L=v;L<=w;L++)D[Ki][L]=L-v+2;D[Ki][l]=12,D[Ki][o]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<I.length;L++)D[Ra][K.getCharCode(I[L])]=L;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<M.length;L++)K.getCharCode(M[L])>0&&(D[Pi][K.getCharCode(M[L])]=L);return D}const dl=fc(ue.createInt32Array(5,256));class Oa{constructor(i){this.text=i}encode(){const i=K.getCharCode(" "),o=K.getCharCode(`
`);let l=Mi.singletonList($i.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case K.getCharCode("\r"):m=y===o?2:0;break;case K.getCharCode("."):m=y===i?3:0;break;case K.getCharCode(","):m=y===i?4:0;break;case K.getCharCode(":"):m=y===i?5:0;break;default:m=0}m>0?(l=Oa.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return Mi.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let h of i)this.updateStateForChar(h,o,l);return Oa.simplifyStates(l)}updateStateForChar(i,o,l){let h=this.text[o]&255,f=dl[i.getMode()][h]>0,m=null;for(let y=0;y<=Pi;y++){let w=dl[y][h];if(w>0){if(m==null&&(m=i.endBinaryShift(o)),!f||y===i.getMode()||y===Ki){const v=m.latchAndAppend(y,w);l.push(v)}if(!f&&hc[i.getMode()][y]>=0){const v=m.shiftAndAppend(y,w);l.push(v)}}}if(i.getBinaryShiftByteCount()>0||dl[i.getMode()][h]===0){let y=i.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(i,o,l){const h=[];for(let f of i)this.updateStateForPair(f,o,l,h);return this.simplifyStates(h)}static updateStateForPair(i,o,l,h){let f=i.endBinaryShift(o);if(h.push(f.latchAndAppend(Pi,l)),i.getMode()!==Pi&&h.push(f.shiftAndAppend(Pi,l)),l===3||l===4){let m=f.latchAndAppend(Ki,16-l).latchAndAppend(Ki,1);h.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(i){let o=[];for(const l of i){let h=!0;for(const f of o){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(o=o.filter(m=>m!==f))}h&&o.push(l)}return o}}class Nt{constructor(){}static encodeBytes(i){return Nt.encode(i,Nt.DEFAULT_EC_PERCENT,Nt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let h=new Oa(i).encode(),f=ne.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+f,y,w,v,I,M;if(l!==Nt.DEFAULT_AZTEC_LAYERS){if(y=l<0,w=Math.abs(l),w>(y?Nt.MAX_NB_BITS_COMPACT:Nt.MAX_NB_BITS))throw new R(K.format("Illegal value %s for layers",l));v=Nt.totalBitsInLayer(w,y),I=Nt.WORD_SIZE[w];let Ie=v-v%I;if(M=Nt.stuffBits(h,I),M.getSize()+f>Ie)throw new R("Data to large for user specified layer");if(y&&M.getSize()>I*64)throw new R("Data to large for user specified layer")}else{I=0,M=null;for(let Ie=0;;Ie++){if(Ie>Nt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(y=Ie<=3,w=y?Ie+1:Ie,v=Nt.totalBitsInLayer(w,y),m>v)continue;(M==null||I!==Nt.WORD_SIZE[w])&&(I=Nt.WORD_SIZE[w],M=Nt.stuffBits(h,I));let dt=v-v%I;if(!(y&&M.getSize()>I*64)&&M.getSize()+f<=dt)break}}let L=Nt.generateCheckWords(M,v,I),H=M.getSize()/I,W=Nt.generateModeMessage(y,w,H),$=(y?11:14)+w*4,se=new Int32Array($),fe;if(y){fe=$;for(let Ie=0;Ie<se.length;Ie++)se[Ie]=Ie}else{fe=$+1+2*ne.truncDivision(ne.truncDivision($,2)-1,15);let Ie=ne.truncDivision($,2),dt=ne.truncDivision(fe,2);for(let ct=0;ct<Ie;ct++){let xi=ct+ne.truncDivision(ct,15);se[Ie-ct-1]=dt-xi-1,se[Ie+ct]=dt+xi+1}}let Oe=new it(fe);for(let Ie=0,dt=0;Ie<w;Ie++){let ct=(w-Ie)*4+(y?9:12);for(let xi=0;xi<ct;xi++){let er=xi*2;for(let Li=0;Li<2;Li++)L.get(dt+er+Li)&&Oe.set(se[Ie*2+Li],se[Ie*2+xi]),L.get(dt+ct*2+er+Li)&&Oe.set(se[Ie*2+xi],se[$-1-Ie*2-Li]),L.get(dt+ct*4+er+Li)&&Oe.set(se[$-1-Ie*2-Li],se[$-1-Ie*2-xi]),L.get(dt+ct*6+er+Li)&&Oe.set(se[$-1-Ie*2-xi],se[Ie*2+Li])}dt+=ct*8}if(Nt.drawModeMessage(Oe,y,fe,W),y)Nt.drawBullsEye(Oe,ne.truncDivision(fe,2),5);else{Nt.drawBullsEye(Oe,ne.truncDivision(fe,2),7);for(let Ie=0,dt=0;Ie<ne.truncDivision($,2)-1;Ie+=15,dt+=16)for(let ct=ne.truncDivision(fe,2)&1;ct<fe;ct+=2)Oe.set(ne.truncDivision(fe,2)-dt,ct),Oe.set(ne.truncDivision(fe,2)+dt,ct),Oe.set(ct,ne.truncDivision(fe,2)-dt),Oe.set(ct,ne.truncDivision(fe,2)+dt)}let Me=new Tn;return Me.setCompact(y),Me.setSize(fe),Me.setLayers(w),Me.setCodeWords(H),Me.setMatrix(Oe),Me}static drawBullsEye(i,o,l){for(let h=0;h<l;h+=2)for(let f=o-h;f<=o+h;f++)i.set(f,o-h),i.set(f,o+h),i.set(o-h,f),i.set(o+h,f);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let h=new Se;return i?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Nt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Nt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,o,l,h){let f=ne.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let y=f-3+m;h.get(m)&&i.set(y,f-5),h.get(m+7)&&i.set(f+5,y),h.get(20-m)&&i.set(y,f+5),h.get(27-m)&&i.set(f-5,y)}else for(let m=0;m<10;m++){let y=f-5+m+ne.truncDivision(m,5);h.get(m)&&i.set(y,f-7),h.get(m+10)&&i.set(f+7,y),h.get(29-m)&&i.set(y,f+7),h.get(39-m)&&i.set(f-7,y)}}static generateCheckWords(i,o,l){let h=i.getSize()/l,f=new _s(Nt.getGF(l)),m=ne.truncDivision(o,l),y=Nt.bitsToWords(i,l,m);f.encode(y,m-h);let w=o%l,v=new Se;v.appendBits(0,w);for(const I of Array.from(y))v.appendBits(I,l);return v}static bitsToWords(i,o,l){let h=new Int32Array(l),f,m;for(f=0,m=i.getSize()/o;f<m;f++){let y=0;for(let w=0;w<o;w++)y|=i.get(f*o+w)?1<<o-w-1:0;h[f]=y}return h}static getGF(i){switch(i){case 4:return At.AZTEC_PARAM;case 6:return At.AZTEC_DATA_6;case 8:return At.AZTEC_DATA_8;case 10:return At.AZTEC_DATA_10;case 12:return At.AZTEC_DATA_12;default:throw new R("Unsupported word size "+i)}}static stuffBits(i,o){let l=new Se,h=i.getSize(),f=(1<<o)-2;for(let m=0;m<h;m+=o){let y=0;for(let w=0;w<o;w++)(m+w>=h||i.get(m+w))&&(y|=1<<o-1-w);(y&f)===f?(l.appendBits(y&f,o),m--):(y&f)===0?(l.appendBits(y|1,o),m--):l.appendBits(y,o)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Nt.DEFAULT_EC_PERCENT=33,Nt.DEFAULT_AZTEC_LAYERS=0,Nt.MAX_NB_BITS=32,Nt.MAX_NB_BITS_COMPACT=4,Nt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class gl{encode(i,o,l,h){return this.encodeWithHints(i,o,l,h,null)}encodeWithHints(i,o,l,h,f){let m=Vt.ISO_8859_1,y=Nt.DEFAULT_EC_PERCENT,w=Nt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(xn.CHARACTER_SET)&&(m=sn.forName(f.get(xn.CHARACTER_SET).toString())),f.has(xn.ERROR_CORRECTION)&&(y=ne.parseInt(f.get(xn.ERROR_CORRECTION).toString())),f.has(xn.AZTEC_LAYERS)&&(w=ne.parseInt(f.get(xn.AZTEC_LAYERS).toString()))),gl.encodeLayers(i,o,l,h,m,y,w)}static encodeLayers(i,o,l,h,f,m,y){if(o!==Ne.AZTEC)throw new R("Can only encode AZTEC, but got "+o);let w=Nt.encode(K.getBytes(i,f),m,y);return gl.renderResult(w,l,h)}static renderResult(i,o,l){let h=i.getMatrix();if(h==null)throw new Qi;let f=h.getWidth(),m=h.getHeight(),y=Math.max(o,f),w=Math.max(l,m),v=Math.min(y/f,w/m),I=(y-f*v)/2,M=(w-m*v)/2,L=new it(y,w);for(let H=0,W=M;H<m;H++,W+=v)for(let $=0,se=I;$<f;$++,se+=v)h.get($,H)&&L.setRegion(se,W,v,v);return L}}t.AbstractExpandedDecoder=fs,t.ArgumentException=b,t.ArithmeticException=Wr,t.AztecCode=Tn,t.AztecCodeReader=zs,t.AztecCodeWriter=gl,t.AztecDecoder=jt,t.AztecDetector=ll,t.AztecDetectorResult=ba,t.AztecEncoder=Nt,t.AztecHighLevelEncoder=Oa,t.AztecPoint=qt,t.BarcodeFormat=Ne,t.Binarizer=Q,t.BinaryBitmap=P,t.BitArray=Se,t.BitMatrix=it,t.BitSource=cn,t.BrowserAztecCodeReader=cl,t.BrowserBarcodeReader=Ia,t.BrowserCodeReader=Be,t.BrowserDatamatrixCodeReader=Xs,t.BrowserMultiFormatReader=is,t.BrowserPDF417Reader=hl,t.BrowserQRCodeReader=fl,t.BrowserQRCodeSvgWriter=V,t.CharacterSetECI=B,t.ChecksumException=G,t.Code128Reader=Pe,t.Code39Reader=Yt,t.DataMatrixDecodedBitStreamParser=Oi,t.DataMatrixReader=ui,t.DecodeHintType=Ue,t.DecoderResult=Ei,t.DefaultGridSampler=ti,t.DetectorResult=va,t.EAN13Reader=Jt,t.EncodeHintType=xn,t.Exception=A,t.FormatException=F,t.GenericGF=At,t.GenericGFPoly=Hn,t.GlobalHistogramBinarizer=pe,t.GridSampler=Zr,t.GridSamplerInstance=Gn,t.HTMLCanvasElementLuminanceSource=Z,t.HybridBinarizer=Ae,t.ITFReader=Et,t.IllegalArgumentException=R,t.IllegalStateException=Qi,t.InvertedLuminanceSource=ht,t.LuminanceSource=qe,t.MathUtils=Ze,t.MultiFormatOneDReader=Zi,t.MultiFormatReader=vo,t.MultiFormatWriter=me,t.NotFoundException=ce,t.OneDReader=Xt,t.PDF417DecodedBitStreamParser=de,t.PDF417DecoderErrorCorrection=Ws,t.PDF417Reader=wn,t.PDF417ResultMetadata=Zs,t.PerspectiveTransform=Wn,t.PlanarYUVLuminanceSource=De,t.QRCodeByteMatrix=As,t.QRCodeDataMask=yn,t.QRCodeDecodedBitStreamParser=rn,t.QRCodeDecoderErrorCorrectionLevel=Ht,t.QRCodeDecoderFormatInformation=Ln,t.QRCodeEncoder=N,t.QRCodeEncoderQRCode=Lr,t.QRCodeMaskUtil=Ct,t.QRCodeMatrixUtil=p,t.QRCodeMode=Ye,t.QRCodeReader=Di,t.QRCodeVersion=Xe,t.QRCodeWriter=re,t.RGBLuminanceSource=st,t.RSS14Reader=Pt,t.RSSExpandedReader=xe,t.ReaderException=ys,t.ReedSolomonDecoder=Qr,t.ReedSolomonEncoder=_s,t.ReedSolomonException=lr,t.Result=Fe,t.ResultMetadataType=ot,t.ResultPoint=ze,t.StringUtils=K,t.UnsupportedOperationException=ee,t.VideoInputDevice=be,t.WhiteRectangleDetector=cr,t.WriterException=Rt,t.ZXingArrays=ue,t.ZXingCharset=sn,t.ZXingInteger=ne,t.ZXingStandardCharsets=Vt,t.ZXingStringBuilder=j,t.ZXingStringEncoding=X,t.ZXingSystem=J,t.createAbstractExpandedDecoder=dr,Object.defineProperty(t,"__esModule",{value:!0})}))})(iu,iu.exports)),iu.exports}var _n=KN();const WN=r_(_n),QN=qT({__proto__:null,default:WN},[_n]);var ZE=(function(){function r(e,t,a){if(this.formatMap=new Map([[Ge.QR_CODE,_n.BarcodeFormat.QR_CODE],[Ge.AZTEC,_n.BarcodeFormat.AZTEC],[Ge.CODABAR,_n.BarcodeFormat.CODABAR],[Ge.CODE_39,_n.BarcodeFormat.CODE_39],[Ge.CODE_93,_n.BarcodeFormat.CODE_93],[Ge.CODE_128,_n.BarcodeFormat.CODE_128],[Ge.DATA_MATRIX,_n.BarcodeFormat.DATA_MATRIX],[Ge.MAXICODE,_n.BarcodeFormat.MAXICODE],[Ge.ITF,_n.BarcodeFormat.ITF],[Ge.EAN_13,_n.BarcodeFormat.EAN_13],[Ge.EAN_8,_n.BarcodeFormat.EAN_8],[Ge.PDF_417,_n.BarcodeFormat.PDF_417],[Ge.RSS_14,_n.BarcodeFormat.RSS_14],[Ge.RSS_EXPANDED,_n.BarcodeFormat.RSS_EXPANDED],[Ge.UPC_A,_n.BarcodeFormat.UPC_A],[Ge.UPC_E,_n.BarcodeFormat.UPC_E],[Ge.UPC_EAN_EXTENSION,_n.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!QN)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=a;var u=this.createZXingFormats(e),d=new Map;d.set(_n.DecodeHintType.POSSIBLE_FORMATS,u),d.set(_n.DecodeHintType.TRY_HARDER,!1),this.hints=d}return r.prototype.decodeAsync=function(e){var t=this;return new Promise(function(a,u){try{a(t.decode(e))}catch(d){u(d)}})},r.prototype.decode=function(e){var t=new _n.MultiFormatReader(this.verbose,this.hints),a=new _n.HTMLCanvasElementLuminanceSource(e),u=new _n.BinaryBitmap(new _n.HybridBinarizer(a)),d=t.decode(u);return{text:d.text,format:Sx.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,u){e.set(t,a)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var t=[],a=0,u=e;a<u.length;a++){var d=u[a];this.formatMap.has(d)?t.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return t},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),ZN=function(r,e,t,a){function u(d){return d instanceof t?d:new t(function(E){E(d)})}return new(t||(t=Promise))(function(d,E){function C(b){try{A(a.next(b))}catch(R){E(R)}}function x(b){try{A(a.throw(b))}catch(R){E(R)}}function A(b){b.done?d(b.value):u(b.value).then(C,x)}A((a=a.apply(r,e||[])).next())})},JN=function(r,e){var t={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,u,d,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(A){return function(b){return x([A,b])}}function x(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(d=A[0]&2?u.return:A[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,A[1])).done)return d;switch(u=0,d&&(A=[A[0]&2,d.value]),A[0]){case 0:case 1:d=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(d=t.trys,!(d=d.length>0&&d[d.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!d||A[1]>d[0]&&A[1]<d[3])){t.label=A[1];break}if(A[0]===6&&t.label<d[1]){t.label=d[1],d=A;break}if(d&&t.label<d[2]){t.label=d[2],t.ops.push(A);break}d[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(r,t)}catch(b){A=[6,b],u=0}finally{a=d=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},JE=(function(){function r(e,t,a){if(this.formatMap=new Map([[Ge.QR_CODE,"qr_code"],[Ge.AZTEC,"aztec"],[Ge.CODABAR,"codabar"],[Ge.CODE_39,"code_39"],[Ge.CODE_93,"code_93"],[Ge.CODE_128,"code_128"],[Ge.DATA_MATRIX,"data_matrix"],[Ge.ITF,"itf"],[Ge.EAN_13,"ean_13"],[Ge.EAN_8,"ean_8"],[Ge.PDF_417,"pdf417"],[Ge.UPC_A,"upc_a"],[Ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=a;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return ZN(this,void 0,void 0,function(){var t,a;return JN(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=u.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(t),[2,{text:a.rawValue,format:Sx.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var t=null,a=0,u=0,d=e;u<d.length;u++){var E=d[u],C=E.boundingBox.width*E.boundingBox.height;C>a&&(a=C,t=E)}if(!t)throw"No largest barcode found";return t},r.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],a=0,u=e;a<u.length;a++){var d=u[a];this.formatMap.has(d)?t.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,a,u){e.set(t,a)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),$E=function(r,e,t,a){function u(d){return d instanceof t?d:new t(function(E){E(d)})}return new(t||(t=Promise))(function(d,E){function C(b){try{A(a.next(b))}catch(R){E(R)}}function x(b){try{A(a.throw(b))}catch(R){E(R)}}function A(b){b.done?d(b.value):u(b.value).then(C,x)}A((a=a.apply(r,e||[])).next())})},e_=function(r,e){var t={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,u,d,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(A){return function(b){return x([A,b])}}function x(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(d=A[0]&2?u.return:A[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,A[1])).done)return d;switch(u=0,d&&(A=[A[0]&2,d.value]),A[0]){case 0:case 1:d=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(d=t.trys,!(d=d.length>0&&d[d.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!d||A[1]>d[0]&&A[1]<d[3])){t.label=A[1];break}if(A[0]===6&&t.label<d[1]){t.label=d[1],d=A;break}if(d&&t.label<d[2]){t.label=d[2],t.ops.push(A);break}d[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(r,t)}catch(b){A=[6,b],u=0}finally{a=d=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},$N=(function(){function r(e,t,a,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,t&&JE.isSupported()?(this.primaryDecoder=new JE(e,a,u),this.secondaryDecoder=new ZE(e,a,u)):this.primaryDecoder=new ZE(e,a,u)}return r.prototype.decodeAsync=function(e){return $E(this,void 0,void 0,function(){var t;return e_(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return $E(this,void 0,void 0,function(){var t,a;return e_(this,function(u){switch(u.label){case 0:t=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(a=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,a=this.executionResults;t<a.length;t++){var u=a[t];e+=u}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),$g=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(a[d]=u[d])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}})(),Mf=function(r,e,t,a){function u(d){return d instanceof t?d:new t(function(E){E(d)})}return new(t||(t=Promise))(function(d,E){function C(b){try{A(a.next(b))}catch(R){E(R)}}function x(b){try{A(a.throw(b))}catch(R){E(R)}}function A(b){b.done?d(b.value):u(b.value).then(C,x)}A((a=a.apply(r,e||[])).next())})},Pf=function(r,e){var t={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,u,d,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(A){return function(b){return x([A,b])}}function x(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(d=A[0]&2?u.return:A[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,A[1])).done)return d;switch(u=0,d&&(A=[A[0]&2,d.value]),A[0]){case 0:case 1:d=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(d=t.trys,!(d=d.length>0&&d[d.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!d||A[1]>d[0]&&A[1]<d[3])){t.label=A[1];break}if(A[0]===6&&t.label<d[1]){t.label=d[1],d=A;break}if(d&&t.label<d[2]){t.label=d[2],t.ops.push(A);break}d[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(r,t)}catch(b){A=[6,b],u=0}finally{a=d=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Rx=(function(){function r(e,t){this.name=e,this.track=t}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var t={};t[this.name]=e;var a={advanced:[t]};return this.track.applyConstraints(a)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},r})(),eO=(function(r){$g(e,r);function e(t,a){return r.call(this,t,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var a={};a[this.name]=t;var u={advanced:[a]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),a=t[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Rx),tO=(function(r){$g(e,r);function e(t){return r.call(this,"zoom",t)||this}return e})(eO),nO=(function(r){$g(e,r);function e(t){return r.call(this,"torch",t)||this}return e})(Rx),iO=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new tO(this.track)},r.prototype.torchFeature=function(){return new nO(this.track)},r})(),rO=(function(){function r(e,t,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var a=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,u),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,t,a,u){return Mf(this,void 0,void 0,function(){var d,E;return Pf(this,function(C){switch(C.label){case 0:return d=new r(e,t,u),a.aspectRatio?(E={aspectRatio:a.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:C.sent(),C.label=2;case 2:return d.setupSurface(),[2,d]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var t=this,a=function(){setTimeout(e,200),t.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return Mf(this,void 0,void 0,function(){return Pf(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,a){var u=e.mediaStream.getVideoTracks(),d=u.length,E=0;e.mediaStream.getVideoTracks().forEach(function(C){e.mediaStream.removeTrack(C),C.stop(),++E,E>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},r.prototype.getCapabilities=function(){return new iO(this.getFirstTrackOrFail())},r})(),sO=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,t,a){return Mf(this,void 0,void 0,function(){return Pf(this,function(u){return[2,rO.create(e,this.mediaStream,t,a)]})})},r.create=function(e){return Mf(this,void 0,void 0,function(){var t,a;return Pf(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=u.sent(),[2,new r(a)]}})})},r})(),t_=function(r,e,t,a){function u(d){return d instanceof t?d:new t(function(E){E(d)})}return new(t||(t=Promise))(function(d,E){function C(b){try{A(a.next(b))}catch(R){E(R)}}function x(b){try{A(a.throw(b))}catch(R){E(R)}}function A(b){b.done?d(b.value):u(b.value).then(C,x)}A((a=a.apply(r,e||[])).next())})},n_=function(r,e){var t={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,u,d,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(A){return function(b){return x([A,b])}}function x(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(d=A[0]&2?u.return:A[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,A[1])).done)return d;switch(u=0,d&&(A=[A[0]&2,d.value]),A[0]){case 0:case 1:d=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(d=t.trys,!(d=d.length>0&&d[d.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!d||A[1]>d[0]&&A[1]<d[3])){t.label=A[1];break}if(A[0]===6&&t.label<d[1]){t.label=d[1],d=A;break}if(d&&t.label<d[2]){t.label=d[2],t.ops.push(A);break}d[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(r,t)}catch(b){A=[6,b],u=0}finally{a=d=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},aO=(function(){function r(){}return r.failIfNotSupported=function(){return t_(this,void 0,void 0,function(){return n_(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return t_(this,void 0,void 0,function(){return n_(this,function(t){return[2,sO.create(e)]})})},r})(),oO=function(r,e,t,a){function u(d){return d instanceof t?d:new t(function(E){E(d)})}return new(t||(t=Promise))(function(d,E){function C(b){try{A(a.next(b))}catch(R){E(R)}}function x(b){try{A(a.throw(b))}catch(R){E(R)}}function A(b){b.done?d(b.value):u(b.value).then(C,x)}A((a=a.apply(r,e||[])).next())})},lO=function(r,e){var t={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,u,d,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(A){return function(b){return x([A,b])}}function x(A){if(a)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(t=0)),t;)try{if(a=1,u&&(d=A[0]&2?u.return:A[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,A[1])).done)return d;switch(u=0,d&&(A=[A[0]&2,d.value]),A[0]){case 0:case 1:d=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,u=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(d=t.trys,!(d=d.length>0&&d[d.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!d||A[1]>d[0]&&A[1]<d[3])){t.label=A[1];break}if(A[0]===6&&t.label<d[1]){t.label=d[1],d=A;break}if(d&&t.label<d[2]){t.label=d[2],t.ops.push(A);break}d[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(r,t)}catch(b){A=[6,b],u=0}finally{a=d=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},cO=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=Xl.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=Xl.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return oO(this,void 0,void 0,function(){var e,t,a,u,d,E,C;return lO(this,function(x){switch(x.label){case 0:return e=function(A){for(var b=A.getVideoTracks(),R=0,P=b;R<P.length;R++){var G=P[R];G.enabled=!1,G.stop(),A.removeTrack(G)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=x.sent(),u=[],d=0,E=a;d<E.length;d++)C=E[d],C.kind==="videoinput"&&u.push({id:C.deviceId,label:C.label});return e(t),[2,u]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var a=function(d){for(var E=[],C=0,x=d;C<x.length;C++){var A=x[C];A.kind==="video"&&E.push({id:A.id,label:A.label})}e(E)},u=MediaStreamTrack;u.getSources(a)})},r})(),Fn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(Fn||(Fn={}));var uO=(function(){function r(){this.state=Fn.NOT_STARTED,this.onGoingTransactionNewState=Fn.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===Fn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Fn.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===Fn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Fn.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Fn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case Fn.UNKNOWN:throw"Transition from unknown is not allowed";case Fn.NOT_STARTED:this.failIfNewStateIs(e,[Fn.PAUSED]);break;case Fn.SCANNING:break;case Fn.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,t){for(var a=0,u=t;a<u.length;a++){var d=u[a];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),hO=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===Fn.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==Fn.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Fn.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===Fn.PAUSED},r})(),fO=(function(){function r(){}return r.create=function(){return new hO(new uO)},r})(),dO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(a[d]=u[d])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function a(){this.constructor=e}e.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}})(),Rr=(function(r){dO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(jN),gO=(function(){function r(e,t){this.logger=t,this.fps=Rr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Rr.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ix.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!ga(this.qrbox)},r.create=function(e,t){return new r(e,t)},r})(),mO=(function(){function r(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof t=="boolean"?this.verbose=t===!0:t&&(a=t,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new XN(this.verbose),this.qrcode=new $N(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=fO.create()}return r.prototype.start=function(e,t,a,u){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;u?E=u:E=this.verbose?this.logger.log:function(){};var C=gO.create(t,this.logger);this.clearElement();var x=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=x,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Rr.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var R=this,P=this.stateManagerProxy.startTransition(Fn.SCANNING);return new Promise(function(G,Q){var J=A?C.videoConstraints:R.createVideoConstraints(e);if(!J){P.cancel(),Q("videoConstraints should be defined");return}var Y={};(!A||C.aspectRatio)&&(Y.aspectRatio=C.aspectRatio);var Ee={onRenderSurfaceReady:function(ue,ne){R.setupUi(ue,ne,C),R.isScanning=!0,R.foreverScan(C,a,E)}};aO.failIfNotSupported().then(function(ue){ue.create(J).then(function(ne){return ne.render(d.element,Y,Ee).then(function(Se){R.renderedCamera=Se,P.execute(),G(null)}).catch(function(Se){P.cancel(),Q(Se)})}).catch(function(ne){P.cancel(),Q(Xl.errorGettingUserMedia(ne))})}).catch(function(ue){P.cancel(),Q(Xl.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Fn.PAUSED),this.showPausedState(),(ga(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Fn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Fn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var d=document.getElementById(Rr.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),a(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),t.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(a){return a.decodedText})},r.prototype.scanFileV2=function(e,t){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ga(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var E=new Image;E.onload=function(){var C=E.width,x=E.height,A=document.getElementById(a.elementId),b=A.clientWidth?A.clientWidth:Rr.DEFAULT_WIDTH,R=Math.max(A.clientHeight?A.clientHeight:x,Rr.FILE_SCAN_MIN_HEIGHT),P=a.computeCanvasDrawConfig(C,x,b,R);if(t){var G=a.createCanvasElement(b,R,"qr-canvas-visible");G.style.display="inline-block",A.appendChild(G);var Q=G.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=b,Q.canvas.height=R,Q.drawImage(E,0,0,C,x,P.x,P.y,P.width,P.height)}var J=Rr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(E.width,P.width),Ee=Math.max(E.height,P.height),ue=Y+2*J,ne=Ee+2*J,Se=a.createCanvasElement(ue,ne);A.appendChild(Se);var ke=Se.getContext("2d");if(!ke)throw"Unable to get 2d context from canvas";ke.canvas.width=ue,ke.canvas.height=ne,ke.drawImage(E,0,0,C,x,J,J,Y,Ee);try{a.qrcode.decodeRobustlyAsync(Se).then(function(Ue){u(WE.createFromQrcodeResult(Ue))}).catch(d)}catch(Ue){d("QR code parse error, error = ".concat(Ue))}},E.onerror=d,E.onabort=d,E.onstalled=d,E.onsuspend=d,E.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return cO.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!Ix.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var t=[Ge.QR_CODE,Ge.AZTEC,Ge.CODABAR,Ge.CODE_39,Ge.CODE_93,Ge.CODE_128,Ge.DATA_MATRIX,Ge.MAXICODE,Ge.ITF,Ge.EAN_13,Ge.EAN_8,Ge.PDF_417,Ge.RSS_14,Ge.RSS_EXPANDED,Ge.UPC_A,Ge.UPC_E,Ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],u=0,d=e.formatsToSupport;u<d.length;u++){var E=d[u];GN(E)?a.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ga(e))return!0;if(!ga(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ga(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return ga(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,t,a){var u=this,d=a.qrbox;this.validateQrboxConfig(d);var E=this.toQrdimensions(e,t,d),C=function(A){if(A<Rr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Rr.MIN_QR_BOX_SIZE,"px.")},x=function(A){return A>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};C(E.width),C(E.height),E.width=x(E.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,t,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,t)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return a},r.prototype.setupUi=function(e,t,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,a);var u=ga(a.qrbox)?{width:e,height:t}:a.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,t,u);d.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=a.isShadedBoxEnabled()&&d.height<=t,C={x:0,y:0,width:e,height:t},x=E?this.getShadedRegionBounds(e,t,d):C,A=this.createCanvasElement(x.width,x.height),b={willReadFrequently:!0},R=A.getContext("2d",b);R.canvas.width=x.width,R.canvas.height=x.height,this.element.append(A),E&&this.possiblyInsertShadingElement(this.element,e,t,d),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=R,this.canvasElement=A},r.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Xl.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},r.prototype.scanContext=function(e,t){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,WE.createFromQrcodeResult(u)),a.possiblyUpdateShaders(!0),!0}).catch(function(u){a.possiblyUpdateShaders(!1);var d=Xl.codeParseError(u);return t(d,qN.createFrom(d)),!1})},r.prototype.foreverScan=function(e,t,a){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),E=d.videoWidth/d.clientWidth,C=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*E,A=this.qrRegion.height*C,b=this.qrRegion.x*E,R=this.qrRegion.y*C;this.context.drawImage(d,b,R,x,A,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,t,a)},u.getTimeoutFps(e.fps))};this.scanContext(t,a).then(function(G){!G&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(t,a).finally(function(){P()})):P()}).catch(function(G){u.logger.logError("Error happend while scanning context",G),P()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",a="deviceId",u={user:!0,environment:!0},d="exact",E=function(Q){if(Q in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Q,"'")},C=Object.keys(e);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var x=Object.keys(e)[0];if(x!==t&&x!==a)throw"Only '".concat(t,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(x===t){var A=e.facingMode;if(typeof A=="string"){if(E(A))return{facingMode:A}}else if(typeof A=="object")if(d in A){if(E(A["".concat(d)]))return{facingMode:{exact:A["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var b=typeof A;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(d in R)return{deviceId:{exact:R["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var P=typeof R;throw"Invalid type of 'deviceId' = ".concat(P)}}}var G=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(G)},r.prototype.computeCanvasDrawConfig=function(e,t,a,u){if(e<=a&&t<=u){var d=(a-e)/2,E=(u-t)/2;return{x:d,y:E,width:e,height:t}}else{var C=e,x=t;return e>a&&(t=a/e*t,e=a),t>u&&(e=u/t*e,t=u),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(x)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,a,u)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Rr.BORDER_SHADER_MATCH_COLOR:Rr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,t,a){var u=e,d=t,E=document.createElement("canvas");return E.style.width="".concat(u,"px"),E.style.height="".concat(d,"px"),E.style.display="none",E.id=ga(a)?"qr-canvas":a,E},r.prototype.getShadedRegionBounds=function(e,t,a){if(a.width>e||a.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(t-a.height)/2,width:a.width,height:a.height}},r.prototype.possiblyInsertShadingElement=function(e,t,a,u){if(!(t-u.width<1||a-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var E=(t-u.width)/2,C=(a-u.height)/2;if(d.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Rr.SHADED_REGION_ELEMENT_ID),t-u.width<11||a-u.height<11)this.hasBorderShaders=!1;else{var x=5,A=40;this.insertShaderBorders(d,A,x,-x,null,0,!0),this.insertShaderBorders(d,A,x,-x,null,0,!1),this.insertShaderBorders(d,A,x,null,-x,0,!0),this.insertShaderBorders(d,A,x,null,-x,0,!1),this.insertShaderBorders(d,x,A+x,-x,null,-x,!0),this.insertShaderBorders(d,x,A+x,null,-x,-x,!0),this.insertShaderBorders(d,x,A+x,-x,null,-x,!1),this.insertShaderBorders(d,x,A+x,null,-x,-x,!1),this.hasBorderShaders=!0}e.append(d)}},r.prototype.insertShaderBorders=function(e,t,a,u,d,E,C){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=Rr.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(t,"px"),x.style.height="".concat(a,"px"),u!==null&&(x.style.top="".concat(u,"px")),d!==null&&(x.style.bottom="".concat(d,"px")),C?x.style.left="".concat(E,"px"):x.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),e.appendChild(x)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),i_;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(i_||(i_={}));function pO({onScan:r}){const e=ye.useRef(null),t=ye.useRef(!1),[a,u]=ye.useState(!1);return ye.useEffect(()=>{const d="reader",E=async()=>{const x=new mO(d);e.current=x;try{await x.start({facingMode:"environment"},{fps:10,qrbox:250},async A=>{try{const b=JSON.parse(A);console.log("掃描結果:",b),r(b),await C(),u(!1)}catch(b){console.error("QR Code 不是 JSON 格式",b)}},A=>{})}catch(A){console.error("啟動 QRScanner 失敗",A),u(!1)}},C=async()=>{if(t.current)return;t.current=!0;const x=e.current;if(!x){t.current=!1;return}try{await x.getState()==="SCANNING"&&await x.stop(),await x.clear()}catch(A){console.warn("停止/清理掃描器失敗",A)}finally{e.current=null,t.current=!1}};return a?E():C(),()=>{C()}},[a,r]),Te.jsxs("div",{className:"flex flex-col items-center",children:[Te.jsx("button",{onClick:()=>u(d=>!d),className:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition",children:a?"關閉掃描":"開啟相機掃描"}),Te.jsx("div",{id:"reader",className:`mt-2 w-64 h-64 bg-gray-100 rounded-lg ${a?"":"hidden"}`})]})}const yO=new ma,qh={zh:{loginBtn:"使用 Google 登入",logoutBtn:"登出",scores:"🏆 積分",name:"名字",title:"職稱",years:"年資",factory:"工廠",phone:"電話",birthday:"生日"},en:{loginBtn:"Sign in with Google",logoutBtn:"Logout",scores:"🏆 Scores",name:"Name",title:"Title",years:"Years",factory:"Factory",phone:"Phone",birthday:"Birthday"}};function EO({lang:r="zh"}){const[e,t]=ye.useState(null),[a,u]=ye.useState(null),[d,E]=ye.useState(null),[C,x]=ye.useState(!1),[A,b]=ye.useState(null);ye.useEffect(()=>{const J=vA(sf,async Y=>{if(Y){t(Y);const Ee=qo(Yo,"profiles",Y.uid),ue=await If(Ee);ue.exists()&&u(ue.data())}else t(null),u(null)});return()=>J()},[]);const R=async()=>{try{const Y=(await zI(sf,yO)).user;t(Y);const Ee=qo(Yo,"profiles",Y.uid),ue=await If(Ee);if(ue.exists())u(ue.data());else{const ne={name:Y.displayName||"",title:"",years:0,factory:"",phone:"",birthday:"",email:Y.email||"",photoURL:Y.photoURL||"",createdAt:$6(),scores:0};await Z6(Ee,ne),u(ne)}}catch(J){console.error("登入失敗",J)}},P=async()=>{try{await wI(sf),t(null),u(null)}catch(J){console.error("登出失敗",J)}},G=async(J,Y)=>{if(!e)return;const Ee=qo(Yo,"profiles",e.uid);let ue=Y;(J==="years"||J==="phone")&&(ue=Y.replace(/\D/g,"")),await Jg(Ee,{[J]:ue}),u(ne=>({...ne,[J]:ue})),E(null)},Q=(J,Y,Ee="text")=>{const ue=qh[r][Y]||Y;return d===J?Te.jsx("input",{type:Ee,value:a?.[J]||"",onChange:ne=>u(Se=>({...Se,[J]:ne.target.value})),onBlur:ne=>G(J,ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&G(J,ne.target.value),autoFocus:!0,className:"field-input"}):Te.jsx("p",{className:"field-text",onClick:()=>E(J),children:a?.[J]||ue})};return Te.jsx("div",{className:"page-container",children:e?Te.jsxs("div",{className:"card-container",children:[Te.jsxs("div",{className:"profile-header",children:[Te.jsx("img",{src:a?.photoURL||e.photoURL,alt:"avatar",className:"avatar"}),Te.jsxs("div",{className:"profile-info",children:[Te.jsx("h2",{children:Q("name","name")}),Te.jsx("p",{className:"email",children:a?.email||e.email}),Q("title","title"),Q("years","years"),Q("factory","factory"),Q("phone","phone"),Q("birthday","birthday"),Te.jsxs("p",{children:[qh[r].scores,": ",a?.scores||0]})]})]}),Te.jsxs("div",{className:"card-buttons",children:[Te.jsx("button",{onClick:()=>x(J=>!J),children:C?"隱藏 QR Code":"產生 QR Code"}),C&&Te.jsx(HN,{profile:a}),Te.jsx(pO,{onScan:b}),A&&Te.jsx("pre",{className:"scan-result",children:JSON.stringify(A,null,2)}),Te.jsx("button",{onClick:P,children:qh[r].logoutBtn})]})]}):Te.jsx("button",{className:"login-btn",onClick:R,children:qh[r].loginBtn})})}const _O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAClCAYAAADvezeCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAACdhJREFUeF7t3XtwVFcBx/HvPpJAAuRBIAGa8ihICRSE2oLWqdJ2yihWq0il4uCgte2Io+PgqH+go305Y8vUsepotTroKDNW6Wgr09IK2GkZi7VTwIQaqS3hkRATkkAePJJd/zi7hZwl2YTs3nv37O/T+c225yzTzb2/DefuvbsbQbwyF9gOtAJvWHMiOe2jwCkgnsiDQHjAPURyUBj4DqbU5xO3ybwAlL1zT5EcUwo8zaXLncwRoDb5B0RyRS3wb0yJY4nbwXIG+KT5YyLB9wmgi/TFtvN9IIJIQEWABzBl7UvcjjS7gHJEAqYc8xLgaMqdzDHgGkQCYgFwiNSijiZngU8h4rPVQDcjX28PN5vRulx8EAG+hynhaJck6fIiMBERj1QAz2HK15+4zXaOA4sQybKFwFukFtCLnAM+jUiWrAF6yN56e7j5ARBFJEOiwMOYcnm1JEmXl4FKREapEnNRVBz/f3PbaQaWIHKZFgOHSS1WkHIeWIfICK3FXAQVtN/ag+VHQAEiaUSBRzGlCcp6e7j5OzAZkUFMwlzsZBcnl/I/4D2IWK7FvPnALkwu5jywHpGEdZiLm3JlvT3c/BSty/NaAfBDTBlcK3cye4EqJO9UYS5isgvhYlqBpUjeuA7zpgK7CC6nD7gLcd7ncHO9Pdz8AihEnFMI/ASzk/O13Mn8E5iCOKMac3GSvaPzOW3A+5CctwxzUZK9gxWzLr8XyVlfwJz0yPclSbr8CihCckYR8DNSd6QyeF4HpiGBNxV4hdQdqKRPO/B+JLBuAFpI3XHK8NMPbABCSGCEMAdLWm9nLr8BxiC+GwM8QeoOUkaf/UAN4psrgFdJ3TFK5tIBfADx3I2YkxX2DlEynxjwFbQu90QI+BLmJIXW295mKzAWyZqxwBZSN7ziXeqA6UjGXYk5GWFvcMX7dALLkYz5IOYkhL2hFf8SAzaidfmohDAHN7n28Q35lCeBYmTEioHfkrpBleDlIDATGbYZmIMZe0MqwU0XcAuS1s2YjWVvQCX4iQFfR+vySwoBX0OvbbuQp4AS5B0lmIMVe0MpuZtDwFUIszAHKfYGUnI/XcAKfObnV9Tdivmwy6n2hDihEPgM5jLml6w5p4WAb6L1dj7lT8A48sA4zEGIvQEU93MImIPDZgMNpP7gSv6kG/gwHvJqDf4hYCfmQ3gkfxVgvh4mhlmXxwdO554QsInUZ7KiPAOMJ4eNx/wQ9g+mKMn8F5hLDpqDefD2D6QodnqA28iSbKzBP4JZb0+yJ0QuoQC4Ewhz4UsJAikM3EfqM1RRhptngVICaALwHKkPWFFGmsPAPALkaqCR1AeqKJebXuB2MmC0a/DbgReACntCZBSiwBrM9Sy7MaX3VBh4iNRnnqJkOs8DZVymy3n3RRmwDX10gHjnCOZseJ09kU7YHkijFvM/UbnFSzWYL89aZU+kM5I1+CpG+deFyChEgTswn7iwC7N8yYgI8AipayNF8Ss7gXKGId0avBz4M/pqCwmeY5h1+QF74mJDrcEXYN4vqXJLEE3DfD78HfbExQZbg6/BnDadYE+IBEgEWI3p6U7MdeZDigCPkbrmUZSg50VgIpaL1+AVwHZg6UVjIrmkCfOWuNeTA8mCLwT2JQdFctxa4HdgliRrgKcx1+WKuGAViXV5CG9P3CzGHAxIftpA4jerR7qimK+K88ppe0DySg/e9m3I18FFcp4KLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHFa1B6QIYSgatYErlw4kZKKMUSiIfseGRfrj9PdcY6jdSdpeqODeDxu30WGoIIP06QZ47n5nvlUv6vUnvJMW2MXOx+v59jBdntKBqGCD8Os6yazcuMiCgoLWD5nFQun3UB58WSi4QL7rhnXH+un80wr9U172RHeyur7r2fHj/9F/a5j9l3lElTwNCqnj2flxkVUldXw+fd+m+oJ0+27ZN24olKmlV7FkprlbHnlQW7dAKdaejlad9K+q1h0kJnG8rvmES2Isn7ZJl/KfbGJJdWsX/YtCiJF3HR3LaFw9o8Bcp0KPoSKK0qYVlvOjbM/xtTSmfa0L8qLJ7Oidq15bPPK7WmxqOBDqFkwEYD5U5ZaM/6aX70MgJprKqwZsangQygpLwSgbOwka8ZfZWMrASgpL7JmxKaCDyEcMZsnEg7WsXg08XjCUe2+dLSFxGkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4zeuCxxK3+vyx/JTc/57xuuDdiVvPf1AJhC57INu8LnhH4rZvwKjki057INu8LngL5lmsguenN+2BbPO64HGgHojYE+K8c8ARezDbvC44wLPAGHtQnPc80G8PZpsfBX/KHpC88KQ94AU/Cr4POAz02hPirBjwjD3oBT8KHsc8m8faE+KkOPA3oM2e8IIfBQd4BPOa+Dl7QpwTAjbZg17xq+AngIcB8/Gt4qo45phrjz3hFb8KDrAZ87r4eXtCnBEDvmEPesnPgncBXwQK0Kl7V90H/Mce9JKfBQf4I2Yj+P04JPO2AQ/Yg14LQrG+iyl64MRi5qLH/liwrizoj5vzJfH+QP7FFwMOAOsS/+6rIBQ8BnwW2GVP+K27/SwAnb2+vMI1qM7eVuDC4wuQOOZ6k9u4cOWor4JQcDAbYwXwWOK/A3G9+LF6843CB0/8w5rxV32zeTxH6wL3jcc7gOsxJ/ICISgFB/NqypeBuzG/1X0veWvjaZobOtndsI0TpxvtaV909raxve7XdDT1BOWLYJPLkM3ASi5cEh0IQbyq7zXg98B0YC6m6L5942nL26eovWkqb7Ye4OqqaykuHG/fxTOdZ9rYsvch2rqb2P7oPjqaeuy7eCm5X14D7gR+nhgLlCAWHKAV2ArsBt4NTBkw66Hu9rO0H++mevEY9rz1FwiFKCkspTBSRCgUIp7lf/pifZzsaebVxr/yyz3309Z9nF1PHKThpWb7oXrtCHAP8FXg7YFTweHbb8YRCAELgY8Dq4HagdPeqJ5Tyi33LqByxjh7yjOdzb3sfLyOw/t8O+g9AvyBC2cnPb/8daRyoeC2mcASzPKlCijFo+vLQ5FQaPbSqsoZiyurx5UXFYcLwlk/hon1x+I97ed6Gve3tTS83NTS3xf36qW385i3mLUCDcB+oI4ALkOG8n8uq3EDMZcE5gAAAABJRU5ErkJggg==",AO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACVCAYAAAC3i3MLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAC3pJREFUeF7t3VtsFPcVx/GvbwJaau4LTbiYWk2NoUppaFGJEdSAwgsuyKFNWpQ+VKnSpFUieGmblqhKmqhCLg2xo9L2pSBHbbiYSoWYu6FEfQA5ESUJ4BgnLpes8YIdG3zdnT5MQcqZWe/M/nf2Ys5HOi9n7P3Pf/bnmZ3ZWW8e6TUBqASWAPOBB4BJQDEwBHQD14D3gbPAMeAdIMq9pwBYDCwHvgqUA9Oxt2EB9ra6AVwA3gNOAU3ALUaZscD3gSPAMGD5rE6gFvga94ZvAX8BbuLcFolqAPgnsA4oIscVAD/C3qPIiSZbb2H/JY5Gi4B/4ZxzstUGfI8cVQm8i3NSqahhoA6YyuhwP7ADiOGcayrqbeCb5Ihi4E2ckwiiuoAfkNt+iv2aRc4t1RUD/gyMIYuVAP/BufJB12+BfHJLIfBHnHMJut4GQmShCuA6zhVOV+0FxpMbJgFHcc4hXfUR9lld1lgLDOJc0XRXM/Ypbjabjn3aLdc93dUDLCULfB24jXMFM1VvYR8estEY4N841zlTdR2YSwZ9EbiMc8UyXVvJTjtxrmum6xz2iU/S8mTDo3HACeAbckEiJSUlrF69mpUrVzJ37lxCoRBTp05lYGCAjo4OwuEwzc3NNDY20tTURF9fn3wIL36MfdaRLX4BvCybiRQXF1NZWckjjzzCgw8+SCgUIhQKUVRUREdHB9evX+fDDz/k0KFDHDx4kCtXrsiH8OIAsAb7TC1ttuBM84i1YsUK6+TJk1YsFrO86u3ttWpqaqxQKOR4vAQ1CHyZ7LAIn9d45syZY23fvt0aGBiQm2REBw8etJYsWeJ4PA+1kTQqxb5kLlfCtaZPn24dOXJEztWXW7duWRs3bnQ8doLaR3bwfHU5Pz/feumll6zBwUG5CXzZt2+fNXHiRMfjj1A3SeOF2V04V8C1HnroIau9vV3OL2k7d+60xo4d6xhnhPo2mbUe5zq51oQJE6z9+/fLKSft4sWL1rx58xzjjFC1pEEFzoFdq6yszOru7pbzMtbQ0OAYa4R6F/s9uUwYA1zCuU6OKioqsk6ePCmnaiwcDlszZ850jBenhoB5BOwYzoEdVVxcbJ0/f17OJ2VeeOEFx5gj1HfJjJ/gXBfXqq2tlVNMmdOnT/vZa/8dn/ychT2AfREsobq6Op5++mnZTplYLMbChQs5e/asXOTmMPBD4EvADPzN2a8YcBVoBQ7h4RaUyspKjh49Ktsp9eKLL7J582bZdjOI/eZup1yQCi/jTKyjZs+ebfX398s/hJTbs2ePY+xcrFOnTsmppVx3d7c1efJkx9hx6mcE5B2cgznqtddek+sfiGg0apWVlTnGz6Vavny5nFZgfBz238IHr+9iT8PD7hhg7dq1shWI/Px8qqqqZDunpHP9fYy1jABu+1iFM6mOmj9/vgx+oI4dO+ZYh1yqc+fOySkFJhaLWdOmTXOsQ5zytLMA73ug+bLhpqKiQrYCtWTJEvLygnxNHJxJkyYxf76nzZoSeXl5PPzww7Idj+cV8xqgObLh5r777pOtQI0ZM4YpU6bIdk6YMWOGbAXOx5izZSMerwHydJ9NKJT+m90yMWYqZGK9fYz5BdmIx2uAPi8bboqLje4MSMrkyZNlKydkYr0nTpwoW/F8Tjbi8RqgXtlw09XVJVuBKyjI1DsVZvLzvW761Llx44ZsxeP5w4le797rlg03HR0dspU1ysrKKC8vD/RFt2VZnDlzhvb2drkoK/h4fnpkIx6vAWqTDTdJ3tCUFk8++SQbNwZ/28tzzz3Hq6++KttZ4dq1a7IVj6fnG7wfwt6TDTcnTpyQrayRrkNGYaHXv8n0isVinDp1SrbjeV824vG6Ve+8jTGilpYWLl26JNsqC5w+fZqbN2/Ktpte4LxsxuM1QDeB07LpZs+ePbKlskBDQ4NsxXMM+94gT7wGCOybrxOqqanh9u3bsq0yKBKJ8Prrr8t2PPtlYyR+AvRXPBzGwuEwdXV1sq0yaMuWLfT0eDqx6sPnTWV+AvQR0CibbjZv3kxzc7NsqwxoamqipqZGtuN5E4+XbO7wEyCAX+FhL9Tf38+6dev8XHdQAfj4449Zv349w8PDcpGbAeA3spmI3wA1Y/8vm4Ta29upqKjggw8+kItUGpw5c4aKigo6Oz3fnfoHfFz/ucNvgACexz5WJtTS0sLixYupr68nFkvrBx/vWdFolO3bt7N06VIuX74sF8fTQRKfnIXkAnQF+J1sxtPT08OGDRtYuHAhe/fu9bo7VT4NDQ1RX19PeXk5Tz31FP39/fJHRvJr4FPZ9KKQ5D6R+CdgBT7+RcjZs2eprq5mwoQJrFy5klWrVlFSUkIoFGLatGmMHTtW/oonPnbRWaWzszPpde/v7yccDn/ms/HHjx+nt9fTe97S3v9XMjnoBOftjKOytm7dKu/yDMSmTZscY4/iSuoQptRdGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGfF8A2+qPgE6PDzM0NAQ0WiUaDSKZVl3Kxlefy9d9yr7GSfZT4jk5eXdrYKCAgoLC+9WKkQiEdmKy/OIyV52D9ry5cs93cy/YMEC2QrEokWLZMtVdXU1u3fvlu2s4CfYeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBHP/x+otrZWtrJCNn9T9EhaW1uzdpv6Jf99/ais48ePf+YrCYKya9cux9ijuPQQpsxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlpBCok00fSoHVsimVlpayenXCH0tKQ0MDV69ele2sF+Q2aWxspLW1VbbdNAKefjAoj+K8Oumo6upqecE2ZZYtW+YYz62y7Up0kNukurraMV6cehRDeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSOmAeqXDTeDg4OypQI0MDAgW/H0yYZfpgG6LBtuIpGIbKkA+djenp6/kaQlQG1tbViWJdsqAJZl0dbWJtvxeHr+RmIaoAgedoPXrl2jpaVFtlUALl68yCeffCLbbvqAG7Lpl2mALKBJNt3U19fLlgrAG2+8IVvxHMd+/oyYBgjgb7LhZtu2bX6OzSoJkUiEbdu2yXY8np63RFIRoH8ACU+zurq6ePzxx4lGo3KRSoFoNMpjjz1GV1eXXORmAPt5M5aKAHUDu2XTzeHDh6mqqvI6SU/Gjx8vW66GhoZkKxBeT6GLi4tlK2ldXV2sWbOGI0eOyEXx7AY+lc1keP7e+ASeB6qBMXKBdODAAebNm8emTZt44oknCIVC8kd8KSkpkS1XGzZsYOrUqeTl5clFKROLxQiHw7Ltau7cubLlW0dHBzt27KCmpsbrC2ew9z7Py2ayUrk1XwF+LpuJLFiwgNLSUqZMmcK4cePk4oQuXLjg5y8va1RVVTFr1izZTqivr49IJEJrayvnzp2Ti714BfilbCYrlQEqBt4H7pcLVNa4DJQDPXJBslLxGuiOT4Eq4LZcoLLCbeA7pDA8QVmH84vNtDJbMWAtOeRZnJPQylw9Sw56FHu3KSejlb66TQq+1jKTFgFXcU5MK/i6ir39c94kYCswhHOSWqmvIeD32Nt9VPkKsA/7BZ2ctJZ5RbG37wOMcjOAZ4CTaJhMK4a9HZ/B3q5pl8oLickYB8wEZgOzAG9vbN3beoH/Au3YFwYT3o8VpP8BOx/K48GQwasAAAAASUVORK5CYII=",wO="/basecamp-app/assets/setting_icon-fnFuyX_C.png",xO={zh:[{title:"公司環境",path:"/explore"},{title:"交通資訊",path:"/info"},{title:"社交任務",path:"/social"},{title:"獎勵兌換",path:"/rewards"},{title:"個人資訊",path:"/settings"}],en:[{title:"Environment",path:"/explore"},{title:"Transport Info",path:"/info"},{title:"Social Tasks",path:"/social"},{title:"Rewards",path:"/rewards"},{title:"Profile",path:"/settings"}]};function TO({lang:r}){const e=xO[r],t=[{title:r==="zh"?"公司生活":"Company Life",items:e.slice(0,2),icons:[_O]},{title:r==="zh"?"社交獎勵":"Social & Rewards",items:e.slice(2,4),icons:[AO]},{title:r==="zh"?"設定":"Settings",items:e.slice(4,5),icons:[wO]}];return Te.jsxs("div",{className:"home-container",children:[Te.jsx("h1",{children:"BaseCamp"}),Te.jsx("div",{className:"menu-container",children:t.map((a,u)=>Te.jsxs("div",{className:"menu-row-wrapper",children:[Te.jsxs("div",{className:"menu-row-title",children:[Te.jsx("div",{className:"row-icons",children:a.icons.map((d,E)=>Te.jsx("img",{src:d,alt:`icon-${E}`,className:"row-icon"},E))}),Te.jsx("span",{className:"row-title-text",children:a.title})]}),Te.jsx("div",{className:"menu-row",children:a.items.map((d,E)=>Te.jsx(Bf,{to:d.path,className:"menu-button",children:d.title},E))})]},u))})]})}function CO(){const[r,e]=ye.useState("zh");return Te.jsx(NN,{children:Te.jsxs(m3,{children:[Te.jsxs(XC,{children:[Te.jsx(eo,{path:"/",element:Te.jsx(TO,{lang:r})}),Te.jsx(eo,{path:"/explore",element:Te.jsx(N3,{lang:r})}),Te.jsx(eo,{path:"/info",element:Te.jsx(S3,{lang:r})}),Te.jsx(eo,{path:"/social",element:Te.jsx(ON,{lang:r})}),Te.jsx(eo,{path:"/rewards",element:Te.jsx(DN,{lang:r})}),Te.jsx(eo,{path:"/settings",element:Te.jsx(EO,{lang:r,setLang:e})}),Te.jsx(eo,{path:"/mailbox",element:Te.jsx(v3,{})})]}),Te.jsxs("div",{className:"bottom-buttons",children:[Te.jsx("button",{className:"lang-button",onClick:()=>e(r==="zh"?"en":"zh"),children:r==="zh"?"English":"中文"}),Te.jsx(Bf,{to:"/",className:"home-button",children:r==="zh"?"首頁":"Home"})]})]})})}tC.createRoot(document.getElementById("root")).render(Te.jsx(ye.StrictMode,{children:Te.jsx(CO,{})}));

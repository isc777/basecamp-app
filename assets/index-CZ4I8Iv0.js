function I3(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in e)){const u=Object.getOwnPropertyDescriptor(i,l);u&&Object.defineProperty(e,l,u.get?u:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xg={exports:{}},Gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function R3(){if(MA)return Gu;MA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,l,u){var g=null;if(u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),"key"in l){u={};for(var w in l)w!=="key"&&(u[w]=l[w])}else u=l;return l=u.ref,{$$typeof:e,type:i,key:g,ref:l!==void 0?l:null,props:u}}return Gu.Fragment=t,Gu.jsx=n,Gu.jsxs=n,Gu}var OA;function N3(){return OA||(OA=1,xg.exports=R3()),xg.exports}var Tt=N3(),wg={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function D3(){if(PA)return ye;PA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),g=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function R($){return $===null||typeof $!="object"?null:($=b&&$[b]||$["@@iterator"],typeof $=="function"?$:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function j($,St,Bt){this.props=$,this.context=St,this.refs=q,this.updater=Bt||k}j.prototype.isReactComponent={},j.prototype.setState=function($,St){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,St,"setState")},j.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function nt(){}nt.prototype=j.prototype;function Z($,St,Bt){this.props=$,this.context=St,this.refs=q,this.updater=Bt||k}var W=Z.prototype=new nt;W.constructor=Z,z(W,j.prototype),W.isPureReactComponent=!0;var yt=Array.isArray,wt={H:null,A:null,T:null,S:null,V:null},Rt=Object.prototype.hasOwnProperty;function H($,St,Bt,Vt,zt,Ee){return Bt=Ee.ref,{$$typeof:e,type:$,key:St,ref:Bt!==void 0?Bt:null,props:Ee}}function U($,St){return H($.type,St,void 0,void 0,void 0,$.props)}function V($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function et($){var St={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Bt){return St[Bt]})}var K=/\/+/g;function J($,St){return typeof $=="object"&&$!==null&&$.key!=null?et(""+$.key):St.toString(36)}function X(){}function Jt($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(X,X):($.status="pending",$.then(function(St){$.status==="pending"&&($.status="fulfilled",$.value=St)},function(St){$.status==="pending"&&($.status="rejected",$.reason=St)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function ht($,St,Bt,Vt,zt){var Ee=typeof $;(Ee==="undefined"||Ee==="boolean")&&($=null);var Mt=!1;if($===null)Mt=!0;else switch(Ee){case"bigint":case"string":case"number":Mt=!0;break;case"object":switch($.$$typeof){case e:case t:Mt=!0;break;case _:return Mt=$._init,ht(Mt($._payload),St,Bt,Vt,zt)}}if(Mt)return zt=zt($),Mt=Vt===""?"."+J($,0):Vt,yt(zt)?(Bt="",Mt!=null&&(Bt=Mt.replace(K,"$&/")+"/"),ht(zt,St,Bt,"",function(vi){return vi})):zt!=null&&(V(zt)&&(zt=U(zt,Bt+(zt.key==null||$&&$.key===zt.key?"":(""+zt.key).replace(K,"$&/")+"/")+Mt)),St.push(zt)),1;Mt=0;var Yn=Vt===""?".":Vt+":";if(yt($))for(var ce=0;ce<$.length;ce++)Vt=$[ce],Ee=Yn+J(Vt,ce),Mt+=ht(Vt,St,Bt,Ee,zt);else if(ce=R($),typeof ce=="function")for($=ce.call($),ce=0;!(Vt=$.next()).done;)Vt=Vt.value,Ee=Yn+J(Vt,ce++),Mt+=ht(Vt,St,Bt,Ee,zt);else if(Ee==="object"){if(typeof $.then=="function")return ht(Jt($),St,Bt,Vt,zt);throw St=String($),Error("Objects are not valid as a React child (found: "+(St==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":St)+"). If you meant to render a collection of children, use an array instead.")}return Mt}function Et($,St,Bt){if($==null)return $;var Vt=[],zt=0;return ht($,Vt,"","",function(Ee){return St.call(Bt,Ee,zt++)}),Vt}function xt($){if($._status===-1){var St=$._result;St=St(),St.then(function(Bt){($._status===0||$._status===-1)&&($._status=1,$._result=Bt)},function(Bt){($._status===0||$._status===-1)&&($._status=2,$._result=Bt)}),$._status===-1&&($._status=0,$._result=St)}if($._status===1)return $._result.default;throw $._result}var Ft=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var St=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(St))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function $t(){}return ye.Children={map:Et,forEach:function($,St,Bt){Et($,function(){St.apply(this,arguments)},Bt)},count:function($){var St=0;return Et($,function(){St++}),St},toArray:function($){return Et($,function(St){return St})||[]},only:function($){if(!V($))throw Error("React.Children.only expected to receive a single React element child.");return $}},ye.Component=j,ye.Fragment=n,ye.Profiler=l,ye.PureComponent=Z,ye.StrictMode=i,ye.Suspense=E,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wt,ye.__COMPILER_RUNTIME={__proto__:null,c:function($){return wt.H.useMemoCache($)}},ye.cache=function($){return function(){return $.apply(null,arguments)}},ye.cloneElement=function($,St,Bt){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Vt=z({},$.props),zt=$.key,Ee=void 0;if(St!=null)for(Mt in St.ref!==void 0&&(Ee=void 0),St.key!==void 0&&(zt=""+St.key),St)!Rt.call(St,Mt)||Mt==="key"||Mt==="__self"||Mt==="__source"||Mt==="ref"&&St.ref===void 0||(Vt[Mt]=St[Mt]);var Mt=arguments.length-2;if(Mt===1)Vt.children=Bt;else if(1<Mt){for(var Yn=Array(Mt),ce=0;ce<Mt;ce++)Yn[ce]=arguments[ce+2];Vt.children=Yn}return H($.type,zt,void 0,void 0,Ee,Vt)},ye.createContext=function($){return $={$$typeof:g,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:u,_context:$},$},ye.createElement=function($,St,Bt){var Vt,zt={},Ee=null;if(St!=null)for(Vt in St.key!==void 0&&(Ee=""+St.key),St)Rt.call(St,Vt)&&Vt!=="key"&&Vt!=="__self"&&Vt!=="__source"&&(zt[Vt]=St[Vt]);var Mt=arguments.length-2;if(Mt===1)zt.children=Bt;else if(1<Mt){for(var Yn=Array(Mt),ce=0;ce<Mt;ce++)Yn[ce]=arguments[ce+2];zt.children=Yn}if($&&$.defaultProps)for(Vt in Mt=$.defaultProps,Mt)zt[Vt]===void 0&&(zt[Vt]=Mt[Vt]);return H($,Ee,void 0,void 0,null,zt)},ye.createRef=function(){return{current:null}},ye.forwardRef=function($){return{$$typeof:w,render:$}},ye.isValidElement=V,ye.lazy=function($){return{$$typeof:_,_payload:{_status:-1,_result:$},_init:xt}},ye.memo=function($,St){return{$$typeof:y,type:$,compare:St===void 0?null:St}},ye.startTransition=function($){var St=wt.T,Bt={};wt.T=Bt;try{var Vt=$(),zt=wt.S;zt!==null&&zt(Bt,Vt),typeof Vt=="object"&&Vt!==null&&typeof Vt.then=="function"&&Vt.then($t,Ft)}catch(Ee){Ft(Ee)}finally{wt.T=St}},ye.unstable_useCacheRefresh=function(){return wt.H.useCacheRefresh()},ye.use=function($){return wt.H.use($)},ye.useActionState=function($,St,Bt){return wt.H.useActionState($,St,Bt)},ye.useCallback=function($,St){return wt.H.useCallback($,St)},ye.useContext=function($){return wt.H.useContext($)},ye.useDebugValue=function(){},ye.useDeferredValue=function($,St){return wt.H.useDeferredValue($,St)},ye.useEffect=function($,St,Bt){var Vt=wt.H;if(typeof Bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Vt.useEffect($,St)},ye.useId=function(){return wt.H.useId()},ye.useImperativeHandle=function($,St,Bt){return wt.H.useImperativeHandle($,St,Bt)},ye.useInsertionEffect=function($,St){return wt.H.useInsertionEffect($,St)},ye.useLayoutEffect=function($,St){return wt.H.useLayoutEffect($,St)},ye.useMemo=function($,St){return wt.H.useMemo($,St)},ye.useOptimistic=function($,St){return wt.H.useOptimistic($,St)},ye.useReducer=function($,St,Bt){return wt.H.useReducer($,St,Bt)},ye.useRef=function($){return wt.H.useRef($)},ye.useState=function($){return wt.H.useState($)},ye.useSyncExternalStore=function($,St,Bt){return wt.H.useSyncExternalStore($,St,Bt)},ye.useTransition=function(){return wt.H.useTransition()},ye.version="19.1.1",ye}var LA;function ip(){return LA||(LA=1,wg.exports=D3()),wg.exports}var st=ip();const di=s_(st);var Tg={exports:{}},qu={},_g={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA;function M3(){return kA||(kA=1,(function(e){function t(Et,xt){var Ft=Et.length;Et.push(xt);t:for(;0<Ft;){var $t=Ft-1>>>1,$=Et[$t];if(0<l($,xt))Et[$t]=xt,Et[Ft]=$,Ft=$t;else break t}}function n(Et){return Et.length===0?null:Et[0]}function i(Et){if(Et.length===0)return null;var xt=Et[0],Ft=Et.pop();if(Ft!==xt){Et[0]=Ft;t:for(var $t=0,$=Et.length,St=$>>>1;$t<St;){var Bt=2*($t+1)-1,Vt=Et[Bt],zt=Bt+1,Ee=Et[zt];if(0>l(Vt,Ft))zt<$&&0>l(Ee,Vt)?(Et[$t]=Ee,Et[zt]=Ft,$t=zt):(Et[$t]=Vt,Et[Bt]=Ft,$t=Bt);else if(zt<$&&0>l(Ee,Ft))Et[$t]=Ee,Et[zt]=Ft,$t=zt;else break t}}return xt}function l(Et,xt){var Ft=Et.sortIndex-xt.sortIndex;return Ft!==0?Ft:Et.id-xt.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var g=Date,w=g.now();e.unstable_now=function(){return g.now()-w}}var E=[],y=[],_=1,b=null,R=3,k=!1,z=!1,q=!1,j=!1,nt=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function yt(Et){for(var xt=n(y);xt!==null;){if(xt.callback===null)i(y);else if(xt.startTime<=Et)i(y),xt.sortIndex=xt.expirationTime,t(E,xt);else break;xt=n(y)}}function wt(Et){if(q=!1,yt(Et),!z)if(n(E)!==null)z=!0,Rt||(Rt=!0,J());else{var xt=n(y);xt!==null&&ht(wt,xt.startTime-Et)}}var Rt=!1,H=-1,U=5,V=-1;function et(){return j?!0:!(e.unstable_now()-V<U)}function K(){if(j=!1,Rt){var Et=e.unstable_now();V=Et;var xt=!0;try{t:{z=!1,q&&(q=!1,Z(H),H=-1),k=!0;var Ft=R;try{e:{for(yt(Et),b=n(E);b!==null&&!(b.expirationTime>Et&&et());){var $t=b.callback;if(typeof $t=="function"){b.callback=null,R=b.priorityLevel;var $=$t(b.expirationTime<=Et);if(Et=e.unstable_now(),typeof $=="function"){b.callback=$,yt(Et),xt=!0;break e}b===n(E)&&i(E),yt(Et)}else i(E);b=n(E)}if(b!==null)xt=!0;else{var St=n(y);St!==null&&ht(wt,St.startTime-Et),xt=!1}}break t}finally{b=null,R=Ft,k=!1}xt=void 0}}finally{xt?J():Rt=!1}}}var J;if(typeof W=="function")J=function(){W(K)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Jt=X.port2;X.port1.onmessage=K,J=function(){Jt.postMessage(null)}}else J=function(){nt(K,0)};function ht(Et,xt){H=nt(function(){Et(e.unstable_now())},xt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Et){Et.callback=null},e.unstable_forceFrameRate=function(Et){0>Et||125<Et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Et?Math.floor(1e3/Et):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_next=function(Et){switch(R){case 1:case 2:case 3:var xt=3;break;default:xt=R}var Ft=R;R=xt;try{return Et()}finally{R=Ft}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(Et,xt){switch(Et){case 1:case 2:case 3:case 4:case 5:break;default:Et=3}var Ft=R;R=Et;try{return xt()}finally{R=Ft}},e.unstable_scheduleCallback=function(Et,xt,Ft){var $t=e.unstable_now();switch(typeof Ft=="object"&&Ft!==null?(Ft=Ft.delay,Ft=typeof Ft=="number"&&0<Ft?$t+Ft:$t):Ft=$t,Et){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Ft+$,Et={id:_++,callback:xt,priorityLevel:Et,startTime:Ft,expirationTime:$,sortIndex:-1},Ft>$t?(Et.sortIndex=Ft,t(y,Et),n(E)===null&&Et===n(y)&&(q?(Z(H),H=-1):q=!0,ht(wt,Ft-$t))):(Et.sortIndex=$,t(E,Et),z||k||(z=!0,Rt||(Rt=!0,J()))),Et},e.unstable_shouldYield=et,e.unstable_wrapCallback=function(Et){var xt=R;return function(){var Ft=R;R=xt;try{return Et.apply(this,arguments)}finally{R=Ft}}}})(Cg)),Cg}var BA;function O3(){return BA||(BA=1,_g.exports=M3()),_g.exports}var vg={exports:{}},Yi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VA;function P3(){if(VA)return Yi;VA=1;var e=ip();function t(E){var y="https://react.dev/errors/"+E;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+E+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(E,y,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:E,containerInfo:y,implementation:_}}var g=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(E,y){if(E==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Yi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yi.createPortal=function(E,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(E,y,null,_)},Yi.flushSync=function(E){var y=g.T,_=i.p;try{if(g.T=null,i.p=2,E)return E()}finally{g.T=y,i.p=_,i.d.f()}},Yi.preconnect=function(E,y){typeof E=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(E,y))},Yi.prefetchDNS=function(E){typeof E=="string"&&i.d.D(E)},Yi.preinit=function(E,y){if(typeof E=="string"&&y&&typeof y.as=="string"){var _=y.as,b=w(_,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(E,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:R,fetchPriority:k}):_==="script"&&i.d.X(E,{crossOrigin:b,integrity:R,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Yi.preinitModule=function(E,y){if(typeof E=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=w(y.as,y.crossOrigin);i.d.M(E,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(E)},Yi.preload=function(E,y){if(typeof E=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,b=w(_,y.crossOrigin);i.d.L(E,_,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Yi.preloadModule=function(E,y){if(typeof E=="string")if(y){var _=w(y.as,y.crossOrigin);i.d.m(E,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(E)},Yi.requestFormReset=function(E){i.d.r(E)},Yi.unstable_batchedUpdates=function(E,y){return E(y)},Yi.useFormState=function(E,y,_){return g.H.useFormState(E,y,_)},Yi.useFormStatus=function(){return g.H.useHostTransitionStatus()},Yi.version="19.1.1",Yi}var UA;function L3(){if(UA)return vg.exports;UA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vg.exports=P3(),vg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA;function k3(){if(FA)return qu;FA=1;var e=O3(),t=ip(),n=L3();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)a+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function u(r){var a=r,h=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(h=a.return),r=a.return;while(r)}return a.tag===3?h:null}function g(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function w(r){if(u(r)!==r)throw Error(i(188))}function E(r){var a=r.alternate;if(!a){if(a=u(r),a===null)throw Error(i(188));return a!==r?null:r}for(var h=r,m=a;;){var T=h.return;if(T===null)break;var v=T.alternate;if(v===null){if(m=T.return,m!==null){h=m;continue}break}if(T.child===v.child){for(v=T.child;v;){if(v===h)return w(T),r;if(v===m)return w(T),a;v=v.sibling}throw Error(i(188))}if(h.return!==m.return)h=T,m=v;else{for(var M=!1,B=T.child;B;){if(B===h){M=!0,h=T,m=v;break}if(B===m){M=!0,m=T,h=v;break}B=B.sibling}if(!M){for(B=v.child;B;){if(B===h){M=!0,h=v,m=T;break}if(B===m){M=!0,m=v,h=T;break}B=B.sibling}if(!M)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?r:a}function y(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=y(r),a!==null)return a;r=r.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),W=Symbol.for("react.context"),yt=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function Jt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case j:return"Profiler";case q:return"StrictMode";case wt:return"Suspense";case Rt:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case W:return(r.displayName||"Context")+".Provider";case Z:return(r._context.displayName||"Context")+".Consumer";case yt:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return a=r.displayName||null,a!==null?a:Jt(r.type)||"Memo";case U:a=r._payload,r=r._init;try{return Jt(r(a))}catch{}}return null}var ht=Array.isArray,Et=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ft={pending:!1,data:null,method:null,action:null},$t=[],$=-1;function St(r){return{current:r}}function Bt(r){0>$||(r.current=$t[$],$t[$]=null,$--)}function Vt(r,a){$++,$t[$]=r.current,r.current=a}var zt=St(null),Ee=St(null),Mt=St(null),Yn=St(null);function ce(r,a){switch(Vt(Mt,a),Vt(Ee,r),Vt(zt,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?aA(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=aA(a),r=oA(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Bt(zt),Vt(zt,r)}function vi(){Bt(zt),Bt(Ee),Bt(Mt)}function us(r){r.memoizedState!==null&&Vt(Yn,r);var a=zt.current,h=oA(a,r.type);a!==h&&(Vt(Ee,r),Vt(zt,h))}function Xn(r){Ee.current===r&&(Bt(zt),Bt(Ee)),Yn.current===r&&(Bt(Yn),Uu._currentValue=Ft)}var hs=Object.prototype.hasOwnProperty,we=e.unstable_scheduleCallback,Ar=e.unstable_cancelCallback,ar=e.unstable_shouldYield,fs=e.unstable_requestPaint,Fe=e.unstable_now,qe=e.unstable_getCurrentPriorityLevel,Zt=e.unstable_ImmediatePriority,In=e.unstable_UserBlockingPriority,jt=e.unstable_NormalPriority,Ka=e.unstable_LowPriority,Qa=e.unstable_IdlePriority,xr=e.log,ds=e.unstable_setDisableYieldValue,ei=null,li=null;function Wn(r){if(typeof xr=="function"&&ds(r),li&&typeof li.setStrictMode=="function")try{li.setStrictMode(ei,r)}catch{}}var Ye=Math.clz32?Math.clz32:ql,Gl=Math.log,ca=Math.LN2;function ql(r){return r>>>=0,r===0?32:31-(Gl(r)/ca|0)|0}var Xe=256,kt=4194304;function We(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ae(r,a,h){var m=r.pendingLanes;if(m===0)return 0;var T=0,v=r.suspendedLanes,M=r.pingedLanes;r=r.warmLanes;var B=m&134217727;return B!==0?(m=B&~v,m!==0?T=We(m):(M&=B,M!==0?T=We(M):h||(h=B&~r,h!==0&&(T=We(h))))):(B=m&~v,B!==0?T=We(B):M!==0?T=We(M):h||(h=m&~r,h!==0&&(T=We(h)))),T===0?0:a!==0&&a!==T&&(a&v)===0&&(v=T&-T,h=a&-a,v>=h||v===32&&(h&4194048)!==0)?a:T}function Ke(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function qr(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ua(){var r=Xe;return Xe<<=1,(Xe&4194048)===0&&(Xe=256),r}function gs(){var r=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),r}function _e(r){for(var a=[],h=0;31>h;h++)a.push(r);return a}function $e(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Jo(r,a,h,m,T,v){var M=r.pendingLanes;r.pendingLanes=h,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=h,r.entangledLanes&=h,r.errorRecoveryDisabledLanes&=h,r.shellSuspendCounter=0;var B=r.entanglements,Q=r.expirationTimes,ft=r.hiddenUpdates;for(h=M&~h;0<h;){var _t=31-Ye(h),bt=1<<_t;B[_t]=0,Q[_t]=-1;var dt=ft[_t];if(dt!==null)for(ft[_t]=null,_t=0;_t<dt.length;_t++){var pt=dt[_t];pt!==null&&(pt.lane&=-536870913)}h&=~bt}m!==0&&ms(r,m,0),v!==0&&T===0&&r.tag!==0&&(r.suspendedLanes|=v&~(M&~a))}function ms(r,a,h){r.pendingLanes|=a,r.suspendedLanes&=~a;var m=31-Ye(a);r.entangledLanes|=a,r.entanglements[m]=r.entanglements[m]|1073741824|h&4194090}function ni(r,a){var h=r.entangledLanes|=a;for(r=r.entanglements;h;){var m=31-Ye(h),T=1<<m;T&a|r[m]&a&&(r[m]|=a),h&=~T}}function ha(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Bn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Bi(){var r=xt.p;return r!==0?r:(r=window.event,r===void 0?32:SA(r.type))}function Za(r,a){var h=xt.p;try{return xt.p=r,a()}finally{xt.p=h}}var Kn=Math.random().toString(36).slice(2),Rn="__reactFiber$"+Kn,pn="__reactProps$"+Kn,wr="__reactContainer$"+Kn,Vn="__reactEvents$"+Kn,Ji="__reactListeners$"+Kn,Vi="__reactHandles$"+Kn,Ut="__reactResources$"+Kn,$i="__reactMarker$"+Kn;function Ns(r){delete r[Rn],delete r[pn],delete r[Vn],delete r[Ji],delete r[Vi]}function yn(r){var a=r[Rn];if(a)return a;for(var h=r.parentNode;h;){if(a=h[wr]||h[Rn]){if(h=a.alternate,a.child!==null||h!==null&&h.child!==null)for(r=hA(r);r!==null;){if(h=r[Rn])return h;r=hA(r)}return a}r=h,h=r.parentNode}return null}function Si(r){if(r=r[Rn]||r[wr]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Tr(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function _r(r){var a=r[Ut];return a||(a=r[Ut]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ze(r){r[$i]=!0}var Yl=new Set,fa={};function Qn(r,a){dn(r,a),dn(r+"Capture",a)}function dn(r,a){for(fa[r]=a,r=0;r<a.length;r++)Yl.add(a[r])}var je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cr={},tr={};function $o(r){return hs.call(tr,r)?!0:hs.call(Cr,r)?!1:je.test(r)?tr[r]=!0:(Cr[r]=!0,!1)}function vt(r,a,h){if($o(a))if(h===null)r.removeAttribute(a);else{switch(typeof h){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+h)}}function da(r,a,h){if(h===null)r.removeAttribute(a);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+h)}}function Le(r,a,h,m){if(m===null)r.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(h);return}r.setAttributeNS(a,h,""+m)}}var or,Ja;function xe(r){if(or===void 0)try{throw Error()}catch(h){var a=h.stack.trim().match(/\n( *(at )?)/);or=a&&a[1]||"",Ja=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+or+r+Ja}var Ce=!1;function pe(r,a){if(!r||Ce)return"";Ce=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(pt){var dt=pt}Reflect.construct(r,[],bt)}else{try{bt.call()}catch(pt){dt=pt}r.call(bt.prototype)}}else{try{throw Error()}catch(pt){dt=pt}(bt=r())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(pt){if(pt&&dt&&typeof pt.stack=="string")return[pt.stack,dt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=m.DetermineComponentFrameRoot(),M=v[0],B=v[1];if(M&&B){var Q=M.split(`
`),ft=B.split(`
`);for(T=m=0;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;for(;T<ft.length&&!ft[T].includes("DetermineComponentFrameRoot");)T++;if(m===Q.length||T===ft.length)for(m=Q.length-1,T=ft.length-1;1<=m&&0<=T&&Q[m]!==ft[T];)T--;for(;1<=m&&0<=T;m--,T--)if(Q[m]!==ft[T]){if(m!==1||T!==1)do if(m--,T--,0>T||Q[m]!==ft[T]){var _t=`
`+Q[m].replace(" at new "," at ");return r.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",r.displayName)),_t}while(1<=m&&0<=T);break}}}finally{Ce=!1,Error.prepareStackTrace=h}return(h=r?r.displayName||r.name:"")?xe(h):""}function tl(r){switch(r.tag){case 26:case 27:case 5:return xe(r.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return pe(r.type,!1);case 11:return pe(r.type.render,!1);case 1:return pe(r.type,!0);case 31:return xe("Activity");default:return""}}function er(r){try{var a="";do a+=tl(r),r=r.return;while(r);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function hn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sn(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ui(r){var a=sn(r)?"checked":"value",h=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),m=""+r[a];if(!r.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var T=h.get,v=h.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return T.call(this)},set:function(M){m=""+M,v.call(this,M)}}),Object.defineProperty(r,a,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Ds(r){r._valueTracker||(r._valueTracker=Ui(r))}function ne(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var h=a.getValue(),m="";return r&&(m=sn(r)?r.checked?"true":"false":r.value),r=m,r!==h?(a.setValue(r),!0):!1}function yi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ga=/[\n"\\]/g;function En(r){return r.replace(ga,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function He(r,a,h,m,T,v,M,B){r.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.type=M:r.removeAttribute("type"),a!=null?M==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+hn(a)):r.value!==""+hn(a)&&(r.value=""+hn(a)):M!=="submit"&&M!=="reset"||r.removeAttribute("value"),a!=null?ct(r,M,hn(a)):h!=null?ct(r,M,hn(h)):m!=null&&r.removeAttribute("value"),T==null&&v!=null&&(r.defaultChecked=!!v),T!=null&&(r.checked=T&&typeof T!="function"&&typeof T!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?r.name=""+hn(B):r.removeAttribute("name")}function Un(r,a,h,m,T,v,M,B){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),a!=null||h!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;h=h!=null?""+hn(h):"",a=a!=null?""+hn(a):h,B||a===r.value||(r.value=a),r.defaultValue=a}m=m??T,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=B?r.checked:!!m,r.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(r.name=M)}function ct(r,a,h){a==="number"&&yi(r.ownerDocument)===r||r.defaultValue===""+h||(r.defaultValue=""+h)}function G(r,a,h,m){if(r=r.options,a){a={};for(var T=0;T<h.length;T++)a["$"+h[T]]=!0;for(h=0;h<r.length;h++)T=a.hasOwnProperty("$"+r[h].value),r[h].selected!==T&&(r[h].selected=T),T&&m&&(r[h].defaultSelected=!0)}else{for(h=""+hn(h),a=null,T=0;T<r.length;T++){if(r[T].value===h){r[T].selected=!0,m&&(r[T].defaultSelected=!0);return}a!==null||r[T].disabled||(a=r[T])}a!==null&&(a.selected=!0)}}function Yt(r,a,h){if(a!=null&&(a=""+hn(a),a!==r.value&&(r.value=a),h==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=h!=null?""+hn(h):""}function Nn(r,a,h,m){if(a==null){if(m!=null){if(h!=null)throw Error(i(92));if(ht(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),a=h}h=hn(a),r.defaultValue=h,m=r.textContent,m===h&&m!==""&&m!==null&&(r.value=m)}function An(r,a){if(a){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=a;return}}r.textContent=a}var ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ma(r,a,h){var m=a.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":m?r.setProperty(a,h):typeof h!="number"||h===0||ps.has(a)?a==="float"?r.cssFloat=h:r[a]=(""+h).trim():r[a]=h+"px"}function Ei(r,a,h){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var T in a)m=a[T],a.hasOwnProperty(T)&&h[T]!==m&&ma(r,T,m)}else for(var v in a)a.hasOwnProperty(v)&&ma(r,v,a[v])}function Xt(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),el=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vr(r){return el.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var pa=null;function Ms(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Yr=null,bi=null;function Dn(r){var a=Si(r);if(a&&(r=a.stateNode)){var h=r[pn]||null;t:switch(r=a.stateNode,a.type){case"input":if(He(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),a=h.name,h.type==="radio"&&a!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+En(""+a)+'"][type="radio"]'),a=0;a<h.length;a++){var m=h[a];if(m!==r&&m.form===r.form){var T=m[pn]||null;if(!T)throw Error(i(90));He(m,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(a=0;a<h.length;a++)m=h[a],m.form===r.form&&ne(m)}break t;case"textarea":Yt(r,h.value,h.defaultValue);break t;case"select":a=h.value,a!=null&&G(r,!!h.multiple,a,!1)}}}var Sr=!1;function Fi(r,a,h){if(Sr)return r(a,h);Sr=!0;try{var m=r(a);return m}finally{if(Sr=!1,(Yr!==null||bi!==null)&&(bf(),Yr&&(a=Yr,r=bi,bi=Yr=null,Dn(a),r)))for(a=0;a<r.length;a++)Dn(r[a])}}function Wt(r,a){var h=r.stateNode;if(h===null)return null;var m=h[pn]||null;if(m===null)return null;h=m[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break t;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(i(231,a,typeof h));return h}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ie=!1;if(Ii)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){ie=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{ie=!1}var lr=null,Ze=null,ya=null;function Xr(){if(ya)return ya;var r,a=Ze,h=a.length,m,T="value"in lr?lr.value:lr.textContent,v=T.length;for(r=0;r<h&&a[r]===T[r];r++);var M=h-r;for(m=1;m<=M&&a[h-m]===T[v-m];m++);return ya=T.slice(r,1<m?1-m:void 0)}function Ea(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function br(){return!0}function ys(){return!1}function xn(r){function a(h,m,T,v,M){this._reactName=h,this._targetInst=T,this.type=m,this.nativeEvent=v,this.target=M,this.currentTarget=null;for(var B in r)r.hasOwnProperty(B)&&(h=r[B],this[B]=h?h(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?br:ys,this.isPropagationStopped=ys,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),a}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=xn(ci),Rr=_({},ci,{view:0,detail:0}),Fn=xn(Rr),Aa,Os,Nr,xa=_({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Nr&&(Nr&&r.type==="mousemove"?(Aa=r.screenX-Nr.screenX,Os=r.screenY-Nr.screenY):Os=Aa=0,Nr=r),Aa)},movementY:function(r){return"movementY"in r?r.movementY:Os}}),wa=xn(xa),ru=_({},xa,{dataTransfer:0}),Ve=xn(ru),Ps=_({},Rr,{relatedTarget:0}),Es=xn(Ps),Dr=_({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),nl=xn(Dr),mt=_({},ci,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),de=xn(mt),_n=_({},ci,{data:0}),Ls=xn(_n),il={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},As={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Xl[r])?!!a[r]:!1}function ks(){return Wl}var Cn=_({},Rr,{key:function(r){if(r.key){var a=il[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ea(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?As[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(r){return r.type==="keypress"?Ea(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ea(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Bs=xn(Cn),ve=_({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vs=xn(ve),Wr=_({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),Ne=xn(Wr),A=_({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=xn(A),D=_({},xa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),F=xn(D),ot=_({},ci,{newState:0,oldState:0}),At=xn(ot),Pt=[9,13,27,32],ae=Ii&&"CompositionEvent"in window,on=null;Ii&&"documentMode"in document&&(on=document.documentMode);var Ue=Ii&&"TextEvent"in window&&!on,vn=Ii&&(!ae||on&&8<on&&11>=on),zi=" ",Kr=!1;function Ai(r,a){switch(r){case"keyup":return Pt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Mr=!1;function xs(r,a){switch(r){case"compositionend":return nr(a);case"keypress":return a.which!==32?null:(Kr=!0,zi);case"textInput":return r=a.data,r===zi&&Kr?null:r;default:return null}}function L0(r,a){if(Mr)return r==="compositionend"||!ae&&Ai(r,a)?(r=Xr(),ya=Ze=lr=null,Mr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vn&&a.locale!=="ko"?null:a.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rl(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Us[r.type]:a==="textarea"}function ir(r,a,h,m){Yr?bi?bi.push(m):bi=[m]:Yr=m,a=Of(a,"onChange"),0<a.length&&(h=new Ir("onChange","change",null,h,m),r.push({event:h,listeners:a}))}var $a=null,ji=null;function k0(r){eA(r,0)}function to(r){var a=Tr(r);if(ne(a))return r}function Yh(r,a){if(r==="change")return a}var su=!1;if(Ii){var cr;if(Ii){var au="oninput"in document;if(!au){var Kl=document.createElement("div");Kl.setAttribute("oninput","return;"),au=typeof Kl.oninput=="function"}cr=au}else cr=!1;su=cr&&(!document.documentMode||9<document.documentMode)}function eo(){$a&&($a.detachEvent("onpropertychange",De),ji=$a=null)}function De(r){if(r.propertyName==="value"&&to(ji)){var a=[];ir(a,ji,r,Ms(r)),Fi(k0,a)}}function Ql(r,a,h){r==="focusin"?(eo(),$a=a,ji=h,$a.attachEvent("onpropertychange",De)):r==="focusout"&&eo()}function O(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return to(ji)}function s(r,a){if(r==="click")return to(a)}function o(r,a){if(r==="input"||r==="change")return to(a)}function c(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var f=typeof Object.is=="function"?Object.is:c;function d(r,a){if(f(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var h=Object.keys(r),m=Object.keys(a);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var T=h[m];if(!hs.call(a,T)||!f(r[T],a[T]))return!1}return!0}function p(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function x(r,a){var h=p(r);r=0;for(var m;h;){if(h.nodeType===3){if(m=r+h.textContent.length,r<=a&&m>=a)return{node:h,offset:a-r};r=m}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=p(h)}}function C(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?C(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function S(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=yi(r.document);a instanceof r.HTMLIFrameElement;){try{var h=typeof a.contentWindow.location.href=="string"}catch{h=!1}if(h)r=a.contentWindow;else break;a=yi(r.document)}return a}function N(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var P=Ii&&"documentMode"in document&&11>=document.documentMode,L=null,Y=null,tt=null,it=!1;function lt(r,a,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;it||L==null||L!==yi(m)||(m=L,"selectionStart"in m&&N(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),tt&&d(tt,m)||(tt=m,m=Of(Y,"onSelect"),0<m.length&&(a=new Ir("onSelect","select",null,a,h),r.push({event:a,listeners:m}),a.target=L)))}function gt(r,a){var h={};return h[r.toLowerCase()]=a.toLowerCase(),h["Webkit"+r]="webkit"+a,h["Moz"+r]="moz"+a,h}var Ot={animationend:gt("Animation","AnimationEnd"),animationiteration:gt("Animation","AnimationIteration"),animationstart:gt("Animation","AnimationStart"),transitionrun:gt("Transition","TransitionRun"),transitionstart:gt("Transition","TransitionStart"),transitioncancel:gt("Transition","TransitionCancel"),transitionend:gt("Transition","TransitionEnd")},Lt={},Nt={};Ii&&(Nt=document.createElement("div").style,"AnimationEvent"in window||(delete Ot.animationend.animation,delete Ot.animationiteration.animation,delete Ot.animationstart.animation),"TransitionEvent"in window||delete Ot.transitionend.transition);function ge(r){if(Lt[r])return Lt[r];if(!Ot[r])return r;var a=Ot[r],h;for(h in a)if(a.hasOwnProperty(h)&&h in Nt)return Lt[r]=a[h];return r}var he=ge("animationend"),Ri=ge("animationiteration"),ur=ge("animationstart"),Hi=ge("transitionrun"),tn=ge("transitionstart"),ui=ge("transitioncancel"),Gi=ge("transitionend"),Ta=new Map,Fs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fs.push("scrollEnd");function Or(r,a){Ta.set(r,a),Qn(a,[r])}var Xh=new WeakMap;function Qr(r,a){if(typeof r=="object"&&r!==null){var h=Xh.get(r);return h!==void 0?h:(a={value:r,source:a,stack:er(a)},Xh.set(r,a),a)}return{value:r,source:a,stack:er(a)}}var Zr=[],Zl=0,B0=0;function Wh(){for(var r=Zl,a=B0=Zl=0;a<r;){var h=Zr[a];Zr[a++]=null;var m=Zr[a];Zr[a++]=null;var T=Zr[a];Zr[a++]=null;var v=Zr[a];if(Zr[a++]=null,m!==null&&T!==null){var M=m.pending;M===null?T.next=T:(T.next=M.next,M.next=T),m.pending=T}v!==0&&Uy(h,T,v)}}function Kh(r,a,h,m){Zr[Zl++]=r,Zr[Zl++]=a,Zr[Zl++]=h,Zr[Zl++]=m,B0|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function V0(r,a,h,m){return Kh(r,a,h,m),Qh(r)}function Jl(r,a){return Kh(r,null,null,a),Qh(r)}function Uy(r,a,h){r.lanes|=h;var m=r.alternate;m!==null&&(m.lanes|=h);for(var T=!1,v=r.return;v!==null;)v.childLanes|=h,m=v.alternate,m!==null&&(m.childLanes|=h),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(T=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,T&&a!==null&&(T=31-Ye(h),r=v.hiddenUpdates,m=r[T],m===null?r[T]=[a]:m.push(a),a.lane=h|536870912),v):null}function Qh(r){if(50<Du)throw Du=0,G1=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var $l={};function dI(r,a,h,m){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(r,a,h,m){return new dI(r,a,h,m)}function U0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _a(r,a){var h=r.alternate;return h===null?(h=Pr(r.tag,a,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=a,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&65011712,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,a=r.dependencies,h.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h.refCleanup=r.refCleanup,h}function Fy(r,a){r.flags&=65011714;var h=r.alternate;return h===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,a=h.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Zh(r,a,h,m,T,v){var M=0;if(m=r,typeof r=="function")U0(r)&&(M=1);else if(typeof r=="string")M=m3(r,h,zt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case V:return r=Pr(31,h,a,T),r.elementType=V,r.lanes=v,r;case z:return sl(h.children,T,v,a);case q:M=8,T|=24;break;case j:return r=Pr(12,h,a,T|2),r.elementType=j,r.lanes=v,r;case wt:return r=Pr(13,h,a,T),r.elementType=wt,r.lanes=v,r;case Rt:return r=Pr(19,h,a,T),r.elementType=Rt,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case nt:case W:M=10;break t;case Z:M=9;break t;case yt:M=11;break t;case H:M=14;break t;case U:M=16,m=null;break t}M=29,h=Error(i(130,r===null?"null":typeof r,"")),m=null}return a=Pr(M,h,a,T),a.elementType=r,a.type=m,a.lanes=v,a}function sl(r,a,h,m){return r=Pr(7,r,m,a),r.lanes=h,r}function F0(r,a,h){return r=Pr(6,r,null,a),r.lanes=h,r}function z0(r,a,h){return a=Pr(4,r.children!==null?r.children:[],r.key,a),a.lanes=h,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var tc=[],ec=0,Jh=null,$h=0,Jr=[],$r=0,al=null,Ca=1,va="";function ol(r,a){tc[ec++]=$h,tc[ec++]=Jh,Jh=r,$h=a}function zy(r,a,h){Jr[$r++]=Ca,Jr[$r++]=va,Jr[$r++]=al,al=r;var m=Ca;r=va;var T=32-Ye(m)-1;m&=~(1<<T),h+=1;var v=32-Ye(a)+T;if(30<v){var M=T-T%5;v=(m&(1<<M)-1).toString(32),m>>=M,T-=M,Ca=1<<32-Ye(a)+T|h<<T|m,va=v+r}else Ca=1<<v|h<<T|m,va=r}function j0(r){r.return!==null&&(ol(r,1),zy(r,1,0))}function H0(r){for(;r===Jh;)Jh=tc[--ec],tc[ec]=null,$h=tc[--ec],tc[ec]=null;for(;r===al;)al=Jr[--$r],Jr[$r]=null,va=Jr[--$r],Jr[$r]=null,Ca=Jr[--$r],Jr[$r]=null}var rr=null,zn=null,Qe=!1,ll=null,zs=!1,G0=Error(i(519));function cl(r){var a=Error(i(418,""));throw cu(Qr(a,r)),G0}function jy(r){var a=r.stateNode,h=r.type,m=r.memoizedProps;switch(a[Rn]=r,a[pn]=m,h){case"dialog":Ie("cancel",a),Ie("close",a);break;case"iframe":case"object":case"embed":Ie("load",a);break;case"video":case"audio":for(h=0;h<Ou.length;h++)Ie(Ou[h],a);break;case"source":Ie("error",a);break;case"img":case"image":case"link":Ie("error",a),Ie("load",a);break;case"details":Ie("toggle",a);break;case"input":Ie("invalid",a),Un(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Ds(a);break;case"select":Ie("invalid",a);break;case"textarea":Ie("invalid",a),Nn(a,m.value,m.defaultValue,m.children),Ds(a)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||a.textContent===""+h||m.suppressHydrationWarning===!0||sA(a.textContent,h)?(m.popover!=null&&(Ie("beforetoggle",a),Ie("toggle",a)),m.onScroll!=null&&Ie("scroll",a),m.onScrollEnd!=null&&Ie("scrollend",a),m.onClick!=null&&(a.onclick=Pf),a=!0):a=!1,a||cl(r)}function Hy(r){for(rr=r.return;rr;)switch(rr.tag){case 5:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:rr=rr.return}}function ou(r){if(r!==rr)return!1;if(!Qe)return Hy(r),Qe=!0,!1;var a=r.tag,h;if((h=a!==3&&a!==27)&&((h=a===5)&&(h=r.type,h=!(h!=="form"&&h!=="button")||ag(r.type,r.memoizedProps)),h=!h),h&&zn&&cl(r),Hy(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(h=r.data,h==="/$"){if(a===0){zn=Ts(r.nextSibling);break t}a--}else h!=="$"&&h!=="$!"&&h!=="$?"||a++;r=r.nextSibling}zn=null}}else a===27?(a=zn,Eo(r.type)?(r=ug,ug=null,zn=r):zn=a):zn=rr?Ts(r.stateNode.nextSibling):null;return!0}function lu(){zn=rr=null,Qe=!1}function Gy(){var r=ll;return r!==null&&(dr===null?dr=r:dr.push.apply(dr,r),ll=null),r}function cu(r){ll===null?ll=[r]:ll.push(r)}var q0=St(null),ul=null,Sa=null;function no(r,a,h){Vt(q0,a._currentValue),a._currentValue=h}function ba(r){r._currentValue=q0.current,Bt(q0)}function Y0(r,a,h){for(;r!==null;){var m=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),r===h)break;r=r.return}}function X0(r,a,h,m){var T=r.child;for(T!==null&&(T.return=r);T!==null;){var v=T.dependencies;if(v!==null){var M=T.child;v=v.firstContext;t:for(;v!==null;){var B=v;v=T;for(var Q=0;Q<a.length;Q++)if(B.context===a[Q]){v.lanes|=h,B=v.alternate,B!==null&&(B.lanes|=h),Y0(v.return,h,r),m||(M=null);break t}v=B.next}}else if(T.tag===18){if(M=T.return,M===null)throw Error(i(341));M.lanes|=h,v=M.alternate,v!==null&&(v.lanes|=h),Y0(M,h,r),M=null}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===r){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}}function uu(r,a,h,m){r=null;for(var T=a,v=!1;T!==null;){if(!v){if((T.flags&524288)!==0)v=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var M=T.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var B=T.type;f(T.pendingProps.value,M.value)||(r!==null?r.push(B):r=[B])}}else if(T===Yn.current){if(M=T.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(r!==null?r.push(Uu):r=[Uu])}T=T.return}r!==null&&X0(a,r,h,m),a.flags|=262144}function tf(r){for(r=r.firstContext;r!==null;){if(!f(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function hl(r){ul=r,Sa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function qi(r){return qy(ul,r)}function ef(r,a){return ul===null&&hl(r),qy(r,a)}function qy(r,a){var h=a._currentValue;if(a={context:a,memoizedValue:h,next:null},Sa===null){if(r===null)throw Error(i(308));Sa=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Sa=Sa.next=a;return h}var gI=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(h,m){r.push(m)}};this.abort=function(){a.aborted=!0,r.forEach(function(h){return h()})}},mI=e.unstable_scheduleCallback,pI=e.unstable_NormalPriority,hi={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function W0(){return{controller:new gI,data:new Map,refCount:0}}function hu(r){r.refCount--,r.refCount===0&&mI(pI,function(){r.controller.abort()})}var fu=null,K0=0,nc=0,ic=null;function yI(r,a){if(fu===null){var h=fu=[];K0=0,nc=Z1(),ic={status:"pending",value:void 0,then:function(m){h.push(m)}}}return K0++,a.then(Yy,Yy),a}function Yy(){if(--K0===0&&fu!==null){ic!==null&&(ic.status="fulfilled");var r=fu;fu=null,nc=0,ic=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function EI(r,a){var h=[],m={status:"pending",value:null,reason:null,then:function(T){h.push(T)}};return r.then(function(){m.status="fulfilled",m.value=a;for(var T=0;T<h.length;T++)(0,h[T])(a)},function(T){for(m.status="rejected",m.reason=T,T=0;T<h.length;T++)(0,h[T])(void 0)}),m}var Xy=Et.S;Et.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&yI(r,a),Xy!==null&&Xy(r,a)};var fl=St(null);function Q0(){var r=fl.current;return r!==null?r:mn.pooledCache}function nf(r,a){a===null?Vt(fl,fl.current):Vt(fl,a.pool)}function Wy(){var r=Q0();return r===null?null:{parent:hi._currentValue,pool:r}}var du=Error(i(460)),Ky=Error(i(474)),rf=Error(i(542)),Z0={then:function(){}};function Qy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function sf(){}function Zy(r,a,h){switch(h=r[h],h===void 0?r.push(a):h!==a&&(a.then(sf,sf),a=h),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,$y(r),r;default:if(typeof a.status=="string")a.then(sf,sf);else{if(r=mn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(m){if(a.status==="pending"){var T=a;T.status="fulfilled",T.value=m}},function(m){if(a.status==="pending"){var T=a;T.status="rejected",T.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,$y(r),r}throw gu=a,du}}var gu=null;function Jy(){if(gu===null)throw Error(i(459));var r=gu;return gu=null,r}function $y(r){if(r===du||r===rf)throw Error(i(483))}var io=!1;function J0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ro(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function so(r,a,h){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(en&2)!==0){var T=m.pending;return T===null?a.next=a:(a.next=T.next,T.next=a),m.pending=a,a=Qh(r),Uy(r,null,h),a}return Kh(r,m,a,h),Qh(r)}function mu(r,a,h){if(a=a.updateQueue,a!==null&&(a=a.shared,(h&4194048)!==0)){var m=a.lanes;m&=r.pendingLanes,h|=m,a.lanes=h,ni(r,h)}}function t1(r,a){var h=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var T=null,v=null;if(h=h.firstBaseUpdate,h!==null){do{var M={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};v===null?T=v=M:v=v.next=M,h=h.next}while(h!==null);v===null?T=v=a:v=v.next=a}else T=v=a;h={baseState:m.baseState,firstBaseUpdate:T,lastBaseUpdate:v,shared:m.shared,callbacks:m.callbacks},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=a:r.next=a,h.lastBaseUpdate=a}var e1=!1;function pu(){if(e1){var r=ic;if(r!==null)throw r}}function yu(r,a,h,m){e1=!1;var T=r.updateQueue;io=!1;var v=T.firstBaseUpdate,M=T.lastBaseUpdate,B=T.shared.pending;if(B!==null){T.shared.pending=null;var Q=B,ft=Q.next;Q.next=null,M===null?v=ft:M.next=ft,M=Q;var _t=r.alternate;_t!==null&&(_t=_t.updateQueue,B=_t.lastBaseUpdate,B!==M&&(B===null?_t.firstBaseUpdate=ft:B.next=ft,_t.lastBaseUpdate=Q))}if(v!==null){var bt=T.baseState;M=0,_t=ft=Q=null,B=v;do{var dt=B.lane&-536870913,pt=dt!==B.lane;if(pt?(ke&dt)===dt:(m&dt)===dt){dt!==0&&dt===nc&&(e1=!0),_t!==null&&(_t=_t.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var oe=r,ee=B;dt=a;var un=h;switch(ee.tag){case 1:if(oe=ee.payload,typeof oe=="function"){bt=oe.call(un,bt,dt);break t}bt=oe;break t;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ee.payload,dt=typeof oe=="function"?oe.call(un,bt,dt):oe,dt==null)break t;bt=_({},bt,dt);break t;case 2:io=!0}}dt=B.callback,dt!==null&&(r.flags|=64,pt&&(r.flags|=8192),pt=T.callbacks,pt===null?T.callbacks=[dt]:pt.push(dt))}else pt={lane:dt,tag:B.tag,payload:B.payload,callback:B.callback,next:null},_t===null?(ft=_t=pt,Q=bt):_t=_t.next=pt,M|=dt;if(B=B.next,B===null){if(B=T.shared.pending,B===null)break;pt=B,B=pt.next,pt.next=null,T.lastBaseUpdate=pt,T.shared.pending=null}}while(!0);_t===null&&(Q=bt),T.baseState=Q,T.firstBaseUpdate=ft,T.lastBaseUpdate=_t,v===null&&(T.shared.lanes=0),go|=M,r.lanes=M,r.memoizedState=bt}}function t2(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function e2(r,a){var h=r.callbacks;if(h!==null)for(r.callbacks=null,r=0;r<h.length;r++)t2(h[r],a)}var rc=St(null),af=St(0);function n2(r,a){r=Pa,Vt(af,r),Vt(rc,a),Pa=r|a.baseLanes}function n1(){Vt(af,Pa),Vt(rc,rc.current)}function i1(){Pa=af.current,Bt(rc),Bt(af)}var ao=0,Te=null,ln=null,ii=null,of=!1,sc=!1,dl=!1,lf=0,Eu=0,ac=null,AI=0;function Zn(){throw Error(i(321))}function r1(r,a){if(a===null)return!1;for(var h=0;h<a.length&&h<r.length;h++)if(!f(r[h],a[h]))return!1;return!0}function s1(r,a,h,m,T,v){return ao=v,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Et.H=r===null||r.memoizedState===null?U2:F2,dl=!1,v=h(m,T),dl=!1,sc&&(v=r2(a,h,m,T)),i2(r),v}function i2(r){Et.H=gf;var a=ln!==null&&ln.next!==null;if(ao=0,ii=ln=Te=null,of=!1,Eu=0,ac=null,a)throw Error(i(300));r===null||xi||(r=r.dependencies,r!==null&&tf(r)&&(xi=!0))}function r2(r,a,h,m){Te=r;var T=0;do{if(sc&&(ac=null),Eu=0,sc=!1,25<=T)throw Error(i(301));if(T+=1,ii=ln=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Et.H=SI,v=a(h,m)}while(sc);return v}function xI(){var r=Et.H,a=r.useState()[0];return a=typeof a.then=="function"?Au(a):a,r=r.useState()[0],(ln!==null?ln.memoizedState:null)!==r&&(Te.flags|=1024),a}function a1(){var r=lf!==0;return lf=0,r}function o1(r,a,h){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~h}function l1(r){if(of){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}of=!1}ao=0,ii=ln=Te=null,sc=!1,Eu=lf=0,ac=null}function hr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Te.memoizedState=ii=r:ii=ii.next=r,ii}function ri(){if(ln===null){var r=Te.alternate;r=r!==null?r.memoizedState:null}else r=ln.next;var a=ii===null?Te.memoizedState:ii.next;if(a!==null)ii=a,ln=r;else{if(r===null)throw Te.alternate===null?Error(i(467)):Error(i(310));ln=r,r={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},ii===null?Te.memoizedState=ii=r:ii=ii.next=r}return ii}function c1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Au(r){var a=Eu;return Eu+=1,ac===null&&(ac=[]),r=Zy(ac,r,a),a=Te,(ii===null?a.memoizedState:ii.next)===null&&(a=a.alternate,Et.H=a===null||a.memoizedState===null?U2:F2),r}function cf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Au(r);if(r.$$typeof===W)return qi(r)}throw Error(i(438,String(r)))}function u1(r){var a=null,h=Te.updateQueue;if(h!==null&&(a=h.memoCache),a==null){var m=Te.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(T){return T.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),h===null&&(h=c1(),Te.updateQueue=h),h.memoCache=a,h=a.data[a.index],h===void 0)for(h=a.data[a.index]=Array(r),m=0;m<r;m++)h[m]=et;return a.index++,h}function Ia(r,a){return typeof a=="function"?a(r):a}function uf(r){var a=ri();return h1(a,ln,r)}function h1(r,a,h){var m=r.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var T=r.baseQueue,v=m.pending;if(v!==null){if(T!==null){var M=T.next;T.next=v.next,v.next=M}a.baseQueue=T=v,m.pending=null}if(v=r.baseState,T===null)r.memoizedState=v;else{a=T.next;var B=M=null,Q=null,ft=a,_t=!1;do{var bt=ft.lane&-536870913;if(bt!==ft.lane?(ke&bt)===bt:(ao&bt)===bt){var dt=ft.revertLane;if(dt===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),bt===nc&&(_t=!0);else if((ao&dt)===dt){ft=ft.next,dt===nc&&(_t=!0);continue}else bt={lane:0,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Q===null?(B=Q=bt,M=v):Q=Q.next=bt,Te.lanes|=dt,go|=dt;bt=ft.action,dl&&h(v,bt),v=ft.hasEagerState?ft.eagerState:h(v,bt)}else dt={lane:bt,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Q===null?(B=Q=dt,M=v):Q=Q.next=dt,Te.lanes|=bt,go|=bt;ft=ft.next}while(ft!==null&&ft!==a);if(Q===null?M=v:Q.next=B,!f(v,r.memoizedState)&&(xi=!0,_t&&(h=ic,h!==null)))throw h;r.memoizedState=v,r.baseState=M,r.baseQueue=Q,m.lastRenderedState=v}return T===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function f1(r){var a=ri(),h=a.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=r;var m=h.dispatch,T=h.pending,v=a.memoizedState;if(T!==null){h.pending=null;var M=T=T.next;do v=r(v,M.action),M=M.next;while(M!==T);f(v,a.memoizedState)||(xi=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),h.lastRenderedState=v}return[v,m]}function s2(r,a,h){var m=Te,T=ri(),v=Qe;if(v){if(h===void 0)throw Error(i(407));h=h()}else h=a();var M=!f((ln||T).memoizedState,h);M&&(T.memoizedState=h,xi=!0),T=T.queue;var B=l2.bind(null,m,T,r);if(xu(2048,8,B,[r]),T.getSnapshot!==a||M||ii!==null&&ii.memoizedState.tag&1){if(m.flags|=2048,oc(9,hf(),o2.bind(null,m,T,h,a),null),mn===null)throw Error(i(349));v||(ao&124)!==0||a2(m,a,h)}return h}function a2(r,a,h){r.flags|=16384,r={getSnapshot:a,value:h},a=Te.updateQueue,a===null?(a=c1(),Te.updateQueue=a,a.stores=[r]):(h=a.stores,h===null?a.stores=[r]:h.push(r))}function o2(r,a,h,m){a.value=h,a.getSnapshot=m,c2(a)&&u2(r)}function l2(r,a,h){return h(function(){c2(a)&&u2(r)})}function c2(r){var a=r.getSnapshot;r=r.value;try{var h=a();return!f(r,h)}catch{return!0}}function u2(r){var a=Jl(r,2);a!==null&&Ur(a,r,2)}function d1(r){var a=hr();if(typeof r=="function"){var h=r;if(r=h(),dl){Wn(!0);try{h()}finally{Wn(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:r},a}function h2(r,a,h,m){return r.baseState=h,h1(r,ln,typeof m=="function"?m:Ia)}function wI(r,a,h,m,T){if(df(r))throw Error(i(485));if(r=a.action,r!==null){var v={payload:T,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){v.listeners.push(M)}};Et.T!==null?h(!0):v.isTransition=!1,m(v),h=a.pending,h===null?(v.next=a.pending=v,f2(a,v)):(v.next=h.next,a.pending=h.next=v)}}function f2(r,a){var h=a.action,m=a.payload,T=r.state;if(a.isTransition){var v=Et.T,M={};Et.T=M;try{var B=h(T,m),Q=Et.S;Q!==null&&Q(M,B),d2(r,a,B)}catch(ft){g1(r,a,ft)}finally{Et.T=v}}else try{v=h(T,m),d2(r,a,v)}catch(ft){g1(r,a,ft)}}function d2(r,a,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){g2(r,a,m)},function(m){return g1(r,a,m)}):g2(r,a,h)}function g2(r,a,h){a.status="fulfilled",a.value=h,m2(a),r.state=h,a=r.pending,a!==null&&(h=a.next,h===a?r.pending=null:(h=h.next,a.next=h,f2(r,h)))}function g1(r,a,h){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=h,m2(a),a=a.next;while(a!==m)}r.action=null}function m2(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function p2(r,a){return a}function y2(r,a){if(Qe){var h=mn.formState;if(h!==null){t:{var m=Te;if(Qe){if(zn){e:{for(var T=zn,v=zs;T.nodeType!==8;){if(!v){T=null;break e}if(T=Ts(T.nextSibling),T===null){T=null;break e}}v=T.data,T=v==="F!"||v==="F"?T:null}if(T){zn=Ts(T.nextSibling),m=T.data==="F!";break t}}cl(m)}m=!1}m&&(a=h[0])}}return h=hr(),h.memoizedState=h.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p2,lastRenderedState:a},h.queue=m,h=k2.bind(null,Te,m),m.dispatch=h,m=d1(!1),v=A1.bind(null,Te,!1,m.queue),m=hr(),T={state:a,dispatch:null,action:r,pending:null},m.queue=T,h=wI.bind(null,Te,T,v,h),T.dispatch=h,m.memoizedState=r,[a,h,!1]}function E2(r){var a=ri();return A2(a,ln,r)}function A2(r,a,h){if(a=h1(r,a,p2)[0],r=uf(Ia)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=Au(a)}catch(M){throw M===du?rf:M}else m=a;a=ri();var T=a.queue,v=T.dispatch;return h!==a.memoizedState&&(Te.flags|=2048,oc(9,hf(),TI.bind(null,T,h),null)),[m,v,r]}function TI(r,a){r.action=a}function x2(r){var a=ri(),h=ln;if(h!==null)return A2(a,h,r);ri(),a=a.memoizedState,h=ri();var m=h.queue.dispatch;return h.memoizedState=r,[a,m,!1]}function oc(r,a,h,m){return r={tag:r,create:h,deps:m,inst:a,next:null},a=Te.updateQueue,a===null&&(a=c1(),Te.updateQueue=a),h=a.lastEffect,h===null?a.lastEffect=r.next=r:(m=h.next,h.next=r,r.next=m,a.lastEffect=r),r}function hf(){return{destroy:void 0,resource:void 0}}function w2(){return ri().memoizedState}function ff(r,a,h,m){var T=hr();m=m===void 0?null:m,Te.flags|=r,T.memoizedState=oc(1|a,hf(),h,m)}function xu(r,a,h,m){var T=ri();m=m===void 0?null:m;var v=T.memoizedState.inst;ln!==null&&m!==null&&r1(m,ln.memoizedState.deps)?T.memoizedState=oc(a,v,h,m):(Te.flags|=r,T.memoizedState=oc(1|a,v,h,m))}function T2(r,a){ff(8390656,8,r,a)}function _2(r,a){xu(2048,8,r,a)}function C2(r,a){return xu(4,2,r,a)}function v2(r,a){return xu(4,4,r,a)}function S2(r,a){if(typeof a=="function"){r=r();var h=a(r);return function(){typeof h=="function"?h():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function b2(r,a,h){h=h!=null?h.concat([r]):null,xu(4,4,S2.bind(null,a,r),h)}function m1(){}function I2(r,a){var h=ri();a=a===void 0?null:a;var m=h.memoizedState;return a!==null&&r1(a,m[1])?m[0]:(h.memoizedState=[r,a],r)}function R2(r,a){var h=ri();a=a===void 0?null:a;var m=h.memoizedState;if(a!==null&&r1(a,m[1]))return m[0];if(m=r(),dl){Wn(!0);try{r()}finally{Wn(!1)}}return h.memoizedState=[m,a],m}function p1(r,a,h){return h===void 0||(ao&1073741824)!==0?r.memoizedState=a:(r.memoizedState=h,r=ME(),Te.lanes|=r,go|=r,h)}function N2(r,a,h,m){return f(h,a)?h:rc.current!==null?(r=p1(r,h,m),f(r,a)||(xi=!0),r):(ao&42)===0?(xi=!0,r.memoizedState=h):(r=ME(),Te.lanes|=r,go|=r,a)}function D2(r,a,h,m,T){var v=xt.p;xt.p=v!==0&&8>v?v:8;var M=Et.T,B={};Et.T=B,A1(r,!1,a,h);try{var Q=T(),ft=Et.S;if(ft!==null&&ft(B,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var _t=EI(Q,m);wu(r,a,_t,Vr(r))}else wu(r,a,m,Vr(r))}catch(bt){wu(r,a,{then:function(){},status:"rejected",reason:bt},Vr())}finally{xt.p=v,Et.T=M}}function _I(){}function y1(r,a,h,m){if(r.tag!==5)throw Error(i(476));var T=M2(r).queue;D2(r,T,a,Ft,h===null?_I:function(){return O2(r),h(m)})}function M2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Ft,baseState:Ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:Ft},next:null};var h={};return a.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:h},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function O2(r){var a=M2(r).next.queue;wu(r,a,{},Vr())}function E1(){return qi(Uu)}function P2(){return ri().memoizedState}function L2(){return ri().memoizedState}function CI(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var h=Vr();r=ro(h);var m=so(a,r,h);m!==null&&(Ur(m,a,h),mu(m,a,h)),a={cache:W0()},r.payload=a;return}a=a.return}}function vI(r,a,h){var m=Vr();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},df(r)?B2(a,h):(h=V0(r,a,h,m),h!==null&&(Ur(h,r,m),V2(h,a,m)))}function k2(r,a,h){var m=Vr();wu(r,a,h,m)}function wu(r,a,h,m){var T={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(df(r))B2(a,T);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var M=a.lastRenderedState,B=v(M,h);if(T.hasEagerState=!0,T.eagerState=B,f(B,M))return Kh(r,a,T,0),mn===null&&Wh(),!1}catch{}finally{}if(h=V0(r,a,T,m),h!==null)return Ur(h,r,m),V2(h,a,m),!0}return!1}function A1(r,a,h,m){if(m={lane:2,revertLane:Z1(),action:m,hasEagerState:!1,eagerState:null,next:null},df(r)){if(a)throw Error(i(479))}else a=V0(r,h,m,2),a!==null&&Ur(a,r,2)}function df(r){var a=r.alternate;return r===Te||a!==null&&a===Te}function B2(r,a){sc=of=!0;var h=r.pending;h===null?a.next=a:(a.next=h.next,h.next=a),r.pending=a}function V2(r,a,h){if((h&4194048)!==0){var m=a.lanes;m&=r.pendingLanes,h|=m,a.lanes=h,ni(r,h)}}var gf={readContext:qi,use:cf,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useLayoutEffect:Zn,useInsertionEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useSyncExternalStore:Zn,useId:Zn,useHostTransitionStatus:Zn,useFormState:Zn,useActionState:Zn,useOptimistic:Zn,useMemoCache:Zn,useCacheRefresh:Zn},U2={readContext:qi,use:cf,useCallback:function(r,a){return hr().memoizedState=[r,a===void 0?null:a],r},useContext:qi,useEffect:T2,useImperativeHandle:function(r,a,h){h=h!=null?h.concat([r]):null,ff(4194308,4,S2.bind(null,a,r),h)},useLayoutEffect:function(r,a){return ff(4194308,4,r,a)},useInsertionEffect:function(r,a){ff(4,2,r,a)},useMemo:function(r,a){var h=hr();a=a===void 0?null:a;var m=r();if(dl){Wn(!0);try{r()}finally{Wn(!1)}}return h.memoizedState=[m,a],m},useReducer:function(r,a,h){var m=hr();if(h!==void 0){var T=h(a);if(dl){Wn(!0);try{h(a)}finally{Wn(!1)}}}else T=a;return m.memoizedState=m.baseState=T,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:T},m.queue=r,r=r.dispatch=vI.bind(null,Te,r),[m.memoizedState,r]},useRef:function(r){var a=hr();return r={current:r},a.memoizedState=r},useState:function(r){r=d1(r);var a=r.queue,h=k2.bind(null,Te,a);return a.dispatch=h,[r.memoizedState,h]},useDebugValue:m1,useDeferredValue:function(r,a){var h=hr();return p1(h,r,a)},useTransition:function(){var r=d1(!1);return r=D2.bind(null,Te,r.queue,!0,!1),hr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,h){var m=Te,T=hr();if(Qe){if(h===void 0)throw Error(i(407));h=h()}else{if(h=a(),mn===null)throw Error(i(349));(ke&124)!==0||a2(m,a,h)}T.memoizedState=h;var v={value:h,getSnapshot:a};return T.queue=v,T2(l2.bind(null,m,v,r),[r]),m.flags|=2048,oc(9,hf(),o2.bind(null,m,v,h,a),null),h},useId:function(){var r=hr(),a=mn.identifierPrefix;if(Qe){var h=va,m=Ca;h=(m&~(1<<32-Ye(m)-1)).toString(32)+h,a="«"+a+"R"+h,h=lf++,0<h&&(a+="H"+h.toString(32)),a+="»"}else h=AI++,a="«"+a+"r"+h.toString(32)+"»";return r.memoizedState=a},useHostTransitionStatus:E1,useFormState:y2,useActionState:y2,useOptimistic:function(r){var a=hr();a.memoizedState=a.baseState=r;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=h,a=A1.bind(null,Te,!0,h),h.dispatch=a,[r,a]},useMemoCache:u1,useCacheRefresh:function(){return hr().memoizedState=CI.bind(null,Te)}},F2={readContext:qi,use:cf,useCallback:I2,useContext:qi,useEffect:_2,useImperativeHandle:b2,useInsertionEffect:C2,useLayoutEffect:v2,useMemo:R2,useReducer:uf,useRef:w2,useState:function(){return uf(Ia)},useDebugValue:m1,useDeferredValue:function(r,a){var h=ri();return N2(h,ln.memoizedState,r,a)},useTransition:function(){var r=uf(Ia)[0],a=ri().memoizedState;return[typeof r=="boolean"?r:Au(r),a]},useSyncExternalStore:s2,useId:P2,useHostTransitionStatus:E1,useFormState:E2,useActionState:E2,useOptimistic:function(r,a){var h=ri();return h2(h,ln,r,a)},useMemoCache:u1,useCacheRefresh:L2},SI={readContext:qi,use:cf,useCallback:I2,useContext:qi,useEffect:_2,useImperativeHandle:b2,useInsertionEffect:C2,useLayoutEffect:v2,useMemo:R2,useReducer:f1,useRef:w2,useState:function(){return f1(Ia)},useDebugValue:m1,useDeferredValue:function(r,a){var h=ri();return ln===null?p1(h,r,a):N2(h,ln.memoizedState,r,a)},useTransition:function(){var r=f1(Ia)[0],a=ri().memoizedState;return[typeof r=="boolean"?r:Au(r),a]},useSyncExternalStore:s2,useId:P2,useHostTransitionStatus:E1,useFormState:x2,useActionState:x2,useOptimistic:function(r,a){var h=ri();return ln!==null?h2(h,ln,r,a):(h.baseState=r,[r,h.queue.dispatch])},useMemoCache:u1,useCacheRefresh:L2},lc=null,Tu=0;function mf(r){var a=Tu;return Tu+=1,lc===null&&(lc=[]),Zy(lc,r,a)}function _u(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function pf(r,a){throw a.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function z2(r){var a=r._init;return a(r._payload)}function j2(r){function a(at,rt){if(r){var ut=at.deletions;ut===null?(at.deletions=[rt],at.flags|=16):ut.push(rt)}}function h(at,rt){if(!r)return null;for(;rt!==null;)a(at,rt),rt=rt.sibling;return null}function m(at){for(var rt=new Map;at!==null;)at.key!==null?rt.set(at.key,at):rt.set(at.index,at),at=at.sibling;return rt}function T(at,rt){return at=_a(at,rt),at.index=0,at.sibling=null,at}function v(at,rt,ut){return at.index=ut,r?(ut=at.alternate,ut!==null?(ut=ut.index,ut<rt?(at.flags|=67108866,rt):ut):(at.flags|=67108866,rt)):(at.flags|=1048576,rt)}function M(at){return r&&at.alternate===null&&(at.flags|=67108866),at}function B(at,rt,ut,Ct){return rt===null||rt.tag!==6?(rt=F0(ut,at.mode,Ct),rt.return=at,rt):(rt=T(rt,ut),rt.return=at,rt)}function Q(at,rt,ut,Ct){var qt=ut.type;return qt===z?_t(at,rt,ut.props.children,Ct,ut.key):rt!==null&&(rt.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===U&&z2(qt)===rt.type)?(rt=T(rt,ut.props),_u(rt,ut),rt.return=at,rt):(rt=Zh(ut.type,ut.key,ut.props,null,at.mode,Ct),_u(rt,ut),rt.return=at,rt)}function ft(at,rt,ut,Ct){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==ut.containerInfo||rt.stateNode.implementation!==ut.implementation?(rt=z0(ut,at.mode,Ct),rt.return=at,rt):(rt=T(rt,ut.children||[]),rt.return=at,rt)}function _t(at,rt,ut,Ct,qt){return rt===null||rt.tag!==7?(rt=sl(ut,at.mode,Ct,qt),rt.return=at,rt):(rt=T(rt,ut),rt.return=at,rt)}function bt(at,rt,ut){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=F0(""+rt,at.mode,ut),rt.return=at,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case R:return ut=Zh(rt.type,rt.key,rt.props,null,at.mode,ut),_u(ut,rt),ut.return=at,ut;case k:return rt=z0(rt,at.mode,ut),rt.return=at,rt;case U:var Ct=rt._init;return rt=Ct(rt._payload),bt(at,rt,ut)}if(ht(rt)||J(rt))return rt=sl(rt,at.mode,ut,null),rt.return=at,rt;if(typeof rt.then=="function")return bt(at,mf(rt),ut);if(rt.$$typeof===W)return bt(at,ef(at,rt),ut);pf(at,rt)}return null}function dt(at,rt,ut,Ct){var qt=rt!==null?rt.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return qt!==null?null:B(at,rt,""+ut,Ct);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case R:return ut.key===qt?Q(at,rt,ut,Ct):null;case k:return ut.key===qt?ft(at,rt,ut,Ct):null;case U:return qt=ut._init,ut=qt(ut._payload),dt(at,rt,ut,Ct)}if(ht(ut)||J(ut))return qt!==null?null:_t(at,rt,ut,Ct,null);if(typeof ut.then=="function")return dt(at,rt,mf(ut),Ct);if(ut.$$typeof===W)return dt(at,rt,ef(at,ut),Ct);pf(at,ut)}return null}function pt(at,rt,ut,Ct,qt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return at=at.get(ut)||null,B(rt,at,""+Ct,qt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case R:return at=at.get(Ct.key===null?ut:Ct.key)||null,Q(rt,at,Ct,qt);case k:return at=at.get(Ct.key===null?ut:Ct.key)||null,ft(rt,at,Ct,qt);case U:var Se=Ct._init;return Ct=Se(Ct._payload),pt(at,rt,ut,Ct,qt)}if(ht(Ct)||J(Ct))return at=at.get(ut)||null,_t(rt,at,Ct,qt,null);if(typeof Ct.then=="function")return pt(at,rt,ut,mf(Ct),qt);if(Ct.$$typeof===W)return pt(at,rt,ut,ef(rt,Ct),qt);pf(rt,Ct)}return null}function oe(at,rt,ut,Ct){for(var qt=null,Se=null,Qt=rt,re=rt=0,Ti=null;Qt!==null&&re<ut.length;re++){Qt.index>re?(Ti=Qt,Qt=null):Ti=Qt.sibling;var Ge=dt(at,Qt,ut[re],Ct);if(Ge===null){Qt===null&&(Qt=Ti);break}r&&Qt&&Ge.alternate===null&&a(at,Qt),rt=v(Ge,rt,re),Se===null?qt=Ge:Se.sibling=Ge,Se=Ge,Qt=Ti}if(re===ut.length)return h(at,Qt),Qe&&ol(at,re),qt;if(Qt===null){for(;re<ut.length;re++)Qt=bt(at,ut[re],Ct),Qt!==null&&(rt=v(Qt,rt,re),Se===null?qt=Qt:Se.sibling=Qt,Se=Qt);return Qe&&ol(at,re),qt}for(Qt=m(Qt);re<ut.length;re++)Ti=pt(Qt,at,re,ut[re],Ct),Ti!==null&&(r&&Ti.alternate!==null&&Qt.delete(Ti.key===null?re:Ti.key),rt=v(Ti,rt,re),Se===null?qt=Ti:Se.sibling=Ti,Se=Ti);return r&&Qt.forEach(function(_o){return a(at,_o)}),Qe&&ol(at,re),qt}function ee(at,rt,ut,Ct){if(ut==null)throw Error(i(151));for(var qt=null,Se=null,Qt=rt,re=rt=0,Ti=null,Ge=ut.next();Qt!==null&&!Ge.done;re++,Ge=ut.next()){Qt.index>re?(Ti=Qt,Qt=null):Ti=Qt.sibling;var _o=dt(at,Qt,Ge.value,Ct);if(_o===null){Qt===null&&(Qt=Ti);break}r&&Qt&&_o.alternate===null&&a(at,Qt),rt=v(_o,rt,re),Se===null?qt=_o:Se.sibling=_o,Se=_o,Qt=Ti}if(Ge.done)return h(at,Qt),Qe&&ol(at,re),qt;if(Qt===null){for(;!Ge.done;re++,Ge=ut.next())Ge=bt(at,Ge.value,Ct),Ge!==null&&(rt=v(Ge,rt,re),Se===null?qt=Ge:Se.sibling=Ge,Se=Ge);return Qe&&ol(at,re),qt}for(Qt=m(Qt);!Ge.done;re++,Ge=ut.next())Ge=pt(Qt,at,re,Ge.value,Ct),Ge!==null&&(r&&Ge.alternate!==null&&Qt.delete(Ge.key===null?re:Ge.key),rt=v(Ge,rt,re),Se===null?qt=Ge:Se.sibling=Ge,Se=Ge);return r&&Qt.forEach(function(b3){return a(at,b3)}),Qe&&ol(at,re),qt}function un(at,rt,ut,Ct){if(typeof ut=="object"&&ut!==null&&ut.type===z&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case R:t:{for(var qt=ut.key;rt!==null;){if(rt.key===qt){if(qt=ut.type,qt===z){if(rt.tag===7){h(at,rt.sibling),Ct=T(rt,ut.props.children),Ct.return=at,at=Ct;break t}}else if(rt.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===U&&z2(qt)===rt.type){h(at,rt.sibling),Ct=T(rt,ut.props),_u(Ct,ut),Ct.return=at,at=Ct;break t}h(at,rt);break}else a(at,rt);rt=rt.sibling}ut.type===z?(Ct=sl(ut.props.children,at.mode,Ct,ut.key),Ct.return=at,at=Ct):(Ct=Zh(ut.type,ut.key,ut.props,null,at.mode,Ct),_u(Ct,ut),Ct.return=at,at=Ct)}return M(at);case k:t:{for(qt=ut.key;rt!==null;){if(rt.key===qt)if(rt.tag===4&&rt.stateNode.containerInfo===ut.containerInfo&&rt.stateNode.implementation===ut.implementation){h(at,rt.sibling),Ct=T(rt,ut.children||[]),Ct.return=at,at=Ct;break t}else{h(at,rt);break}else a(at,rt);rt=rt.sibling}Ct=z0(ut,at.mode,Ct),Ct.return=at,at=Ct}return M(at);case U:return qt=ut._init,ut=qt(ut._payload),un(at,rt,ut,Ct)}if(ht(ut))return oe(at,rt,ut,Ct);if(J(ut)){if(qt=J(ut),typeof qt!="function")throw Error(i(150));return ut=qt.call(ut),ee(at,rt,ut,Ct)}if(typeof ut.then=="function")return un(at,rt,mf(ut),Ct);if(ut.$$typeof===W)return un(at,rt,ef(at,ut),Ct);pf(at,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,rt!==null&&rt.tag===6?(h(at,rt.sibling),Ct=T(rt,ut),Ct.return=at,at=Ct):(h(at,rt),Ct=F0(ut,at.mode,Ct),Ct.return=at,at=Ct),M(at)):h(at,rt)}return function(at,rt,ut,Ct){try{Tu=0;var qt=un(at,rt,ut,Ct);return lc=null,qt}catch(Qt){if(Qt===du||Qt===rf)throw Qt;var Se=Pr(29,Qt,null,at.mode);return Se.lanes=Ct,Se.return=at,Se}finally{}}}var cc=j2(!0),H2=j2(!1),ts=St(null),js=null;function oo(r){var a=r.alternate;Vt(fi,fi.current&1),Vt(ts,r),js===null&&(a===null||rc.current!==null||a.memoizedState!==null)&&(js=r)}function G2(r){if(r.tag===22){if(Vt(fi,fi.current),Vt(ts,r),js===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(js=r)}}else lo()}function lo(){Vt(fi,fi.current),Vt(ts,ts.current)}function Ra(r){Bt(ts),js===r&&(js=null),Bt(fi)}var fi=St(0);function yf(r){for(var a=r;a!==null;){if(a.tag===13){var h=a.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||cg(h)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function x1(r,a,h,m){a=r.memoizedState,h=h(m,a),h=h==null?a:_({},a,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var w1={enqueueSetState:function(r,a,h){r=r._reactInternals;var m=Vr(),T=ro(m);T.payload=a,h!=null&&(T.callback=h),a=so(r,T,m),a!==null&&(Ur(a,r,m),mu(a,r,m))},enqueueReplaceState:function(r,a,h){r=r._reactInternals;var m=Vr(),T=ro(m);T.tag=1,T.payload=a,h!=null&&(T.callback=h),a=so(r,T,m),a!==null&&(Ur(a,r,m),mu(a,r,m))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var h=Vr(),m=ro(h);m.tag=2,a!=null&&(m.callback=a),a=so(r,m,h),a!==null&&(Ur(a,r,h),mu(a,r,h))}};function q2(r,a,h,m,T,v,M){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,v,M):a.prototype&&a.prototype.isPureReactComponent?!d(h,m)||!d(T,v):!0}function Y2(r,a,h,m){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,m),a.state!==r&&w1.enqueueReplaceState(a,a.state,null)}function gl(r,a){var h=a;if("ref"in a){h={};for(var m in a)m!=="ref"&&(h[m]=a[m])}if(r=r.defaultProps){h===a&&(h=_({},h));for(var T in r)h[T]===void 0&&(h[T]=r[T])}return h}var Ef=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function X2(r){Ef(r)}function W2(r){console.error(r)}function K2(r){Ef(r)}function Af(r,a){try{var h=r.onUncaughtError;h(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function Q2(r,a,h){try{var m=r.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function T1(r,a,h){return h=ro(h),h.tag=3,h.payload={element:null},h.callback=function(){Af(r,a)},h}function Z2(r){return r=ro(r),r.tag=3,r}function J2(r,a,h,m){var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var v=m.value;r.payload=function(){return T(v)},r.callback=function(){Q2(a,h,m)}}var M=h.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(r.callback=function(){Q2(a,h,m),typeof T!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var B=m.stack;this.componentDidCatch(m.value,{componentStack:B!==null?B:""})})}function bI(r,a,h,m,T){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=h.alternate,a!==null&&uu(a,h,T,!0),h=ts.current,h!==null){switch(h.tag){case 13:return js===null?Y1():h.alternate===null&&jn===0&&(jn=3),h.flags&=-257,h.flags|=65536,h.lanes=T,m===Z0?h.flags|=16384:(a=h.updateQueue,a===null?h.updateQueue=new Set([m]):a.add(m),W1(r,m,T)),!1;case 22:return h.flags|=65536,m===Z0?h.flags|=16384:(a=h.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=a):(h=a.retryQueue,h===null?a.retryQueue=new Set([m]):h.add(m)),W1(r,m,T)),!1}throw Error(i(435,h.tag))}return W1(r,m,T),Y1(),!1}if(Qe)return a=ts.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=T,m!==G0&&(r=Error(i(422),{cause:m}),cu(Qr(r,h)))):(m!==G0&&(a=Error(i(423),{cause:m}),cu(Qr(a,h))),r=r.current.alternate,r.flags|=65536,T&=-T,r.lanes|=T,m=Qr(m,h),T=T1(r.stateNode,m,T),t1(r,T),jn!==4&&(jn=2)),!1;var v=Error(i(520),{cause:m});if(v=Qr(v,h),Nu===null?Nu=[v]:Nu.push(v),jn!==4&&(jn=2),a===null)return!0;m=Qr(m,h),h=a;do{switch(h.tag){case 3:return h.flags|=65536,r=T&-T,h.lanes|=r,r=T1(h.stateNode,m,r),t1(h,r),!1;case 1:if(a=h.type,v=h.stateNode,(h.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(mo===null||!mo.has(v))))return h.flags|=65536,T&=-T,h.lanes|=T,T=Z2(T),J2(T,r,h,m),t1(h,T),!1}h=h.return}while(h!==null);return!1}var $2=Error(i(461)),xi=!1;function Ni(r,a,h,m){a.child=r===null?H2(a,null,h,m):cc(a,r.child,h,m)}function tE(r,a,h,m,T){h=h.render;var v=a.ref;if("ref"in m){var M={};for(var B in m)B!=="ref"&&(M[B]=m[B])}else M=m;return hl(a),m=s1(r,a,h,M,v,T),B=a1(),r!==null&&!xi?(o1(r,a,T),Na(r,a,T)):(Qe&&B&&j0(a),a.flags|=1,Ni(r,a,m,T),a.child)}function eE(r,a,h,m,T){if(r===null){var v=h.type;return typeof v=="function"&&!U0(v)&&v.defaultProps===void 0&&h.compare===null?(a.tag=15,a.type=v,nE(r,a,v,m,T)):(r=Zh(h.type,null,m,a,a.mode,T),r.ref=a.ref,r.return=a,a.child=r)}if(v=r.child,!N1(r,T)){var M=v.memoizedProps;if(h=h.compare,h=h!==null?h:d,h(M,m)&&r.ref===a.ref)return Na(r,a,T)}return a.flags|=1,r=_a(v,m),r.ref=a.ref,r.return=a,a.child=r}function nE(r,a,h,m,T){if(r!==null){var v=r.memoizedProps;if(d(v,m)&&r.ref===a.ref)if(xi=!1,a.pendingProps=m=v,N1(r,T))(r.flags&131072)!==0&&(xi=!0);else return a.lanes=r.lanes,Na(r,a,T)}return _1(r,a,h,m,T)}function iE(r,a,h){var m=a.pendingProps,T=m.children,v=r!==null?r.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=v!==null?v.baseLanes|h:h,r!==null){for(T=a.child=r.child,v=0;T!==null;)v=v|T.lanes|T.childLanes,T=T.sibling;a.childLanes=v&~m}else a.childLanes=0,a.child=null;return rE(r,a,m,h)}if((h&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&nf(a,v!==null?v.cachePool:null),v!==null?n2(a,v):n1(),G2(a);else return a.lanes=a.childLanes=536870912,rE(r,a,v!==null?v.baseLanes|h:h,h)}else v!==null?(nf(a,v.cachePool),n2(a,v),lo(),a.memoizedState=null):(r!==null&&nf(a,null),n1(),lo());return Ni(r,a,T,h),a.child}function rE(r,a,h,m){var T=Q0();return T=T===null?null:{parent:hi._currentValue,pool:T},a.memoizedState={baseLanes:h,cachePool:T},r!==null&&nf(a,null),n1(),G2(a),r!==null&&uu(r,a,m,!0),null}function xf(r,a){var h=a.ref;if(h===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(r===null||r.ref!==h)&&(a.flags|=4194816)}}function _1(r,a,h,m,T){return hl(a),h=s1(r,a,h,m,void 0,T),m=a1(),r!==null&&!xi?(o1(r,a,T),Na(r,a,T)):(Qe&&m&&j0(a),a.flags|=1,Ni(r,a,h,T),a.child)}function sE(r,a,h,m,T,v){return hl(a),a.updateQueue=null,h=r2(a,m,h,T),i2(r),m=a1(),r!==null&&!xi?(o1(r,a,v),Na(r,a,v)):(Qe&&m&&j0(a),a.flags|=1,Ni(r,a,h,v),a.child)}function aE(r,a,h,m,T){if(hl(a),a.stateNode===null){var v=$l,M=h.contextType;typeof M=="object"&&M!==null&&(v=qi(M)),v=new h(m,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=w1,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=m,v.state=a.memoizedState,v.refs={},J0(a),M=h.contextType,v.context=typeof M=="object"&&M!==null?qi(M):$l,v.state=a.memoizedState,M=h.getDerivedStateFromProps,typeof M=="function"&&(x1(a,h,M,m),v.state=a.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(M=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),M!==v.state&&w1.enqueueReplaceState(v,v.state,null),yu(a,m,v,T),pu(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(r===null){v=a.stateNode;var B=a.memoizedProps,Q=gl(h,B);v.props=Q;var ft=v.context,_t=h.contextType;M=$l,typeof _t=="object"&&_t!==null&&(M=qi(_t));var bt=h.getDerivedStateFromProps;_t=typeof bt=="function"||typeof v.getSnapshotBeforeUpdate=="function",B=a.pendingProps!==B,_t||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(B||ft!==M)&&Y2(a,v,m,M),io=!1;var dt=a.memoizedState;v.state=dt,yu(a,m,v,T),pu(),ft=a.memoizedState,B||dt!==ft||io?(typeof bt=="function"&&(x1(a,h,bt,m),ft=a.memoizedState),(Q=io||q2(a,h,Q,m,dt,ft,M))?(_t||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=ft),v.props=m,v.state=ft,v.context=M,m=Q):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{v=a.stateNode,$0(r,a),M=a.memoizedProps,_t=gl(h,M),v.props=_t,bt=a.pendingProps,dt=v.context,ft=h.contextType,Q=$l,typeof ft=="object"&&ft!==null&&(Q=qi(ft)),B=h.getDerivedStateFromProps,(ft=typeof B=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M!==bt||dt!==Q)&&Y2(a,v,m,Q),io=!1,dt=a.memoizedState,v.state=dt,yu(a,m,v,T),pu();var pt=a.memoizedState;M!==bt||dt!==pt||io||r!==null&&r.dependencies!==null&&tf(r.dependencies)?(typeof B=="function"&&(x1(a,h,B,m),pt=a.memoizedState),(_t=io||q2(a,h,_t,m,dt,pt,Q)||r!==null&&r.dependencies!==null&&tf(r.dependencies))?(ft||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(m,pt,Q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(m,pt,Q)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||M===r.memoizedProps&&dt===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&dt===r.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=pt),v.props=m,v.state=pt,v.context=Q,m=_t):(typeof v.componentDidUpdate!="function"||M===r.memoizedProps&&dt===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||M===r.memoizedProps&&dt===r.memoizedState||(a.flags|=1024),m=!1)}return v=m,xf(r,a),m=(a.flags&128)!==0,v||m?(v=a.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,r!==null&&m?(a.child=cc(a,r.child,null,T),a.child=cc(a,null,h,T)):Ni(r,a,h,T),a.memoizedState=v.state,r=a.child):r=Na(r,a,T),r}function oE(r,a,h,m){return lu(),a.flags|=256,Ni(r,a,h,m),a.child}var C1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function v1(r){return{baseLanes:r,cachePool:Wy()}}function S1(r,a,h){return r=r!==null?r.childLanes&~h:0,a&&(r|=es),r}function lE(r,a,h){var m=a.pendingProps,T=!1,v=(a.flags&128)!==0,M;if((M=v)||(M=r!==null&&r.memoizedState===null?!1:(fi.current&2)!==0),M&&(T=!0,a.flags&=-129),M=(a.flags&32)!==0,a.flags&=-33,r===null){if(Qe){if(T?oo(a):lo(),Qe){var B=zn,Q;if(Q=B){t:{for(Q=B,B=zs;Q.nodeType!==8;){if(!B){B=null;break t}if(Q=Ts(Q.nextSibling),Q===null){B=null;break t}}B=Q}B!==null?(a.memoizedState={dehydrated:B,treeContext:al!==null?{id:Ca,overflow:va}:null,retryLane:536870912,hydrationErrors:null},Q=Pr(18,null,null,0),Q.stateNode=B,Q.return=a,a.child=Q,rr=a,zn=null,Q=!0):Q=!1}Q||cl(a)}if(B=a.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return cg(B)?a.lanes=32:a.lanes=536870912,null;Ra(a)}return B=m.children,m=m.fallback,T?(lo(),T=a.mode,B=wf({mode:"hidden",children:B},T),m=sl(m,T,h,null),B.return=a,m.return=a,B.sibling=m,a.child=B,T=a.child,T.memoizedState=v1(h),T.childLanes=S1(r,M,h),a.memoizedState=C1,m):(oo(a),b1(a,B))}if(Q=r.memoizedState,Q!==null&&(B=Q.dehydrated,B!==null)){if(v)a.flags&256?(oo(a),a.flags&=-257,a=I1(r,a,h)):a.memoizedState!==null?(lo(),a.child=r.child,a.flags|=128,a=null):(lo(),T=m.fallback,B=a.mode,m=wf({mode:"visible",children:m.children},B),T=sl(T,B,h,null),T.flags|=2,m.return=a,T.return=a,m.sibling=T,a.child=m,cc(a,r.child,null,h),m=a.child,m.memoizedState=v1(h),m.childLanes=S1(r,M,h),a.memoizedState=C1,a=T);else if(oo(a),cg(B)){if(M=B.nextSibling&&B.nextSibling.dataset,M)var ft=M.dgst;M=ft,m=Error(i(419)),m.stack="",m.digest=M,cu({value:m,source:null,stack:null}),a=I1(r,a,h)}else if(xi||uu(r,a,h,!1),M=(h&r.childLanes)!==0,xi||M){if(M=mn,M!==null&&(m=h&-h,m=(m&42)!==0?1:ha(m),m=(m&(M.suspendedLanes|h))!==0?0:m,m!==0&&m!==Q.retryLane))throw Q.retryLane=m,Jl(r,m),Ur(M,r,m),$2;B.data==="$?"||Y1(),a=I1(r,a,h)}else B.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=Q.treeContext,zn=Ts(B.nextSibling),rr=a,Qe=!0,ll=null,zs=!1,r!==null&&(Jr[$r++]=Ca,Jr[$r++]=va,Jr[$r++]=al,Ca=r.id,va=r.overflow,al=a),a=b1(a,m.children),a.flags|=4096);return a}return T?(lo(),T=m.fallback,B=a.mode,Q=r.child,ft=Q.sibling,m=_a(Q,{mode:"hidden",children:m.children}),m.subtreeFlags=Q.subtreeFlags&65011712,ft!==null?T=_a(ft,T):(T=sl(T,B,h,null),T.flags|=2),T.return=a,m.return=a,m.sibling=T,a.child=m,m=T,T=a.child,B=r.child.memoizedState,B===null?B=v1(h):(Q=B.cachePool,Q!==null?(ft=hi._currentValue,Q=Q.parent!==ft?{parent:ft,pool:ft}:Q):Q=Wy(),B={baseLanes:B.baseLanes|h,cachePool:Q}),T.memoizedState=B,T.childLanes=S1(r,M,h),a.memoizedState=C1,m):(oo(a),h=r.child,r=h.sibling,h=_a(h,{mode:"visible",children:m.children}),h.return=a,h.sibling=null,r!==null&&(M=a.deletions,M===null?(a.deletions=[r],a.flags|=16):M.push(r)),a.child=h,a.memoizedState=null,h)}function b1(r,a){return a=wf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function wf(r,a){return r=Pr(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function I1(r,a,h){return cc(a,r.child,null,h),r=b1(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function cE(r,a,h){r.lanes|=a;var m=r.alternate;m!==null&&(m.lanes|=a),Y0(r.return,a,h)}function R1(r,a,h,m,T){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:T}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=m,v.tail=h,v.tailMode=T)}function uE(r,a,h){var m=a.pendingProps,T=m.revealOrder,v=m.tail;if(Ni(r,a,m.children,h),m=fi.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&cE(r,h,a);else if(r.tag===19)cE(r,h,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}switch(Vt(fi,m),T){case"forwards":for(h=a.child,T=null;h!==null;)r=h.alternate,r!==null&&yf(r)===null&&(T=h),h=h.sibling;h=T,h===null?(T=a.child,a.child=null):(T=h.sibling,h.sibling=null),R1(a,!1,T,h,v);break;case"backwards":for(h=null,T=a.child,a.child=null;T!==null;){if(r=T.alternate,r!==null&&yf(r)===null){a.child=T;break}r=T.sibling,T.sibling=h,h=T,T=r}R1(a,!0,h,null,v);break;case"together":R1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Na(r,a,h){if(r!==null&&(a.dependencies=r.dependencies),go|=a.lanes,(h&a.childLanes)===0)if(r!==null){if(uu(r,a,h,!1),(h&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,h=_a(r,r.pendingProps),a.child=h,h.return=a;r.sibling!==null;)r=r.sibling,h=h.sibling=_a(r,r.pendingProps),h.return=a;h.sibling=null}return a.child}function N1(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&tf(r)))}function II(r,a,h){switch(a.tag){case 3:ce(a,a.stateNode.containerInfo),no(a,hi,r.memoizedState.cache),lu();break;case 27:case 5:us(a);break;case 4:ce(a,a.stateNode.containerInfo);break;case 10:no(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(oo(a),a.flags|=128,null):(h&a.child.childLanes)!==0?lE(r,a,h):(oo(a),r=Na(r,a,h),r!==null?r.sibling:null);oo(a);break;case 19:var T=(r.flags&128)!==0;if(m=(h&a.childLanes)!==0,m||(uu(r,a,h,!1),m=(h&a.childLanes)!==0),T){if(m)return uE(r,a,h);a.flags|=128}if(T=a.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Vt(fi,fi.current),m)break;return null;case 22:case 23:return a.lanes=0,iE(r,a,h);case 24:no(a,hi,r.memoizedState.cache)}return Na(r,a,h)}function hE(r,a,h){if(r!==null)if(r.memoizedProps!==a.pendingProps)xi=!0;else{if(!N1(r,h)&&(a.flags&128)===0)return xi=!1,II(r,a,h);xi=(r.flags&131072)!==0}else xi=!1,Qe&&(a.flags&1048576)!==0&&zy(a,$h,a.index);switch(a.lanes=0,a.tag){case 16:t:{r=a.pendingProps;var m=a.elementType,T=m._init;if(m=T(m._payload),a.type=m,typeof m=="function")U0(m)?(r=gl(m,r),a.tag=1,a=aE(null,a,m,r,h)):(a.tag=0,a=_1(null,a,m,r,h));else{if(m!=null){if(T=m.$$typeof,T===yt){a.tag=11,a=tE(null,a,m,r,h);break t}else if(T===H){a.tag=14,a=eE(null,a,m,r,h);break t}}throw a=Jt(m)||m,Error(i(306,a,""))}}return a;case 0:return _1(r,a,a.type,a.pendingProps,h);case 1:return m=a.type,T=gl(m,a.pendingProps),aE(r,a,m,T,h);case 3:t:{if(ce(a,a.stateNode.containerInfo),r===null)throw Error(i(387));m=a.pendingProps;var v=a.memoizedState;T=v.element,$0(r,a),yu(a,m,null,h);var M=a.memoizedState;if(m=M.cache,no(a,hi,m),m!==v.cache&&X0(a,[hi],h,!0),pu(),m=M.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:M.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=oE(r,a,m,h);break t}else if(m!==T){T=Qr(Error(i(424)),a),cu(T),a=oE(r,a,m,h);break t}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(zn=Ts(r.firstChild),rr=a,Qe=!0,ll=null,zs=!0,h=H2(a,null,m,h),a.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(lu(),m===T){a=Na(r,a,h);break t}Ni(r,a,m,h)}a=a.child}return a;case 26:return xf(r,a),r===null?(h=mA(a.type,null,a.pendingProps,null))?a.memoizedState=h:Qe||(h=a.type,r=a.pendingProps,m=Lf(Mt.current).createElement(h),m[Rn]=a,m[pn]=r,Mi(m,h,r),ze(m),a.stateNode=m):a.memoizedState=mA(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return us(a),r===null&&Qe&&(m=a.stateNode=fA(a.type,a.pendingProps,Mt.current),rr=a,zs=!0,T=zn,Eo(a.type)?(ug=T,zn=Ts(m.firstChild)):zn=T),Ni(r,a,a.pendingProps.children,h),xf(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Qe&&((T=m=zn)&&(m=n3(m,a.type,a.pendingProps,zs),m!==null?(a.stateNode=m,rr=a,zn=Ts(m.firstChild),zs=!1,T=!0):T=!1),T||cl(a)),us(a),T=a.type,v=a.pendingProps,M=r!==null?r.memoizedProps:null,m=v.children,ag(T,v)?m=null:M!==null&&ag(T,M)&&(a.flags|=32),a.memoizedState!==null&&(T=s1(r,a,xI,null,null,h),Uu._currentValue=T),xf(r,a),Ni(r,a,m,h),a.child;case 6:return r===null&&Qe&&((r=h=zn)&&(h=i3(h,a.pendingProps,zs),h!==null?(a.stateNode=h,rr=a,zn=null,r=!0):r=!1),r||cl(a)),null;case 13:return lE(r,a,h);case 4:return ce(a,a.stateNode.containerInfo),m=a.pendingProps,r===null?a.child=cc(a,null,m,h):Ni(r,a,m,h),a.child;case 11:return tE(r,a,a.type,a.pendingProps,h);case 7:return Ni(r,a,a.pendingProps,h),a.child;case 8:return Ni(r,a,a.pendingProps.children,h),a.child;case 12:return Ni(r,a,a.pendingProps.children,h),a.child;case 10:return m=a.pendingProps,no(a,a.type,m.value),Ni(r,a,m.children,h),a.child;case 9:return T=a.type._context,m=a.pendingProps.children,hl(a),T=qi(T),m=m(T),a.flags|=1,Ni(r,a,m,h),a.child;case 14:return eE(r,a,a.type,a.pendingProps,h);case 15:return nE(r,a,a.type,a.pendingProps,h);case 19:return uE(r,a,h);case 31:return m=a.pendingProps,h=a.mode,m={mode:m.mode,children:m.children},r===null?(h=wf(m,h),h.ref=a.ref,a.child=h,h.return=a,a=h):(h=_a(r.child,m),h.ref=a.ref,a.child=h,h.return=a,a=h),a;case 22:return iE(r,a,h);case 24:return hl(a),m=qi(hi),r===null?(T=Q0(),T===null&&(T=mn,v=W0(),T.pooledCache=v,v.refCount++,v!==null&&(T.pooledCacheLanes|=h),T=v),a.memoizedState={parent:m,cache:T},J0(a),no(a,hi,T)):((r.lanes&h)!==0&&($0(r,a),yu(a,null,null,h),pu()),T=r.memoizedState,v=a.memoizedState,T.parent!==m?(T={parent:m,cache:m},a.memoizedState=T,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=T),no(a,hi,m)):(m=v.cache,no(a,hi,m),m!==T.cache&&X0(a,[hi],h,!0))),Ni(r,a,a.pendingProps.children,h),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Da(r){r.flags|=4}function fE(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!xA(a)){if(a=ts.current,a!==null&&((ke&4194048)===ke?js!==null:(ke&62914560)!==ke&&(ke&536870912)===0||a!==js))throw gu=Z0,Ky;r.flags|=8192}}function Tf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?gs():536870912,r.lanes|=a,dc|=a)}function Cu(r,a){if(!Qe)switch(r.tailMode){case"hidden":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Mn(r){var a=r.alternate!==null&&r.alternate.child===r.child,h=0,m=0;if(a)for(var T=r.child;T!==null;)h|=T.lanes|T.childLanes,m|=T.subtreeFlags&65011712,m|=T.flags&65011712,T.return=r,T=T.sibling;else for(T=r.child;T!==null;)h|=T.lanes|T.childLanes,m|=T.subtreeFlags,m|=T.flags,T.return=r,T=T.sibling;return r.subtreeFlags|=m,r.childLanes=h,a}function RI(r,a,h){var m=a.pendingProps;switch(H0(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(a),null;case 1:return Mn(a),null;case 3:return h=a.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),ba(hi),vi(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(ou(a)?Da(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gy())),Mn(a),null;case 26:return h=a.memoizedState,r===null?(Da(a),h!==null?(Mn(a),fE(a,h)):(Mn(a),a.flags&=-16777217)):h?h!==r.memoizedState?(Da(a),Mn(a),fE(a,h)):(Mn(a),a.flags&=-16777217):(r.memoizedProps!==m&&Da(a),Mn(a),a.flags&=-16777217),null;case 27:Xn(a),h=Mt.current;var T=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==m&&Da(a);else{if(!m){if(a.stateNode===null)throw Error(i(166));return Mn(a),null}r=zt.current,ou(a)?jy(a):(r=fA(T,m,h),a.stateNode=r,Da(a))}return Mn(a),null;case 5:if(Xn(a),h=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==m&&Da(a);else{if(!m){if(a.stateNode===null)throw Error(i(166));return Mn(a),null}if(r=zt.current,ou(a))jy(a);else{switch(T=Lf(Mt.current),r){case 1:r=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:r=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":r=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":r=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?r.multiple=!0:m.size&&(r.size=m.size);break;default:r=typeof m.is=="string"?T.createElement(h,{is:m.is}):T.createElement(h)}}r[Rn]=a,r[pn]=m;t:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)r.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break t;for(;T.sibling===null;){if(T.return===null||T.return===a)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=r;t:switch(Mi(r,h,m),h){case"button":case"input":case"select":case"textarea":r=!!m.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Da(a)}}return Mn(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==m&&Da(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(i(166));if(r=Mt.current,ou(a)){if(r=a.stateNode,h=a.memoizedProps,m=null,T=rr,T!==null)switch(T.tag){case 27:case 5:m=T.memoizedProps}r[Rn]=a,r=!!(r.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||sA(r.nodeValue,h)),r||cl(a)}else r=Lf(r).createTextNode(m),r[Rn]=a,a.stateNode=r}return Mn(a),null;case 13:if(m=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(T=ou(a),m!==null&&m.dehydrated!==null){if(r===null){if(!T)throw Error(i(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));T[Rn]=a}else lu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Mn(a),T=!1}else T=Gy(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=T),T=!0;if(!T)return a.flags&256?(Ra(a),a):(Ra(a),null)}if(Ra(a),(a.flags&128)!==0)return a.lanes=h,a;if(h=m!==null,r=r!==null&&r.memoizedState!==null,h){m=a.child,T=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(T=m.alternate.memoizedState.cachePool.pool);var v=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(v=m.memoizedState.cachePool.pool),v!==T&&(m.flags|=2048)}return h!==r&&h&&(a.child.flags|=8192),Tf(a,a.updateQueue),Mn(a),null;case 4:return vi(),r===null&&eg(a.stateNode.containerInfo),Mn(a),null;case 10:return ba(a.type),Mn(a),null;case 19:if(Bt(fi),T=a.memoizedState,T===null)return Mn(a),null;if(m=(a.flags&128)!==0,v=T.rendering,v===null)if(m)Cu(T,!1);else{if(jn!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(v=yf(r),v!==null){for(a.flags|=128,Cu(T,!1),r=v.updateQueue,a.updateQueue=r,Tf(a,r),a.subtreeFlags=0,r=h,h=a.child;h!==null;)Fy(h,r),h=h.sibling;return Vt(fi,fi.current&1|2),a.child}r=r.sibling}T.tail!==null&&Fe()>vf&&(a.flags|=128,m=!0,Cu(T,!1),a.lanes=4194304)}else{if(!m)if(r=yf(v),r!==null){if(a.flags|=128,m=!0,r=r.updateQueue,a.updateQueue=r,Tf(a,r),Cu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!v.alternate&&!Qe)return Mn(a),null}else 2*Fe()-T.renderingStartTime>vf&&h!==536870912&&(a.flags|=128,m=!0,Cu(T,!1),a.lanes=4194304);T.isBackwards?(v.sibling=a.child,a.child=v):(r=T.last,r!==null?r.sibling=v:a.child=v,T.last=v)}return T.tail!==null?(a=T.tail,T.rendering=a,T.tail=a.sibling,T.renderingStartTime=Fe(),a.sibling=null,r=fi.current,Vt(fi,m?r&1|2:r&1),a):(Mn(a),null);case 22:case 23:return Ra(a),i1(),m=a.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(h&536870912)!==0&&(a.flags&128)===0&&(Mn(a),a.subtreeFlags&6&&(a.flags|=8192)):Mn(a),h=a.updateQueue,h!==null&&Tf(a,h.retryQueue),h=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==h&&(a.flags|=2048),r!==null&&Bt(fl),null;case 24:return h=null,r!==null&&(h=r.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),ba(hi),Mn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function NI(r,a){switch(H0(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return ba(hi),vi(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Xn(a),null;case 13:if(Ra(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));lu()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Bt(fi),null;case 4:return vi(),null;case 10:return ba(a.type),null;case 22:case 23:return Ra(a),i1(),r!==null&&Bt(fl),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return ba(hi),null;case 25:return null;default:return null}}function dE(r,a){switch(H0(a),a.tag){case 3:ba(hi),vi();break;case 26:case 27:case 5:Xn(a);break;case 4:vi();break;case 13:Ra(a);break;case 19:Bt(fi);break;case 10:ba(a.type);break;case 22:case 23:Ra(a),i1(),r!==null&&Bt(fl);break;case 24:ba(hi)}}function vu(r,a){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var T=m.next;h=T;do{if((h.tag&r)===r){m=void 0;var v=h.create,M=h.inst;m=v(),M.destroy=m}h=h.next}while(h!==T)}}catch(B){fn(a,a.return,B)}}function co(r,a,h){try{var m=a.updateQueue,T=m!==null?m.lastEffect:null;if(T!==null){var v=T.next;m=v;do{if((m.tag&r)===r){var M=m.inst,B=M.destroy;if(B!==void 0){M.destroy=void 0,T=a;var Q=h,ft=B;try{ft()}catch(_t){fn(T,Q,_t)}}}m=m.next}while(m!==v)}}catch(_t){fn(a,a.return,_t)}}function gE(r){var a=r.updateQueue;if(a!==null){var h=r.stateNode;try{e2(a,h)}catch(m){fn(r,r.return,m)}}}function mE(r,a,h){h.props=gl(r.type,r.memoizedProps),h.state=r.memoizedState;try{h.componentWillUnmount()}catch(m){fn(r,a,m)}}function Su(r,a){try{var h=r.ref;if(h!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof h=="function"?r.refCleanup=h(m):h.current=m}}catch(T){fn(r,a,T)}}function Hs(r,a){var h=r.ref,m=r.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(T){fn(r,a,T)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(T){fn(r,a,T)}else h.current=null}function pE(r){var a=r.type,h=r.memoizedProps,m=r.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break t;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(T){fn(r,r.return,T)}}function D1(r,a,h){try{var m=r.stateNode;ZI(m,r.type,h,a),m[pn]=a}catch(T){fn(r,r.return,T)}}function yE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Eo(r.type)||r.tag===4}function M1(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||yE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Eo(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function O1(r,a,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,a?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(r,a):(a=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,a.appendChild(r),h=h._reactRootContainer,h!=null||a.onclick!==null||(a.onclick=Pf));else if(m!==4&&(m===27&&Eo(r.type)&&(h=r.stateNode,a=null),r=r.child,r!==null))for(O1(r,a,h),r=r.sibling;r!==null;)O1(r,a,h),r=r.sibling}function _f(r,a,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,a?h.insertBefore(r,a):h.appendChild(r);else if(m!==4&&(m===27&&Eo(r.type)&&(h=r.stateNode),r=r.child,r!==null))for(_f(r,a,h),r=r.sibling;r!==null;)_f(r,a,h),r=r.sibling}function EE(r){var a=r.stateNode,h=r.memoizedProps;try{for(var m=r.type,T=a.attributes;T.length;)a.removeAttributeNode(T[0]);Mi(a,m,h),a[Rn]=r,a[pn]=h}catch(v){fn(r,r.return,v)}}var Ma=!1,Jn=!1,P1=!1,AE=typeof WeakSet=="function"?WeakSet:Set,wi=null;function DI(r,a){if(r=r.containerInfo,rg=zf,r=S(r),N(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else t:{h=(h=r.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var T=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{h.nodeType,v.nodeType}catch{h=null;break t}var M=0,B=-1,Q=-1,ft=0,_t=0,bt=r,dt=null;e:for(;;){for(var pt;bt!==h||T!==0&&bt.nodeType!==3||(B=M+T),bt!==v||m!==0&&bt.nodeType!==3||(Q=M+m),bt.nodeType===3&&(M+=bt.nodeValue.length),(pt=bt.firstChild)!==null;)dt=bt,bt=pt;for(;;){if(bt===r)break e;if(dt===h&&++ft===T&&(B=M),dt===v&&++_t===m&&(Q=M),(pt=bt.nextSibling)!==null)break;bt=dt,dt=bt.parentNode}bt=pt}h=B===-1||Q===-1?null:{start:B,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(sg={focusedElem:r,selectionRange:h},zf=!1,wi=a;wi!==null;)if(a=wi,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,wi=r;else for(;wi!==null;){switch(a=wi,v=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,h=a,T=v.memoizedProps,v=v.memoizedState,m=h.stateNode;try{var oe=gl(h.type,T,h.elementType===h.type);r=m.getSnapshotBeforeUpdate(oe,v),m.__reactInternalSnapshotBeforeUpdate=r}catch(ee){fn(h,h.return,ee)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,h=r.nodeType,h===9)lg(r);else if(h===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":lg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,wi=r;break}wi=a.return}}function xE(r,a,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:uo(r,h),m&4&&vu(5,h);break;case 1:if(uo(r,h),m&4)if(r=h.stateNode,a===null)try{r.componentDidMount()}catch(M){fn(h,h.return,M)}else{var T=gl(h.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(T,a,r.__reactInternalSnapshotBeforeUpdate)}catch(M){fn(h,h.return,M)}}m&64&&gE(h),m&512&&Su(h,h.return);break;case 3:if(uo(r,h),m&64&&(r=h.updateQueue,r!==null)){if(a=null,h.child!==null)switch(h.child.tag){case 27:case 5:a=h.child.stateNode;break;case 1:a=h.child.stateNode}try{e2(r,a)}catch(M){fn(h,h.return,M)}}break;case 27:a===null&&m&4&&EE(h);case 26:case 5:uo(r,h),a===null&&m&4&&pE(h),m&512&&Su(h,h.return);break;case 12:uo(r,h);break;case 13:uo(r,h),m&4&&_E(r,h),m&64&&(r=h.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(h=FI.bind(null,h),r3(r,h))));break;case 22:if(m=h.memoizedState!==null||Ma,!m){a=a!==null&&a.memoizedState!==null||Jn,T=Ma;var v=Jn;Ma=m,(Jn=a)&&!v?ho(r,h,(h.subtreeFlags&8772)!==0):uo(r,h),Ma=T,Jn=v}break;case 30:break;default:uo(r,h)}}function wE(r){var a=r.alternate;a!==null&&(r.alternate=null,wE(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Ns(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Sn=null,fr=!1;function Oa(r,a,h){for(h=h.child;h!==null;)TE(r,a,h),h=h.sibling}function TE(r,a,h){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(ei,h)}catch{}switch(h.tag){case 26:Jn||Hs(h,a),Oa(r,a,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Jn||Hs(h,a);var m=Sn,T=fr;Eo(h.type)&&(Sn=h.stateNode,fr=!1),Oa(r,a,h),Lu(h.stateNode),Sn=m,fr=T;break;case 5:Jn||Hs(h,a);case 6:if(m=Sn,T=fr,Sn=null,Oa(r,a,h),Sn=m,fr=T,Sn!==null)if(fr)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(h.stateNode)}catch(v){fn(h,a,v)}else try{Sn.removeChild(h.stateNode)}catch(v){fn(h,a,v)}break;case 18:Sn!==null&&(fr?(r=Sn,uA(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,h.stateNode),Hu(r)):uA(Sn,h.stateNode));break;case 4:m=Sn,T=fr,Sn=h.stateNode.containerInfo,fr=!0,Oa(r,a,h),Sn=m,fr=T;break;case 0:case 11:case 14:case 15:Jn||co(2,h,a),Jn||co(4,h,a),Oa(r,a,h);break;case 1:Jn||(Hs(h,a),m=h.stateNode,typeof m.componentWillUnmount=="function"&&mE(h,a,m)),Oa(r,a,h);break;case 21:Oa(r,a,h);break;case 22:Jn=(m=Jn)||h.memoizedState!==null,Oa(r,a,h),Jn=m;break;default:Oa(r,a,h)}}function _E(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Hu(r)}catch(h){fn(a,a.return,h)}}function MI(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new AE),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new AE),a;default:throw Error(i(435,r.tag))}}function L1(r,a){var h=MI(r);a.forEach(function(m){var T=zI.bind(null,r,m);h.has(m)||(h.add(m),m.then(T,T))})}function Lr(r,a){var h=a.deletions;if(h!==null)for(var m=0;m<h.length;m++){var T=h[m],v=r,M=a,B=M;t:for(;B!==null;){switch(B.tag){case 27:if(Eo(B.type)){Sn=B.stateNode,fr=!1;break t}break;case 5:Sn=B.stateNode,fr=!1;break t;case 3:case 4:Sn=B.stateNode.containerInfo,fr=!0;break t}B=B.return}if(Sn===null)throw Error(i(160));TE(v,M,T),Sn=null,fr=!1,v=T.alternate,v!==null&&(v.return=null),T.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)CE(a,r),a=a.sibling}var ws=null;function CE(r,a){var h=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Lr(a,r),kr(r),m&4&&(co(3,r,r.return),vu(3,r),co(5,r,r.return));break;case 1:Lr(a,r),kr(r),m&512&&(Jn||h===null||Hs(h,h.return)),m&64&&Ma&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(h=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var T=ws;if(Lr(a,r),kr(r),m&512&&(Jn||h===null||Hs(h,h.return)),m&4){var v=h!==null?h.memoizedState:null;if(m=r.memoizedState,h===null)if(m===null)if(r.stateNode===null){t:{m=r.type,h=r.memoizedProps,T=T.ownerDocument||T;e:switch(m){case"title":v=T.getElementsByTagName("title")[0],(!v||v[$i]||v[Rn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=T.createElement(m),T.head.insertBefore(v,T.querySelector("head > title"))),Mi(v,m,h),v[Rn]=r,ze(v),m=v;break t;case"link":var M=EA("link","href",T).get(m+(h.href||""));if(M){for(var B=0;B<M.length;B++)if(v=M[B],v.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&v.getAttribute("rel")===(h.rel==null?null:h.rel)&&v.getAttribute("title")===(h.title==null?null:h.title)&&v.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){M.splice(B,1);break e}}v=T.createElement(m),Mi(v,m,h),T.head.appendChild(v);break;case"meta":if(M=EA("meta","content",T).get(m+(h.content||""))){for(B=0;B<M.length;B++)if(v=M[B],v.getAttribute("content")===(h.content==null?null:""+h.content)&&v.getAttribute("name")===(h.name==null?null:h.name)&&v.getAttribute("property")===(h.property==null?null:h.property)&&v.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&v.getAttribute("charset")===(h.charSet==null?null:h.charSet)){M.splice(B,1);break e}}v=T.createElement(m),Mi(v,m,h),T.head.appendChild(v);break;default:throw Error(i(468,m))}v[Rn]=r,ze(v),m=v}r.stateNode=m}else AA(T,r.type,r.stateNode);else r.stateNode=yA(T,m,r.memoizedProps);else v!==m?(v===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):v.count--,m===null?AA(T,r.type,r.stateNode):yA(T,m,r.memoizedProps)):m===null&&r.stateNode!==null&&D1(r,r.memoizedProps,h.memoizedProps)}break;case 27:Lr(a,r),kr(r),m&512&&(Jn||h===null||Hs(h,h.return)),h!==null&&m&4&&D1(r,r.memoizedProps,h.memoizedProps);break;case 5:if(Lr(a,r),kr(r),m&512&&(Jn||h===null||Hs(h,h.return)),r.flags&32){T=r.stateNode;try{An(T,"")}catch(pt){fn(r,r.return,pt)}}m&4&&r.stateNode!=null&&(T=r.memoizedProps,D1(r,T,h!==null?h.memoizedProps:T)),m&1024&&(P1=!0);break;case 6:if(Lr(a,r),kr(r),m&4){if(r.stateNode===null)throw Error(i(162));m=r.memoizedProps,h=r.stateNode;try{h.nodeValue=m}catch(pt){fn(r,r.return,pt)}}break;case 3:if(Vf=null,T=ws,ws=kf(a.containerInfo),Lr(a,r),ws=T,kr(r),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Hu(a.containerInfo)}catch(pt){fn(r,r.return,pt)}P1&&(P1=!1,vE(r));break;case 4:m=ws,ws=kf(r.stateNode.containerInfo),Lr(a,r),kr(r),ws=m;break;case 12:Lr(a,r),kr(r);break;case 13:Lr(a,r),kr(r),r.child.flags&8192&&r.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(z1=Fe()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,L1(r,m)));break;case 22:T=r.memoizedState!==null;var Q=h!==null&&h.memoizedState!==null,ft=Ma,_t=Jn;if(Ma=ft||T,Jn=_t||Q,Lr(a,r),Jn=_t,Ma=ft,kr(r),m&8192)t:for(a=r.stateNode,a._visibility=T?a._visibility&-2:a._visibility|1,T&&(h===null||Q||Ma||Jn||ml(r)),h=null,a=r;;){if(a.tag===5||a.tag===26){if(h===null){Q=h=a;try{if(v=Q.stateNode,T)M=v.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{B=Q.stateNode;var bt=Q.memoizedProps.style,dt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;B.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(pt){fn(Q,Q.return,pt)}}}else if(a.tag===6){if(h===null){Q=a;try{Q.stateNode.nodeValue=T?"":Q.memoizedProps}catch(pt){fn(Q,Q.return,pt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;h===a&&(h=null),a=a.return}h===a&&(h=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=r.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,L1(r,h))));break;case 19:Lr(a,r),kr(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,L1(r,m)));break;case 30:break;case 21:break;default:Lr(a,r),kr(r)}}function kr(r){var a=r.flags;if(a&2){try{for(var h,m=r.return;m!==null;){if(yE(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var T=h.stateNode,v=M1(r);_f(r,v,T);break;case 5:var M=h.stateNode;h.flags&32&&(An(M,""),h.flags&=-33);var B=M1(r);_f(r,B,M);break;case 3:case 4:var Q=h.stateNode.containerInfo,ft=M1(r);O1(r,ft,Q);break;default:throw Error(i(161))}}catch(_t){fn(r,r.return,_t)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function vE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;vE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function uo(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)xE(r,a.alternate,a),a=a.sibling}function ml(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:co(4,a,a.return),ml(a);break;case 1:Hs(a,a.return);var h=a.stateNode;typeof h.componentWillUnmount=="function"&&mE(a,a.return,h),ml(a);break;case 27:Lu(a.stateNode);case 26:case 5:Hs(a,a.return),ml(a);break;case 22:a.memoizedState===null&&ml(a);break;case 30:ml(a);break;default:ml(a)}r=r.sibling}}function ho(r,a,h){for(h=h&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,T=r,v=a,M=v.flags;switch(v.tag){case 0:case 11:case 15:ho(T,v,h),vu(4,v);break;case 1:if(ho(T,v,h),m=v,T=m.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ft){fn(m,m.return,ft)}if(m=v,T=m.updateQueue,T!==null){var B=m.stateNode;try{var Q=T.shared.hiddenCallbacks;if(Q!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Q.length;T++)t2(Q[T],B)}catch(ft){fn(m,m.return,ft)}}h&&M&64&&gE(v),Su(v,v.return);break;case 27:EE(v);case 26:case 5:ho(T,v,h),h&&m===null&&M&4&&pE(v),Su(v,v.return);break;case 12:ho(T,v,h);break;case 13:ho(T,v,h),h&&M&4&&_E(T,v);break;case 22:v.memoizedState===null&&ho(T,v,h),Su(v,v.return);break;case 30:break;default:ho(T,v,h)}a=a.sibling}}function k1(r,a){var h=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==h&&(r!=null&&r.refCount++,h!=null&&hu(h))}function B1(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&hu(r))}function Gs(r,a,h,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)SE(r,a,h,m),a=a.sibling}function SE(r,a,h,m){var T=a.flags;switch(a.tag){case 0:case 11:case 15:Gs(r,a,h,m),T&2048&&vu(9,a);break;case 1:Gs(r,a,h,m);break;case 3:Gs(r,a,h,m),T&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&hu(r)));break;case 12:if(T&2048){Gs(r,a,h,m),r=a.stateNode;try{var v=a.memoizedProps,M=v.id,B=v.onPostCommit;typeof B=="function"&&B(M,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Q){fn(a,a.return,Q)}}else Gs(r,a,h,m);break;case 13:Gs(r,a,h,m);break;case 23:break;case 22:v=a.stateNode,M=a.alternate,a.memoizedState!==null?v._visibility&2?Gs(r,a,h,m):bu(r,a):v._visibility&2?Gs(r,a,h,m):(v._visibility|=2,uc(r,a,h,m,(a.subtreeFlags&10256)!==0)),T&2048&&k1(M,a);break;case 24:Gs(r,a,h,m),T&2048&&B1(a.alternate,a);break;default:Gs(r,a,h,m)}}function uc(r,a,h,m,T){for(T=T&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=r,M=a,B=h,Q=m,ft=M.flags;switch(M.tag){case 0:case 11:case 15:uc(v,M,B,Q,T),vu(8,M);break;case 23:break;case 22:var _t=M.stateNode;M.memoizedState!==null?_t._visibility&2?uc(v,M,B,Q,T):bu(v,M):(_t._visibility|=2,uc(v,M,B,Q,T)),T&&ft&2048&&k1(M.alternate,M);break;case 24:uc(v,M,B,Q,T),T&&ft&2048&&B1(M.alternate,M);break;default:uc(v,M,B,Q,T)}a=a.sibling}}function bu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var h=r,m=a,T=m.flags;switch(m.tag){case 22:bu(h,m),T&2048&&k1(m.alternate,m);break;case 24:bu(h,m),T&2048&&B1(m.alternate,m);break;default:bu(h,m)}a=a.sibling}}var Iu=8192;function hc(r){if(r.subtreeFlags&Iu)for(r=r.child;r!==null;)bE(r),r=r.sibling}function bE(r){switch(r.tag){case 26:hc(r),r.flags&Iu&&r.memoizedState!==null&&y3(ws,r.memoizedState,r.memoizedProps);break;case 5:hc(r);break;case 3:case 4:var a=ws;ws=kf(r.stateNode.containerInfo),hc(r),ws=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=Iu,Iu=16777216,hc(r),Iu=a):hc(r));break;default:hc(r)}}function IE(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Ru(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var h=0;h<a.length;h++){var m=a[h];wi=m,NE(m,r)}IE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)RE(r),r=r.sibling}function RE(r){switch(r.tag){case 0:case 11:case 15:Ru(r),r.flags&2048&&co(9,r,r.return);break;case 3:Ru(r);break;case 12:Ru(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Cf(r)):Ru(r);break;default:Ru(r)}}function Cf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var h=0;h<a.length;h++){var m=a[h];wi=m,NE(m,r)}IE(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:co(8,a,a.return),Cf(a);break;case 22:h=a.stateNode,h._visibility&2&&(h._visibility&=-3,Cf(a));break;default:Cf(a)}r=r.sibling}}function NE(r,a){for(;wi!==null;){var h=wi;switch(h.tag){case 0:case 11:case 15:co(8,h,a);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:hu(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,wi=m;else t:for(h=r;wi!==null;){m=wi;var T=m.sibling,v=m.return;if(wE(m),m===h){wi=null;break t}if(T!==null){T.return=v,wi=T;break t}wi=v}}}var OI={getCacheForType:function(r){var a=qi(hi),h=a.data.get(r);return h===void 0&&(h=r(),a.data.set(r,h)),h}},PI=typeof WeakMap=="function"?WeakMap:Map,en=0,mn=null,be=null,ke=0,nn=0,Br=null,fo=!1,fc=!1,V1=!1,Pa=0,jn=0,go=0,pl=0,U1=0,es=0,dc=0,Nu=null,dr=null,F1=!1,z1=0,vf=1/0,Sf=null,mo=null,Di=0,po=null,gc=null,mc=0,j1=0,H1=null,DE=null,Du=0,G1=null;function Vr(){if((en&2)!==0&&ke!==0)return ke&-ke;if(Et.T!==null){var r=nc;return r!==0?r:Z1()}return Bi()}function ME(){es===0&&(es=(ke&536870912)===0||Qe?ua():536870912);var r=ts.current;return r!==null&&(r.flags|=32),es}function Ur(r,a,h){(r===mn&&(nn===2||nn===9)||r.cancelPendingCommit!==null)&&(pc(r,0),yo(r,ke,es,!1)),$e(r,h),((en&2)===0||r!==mn)&&(r===mn&&((en&2)===0&&(pl|=h),jn===4&&yo(r,ke,es,!1)),qs(r))}function OE(r,a,h){if((en&6)!==0)throw Error(i(327));var m=!h&&(a&124)===0&&(a&r.expiredLanes)===0||Ke(r,a),T=m?BI(r,a):X1(r,a,!0),v=m;do{if(T===0){fc&&!m&&yo(r,a,0,!1);break}else{if(h=r.current.alternate,v&&!LI(h)){T=X1(r,a,!1),v=!1;continue}if(T===2){if(v=a,r.errorRecoveryDisabledLanes&v)var M=0;else M=r.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){a=M;t:{var B=r;T=Nu;var Q=B.current.memoizedState.isDehydrated;if(Q&&(pc(B,M).flags|=256),M=X1(B,M,!1),M!==2){if(V1&&!Q){B.errorRecoveryDisabledLanes|=v,pl|=v,T=4;break t}v=dr,dr=T,v!==null&&(dr===null?dr=v:dr.push.apply(dr,v))}T=M}if(v=!1,T!==2)continue}}if(T===1){pc(r,0),yo(r,a,0,!0);break}t:{switch(m=r,v=T,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:yo(m,a,es,!fo);break t;case 2:dr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(T=z1+300-Fe(),10<T)){if(yo(m,a,es,!fo),Ae(m,0,!0)!==0)break t;m.timeoutHandle=lA(PE.bind(null,m,h,dr,Sf,F1,a,es,pl,dc,fo,v,2,-0,0),T);break t}PE(m,h,dr,Sf,F1,a,es,pl,dc,fo,v,0,-0,0)}}break}while(!0);qs(r)}function PE(r,a,h,m,T,v,M,B,Q,ft,_t,bt,dt,pt){if(r.timeoutHandle=-1,bt=a.subtreeFlags,(bt&8192||(bt&16785408)===16785408)&&(Vu={stylesheets:null,count:0,unsuspend:p3},bE(a),bt=E3(),bt!==null)){r.cancelPendingCommit=bt(zE.bind(null,r,a,v,h,m,T,M,B,Q,_t,1,dt,pt)),yo(r,v,M,!ft);return}zE(r,a,v,h,m,T,M,B,Q)}function LI(r){for(var a=r;;){var h=a.tag;if((h===0||h===11||h===15)&&a.flags&16384&&(h=a.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var T=h[m],v=T.getSnapshot;T=T.value;try{if(!f(v(),T))return!1}catch{return!1}}if(h=a.child,a.subtreeFlags&16384&&h!==null)h.return=a,a=h;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function yo(r,a,h,m){a&=~U1,a&=~pl,r.suspendedLanes|=a,r.pingedLanes&=~a,m&&(r.warmLanes|=a),m=r.expirationTimes;for(var T=a;0<T;){var v=31-Ye(T),M=1<<v;m[v]=-1,T&=~M}h!==0&&ms(r,h,a)}function bf(){return(en&6)===0?(Mu(0),!1):!0}function q1(){if(be!==null){if(nn===0)var r=be.return;else r=be,Sa=ul=null,l1(r),lc=null,Tu=0,r=be;for(;r!==null;)dE(r.alternate,r),r=r.return;be=null}}function pc(r,a){var h=r.timeoutHandle;h!==-1&&(r.timeoutHandle=-1,$I(h)),h=r.cancelPendingCommit,h!==null&&(r.cancelPendingCommit=null,h()),q1(),mn=r,be=h=_a(r.current,null),ke=a,nn=0,Br=null,fo=!1,fc=Ke(r,a),V1=!1,dc=es=U1=pl=go=jn=0,dr=Nu=null,F1=!1,(a&8)!==0&&(a|=a&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=a;0<m;){var T=31-Ye(m),v=1<<T;a|=r[T],m&=~v}return Pa=a,Wh(),h}function LE(r,a){Te=null,Et.H=gf,a===du||a===rf?(a=Jy(),nn=3):a===Ky?(a=Jy(),nn=4):nn=a===$2?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Br=a,be===null&&(jn=1,Af(r,Qr(a,r.current)))}function kE(){var r=Et.H;return Et.H=gf,r===null?gf:r}function BE(){var r=Et.A;return Et.A=OI,r}function Y1(){jn=4,fo||(ke&4194048)!==ke&&ts.current!==null||(fc=!0),(go&134217727)===0&&(pl&134217727)===0||mn===null||yo(mn,ke,es,!1)}function X1(r,a,h){var m=en;en|=2;var T=kE(),v=BE();(mn!==r||ke!==a)&&(Sf=null,pc(r,a)),a=!1;var M=jn;t:do try{if(nn!==0&&be!==null){var B=be,Q=Br;switch(nn){case 8:q1(),M=6;break t;case 3:case 2:case 9:case 6:ts.current===null&&(a=!0);var ft=nn;if(nn=0,Br=null,yc(r,B,Q,ft),h&&fc){M=0;break t}break;default:ft=nn,nn=0,Br=null,yc(r,B,Q,ft)}}kI(),M=jn;break}catch(_t){LE(r,_t)}while(!0);return a&&r.shellSuspendCounter++,Sa=ul=null,en=m,Et.H=T,Et.A=v,be===null&&(mn=null,ke=0,Wh()),M}function kI(){for(;be!==null;)VE(be)}function BI(r,a){var h=en;en|=2;var m=kE(),T=BE();mn!==r||ke!==a?(Sf=null,vf=Fe()+500,pc(r,a)):fc=Ke(r,a);t:do try{if(nn!==0&&be!==null){a=be;var v=Br;e:switch(nn){case 1:nn=0,Br=null,yc(r,a,v,1);break;case 2:case 9:if(Qy(v)){nn=0,Br=null,UE(a);break}a=function(){nn!==2&&nn!==9||mn!==r||(nn=7),qs(r)},v.then(a,a);break t;case 3:nn=7;break t;case 4:nn=5;break t;case 7:Qy(v)?(nn=0,Br=null,UE(a)):(nn=0,Br=null,yc(r,a,v,7));break;case 5:var M=null;switch(be.tag){case 26:M=be.memoizedState;case 5:case 27:var B=be;if(!M||xA(M)){nn=0,Br=null;var Q=B.sibling;if(Q!==null)be=Q;else{var ft=B.return;ft!==null?(be=ft,If(ft)):be=null}break e}}nn=0,Br=null,yc(r,a,v,5);break;case 6:nn=0,Br=null,yc(r,a,v,6);break;case 8:q1(),jn=6;break t;default:throw Error(i(462))}}VI();break}catch(_t){LE(r,_t)}while(!0);return Sa=ul=null,Et.H=m,Et.A=T,en=h,be!==null?0:(mn=null,ke=0,Wh(),jn)}function VI(){for(;be!==null&&!ar();)VE(be)}function VE(r){var a=hE(r.alternate,r,Pa);r.memoizedProps=r.pendingProps,a===null?If(r):be=a}function UE(r){var a=r,h=a.alternate;switch(a.tag){case 15:case 0:a=sE(h,a,a.pendingProps,a.type,void 0,ke);break;case 11:a=sE(h,a,a.pendingProps,a.type.render,a.ref,ke);break;case 5:l1(a);default:dE(h,a),a=be=Fy(a,Pa),a=hE(h,a,Pa)}r.memoizedProps=r.pendingProps,a===null?If(r):be=a}function yc(r,a,h,m){Sa=ul=null,l1(a),lc=null,Tu=0;var T=a.return;try{if(bI(r,T,a,h,ke)){jn=1,Af(r,Qr(h,r.current)),be=null;return}}catch(v){if(T!==null)throw be=T,v;jn=1,Af(r,Qr(h,r.current)),be=null;return}a.flags&32768?(Qe||m===1?r=!0:fc||(ke&536870912)!==0?r=!1:(fo=r=!0,(m===2||m===9||m===3||m===6)&&(m=ts.current,m!==null&&m.tag===13&&(m.flags|=16384))),FE(a,r)):If(a)}function If(r){var a=r;do{if((a.flags&32768)!==0){FE(a,fo);return}r=a.return;var h=RI(a.alternate,a,Pa);if(h!==null){be=h;return}if(a=a.sibling,a!==null){be=a;return}be=a=r}while(a!==null);jn===0&&(jn=5)}function FE(r,a){do{var h=NI(r.alternate,r);if(h!==null){h.flags&=32767,be=h;return}if(h=r.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!a&&(r=r.sibling,r!==null)){be=r;return}be=r=h}while(r!==null);jn=6,be=null}function zE(r,a,h,m,T,v,M,B,Q){r.cancelPendingCommit=null;do Rf();while(Di!==0);if((en&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(v=a.lanes|a.childLanes,v|=B0,Jo(r,h,v,M,B,Q),r===mn&&(be=mn=null,ke=0),gc=a,po=r,mc=h,j1=v,H1=T,DE=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,jI(jt,function(){return YE(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=Et.T,Et.T=null,T=xt.p,xt.p=2,M=en,en|=4;try{DI(r,a,h)}finally{en=M,xt.p=T,Et.T=m}}Di=1,jE(),HE(),GE()}}function jE(){if(Di===1){Di=0;var r=po,a=gc,h=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||h){h=Et.T,Et.T=null;var m=xt.p;xt.p=2;var T=en;en|=4;try{CE(a,r);var v=sg,M=S(r.containerInfo),B=v.focusedElem,Q=v.selectionRange;if(M!==B&&B&&B.ownerDocument&&C(B.ownerDocument.documentElement,B)){if(Q!==null&&N(B)){var ft=Q.start,_t=Q.end;if(_t===void 0&&(_t=ft),"selectionStart"in B)B.selectionStart=ft,B.selectionEnd=Math.min(_t,B.value.length);else{var bt=B.ownerDocument||document,dt=bt&&bt.defaultView||window;if(dt.getSelection){var pt=dt.getSelection(),oe=B.textContent.length,ee=Math.min(Q.start,oe),un=Q.end===void 0?ee:Math.min(Q.end,oe);!pt.extend&&ee>un&&(M=un,un=ee,ee=M);var at=x(B,ee),rt=x(B,un);if(at&&rt&&(pt.rangeCount!==1||pt.anchorNode!==at.node||pt.anchorOffset!==at.offset||pt.focusNode!==rt.node||pt.focusOffset!==rt.offset)){var ut=bt.createRange();ut.setStart(at.node,at.offset),pt.removeAllRanges(),ee>un?(pt.addRange(ut),pt.extend(rt.node,rt.offset)):(ut.setEnd(rt.node,rt.offset),pt.addRange(ut))}}}}for(bt=[],pt=B;pt=pt.parentNode;)pt.nodeType===1&&bt.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<bt.length;B++){var Ct=bt[B];Ct.element.scrollLeft=Ct.left,Ct.element.scrollTop=Ct.top}}zf=!!rg,sg=rg=null}finally{en=T,xt.p=m,Et.T=h}}r.current=a,Di=2}}function HE(){if(Di===2){Di=0;var r=po,a=gc,h=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||h){h=Et.T,Et.T=null;var m=xt.p;xt.p=2;var T=en;en|=4;try{xE(r,a.alternate,a)}finally{en=T,xt.p=m,Et.T=h}}Di=3}}function GE(){if(Di===4||Di===3){Di=0,fs();var r=po,a=gc,h=mc,m=DE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Di=5:(Di=0,gc=po=null,qE(r,r.pendingLanes));var T=r.pendingLanes;if(T===0&&(mo=null),Bn(h),a=a.stateNode,li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(ei,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=Et.T,T=xt.p,xt.p=2,Et.T=null;try{for(var v=r.onRecoverableError,M=0;M<m.length;M++){var B=m[M];v(B.value,{componentStack:B.stack})}}finally{Et.T=a,xt.p=T}}(mc&3)!==0&&Rf(),qs(r),T=r.pendingLanes,(h&4194090)!==0&&(T&42)!==0?r===G1?Du++:(Du=0,G1=r):Du=0,Mu(0)}}function qE(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,hu(a)))}function Rf(r){return jE(),HE(),GE(),YE()}function YE(){if(Di!==5)return!1;var r=po,a=j1;j1=0;var h=Bn(mc),m=Et.T,T=xt.p;try{xt.p=32>h?32:h,Et.T=null,h=H1,H1=null;var v=po,M=mc;if(Di=0,gc=po=null,mc=0,(en&6)!==0)throw Error(i(331));var B=en;if(en|=4,RE(v.current),SE(v,v.current,M,h),en=B,Mu(0,!1),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(ei,v)}catch{}return!0}finally{xt.p=T,Et.T=m,qE(r,a)}}function XE(r,a,h){a=Qr(h,a),a=T1(r.stateNode,a,2),r=so(r,a,2),r!==null&&($e(r,2),qs(r))}function fn(r,a,h){if(r.tag===3)XE(r,r,h);else for(;a!==null;){if(a.tag===3){XE(a,r,h);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(mo===null||!mo.has(m))){r=Qr(h,r),h=Z2(2),m=so(a,h,2),m!==null&&(J2(h,m,a,r),$e(m,2),qs(m));break}}a=a.return}}function W1(r,a,h){var m=r.pingCache;if(m===null){m=r.pingCache=new PI;var T=new Set;m.set(a,T)}else T=m.get(a),T===void 0&&(T=new Set,m.set(a,T));T.has(h)||(V1=!0,T.add(h),r=UI.bind(null,r,a,h),a.then(r,r))}function UI(r,a,h){var m=r.pingCache;m!==null&&m.delete(a),r.pingedLanes|=r.suspendedLanes&h,r.warmLanes&=~h,mn===r&&(ke&h)===h&&(jn===4||jn===3&&(ke&62914560)===ke&&300>Fe()-z1?(en&2)===0&&pc(r,0):U1|=h,dc===ke&&(dc=0)),qs(r)}function WE(r,a){a===0&&(a=gs()),r=Jl(r,a),r!==null&&($e(r,a),qs(r))}function FI(r){var a=r.memoizedState,h=0;a!==null&&(h=a.retryLane),WE(r,h)}function zI(r,a){var h=0;switch(r.tag){case 13:var m=r.stateNode,T=r.memoizedState;T!==null&&(h=T.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(a),WE(r,h)}function jI(r,a){return we(r,a)}var Nf=null,Ec=null,K1=!1,Df=!1,Q1=!1,yl=0;function qs(r){r!==Ec&&r.next===null&&(Ec===null?Nf=Ec=r:Ec=Ec.next=r),Df=!0,K1||(K1=!0,GI())}function Mu(r,a){if(!Q1&&Df){Q1=!0;do for(var h=!1,m=Nf;m!==null;){if(r!==0){var T=m.pendingLanes;if(T===0)var v=0;else{var M=m.suspendedLanes,B=m.pingedLanes;v=(1<<31-Ye(42|r)+1)-1,v&=T&~(M&~B),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(h=!0,JE(m,v))}else v=ke,v=Ae(m,m===mn?v:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(v&3)===0||Ke(m,v)||(h=!0,JE(m,v));m=m.next}while(h);Q1=!1}}function HI(){KE()}function KE(){Df=K1=!1;var r=0;yl!==0&&(JI()&&(r=yl),yl=0);for(var a=Fe(),h=null,m=Nf;m!==null;){var T=m.next,v=QE(m,a);v===0?(m.next=null,h===null?Nf=T:h.next=T,T===null&&(Ec=h)):(h=m,(r!==0||(v&3)!==0)&&(Df=!0)),m=T}Mu(r)}function QE(r,a){for(var h=r.suspendedLanes,m=r.pingedLanes,T=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var M=31-Ye(v),B=1<<M,Q=T[M];Q===-1?((B&h)===0||(B&m)!==0)&&(T[M]=qr(B,a)):Q<=a&&(r.expiredLanes|=B),v&=~B}if(a=mn,h=ke,h=Ae(r,r===a?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,h===0||r===a&&(nn===2||nn===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&Ar(m),r.callbackNode=null,r.callbackPriority=0;if((h&3)===0||Ke(r,h)){if(a=h&-h,a===r.callbackPriority)return a;switch(m!==null&&Ar(m),Bn(h)){case 2:case 8:h=In;break;case 32:h=jt;break;case 268435456:h=Qa;break;default:h=jt}return m=ZE.bind(null,r),h=we(h,m),r.callbackPriority=a,r.callbackNode=h,a}return m!==null&&m!==null&&Ar(m),r.callbackPriority=2,r.callbackNode=null,2}function ZE(r,a){if(Di!==0&&Di!==5)return r.callbackNode=null,r.callbackPriority=0,null;var h=r.callbackNode;if(Rf()&&r.callbackNode!==h)return null;var m=ke;return m=Ae(r,r===mn?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(OE(r,m,a),QE(r,Fe()),r.callbackNode!=null&&r.callbackNode===h?ZE.bind(null,r):null)}function JE(r,a){if(Rf())return null;OE(r,a,!0)}function GI(){t3(function(){(en&6)!==0?we(Zt,HI):KE()})}function Z1(){return yl===0&&(yl=ua()),yl}function $E(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:vr(""+r)}function tA(r,a){var h=a.ownerDocument.createElement("input");return h.name=a.name,h.value=a.value,r.id&&h.setAttribute("form",r.id),a.parentNode.insertBefore(h,a),r=new FormData(r),h.parentNode.removeChild(h),r}function qI(r,a,h,m,T){if(a==="submit"&&h&&h.stateNode===T){var v=$E((T[pn]||null).action),M=m.submitter;M&&(a=(a=M[pn]||null)?$E(a.formAction):M.getAttribute("formAction"),a!==null&&(v=a,M=null));var B=new Ir("action","action",null,m,T);r.push({event:B,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(yl!==0){var Q=M?tA(T,M):new FormData(T);y1(h,{pending:!0,data:Q,method:T.method,action:v},null,Q)}}else typeof v=="function"&&(B.preventDefault(),Q=M?tA(T,M):new FormData(T),y1(h,{pending:!0,data:Q,method:T.method,action:v},v,Q))},currentTarget:T}]})}}for(var J1=0;J1<Fs.length;J1++){var $1=Fs[J1],YI=$1.toLowerCase(),XI=$1[0].toUpperCase()+$1.slice(1);Or(YI,"on"+XI)}Or(he,"onAnimationEnd"),Or(Ri,"onAnimationIteration"),Or(ur,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Hi,"onTransitionRun"),Or(tn,"onTransitionStart"),Or(ui,"onTransitionCancel"),Or(Gi,"onTransitionEnd"),dn("onMouseEnter",["mouseout","mouseover"]),dn("onMouseLeave",["mouseout","mouseover"]),dn("onPointerEnter",["pointerout","pointerover"]),dn("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function eA(r,a){a=(a&4)!==0;for(var h=0;h<r.length;h++){var m=r[h],T=m.event;m=m.listeners;t:{var v=void 0;if(a)for(var M=m.length-1;0<=M;M--){var B=m[M],Q=B.instance,ft=B.currentTarget;if(B=B.listener,Q!==v&&T.isPropagationStopped())break t;v=B,T.currentTarget=ft;try{v(T)}catch(_t){Ef(_t)}T.currentTarget=null,v=Q}else for(M=0;M<m.length;M++){if(B=m[M],Q=B.instance,ft=B.currentTarget,B=B.listener,Q!==v&&T.isPropagationStopped())break t;v=B,T.currentTarget=ft;try{v(T)}catch(_t){Ef(_t)}T.currentTarget=null,v=Q}}}}function Ie(r,a){var h=a[Vn];h===void 0&&(h=a[Vn]=new Set);var m=r+"__bubble";h.has(m)||(nA(a,r,2,!1),h.add(m))}function tg(r,a,h){var m=0;a&&(m|=4),nA(h,r,m,a)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function eg(r){if(!r[Mf]){r[Mf]=!0,Yl.forEach(function(h){h!=="selectionchange"&&(WI.has(h)||tg(h,!1,r),tg(h,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Mf]||(a[Mf]=!0,tg("selectionchange",!1,a))}}function nA(r,a,h,m){switch(SA(a)){case 2:var T=w3;break;case 8:T=T3;break;default:T=mg}h=T.bind(null,a,h,r),T=void 0,!ie||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(T=!0),m?T!==void 0?r.addEventListener(a,h,{capture:!0,passive:T}):r.addEventListener(a,h,!0):T!==void 0?r.addEventListener(a,h,{passive:T}):r.addEventListener(a,h,!1)}function ng(r,a,h,m,T){var v=m;if((a&1)===0&&(a&2)===0&&m!==null)t:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var B=m.stateNode.containerInfo;if(B===T)break;if(M===4)for(M=m.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&M.stateNode.containerInfo===T)return;M=M.return}for(;B!==null;){if(M=yn(B),M===null)return;if(Q=M.tag,Q===5||Q===6||Q===26||Q===27){m=v=M;continue t}B=B.parentNode}}m=m.return}Fi(function(){var ft=v,_t=Ms(h),bt=[];t:{var dt=Ta.get(r);if(dt!==void 0){var pt=Ir,oe=r;switch(r){case"keypress":if(Ea(h)===0)break t;case"keydown":case"keyup":pt=Bs;break;case"focusin":oe="focus",pt=Es;break;case"focusout":oe="blur",pt=Es;break;case"beforeblur":case"afterblur":pt=Es;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Ve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Ne;break;case he:case Ri:case ur:pt=nl;break;case Gi:pt=I;break;case"scroll":case"scrollend":pt=Fn;break;case"wheel":pt=F;break;case"copy":case"cut":case"paste":pt=de;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Vs;break;case"toggle":case"beforetoggle":pt=At}var ee=(a&4)!==0,un=!ee&&(r==="scroll"||r==="scrollend"),at=ee?dt!==null?dt+"Capture":null:dt;ee=[];for(var rt=ft,ut;rt!==null;){var Ct=rt;if(ut=Ct.stateNode,Ct=Ct.tag,Ct!==5&&Ct!==26&&Ct!==27||ut===null||at===null||(Ct=Wt(rt,at),Ct!=null&&ee.push(Pu(rt,Ct,ut))),un)break;rt=rt.return}0<ee.length&&(dt=new pt(dt,oe,null,h,_t),bt.push({event:dt,listeners:ee}))}}if((a&7)===0){t:{if(dt=r==="mouseover"||r==="pointerover",pt=r==="mouseout"||r==="pointerout",dt&&h!==pa&&(oe=h.relatedTarget||h.fromElement)&&(yn(oe)||oe[wr]))break t;if((pt||dt)&&(dt=_t.window===_t?_t:(dt=_t.ownerDocument)?dt.defaultView||dt.parentWindow:window,pt?(oe=h.relatedTarget||h.toElement,pt=ft,oe=oe?yn(oe):null,oe!==null&&(un=u(oe),ee=oe.tag,oe!==un||ee!==5&&ee!==27&&ee!==6)&&(oe=null)):(pt=null,oe=ft),pt!==oe)){if(ee=wa,Ct="onMouseLeave",at="onMouseEnter",rt="mouse",(r==="pointerout"||r==="pointerover")&&(ee=Vs,Ct="onPointerLeave",at="onPointerEnter",rt="pointer"),un=pt==null?dt:Tr(pt),ut=oe==null?dt:Tr(oe),dt=new ee(Ct,rt+"leave",pt,h,_t),dt.target=un,dt.relatedTarget=ut,Ct=null,yn(_t)===ft&&(ee=new ee(at,rt+"enter",oe,h,_t),ee.target=ut,ee.relatedTarget=un,Ct=ee),un=Ct,pt&&oe)e:{for(ee=pt,at=oe,rt=0,ut=ee;ut;ut=Ac(ut))rt++;for(ut=0,Ct=at;Ct;Ct=Ac(Ct))ut++;for(;0<rt-ut;)ee=Ac(ee),rt--;for(;0<ut-rt;)at=Ac(at),ut--;for(;rt--;){if(ee===at||at!==null&&ee===at.alternate)break e;ee=Ac(ee),at=Ac(at)}ee=null}else ee=null;pt!==null&&iA(bt,dt,pt,ee,!1),oe!==null&&un!==null&&iA(bt,un,oe,ee,!0)}}t:{if(dt=ft?Tr(ft):window,pt=dt.nodeName&&dt.nodeName.toLowerCase(),pt==="select"||pt==="input"&&dt.type==="file")var qt=Yh;else if(rl(dt))if(su)qt=o;else{qt=O;var Se=Ql}else pt=dt.nodeName,!pt||pt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?ft&&Xt(ft.elementType)&&(qt=Yh):qt=s;if(qt&&(qt=qt(r,ft))){ir(bt,qt,h,_t);break t}Se&&Se(r,dt,ft),r==="focusout"&&ft&&dt.type==="number"&&ft.memoizedProps.value!=null&&ct(dt,"number",dt.value)}switch(Se=ft?Tr(ft):window,r){case"focusin":(rl(Se)||Se.contentEditable==="true")&&(L=Se,Y=ft,tt=null);break;case"focusout":tt=Y=L=null;break;case"mousedown":it=!0;break;case"contextmenu":case"mouseup":case"dragend":it=!1,lt(bt,h,_t);break;case"selectionchange":if(P)break;case"keydown":case"keyup":lt(bt,h,_t)}var Qt;if(ae)t:{switch(r){case"compositionstart":var re="onCompositionStart";break t;case"compositionend":re="onCompositionEnd";break t;case"compositionupdate":re="onCompositionUpdate";break t}re=void 0}else Mr?Ai(r,h)&&(re="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(re="onCompositionStart");re&&(vn&&h.locale!=="ko"&&(Mr||re!=="onCompositionStart"?re==="onCompositionEnd"&&Mr&&(Qt=Xr()):(lr=_t,Ze="value"in lr?lr.value:lr.textContent,Mr=!0)),Se=Of(ft,re),0<Se.length&&(re=new Ls(re,r,null,h,_t),bt.push({event:re,listeners:Se}),Qt?re.data=Qt:(Qt=nr(h),Qt!==null&&(re.data=Qt)))),(Qt=Ue?xs(r,h):L0(r,h))&&(re=Of(ft,"onBeforeInput"),0<re.length&&(Se=new Ls("onBeforeInput","beforeinput",null,h,_t),bt.push({event:Se,listeners:re}),Se.data=Qt)),qI(bt,r,ft,h,_t)}eA(bt,a)})}function Pu(r,a,h){return{instance:r,listener:a,currentTarget:h}}function Of(r,a){for(var h=a+"Capture",m=[];r!==null;){var T=r,v=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||v===null||(T=Wt(r,h),T!=null&&m.unshift(Pu(r,T,v)),T=Wt(r,a),T!=null&&m.push(Pu(r,T,v))),r.tag===3)return m;r=r.return}return[]}function Ac(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function iA(r,a,h,m,T){for(var v=a._reactName,M=[];h!==null&&h!==m;){var B=h,Q=B.alternate,ft=B.stateNode;if(B=B.tag,Q!==null&&Q===m)break;B!==5&&B!==26&&B!==27||ft===null||(Q=ft,T?(ft=Wt(h,v),ft!=null&&M.unshift(Pu(h,ft,Q))):T||(ft=Wt(h,v),ft!=null&&M.push(Pu(h,ft,Q)))),h=h.return}M.length!==0&&r.push({event:a,listeners:M})}var KI=/\r\n?/g,QI=/\u0000|\uFFFD/g;function rA(r){return(typeof r=="string"?r:""+r).replace(KI,`
`).replace(QI,"")}function sA(r,a){return a=rA(a),rA(r)===a}function Pf(){}function cn(r,a,h,m,T,v){switch(h){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||An(r,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&An(r,""+m);break;case"className":da(r,"class",m);break;case"tabIndex":da(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":da(r,h,m);break;case"style":Ei(r,m,v);break;case"data":if(a!=="object"){da(r,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||h!=="href")){r.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(h);break}m=vr(""+m),r.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(h==="formAction"?(a!=="input"&&cn(r,a,"name",T.name,T,null),cn(r,a,"formEncType",T.formEncType,T,null),cn(r,a,"formMethod",T.formMethod,T,null),cn(r,a,"formTarget",T.formTarget,T,null)):(cn(r,a,"encType",T.encType,T,null),cn(r,a,"method",T.method,T,null),cn(r,a,"target",T.target,T,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(h);break}m=vr(""+m),r.setAttribute(h,m);break;case"onClick":m!=null&&(r.onclick=Pf);break;case"onScroll":m!=null&&Ie("scroll",r);break;case"onScrollEnd":m!=null&&Ie("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(T.children!=null)throw Error(i(60));r.innerHTML=h}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}h=vr(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,""+m):r.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,""):r.removeAttribute(h);break;case"capture":case"download":m===!0?r.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,m):r.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(h,m):r.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(h):r.setAttribute(h,m);break;case"popover":Ie("beforetoggle",r),Ie("toggle",r),vt(r,"popover",m);break;case"xlinkActuate":Le(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Le(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Le(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Le(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Le(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Le(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Le(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Le(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Le(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":vt(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=an.get(h)||h,vt(r,h,m))}}function ig(r,a,h,m,T,v){switch(h){case"style":Ei(r,m,v);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(T.children!=null)throw Error(i(60));r.innerHTML=h}}break;case"children":typeof m=="string"?An(r,m):(typeof m=="number"||typeof m=="bigint")&&An(r,""+m);break;case"onScroll":m!=null&&Ie("scroll",r);break;case"onScrollEnd":m!=null&&Ie("scrollend",r);break;case"onClick":m!=null&&(r.onclick=Pf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fa.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(T=h.endsWith("Capture"),a=h.slice(2,T?h.length-7:void 0),v=r[pn]||null,v=v!=null?v[h]:null,typeof v=="function"&&r.removeEventListener(a,v,T),typeof m=="function")){typeof v!="function"&&v!==null&&(h in r?r[h]=null:r.hasAttribute(h)&&r.removeAttribute(h)),r.addEventListener(a,m,T);break t}h in r?r[h]=m:m===!0?r.setAttribute(h,""):vt(r,h,m)}}}function Mi(r,a,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",r),Ie("load",r);var m=!1,T=!1,v;for(v in h)if(h.hasOwnProperty(v)){var M=h[v];if(M!=null)switch(v){case"src":m=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:cn(r,a,v,M,h,null)}}T&&cn(r,a,"srcSet",h.srcSet,h,null),m&&cn(r,a,"src",h.src,h,null);return;case"input":Ie("invalid",r);var B=v=M=T=null,Q=null,ft=null;for(m in h)if(h.hasOwnProperty(m)){var _t=h[m];if(_t!=null)switch(m){case"name":T=_t;break;case"type":M=_t;break;case"checked":Q=_t;break;case"defaultChecked":ft=_t;break;case"value":v=_t;break;case"defaultValue":B=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(137,a));break;default:cn(r,a,m,_t,h,null)}}Un(r,v,B,Q,ft,M,T,!1),Ds(r);return;case"select":Ie("invalid",r),m=M=v=null;for(T in h)if(h.hasOwnProperty(T)&&(B=h[T],B!=null))switch(T){case"value":v=B;break;case"defaultValue":M=B;break;case"multiple":m=B;default:cn(r,a,T,B,h,null)}a=v,h=M,r.multiple=!!m,a!=null?G(r,!!m,a,!1):h!=null&&G(r,!!m,h,!0);return;case"textarea":Ie("invalid",r),v=T=m=null;for(M in h)if(h.hasOwnProperty(M)&&(B=h[M],B!=null))switch(M){case"value":m=B;break;case"defaultValue":T=B;break;case"children":v=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(91));break;default:cn(r,a,M,B,h,null)}Nn(r,m,T,v),Ds(r);return;case"option":for(Q in h)if(h.hasOwnProperty(Q)&&(m=h[Q],m!=null))switch(Q){case"selected":r.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:cn(r,a,Q,m,h,null)}return;case"dialog":Ie("beforetoggle",r),Ie("toggle",r),Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":Ie("load",r);break;case"video":case"audio":for(m=0;m<Ou.length;m++)Ie(Ou[m],r);break;case"image":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"embed":case"source":case"link":Ie("error",r),Ie("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in h)if(h.hasOwnProperty(ft)&&(m=h[ft],m!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:cn(r,a,ft,m,h,null)}return;default:if(Xt(a)){for(_t in h)h.hasOwnProperty(_t)&&(m=h[_t],m!==void 0&&ig(r,a,_t,m,h,void 0));return}}for(B in h)h.hasOwnProperty(B)&&(m=h[B],m!=null&&cn(r,a,B,m,h,null))}function ZI(r,a,h,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,v=null,M=null,B=null,Q=null,ft=null,_t=null;for(pt in h){var bt=h[pt];if(h.hasOwnProperty(pt)&&bt!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":Q=bt;default:m.hasOwnProperty(pt)||cn(r,a,pt,null,m,bt)}}for(var dt in m){var pt=m[dt];if(bt=h[dt],m.hasOwnProperty(dt)&&(pt!=null||bt!=null))switch(dt){case"type":v=pt;break;case"name":T=pt;break;case"checked":ft=pt;break;case"defaultChecked":_t=pt;break;case"value":M=pt;break;case"defaultValue":B=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,a));break;default:pt!==bt&&cn(r,a,dt,pt,m,bt)}}He(r,M,B,Q,ft,_t,v,T);return;case"select":pt=M=B=dt=null;for(v in h)if(Q=h[v],h.hasOwnProperty(v)&&Q!=null)switch(v){case"value":break;case"multiple":pt=Q;default:m.hasOwnProperty(v)||cn(r,a,v,null,m,Q)}for(T in m)if(v=m[T],Q=h[T],m.hasOwnProperty(T)&&(v!=null||Q!=null))switch(T){case"value":dt=v;break;case"defaultValue":B=v;break;case"multiple":M=v;default:v!==Q&&cn(r,a,T,v,m,Q)}a=B,h=M,m=pt,dt!=null?G(r,!!h,dt,!1):!!m!=!!h&&(a!=null?G(r,!!h,a,!0):G(r,!!h,h?[]:"",!1));return;case"textarea":pt=dt=null;for(B in h)if(T=h[B],h.hasOwnProperty(B)&&T!=null&&!m.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:cn(r,a,B,null,m,T)}for(M in m)if(T=m[M],v=h[M],m.hasOwnProperty(M)&&(T!=null||v!=null))switch(M){case"value":dt=T;break;case"defaultValue":pt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:T!==v&&cn(r,a,M,T,m,v)}Yt(r,dt,pt);return;case"option":for(var oe in h)if(dt=h[oe],h.hasOwnProperty(oe)&&dt!=null&&!m.hasOwnProperty(oe))switch(oe){case"selected":r.selected=!1;break;default:cn(r,a,oe,null,m,dt)}for(Q in m)if(dt=m[Q],pt=h[Q],m.hasOwnProperty(Q)&&dt!==pt&&(dt!=null||pt!=null))switch(Q){case"selected":r.selected=dt&&typeof dt!="function"&&typeof dt!="symbol";break;default:cn(r,a,Q,dt,m,pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in h)dt=h[ee],h.hasOwnProperty(ee)&&dt!=null&&!m.hasOwnProperty(ee)&&cn(r,a,ee,null,m,dt);for(ft in m)if(dt=m[ft],pt=h[ft],m.hasOwnProperty(ft)&&dt!==pt&&(dt!=null||pt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(i(137,a));break;default:cn(r,a,ft,dt,m,pt)}return;default:if(Xt(a)){for(var un in h)dt=h[un],h.hasOwnProperty(un)&&dt!==void 0&&!m.hasOwnProperty(un)&&ig(r,a,un,void 0,m,dt);for(_t in m)dt=m[_t],pt=h[_t],!m.hasOwnProperty(_t)||dt===pt||dt===void 0&&pt===void 0||ig(r,a,_t,dt,m,pt);return}}for(var at in h)dt=h[at],h.hasOwnProperty(at)&&dt!=null&&!m.hasOwnProperty(at)&&cn(r,a,at,null,m,dt);for(bt in m)dt=m[bt],pt=h[bt],!m.hasOwnProperty(bt)||dt===pt||dt==null&&pt==null||cn(r,a,bt,dt,m,pt)}var rg=null,sg=null;function Lf(r){return r.nodeType===9?r:r.ownerDocument}function aA(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oA(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function ag(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var og=null;function JI(){var r=window.event;return r&&r.type==="popstate"?r===og?!1:(og=r,!0):(og=null,!1)}var lA=typeof setTimeout=="function"?setTimeout:void 0,$I=typeof clearTimeout=="function"?clearTimeout:void 0,cA=typeof Promise=="function"?Promise:void 0,t3=typeof queueMicrotask=="function"?queueMicrotask:typeof cA<"u"?function(r){return cA.resolve(null).then(r).catch(e3)}:lA;function e3(r){setTimeout(function(){throw r})}function Eo(r){return r==="head"}function uA(r,a){var h=a,m=0,T=0;do{var v=h.nextSibling;if(r.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(0<m&&8>m){h=m;var M=r.ownerDocument;if(h&1&&Lu(M.documentElement),h&2&&Lu(M.body),h&4)for(h=M.head,Lu(h),M=h.firstChild;M;){var B=M.nextSibling,Q=M.nodeName;M[$i]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&M.rel.toLowerCase()==="stylesheet"||h.removeChild(M),M=B}}if(T===0){r.removeChild(v),Hu(a);return}T--}else h==="$"||h==="$?"||h==="$!"?T++:m=h.charCodeAt(0)-48;else m=0;h=v}while(h);Hu(a)}function lg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var h=a;switch(a=a.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":lg(h),Ns(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}r.removeChild(h)}}function n3(r,a,h,m){for(;r.nodeType===1;){var T=h;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[$i])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==T.rel||r.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||r.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||r.getAttribute("title")!==(T.title==null?null:T.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(T.src==null?null:T.src)||r.getAttribute("type")!==(T.type==null?null:T.type)||r.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var v=T.name==null?null:""+T.name;if(T.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=Ts(r.nextSibling),r===null)break}return null}function i3(r,a,h){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!h||(r=Ts(r.nextSibling),r===null))return null;return r}function cg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function r3(r,a){var h=r.ownerDocument;if(r.data!=="$?"||h.readyState==="complete")a();else{var m=function(){a(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function Ts(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var ug=null;function hA(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"){if(a===0)return r;a--}else h==="/$"&&a++}r=r.previousSibling}return null}function fA(r,a,h){switch(a=Lf(h),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Lu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Ns(r)}var ns=new Map,dA=new Set;function kf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var La=xt.d;xt.d={f:s3,r:a3,D:o3,C:l3,L:c3,m:u3,X:f3,S:h3,M:d3};function s3(){var r=La.f(),a=bf();return r||a}function a3(r){var a=Si(r);a!==null&&a.tag===5&&a.type==="form"?O2(a):La.r(r)}var xc=typeof document>"u"?null:document;function gA(r,a,h){var m=xc;if(m&&typeof a=="string"&&a){var T=En(a);T='link[rel="'+r+'"][href="'+T+'"]',typeof h=="string"&&(T+='[crossorigin="'+h+'"]'),dA.has(T)||(dA.add(T),r={rel:r,crossOrigin:h,href:a},m.querySelector(T)===null&&(a=m.createElement("link"),Mi(a,"link",r),ze(a),m.head.appendChild(a)))}}function o3(r){La.D(r),gA("dns-prefetch",r,null)}function l3(r,a){La.C(r,a),gA("preconnect",r,a)}function c3(r,a,h){La.L(r,a,h);var m=xc;if(m&&r&&a){var T='link[rel="preload"][as="'+En(a)+'"]';a==="image"&&h&&h.imageSrcSet?(T+='[imagesrcset="'+En(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(T+='[imagesizes="'+En(h.imageSizes)+'"]')):T+='[href="'+En(r)+'"]';var v=T;switch(a){case"style":v=wc(r);break;case"script":v=Tc(r)}ns.has(v)||(r=_({rel:"preload",href:a==="image"&&h&&h.imageSrcSet?void 0:r,as:a},h),ns.set(v,r),m.querySelector(T)!==null||a==="style"&&m.querySelector(ku(v))||a==="script"&&m.querySelector(Bu(v))||(a=m.createElement("link"),Mi(a,"link",r),ze(a),m.head.appendChild(a)))}}function u3(r,a){La.m(r,a);var h=xc;if(h&&r){var m=a&&typeof a.as=="string"?a.as:"script",T='link[rel="modulepreload"][as="'+En(m)+'"][href="'+En(r)+'"]',v=T;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Tc(r)}if(!ns.has(v)&&(r=_({rel:"modulepreload",href:r},a),ns.set(v,r),h.querySelector(T)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Bu(v)))return}m=h.createElement("link"),Mi(m,"link",r),ze(m),h.head.appendChild(m)}}}function h3(r,a,h){La.S(r,a,h);var m=xc;if(m&&r){var T=_r(m).hoistableStyles,v=wc(r);a=a||"default";var M=T.get(v);if(!M){var B={loading:0,preload:null};if(M=m.querySelector(ku(v)))B.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":a},h),(h=ns.get(v))&&hg(r,h);var Q=M=m.createElement("link");ze(Q),Mi(Q,"link",r),Q._p=new Promise(function(ft,_t){Q.onload=ft,Q.onerror=_t}),Q.addEventListener("load",function(){B.loading|=1}),Q.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Bf(M,a,m)}M={type:"stylesheet",instance:M,count:1,state:B},T.set(v,M)}}}function f3(r,a){La.X(r,a);var h=xc;if(h&&r){var m=_r(h).hoistableScripts,T=Tc(r),v=m.get(T);v||(v=h.querySelector(Bu(T)),v||(r=_({src:r,async:!0},a),(a=ns.get(T))&&fg(r,a),v=h.createElement("script"),ze(v),Mi(v,"link",r),h.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(T,v))}}function d3(r,a){La.M(r,a);var h=xc;if(h&&r){var m=_r(h).hoistableScripts,T=Tc(r),v=m.get(T);v||(v=h.querySelector(Bu(T)),v||(r=_({src:r,async:!0,type:"module"},a),(a=ns.get(T))&&fg(r,a),v=h.createElement("script"),ze(v),Mi(v,"link",r),h.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(T,v))}}function mA(r,a,h,m){var T=(T=Mt.current)?kf(T):null;if(!T)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(a=wc(h.href),h=_r(T).hoistableStyles,m=h.get(a),m||(m={type:"style",instance:null,count:0,state:null},h.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){r=wc(h.href);var v=_r(T).hoistableStyles,M=v.get(r);if(M||(T=T.ownerDocument||T,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,M),(v=T.querySelector(ku(r)))&&!v._p&&(M.instance=v,M.state.loading=5),ns.has(r)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ns.set(r,h),v||g3(T,r,h,M.state))),a&&m===null)throw Error(i(528,""));return M}if(a&&m!==null)throw Error(i(529,""));return null;case"script":return a=h.async,h=h.src,typeof h=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Tc(h),h=_r(T).hoistableScripts,m=h.get(a),m||(m={type:"script",instance:null,count:0,state:null},h.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function wc(r){return'href="'+En(r)+'"'}function ku(r){return'link[rel="stylesheet"]['+r+"]"}function pA(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function g3(r,a,h,m){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=r.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),Mi(a,"link",h),ze(a),r.head.appendChild(a))}function Tc(r){return'[src="'+En(r)+'"]'}function Bu(r){return"script[async]"+r}function yA(r,a,h){if(a.count++,a.instance===null)switch(a.type){case"style":var m=r.querySelector('style[data-href~="'+En(h.href)+'"]');if(m)return a.instance=m,ze(m),m;var T=_({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),ze(m),Mi(m,"style",T),Bf(m,h.precedence,r),a.instance=m;case"stylesheet":T=wc(h.href);var v=r.querySelector(ku(T));if(v)return a.state.loading|=4,a.instance=v,ze(v),v;m=pA(h),(T=ns.get(T))&&hg(m,T),v=(r.ownerDocument||r).createElement("link"),ze(v);var M=v;return M._p=new Promise(function(B,Q){M.onload=B,M.onerror=Q}),Mi(v,"link",m),a.state.loading|=4,Bf(v,h.precedence,r),a.instance=v;case"script":return v=Tc(h.src),(T=r.querySelector(Bu(v)))?(a.instance=T,ze(T),T):(m=h,(T=ns.get(v))&&(m=_({},h),fg(m,T)),r=r.ownerDocument||r,T=r.createElement("script"),ze(T),Mi(T,"link",m),r.head.appendChild(T),a.instance=T);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,Bf(m,h.precedence,r));return a.instance}function Bf(r,a,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=m.length?m[m.length-1]:null,v=T,M=0;M<m.length;M++){var B=m[M];if(B.dataset.precedence===a)v=B;else if(v!==T)break}v?v.parentNode.insertBefore(r,v.nextSibling):(a=h.nodeType===9?h.head:h,a.insertBefore(r,a.firstChild))}function hg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function fg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Vf=null;function EA(r,a,h){if(Vf===null){var m=new Map,T=Vf=new Map;T.set(h,m)}else T=Vf,m=T.get(h),m||(m=new Map,T.set(h,m));if(m.has(r))return m;for(m.set(r,null),h=h.getElementsByTagName(r),T=0;T<h.length;T++){var v=h[T];if(!(v[$i]||v[Rn]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var M=v.getAttribute(a)||"";M=r+M;var B=m.get(M);B?B.push(v):m.set(M,[v])}}return m}function AA(r,a,h){r=r.ownerDocument||r,r.head.insertBefore(h,a==="title"?r.querySelector("head > title"):null)}function m3(r,a,h){if(h===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function xA(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Vu=null;function p3(){}function y3(r,a,h){if(Vu===null)throw Error(i(475));var m=Vu;if(a.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var T=wc(h.href),v=r.querySelector(ku(T));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(m.count++,m=Uf.bind(m),r.then(m,m)),a.state.loading|=4,a.instance=v,ze(v);return}v=r.ownerDocument||r,h=pA(h),(T=ns.get(T))&&hg(h,T),v=v.createElement("link"),ze(v);var M=v;M._p=new Promise(function(B,Q){M.onload=B,M.onerror=Q}),Mi(v,"link",h),a.instance=v}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=Uf.bind(m),r.addEventListener("load",a),r.addEventListener("error",a))}}function E3(){if(Vu===null)throw Error(i(475));var r=Vu;return r.stylesheets&&r.count===0&&dg(r,r.stylesheets),0<r.count?function(a){var h=setTimeout(function(){if(r.stylesheets&&dg(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(h)}}:null}function Uf(){if(this.count--,this.count===0){if(this.stylesheets)dg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ff=null;function dg(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ff=new Map,a.forEach(A3,r),Ff=null,Uf.call(r))}function A3(r,a){if(!(a.state.loading&4)){var h=Ff.get(r);if(h)var m=h.get(null);else{h=new Map,Ff.set(r,h);for(var T=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<T.length;v++){var M=T[v];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(h.set(M.dataset.precedence,M),m=M)}m&&h.set(null,m)}T=a.instance,M=T.getAttribute("data-precedence"),v=h.get(M)||m,v===m&&h.set(null,T),h.set(M,T),this.count++,m=Uf.bind(this),T.addEventListener("load",m),T.addEventListener("error",m),v?v.parentNode.insertBefore(T,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(T,r.firstChild)),a.state.loading|=4}}var Uu={$$typeof:W,Provider:null,Consumer:null,_currentValue:Ft,_currentValue2:Ft,_threadCount:0};function x3(r,a,h,m,T,v,M,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=m,this.onUncaughtError=T,this.onCaughtError=v,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function wA(r,a,h,m,T,v,M,B,Q,ft,_t,bt){return r=new x3(r,a,h,M,B,Q,ft,bt),a=1,v===!0&&(a|=24),v=Pr(3,null,null,a),r.current=v,v.stateNode=r,a=W0(),a.refCount++,r.pooledCache=a,a.refCount++,v.memoizedState={element:m,isDehydrated:h,cache:a},J0(v),r}function TA(r){return r?(r=$l,r):$l}function _A(r,a,h,m,T,v){T=TA(T),m.context===null?m.context=T:m.pendingContext=T,m=ro(a),m.payload={element:h},v=v===void 0?null:v,v!==null&&(m.callback=v),h=so(r,m,a),h!==null&&(Ur(h,r,a),mu(h,r,a))}function CA(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<a?h:a}}function gg(r,a){CA(r,a),(r=r.alternate)&&CA(r,a)}function vA(r){if(r.tag===13){var a=Jl(r,67108864);a!==null&&Ur(a,r,67108864),gg(r,67108864)}}var zf=!0;function w3(r,a,h,m){var T=Et.T;Et.T=null;var v=xt.p;try{xt.p=2,mg(r,a,h,m)}finally{xt.p=v,Et.T=T}}function T3(r,a,h,m){var T=Et.T;Et.T=null;var v=xt.p;try{xt.p=8,mg(r,a,h,m)}finally{xt.p=v,Et.T=T}}function mg(r,a,h,m){if(zf){var T=pg(m);if(T===null)ng(r,a,m,jf,h),bA(r,m);else if(C3(T,r,a,h,m))m.stopPropagation();else if(bA(r,m),a&4&&-1<_3.indexOf(r)){for(;T!==null;){var v=Si(T);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var M=We(v.pendingLanes);if(M!==0){var B=v;for(B.pendingLanes|=2,B.entangledLanes|=2;M;){var Q=1<<31-Ye(M);B.entanglements[1]|=Q,M&=~Q}qs(v),(en&6)===0&&(vf=Fe()+500,Mu(0))}}break;case 13:B=Jl(v,2),B!==null&&Ur(B,v,2),bf(),gg(v,2)}if(v=pg(m),v===null&&ng(r,a,m,jf,h),v===T)break;T=v}T!==null&&m.stopPropagation()}else ng(r,a,m,null,h)}}function pg(r){return r=Ms(r),yg(r)}var jf=null;function yg(r){if(jf=null,r=yn(r),r!==null){var a=u(r);if(a===null)r=null;else{var h=a.tag;if(h===13){if(r=g(a),r!==null)return r;r=null}else if(h===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return jf=r,null}function SA(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case Zt:return 2;case In:return 8;case jt:case Ka:return 32;case Qa:return 268435456;default:return 32}default:return 32}}var Eg=!1,Ao=null,xo=null,wo=null,Fu=new Map,zu=new Map,To=[],_3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bA(r,a){switch(r){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":Fu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":zu.delete(a.pointerId)}}function ju(r,a,h,m,T,v){return r===null||r.nativeEvent!==v?(r={blockedOn:a,domEventName:h,eventSystemFlags:m,nativeEvent:v,targetContainers:[T]},a!==null&&(a=Si(a),a!==null&&vA(a)),r):(r.eventSystemFlags|=m,a=r.targetContainers,T!==null&&a.indexOf(T)===-1&&a.push(T),r)}function C3(r,a,h,m,T){switch(a){case"focusin":return Ao=ju(Ao,r,a,h,m,T),!0;case"dragenter":return xo=ju(xo,r,a,h,m,T),!0;case"mouseover":return wo=ju(wo,r,a,h,m,T),!0;case"pointerover":var v=T.pointerId;return Fu.set(v,ju(Fu.get(v)||null,r,a,h,m,T)),!0;case"gotpointercapture":return v=T.pointerId,zu.set(v,ju(zu.get(v)||null,r,a,h,m,T)),!0}return!1}function IA(r){var a=yn(r.target);if(a!==null){var h=u(a);if(h!==null){if(a=h.tag,a===13){if(a=g(h),a!==null){r.blockedOn=a,Za(r.priority,function(){if(h.tag===13){var m=Vr();m=ha(m);var T=Jl(h,m);T!==null&&Ur(T,h,m),gg(h,m)}});return}}else if(a===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Hf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var h=pg(r.nativeEvent);if(h===null){h=r.nativeEvent;var m=new h.constructor(h.type,h);pa=m,h.target.dispatchEvent(m),pa=null}else return a=Si(h),a!==null&&vA(a),r.blockedOn=h,!1;a.shift()}return!0}function RA(r,a,h){Hf(r)&&h.delete(a)}function v3(){Eg=!1,Ao!==null&&Hf(Ao)&&(Ao=null),xo!==null&&Hf(xo)&&(xo=null),wo!==null&&Hf(wo)&&(wo=null),Fu.forEach(RA),zu.forEach(RA)}function Gf(r,a){r.blockedOn===a&&(r.blockedOn=null,Eg||(Eg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,v3)))}var qf=null;function NA(r){qf!==r&&(qf=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qf===r&&(qf=null);for(var a=0;a<r.length;a+=3){var h=r[a],m=r[a+1],T=r[a+2];if(typeof m!="function"){if(yg(m||h)===null)continue;break}var v=Si(h);v!==null&&(r.splice(a,3),a-=3,y1(v,{pending:!0,data:T,method:h.method,action:m},m,T))}}))}function Hu(r){function a(Q){return Gf(Q,r)}Ao!==null&&Gf(Ao,r),xo!==null&&Gf(xo,r),wo!==null&&Gf(wo,r),Fu.forEach(a),zu.forEach(a);for(var h=0;h<To.length;h++){var m=To[h];m.blockedOn===r&&(m.blockedOn=null)}for(;0<To.length&&(h=To[0],h.blockedOn===null);)IA(h),h.blockedOn===null&&To.shift();if(h=(r.ownerDocument||r).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var T=h[m],v=h[m+1],M=T[pn]||null;if(typeof v=="function")M||NA(h);else if(M){var B=null;if(v&&v.hasAttribute("formAction")){if(T=v,M=v[pn]||null)B=M.formAction;else if(yg(T)!==null)continue}else B=M.action;typeof B=="function"?h[m+1]=B:(h.splice(m,3),m-=3),NA(h)}}}function Ag(r){this._internalRoot=r}Yf.prototype.render=Ag.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var h=a.current,m=Vr();_A(h,m,r,a,null,null)},Yf.prototype.unmount=Ag.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;_A(r.current,2,null,r,null,null),bf(),a[wr]=null}};function Yf(r){this._internalRoot=r}Yf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Bi();r={blockedOn:null,target:r,priority:a};for(var h=0;h<To.length&&a!==0&&a<To[h].priority;h++);To.splice(h,0,r),h===0&&IA(r)}};var DA=t.version;if(DA!=="19.1.1")throw Error(i(527,DA,"19.1.1"));xt.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=E(a),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var S3={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Et,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{ei=Xf.inject(S3),li=Xf}catch{}}return qu.createRoot=function(r,a){if(!l(r))throw Error(i(299));var h=!1,m="",T=X2,v=W2,M=K2,B=null;return a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(T=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(M=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(B=a.unstable_transitionCallbacks)),a=wA(r,1,!1,null,null,h,m,T,v,M,B,null),r[wr]=a.current,eg(r),new Ag(a)},qu.hydrateRoot=function(r,a,h){if(!l(r))throw Error(i(299));var m=!1,T="",v=X2,M=W2,B=K2,Q=null,ft=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onUncaughtError!==void 0&&(v=h.onUncaughtError),h.onCaughtError!==void 0&&(M=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Q=h.unstable_transitionCallbacks),h.formState!==void 0&&(ft=h.formState)),a=wA(r,1,!0,a,h??null,m,T,v,M,B,Q,ft),a.context=TA(null),h=a.current,m=Vr(),m=ha(m),T=ro(m),T.callback=null,so(h,T,m),h=m,a.current.lanes=h,$e(a,h),qs(a),r[wr]=a.current,eg(r),new Yf(a)},qu.version="19.1.1",qu}var zA;function B3(){if(zA)return Tg.exports;zA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Tg.exports=k3(),Tg.exports}var V3=B3();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jA="popstate";function U3(e={}){function t(l,u){let{pathname:g="/",search:w="",hash:E=""}=Bl(l.location.hash.substring(1));return!g.startsWith("/")&&!g.startsWith(".")&&(g="/"+g),sm("",{pathname:g,search:w,hash:E},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let g=l.document.querySelector("base"),w="";if(g&&g.getAttribute("href")){let E=l.location.href,y=E.indexOf("#");w=y===-1?E:E.slice(0,y)}return w+"#"+(typeof u=="string"?u:dh(u))}function i(l,u){Is(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return z3(t,n,i,e)}function Ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Is(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function F3(){return Math.random().toString(36).substring(2,10)}function HA(e,t){return{usr:e.state,key:e.key,idx:t}}function sm(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Bl(t):t,state:n,key:t&&t.key||i||F3()}}function dh({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Bl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function z3(e,t,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,g=l.history,w="POP",E=null,y=_();y==null&&(y=0,g.replaceState({...g.state,idx:y},""));function _(){return(g.state||{idx:null}).idx}function b(){w="POP";let j=_(),nt=j==null?null:j-y;y=j,E&&E({action:w,location:q.location,delta:nt})}function R(j,nt){w="PUSH";let Z=sm(q.location,j,nt);n&&n(Z,j),y=_()+1;let W=HA(Z,y),yt=q.createHref(Z);try{g.pushState(W,"",yt)}catch(wt){if(wt instanceof DOMException&&wt.name==="DataCloneError")throw wt;l.location.assign(yt)}u&&E&&E({action:w,location:q.location,delta:1})}function k(j,nt){w="REPLACE";let Z=sm(q.location,j,nt);n&&n(Z,j),y=_();let W=HA(Z,y),yt=q.createHref(Z);g.replaceState(W,"",yt),u&&E&&E({action:w,location:q.location,delta:0})}function z(j){return j3(j)}let q={get action(){return w},get location(){return e(l,g)},listen(j){if(E)throw new Error("A history only accepts one active listener");return l.addEventListener(jA,b),E=j,()=>{l.removeEventListener(jA,b),E=null}},createHref(j){return t(l,j)},createURL:z,encodeLocation(j){let nt=z(j);return{pathname:nt.pathname,search:nt.search,hash:nt.hash}},push:R,replace:k,go(j){return g.go(j)}};return q}function j3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ln(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:dh(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function a_(e,t,n="/"){return H3(e,t,n,!1)}function H3(e,t,n,i){let l=typeof t=="string"?Bl(t):t,u=za(l.pathname||"/",n);if(u==null)return null;let g=o_(e);G3(g);let w=null;for(let E=0;w==null&&E<g.length;++E){let y=eR(u);w=$3(g[E],y,i)}return w}function o_(e,t=[],n=[],i="",l=!1){let u=(g,w,E=l,y)=>{let _={relativePath:y===void 0?g.path||"":y,caseSensitive:g.caseSensitive===!0,childrenIndex:w,route:g};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&E)return;Ln(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let b=Fa([i,_.relativePath]),R=n.concat(_);g.children&&g.children.length>0&&(Ln(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),o_(g.children,t,R,b,E)),!(g.path==null&&!g.index)&&t.push({path:b,score:Z3(b,g.index),routesMeta:R})};return e.forEach((g,w)=>{if(g.path===""||!g.path?.includes("?"))u(g,w);else for(let E of l_(g.path))u(g,w,!0,E)}),t}function l_(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let g=l_(i.join("/")),w=[];return w.push(...g.map(E=>E===""?u:[u,E].join("/"))),l&&w.push(...g),w.map(E=>e.startsWith("/")&&E===""?"/":E)}function G3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:J3(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var q3=/^:[\w-]+$/,Y3=3,X3=2,W3=1,K3=10,Q3=-2,GA=e=>e==="*";function Z3(e,t){let n=e.split("/"),i=n.length;return n.some(GA)&&(i+=Q3),t&&(i+=X3),n.filter(l=>!GA(l)).reduce((l,u)=>l+(q3.test(u)?Y3:u===""?W3:K3),i)}function J3(e,t){return e.length===t.length&&e.slice(0,-1).every((i,l)=>i===t[l])?e[e.length-1]-t[t.length-1]:0}function $3(e,t,n=!1){let{routesMeta:i}=e,l={},u="/",g=[];for(let w=0;w<i.length;++w){let E=i[w],y=w===i.length-1,_=u==="/"?t:t.slice(u.length)||"/",b=_d({path:E.relativePath,caseSensitive:E.caseSensitive,end:y},_),R=E.route;if(!b&&y&&n&&!i[i.length-1].route.index&&(b=_d({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},_)),!b)return null;Object.assign(l,b.params),g.push({params:l,pathname:Fa([u,b.pathname]),pathnameBase:sR(Fa([u,b.pathnameBase])),route:R}),b.pathnameBase!=="/"&&(u=Fa([u,b.pathnameBase]))}return g}function _d(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=tR(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let u=l[0],g=u.replace(/(.)\/+$/,"$1"),w=l.slice(1);return{params:i.reduce((y,{paramName:_,isOptional:b},R)=>{if(_==="*"){let z=w[R]||"";g=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const k=w[R];return b&&!k?y[_]=void 0:y[_]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:g,pattern:e}}function tR(e,t=!1,n=!0){Is(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,w,E)=>(i.push({paramName:w,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),i]}function eR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Is(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function za(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function nR(e,t="/"){let{pathname:n,search:i="",hash:l=""}=typeof e=="string"?Bl(e):e;return{pathname:n?n.startsWith("/")?n:iR(n,t):t,search:aR(i),hash:oR(l)}}function iR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Sg(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function c_(e){let t=rR(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function u_(e,t,n,i=!1){let l;typeof e=="string"?l=Bl(e):(l={...e},Ln(!l.pathname||!l.pathname.includes("?"),Sg("?","pathname","search",l)),Ln(!l.pathname||!l.pathname.includes("#"),Sg("#","pathname","hash",l)),Ln(!l.search||!l.search.includes("#"),Sg("#","search","hash",l)));let u=e===""||l.pathname==="",g=u?"/":l.pathname,w;if(g==null)w=n;else{let b=t.length-1;if(!i&&g.startsWith("..")){let R=g.split("/");for(;R[0]==="..";)R.shift(),b-=1;l.pathname=R.join("/")}w=b>=0?t[b]:"/"}let E=nR(l,w),y=g&&g!=="/"&&g.endsWith("/"),_=(u||g===".")&&n.endsWith("/");return!E.pathname.endsWith("/")&&(y||_)&&(E.pathname+="/"),E}var Fa=e=>e.join("/").replace(/\/\/+/g,"/"),sR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),aR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var h_=["POST","PUT","PATCH","DELETE"];new Set(h_);var cR=["GET",...h_];new Set(cR);var Kc=st.createContext(null);Kc.displayName="DataRouter";var i0=st.createContext(null);i0.displayName="DataRouterState";st.createContext(!1);var f_=st.createContext({isTransitioning:!1});f_.displayName="ViewTransition";var uR=st.createContext(new Map);uR.displayName="Fetchers";var hR=st.createContext(null);hR.displayName="Await";var oa=st.createContext(null);oa.displayName="Navigation";var Nh=st.createContext(null);Nh.displayName="Location";var Wa=st.createContext({outlet:null,matches:[],isDataRoute:!1});Wa.displayName="Route";var rp=st.createContext(null);rp.displayName="RouteError";function fR(e,{relative:t}={}){Ln(Dh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=st.useContext(oa),{hash:l,pathname:u,search:g}=Mh(e,{relative:t}),w=u;return n!=="/"&&(w=u==="/"?n:Fa([n,u])),i.createHref({pathname:w,search:g,hash:l})}function Dh(){return st.useContext(Nh)!=null}function Vl(){return Ln(Dh(),"useLocation() may be used only in the context of a <Router> component."),st.useContext(Nh).location}var d_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g_(e){st.useContext(oa).static||st.useLayoutEffect(e)}function dR(){let{isDataRoute:e}=st.useContext(Wa);return e?SR():gR()}function gR(){Ln(Dh(),"useNavigate() may be used only in the context of a <Router> component.");let e=st.useContext(Kc),{basename:t,navigator:n}=st.useContext(oa),{matches:i}=st.useContext(Wa),{pathname:l}=Vl(),u=JSON.stringify(c_(i)),g=st.useRef(!1);return g_(()=>{g.current=!0}),st.useCallback((E,y={})=>{if(Is(g.current,d_),!g.current)return;if(typeof E=="number"){n.go(E);return}let _=u_(E,JSON.parse(u),l,y.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Fa([t,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[t,n,u,l,e])}st.createContext(null);function Mh(e,{relative:t}={}){let{matches:n}=st.useContext(Wa),{pathname:i}=Vl(),l=JSON.stringify(c_(n));return st.useMemo(()=>u_(e,JSON.parse(l),i,t==="path"),[e,l,i,t])}function mR(e,t){return m_(e,t)}function m_(e,t,n,i,l){Ln(Dh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=st.useContext(oa),{matches:g}=st.useContext(Wa),w=g[g.length-1],E=w?w.params:{},y=w?w.pathname:"/",_=w?w.pathnameBase:"/",b=w&&w.route;{let Z=b&&b.path||"";p_(y,!b||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let R=Vl(),k;if(t){let Z=typeof t=="string"?Bl(t):t;Ln(_==="/"||Z.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),k=Z}else k=R;let z=k.pathname||"/",q=z;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");q="/"+z.replace(/^\//,"").split("/").slice(Z.length).join("/")}let j=a_(e,{pathname:q});Is(b||j!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Is(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let nt=xR(j&&j.map(Z=>Object.assign({},Z,{params:Object.assign({},E,Z.params),pathname:Fa([_,u.encodeLocation?u.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:Fa([_,u.encodeLocation?u.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),g,n,i,l);return t&&nt?st.createElement(Nh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},nt):nt}function pR(){let e=vR(),t=lR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},g=null;return console.error("Error handled by React Router default ErrorBoundary:",e),g=st.createElement(st.Fragment,null,st.createElement("p",null,"💿 Hey developer 👋"),st.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",st.createElement("code",{style:u},"ErrorBoundary")," or"," ",st.createElement("code",{style:u},"errorElement")," prop on your route.")),st.createElement(st.Fragment,null,st.createElement("h2",null,"Unexpected Application Error!"),st.createElement("h3",{style:{fontStyle:"italic"}},t),n?st.createElement("pre",{style:l},n):null,g)}var yR=st.createElement(pR,null),ER=class extends st.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?st.createElement(Wa.Provider,{value:this.props.routeContext},st.createElement(rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AR({routeContext:e,match:t,children:n}){let i=st.useContext(Kc);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),st.createElement(Wa.Provider,{value:e},n)}function xR(e,t=[],n=null,i=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,g=n?.errors;if(g!=null){let y=u.findIndex(_=>_.route.id&&g?.[_.route.id]!==void 0);Ln(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let w=!1,E=-1;if(n)for(let y=0;y<u.length;y++){let _=u[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(E=y),_.route.id){let{loaderData:b,errors:R}=n,k=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!R||R[_.route.id]===void 0);if(_.route.lazy||k){w=!0,E>=0?u=u.slice(0,E+1):u=[u[0]];break}}}return u.reduceRight((y,_,b)=>{let R,k=!1,z=null,q=null;n&&(R=g&&_.route.id?g[_.route.id]:void 0,z=_.route.errorElement||yR,w&&(E<0&&b===0?(p_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,q=null):E===b&&(k=!0,q=_.route.hydrateFallbackElement||null)));let j=t.concat(u.slice(0,b+1)),nt=()=>{let Z;return R?Z=z:k?Z=q:_.route.Component?Z=st.createElement(_.route.Component,null):_.route.element?Z=_.route.element:Z=y,st.createElement(AR,{match:_,routeContext:{outlet:y,matches:j,isDataRoute:n!=null},children:Z})};return n&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?st.createElement(ER,{location:n.location,revalidation:n.revalidation,component:z,error:R,children:nt(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:i}):nt()},null)}function sp(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wR(e){let t=st.useContext(Kc);return Ln(t,sp(e)),t}function TR(e){let t=st.useContext(i0);return Ln(t,sp(e)),t}function _R(e){let t=st.useContext(Wa);return Ln(t,sp(e)),t}function ap(e){let t=_R(e),n=t.matches[t.matches.length-1];return Ln(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function CR(){return ap("useRouteId")}function vR(){let e=st.useContext(rp),t=TR("useRouteError"),n=ap("useRouteError");return e!==void 0?e:t.errors?.[n]}function SR(){let{router:e}=wR("useNavigate"),t=ap("useNavigate"),n=st.useRef(!1);return g_(()=>{n.current=!0}),st.useCallback(async(l,u={})=>{Is(n.current,d_),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...u}))},[e,t])}var qA={};function p_(e,t,n){!t&&!qA[e]&&(qA[e]=!0,Is(!1,n))}st.memo(bR);function bR({routes:e,future:t,state:n,unstable_onError:i}){return m_(e,void 0,n,i,t)}function So(e){Ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IR({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:l,static:u=!1}){Ln(!Dh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),w=st.useMemo(()=>({basename:g,navigator:l,static:u,future:{}}),[g,l,u]);typeof n=="string"&&(n=Bl(n));let{pathname:E="/",search:y="",hash:_="",state:b=null,key:R="default"}=n,k=st.useMemo(()=>{let z=za(E,g);return z==null?null:{location:{pathname:z,search:y,hash:_,state:b,key:R},navigationType:i}},[g,E,y,_,b,R,i]);return Is(k!=null,`<Router basename="${g}"> is not able to match the URL "${E}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:st.createElement(oa.Provider,{value:w},st.createElement(Nh.Provider,{children:t,value:k}))}function RR({children:e,location:t}){return mR(am(e),t)}function am(e,t=[]){let n=[];return st.Children.forEach(e,(i,l)=>{if(!st.isValidElement(i))return;let u=[...t,l];if(i.type===st.Fragment){n.push.apply(n,am(i.props.children,u));return}Ln(i.type===So,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ln(!i.props.index||!i.props.children,"An index route cannot have child routes.");let g={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(g.children=am(i.props.children,u)),n.push(g)}),n}var ad="get",od="application/x-www-form-urlencoded";function r0(e){return e!=null&&typeof e.tagName=="string"}function NR(e){return r0(e)&&e.tagName.toLowerCase()==="button"}function DR(e){return r0(e)&&e.tagName.toLowerCase()==="form"}function MR(e){return r0(e)&&e.tagName.toLowerCase()==="input"}function OR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PR(e,t){return e.button===0&&(!t||t==="_self")&&!OR(e)}var Kf=null;function LR(){if(Kf===null)try{new FormData(document.createElement("form"),0),Kf=!1}catch{Kf=!0}return Kf}var kR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bg(e){return e!=null&&!kR.has(e)?(Is(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${od}"`),null):e}function BR(e,t){let n,i,l,u,g;if(DR(e)){let w=e.getAttribute("action");i=w?za(w,t):null,n=e.getAttribute("method")||ad,l=bg(e.getAttribute("enctype"))||od,u=new FormData(e)}else if(NR(e)||MR(e)&&(e.type==="submit"||e.type==="image")){let w=e.form;if(w==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=e.getAttribute("formaction")||w.getAttribute("action");if(i=E?za(E,t):null,n=e.getAttribute("formmethod")||w.getAttribute("method")||ad,l=bg(e.getAttribute("formenctype"))||bg(w.getAttribute("enctype"))||od,u=new FormData(w,e),!LR()){let{name:y,type:_,value:b}=e;if(_==="image"){let R=y?`${y}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else y&&u.append(y,b)}}else{if(r0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ad,i=null,l=od,g=e}return u&&l==="text/plain"&&(g=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function op(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function VR(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&za(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function UR(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function zR(e,t,n){let i=await Promise.all(e.map(async l=>{let u=t.routes[l.route.id];if(u){let g=await UR(u,n);return g.links?g.links():[]}return[]}));return qR(i.flat(1).filter(FR).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function YA(e,t,n,i,l,u){let g=(E,y)=>n[y]?E.route.id!==n[y].route.id:!0,w=(E,y)=>n[y].pathname!==E.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==E.params["*"];return u==="assets"?t.filter((E,y)=>g(E,y)||w(E,y)):u==="data"?t.filter((E,y)=>{let _=i.routes[E.route.id];if(!_||!_.hasLoader)return!1;if(g(E,y)||w(E,y))return!0;if(E.route.shouldRevalidate){let b=E.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function jR(e,t,{includeHydrateFallback:n}={}){return HR(e.map(i=>{let l=t.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function HR(e){return[...new Set(e)]}function GR(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function qR(e,t){let n=new Set;return new Set(t),e.reduce((i,l)=>{let u=JSON.stringify(GR(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function y_(){let e=st.useContext(Kc);return op(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function YR(){let e=st.useContext(i0);return op(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lp=st.createContext(void 0);lp.displayName="FrameworkContext";function E_(){let e=st.useContext(lp);return op(e,"You must render this element inside a <HydratedRouter> element"),e}function XR(e,t){let n=st.useContext(lp),[i,l]=st.useState(!1),[u,g]=st.useState(!1),{onFocus:w,onBlur:E,onMouseEnter:y,onMouseLeave:_,onTouchStart:b}=t,R=st.useRef(null);st.useEffect(()=>{if(e==="render"&&g(!0),e==="viewport"){let q=nt=>{nt.forEach(Z=>{g(Z.isIntersecting)})},j=new IntersectionObserver(q,{threshold:.5});return R.current&&j.observe(R.current),()=>{j.disconnect()}}},[e]),st.useEffect(()=>{if(i){let q=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(q)}}},[i]);let k=()=>{l(!0)},z=()=>{l(!1),g(!1)};return n?e!=="intent"?[u,R,{}]:[u,R,{onFocus:Yu(w,k),onBlur:Yu(E,z),onMouseEnter:Yu(y,k),onMouseLeave:Yu(_,z),onTouchStart:Yu(b,k)}]:[!1,R,{}]}function Yu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function WR({page:e,...t}){let{router:n}=y_(),i=st.useMemo(()=>a_(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?st.createElement(QR,{page:e,matches:i,...t}):null}function KR(e){let{manifest:t,routeModules:n}=E_(),[i,l]=st.useState([]);return st.useEffect(()=>{let u=!1;return zR(e,t,n).then(g=>{u||l(g)}),()=>{u=!0}},[e,t,n]),i}function QR({page:e,matches:t,...n}){let i=Vl(),{manifest:l,routeModules:u}=E_(),{basename:g}=y_(),{loaderData:w,matches:E}=YR(),y=st.useMemo(()=>YA(e,t,E,l,i,"data"),[e,t,E,l,i]),_=st.useMemo(()=>YA(e,t,E,l,i,"assets"),[e,t,E,l,i]),b=st.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let z=new Set,q=!1;if(t.forEach(nt=>{let Z=l.routes[nt.route.id];!Z||!Z.hasLoader||(!y.some(W=>W.route.id===nt.route.id)&&nt.route.id in w&&u[nt.route.id]?.shouldRevalidate||Z.hasClientLoader?q=!0:z.add(nt.route.id))}),z.size===0)return[];let j=VR(e,g,"data");return q&&z.size>0&&j.searchParams.set("_routes",t.filter(nt=>z.has(nt.route.id)).map(nt=>nt.route.id).join(",")),[j.pathname+j.search]},[g,w,i,l,y,t,e,u]),R=st.useMemo(()=>jR(_,l),[_,l]),k=KR(_);return st.createElement(st.Fragment,null,b.map(z=>st.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),R.map(z=>st.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),k.map(({key:z,link:q})=>st.createElement("link",{key:z,nonce:n.nonce,...q})))}function ZR(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var A_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A_&&(window.__reactRouterVersion="7.9.1")}catch{}function JR({basename:e,children:t,window:n}){let i=st.useRef();i.current==null&&(i.current=U3({window:n,v5Compat:!0}));let l=i.current,[u,g]=st.useState({action:l.action,location:l.location}),w=st.useCallback(E=>{st.startTransition(()=>g(E))},[g]);return st.useLayoutEffect(()=>l.listen(w),[l,w]),st.createElement(IR,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:l})}var x_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s0=st.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:g,state:w,target:E,to:y,preventScrollReset:_,viewTransition:b,...R},k){let{basename:z}=st.useContext(oa),q=typeof y=="string"&&x_.test(y),j,nt=!1;if(typeof y=="string"&&q&&(j=y,A_))try{let V=new URL(window.location.href),et=y.startsWith("//")?new URL(V.protocol+y):new URL(y),K=za(et.pathname,z);et.origin===V.origin&&K!=null?y=K+et.search+et.hash:nt=!0}catch{Is(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=fR(y,{relative:l}),[W,yt,wt]=XR(i,R),Rt=n4(y,{replace:g,state:w,target:E,preventScrollReset:_,relative:l,viewTransition:b});function H(V){t&&t(V),V.defaultPrevented||Rt(V)}let U=st.createElement("a",{...R,...wt,href:j||Z,onClick:nt||u?t:H,ref:ZR(k,yt),target:E,"data-discover":!q&&n==="render"?"true":void 0});return W&&!q?st.createElement(st.Fragment,null,U,st.createElement(WR,{page:Z})):U});s0.displayName="Link";var $R=st.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:g,viewTransition:w,children:E,...y},_){let b=Mh(g,{relative:y.relative}),R=Vl(),k=st.useContext(i0),{navigator:z,basename:q}=st.useContext(oa),j=k!=null&&o4(b)&&w===!0,nt=z.encodeLocation?z.encodeLocation(b).pathname:b.pathname,Z=R.pathname,W=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(Z=Z.toLowerCase(),W=W?W.toLowerCase():null,nt=nt.toLowerCase()),W&&q&&(W=za(W,q)||W);const yt=nt!=="/"&&nt.endsWith("/")?nt.length-1:nt.length;let wt=Z===nt||!l&&Z.startsWith(nt)&&Z.charAt(yt)==="/",Rt=W!=null&&(W===nt||!l&&W.startsWith(nt)&&W.charAt(nt.length)==="/"),H={isActive:wt,isPending:Rt,isTransitioning:j},U=wt?t:void 0,V;typeof i=="function"?V=i(H):V=[i,wt?"active":null,Rt?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let et=typeof u=="function"?u(H):u;return st.createElement(s0,{...y,"aria-current":U,className:V,ref:_,style:et,to:g,viewTransition:w},typeof E=="function"?E(H):E)});$R.displayName="NavLink";var t4=st.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:l,state:u,method:g=ad,action:w,onSubmit:E,relative:y,preventScrollReset:_,viewTransition:b,...R},k)=>{let z=s4(),q=a4(w,{relative:y}),j=g.toLowerCase()==="get"?"get":"post",nt=typeof w=="string"&&x_.test(w),Z=W=>{if(E&&E(W),W.defaultPrevented)return;W.preventDefault();let yt=W.nativeEvent.submitter,wt=yt?.getAttribute("formmethod")||g;z(yt||W.currentTarget,{fetcherKey:t,method:wt,navigate:n,replace:l,state:u,relative:y,preventScrollReset:_,viewTransition:b})};return st.createElement("form",{ref:k,method:j,action:q,onSubmit:i?E:Z,...R,"data-discover":!nt&&e==="render"?"true":void 0})});t4.displayName="Form";function e4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w_(e){let t=st.useContext(Kc);return Ln(t,e4(e)),t}function n4(e,{target:t,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:g}={}){let w=dR(),E=Vl(),y=Mh(e,{relative:u});return st.useCallback(_=>{if(PR(_,t)){_.preventDefault();let b=n!==void 0?n:dh(E)===dh(y);w(e,{replace:b,state:i,preventScrollReset:l,relative:u,viewTransition:g})}},[E,w,y,n,i,t,e,l,u,g])}var i4=0,r4=()=>`__${String(++i4)}__`;function s4(){let{router:e}=w_("useSubmit"),{basename:t}=st.useContext(oa),n=CR();return st.useCallback(async(i,l={})=>{let{action:u,method:g,encType:w,formData:E,body:y}=BR(i,t);if(l.navigate===!1){let _=l.fetcherKey||r4();await e.fetch(_,n,l.action||u,{preventScrollReset:l.preventScrollReset,formData:E,body:y,formMethod:l.method||g,formEncType:l.encType||w,flushSync:l.flushSync})}else await e.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:E,body:y,formMethod:l.method||g,formEncType:l.encType||w,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,n])}function a4(e,{relative:t}={}){let{basename:n}=st.useContext(oa),i=st.useContext(Wa);Ln(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...Mh(e||".",{relative:t})},g=Vl();if(e==null){u.search=g.search;let w=new URLSearchParams(u.search),E=w.getAll("index");if(E.some(_=>_==="")){w.delete("index"),E.filter(b=>b).forEach(b=>w.append("index",b));let _=w.toString();u.search=_?`?${_}`:""}}return(!e||e===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Fa([n,u.pathname])),dh(u)}function o4(e,{relative:t}={}){let n=st.useContext(f_);Ln(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=w_("useViewTransitionState"),l=Mh(e,{relative:t});if(!n.isTransitioning)return!1;let u=za(n.currentLocation.pathname,i)||n.currentLocation.pathname,g=za(n.nextLocation.pathname,i)||n.nextLocation.pathname;return _d(l.pathname,g)!=null||_d(l.pathname,u)!=null}function l4(){const[e,t]=st.useState(""),[n,i]=st.useState(""),[l,u]=st.useState(""),g=async()=>{(await fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})})).ok?u("登入成功！"):u("登入失敗！")};return Tt.jsxs("div",{className:"page-container",children:[Tt.jsx("h2",{children:"信箱 Mailbox"}),Tt.jsx("input",{value:e,onChange:w=>t(w.target.value),placeholder:"帳號"}),Tt.jsx("input",{value:n,onChange:w=>i(w.target.value),type:"password",placeholder:"密碼"}),Tt.jsx("button",{onClick:g,children:"登入"}),Tt.jsx("p",{children:l})]})}const c4=[{route:"紅線",start:"火車站",end:"科學園區",time:"06:00 - 22:00",interval:"10 分鐘",description:"途經市中心、科學園區，停靠 10 個站點"},{route:"藍線",start:"東門",end:"光復路",time:"06:30 - 21:30",interval:"15 分鐘",description:"途經東區、光復路，停靠 8 個站點"},{route:"綠線",start:"市政府",end:"高鐵站",time:"07:00 - 20:00",interval:"12 分鐘",description:"連接市政府與高鐵站，途經科學園區"},{route:"黃線",start:"北區",end:"南區",time:"06:15 - 22:15",interval:"20 分鐘",description:"貫穿北區與南區，途經主要商圈"},{route:"橘線",start:"中央公園",end:"東湖",time:"06:45 - 21:45",interval:"15 分鐘",description:"環狀路線，途經學校與住宅區"},{route:"紫線",start:"新竹站",end:"香山",time:"07:00 - 20:30",interval:"30 分鐘",description:"跨區路線，連接新竹市與香山"},{route:"粉紅線",start:"科學園區",end:"新竹市政府",time:"06:30 - 22:00",interval:"10 分鐘",description:"主要接駁園區與政府機關"},{route:"灰線",start:"南門",end:"北門",time:"06:00 - 21:00",interval:"25 分鐘",description:"連接南北區，停靠住宅與商業區"}];function u4(){const[e,t]=st.useState([]),[n,i]=st.useState([]);st.useEffect(()=>{t(c4)},[]);const l=u=>{i(g=>g.includes(u)?g.filter(w=>w!==u):[...g,u])};return Tt.jsxs("div",{className:"page-container",children:[Tt.jsx("h1",{className:"info-title",children:"園區公車資訊"}),Tt.jsx("div",{className:"route-buttons",children:e.map(u=>Tt.jsx("button",{"data-route":u.route,className:`route-btn ${n.includes(u.route)?"active":""}`,onClick:()=>l(u.route),children:u.route},u.route))}),Tt.jsx("div",{className:"bus-cards-container",children:n.length===0?Tt.jsx("p",{className:"no-selection",children:"點選上方按鈕以獲路線資訊"}):n.map(u=>{const g=e.find(w=>w.route===u);return g?Tt.jsxs("div",{className:"bus-card","data-route":g.route,children:[Tt.jsxs("h2",{children:[g.route,"（",g.start," → ",g.end,"）"]}),Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"營運時間："}),g.time]}),Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"發車間隔："}),g.interval]}),Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"路線描述："}),g.description]})]},g.route):null})})]})}const h4={office:[{title_zh:"辦公室",title_en:"Office Room",desc_zh:"辦公人員使用",desc_en:"For office staff",phone:"1234-5678",time:"9:00-18:00"},{title_zh:"會議室",title_en:"Conference Room",desc_zh:"會議與討論空間",desc_en:"Meeting and discussion space",phone:"2345-6789",time:"9:00-18:00"},{title_zh:"無塵室",title_en:"Clean Room",desc_zh:"特殊環境",desc_en:"Special environment",phone:"3456-7890",time:"9:00-18:00"}],sport:[{title_zh:"健身房",title_en:"Gym",desc_zh:"運動健身",desc_en:"Fitness exercise",phone:"4567-8901",time:"6:00-22:00"},{title_zh:"游泳池",title_en:"Swimming Pool",desc_zh:"游泳休閒",desc_en:"Swimming leisure",phone:"5678-9012",time:"6:00-22:00"},{title_zh:"綜合球場",title_en:"Comprehensive Court",desc_zh:"多功能球場",desc_en:"Multi-purpose court",phone:"6789-0123",time:"6:00-22:00"}],leisure:[{title_zh:"圖書館",title_en:"Library",desc_zh:"閱讀書籍",desc_en:"Read books",phone:"7890-1234",time:"9:00-20:00"},{title_zh:"書店",title_en:"Book Store",desc_zh:"買書看書",desc_en:"Buy and read books",phone:"8901-2345",time:"9:00-20:00"},{title_zh:"展演廳",title_en:"Exhibition Hall",desc_zh:"展演活動",desc_en:"Exhibitions and performances",phone:"9012-3456",time:"9:00-20:00"}],food:[{title_zh:"麵包店",title_en:"Bread Store",desc_zh:"各式麵包",desc_en:"Various breads",phone:"0123-4567",time:"8:00-20:00"},{title_zh:"超商",title_en:"Convenience Store",desc_zh:"便利商店",desc_en:"Convenience store",phone:"1234-5670",time:"0:00-24:00"},{title_zh:"咖啡廳",title_en:"Coffee Shop",desc_zh:"飲品咖啡",desc_en:"Drinks and coffee",phone:"2345-6780",time:"8:00-20:00"}]};function f4({category:e,title:t,desc:n,phone:i,time:l}){return Tt.jsxs("div",{className:`card ${e}`,children:[Tt.jsx("h3",{children:t}),Tt.jsx("p",{children:n}),Tt.jsxs("p",{children:["📞 ",i]}),Tt.jsxs("p",{children:["🕒 ",l]})]})}function d4({lang:e}){const[t,n]=st.useState("office"),i=[{key:"office",label_zh:"辦公場所",label_en:"Office"},{key:"sport",label_zh:"運動設施",label_en:"Sports"},{key:"leisure",label_zh:"休閒場所",label_en:"Leisure"},{key:"food",label_zh:"美食街",label_en:"Food Court"}];return Tt.jsxs("div",{className:"explore-page",children:[Tt.jsx("h1",{children:e==="zh"?"探索環境":"Explore Environment"}),Tt.jsx("div",{className:"category-buttons",children:i.map(l=>Tt.jsx("button",{className:`category-btn ${t===l.key?"active":""}`,onClick:()=>n(l.key),children:e==="zh"?l.label_zh:l.label_en},l.key))}),Tt.jsx("div",{className:"cards-container",children:h4[t].map((l,u)=>Tt.jsx(f4,{category:t,title:e==="zh"?l.title_zh:l.title_en,desc:e==="zh"?l.desc_zh:l.desc_en,phone:l.phone,time:l.time},u))})]})}function XA({tasks:e=[],completedIds:t=[],onComplete:n,onScanQRCode:i,lang:l="zh"}){const u={zh:{point:"分",complete:"完成",scan:"掃描",done:"已完成",startScan:"開始掃描"},en:{point:"pt",complete:"Complete",scan:"Scan",done:"Done",startScan:"Start Scan"}};return Tt.jsx("ul",{style:{listStyle:"none",padding:0,width:"100%"},children:e.map(g=>{const w=t.includes(g.id),E=g.requiresQRCode;return Tt.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",border:"1px solid #eee",borderRadius:8,marginBottom:8,background:w?"#f6fff6":"#fff"},children:[Tt.jsxs("div",{style:{textAlign:"left"},children:[Tt.jsx("div",{style:{fontWeight:600},children:g.text}),Tt.jsxs("div",{style:{fontSize:12,color:"#666"},children:[g.point," ",u[l].point]})]}),w?Tt.jsx("button",{disabled:!0,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#9e9e9e",color:"#fff",cursor:"not-allowed"},children:g.doneLabel||u[l].done}):E?Tt.jsx("button",{onClick:()=>i&&i(g),style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#4caf50",color:"#fff",cursor:"pointer"},children:u[l].startScan}):Tt.jsx("button",{onClick:()=>n&&n(g),style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:"#2196f3",color:"#fff",cursor:"pointer"},children:g.completeLabel||u[l].complete})]},g.id)})})}const g4=()=>{};var WA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let l=e.charCodeAt(i);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},m4=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const l=e[n++];if(l<128)t[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=e[n++];t[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=e[n++],g=e[n++],w=e[n++],E=((l&7)<<18|(u&63)<<12|(g&63)<<6|w&63)-65536;t[i++]=String.fromCharCode(55296+(E>>10)),t[i++]=String.fromCharCode(56320+(E&1023))}else{const u=e[n++],g=e[n++];t[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|g&63)}}return t.join("")},__={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<e.length;l+=3){const u=e[l],g=l+1<e.length,w=g?e[l+1]:0,E=l+2<e.length,y=E?e[l+2]:0,_=u>>2,b=(u&3)<<4|w>>4;let R=(w&15)<<2|y>>6,k=y&63;E||(k=64,g||(R=64)),i.push(n[_],n[b],n[R],n[k])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T_(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):m4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<e.length;){const u=n[e.charAt(l++)],w=l<e.length?n[e.charAt(l)]:0;++l;const y=l<e.length?n[e.charAt(l)]:64;++l;const b=l<e.length?n[e.charAt(l)]:64;if(++l,u==null||w==null||y==null||b==null)throw new p4;const R=u<<2|w>>4;if(i.push(R),y!==64){const k=w<<4&240|y>>2;if(i.push(k),b!==64){const z=y<<6&192|b;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class p4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y4=function(e){const t=T_(e);return __.encodeByteArray(t,!0)},Cd=function(e){return y4(e).replace(/\./g,"")},C_=function(e){try{return __.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=()=>E4().__FIREBASE_DEFAULTS__,x4=()=>{if(typeof process>"u"||typeof WA>"u")return;const e=WA.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},w4=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&C_(e[1]);return t&&JSON.parse(t)},a0=()=>{try{return g4()||A4()||x4()||w4()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},v_=e=>a0()?.emulatorHosts?.[e],S_=e=>{const t=v_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},b_=()=>a0()?.config,I_=e=>a0()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cp(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",l=e.iat||0,u=e.sub||e.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const g={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Cd(JSON.stringify(n)),Cd(JSON.stringify(g)),""].join(".")}const th={};function _4(){const e={prod:[],emulator:[]};for(const t of Object.keys(th))th[t]?e.emulator.push(t):e.prod.push(t);return e}function C4(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let KA=!1;function up(e,t){if(typeof window>"u"||typeof document>"u"||!Ul(window.location.host)||th[e]===t||th[e]||KA)return;th[e]=t;function n(R){return`__firebase__banner__${R}`}const i="__firebase__banner",u=_4().prod.length>0;function g(){const R=document.getElementById(i);R&&R.remove()}function w(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function E(R,k){R.setAttribute("width","24"),R.setAttribute("id",k),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{KA=!0,g()},R}function _(R,k){R.setAttribute("id",k),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function b(){const R=C4(i),k=n("text"),z=document.getElementById(k)||document.createElement("span"),q=n("learnmore"),j=document.getElementById(q)||document.createElement("a"),nt=n("preprendIcon"),Z=document.getElementById(nt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const W=R.element;w(W),_(j,q);const yt=y();E(Z,nt),W.append(Z,z,j,yt),document.body.appendChild(W)}u?(z.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zi())}function S4(){const e=a0()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N_(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function I4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R4(){const e=Zi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function N4(){return!S4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D_(){try{return typeof indexedDB=="object"}catch{return!1}}function M_(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}function D4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="FirebaseError";class cs extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=M4,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},l=`${this.service}/${t}`,u=this.errors[t],g=u?O4(u,i):"Error",w=`${this.serviceName}: ${g} (${l}).`;return new cs(l,w,i)}}function O4(e,t){return e.replace(P4,(n,i)=>{const l=t[i];return l!=null?String(l):`<${i}?>`})}const P4=/\{\$([^}]+)}/g;function L4(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vo(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const l of n){if(!i.includes(l))return!1;const u=e[l],g=t[l];if(QA(u)&&QA(g)){if(!Vo(u,g))return!1}else if(u!==g)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function QA(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function k4(e,t){const n=new B4(e,t);return n.subscribe.bind(n)}class B4{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let l;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");V4(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:i},l.next===void 0&&(l.next=Ig),l.error===void 0&&(l.error=Ig),l.complete===void 0&&(l.complete=Ig);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V4(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ig(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=1e3,F4=2,z4=14400*1e3,j4=.5;function ZA(e,t=U4,n=F4){const i=t*Math.pow(n,e),l=Math.round(j4*i*(Math.random()-.5)*2);return Math.min(z4,i+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(e){return e&&e._delegate?e._delegate:e}class ls{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new T4;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(q4(t))try{this.getOrInitializeService({instanceIdentifier:Al})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(t=Al){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Al){return this.instances.has(t)}getOptions(t=Al){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,g]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(u);i===w&&g.resolve(l)}return l}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(t),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&t(u,i),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:G4(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Al){return this.component?this.component.multipleInstances?t:Al:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G4(e){return e===Al?void 0:e}function q4(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new H4(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Me||(Me={}));const X4={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},W4=Me.INFO,K4={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Q4=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),l=K4[t];if(l)console[l](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class o0{constructor(t){this.name=t,this._logLevel=W4,this._logHandler=Q4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?X4[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...t),this._logHandler(this,Me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...t),this._logHandler(this,Me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...t),this._logHandler(this,Me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...t),this._logHandler(this,Me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...t),this._logHandler(this,Me.ERROR,...t)}}const Z4=(e,t)=>t.some(n=>e instanceof n);let JA,$A;function J4(){return JA||(JA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $4(){return $A||($A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O_=new WeakMap,om=new WeakMap,P_=new WeakMap,Rg=new WeakMap,hp=new WeakMap;function tN(e){const t=new Promise((n,i)=>{const l=()=>{e.removeEventListener("success",u),e.removeEventListener("error",g)},u=()=>{n(Mo(e.result)),l()},g=()=>{i(e.error),l()};e.addEventListener("success",u),e.addEventListener("error",g)});return t.then(n=>{n instanceof IDBCursor&&O_.set(n,e)}).catch(()=>{}),hp.set(t,e),t}function eN(e){if(om.has(e))return;const t=new Promise((n,i)=>{const l=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",g),e.removeEventListener("abort",g)},u=()=>{n(),l()},g=()=>{i(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",u),e.addEventListener("error",g),e.addEventListener("abort",g)});om.set(e,t)}let lm={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return om.get(e);if(t==="objectStoreNames")return e.objectStoreNames||P_.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mo(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function nN(e){lm=e(lm)}function iN(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Ng(this),t,...n);return P_.set(i,t.sort?t.sort():[t]),Mo(i)}:$4().includes(e)?function(...t){return e.apply(Ng(this),t),Mo(O_.get(this))}:function(...t){return Mo(e.apply(Ng(this),t))}}function rN(e){return typeof e=="function"?iN(e):(e instanceof IDBTransaction&&eN(e),Z4(e,J4())?new Proxy(e,lm):e)}function Mo(e){if(e instanceof IDBRequest)return tN(e);if(Rg.has(e))return Rg.get(e);const t=rN(e);return t!==e&&(Rg.set(e,t),hp.set(t,e)),t}const Ng=e=>hp.get(e);function L_(e,t,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const g=indexedDB.open(e,t),w=Mo(g);return i&&g.addEventListener("upgradeneeded",E=>{i(Mo(g.result),E.oldVersion,E.newVersion,Mo(g.transaction),E)}),n&&g.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),w.then(E=>{u&&E.addEventListener("close",()=>u()),l&&E.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),w}const sN=["get","getKey","getAll","getAllKeys","count"],aN=["put","add","delete","clear"],Dg=new Map;function tx(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Dg.get(t))return Dg.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,l=aN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||sN.includes(n)))return;const u=async function(g,...w){const E=this.transaction(g,l?"readwrite":"readonly");let y=E.store;return i&&(y=y.index(w.shift())),(await Promise.all([y[n](...w),l&&E.done]))[0]};return Dg.set(t,u),u}nN(e=>({...e,get:(t,n,i)=>tx(t,n)||e.get(t,n,i),has:(t,n)=>!!tx(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function lN(e){return e.getComponent()?.type==="VERSION"}const cm="@firebase/app",ex="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new o0("@firebase/app"),cN="@firebase/app-compat",uN="@firebase/analytics-compat",hN="@firebase/analytics",fN="@firebase/app-check-compat",dN="@firebase/app-check",gN="@firebase/auth",mN="@firebase/auth-compat",pN="@firebase/database",yN="@firebase/data-connect",EN="@firebase/database-compat",AN="@firebase/functions",xN="@firebase/functions-compat",wN="@firebase/installations",TN="@firebase/installations-compat",_N="@firebase/messaging",CN="@firebase/messaging-compat",vN="@firebase/performance",SN="@firebase/performance-compat",bN="@firebase/remote-config",IN="@firebase/remote-config-compat",RN="@firebase/storage",NN="@firebase/storage-compat",DN="@firebase/firestore",MN="@firebase/ai",ON="@firebase/firestore-compat",PN="firebase",LN="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="[DEFAULT]",kN={[cm]:"fire-core",[cN]:"fire-core-compat",[hN]:"fire-analytics",[uN]:"fire-analytics-compat",[dN]:"fire-app-check",[fN]:"fire-app-check-compat",[gN]:"fire-auth",[mN]:"fire-auth-compat",[pN]:"fire-rtdb",[yN]:"fire-data-connect",[EN]:"fire-rtdb-compat",[AN]:"fire-fn",[xN]:"fire-fn-compat",[wN]:"fire-iid",[TN]:"fire-iid-compat",[_N]:"fire-fcm",[CN]:"fire-fcm-compat",[vN]:"fire-perf",[SN]:"fire-perf-compat",[bN]:"fire-rc",[IN]:"fire-rc-compat",[RN]:"fire-gcs",[NN]:"fire-gcs-compat",[DN]:"fire-fst",[ON]:"fire-fst-compat",[MN]:"fire-vertex","fire-js":"fire-js",[PN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,BN=new Map,hm=new Map;function nx(e,t){try{e.container.addComponent(t)}catch(n){ja.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Rs(e){const t=e.name;if(hm.has(t))return ja.debug(`There were multiple attempts to register component ${t}.`),!1;hm.set(t,e);for(const n of vd.values())nx(n,e);for(const n of BN.values())nx(n,e);return!0}function Wo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ss(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new Fl("app","Firebase",VN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=LN;function k_(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:um,automaticDataCollectionEnabled:!0,...t},l=i.name;if(typeof l!="string"||!l)throw Oo.create("bad-app-name",{appName:String(l)});if(n||(n=b_()),!n)throw Oo.create("no-options");const u=vd.get(l);if(u){if(Vo(n,u.options)&&Vo(i,u.config))return u;throw Oo.create("duplicate-app",{appName:l})}const g=new Y4(l);for(const E of hm.values())g.addComponent(E);const w=new UN(n,i,g);return vd.set(l,w),w}function l0(e=um){const t=vd.get(e);if(!t&&e===um&&b_())return k_();if(!t)throw Oo.create("no-app",{appName:e});return t}function yr(e,t,n){let i=kN[e]??e;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const g=[`Unable to register library "${i}" with version "${t}":`];l&&g.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&g.push("and"),u&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ja.warn(g.join(" "));return}Rs(new ls(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebase-heartbeat-database",zN=1,gh="firebase-heartbeat-store";let Mg=null;function B_(){return Mg||(Mg=L_(FN,zN,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(gh)}catch(n){console.warn(n)}}}}).catch(e=>{throw Oo.create("idb-open",{originalErrorMessage:e.message})})),Mg}async function jN(e){try{const n=(await B_()).transaction(gh),i=await n.objectStore(gh).get(V_(e));return await n.done,i}catch(t){if(t instanceof cs)ja.warn(t.message);else{const n=Oo.create("idb-get",{originalErrorMessage:t?.message});ja.warn(n.message)}}}async function ix(e,t){try{const i=(await B_()).transaction(gh,"readwrite");await i.objectStore(gh).put(t,V_(e)),await i.done}catch(n){if(n instanceof cs)ja.warn(n.message);else{const i=Oo.create("idb-set",{originalErrorMessage:n?.message});ja.warn(i.message)}}}function V_(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=1024,GN=30;class qN{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>GN){const l=WN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ja.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rx(),{heartbeatsToSend:n,unsentEntries:i}=YN(this._heartbeatsCache.heartbeats),l=Cd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ja.warn(t),""}}}function rx(){return new Date().toISOString().substring(0,10)}function YN(e,t=HN){const n=[];let i=e.slice();for(const l of e){const u=n.find(g=>g.agent===l.agent);if(u){if(u.dates.push(l.date),sx(n)>t){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),sx(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class XN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D_()?M_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return ix(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return ix(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function sx(e){return Cd(JSON.stringify({version:2,heartbeats:e})).length}function WN(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(e){Rs(new ls("platform-logger",t=>new oN(t),"PRIVATE")),Rs(new ls("heartbeat",t=>new qN(t),"PRIVATE")),yr(cm,ex,e),yr(cm,ex,"esm2020"),yr("fire-js","")}KN("");var QN="firebase",ZN="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(QN,ZN,"app");const U_="@firebase/installations",fp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=1e4,z_=`w:${fp}`,j_="FIS_v2",JN="https://firebaseinstallations.googleapis.com/v1",$N=3600*1e3,tD="installations",eD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Nl=new Fl(tD,eD,nD);function H_(e){return e instanceof cs&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_({projectId:e}){return`${JN}/projects/${e}/installations`}function q_(e){return{token:e.token,requestStatus:2,expiresIn:rD(e.expiresIn),creationTime:Date.now()}}async function Y_(e,t){const i=(await t.json()).error;return Nl.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function X_({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function iD(e,{refreshToken:t}){const n=X_(e);return n.append("Authorization",sD(t)),n}async function W_(e){const t=await e();return t.status>=500&&t.status<600?e():t}function rD(e){return Number(e.replace("s","000"))}function sD(e){return`${j_} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=G_(e),l=X_(e),u=t.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const g={fid:n,authVersion:j_,appId:e.appId,sdkVersion:z_},w={method:"POST",headers:l,body:JSON.stringify(g)},E=await W_(()=>fetch(i,w));if(E.ok){const y=await E.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:q_(y.authToken)}}else throw await Y_("Create Installation",E)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=/^[cdef][\w-]{21}$/,fm="";function cD(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=uD(e);return lD.test(n)?n:fm}catch{return fm}}function uD(e){return oD(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Map;function Z_(e,t){const n=c0(e);J_(n,t),hD(n,t)}function J_(e,t){const n=Q_.get(e);if(n)for(const i of n)i(t)}function hD(e,t){const n=fD();n&&n.postMessage({key:e,fid:t}),dD()}let wl=null;function fD(){return!wl&&"BroadcastChannel"in self&&(wl=new BroadcastChannel("[Firebase] FID Change"),wl.onmessage=e=>{J_(e.data.key,e.data.fid)}),wl}function dD(){Q_.size===0&&wl&&(wl.close(),wl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="firebase-installations-database",mD=1,Dl="firebase-installations-store";let Og=null;function dp(){return Og||(Og=L_(gD,mD,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Dl)}}})),Og}async function Sd(e,t){const n=c0(e),l=(await dp()).transaction(Dl,"readwrite"),u=l.objectStore(Dl),g=await u.get(n);return await u.put(t,n),await l.done,(!g||g.fid!==t.fid)&&Z_(e,t.fid),t}async function $_(e){const t=c0(e),i=(await dp()).transaction(Dl,"readwrite");await i.objectStore(Dl).delete(t),await i.done}async function u0(e,t){const n=c0(e),l=(await dp()).transaction(Dl,"readwrite"),u=l.objectStore(Dl),g=await u.get(n),w=t(g);return w===void 0?await u.delete(n):await u.put(w,n),await l.done,w&&(!g||g.fid!==w.fid)&&Z_(e,w.fid),w}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(e){let t;const n=await u0(e.appConfig,i=>{const l=pD(i),u=yD(e,l);return t=u.registrationPromise,u.installationEntry});return n.fid===fm?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function pD(e){const t=e||{fid:cD(),registrationStatus:0};return tC(t)}function yD(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Nl.create("app-offline"));return{installationEntry:t,registrationPromise:l}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=ED(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:AD(e)}:{installationEntry:t}}async function ED(e,t){try{const n=await aD(e,t);return Sd(e.appConfig,n)}catch(n){throw H_(n)&&n.customData.serverCode===409?await $_(e.appConfig):await Sd(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function AD(e){let t=await ax(e.appConfig);for(;t.registrationStatus===1;)await K_(100),t=await ax(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await gp(e);return i||n}return t}function ax(e){return u0(e,t=>{if(!t)throw Nl.create("installation-not-found");return tC(t)})}function tC(e){return xD(e)?{fid:e.fid,registrationStatus:0}:e}function xD(e){return e.registrationStatus===1&&e.registrationTime+F_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD({appConfig:e,heartbeatServiceProvider:t},n){const i=TD(e,n),l=iD(e,n),u=t.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const g={installation:{sdkVersion:z_,appId:e.appId}},w={method:"POST",headers:l,body:JSON.stringify(g)},E=await W_(()=>fetch(i,w));if(E.ok){const y=await E.json();return q_(y)}else throw await Y_("Generate Auth Token",E)}function TD(e,{fid:t}){return`${G_(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mp(e,t=!1){let n;const i=await u0(e.appConfig,u=>{if(!eC(u))throw Nl.create("not-registered");const g=u.authToken;if(!t&&vD(g))return u;if(g.requestStatus===1)return n=_D(e,t),u;{if(!navigator.onLine)throw Nl.create("app-offline");const w=bD(u);return n=CD(e,w),w}});return n?await n:i.authToken}async function _D(e,t){let n=await ox(e.appConfig);for(;n.authToken.requestStatus===1;)await K_(100),n=await ox(e.appConfig);const i=n.authToken;return i.requestStatus===0?mp(e,t):i}function ox(e){return u0(e,t=>{if(!eC(t))throw Nl.create("not-registered");const n=t.authToken;return ID(n)?{...t,authToken:{requestStatus:0}}:t})}async function CD(e,t){try{const n=await wD(e,t),i={...t,authToken:n};return await Sd(e.appConfig,i),n}catch(n){if(H_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await $_(e.appConfig);else{const i={...t,authToken:{requestStatus:0}};await Sd(e.appConfig,i)}throw n}}function eC(e){return e!==void 0&&e.registrationStatus===2}function vD(e){return e.requestStatus===2&&!SD(e)}function SD(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+$N}function bD(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function ID(e){return e.requestStatus===1&&e.requestTime+F_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(e){const t=e,{installationEntry:n,registrationPromise:i}=await gp(t);return i?i.catch(console.error):mp(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(e,t=!1){const n=e;return await DD(n),(await mp(n,t)).token}async function DD(e){const{registrationPromise:t}=await gp(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(e){if(!e||!e.options)throw Pg("App Configuration");if(!e.name)throw Pg("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Pg(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Pg(e){return Nl.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="installations",OD="installations-internal",PD=e=>{const t=e.getProvider("app").getImmediate(),n=MD(t),i=Wo(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},LD=e=>{const t=e.getProvider("app").getImmediate(),n=Wo(t,nC).getImmediate();return{getId:()=>RD(n),getToken:l=>ND(n,l)}};function kD(){Rs(new ls(nC,PD,"PUBLIC")),Rs(new ls(OD,LD,"PRIVATE"))}kD();yr(U_,fp);yr(U_,fp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="analytics",BD="firebase_id",VD="origin",UD=60*1e3,FD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new o0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gr=new Fl("analytics","Analytics",zD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(e){if(!e.startsWith(pp)){const t=Gr.create("invalid-gtag-resource",{gtagURL:e});return Er.warn(t.message),""}return e}function iC(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function HD(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function GD(e,t){const n=HD("firebase-js-sdk-policy",{createScriptURL:jD}),i=document.createElement("script"),l=`${pp}?l=${e}&id=${t}`;i.src=n?n?.createScriptURL(l):l,i.async=!0,document.head.appendChild(i)}function qD(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function YD(e,t,n,i,l,u){const g=i[l];try{if(g)await t[g];else{const E=(await iC(n)).find(y=>y.measurementId===l);E&&await t[E.appId]}}catch(w){Er.error(w)}e("config",l,u)}async function XD(e,t,n,i,l){try{let u=[];if(l&&l.send_to){let g=l.send_to;Array.isArray(g)||(g=[g]);const w=await iC(n);for(const E of g){const y=w.find(b=>b.measurementId===E),_=y&&t[y.appId];if(_)u.push(_);else{u=[];break}}}u.length===0&&(u=Object.values(t)),await Promise.all(u),e("event",i,l||{})}catch(u){Er.error(u)}}function WD(e,t,n,i){async function l(u,...g){try{if(u==="event"){const[w,E]=g;await XD(e,t,n,w,E)}else if(u==="config"){const[w,E]=g;await YD(e,t,n,i,w,E)}else if(u==="consent"){const[w,E]=g;e("consent",w,E)}else if(u==="get"){const[w,E,y]=g;e("get",w,E,y)}else if(u==="set"){const[w]=g;e("set",w)}else e(u,...g)}catch(w){Er.error(w)}}return l}function KD(e,t,n,i,l){let u=function(...g){window[i].push(arguments)};return window[l]&&typeof window[l]=="function"&&(u=window[l]),window[l]=WD(u,e,t,n),{gtagCore:u,wrappedGtag:window[l]}}function QD(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(pp)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=30,JD=1e3;class $D{constructor(t={},n=JD){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const rC=new $D;function t8(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function e8(e){const{appId:t,apiKey:n}=e,i={method:"GET",headers:t8(n)},l=FD.replace("{app-id}",t),u=await fetch(l,i);if(u.status!==200&&u.status!==304){let g="";try{const w=await u.json();w.error?.message&&(g=w.error.message)}catch{}throw Gr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:g})}return u.json()}async function n8(e,t=rC,n){const{appId:i,apiKey:l,measurementId:u}=e.options;if(!i)throw Gr.create("no-app-id");if(!l){if(u)return{measurementId:u,appId:i};throw Gr.create("no-api-key")}const g=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},w=new s8;return setTimeout(async()=>{w.abort()},UD),sC({appId:i,apiKey:l,measurementId:u},g,w,t)}async function sC(e,{throttleEndTimeMillis:t,backoffCount:n},i,l=rC){const{appId:u,measurementId:g}=e;try{await i8(i,t)}catch(w){if(g)return Er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${w?.message}]`),{appId:u,measurementId:g};throw w}try{const w=await e8(e);return l.deleteThrottleMetadata(u),w}catch(w){const E=w;if(!r8(E)){if(l.deleteThrottleMetadata(u),g)return Er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${E?.message}]`),{appId:u,measurementId:g};throw w}const y=Number(E?.customData?.httpStatus)===503?ZA(n,l.intervalMillis,ZD):ZA(n,l.intervalMillis),_={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return l.setThrottleMetadata(u,_),Er.debug(`Calling attemptFetch again in ${y} millis`),sC(e,_,i,l)}}function i8(e,t){return new Promise((n,i)=>{const l=Math.max(t-Date.now(),0),u=setTimeout(n,l);e.addEventListener(()=>{clearTimeout(u),i(Gr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function r8(e){if(!(e instanceof cs)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class s8{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function a8(e,t,n,i,l){if(l&&l.global){e("event",n,i);return}else{const u=await t,g={...i,send_to:u};e("event",n,g)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8(){if(D_())try{await M_()}catch(e){return Er.warn(Gr.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return Er.warn(Gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function l8(e,t,n,i,l,u,g){const w=n8(e);w.then(R=>{n[R.measurementId]=R.appId,e.options.measurementId&&R.measurementId!==e.options.measurementId&&Er.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Er.error(R)),t.push(w);const E=o8().then(R=>{if(R)return i.getId()}),[y,_]=await Promise.all([w,E]);QD(u)||GD(u,y.measurementId),l("js",new Date);const b=g?.config??{};return b[VD]="firebase",b.update=!0,_!=null&&(b[BD]=_),l("config",y.measurementId,b),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(t){this.app=t}_delete(){return delete eh[this.app.options.appId],Promise.resolve()}}let eh={},lx=[];const cx={};let Lg="dataLayer",u8="gtag",ux,aC,hx=!1;function h8(){const e=[];if(N_()&&e.push("This is a browser extension environment."),D4()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,l)=>`(${l+1}) ${i}`).join(" "),n=Gr.create("invalid-analytics-context",{errorInfo:t});Er.warn(n.message)}}function f8(e,t,n){h8();const i=e.options.appId;if(!i)throw Gr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gr.create("no-api-key");if(eh[i]!=null)throw Gr.create("already-exists",{id:i});if(!hx){qD(Lg);const{wrappedGtag:u,gtagCore:g}=KD(eh,lx,cx,Lg,u8);aC=u,ux=g,hx=!0}return eh[i]=l8(e,lx,cx,t,ux,Lg,n),new c8(e)}function d8(e=l0()){e=Ci(e);const t=Wo(e,bd);return t.isInitialized()?t.getImmediate():g8(e)}function g8(e,t={}){const n=Wo(e,bd);if(n.isInitialized()){const l=n.getImmediate();if(Vo(t,n.getOptions()))return l;throw Gr.create("already-initialized")}return n.initialize({options:t})}function m8(e,t,n,i){e=Ci(e),a8(aC,eh[e.app.options.appId],t,n,i).catch(l=>Er.error(l))}const fx="@firebase/analytics",dx="0.10.18";function p8(){Rs(new ls(bd,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),l=t.getProvider("installations-internal").getImmediate();return f8(i,l,n)},"PUBLIC")),Rs(new ls("analytics-internal",e,"PRIVATE")),yr(fx,dx),yr(fx,dx,"esm2020");function e(t){try{const n=t.getProvider(bd).getImmediate();return{logEvent:(i,l,u)=>m8(n,i,l,u)}}catch(n){throw Gr.create("interop-component-reg-failed",{reason:n})}}}p8();function oC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y8=oC,lC=new Fl("auth","Firebase",oC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new o0("@firebase/auth");function E8(e,...t){Id.logLevel<=Me.WARN&&Id.warn(`Auth (${zl}): ${e}`,...t)}function ld(e,...t){Id.logLevel<=Me.ERROR&&Id.error(`Auth (${zl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(e,...t){throw Ep(e,...t)}function bs(e,...t){return Ep(e,...t)}function yp(e,t,n){const i={...y8(),[t]:n};return new Fl("auth","Firebase",i).create(t,{appName:e.name})}function Sl(e){return yp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A8(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&ia(e,"argument-error"),yp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ep(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return lC.create(e,...t)}function ue(e,t,...n){if(!e)throw Ep(t,...n)}function Ba(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ld(t),new Error(t)}function Ha(e,t){e||Ba(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return typeof self<"u"&&self.location?.href||""}function x8(){return gx()==="http:"||gx()==="https:"}function gx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x8()||N_()||"connection"in navigator)?navigator.onLine:!0}function T8(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ha(n>t,"Short delay should be less than long delay!"),this.isMobile=v4()||I4()}get(){return w8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(e,t){Ha(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v8=new Ph(3e4,6e4);function xp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Qc(e,t,n,i,l={}){return uC(e,l,async()=>{let u={},g={};i&&(t==="GET"?g=i:u={body:JSON.stringify(i)});const w=Oh({key:e.config.apiKey,...g}).slice(1),E=await e._getAdditionalHeaders();E["Content-Type"]="application/json",e.languageCode&&(E["X-Firebase-Locale"]=e.languageCode);const y={method:t,headers:E,...u};return b4()||(y.referrerPolicy="no-referrer"),e.emulatorConfig&&Ul(e.emulatorConfig.host)&&(y.credentials="include"),cC.fetch()(await hC(e,e.config.apiHost,n,w),y)})}async function uC(e,t,n){e._canInitEmulator=!1;const i={..._8,...t};try{const l=new b8(e),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const g=await u.json();if("needConfirmation"in g)throw Qf(e,"account-exists-with-different-credential",g);if(u.ok&&!("errorMessage"in g))return g;{const w=u.ok?g.errorMessage:g.error.message,[E,y]=w.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qf(e,"credential-already-in-use",g);if(E==="EMAIL_EXISTS")throw Qf(e,"email-already-in-use",g);if(E==="USER_DISABLED")throw Qf(e,"user-disabled",g);const _=i[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw yp(e,_,y);ia(e,_)}}catch(l){if(l instanceof cs)throw l;ia(e,"network-request-failed",{message:String(l)})}}async function S8(e,t,n,i,l={}){const u=await Qc(e,t,n,i,l);return"mfaPendingCredential"in u&&ia(e,"multi-factor-auth-required",{_serverResponse:u}),u}async function hC(e,t,n,i){const l=`${t}${n}?${i}`,u=e,g=u.config.emulator?Ap(e.config,l):`${e.config.apiScheme}://${l}`;return C8.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(g).toString():g}class b8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bs(this.auth,"network-request-failed")),v8.get())})}}function Qf(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=bs(e,t,i);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(e,t){return Qc(e,"POST","/v1/accounts:delete",t)}async function Rd(e,t){return Qc(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function R8(e,t=!1){const n=Ci(e),i=await n.getIdToken(t),l=wp(i);ue(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,g=u?.sign_in_provider;return{claims:l,token:i,authTime:nh(kg(l.auth_time)),issuedAtTime:nh(kg(l.iat)),expirationTime:nh(kg(l.exp)),signInProvider:g||null,signInSecondFactor:u?.sign_in_second_factor||null}}function kg(e){return Number(e)*1e3}function wp(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const l=C_(n);return l?JSON.parse(l):(ld("Failed to decode base64 JWT payload"),null)}catch(l){return ld("Caught error parsing JWT payload as JSON",l?.toString()),null}}function mx(e){const t=wp(e);return ue(t,"internal-error"),ue(typeof t.exp<"u","internal-error"),ue(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof cs&&N8(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function N8({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nh(this.lastLoginAt),this.creationTime=nh(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(e){const t=e.auth,n=await e.getIdToken(),i=await mh(e,Rd(t,{idToken:n}));ue(i?.users.length,t,"internal-error");const l=i.users[0];e._notifyReloadListener(l);const u=l.providerUserInfo?.length?fC(l.providerUserInfo):[],g=O8(e.providerData,u),w=e.isAnonymous,E=!(e.email&&l.passwordHash)&&!g?.length,y=w?E:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:g,metadata:new gm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,_)}async function M8(e){const t=Ci(e);await Nd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function O8(e,t){return[...e.filter(i=>!t.some(l=>l.providerId===i.providerId)),...t]}function fC(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(e,t){const n=await uC(e,{},async()=>{const i=Oh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:u}=e.config,g=await hC(e,l,"/v1/token",`key=${u}`),w=await e._getAdditionalHeaders();w["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:w,body:i};return e.emulatorConfig&&Ul(e.emulatorConfig.host)&&(E.credentials="include"),cC.fetch()(g,E)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L8(e,t){return Qc(e,"POST","/v2/accounts:revokeToken",xp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ue(t.idToken,"internal-error"),ue(typeof t.idToken<"u","internal-error"),ue(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):mx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ue(t.length!==0,"internal-error");const n=mx(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await P8(t,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,g=new Lc;return i&&(ue(typeof i=="string","internal-error",{appName:t}),g.refreshToken=i),l&&(ue(typeof l=="string","internal-error",{appName:t}),g.accessToken=l),u&&(ue(typeof u=="number","internal-error",{appName:t}),g.expirationTime=u),g}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Lc,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(e,t){ue(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class vs{constructor({uid:t,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new D8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await mh(this,this.stsTokenManager.getToken(this.auth,t));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return R8(this,t)}reload(){return M8(this)}_assign(t){this!==t&&(ue(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new vs({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(Sl(this.auth));const t=await this.getIdToken();return await mh(this,I8(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,g=n.photoURL??void 0,w=n.tenantId??void 0,E=n._redirectEventId??void 0,y=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:b,emailVerified:R,isAnonymous:k,providerData:z,stsTokenManager:q}=n;ue(b&&q,t,"internal-error");const j=Lc.fromJSON(this.name,q);ue(typeof b=="string",t,"internal-error"),Co(i,t.name),Co(l,t.name),ue(typeof R=="boolean",t,"internal-error"),ue(typeof k=="boolean",t,"internal-error"),Co(u,t.name),Co(g,t.name),Co(w,t.name),Co(E,t.name),Co(y,t.name),Co(_,t.name);const nt=new vs({uid:b,auth:t,email:l,emailVerified:R,displayName:i,isAnonymous:k,photoURL:g,phoneNumber:u,tenantId:w,stsTokenManager:j,createdAt:y,lastLoginAt:_});return z&&Array.isArray(z)&&(nt.providerData=z.map(Z=>({...Z}))),E&&(nt._redirectEventId=E),nt}static async _fromIdTokenResponse(t,n,i=!1){const l=new Lc;l.updateFromServerResponse(n);const u=new vs({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:i});return await Nd(u),u}static async _fromGetAccountInfoResponse(t,n,i){const l=n.users[0];ue(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?fC(l.providerUserInfo):[],g=!(l.email&&l.passwordHash)&&!u?.length,w=new Lc;w.updateFromIdToken(i);const E=new vs({uid:l.localId,auth:t,stsTokenManager:w,isAnonymous:g}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new gm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(E,y),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=new Map;function Va(e){Ha(e instanceof Function,"Expected a class definition");let t=px.get(e);return t?(Ha(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,px.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}dC.type="NONE";const yx=dC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(e,t,n){return`firebase:${e}:${t}:${n}`}class kc{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=cd(this.userKey,l.apiKey,u),this.fullPersistenceKey=cd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Rd(this.auth,{idToken:t}).catch(()=>{});return n?vs._fromGetAccountInfoResponse(this.auth,n,t):null}return vs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new kc(Va(yx),t,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Va(yx);const g=cd(i,t.config.apiKey,t.name);let w=null;for(const y of n)try{const _=await y._get(g);if(_){let b;if(typeof _=="string"){const R=await Rd(t,{idToken:_}).catch(()=>{});if(!R)break;b=await vs._fromGetAccountInfoResponse(t,R,_)}else b=vs._fromJSON(t,_);y!==u&&(w=b),u=y;break}}catch{}const E=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!E.length?new kc(u,t,i):(u=E[0],w&&await u._set(g,w.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(g)}catch{}})),new kc(u,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(AC(t))return"Blackberry";if(xC(t))return"Webos";if(mC(t))return"Safari";if((t.includes("chrome/")||pC(t))&&!t.includes("edge/"))return"Chrome";if(EC(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function gC(e=Zi()){return/firefox\//i.test(e)}function mC(e=Zi()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function pC(e=Zi()){return/crios\//i.test(e)}function yC(e=Zi()){return/iemobile/i.test(e)}function EC(e=Zi()){return/android/i.test(e)}function AC(e=Zi()){return/blackberry/i.test(e)}function xC(e=Zi()){return/webos/i.test(e)}function Tp(e=Zi()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function k8(e=Zi()){return Tp(e)&&!!window.navigator?.standalone}function B8(){return R4()&&document.documentMode===10}function wC(e=Zi()){return Tp(e)||EC(e)||xC(e)||AC(e)||/windows phone/i.test(e)||yC(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(e,t=[]){let n;switch(e){case"Browser":n=Ex(Zi());break;case"Worker":n=`${Ex(Zi())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${zl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=u=>new Promise((g,w)=>{try{const E=t(u);g(E)}catch(E){w(E)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(e,t={}){return Qc(e,"GET","/v2/passwordPolicy",xp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=6;class z8{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??F8,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<t.length;l++)i=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(t,n,i,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ax(this),this.idTokenSubscription=new Ax(this),this.beforeStateQueue=new V8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Va(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await kc.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Rd(this,{idToken:t}),i=await vs._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ss(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,g=i?._redirectEventId,w=await this.tryRedirectSignIn(t);(!u||u===g)&&w?.user&&(i=w.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Nd(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=T8()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ss(this.app))return Promise.reject(Sl(this));const n=t?Ci(t):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ue(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ss(this.app)?Promise.reject(Sl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ss(this.app)?Promise.reject(Sl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Va(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await U8(this),n=new z8(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Fl("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await L8(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Va(t)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await kc.create(this,[Va(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let g=!1;const w=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(w,this,"internal-error"),w.then(()=>{g||u(this.currentUser)}),typeof n=="function"){const E=t.addObserver(n,i,l);return()=>{g=!0,E()}}else{const E=t.addObserver(n);return()=>{g=!0,E()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=TC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&E8(`Error while retrieving App Check token: ${t.error}`),t?.token}}function h0(e){return Ci(e)}class Ax{constructor(t){this.auth=t,this.observer=null,this.addObserver=k4(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H8(e){_p=e}function G8(e){return _p.loadJS(e)}function q8(){return _p.gapiScript}function Y8(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(e,t){const n=Wo(e,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Vo(u,t??{}))return l;ia(l,"already-initialized")}return n.initialize({options:t})}function W8(e,t){const n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Va);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function K8(e,t,n){const i=h0(e);ue(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const l=!1,u=_C(t),{host:g,port:w}=Q8(t),E=w===null?"":`:${w}`,y={url:`${u}//${g}${E}/`},_=Object.freeze({host:g,port:w,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ue(Vo(y,i.config.emulator)&&Vo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ul(g)?(cp(`${u}//${g}${E}`),up("Auth",!0)):Z8()}function _C(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Q8(e){const t=_C(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:xx(i.substr(u.length+1))}}else{const[u,g]=i.split(":");return{host:u,port:xx(g)}}}function xx(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Z8(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ba("not implemented")}_getIdTokenResponse(t){return Ba("not implemented")}_linkToIdToken(t,n){return Ba("not implemented")}_getReauthenticationResolver(t){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(e,t){return S8(e,"POST","/v1/accounts:signInWithIdp",xp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8="http://localhost";class Ml extends CC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ml(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ia("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const g=new Ml(i,l);return g.idToken=u.idToken||void 0,g.accessToken=u.accessToken||void 0,g.secret=u.secret,g.nonce=u.nonce,g.pendingToken=u.pendingToken||null,g}_getIdTokenResponse(t){const n=this.buildRequest();return Bc(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,Bc(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Bc(t,n)}buildRequest(){const t={requestUri:J8,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Oh(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends Cp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Lh{constructor(){super("facebook.com")}static credential(t){return Ml._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Io.credentialFromTaggedObject(t)}static credentialFromError(t){return Io.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Io.credential(t.oauthAccessToken)}catch{return null}}}Io.FACEBOOK_SIGN_IN_METHOD="facebook.com";Io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends Lh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ml._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ka.credentialFromTaggedObject(t)}static credentialFromError(t){return ka.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return ka.credential(n,i)}catch{return null}}}ka.GOOGLE_SIGN_IN_METHOD="google.com";ka.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Lh{constructor(){super("github.com")}static credential(t){return Ml._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ro.credentialFromTaggedObject(t)}static credentialFromError(t){return Ro.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ro.credential(t.oauthAccessToken)}catch{return null}}}Ro.GITHUB_SIGN_IN_METHOD="github.com";Ro.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Lh{constructor(){super("twitter.com")}static credential(t,n){return Ml._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return No.credentialFromTaggedObject(t)}static credentialFromError(t){return No.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return No.credential(n,i)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,l=!1){const u=await vs._fromIdTokenResponse(t,i,l),g=wx(i);return new Fc({user:u,providerId:g,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const l=wx(i);return new Fc({user:t,providerId:l,_tokenResponse:i,operationType:n})}}function wx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends cs{constructor(t,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,l){return new Dd(t,n,i,l)}}function vC(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(e,u,t,i):u})}async function $8(e,t,n=!1){const i=await mh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fc._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(e,t,n=!1){const{auth:i}=e;if(ss(i.app))return Promise.reject(Sl(i));const l="reauthenticate";try{const u=await mh(e,vC(i,l,t,e),n);ue(u.idToken,i,"internal-error");const g=wp(u.idToken);ue(g,i,"internal-error");const{sub:w}=g;return ue(e.uid===w,i,"user-mismatch"),Fc._forOperation(e,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ia(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(e,t,n=!1){if(ss(e.app))return Promise.reject(Sl(e));const i="signIn",l=await vC(e,i,t),u=await Fc._fromIdTokenResponse(e,i,l);return n||await e._updateCurrentUser(u.user),u}function n6(e,t,n,i){return Ci(e).onIdTokenChanged(t,n,i)}function i6(e,t,n){return Ci(e).beforeAuthStateChanged(t,n)}function SC(e,t,n,i){return Ci(e).onAuthStateChanged(t,n,i)}function r6(e){return Ci(e).signOut()}const Md="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Md,"1"),this.storage.removeItem(Md),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=1e3,a6=10;class IC extends bC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&t(n,l,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((g,w,E)=>{this.notifyListeners(g,E)});return}const i=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const g=this.storage.getItem(i);!n&&this.localCache[i]===g||this.notifyListeners(i,g)},u=this.storage.getItem(i);B8()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,a6):l()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},s6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}IC.type="LOCAL";const o6=IC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends bC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}RC.type="SESSION";const NC=RC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const i=new f0(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:l,data:u}=n.data,g=this.handlersMap[l];if(!g?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const w=Array.from(g).map(async y=>y(n.origin,u)),E=await l6(w);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:E})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}f0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,g;return new Promise((w,E)=>{const y=vp("",20);l.port1.start();const _=setTimeout(()=>{E(new Error("unsupported_event"))},i);g={messageChannel:l,onMessage(b){const R=b;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),w(R.data.response);break;default:clearTimeout(_),clearTimeout(u),E(new Error("invalid_response"));break}}},this.handlers.add(g),l.port1.addEventListener("message",g.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{g&&this.removeMessageHandler(g)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return window}function u6(e){Ws().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof Ws().WorkerGlobalScope<"u"&&typeof Ws().importScripts=="function"}async function h6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f6(){return navigator?.serviceWorker?.controller||null}function d6(){return DC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firebaseLocalStorageDb",g6=1,Od="firebaseLocalStorage",OC="fbase_key";class kh{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function d0(e,t){return e.transaction([Od],t?"readwrite":"readonly").objectStore(Od)}function m6(){const e=indexedDB.deleteDatabase(MC);return new kh(e).toPromise()}function mm(){const e=indexedDB.open(MC,g6);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Od,{keyPath:OC})}catch(l){n(l)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Od)?t(i):(i.close(),await m6(),t(await mm()))})})}async function Tx(e,t,n){const i=d0(e,!0).put({[OC]:t,value:n});return new kh(i).toPromise()}async function p6(e,t){const n=d0(e,!1).get(t),i=await new kh(n).toPromise();return i===void 0?null:i.value}function _x(e,t){const n=d0(e,!0).delete(t);return new kh(n).toPromise()}const y6=800,E6=3;class PC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>E6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=f0._getInstance(d6()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h6(),!this.activeServiceWorker)return;this.sender=new c6(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||f6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mm();return await Tx(t,Md,"1"),await _x(t,Md),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Tx(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>p6(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>_x(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const u=d0(l,!1).getAll();return new kh(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:l,value:u}of t)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PC.type="LOCAL";const A6=PC;new Ph(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(e,t){return t?Va(t):(ue(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends CC{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Bc(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Bc(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Bc(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function x6(e){return e6(e.auth,new Sp(e),e.bypassAuthState)}function w6(e){const{auth:t,user:n}=e;return ue(n,t,"internal-error"),t6(n,new Sp(e),e.bypassAuthState)}async function T6(e){const{auth:t,user:n}=e;return ue(n,t,"internal-error"),$8(n,new Sp(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,n,i,l,u=!1){this.auth=t,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:g,type:w}=t;if(g){this.reject(g);return}const E={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(w)(E))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return x6;case"linkViaPopup":case"linkViaRedirect":return T6;case"reauthViaPopup":case"reauthViaRedirect":return w6;default:ia(this.auth,"internal-error")}}resolve(t){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new Ph(2e3,1e4);async function C6(e,t,n){if(ss(e.app))return Promise.reject(bs(e,"operation-not-supported-in-this-environment"));const i=h0(e);A8(e,t,Cp);const l=LC(i,n);return new Tl(i,"signInViaPopup",t,l).executeNotNull()}class Tl extends kC{constructor(t,n,i,l,u){super(t,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ue(t,this.auth,"internal-error"),t}async onExecution(){Ha(this.filter.length===1,"Popup operations only handle one event");const t=vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_6.get())};t()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6="pendingRedirect",ud=new Map;class S6 extends kC{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=ud.get(this.auth._key());if(!t){try{const i=await b6(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}ud.set(this.auth._key(),t)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b6(e,t){const n=N6(t),i=R6(e);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function I6(e,t){ud.set(e._key(),t)}function R6(e){return Va(e._redirectPersistence)}function N6(e){return cd(v6,e.config.apiKey,e.name)}async function D6(e,t,n=!1){if(ss(e.app))return Promise.reject(Sl(e));const i=h0(e),l=LC(i,t),g=await new S6(i,l,n).execute();return g&&!n&&(delete g.user._redirectEventId,await i._persistUserIfCurrent(g.user),await i._setRedirectUser(null,t)),g}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=600*1e3;class O6{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!P6(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!BC(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";n.onError(bs(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=M6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cx(t))}saveEventToCache(t){this.cachedEventUids.add(Cx(t)),this.lastProcessedEventTime=Date.now()}}function Cx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function BC({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function P6(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BC(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(e,t={}){return Qc(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B6=/^https?/;async function V6(e){if(e.config.emulator)return;const{authorizedDomains:t}=await L6(e);for(const n of t)try{if(U6(n))return}catch{}ia(e,"unauthorized-domain")}function U6(e){const t=dm(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const g=new URL(e);return g.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&g.hostname===i}if(!B6.test(n))return!1;if(k6.test(e))return i===e;const l=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new Ph(3e4,6e4);function vx(){const e=Ws().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function z6(e){return new Promise((t,n)=>{function i(){vx(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vx(),n(bs(e,"network-request-failed"))},timeout:F6.get()})}if(Ws().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Ws().gapi?.load)i();else{const l=Y8("iframefcb");return Ws()[l]=()=>{gapi.load?i():n(bs(e,"network-request-failed"))},G8(`${q8()}?onload=${l}`).catch(u=>n(u))}}).catch(t=>{throw hd=null,t})}let hd=null;function j6(e){return hd=hd||z6(e),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=new Ph(5e3,15e3),G6="__/auth/iframe",q6="emulator/auth/iframe",Y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W6(e){const t=e.config;ue(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ap(t,q6):`https://${e.config.authDomain}/${G6}`,i={apiKey:t.apiKey,appName:e.name,v:zl},l=X6.get(e.config.apiHost);l&&(i.eid=l);const u=e._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Oh(i).slice(1)}`}async function K6(e){const t=await j6(e),n=Ws().gapi;return ue(n,e,"internal-error"),t.open({where:document.body,url:W6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y6,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const g=bs(e,"network-request-failed"),w=Ws().setTimeout(()=>{u(g)},H6.get());function E(){Ws().clearTimeout(w),l(i)}i.ping(E).then(E,()=>{u(g)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z6=500,J6=600,$6="_blank",tM="http://localhost";class Sx{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eM(e,t,n,i=Z6,l=J6){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),g=Math.max((window.screen.availWidth-i)/2,0).toString();let w="";const E={...Q6,width:i.toString(),height:l.toString(),top:u,left:g},y=Zi().toLowerCase();n&&(w=pC(y)?$6:n),gC(y)&&(t=t||tM,E.scrollbars="yes");const _=Object.entries(E).reduce((R,[k,z])=>`${R}${k}=${z},`,"");if(k8(y)&&w!=="_self")return nM(t||"",w),new Sx(null);const b=window.open(t||"",w,_);ue(b,e,"popup-blocked");try{b.focus()}catch{}return new Sx(b)}function nM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="__/auth/handler",rM="emulator/auth/handler",sM=encodeURIComponent("fac");async function bx(e,t,n,i,l,u){ue(e.config.authDomain,e,"auth-domain-config-required"),ue(e.config.apiKey,e,"invalid-api-key");const g={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:zl,eventId:l};if(t instanceof Cp){t.setDefaultLanguage(e.languageCode),g.providerId=t.providerId||"",L4(t.getCustomParameters())||(g.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,b]of Object.entries({}))g[_]=b}if(t instanceof Lh){const _=t.getScopes().filter(b=>b!=="");_.length>0&&(g.scopes=_.join(","))}e.tenantId&&(g.tid=e.tenantId);const w=g;for(const _ of Object.keys(w))w[_]===void 0&&delete w[_];const E=await e._getAppCheckToken(),y=E?`#${sM}=${encodeURIComponent(E)}`:"";return`${aM(e)}?${Oh(w).slice(1)}${y}`}function aM({config:e}){return e.emulator?Ap(e,rM):`https://${e.authDomain}/${iM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="webStorageSupport";class oM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NC,this._completeRedirectFn=D6,this._overrideRedirectResult=I6}async _openPopup(t,n,i,l){Ha(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await bx(t,n,i,dm(),l);return eM(t,u,vp())}async _openRedirect(t,n,i,l){await this._originValidation(t);const u=await bx(t,n,i,dm(),l);return u6(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Ha(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await K6(t),i=new O6(t);return n.register("authEvent",l=>(ue(l?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Bg,{type:Bg},l=>{const u=l?.[0]?.[Bg];u!==void 0&&n(!!u),ia(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V6(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return wC()||mC()||Tp()}}const lM=oM;var Ix="@firebase/auth",Rx="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hM(e){Rs(new ls("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:g,authDomain:w}=i.options;ue(g&&!g.includes(":"),"invalid-api-key",{appName:i.name});const E={apiKey:g,authDomain:w,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TC(e)},y=new j8(i,l,u,E);return W8(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Rs(new ls("auth-internal",t=>{const n=h0(t.getProvider("auth").getImmediate());return(i=>new cM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(Ix,Rx,uM(e)),yr(Ix,Rx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=300,dM=I_("authIdTokenMaxAge")||fM;let Nx=null;const gM=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>dM)return;const l=n?.token;Nx!==l&&(Nx=l,await fetch(e,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function mM(e=l0()){const t=Wo(e,"auth");if(t.isInitialized())return t.getImmediate();const n=X8(e,{popupRedirectResolver:lM,persistence:[A6,o6,NC]}),i=I_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const g=gM(u.toString());i6(n,g,()=>g(n.currentUser)),n6(n,w=>g(w))}}const l=v_("auth");return l&&K8(n,`http://${l}`),n}function pM(){return document.getElementsByTagName("head")?.[0]??document}H8({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=l=>{const u=bs("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",pM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hM("Browser");var Dx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,VC;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(H,U){function V(){}V.prototype=U.prototype,H.F=U.prototype,H.prototype=new V,H.prototype.constructor=H,H.D=function(et,K,J){for(var X=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)X[Jt-2]=arguments[Jt];return U.prototype[K].apply(et,X)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(H,U,V){V||(V=0);const et=Array(16);if(typeof U=="string")for(var K=0;K<16;++K)et[K]=U.charCodeAt(V++)|U.charCodeAt(V++)<<8|U.charCodeAt(V++)<<16|U.charCodeAt(V++)<<24;else for(K=0;K<16;++K)et[K]=U[V++]|U[V++]<<8|U[V++]<<16|U[V++]<<24;U=H.g[0],V=H.g[1],K=H.g[2];let J=H.g[3],X;X=U+(J^V&(K^J))+et[0]+3614090360&4294967295,U=V+(X<<7&4294967295|X>>>25),X=J+(K^U&(V^K))+et[1]+3905402710&4294967295,J=U+(X<<12&4294967295|X>>>20),X=K+(V^J&(U^V))+et[2]+606105819&4294967295,K=J+(X<<17&4294967295|X>>>15),X=V+(U^K&(J^U))+et[3]+3250441966&4294967295,V=K+(X<<22&4294967295|X>>>10),X=U+(J^V&(K^J))+et[4]+4118548399&4294967295,U=V+(X<<7&4294967295|X>>>25),X=J+(K^U&(V^K))+et[5]+1200080426&4294967295,J=U+(X<<12&4294967295|X>>>20),X=K+(V^J&(U^V))+et[6]+2821735955&4294967295,K=J+(X<<17&4294967295|X>>>15),X=V+(U^K&(J^U))+et[7]+4249261313&4294967295,V=K+(X<<22&4294967295|X>>>10),X=U+(J^V&(K^J))+et[8]+1770035416&4294967295,U=V+(X<<7&4294967295|X>>>25),X=J+(K^U&(V^K))+et[9]+2336552879&4294967295,J=U+(X<<12&4294967295|X>>>20),X=K+(V^J&(U^V))+et[10]+4294925233&4294967295,K=J+(X<<17&4294967295|X>>>15),X=V+(U^K&(J^U))+et[11]+2304563134&4294967295,V=K+(X<<22&4294967295|X>>>10),X=U+(J^V&(K^J))+et[12]+1804603682&4294967295,U=V+(X<<7&4294967295|X>>>25),X=J+(K^U&(V^K))+et[13]+4254626195&4294967295,J=U+(X<<12&4294967295|X>>>20),X=K+(V^J&(U^V))+et[14]+2792965006&4294967295,K=J+(X<<17&4294967295|X>>>15),X=V+(U^K&(J^U))+et[15]+1236535329&4294967295,V=K+(X<<22&4294967295|X>>>10),X=U+(K^J&(V^K))+et[1]+4129170786&4294967295,U=V+(X<<5&4294967295|X>>>27),X=J+(V^K&(U^V))+et[6]+3225465664&4294967295,J=U+(X<<9&4294967295|X>>>23),X=K+(U^V&(J^U))+et[11]+643717713&4294967295,K=J+(X<<14&4294967295|X>>>18),X=V+(J^U&(K^J))+et[0]+3921069994&4294967295,V=K+(X<<20&4294967295|X>>>12),X=U+(K^J&(V^K))+et[5]+3593408605&4294967295,U=V+(X<<5&4294967295|X>>>27),X=J+(V^K&(U^V))+et[10]+38016083&4294967295,J=U+(X<<9&4294967295|X>>>23),X=K+(U^V&(J^U))+et[15]+3634488961&4294967295,K=J+(X<<14&4294967295|X>>>18),X=V+(J^U&(K^J))+et[4]+3889429448&4294967295,V=K+(X<<20&4294967295|X>>>12),X=U+(K^J&(V^K))+et[9]+568446438&4294967295,U=V+(X<<5&4294967295|X>>>27),X=J+(V^K&(U^V))+et[14]+3275163606&4294967295,J=U+(X<<9&4294967295|X>>>23),X=K+(U^V&(J^U))+et[3]+4107603335&4294967295,K=J+(X<<14&4294967295|X>>>18),X=V+(J^U&(K^J))+et[8]+1163531501&4294967295,V=K+(X<<20&4294967295|X>>>12),X=U+(K^J&(V^K))+et[13]+2850285829&4294967295,U=V+(X<<5&4294967295|X>>>27),X=J+(V^K&(U^V))+et[2]+4243563512&4294967295,J=U+(X<<9&4294967295|X>>>23),X=K+(U^V&(J^U))+et[7]+1735328473&4294967295,K=J+(X<<14&4294967295|X>>>18),X=V+(J^U&(K^J))+et[12]+2368359562&4294967295,V=K+(X<<20&4294967295|X>>>12),X=U+(V^K^J)+et[5]+4294588738&4294967295,U=V+(X<<4&4294967295|X>>>28),X=J+(U^V^K)+et[8]+2272392833&4294967295,J=U+(X<<11&4294967295|X>>>21),X=K+(J^U^V)+et[11]+1839030562&4294967295,K=J+(X<<16&4294967295|X>>>16),X=V+(K^J^U)+et[14]+4259657740&4294967295,V=K+(X<<23&4294967295|X>>>9),X=U+(V^K^J)+et[1]+2763975236&4294967295,U=V+(X<<4&4294967295|X>>>28),X=J+(U^V^K)+et[4]+1272893353&4294967295,J=U+(X<<11&4294967295|X>>>21),X=K+(J^U^V)+et[7]+4139469664&4294967295,K=J+(X<<16&4294967295|X>>>16),X=V+(K^J^U)+et[10]+3200236656&4294967295,V=K+(X<<23&4294967295|X>>>9),X=U+(V^K^J)+et[13]+681279174&4294967295,U=V+(X<<4&4294967295|X>>>28),X=J+(U^V^K)+et[0]+3936430074&4294967295,J=U+(X<<11&4294967295|X>>>21),X=K+(J^U^V)+et[3]+3572445317&4294967295,K=J+(X<<16&4294967295|X>>>16),X=V+(K^J^U)+et[6]+76029189&4294967295,V=K+(X<<23&4294967295|X>>>9),X=U+(V^K^J)+et[9]+3654602809&4294967295,U=V+(X<<4&4294967295|X>>>28),X=J+(U^V^K)+et[12]+3873151461&4294967295,J=U+(X<<11&4294967295|X>>>21),X=K+(J^U^V)+et[15]+530742520&4294967295,K=J+(X<<16&4294967295|X>>>16),X=V+(K^J^U)+et[2]+3299628645&4294967295,V=K+(X<<23&4294967295|X>>>9),X=U+(K^(V|~J))+et[0]+4096336452&4294967295,U=V+(X<<6&4294967295|X>>>26),X=J+(V^(U|~K))+et[7]+1126891415&4294967295,J=U+(X<<10&4294967295|X>>>22),X=K+(U^(J|~V))+et[14]+2878612391&4294967295,K=J+(X<<15&4294967295|X>>>17),X=V+(J^(K|~U))+et[5]+4237533241&4294967295,V=K+(X<<21&4294967295|X>>>11),X=U+(K^(V|~J))+et[12]+1700485571&4294967295,U=V+(X<<6&4294967295|X>>>26),X=J+(V^(U|~K))+et[3]+2399980690&4294967295,J=U+(X<<10&4294967295|X>>>22),X=K+(U^(J|~V))+et[10]+4293915773&4294967295,K=J+(X<<15&4294967295|X>>>17),X=V+(J^(K|~U))+et[1]+2240044497&4294967295,V=K+(X<<21&4294967295|X>>>11),X=U+(K^(V|~J))+et[8]+1873313359&4294967295,U=V+(X<<6&4294967295|X>>>26),X=J+(V^(U|~K))+et[15]+4264355552&4294967295,J=U+(X<<10&4294967295|X>>>22),X=K+(U^(J|~V))+et[6]+2734768916&4294967295,K=J+(X<<15&4294967295|X>>>17),X=V+(J^(K|~U))+et[13]+1309151649&4294967295,V=K+(X<<21&4294967295|X>>>11),X=U+(K^(V|~J))+et[4]+4149444226&4294967295,U=V+(X<<6&4294967295|X>>>26),X=J+(V^(U|~K))+et[11]+3174756917&4294967295,J=U+(X<<10&4294967295|X>>>22),X=K+(U^(J|~V))+et[2]+718787259&4294967295,K=J+(X<<15&4294967295|X>>>17),X=V+(J^(K|~U))+et[9]+3951481745&4294967295,H.g[0]=H.g[0]+U&4294967295,H.g[1]=H.g[1]+(K+(X<<21&4294967295|X>>>11))&4294967295,H.g[2]=H.g[2]+K&4294967295,H.g[3]=H.g[3]+J&4294967295}i.prototype.v=function(H,U){U===void 0&&(U=H.length);const V=U-this.blockSize,et=this.C;let K=this.h,J=0;for(;J<U;){if(K==0)for(;J<=V;)l(this,H,J),J+=this.blockSize;if(typeof H=="string"){for(;J<U;)if(et[K++]=H.charCodeAt(J++),K==this.blockSize){l(this,et),K=0;break}}else for(;J<U;)if(et[K++]=H[J++],K==this.blockSize){l(this,et),K=0;break}}this.h=K,this.o+=U},i.prototype.A=function(){var H=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);H[0]=128;for(var U=1;U<H.length-8;++U)H[U]=0;U=this.o*8;for(var V=H.length-8;V<H.length;++V)H[V]=U&255,U/=256;for(this.v(H),H=Array(16),U=0,V=0;V<4;++V)for(let et=0;et<32;et+=8)H[U++]=this.g[V]>>>et&255;return H};function u(H,U){var V=w;return Object.prototype.hasOwnProperty.call(V,H)?V[H]:V[H]=U(H)}function g(H,U){this.h=U;const V=[];let et=!0;for(let K=H.length-1;K>=0;K--){const J=H[K]|0;et&&J==U||(V[K]=J,et=!1)}this.g=V}var w={};function E(H){return-128<=H&&H<128?u(H,function(U){return new g([U|0],U<0?-1:0)}):new g([H|0],H<0?-1:0)}function y(H){if(isNaN(H)||!isFinite(H))return b;if(H<0)return j(y(-H));const U=[];let V=1;for(let et=0;H>=V;et++)U[et]=H/V|0,V*=4294967296;return new g(U,0)}function _(H,U){if(H.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(H.charAt(0)=="-")return j(_(H.substring(1),U));if(H.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=y(Math.pow(U,8));let et=b;for(let J=0;J<H.length;J+=8){var K=Math.min(8,H.length-J);const X=parseInt(H.substring(J,J+K),U);K<8?(K=y(Math.pow(U,K)),et=et.j(K).add(y(X))):(et=et.j(V),et=et.add(y(X)))}return et}var b=E(0),R=E(1),k=E(16777216);e=g.prototype,e.m=function(){if(q(this))return-j(this).m();let H=0,U=1;for(let V=0;V<this.g.length;V++){const et=this.i(V);H+=(et>=0?et:4294967296+et)*U,U*=4294967296}return H},e.toString=function(H){if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(z(this))return"0";if(q(this))return"-"+j(this).toString(H);const U=y(Math.pow(H,6));var V=this;let et="";for(;;){const K=yt(V,U).g;V=nt(V,K.j(U));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(H);if(V=K,z(V))return J+et;for(;J.length<6;)J="0"+J;et=J+et}},e.i=function(H){return H<0?0:H<this.g.length?this.g[H]:this.h};function z(H){if(H.h!=0)return!1;for(let U=0;U<H.g.length;U++)if(H.g[U]!=0)return!1;return!0}function q(H){return H.h==-1}e.l=function(H){return H=nt(this,H),q(H)?-1:z(H)?0:1};function j(H){const U=H.g.length,V=[];for(let et=0;et<U;et++)V[et]=~H.g[et];return new g(V,~H.h).add(R)}e.abs=function(){return q(this)?j(this):this},e.add=function(H){const U=Math.max(this.g.length,H.g.length),V=[];let et=0;for(let K=0;K<=U;K++){let J=et+(this.i(K)&65535)+(H.i(K)&65535),X=(J>>>16)+(this.i(K)>>>16)+(H.i(K)>>>16);et=X>>>16,J&=65535,X&=65535,V[K]=X<<16|J}return new g(V,V[V.length-1]&-2147483648?-1:0)};function nt(H,U){return H.add(j(U))}e.j=function(H){if(z(this)||z(H))return b;if(q(this))return q(H)?j(this).j(j(H)):j(j(this).j(H));if(q(H))return j(this.j(j(H)));if(this.l(k)<0&&H.l(k)<0)return y(this.m()*H.m());const U=this.g.length+H.g.length,V=[];for(var et=0;et<2*U;et++)V[et]=0;for(et=0;et<this.g.length;et++)for(let K=0;K<H.g.length;K++){const J=this.i(et)>>>16,X=this.i(et)&65535,Jt=H.i(K)>>>16,ht=H.i(K)&65535;V[2*et+2*K]+=X*ht,Z(V,2*et+2*K),V[2*et+2*K+1]+=J*ht,Z(V,2*et+2*K+1),V[2*et+2*K+1]+=X*Jt,Z(V,2*et+2*K+1),V[2*et+2*K+2]+=J*Jt,Z(V,2*et+2*K+2)}for(H=0;H<U;H++)V[H]=V[2*H+1]<<16|V[2*H];for(H=U;H<2*U;H++)V[H]=0;return new g(V,0)};function Z(H,U){for(;(H[U]&65535)!=H[U];)H[U+1]+=H[U]>>>16,H[U]&=65535,U++}function W(H,U){this.g=H,this.h=U}function yt(H,U){if(z(U))throw Error("division by zero");if(z(H))return new W(b,b);if(q(H))return U=yt(j(H),U),new W(j(U.g),j(U.h));if(q(U))return U=yt(H,j(U)),new W(j(U.g),U.h);if(H.g.length>30){if(q(H)||q(U))throw Error("slowDivide_ only works with positive integers.");for(var V=R,et=U;et.l(H)<=0;)V=wt(V),et=wt(et);var K=Rt(V,1),J=Rt(et,1);for(et=Rt(et,2),V=Rt(V,2);!z(et);){var X=J.add(et);X.l(H)<=0&&(K=K.add(V),J=X),et=Rt(et,1),V=Rt(V,1)}return U=nt(H,K.j(U)),new W(K,U)}for(K=b;H.l(U)>=0;){for(V=Math.max(1,Math.floor(H.m()/U.m())),et=Math.ceil(Math.log(V)/Math.LN2),et=et<=48?1:Math.pow(2,et-48),J=y(V),X=J.j(U);q(X)||X.l(H)>0;)V-=et,J=y(V),X=J.j(U);z(J)&&(J=R),K=K.add(J),H=nt(H,X)}return new W(K,H)}e.B=function(H){return yt(this,H).h},e.and=function(H){const U=Math.max(this.g.length,H.g.length),V=[];for(let et=0;et<U;et++)V[et]=this.i(et)&H.i(et);return new g(V,this.h&H.h)},e.or=function(H){const U=Math.max(this.g.length,H.g.length),V=[];for(let et=0;et<U;et++)V[et]=this.i(et)|H.i(et);return new g(V,this.h|H.h)},e.xor=function(H){const U=Math.max(this.g.length,H.g.length),V=[];for(let et=0;et<U;et++)V[et]=this.i(et)^H.i(et);return new g(V,this.h^H.h)};function wt(H){const U=H.g.length+1,V=[];for(let et=0;et<U;et++)V[et]=H.i(et)<<1|H.i(et-1)>>>31;return new g(V,H.h)}function Rt(H,U){const V=U>>5;U%=32;const et=H.g.length-V,K=[];for(let J=0;J<et;J++)K[J]=U>0?H.i(J+V)>>>U|H.i(J+V+1)<<32-U:H.i(J+V);return new g(K,H.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,VC=i,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.B,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=y,g.fromString=_,Po=g}).apply(typeof Dx<"u"?Dx:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UC,Wu,FC,fd,pm,zC,jC,HC;(function(){var e,t=Object.defineProperty;function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var I=0;I<A.length;++I){var D=A[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var i=n(this);function l(A,I){if(I)t:{var D=i;A=A.split(".");for(var F=0;F<A.length-1;F++){var ot=A[F];if(!(ot in D))break t;D=D[ot]}A=A[A.length-1],F=D[A],I=I(F),I!=F&&I!=null&&t(D,A,{configurable:!0,writable:!0,value:I})}}l("Symbol.dispose",function(A){return A||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(A){return A||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(A){return A||function(I){var D=[],F;for(F in I)Object.prototype.hasOwnProperty.call(I,F)&&D.push([F,I[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},g=this||self;function w(A){var I=typeof A;return I=="object"&&A!=null||I=="function"}function E(A,I,D){return A.call.apply(A.bind,arguments)}function y(A,I,D){return y=E,y.apply(null,arguments)}function _(A,I){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),A.apply(this,F)}}function b(A,I){function D(){}D.prototype=I.prototype,A.Z=I.prototype,A.prototype=new D,A.prototype.constructor=A,A.Ob=function(F,ot,At){for(var Pt=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)Pt[ae-2]=arguments[ae];return I.prototype[ot].apply(F,Pt)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?A=>A&&AsyncContext.Snapshot.wrap(A):A=>A;function k(A){const I=A.length;if(I>0){const D=Array(I);for(let F=0;F<I;F++)D[F]=A[F];return D}return[]}function z(A,I){for(let F=1;F<arguments.length;F++){const ot=arguments[F];var D=typeof ot;if(D=D!="object"?D:ot?Array.isArray(ot)?"array":D:"null",D=="array"||D=="object"&&typeof ot.length=="number"){D=A.length||0;const At=ot.length||0;A.length=D+At;for(let Pt=0;Pt<At;Pt++)A[D+Pt]=ot[Pt]}else A.push(ot)}}class q{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function j(A){g.setTimeout(()=>{throw A},0)}function nt(){var A=H;let I=null;return A.g&&(I=A.g,A.g=A.g.next,A.g||(A.h=null),I.next=null),I}class Z{constructor(){this.h=this.g=null}add(I,D){const F=W.get();F.set(I,D),this.h?this.h.next=F:this.g=F,this.h=F}}var W=new q(()=>new yt,A=>A.reset());class yt{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,Rt=!1,H=new Z,U=()=>{const A=Promise.resolve(void 0);wt=()=>{A.then(V)}};function V(){for(var A;A=nt();){try{A.h.call(A.g)}catch(D){j(D)}var I=W;I.j(A),I.h<100&&(I.h++,A.next=I.g,I.g=A)}Rt=!1}function et(){this.u=this.u,this.C=this.C}et.prototype.u=!1,et.prototype.dispose=function(){this.u||(this.u=!0,this.N())},et.prototype[Symbol.dispose]=function(){this.dispose()},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(A,I){this.type=A,this.g=this.target=I,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var A=!1,I=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const D=()=>{};g.addEventListener("test",D,I),g.removeEventListener("test",D,I)}catch{}return A})();function X(A){return/^[\s\xa0]*$/.test(A)}function Jt(A,I){K.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A&&this.init(A,I)}b(Jt,K),Jt.prototype.init=function(A,I){const D=this.type=A.type,F=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;this.target=A.target||A.srcElement,this.g=I,I=A.relatedTarget,I||(D=="mouseover"?I=A.fromElement:D=="mouseout"&&(I=A.toElement)),this.relatedTarget=I,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=A.pointerType,this.state=A.state,this.i=A,A.defaultPrevented&&Jt.Z.h.call(this)},Jt.prototype.h=function(){Jt.Z.h.call(this);const A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var ht="closure_listenable_"+(Math.random()*1e6|0),Et=0;function xt(A,I,D,F,ot){this.listener=A,this.proxy=null,this.src=I,this.type=D,this.capture=!!F,this.ha=ot,this.key=++Et,this.da=this.fa=!1}function Ft(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function $t(A,I,D){for(const F in A)I.call(D,A[F],F,A)}function $(A,I){for(const D in A)I.call(void 0,A[D],D,A)}function St(A){const I={};for(const D in A)I[D]=A[D];return I}const Bt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vt(A,I){let D,F;for(let ot=1;ot<arguments.length;ot++){F=arguments[ot];for(D in F)A[D]=F[D];for(let At=0;At<Bt.length;At++)D=Bt[At],Object.prototype.hasOwnProperty.call(F,D)&&(A[D]=F[D])}}function zt(A){this.src=A,this.g={},this.h=0}zt.prototype.add=function(A,I,D,F,ot){const At=A.toString();A=this.g[At],A||(A=this.g[At]=[],this.h++);const Pt=Mt(A,I,F,ot);return Pt>-1?(I=A[Pt],D||(I.fa=!1)):(I=new xt(I,this.src,At,!!F,ot),I.fa=D,A.push(I)),I};function Ee(A,I){const D=I.type;if(D in A.g){var F=A.g[D],ot=Array.prototype.indexOf.call(F,I,void 0),At;(At=ot>=0)&&Array.prototype.splice.call(F,ot,1),At&&(Ft(I),A.g[D].length==0&&(delete A.g[D],A.h--))}}function Mt(A,I,D,F){for(let ot=0;ot<A.length;++ot){const At=A[ot];if(!At.da&&At.listener==I&&At.capture==!!D&&At.ha==F)return ot}return-1}var Yn="closure_lm_"+(Math.random()*1e6|0),ce={};function vi(A,I,D,F,ot){if(Array.isArray(I)){for(let At=0;At<I.length;At++)vi(A,I[At],D,F,ot);return null}return D=qe(D),A&&A[ht]?A.J(I,D,w(F)?!!F.capture:!1,ot):us(A,I,D,!1,F,ot)}function us(A,I,D,F,ot,At){if(!I)throw Error("Invalid event type");const Pt=w(ot)?!!ot.capture:!!ot;let ae=fs(A);if(ae||(A[Yn]=ae=new zt(A)),D=ae.add(I,D,F,Pt,At),D.proxy)return D;if(F=Xn(),D.proxy=F,F.src=A,F.listener=D,A.addEventListener)J||(ot=Pt),ot===void 0&&(ot=!1),A.addEventListener(I.toString(),F,ot);else if(A.attachEvent)A.attachEvent(Ar(I.toString()),F);else if(A.addListener&&A.removeListener)A.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Xn(){function A(D){return I.call(A.src,A.listener,D)}const I=ar;return A}function hs(A,I,D,F,ot){if(Array.isArray(I))for(var At=0;At<I.length;At++)hs(A,I[At],D,F,ot);else F=w(F)?!!F.capture:!!F,D=qe(D),A&&A[ht]?(A=A.i,At=String(I).toString(),At in A.g&&(I=A.g[At],D=Mt(I,D,F,ot),D>-1&&(Ft(I[D]),Array.prototype.splice.call(I,D,1),I.length==0&&(delete A.g[At],A.h--)))):A&&(A=fs(A))&&(I=A.g[I.toString()],A=-1,I&&(A=Mt(I,D,F,ot)),(D=A>-1?I[A]:null)&&we(D))}function we(A){if(typeof A!="number"&&A&&!A.da){var I=A.src;if(I&&I[ht])Ee(I.i,A);else{var D=A.type,F=A.proxy;I.removeEventListener?I.removeEventListener(D,F,A.capture):I.detachEvent?I.detachEvent(Ar(D),F):I.addListener&&I.removeListener&&I.removeListener(F),(D=fs(I))?(Ee(D,A),D.h==0&&(D.src=null,I[Yn]=null)):Ft(A)}}}function Ar(A){return A in ce?ce[A]:ce[A]="on"+A}function ar(A,I){if(A.da)A=!0;else{I=new Jt(I,this);const D=A.listener,F=A.ha||A.src;A.fa&&we(A),A=D.call(F,I)}return A}function fs(A){return A=A[Yn],A instanceof zt?A:null}var Fe="__closure_events_fn_"+(Math.random()*1e9>>>0);function qe(A){return typeof A=="function"?A:(A[Fe]||(A[Fe]=function(I){return A.handleEvent(I)}),A[Fe])}function Zt(){et.call(this),this.i=new zt(this),this.M=this,this.G=null}b(Zt,et),Zt.prototype[ht]=!0,Zt.prototype.removeEventListener=function(A,I,D,F){hs(this,A,I,D,F)};function In(A,I){var D,F=A.G;if(F)for(D=[];F;F=F.G)D.push(F);if(A=A.M,F=I.type||I,typeof I=="string")I=new K(I,A);else if(I instanceof K)I.target=I.target||A;else{var ot=I;I=new K(F,A),Vt(I,ot)}ot=!0;let At,Pt;if(D)for(Pt=D.length-1;Pt>=0;Pt--)At=I.g=D[Pt],ot=jt(At,F,!0,I)&&ot;if(At=I.g=A,ot=jt(At,F,!0,I)&&ot,ot=jt(At,F,!1,I)&&ot,D)for(Pt=0;Pt<D.length;Pt++)At=I.g=D[Pt],ot=jt(At,F,!1,I)&&ot}Zt.prototype.N=function(){if(Zt.Z.N.call(this),this.i){var A=this.i;for(const I in A.g){const D=A.g[I];for(let F=0;F<D.length;F++)Ft(D[F]);delete A.g[I],A.h--}}this.G=null},Zt.prototype.J=function(A,I,D,F){return this.i.add(String(A),I,!1,D,F)},Zt.prototype.K=function(A,I,D,F){return this.i.add(String(A),I,!0,D,F)};function jt(A,I,D,F){if(I=A.i.g[String(I)],!I)return!0;I=I.concat();let ot=!0;for(let At=0;At<I.length;++At){const Pt=I[At];if(Pt&&!Pt.da&&Pt.capture==D){const ae=Pt.listener,on=Pt.ha||Pt.src;Pt.fa&&Ee(A.i,Pt),ot=ae.call(on,F)!==!1&&ot}}return ot&&!F.defaultPrevented}function Ka(A,I){if(typeof A!="function")if(A&&typeof A.handleEvent=="function")A=y(A.handleEvent,A);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:g.setTimeout(A,I||0)}function Qa(A){A.g=Ka(()=>{A.g=null,A.i&&(A.i=!1,Qa(A))},A.l);const I=A.h;A.h=null,A.m.apply(null,I)}class xr extends et{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Qa(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(A){et.call(this),this.h=A,this.g={}}b(ds,et);var ei=[];function li(A){$t(A.g,function(I,D){this.g.hasOwnProperty(D)&&we(I)},A),A.g={}}ds.prototype.N=function(){ds.Z.N.call(this),li(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=g.JSON.stringify,Ye=g.JSON.parse,Gl=class{stringify(A){return g.JSON.stringify(A,void 0)}parse(A){return g.JSON.parse(A,void 0)}};function ca(){}function ql(){}var Xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){K.call(this,"d")}b(kt,K);function We(){K.call(this,"c")}b(We,K);var Ae={},Ke=null;function qr(){return Ke=Ke||new Zt}Ae.Ia="serverreachability";function ua(A){K.call(this,Ae.Ia,A)}b(ua,K);function gs(A){const I=qr();In(I,new ua(I))}Ae.STAT_EVENT="statevent";function _e(A,I){K.call(this,Ae.STAT_EVENT,A),this.stat=I}b(_e,K);function $e(A){const I=qr();In(I,new _e(I,A))}Ae.Ja="timingevent";function Jo(A,I){K.call(this,Ae.Ja,A),this.size=I}b(Jo,K);function ms(A,I){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){A()},I)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function ha(A,I,D,F,ot,At){A.info(function(){if(A.g)if(At){var Pt="",ae=At.split("&");for(let Ue=0;Ue<ae.length;Ue++){var on=ae[Ue].split("=");if(on.length>1){const vn=on[0];on=on[1];const zi=vn.split("_");Pt=zi.length>=2&&zi[1]=="type"?Pt+(vn+"="+on+"&"):Pt+(vn+"=redacted&")}}}else Pt=null;else Pt=At;return"XMLHTTP REQ ("+F+") [attempt "+ot+"]: "+I+`
`+D+`
`+Pt})}function Bn(A,I,D,F,ot,At,Pt){A.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ot+"]: "+I+`
`+D+`
`+At+" "+Pt})}function Bi(A,I,D,F){A.info(function(){return"XMLHTTP TEXT ("+I+"): "+Kn(A,D)+(F?" "+F:"")})}function Za(A,I){A.info(function(){return"TIMEOUT: "+I})}ni.prototype.info=function(){};function Kn(A,I){if(!A.g)return I;if(!I)return null;try{const At=JSON.parse(I);if(At){for(A=0;A<At.length;A++)if(Array.isArray(At[A])){var D=At[A];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ot=F[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(let Pt=1;Pt<F.length;Pt++)F[Pt]=""}}}}return Wn(At)}catch{return I}}var Rn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wr;function Vn(){}b(Vn,ca),Vn.prototype.g=function(){return new XMLHttpRequest},wr=new Vn;function Ji(A){return encodeURIComponent(String(A))}function Vi(A){var I=1;A=A.split(":");const D=[];for(;I>0&&A.length;)D.push(A.shift()),I--;return A.length&&D.push(A.join(":")),D}function Ut(A,I,D,F){this.j=A,this.i=I,this.l=D,this.S=F||1,this.V=new ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $i}function $i(){this.i=null,this.g="",this.h=!1}var Ns={},yn={};function Si(A,I,D){A.M=1,A.A=yi(hn(I)),A.u=D,A.R=!0,Tr(A,null)}function Tr(A,I){A.F=Date.now(),fa(A),A.B=hn(A.A);var D=A.B,F=A.S;Array.isArray(F)||(F=[String(F)]),an(D.i,"t",F),A.C=0,D=A.j.L,A.h=new $i,A.g=ks(A.j,D?I:null,!A.u),A.P>0&&(A.O=new xr(y(A.Y,A,A.g),A.P)),I=A.V,D=A.g,F=A.ba;var ot="readystatechange";Array.isArray(ot)||(ot&&(ei[0]=ot.toString()),ot=ei);for(let At=0;At<ot.length;At++){const Pt=vi(D,ot[At],F||I.handleEvent,!1,I.h||I);if(!Pt)break;I.g[Pt.key]=Pt}I=A.J?St(A.J):{},A.u?(A.v||(A.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.B,A.v,A.u,I)):(A.v="GET",A.g.ea(A.B,A.v,null,I)),gs(),ha(A.i,A.v,A.B,A.l,A.S,A.u)}Ut.prototype.ba=function(A){A=A.target;const I=this.O;I&&ci(A)==3?I.j():this.Y(A)},Ut.prototype.Y=function(A){try{if(A==this.g)t:{const ae=ci(this.g),on=this.g.ya(),Ue=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||Ir(this.g)))){this.K||ae!=4||on==7||(on==8||Ue<=0?gs(3):gs(2)),dn(this);var I=this.g.ca();this.X=I;var D=_r(this);if(this.o=I==200,Bn(this.i,this.v,this.B,this.l,this.S,ae,I),this.o){if(this.U&&!this.L){e:{if(this.g){var F,ot=this.g;if((F=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(F)){var At=F;break e}}At=null}if(A=At)Bi(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tr(this,A);else{this.o=!1,this.m=3,$e(12),Cr(this),je(this);break t}}if(this.R){A=!0;let vn;for(;!this.K&&this.C<D.length;)if(vn=Yl(this,D),vn==yn){ae==4&&(this.m=4,$e(14),A=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==Ns){this.m=4,$e(15),Bi(this.i,this.l,D,"[Invalid Chunk]"),A=!1;break}else Bi(this.i,this.l,vn,null),tr(this,vn);if(ze(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||D.length!=0||this.h.h||(this.m=1,$e(16),A=!1),this.o=this.o&&A,!A)Bi(this.i,this.l,D,"[Invalid Chunked Response]"),Cr(this),je(this);else if(D.length>0&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.aa&&!Pt.P&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),mt(Pt),Pt.P=!0,$e(11))}}else Bi(this.i,this.l,D,null),tr(this,D);ae==4&&Cr(this),this.o&&!this.K&&(ae==4?Ls(this.j,this):(this.o=!1,fa(this)))}else Rr(this.g),I==400&&D.indexOf("Unknown SID")>0?(this.m=3,$e(12)):(this.m=0,$e(13)),Cr(this),je(this)}}}catch{}finally{}};function _r(A){if(!ze(A))return A.g.la();const I=Ir(A.g);if(I==="")return"";let D="";const F=I.length,ot=ci(A.g)==4;if(!A.h.i){if(typeof TextDecoder>"u")return Cr(A),je(A),"";A.h.i=new g.TextDecoder}for(let At=0;At<F;At++)A.h.h=!0,D+=A.h.i.decode(I[At],{stream:!(ot&&At==F-1)});return I.length=0,A.h.g+=D,A.C=0,A.h.g}function ze(A){return A.g?A.v=="GET"&&A.M!=2&&A.j.Aa:!1}function Yl(A,I){var D=A.C,F=I.indexOf(`
`,D);return F==-1?yn:(D=Number(I.substring(D,F)),isNaN(D)?Ns:(F+=1,F+D>I.length?yn:(I=I.slice(F,F+D),A.C=F+D,I)))}Ut.prototype.cancel=function(){this.K=!0,Cr(this)};function fa(A){A.T=Date.now()+A.H,Qn(A,A.H)}function Qn(A,I){if(A.D!=null)throw Error("WatchDog timer not null");A.D=ms(y(A.aa,A),I)}function dn(A){A.D&&(g.clearTimeout(A.D),A.D=null)}Ut.prototype.aa=function(){this.D=null;const A=Date.now();A-this.T>=0?(Za(this.i,this.B),this.M!=2&&(gs(),$e(17)),Cr(this),this.m=2,je(this)):Qn(this,this.T-A)};function je(A){A.j.I==0||A.K||Ls(A.j,A)}function Cr(A){dn(A);var I=A.O;I&&typeof I.dispose=="function"&&I.dispose(),A.O=null,li(A.V),A.g&&(I=A.g,A.g=null,I.abort(),I.dispose())}function tr(A,I){try{var D=A.j;if(D.I!=0&&(D.g==A||or(D.h,A))){if(!A.L&&or(D.h,A)&&D.I==3){try{var F=D.Ba.g.parse(I)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ot=F;if(ot[0]==0){t:if(!D.v){if(D.g)if(D.g.F+3e3<A.F)_n(D),Nr(D);else break t;nl(D),$e(18)}}else D.xa=ot[1],0<D.xa-D.K&&ot[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=ms(y(D.Va,D),6e3));Le(D.h)<=1&&D.ta&&(D.ta=void 0)}else As(D,11)}else if((A.L||D.g==A)&&_n(D),!X(I))for(ot=D.Ba.g.parse(I),I=0;I<ot.length;I++){let Ue=ot[I];const vn=Ue[0];if(!(vn<=D.K))if(D.K=vn,Ue=Ue[1],D.I==2)if(Ue[0]=="c"){D.M=Ue[1],D.ba=Ue[2];const zi=Ue[3];zi!=null&&(D.ka=zi,D.j.info("VER="+D.ka));const Kr=Ue[4];Kr!=null&&(D.za=Kr,D.j.info("SVER="+D.za));const Ai=Ue[5];Ai!=null&&typeof Ai=="number"&&Ai>0&&(F=1.5*Ai,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const nr=A.g;if(nr){const Mr=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var At=F.h;At.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(At.j=At.l,At.g=new Set,At.h&&(Ja(At,At.h),At.h=null))}if(F.G){const xs=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;xs&&(F.wa=xs,ne(F.J,F.G,xs))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-A.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Pt=A;if(F.na=Wl(F,F.L?F.ba:null,F.W),Pt.L){xe(F.h,Pt);var ae=Pt,on=F.O;on&&(ae.H=on),ae.D&&(dn(ae),fa(ae)),F.g=Pt}else Dr(F);D.i.length>0&&wa(D)}else Ue[0]!="stop"&&Ue[0]!="close"||As(D,7);else D.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?As(D,7):Os(D):Ue[0]!="noop"&&D.l&&D.l.qa(Ue),D.A=0)}}gs(4)}catch{}}var $o=class{constructor(A,I){this.g=A,this.map=I}};function vt(A){this.l=A||10,g.PerformanceNavigationTiming?(A=g.performance.getEntriesByType("navigation"),A=A.length>0&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function da(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Le(A){return A.h?1:A.g?A.g.size:0}function or(A,I){return A.h?A.h==I:A.g?A.g.has(I):!1}function Ja(A,I){A.g?A.g.add(I):A.h=I}function xe(A,I){A.h&&A.h==I?A.h=null:A.g&&A.g.has(I)&&A.g.delete(I)}vt.prototype.cancel=function(){if(this.i=Ce(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function Ce(A){if(A.h!=null)return A.i.concat(A.h.G);if(A.g!=null&&A.g.size!==0){let I=A.i;for(const D of A.g.values())I=I.concat(D.G);return I}return k(A.i)}var pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tl(A,I){if(A){A=A.split("&");for(let D=0;D<A.length;D++){const F=A[D].indexOf("=");let ot,At=null;F>=0?(ot=A[D].substring(0,F),At=A[D].substring(F+1)):ot=A[D],I(ot,At?decodeURIComponent(At.replace(/\+/g," ")):"")}}}function er(A){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;A instanceof er?(this.l=A.l,sn(this,A.j),this.o=A.o,this.g=A.g,Ui(this,A.u),this.h=A.h,Ds(this,el(A.i)),this.m=A.m):A&&(I=String(A).match(pe))?(this.l=!1,sn(this,I[1]||"",!0),this.o=ga(I[2]||""),this.g=ga(I[3]||"",!0),Ui(this,I[4]),this.h=ga(I[5]||"",!0),Ds(this,I[6]||"",!0),this.m=ga(I[7]||"")):(this.l=!1,this.i=new An(null,this.l))}er.prototype.toString=function(){const A=[];var I=this.j;I&&A.push(En(I,Un,!0),":");var D=this.g;return(D||I=="file")&&(A.push("//"),(I=this.o)&&A.push(En(I,Un,!0),"@"),A.push(Ji(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&A.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&A.push("/"),A.push(En(D,D.charAt(0)=="/"?G:ct,!0))),(D=this.i.toString())&&A.push("?",D),(D=this.m)&&A.push("#",En(D,Nn)),A.join("")},er.prototype.resolve=function(A){const I=hn(this);let D=!!A.j;D?sn(I,A.j):D=!!A.o,D?I.o=A.o:D=!!A.g,D?I.g=A.g:D=A.u!=null;var F=A.h;if(D)Ui(I,A.u);else if(D=!!A.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ot=I.h.lastIndexOf("/");ot!=-1&&(F=I.h.slice(0,ot+1)+F)}if(ot=F,ot==".."||ot==".")F="";else if(ot.indexOf("./")!=-1||ot.indexOf("/.")!=-1){F=ot.lastIndexOf("/",0)==0,ot=ot.split("/");const At=[];for(let Pt=0;Pt<ot.length;){const ae=ot[Pt++];ae=="."?F&&Pt==ot.length&&At.push(""):ae==".."?((At.length>1||At.length==1&&At[0]!="")&&At.pop(),F&&Pt==ot.length&&At.push("")):(At.push(ae),F=!0)}F=At.join("/")}else F=ot}return D?I.h=F:D=A.i.toString()!=="",D?Ds(I,el(A.i)):D=!!A.m,D&&(I.m=A.m),I};function hn(A){return new er(A)}function sn(A,I,D){A.j=D?ga(I,!0):I,A.j&&(A.j=A.j.replace(/:$/,""))}function Ui(A,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);A.u=I}else A.u=null}function Ds(A,I,D){I instanceof An?(A.i=I,pa(A.i,A.l)):(D||(I=En(I,Yt)),A.i=new An(I,A.l))}function ne(A,I,D){A.i.set(I,D)}function yi(A){return ne(A,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),A}function ga(A,I){return A?I?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function En(A,I,D){return typeof A=="string"?(A=encodeURI(A).replace(I,He),D&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function He(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var Un=/[#\/\?@]/g,ct=/[#\?:]/g,G=/[#\?]/g,Yt=/[#\?@]/g,Nn=/#/g;function An(A,I){this.h=this.g=null,this.i=A||null,this.j=!!I}function ps(A){A.g||(A.g=new Map,A.h=0,A.i&&tl(A.i,function(I,D){A.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}e=An.prototype,e.add=function(A,I){ps(this),this.i=null,A=vr(this,A);let D=this.g.get(A);return D||this.g.set(A,D=[]),D.push(I),this.h+=1,this};function ma(A,I){ps(A),I=vr(A,I),A.g.has(I)&&(A.i=null,A.h-=A.g.get(I).length,A.g.delete(I))}function Ei(A,I){return ps(A),I=vr(A,I),A.g.has(I)}e.forEach=function(A,I){ps(this),this.g.forEach(function(D,F){D.forEach(function(ot){A.call(I,ot,F,this)},this)},this)};function Xt(A,I){ps(A);let D=[];if(typeof I=="string")Ei(A,I)&&(D=D.concat(A.g.get(vr(A,I))));else for(A=Array.from(A.g.values()),I=0;I<A.length;I++)D=D.concat(A[I]);return D}e.set=function(A,I){return ps(this),this.i=null,A=vr(this,A),Ei(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[I]),this.h+=1,this},e.get=function(A,I){return A?(A=Xt(this,A),A.length>0?String(A[0]):I):I};function an(A,I,D){ma(A,I),D.length>0&&(A.i=null,A.g.set(vr(A,I),k(D)),A.h+=D.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],I=Array.from(this.g.keys());for(let F=0;F<I.length;F++){var D=I[F];const ot=Ji(D);D=Xt(this,D);for(let At=0;At<D.length;At++){let Pt=ot;D[At]!==""&&(Pt+="="+Ji(D[At])),A.push(Pt)}}return this.i=A.join("&")};function el(A){const I=new An;return I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),I}function vr(A,I){return I=String(I),A.j&&(I=I.toLowerCase()),I}function pa(A,I){I&&!A.j&&(ps(A),A.i=null,A.g.forEach(function(D,F){const ot=F.toLowerCase();F!=ot&&(ma(this,F),an(this,ot,D))},A)),A.j=I}function Ms(A,I){const D=new ni;if(g.Image){const F=new Image;F.onload=_(bi,D,"TestLoadImage: loaded",!0,I,F),F.onerror=_(bi,D,"TestLoadImage: error",!1,I,F),F.onabort=_(bi,D,"TestLoadImage: abort",!1,I,F),F.ontimeout=_(bi,D,"TestLoadImage: timeout",!1,I,F),g.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=A}else I(!1)}function Yr(A,I){const D=new ni,F=new AbortController,ot=setTimeout(()=>{F.abort(),bi(D,"TestPingServer: timeout",!1,I)},1e4);fetch(A,{signal:F.signal}).then(At=>{clearTimeout(ot),At.ok?bi(D,"TestPingServer: ok",!0,I):bi(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ot),bi(D,"TestPingServer: error",!1,I)})}function bi(A,I,D,F,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),F(D)}catch{}}function Dn(){this.g=new Gl}function Sr(A){this.i=A.Sb||null,this.h=A.ab||!1}b(Sr,ca),Sr.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(A,I){Zt.call(this),this.H=A,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Fi,Zt),e=Fi.prototype,e.open=function(A,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=A,this.D=I,this.readyState=1,ie(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};A&&(I.body=A),(this.H||g).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},e.Pa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,ie(this)),this.g&&(this.readyState=3,ie(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wt(this)}else A.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wt(A){A.j.read().then(A.Ma.bind(A)).catch(A.ga.bind(A))}e.Ma=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var I=A.value?A.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!A.done}))&&(this.response=this.responseText+=I)}A.done?Ii(this):ie(this),this.readyState==3&&Wt(this)}},e.Oa=function(A){this.g&&(this.response=this.responseText=A,Ii(this))},e.Na=function(A){this.g&&(this.response=A,Ii(this))},e.ga=function(){this.g&&Ii(this)};function Ii(A){A.readyState=4,A.l=null,A.j=null,A.B=null,ie(A)}e.setRequestHeader=function(A,I){this.A.append(A,I)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,A.push(D[0]+": "+D[1]),D=I.next();return A.join(`\r
`)};function ie(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function gn(A){let I="";return $t(A,function(D,F){I+=F,I+=":",I+=D,I+=`\r
`}),I}function lr(A,I,D){t:{for(F in D){var F=!1;break t}F=!0}F||(D=gn(D),typeof A=="string"?D!=null&&Ji(D):ne(A,I,D))}function Ze(A){Zt.call(this),this.headers=new Map,this.L=A||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Ze,Zt);var ya=/^https?$/i,Xr=["POST","PUT"];e=Ze.prototype,e.Fa=function(A){this.H=A},e.ea=function(A,I,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);I=I?I.toUpperCase():"GET",this.D=A,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wr.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(I,String(A),!0),this.B=!1}catch(At){Ea(this,At);return}if(A=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ot in F)D.set(ot,F[ot]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const At of F.keys())D.set(At,F.get(At));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(At=>At.toLowerCase()=="content-type"),ot=g.FormData&&A instanceof g.FormData,!(Array.prototype.indexOf.call(Xr,I,void 0)>=0)||F||ot||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[At,Pt]of D)this.g.setRequestHeader(At,Pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(A),this.v=!1}catch(At){Ea(this,At)}};function Ea(A,I){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=I,A.o=5,br(A),xn(A)}function br(A){A.A||(A.A=!0,In(A,"complete"),In(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=A||7,In(this,"complete"),In(this,"abort"),xn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xn(this,!0)),Ze.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?ys(this):this.Xa())},e.Xa=function(){ys(this)};function ys(A){if(A.h&&typeof u<"u"){if(A.v&&ci(A)==4)setTimeout(A.Ca.bind(A),0);else if(In(A,"readystatechange"),ci(A)==4){A.h=!1;try{const At=A.ca();t:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break t;default:I=!1}var D;if(!(D=I)){var F;if(F=At===0){let Pt=String(A.D).match(pe)[1]||null;!Pt&&g.self&&g.self.location&&(Pt=g.self.location.protocol.slice(0,-1)),F=!ya.test(Pt?Pt.toLowerCase():"")}D=F}if(D)In(A,"complete"),In(A,"success");else{A.o=6;try{var ot=ci(A)>2?A.g.statusText:""}catch{ot=""}A.l=ot+" ["+A.ca()+"]",br(A)}}finally{xn(A)}}}}function xn(A,I){if(A.g){A.m&&(clearTimeout(A.m),A.m=null);const D=A.g;A.g=null,I||In(A,"ready");try{D.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function ci(A){return A.g?A.g.readyState:0}e.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(A){if(this.g){var I=this.g.responseText;return A&&I.indexOf(A)==0&&(I=I.substring(A.length)),Ye(I)}};function Ir(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.F){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function Rr(A){const I={};A=(A.g&&ci(A)>=2&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<A.length;F++){if(X(A[F]))continue;var D=Vi(A[F]);const ot=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const At=I[ot]||[];I[ot]=At,At.push(D)}$(I,function(F){return F.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fn(A,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[A]||I}function Aa(A){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fn("failFast",!1,A),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fn("baseRetryDelayMs",5e3,A),this.Za=Fn("retryDelaySeedMs",1e4,A),this.Ta=Fn("forwardChannelMaxRetries",2,A),this.va=Fn("forwardChannelRequestTimeoutMs",2e4,A),this.ma=A&&A.xmlHttpFactory||void 0,this.Ua=A&&A.Rb||void 0,this.Aa=A&&A.useFetchStreams||!1,this.O=void 0,this.L=A&&A.supportsCrossDomainXhr||!1,this.M="",this.h=new vt(A&&A.concurrentRequestLimit),this.Ba=new Dn,this.S=A&&A.fastHandshake||!1,this.R=A&&A.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=A&&A.Pb||!1,A&&A.ua&&this.j.ua(),A&&A.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&A&&A.detectBufferingProxy||!1,this.ia=void 0,A&&A.longPollingTimeout&&A.longPollingTimeout>0&&(this.ia=A.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Aa.prototype,e.ka=8,e.I=1,e.connect=function(A,I,D,F){$e(0),this.W=A,this.H=I||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=Wl(this,null,this.W),wa(this)};function Os(A){if(xa(A),A.I==3){var I=A.V++,D=hn(A.J);if(ne(D,"SID",A.M),ne(D,"RID",I),ne(D,"TYPE","terminate"),Ps(A,D),I=new Ut(A,A.j,I),I.M=2,I.A=yi(hn(D)),D=!1,g.navigator&&g.navigator.sendBeacon)try{D=g.navigator.sendBeacon(I.A.toString(),"")}catch{}!D&&g.Image&&(new Image().src=I.A,D=!0),D||(I.g=ks(I.j,null),I.g.ea(I.A)),I.F=Date.now(),fa(I)}Xl(A)}function Nr(A){A.g&&(mt(A),A.g.cancel(),A.g=null)}function xa(A){Nr(A),A.v&&(g.clearTimeout(A.v),A.v=null),_n(A),A.h.cancel(),A.m&&(typeof A.m=="number"&&g.clearTimeout(A.m),A.m=null)}function wa(A){if(!da(A.h)&&!A.m){A.m=!0;var I=A.Ea;wt||U(),Rt||(wt(),Rt=!0),H.add(I,A),A.D=0}}function ru(A,I){return Le(A.h)>=A.h.j-(A.m?1:0)?!1:A.m?(A.i=I.G.concat(A.i),!0):A.I==1||A.I==2||A.D>=(A.Sa?0:A.Ta)?!1:(A.m=ms(y(A.Ea,A,I),il(A,A.D)),A.D++,!0)}e.Ea=function(A){if(this.m)if(this.m=null,this.I==1){if(!A){this.V=Math.floor(Math.random()*1e5),A=this.V++;const ot=new Ut(this,this.j,A);let At=this.o;if(this.U&&(At?(At=St(At),Vt(At,this.U)):At=this.U),this.u!==null||this.R||(ot.J=At,At=null),this.S)t:{for(var I=0,D=0;D<this.i.length;D++){e:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break e}F=void 0}if(F===void 0)break;if(I+=F,I>4096){I=D;break t}if(I===4096||D===this.i.length-1){I=D+1;break t}}I=1e3}else I=1e3;I=Es(this,ot,I),D=hn(this.J),ne(D,"RID",A),ne(D,"CVER",22),this.G&&ne(D,"X-HTTP-Session-Id",this.G),Ps(this,D),At&&(this.R?I="headers="+Ji(gn(At))+"&"+I:this.u&&lr(D,this.u,At)),Ja(this.h,ot),this.Ra&&ne(D,"TYPE","init"),this.S?(ne(D,"$req",I),ne(D,"SID","null"),ot.U=!0,Si(ot,D,null)):Si(ot,D,I),this.I=2}}else this.I==3&&(A?Ve(this,A):this.i.length==0||da(this.h)||Ve(this))};function Ve(A,I){var D;I?D=I.l:D=A.V++;const F=hn(A.J);ne(F,"SID",A.M),ne(F,"RID",D),ne(F,"AID",A.K),Ps(A,F),A.u&&A.o&&lr(F,A.u,A.o),D=new Ut(A,A.j,D,A.D+1),A.u===null&&(D.J=A.o),I&&(A.i=I.G.concat(A.i)),I=Es(A,D,1e3),D.H=Math.round(A.va*.5)+Math.round(A.va*.5*Math.random()),Ja(A.h,D),Si(D,F,I)}function Ps(A,I){A.H&&$t(A.H,function(D,F){ne(I,F,D)}),A.l&&$t({},function(D,F){ne(I,F,D)})}function Es(A,I,D){D=Math.min(A.i.length,D);const F=A.l?y(A.l.Ka,A.l,A):null;t:{var ot=A.i;let ae=-1;for(;;){const on=["count="+D];ae==-1?D>0?(ae=ot[0].g,on.push("ofs="+ae)):ae=0:on.push("ofs="+ae);let Ue=!0;for(let vn=0;vn<D;vn++){var At=ot[vn].g;const zi=ot[vn].map;if(At-=ae,At<0)ae=Math.max(0,ot[vn].g-100),Ue=!1;else try{At="req"+At+"_"||"";try{var Pt=zi instanceof Map?zi:Object.entries(zi);for(const[Kr,Ai]of Pt){let nr=Ai;w(Ai)&&(nr=Wn(Ai)),on.push(At+Kr+"="+encodeURIComponent(nr))}}catch(Kr){throw on.push(At+"type="+encodeURIComponent("_badmap")),Kr}}catch{F&&F(zi)}}if(Ue){Pt=on.join("&");break t}}Pt=void 0}return A=A.i.splice(0,D),I.G=A,Pt}function Dr(A){if(!A.g&&!A.v){A.Y=1;var I=A.Da;wt||U(),Rt||(wt(),Rt=!0),H.add(I,A),A.A=0}}function nl(A){return A.g||A.v||A.A>=3?!1:(A.Y++,A.v=ms(y(A.Da,A),il(A,A.A)),A.A++,!0)}e.Da=function(){if(this.v=null,de(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var A=4*this.T;this.j.info("BP detection timer enabled: "+A),this.B=ms(y(this.Wa,this),A)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$e(10),Nr(this),de(this))};function mt(A){A.B!=null&&(g.clearTimeout(A.B),A.B=null)}function de(A){A.g=new Ut(A,A.j,"rpc",A.Y),A.u===null&&(A.g.J=A.o),A.g.P=0;var I=hn(A.na);ne(I,"RID","rpc"),ne(I,"SID",A.M),ne(I,"AID",A.K),ne(I,"CI",A.F?"0":"1"),!A.F&&A.ia&&ne(I,"TO",A.ia),ne(I,"TYPE","xmlhttp"),Ps(A,I),A.u&&A.o&&lr(I,A.u,A.o),A.O&&(A.g.H=A.O);var D=A.g;A=A.ba,D.M=1,D.A=yi(hn(I)),D.u=null,D.R=!0,Tr(D,A)}e.Va=function(){this.C!=null&&(this.C=null,Nr(this),nl(this),$e(19))};function _n(A){A.C!=null&&(g.clearTimeout(A.C),A.C=null)}function Ls(A,I){var D=null;if(A.g==I){_n(A),mt(A),A.g=null;var F=2}else if(or(A.h,I))D=I.G,xe(A.h,I),F=1;else return;if(A.I!=0){if(I.o)if(F==1){D=I.u?I.u.length:0,I=Date.now()-I.F;var ot=A.D;F=qr(),In(F,new Jo(F,D)),wa(A)}else Dr(A);else if(ot=I.m,ot==3||ot==0&&I.X>0||!(F==1&&ru(A,I)||F==2&&nl(A)))switch(D&&D.length>0&&(I=A.h,I.i=I.i.concat(D)),ot){case 1:As(A,5);break;case 4:As(A,10);break;case 3:As(A,6);break;default:As(A,2)}}}function il(A,I){let D=A.Qa+Math.floor(Math.random()*A.Za);return A.isActive()||(D*=2),D*I}function As(A,I){if(A.j.info("Error code "+I),I==2){var D=y(A.bb,A),F=A.Ua;const ot=!F;F=new er(F||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||sn(F,"https"),yi(F),ot?Ms(F.toString(),D):Yr(F.toString(),D)}else $e(2);A.I=0,A.l&&A.l.pa(I),Xl(A),xa(A)}e.bb=function(A){A?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function Xl(A){if(A.I=0,A.ja=[],A.l){const I=Ce(A.h);(I.length!=0||A.i.length!=0)&&(z(A.ja,I),z(A.ja,A.i),A.h.i.length=0,k(A.i),A.i.length=0),A.l.oa()}}function Wl(A,I,D){var F=D instanceof er?hn(D):new er(D);if(F.g!="")I&&(F.g=I+"."+F.g),Ui(F,F.u);else{var ot=g.location;F=ot.protocol,I=I?I+"."+ot.hostname:ot.hostname,ot=+ot.port;const At=new er(null);F&&sn(At,F),I&&(At.g=I),ot&&Ui(At,ot),D&&(At.h=D),F=At}return D=A.G,I=A.wa,D&&I&&ne(F,D,I),ne(F,"VER",A.ka),Ps(A,F),F}function ks(A,I,D){if(I&&!A.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=A.Aa&&!A.ma?new Ze(new Sr({ab:D})):new Ze(A.ma),I.Fa(A.L),I}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cn(){}e=Cn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Bs(){}Bs.prototype.g=function(A,I){return new ve(A,I)};function ve(A,I){Zt.call(this),this.g=new Aa(I),this.l=A,this.h=I&&I.messageUrlParams||null,A=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(A?A["X-WebChannel-Content-Type"]=I.messageContentType:A={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(A?A["X-WebChannel-Client-Profile"]=I.sa:A={"X-WebChannel-Client-Profile":I.sa}),this.g.U=A,(A=I&&I.Qb)&&!X(A)&&(this.g.u=A),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!X(I)&&(this.g.G=I,A=this.h,A!==null&&I in A&&(A=this.h,I in A&&delete A[I])),this.j=new Ne(this)}b(ve,Zt),ve.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ve.prototype.close=function(){Os(this.g)},ve.prototype.o=function(A){var I=this.g;if(typeof A=="string"){var D={};D.__data__=A,A=D}else this.v&&(D={},D.__data__=Wn(A),A=D);I.i.push(new $o(I.Ya++,A)),I.I==3&&wa(I)},ve.prototype.N=function(){this.g.l=null,delete this.j,Os(this.g),delete this.g,ve.Z.N.call(this)};function Vs(A){kt.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var I=A.__sm__;if(I){t:{for(const D in I){A=D;break t}A=void 0}(this.i=A)&&(A=this.i,I=I!==null&&A in I?I[A]:void 0),this.data=I}else this.data=A}b(Vs,kt);function Wr(){We.call(this),this.status=1}b(Wr,We);function Ne(A){this.g=A}b(Ne,Cn),Ne.prototype.ra=function(){In(this.g,"a")},Ne.prototype.qa=function(A){In(this.g,new Vs(A))},Ne.prototype.pa=function(A){In(this.g,new Wr)},Ne.prototype.oa=function(){In(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,ve.prototype.send=ve.prototype.o,ve.prototype.open=ve.prototype.m,ve.prototype.close=ve.prototype.close,HC=function(){return new Bs},jC=function(){return qr()},zC=Ae,pm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rn.NO_ERROR=0,Rn.TIMEOUT=8,Rn.HTTP_ERROR=6,fd=Rn,pn.COMPLETE="complete",FC=pn,ql.EventType=Xe,Xe.OPEN="a",Xe.CLOSE="b",Xe.ERROR="c",Xe.MESSAGE="d",Zt.prototype.listen=Zt.prototype.J,Wu=ql,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,UC=Ze}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});const Mx="@firebase/firestore",Ox="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new o0("@firebase/firestore");function Cc(){return Ol.logLevel}function Ht(e,...t){if(Ol.logLevel<=Me.DEBUG){const n=t.map(bp);Ol.debug(`Firestore (${Zc}): ${e}`,...n)}}function Ga(e,...t){if(Ol.logLevel<=Me.ERROR){const n=t.map(bp);Ol.error(`Firestore (${Zc}): ${e}`,...n)}}function zc(e,...t){if(Ol.logLevel<=Me.WARN){const n=t.map(bp);Ol.warn(`Firestore (${Zc}): ${e}`,...n)}}function bp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,GC(e,i,n)}function GC(e,t,n){let i=`FIRESTORE (${Zc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ga(i),new Error(i)}function Je(e,t,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,e||GC(t,l,i)}function me(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends cs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Wi.UNAUTHENTICATED)))}shutdown(){}}class EM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class AM{constructor(t){this.t=t,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Je(this.o===void 0,42304);let i=this.i;const l=E=>this.i!==i?(i=this.i,n(E)):Promise.resolve();let u=new Lo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Lo,t.enqueueRetryable((()=>l(this.currentUser)))};const g=()=>{const E=u;t.enqueueRetryable((async()=>{await E.promise,await l(this.currentUser)}))},w=E=>{Ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),g())};this.t.onInit((E=>w(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?w(E):(Ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Lo)}}),0),g()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(Ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string",31837,{l:i}),new qC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Je(t===null||typeof t=="string",2055,{h:t}),new Wi(t)}}class xM{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wM{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new xM(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Wi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Px{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TM{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ss(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Je(this.o===void 0,3512);const i=u=>{u.error!=null&&Ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const g=u.token!==this.m;return this.m=u.token,Ht("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>i(u)))};const l=u=>{Ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Px(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Px(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=_M(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=t.charAt(l[u]%62))}return i}}function Oe(e,t){return e<t?-1:e>t?1:0}function ym(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const l=e.charAt(i),u=t.charAt(i);if(l!==u)return Vg(l)===Vg(u)?Oe(l,u):Vg(l)?1:-1}return Oe(e.length,t.length)}const CM=55296,vM=57343;function Vg(e){const t=e.charCodeAt(0);return t>=CM&&t<=vM}function jc(e,t,n){return e.length===t.length&&e.every(((i,l)=>n(i,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="__name__";class Xs{constructor(t,n,i){n===void 0?n=0:n>t.length&&se(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&se(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Xs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Xs?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let l=0;l<i;l++){const u=Xs.compareSegments(t.get(l),n.get(l));if(u!==0)return u}return Oe(t.length,n.length)}static compareSegments(t,n){const i=Xs.isNumericId(t),l=Xs.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?Xs.extractNumericId(t).compare(Xs.extractNumericId(n)):ym(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Po.fromString(t.substring(4,t.length-2))}}class On extends Xs{construct(t,n,i){return new On(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new On(n)}static emptyPath(){return new On([])}}const SM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Xs{construct(t,n,i){return new Li(t,n,i)}static isValidIdentifier(t){return SM.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lx}static keyField(){return new Li([Lx])}static fromServerFormat(t){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Kt(Dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let g=!1;for(;l<t.length;){const w=t[l];if(w==="\\"){if(l+1===t.length)throw new Kt(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const E=t[l+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Kt(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=E,l+=2}else w==="`"?(g=!g,l++):w!=="."||g?(i+=w,l++):(u(),l++)}if(u(),g)throw new Kt(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Li(n)}static emptyPath(){return new Li([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.path=t}static fromPath(t){return new te(On.fromString(t))}static fromName(t){return new te(On.fromString(t).popFirst(5))}static empty(){return new te(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&On.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return On.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new te(new On(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(e,t,n){if(!n)throw new Kt(Dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function IM(e,t,n,i){if(t===!0&&i===!0)throw new Kt(Dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function kx(e){if(!te.isDocumentKey(e))throw new Kt(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function YC(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Rp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":se(12329,{type:typeof e})}function Pl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kt(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rp(e);throw new Kt(Dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(e,t){const n={typeString:e};return t&&(n.value=t),n}function Bh(e,t){if(!YC(e))throw new Kt(Dt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const l=t[i].typeString,u="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const g=e[i];if(l&&typeof g!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&g!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Kt(Dt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=-62135596800,Vx=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(t){return Tn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Vx);return new Tn(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Bx)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Kt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vx}_compareTo(t){return this.seconds===t.seconds?Oe(this.nanoseconds,t.nanoseconds):Oe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Bh(t,Tn._jsonSchema))return new Tn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Bx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:oi("string",Tn._jsonSchemaVersion),seconds:oi("number"),nanoseconds:oi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(t){return new fe(t)}static min(){return new fe(new Tn(0,0))}static max(){return new fe(new Tn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=-1;function RM(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,l=fe.fromTimestamp(i===1e9?new Tn(n+1,0):new Tn(n,i));return new Uo(l,te.empty(),t)}function NM(e){return new Uo(e.readTime,e.key,ph)}class Uo{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Uo(fe.min(),te.empty(),ph)}static max(){return new Uo(fe.max(),te.empty(),ph)}}function DM(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=te.comparator(e.documentKey,t.documentKey),n!==0?n:Oe(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(e){if(e.code!==Dt.FAILED_PRECONDITION||e.message!==MM)throw e;Ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new It(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof It?n:It.resolve(n)}catch(n){return It.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):It.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):It.reject(n)}static resolve(t){return new It(((n,i)=>{n(t)}))}static reject(t){return new It(((n,i)=>{i(t)}))}static waitFor(t){return new It(((n,i)=>{let l=0,u=0,g=!1;t.forEach((w=>{++l,w.next((()=>{++u,g&&u===l&&n()}),(E=>i(E)))})),g=!0,u===l&&n()}))}static or(t){let n=It.resolve(!1);for(const i of t)n=n.next((l=>l?It.resolve(l):i()));return n}static forEach(t,n){const i=[];return t.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(t,n){return new It(((i,l)=>{const u=t.length,g=new Array(u);let w=0;for(let E=0;E<u;E++){const y=E;n(t[y]).next((_=>{g[y]=_,++w,w===u&&i(g)}),(_=>l(_)))}}))}static doWhile(t,n){return new It(((i,l)=>{const u=()=>{t()===!0?n().next((()=>{u()}),l):i()};u()}))}}function PM(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $c(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}g0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=-1;function m0(e){return e==null}function Pd(e){return e===0&&1/e==-1/0}function LM(e){return typeof e=="number"&&Number.isInteger(e)&&!Pd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="";function kM(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ux(t)),t=BM(e.get(n),t);return Ux(t)}function BM(e,t){let n=t;const i=e.length;for(let l=0;l<i;l++){const u=e.charAt(l);switch(u){case"\0":n+="";break;case XC:n+="";break;default:n+=u}}return n}function Ux(e){return e+XC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ko(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function WC(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t,n){this.comparator=t,this.root=n||Pi.EMPTY}insert(t,n){return new kn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(t){return new kn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(t,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jf(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jf(this.root,t,this.comparator,!0)}}class Jf{constructor(t,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?i(t.key,n):1,n&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pi{constructor(t,n,i,l,u){this.key=t,this.value=n,this.color=i??Pi.RED,this.left=l??Pi.EMPTY,this.right=u??Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,l,u){return new Pi(t??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let l=this;const u=i(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Pi.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw se(27949);return t+(this.isRed()?0:1)}}Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1;Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(t,n,i,l,u){return this}insert(t,n,i){return new Pi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this.comparator=t,this.data=new kn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new zx(this.data.getIterator())}getIteratorFrom(t){return new zx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof pi)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new pi(this.comparator);return n.data=t,n}}class zx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this.fields=t,t.sort(Li.comparator)}static empty(){return new Hr([])}unionWith(t){let n=new pi(Li.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Hr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return jc(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new KC("Invalid base64 string: "+u):u}})(t);return new ki(n)}static fromUint8Array(t){const n=(function(l){let u="";for(let g=0;g<l.length;++g)u+=String.fromCharCode(l[g]);return u})(t);return new ki(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Oe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ki.EMPTY_BYTE_STRING=new ki("");const VM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(e){if(Je(!!e,39018),typeof e=="string"){let t=0;const n=VM.exec(e);if(Je(!!n,46558,{timestamp:e}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ti(e.seconds),nanos:ti(e.nanos)}}function ti(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function zo(e){return typeof e=="string"?ki.fromBase64String(e):ki.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="server_timestamp",ZC="__type__",JC="__previous_value__",$C="__local_write_time__";function Dp(e){return(e?.mapValue?.fields||{})[ZC]?.stringValue===QC}function p0(e){const t=e.mapValue.fields[JC];return Dp(t)?p0(t):t}function yh(e){const t=Fo(e.mapValue.fields[$C].timestampValue);return new Tn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(t,n,i,l,u,g,w,E,y,_){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=E,this.useFetchStreams=y,this.isUsingEmulator=_}}const Ld="(default)";class Eh{constructor(t,n){this.projectId=t,this.database=n||Ld}static empty(){return new Eh("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(t){return t instanceof Eh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__type__",FM="__max__",$f={mapValue:{}},ev="__vector__",kd="value";function jo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Dp(e)?4:jM(e)?9007199254740991:zM(e)?10:11:se(28295,{value:e})}function ra(e,t){if(e===t)return!0;const n=jo(e);if(n!==jo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yh(e).isEqual(yh(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const g=Fo(l.timestampValue),w=Fo(u.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(l,u){return zo(l.bytesValue).isEqual(zo(u.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(l,u){return ti(l.geoPointValue.latitude)===ti(u.geoPointValue.latitude)&&ti(l.geoPointValue.longitude)===ti(u.geoPointValue.longitude)})(e,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ti(l.integerValue)===ti(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const g=ti(l.doubleValue),w=ti(u.doubleValue);return g===w?Pd(g)===Pd(w):isNaN(g)&&isNaN(w)}return!1})(e,t);case 9:return jc(e.arrayValue.values||[],t.arrayValue.values||[],ra);case 10:case 11:return(function(l,u){const g=l.mapValue.fields||{},w=u.mapValue.fields||{};if(Fx(g)!==Fx(w))return!1;for(const E in g)if(g.hasOwnProperty(E)&&(w[E]===void 0||!ra(g[E],w[E])))return!1;return!0})(e,t);default:return se(52216,{left:e})}}function Ah(e,t){return(e.values||[]).find((n=>ra(n,t)))!==void 0}function Hc(e,t){if(e===t)return 0;const n=jo(e),i=jo(t);if(n!==i)return Oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(e.booleanValue,t.booleanValue);case 2:return(function(u,g){const w=ti(u.integerValue||u.doubleValue),E=ti(g.integerValue||g.doubleValue);return w<E?-1:w>E?1:w===E?0:isNaN(w)?isNaN(E)?0:-1:1})(e,t);case 3:return jx(e.timestampValue,t.timestampValue);case 4:return jx(yh(e),yh(t));case 5:return ym(e.stringValue,t.stringValue);case 6:return(function(u,g){const w=zo(u),E=zo(g);return w.compareTo(E)})(e.bytesValue,t.bytesValue);case 7:return(function(u,g){const w=u.split("/"),E=g.split("/");for(let y=0;y<w.length&&y<E.length;y++){const _=Oe(w[y],E[y]);if(_!==0)return _}return Oe(w.length,E.length)})(e.referenceValue,t.referenceValue);case 8:return(function(u,g){const w=Oe(ti(u.latitude),ti(g.latitude));return w!==0?w:Oe(ti(u.longitude),ti(g.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Hx(e.arrayValue,t.arrayValue);case 10:return(function(u,g){const w=u.fields||{},E=g.fields||{},y=w[kd]?.arrayValue,_=E[kd]?.arrayValue,b=Oe(y?.values?.length||0,_?.values?.length||0);return b!==0?b:Hx(y,_)})(e.mapValue,t.mapValue);case 11:return(function(u,g){if(u===$f.mapValue&&g===$f.mapValue)return 0;if(u===$f.mapValue)return 1;if(g===$f.mapValue)return-1;const w=u.fields||{},E=Object.keys(w),y=g.fields||{},_=Object.keys(y);E.sort(),_.sort();for(let b=0;b<E.length&&b<_.length;++b){const R=ym(E[b],_[b]);if(R!==0)return R;const k=Hc(w[E[b]],y[_[b]]);if(k!==0)return k}return Oe(E.length,_.length)})(e.mapValue,t.mapValue);default:throw se(23264,{he:n})}}function jx(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Oe(e,t);const n=Fo(e),i=Fo(t),l=Oe(n.seconds,i.seconds);return l!==0?l:Oe(n.nanos,i.nanos)}function Hx(e,t){const n=e.values||[],i=t.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Hc(n[l],i[l]);if(u)return u}return Oe(n.length,i.length)}function Gc(e){return Em(e)}function Em(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const i=Fo(n);return`time(${i.seconds},${i.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return zo(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return te.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=Em(u);return i+"]"})(e.arrayValue):"mapValue"in e?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const g of i)u?u=!1:l+=",",l+=`${g}:${Em(n.fields[g])}`;return l+"}"})(e.mapValue):se(61005,{value:e})}function dd(e){switch(jo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=p0(e);return t?16+dd(t):16;case 5:return 2*e.stringValue.length;case 6:return zo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+dd(u)),0)})(e.arrayValue);case 10:case 11:return(function(i){let l=0;return Ko(i.fields,((u,g)=>{l+=u.length+dd(g)})),l})(e.mapValue);default:throw se(13486,{value:e})}}function Am(e){return!!e&&"integerValue"in e}function Mp(e){return!!e&&"arrayValue"in e}function Gx(e){return!!e&&"nullValue"in e}function qx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gd(e){return!!e&&"mapValue"in e}function zM(e){return(e?.mapValue?.fields||{})[tv]?.stringValue===ev}function ih(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ko(e.mapValue.fields,((n,i)=>t.mapValue.fields[n]=ih(i))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ih(e.arrayValue.values[n]);return t}return{...e}}function jM(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===FM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.value=t}static empty(){return new mr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!gd(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ih(n)}setAll(t){let n=Li.emptyPath(),i={},l=[];t.forEach(((g,w)=>{if(!n.isImmediateParentOf(w)){const E=this.getFieldsMap(n);this.applyChanges(E,i,l),i={},l=[],n=w.popLast()}g?i[w.lastSegment()]=ih(g):l.push(w.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(t){const n=this.field(t.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ra(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let l=n.mapValue.fields[t.get(i)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,i){Ko(n,((l,u)=>t[l]=u));for(const l of i)delete t[l]}clone(){return new mr(ih(this.value))}}function nv(e){const t=[];return Ko(e.fields,((n,i)=>{const l=new Li([n]);if(gd(i)){const u=nv(i.mapValue).fields;if(u.length===0)t.push(l);else for(const g of u)t.push(l.child(g))}else t.push(l)})),new Hr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n,i,l,u,g,w){this.key=t,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=g,this.documentState=w}static newInvalidDocument(t){return new Ki(t,0,fe.min(),fe.min(),fe.min(),mr.empty(),0)}static newFoundDocument(t,n,i,l){return new Ki(t,1,n,fe.min(),i,l,0)}static newNoDocument(t,n){return new Ki(t,2,n,fe.min(),fe.min(),mr.empty(),0)}static newUnknownDocument(t,n){return new Ki(t,3,n,fe.min(),fe.min(),mr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ki&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(t,n){this.position=t,this.inclusive=n}}function Yx(e,t,n){let i=0;for(let l=0;l<e.position.length;l++){const u=t[l],g=e.position[l];if(u.field.isKeyField()?i=te.comparator(te.fromName(g.referenceValue),n.key):i=Hc(g,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Xx(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ra(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t,n="asc"){this.field=t,this.dir=n}}function HM(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{}class gi extends iv{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new qM(t,n,i):n==="array-contains"?new WM(t,i):n==="in"?new KM(t,i):n==="not-in"?new QM(t,i):n==="array-contains-any"?new ZM(t,i):new gi(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new YM(t,i):new XM(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hc(n,this.value)):n!==null&&jo(this.value)===jo(n)&&this.matchesComparison(Hc(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends iv{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new sa(t,n)}matches(t){return rv(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rv(e){return e.op==="and"}function sv(e){return GM(e)&&rv(e)}function GM(e){for(const t of e.filters)if(t instanceof sa)return!1;return!0}function xm(e){if(e instanceof gi)return e.field.canonicalString()+e.op.toString()+Gc(e.value);if(sv(e))return e.filters.map((t=>xm(t))).join(",");{const t=e.filters.map((n=>xm(n))).join(",");return`${e.op}(${t})`}}function av(e,t){return e instanceof gi?(function(i,l){return l instanceof gi&&i.op===l.op&&i.field.isEqual(l.field)&&ra(i.value,l.value)})(e,t):e instanceof sa?(function(i,l){return l instanceof sa&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,g,w)=>u&&av(g,l.filters[w])),!0):!1})(e,t):void se(19439)}function ov(e){return e instanceof gi?(function(n){return`${n.field.canonicalString()} ${n.op} ${Gc(n.value)}`})(e):e instanceof sa?(function(n){return n.op.toString()+" {"+n.getFilters().map(ov).join(" ,")+"}"})(e):"Filter"}class qM extends gi{constructor(t,n,i){super(t,n,i),this.key=te.fromName(i.referenceValue)}matches(t){const n=te.comparator(t.key,this.key);return this.matchesComparison(n)}}class YM extends gi{constructor(t,n){super(t,"in",n),this.keys=lv("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class XM extends gi{constructor(t,n){super(t,"not-in",n),this.keys=lv("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function lv(e,t){return(t.arrayValue?.values||[]).map((n=>te.fromName(n.referenceValue)))}class WM extends gi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Mp(n)&&Ah(n.arrayValue,this.value)}}class KM extends gi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ah(this.value.arrayValue,n)}}class QM extends gi{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ah(this.value.arrayValue,n)}}class ZM extends gi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Mp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ah(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(t,n=null,i=[],l=[],u=null,g=null,w=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=g,this.endAt=w,this.Te=null}}function Wx(e,t=null,n=[],i=[],l=null,u=null,g=null){return new JM(e,t,n,i,l,u,g)}function Op(e){const t=me(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>xm(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),m0(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Gc(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Gc(i))).join(",")),t.Te=n}return t.Te}function Pp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!HM(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!av(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xx(e.startAt,t.startAt)&&Xx(e.endAt,t.endAt)}function wm(e){return te.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(t,n=null,i=[],l=[],u=null,g="F",w=null,E=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=g,this.startAt=w,this.endAt=E,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $M(e,t,n,i,l,u,g,w){return new y0(e,t,n,i,l,u,g,w)}function Lp(e){return new y0(e)}function Kx(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function tO(e){return e.collectionGroup!==null}function rh(e){const t=me(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new pi(Li.comparator);return g.filters.forEach((E=>{E.getFlattenedFilters().forEach((y=>{y.isInequality()&&(w=w.add(y.field))}))})),w})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Vd(u,i))})),n.has(Li.keyField().canonicalString())||t.Ie.push(new Vd(Li.keyField(),i))}return t.Ie}function Ks(e){const t=me(e);return t.Ee||(t.Ee=eO(t,rh(e))),t.Ee}function eO(e,t){if(e.limitType==="F")return Wx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Vd(l.field,u)}));const n=e.endAt?new Bd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Bd(e.startAt.position,e.startAt.inclusive):null;return Wx(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Tm(e,t,n){return new y0(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function E0(e,t){return Pp(Ks(e),Ks(t))&&e.limitType===t.limitType}function cv(e){return`${Op(Ks(e))}|lt:${e.limitType}`}function vc(e){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>ov(l))).join(", ")}]`),m0(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(g){return`${g.field.canonicalString()} (${g.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Gc(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Gc(l))).join(",")),`Target(${i})`})(Ks(e))}; limitType=${e.limitType})`}function A0(e,t){return t.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):te.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(e,t)&&(function(i,l){for(const u of rh(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(e,t)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(e,t)&&(function(i,l){return!(i.startAt&&!(function(g,w,E){const y=Yx(g,w,E);return g.inclusive?y<=0:y<0})(i.startAt,rh(i),l)||i.endAt&&!(function(g,w,E){const y=Yx(g,w,E);return g.inclusive?y>=0:y>0})(i.endAt,rh(i),l))})(e,t)}function nO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function uv(e){return(t,n)=>{let i=!1;for(const l of rh(e)){const u=iO(l,t,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function iO(e,t,n){const i=e.field.isKeyField()?te.comparator(t.key,n.key):(function(u,g,w){const E=g.data.field(u),y=w.data.field(u);return E!==null&&y!==null?Hc(E,y):se(42886)})(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return se(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),l=this.inner[i];if(l===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ko(this.inner,((n,i)=>{for(const[l,u]of i)t(l,u)}))}isEmpty(){return WC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new kn(te.comparator);function qa(){return rO}const hv=new kn(te.comparator);function Ku(...e){let t=hv;for(const n of e)t=t.insert(n.key,n);return t}function fv(e){let t=hv;return e.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function _l(){return sh()}function dv(){return sh()}function sh(){return new jl((e=>e.toString()),((e,t)=>e.isEqual(t)))}const sO=new kn(te.comparator),aO=new pi(te.comparator);function Pe(...e){let t=aO;for(const n of e)t=t.add(n);return t}const oO=new pi(Oe);function lO(){return oO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(t)?"-0":t}}function gv(e){return{integerValue:""+e}}function cO(e,t){return LM(t)?gv(t):kp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this._=void 0}}function uO(e,t,n){return e instanceof xh?(function(l,u){const g={fields:{[ZC]:{stringValue:QC},[$C]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Dp(u)&&(u=p0(u)),u&&(g.fields[JC]=u),{mapValue:g}})(n,t):e instanceof wh?pv(e,t):e instanceof Th?yv(e,t):(function(l,u){const g=mv(l,u),w=Qx(g)+Qx(l.Ae);return Am(g)&&Am(l.Ae)?gv(w):kp(l.serializer,w)})(e,t)}function hO(e,t,n){return e instanceof wh?pv(e,t):e instanceof Th?yv(e,t):n}function mv(e,t){return e instanceof Ud?(function(i){return Am(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(t)?t:{integerValue:0}:null}class xh extends x0{}class wh extends x0{constructor(t){super(),this.elements=t}}function pv(e,t){const n=Ev(t);for(const i of e.elements)n.some((l=>ra(l,i)))||n.push(i);return{arrayValue:{values:n}}}class Th extends x0{constructor(t){super(),this.elements=t}}function yv(e,t){let n=Ev(t);for(const i of e.elements)n=n.filter((l=>!ra(l,i)));return{arrayValue:{values:n}}}class Ud extends x0{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Qx(e){return ti(e.integerValue||e.doubleValue)}function Ev(e){return Mp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(t,n){this.field=t,this.transform=n}}function dO(e,t){return e.field.isEqual(t.field)&&(function(i,l){return i instanceof wh&&l instanceof wh||i instanceof Th&&l instanceof Th?jc(i.elements,l.elements,ra):i instanceof Ud&&l instanceof Ud?ra(i.Ae,l.Ae):i instanceof xh&&l instanceof xh})(e.transform,t.transform)}class gO{constructor(t,n){this.version=t,this.transformResults=n}}class Qs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Qs}static exists(t){return new Qs(void 0,t)}static updateTime(t){return new Qs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function md(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class w0{}function Av(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new wv(e.key,Qs.none()):new Vh(e.key,e.data,Qs.none());{const n=e.data,i=mr.empty();let l=new pi(Li.comparator);for(let u of t.fields)if(!l.has(u)){let g=n.field(u);g===null&&u.length>1&&(u=u.popLast(),g=n.field(u)),g===null?i.delete(u):i.set(u,g),l=l.add(u)}return new Qo(e.key,i,new Hr(l.toArray()),Qs.none())}}function mO(e,t,n){e instanceof Vh?(function(l,u,g){const w=l.value.clone(),E=Jx(l.fieldTransforms,u,g.transformResults);w.setAll(E),u.convertToFoundDocument(g.version,w).setHasCommittedMutations()})(e,t,n):e instanceof Qo?(function(l,u,g){if(!md(l.precondition,u))return void u.convertToUnknownDocument(g.version);const w=Jx(l.fieldTransforms,u,g.transformResults),E=u.data;E.setAll(xv(l)),E.setAll(w),u.convertToFoundDocument(g.version,E).setHasCommittedMutations()})(e,t,n):(function(l,u,g){u.convertToNoDocument(g.version).setHasCommittedMutations()})(0,t,n)}function ah(e,t,n,i){return e instanceof Vh?(function(u,g,w,E){if(!md(u.precondition,g))return w;const y=u.value.clone(),_=$x(u.fieldTransforms,E,g);return y.setAll(_),g.convertToFoundDocument(g.version,y).setHasLocalMutations(),null})(e,t,n,i):e instanceof Qo?(function(u,g,w,E){if(!md(u.precondition,g))return w;const y=$x(u.fieldTransforms,E,g),_=g.data;return _.setAll(xv(u)),_.setAll(y),g.convertToFoundDocument(g.version,_).setHasLocalMutations(),w===null?null:w.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(e,t,n,i):(function(u,g,w){return md(u.precondition,g)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w})(e,t,n)}function pO(e,t){let n=null;for(const i of e.fieldTransforms){const l=t.data.field(i.field),u=mv(i.transform,l||null);u!=null&&(n===null&&(n=mr.empty()),n.set(i.field,u))}return n||null}function Zx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&jc(i,l,((u,g)=>dO(u,g)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vh extends w0{constructor(t,n,i,l=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Qo extends w0{constructor(t,n,i,l,u=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function xv(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Jx(e,t,n){const i=new Map;Je(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let l=0;l<n.length;l++){const u=e[l],g=u.transform,w=t.data.field(u.field);i.set(u.field,hO(g,w,n[l]))}return i}function $x(e,t,n){const i=new Map;for(const l of e){const u=l.transform,g=n.data.field(l.field);i.set(l.field,uO(u,g,t))}return i}class wv extends w0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yO extends w0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(t,n,i,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&mO(u,t,i[l])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=ah(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=ah(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=dv();return this.mutations.forEach((l=>{const u=t.get(l.key),g=u.overlayedDocument;let w=this.applyToLocalView(g,u.mutatedFields);w=n.has(l.key)?null:w;const E=Av(g,w);E!==null&&i.set(l.key,E),g.isValidDocument()||g.convertToNoDocument(fe.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Pe())}isEqual(t){return this.batchId===t.batchId&&jc(this.mutations,t.mutations,((n,i)=>Zx(n,i)))&&jc(this.baseMutations,t.baseMutations,((n,i)=>Zx(n,i)))}}class Bp{constructor(t,n,i,l){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(t,n,i){Je(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let l=(function(){return sO})();const u=t.mutations;for(let g=0;g<u.length;g++)l=l.insert(u[g].key,i[g].version);return new Bp(t,n,i,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,Be;function wO(e){switch(e){case Dt.OK:return se(64938);case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0;default:return se(15467,{code:e})}}function Tv(e){if(e===void 0)return Ga("GRPC error has no .code"),Dt.UNKNOWN;switch(e){case si.OK:return Dt.OK;case si.CANCELLED:return Dt.CANCELLED;case si.UNKNOWN:return Dt.UNKNOWN;case si.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case si.INTERNAL:return Dt.INTERNAL;case si.UNAVAILABLE:return Dt.UNAVAILABLE;case si.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case si.NOT_FOUND:return Dt.NOT_FOUND;case si.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case si.ABORTED:return Dt.ABORTED;case si.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case si.DATA_LOSS:return Dt.DATA_LOSS;default:return se(39323,{code:e})}}(Be=si||(si={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new Po([4294967295,4294967295],0);function tw(e){const t=TO().encode(e),n=new VC;return n.update(t),new Uint8Array(n.digest())}function ew(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Po([n,i],0),new Po([l,u],0)]}class Vp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qu(`Invalid padding: ${n}`);if(i<0)throw new Qu(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Po.fromNumber(this.ge)}ye(t,n,i){let l=t.add(n.multiply(Po.fromNumber(i)));return l.compare(_O)===1&&(l=new Po([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=tw(t),[i,l]=ew(n);for(let u=0;u<this.hashCount;u++){const g=this.ye(i,l,u);if(!this.we(g))return!1}return!0}static create(t,n,i){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),g=new Vp(u,l,n);return i.forEach((w=>g.insert(w))),g}insert(t){if(this.ge===0)return;const n=tw(t),[i,l]=ew(n);for(let u=0;u<this.hashCount;u++){const g=this.ye(i,l,u);this.Se(g)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(t,n,i,l,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const l=new Map;return l.set(t,Uh.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new T0(fe.min(),l,new kn(Oe),qa(),Pe())}}class Uh{constructor(t,n,i,l,u){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Uh(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(t,n,i,l){this.be=t,this.removedTargetIds=n,this.key=i,this.De=l}}class _v{constructor(t,n){this.targetId=t,this.Ce=n}}class Cv{constructor(t,n,i=ki.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=l}}class nw{constructor(){this.ve=0,this.Fe=iw(),this.Me=ki.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pe(),n=Pe(),i=Pe();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:se(38017,{changeType:u})}})),new Uh(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=iw()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CO{constructor(t){this.Ge=t,this.ze=new Map,this.je=qa(),this.Je=td(),this.He=td(),this.Ye=new kn(Oe)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:se(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,i=t.Ce.count,l=this.ot(n);if(l){const u=l.target;if(wm(u))if(i===0){const g=new te(u.path);this.et(n,g,Ki.newNoDocument(g,fe.min()))}else Je(i===1,20013,{expectedCount:i});else{const g=this._t(n);if(g!==i){const w=this.ut(t),E=w?this.ct(w,t,g):1;if(E!==0){this.it(n);const y=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let g,w;try{g=zo(i).toUint8Array()}catch(E){if(E instanceof KC)return zc("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{w=new Vp(g,l,u)}catch(E){return zc(E instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return w.ge===0?null:w}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const g=this.Ge.ht(),w=`projects/${g.projectId}/databases/${g.database}/documents/${u.path.canonicalString()}`;t.mightContain(w)||(this.et(n,u,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((u,g)=>{const w=this.ot(g);if(w){if(u.current&&wm(w.target)){const E=new te(w.target.path);this.It(E).has(g)||this.Et(g,E)||this.et(g,E,Ki.newNoDocument(E,t))}u.Be&&(n.set(g,u.ke()),u.qe())}}));let i=Pe();this.He.forEach(((u,g)=>{let w=!0;g.forEachWhile((E=>{const y=this.ot(E);return!y||y.purpose==="TargetPurposeLimboResolution"||(w=!1,!1)})),w&&(i=i.add(u))})),this.je.forEach(((u,g)=>g.setReadTime(t)));const l=new T0(t,n,this.Ye,this.je,i);return this.je=qa(),this.Je=td(),this.He=td(),this.Ye=new kn(Oe),l}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new nw,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new pi(Oe),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new pi(Oe),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Ht("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new nw),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function td(){return new kn(te.comparator)}function iw(){return new kn(te.comparator)}const vO={asc:"ASCENDING",desc:"DESCENDING"},SO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bO={and:"AND",or:"OR"};class IO{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _m(e,t){return e.useProto3Json||m0(t)?t:{value:t}}function Fd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function RO(e,t){return Fd(e,t.toTimestamp())}function Zs(e){return Je(!!e,49232),fe.fromTimestamp((function(n){const i=Fo(n);return new Tn(i.seconds,i.nanos)})(e))}function Up(e,t){return Cm(e,t).canonicalString()}function Cm(e,t){const n=(function(l){return new On(["projects",l.projectId,"databases",l.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Sv(e){const t=On.fromString(e);return Je(Dv(t),10190,{key:t.toString()}),t}function vm(e,t){return Up(e.databaseId,t.path)}function Ug(e,t){const n=Sv(t);if(n.get(1)!==e.databaseId.projectId)throw new Kt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Kt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new te(Iv(n))}function bv(e,t){return Up(e.databaseId,t)}function NO(e){const t=Sv(e);return t.length===4?On.emptyPath():Iv(t)}function Sm(e){return new On(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Iv(e){return Je(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function rw(e,t,n){return{name:vm(e,t),fields:n.value.mapValue.fields}}function DO(e,t){let n;if("targetChange"in t){t.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:se(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(y,_){return y.useProto3Json?(Je(_===void 0||typeof _=="string",58123),ki.fromBase64String(_||"")):(Je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),ki.fromUint8Array(_||new Uint8Array))})(e,t.targetChange.resumeToken),g=t.targetChange.cause,w=g&&(function(y){const _=y.code===void 0?Dt.UNKNOWN:Tv(y.code);return new Kt(_,y.message||"")})(g);n=new Cv(i,l,u,w||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const l=Ug(e,i.document.name),u=Zs(i.document.updateTime),g=i.document.createTime?Zs(i.document.createTime):fe.min(),w=new mr({mapValue:{fields:i.document.fields}}),E=Ki.newFoundDocument(l,u,g,w),y=i.targetIds||[],_=i.removedTargetIds||[];n=new pd(y,_,E.key,E)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const l=Ug(e,i.document),u=i.readTime?Zs(i.readTime):fe.min(),g=Ki.newNoDocument(l,u),w=i.removedTargetIds||[];n=new pd([],w,g.key,g)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const l=Ug(e,i.document),u=i.removedTargetIds||[];n=new pd([],u,l,null)}else{if(!("filter"in t))return se(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,g=new xO(l,u),w=i.targetId;n=new _v(w,g)}}return n}function MO(e,t){let n;if(t instanceof Vh)n={update:rw(e,t.key,t.value)};else if(t instanceof wv)n={delete:vm(e,t.key)};else if(t instanceof Qo)n={update:rw(e,t.key,t.data),updateMask:zO(t.fieldMask)};else{if(!(t instanceof yO))return se(16599,{Vt:t.type});n={verify:vm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(u,g){const w=g.transform;if(w instanceof xh)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof wh)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Th)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Ud)return{fieldPath:g.field.canonicalString(),increment:w.Ae};throw se(20930,{transform:g.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:RO(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:se(27497)})(e,t.precondition)),n}function OO(e,t){return e&&e.length>0?(Je(t!==void 0,14353),e.map((n=>(function(l,u){let g=l.updateTime?Zs(l.updateTime):Zs(u);return g.isEqual(fe.min())&&(g=Zs(u)),new gO(g,l.transformResults||[])})(n,t)))):[]}function PO(e,t){return{documents:[bv(e,t.path)]}}function LO(e,t){const n={structuredQuery:{}},i=t.path;let l;t.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=bv(e,l);const u=(function(y){if(y.length!==0)return Nv(sa.create(y,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const g=(function(y){if(y.length!==0)return y.map((_=>(function(R){return{field:Sc(R.field),direction:VO(R.dir)}})(_)))})(t.orderBy);g&&(n.structuredQuery.orderBy=g);const w=_m(e,t.limit);return w!==null&&(n.structuredQuery.limit=w),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function kO(e){let t=NO(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){Je(i===1,65062);const _=n.from[0];_.allDescendants?l=_.collectionId:t=t.child(_.collectionId)}let u=[];n.where&&(u=(function(b){const R=Rv(b);return R instanceof sa&&sv(R)?R.getFilters():[R]})(n.where));let g=[];n.orderBy&&(g=(function(b){return b.map((R=>(function(z){return new Vd(bc(z.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(R)))})(n.orderBy));let w=null;n.limit&&(w=(function(b){let R;return R=typeof b=="object"?b.value:b,m0(R)?null:R})(n.limit));let E=null;n.startAt&&(E=(function(b){const R=!!b.before,k=b.values||[];return new Bd(k,R)})(n.startAt));let y=null;return n.endAt&&(y=(function(b){const R=!b.before,k=b.values||[];return new Bd(k,R)})(n.endAt)),$M(t,l,g,u,w,"F",E,y)}function BO(e,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Rv(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=bc(n.unaryFilter.field);return gi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=bc(n.unaryFilter.field);return gi.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=bc(n.unaryFilter.field);return gi.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=bc(n.unaryFilter.field);return gi.create(g,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}})(e):e.fieldFilter!==void 0?(function(n){return gi.create(bc(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return sa.create(n.compositeFilter.filters.map((i=>Rv(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return se(1026)}})(n.compositeFilter.op))})(e):se(30097,{filter:e})}function VO(e){return vO[e]}function UO(e){return SO[e]}function FO(e){return bO[e]}function Sc(e){return{fieldPath:e.canonicalString()}}function bc(e){return Li.fromServerFormat(e.fieldPath)}function Nv(e){return e instanceof gi?(function(n){if(n.op==="=="){if(qx(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NAN"}};if(Gx(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qx(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NOT_NAN"}};if(Gx(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sc(n.field),op:UO(n.op),value:n.value}}})(e):e instanceof sa?(function(n){const i=n.getFilters().map((l=>Nv(l)));return i.length===1?i[0]:{compositeFilter:{op:FO(n.op),filters:i}}})(e):se(54877,{filter:e})}function zO(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Dv(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n,i,l,u=fe.min(),g=fe.min(),w=ki.EMPTY_BYTE_STRING,E=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=E}withSequenceNumber(t){return new Do(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(t){this.yt=t}}function HO(e){const t=kO({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Tm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.Cn=new qO}addToCollectionParentIndex(t,n){return this.Cn.add(n),It.resolve()}getCollectionParents(t,n){return It.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return It.resolve()}deleteFieldIndex(t,n){return It.resolve()}deleteAllFieldIndexes(t){return It.resolve()}createTargetIndexes(t,n){return It.resolve()}getDocumentsMatchingTarget(t,n){return It.resolve(null)}getIndexType(t,n){return It.resolve(0)}getFieldIndexes(t,n){return It.resolve([])}getNextCollectionGroupToUpdate(t){return It.resolve(null)}getMinOffset(t,n){return It.resolve(Uo.min())}getMinOffsetFromCollectionGroup(t,n){return It.resolve(Uo.min())}updateCollectionGroup(t,n,i){return It.resolve()}updateIndexEntries(t,n){return It.resolve()}}class qO{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),l=this.index[n]||new pi(On.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(t){const n=t.lastSegment(),i=t.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(t){return(this.index[t]||new pi(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mv=41943040;class gr{static withCacheSize(t){return new gr(t,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(Mv,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new qc(0)}static cr(){return new qc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="LruGarbageCollector",YO=1048576;function ow([e,t],[n,i]){const l=Oe(e,n);return l===0?Oe(t,i):l}class XO{constructor(t){this.Ir=t,this.buffer=new pi(ow),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();ow(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WO{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Ht(aw,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$c(n)?Ht(aw,"Ignoring IndexedDB error during garbage collection: ",n):await Jc(n)}await this.Vr(3e5)}))}}class KO{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return It.resolve(g0.ce);const i=new XO(n);return this.mr.forEachTarget(t,(l=>i.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>i.Ar(l))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Ht("LruGarbageCollector","Garbage collection skipped; disabled"),It.resolve(sw)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sw):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,l,u,g,w,E,y;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),l=this.params.maximumSequenceNumbersToCollect):l=b,g=Date.now(),this.nthSequenceNumber(t,l)))).next((b=>(i=b,w=Date.now(),this.removeTargets(t,i,n)))).next((b=>(u=b,E=Date.now(),this.removeOrphanedDocuments(t,i)))).next((b=>(y=Date.now(),Cc()<=Me.DEBUG&&Ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${g-_}ms
	Determined least recently used ${l} in `+(w-g)+`ms
	Removed ${u} targets in `+(E-w)+`ms
	Removed ${b} documents in `+(y-E)+`ms
Total Duration: ${y-_}ms`),It.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:b}))))}}function QO(e,t){return new KO(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.changes=new jl((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ki.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?It.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t,n,i,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(i!==null&&ah(i.mutation,l,Hr.empty(),Tn.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,Pe()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=Pe()){const l=_l();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,i).next((u=>{let g=Ku();return u.forEach(((w,E)=>{g=g.insert(w,E.overlayedDocument)})),g}))))}getOverlayedDocuments(t,n){const i=_l();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,Pe())))}populateOverlays(t,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((g,w)=>{n.set(g,w)}))}))}computeViews(t,n,i,l){let u=qa();const g=sh(),w=(function(){return sh()})();return n.forEach(((E,y)=>{const _=i.get(y.key);l.has(y.key)&&(_===void 0||_.mutation instanceof Qo)?u=u.insert(y.key,y):_!==void 0?(g.set(y.key,_.mutation.getFieldMask()),ah(_.mutation,y,_.mutation.getFieldMask(),Tn.now())):g.set(y.key,Hr.empty())})),this.recalculateAndSaveOverlays(t,u).next((E=>(E.forEach(((y,_)=>g.set(y,_))),n.forEach(((y,_)=>w.set(y,new JO(_,g.get(y)??null)))),w)))}recalculateAndSaveOverlays(t,n){const i=sh();let l=new kn(((g,w)=>g-w)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((g=>{for(const w of g)w.keys().forEach((E=>{const y=n.get(E);if(y===null)return;let _=i.get(E)||Hr.empty();_=w.applyToLocalView(y,_),i.set(E,_);const b=(l.get(w.batchId)||Pe()).add(E);l=l.insert(w.batchId,b)}))})).next((()=>{const g=[],w=l.getReverseIterator();for(;w.hasNext();){const E=w.getNext(),y=E.key,_=E.value,b=dv();_.forEach((R=>{if(!u.has(R)){const k=Av(n.get(R),i.get(R));k!==null&&b.set(R,k),u=u.add(R)}})),g.push(this.documentOverlayCache.saveOverlays(t,y,b))}return It.waitFor(g)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,l){return(function(g){return te.isDocumentKey(g.path)&&g.collectionGroup===null&&g.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):tO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,l):this.getDocumentsMatchingCollectionQuery(t,n,i,l)}getNextDocuments(t,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,l).next((u=>{const g=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,l-u.size):It.resolve(_l());let w=ph,E=u;return g.next((y=>It.forEach(y,((_,b)=>(w<b.largestBatchId&&(w=b.largestBatchId),u.get(_)?It.resolve():this.remoteDocumentCache.getEntry(t,_).next((R=>{E=E.insert(_,R)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,E,y,Pe()))).next((_=>({batchId:w,changes:fv(_)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new te(n)).next((i=>{let l=Ku();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,l){const u=n.collectionGroup;let g=Ku();return this.indexManager.getCollectionParents(t,u).next((w=>It.forEach(w,(E=>{const y=(function(b,R){return new y0(R,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,E.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,i,l).next((_=>{_.forEach(((b,R)=>{g=g.insert(b,R)}))}))})).next((()=>g))))}getDocumentsMatchingCollectionQuery(t,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((g=>(u=g,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,u,l)))).next((g=>{u.forEach(((E,y)=>{const _=y.getKey();g.get(_)===null&&(g=g.insert(_,Ki.newInvalidDocument(_)))}));let w=Ku();return g.forEach(((E,y)=>{const _=u.get(E);_!==void 0&&ah(_.mutation,y,Hr.empty(),Tn.now()),A0(n,y)&&(w=w.insert(E,y))})),w}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return It.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Zs(l.createTime)}})(n)),It.resolve()}getNamedQuery(t,n){return It.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:HO(l.bundledQuery),readTime:Zs(l.readTime)}})(n)),It.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.overlays=new kn(te.comparator),this.qr=new Map}getOverlay(t,n){return It.resolve(this.overlays.get(n))}getOverlays(t,n){const i=_l();return It.forEach(n,(l=>this.getOverlay(t,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((l,u)=>{this.St(t,n,u)})),It.resolve()}removeOverlaysForBatchId(t,n,i){const l=this.qr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),It.resolve()}getOverlaysForCollection(t,n,i){const l=_l(),u=n.length+1,g=new te(n.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const E=w.getNext().value,y=E.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&E.largestBatchId>i&&l.set(E.getKey(),E)}return It.resolve(l)}getOverlaysForCollectionGroup(t,n,i,l){let u=new kn(((y,_)=>y-_));const g=this.overlays.getIterator();for(;g.hasNext();){const y=g.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let _=u.get(y.largestBatchId);_===null&&(_=_l(),u=u.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const w=_l(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((y,_)=>w.set(y,_))),!(w.size()>=l)););return It.resolve(w)}St(t,n,i){const l=this.overlays.get(i.key);if(l!==null){const g=this.qr.get(l.largestBatchId).delete(i.key);this.qr.set(l.largestBatchId,g)}this.overlays=this.overlays.insert(i.key,new AO(n,i));let u=this.qr.get(n);u===void 0&&(u=Pe(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this.sessionToken=ki.EMPTY_BYTE_STRING}getSessionToken(t){return It.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,It.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Qr=new pi(_i.$r),this.Ur=new pi(_i.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new _i(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new _i(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new te(new On([])),i=new _i(n,t),l=new _i(n,t+1),u=[];return this.Ur.forEachInRange([i,l],(g=>{this.Gr(g),u.push(g.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new te(new On([])),i=new _i(n,t),l=new _i(n,t+1);let u=Pe();return this.Ur.forEachInRange([i,l],(g=>{u=u.add(g.key)})),u}containsKey(t){const n=new _i(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class _i{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return te.comparator(t.key,n.key)||Oe(t.Yr,n.Yr)}static Kr(t,n){return Oe(t.Yr,n.Yr)||te.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pi(_i.$r)}checkEmpty(t){return It.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const g=new EO(u,n,i,l);this.mutationQueue.push(g);for(const w of l)this.Zr=this.Zr.add(new _i(w.key,u)),this.indexManager.addToCollectionParentIndex(t,w.key.path.popLast());return It.resolve(g)}lookupMutationBatch(t,n){return It.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,l=this.ei(i),u=l<0?0:l;return It.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return It.resolve(this.mutationQueue.length===0?Np:this.tr-1)}getAllMutationBatches(t){return It.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new _i(n,0),l=new _i(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,l],(g=>{const w=this.Xr(g.Yr);u.push(w)})),It.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new pi(Oe);return n.forEach((l=>{const u=new _i(l,0),g=new _i(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,g],(w=>{i=i.add(w.Yr)}))})),It.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,l=i.length+1;let u=i;te.isDocumentKey(u)||(u=u.child(""));const g=new _i(new te(u),0);let w=new pi(Oe);return this.Zr.forEachWhile((E=>{const y=E.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(w=w.add(E.Yr)),!0)}),g),It.resolve(this.ti(w))}ti(t){const n=[];return t.forEach((i=>{const l=this.Xr(i);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return It.forEach(n.mutations,(l=>{const u=new _i(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new _i(n,0),l=this.Zr.firstAfterOrEqual(i);return It.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,It.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(t){this.ri=t,this.docs=(function(){return new kn(te.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,g=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:g}),this.size+=g-u,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return It.resolve(i?i.document.mutableCopy():Ki.newInvalidDocument(n))}getEntries(t,n){let i=qa();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Ki.newInvalidDocument(l))})),It.resolve(i)}getDocumentsMatchingQuery(t,n,i,l){let u=qa();const g=n.path,w=new te(g.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(w);for(;E.hasNext();){const{key:y,value:{document:_}}=E.getNext();if(!g.isPrefixOf(y.path))break;y.path.length>g.length+1||DM(NM(_),i)<=0||(l.has(_.key)||A0(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return It.resolve(u)}getAllFromCollectionGroup(t,n,i,l){se(9500)}ii(t,n){return It.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new s5(this)}getSize(t){return It.resolve(this.size)}}class s5 extends ZO{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(i)})),It.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(t){this.persistence=t,this.si=new jl((n=>Op(n)),Pp),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Fp,this.targetCount=0,this.ai=qc.ur()}forEachTarget(t,n){return this.si.forEach(((i,l)=>n(l))),It.resolve()}getLastRemoteSnapshotVersion(t){return It.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return It.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),It.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),It.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new qc(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,It.resolve()}updateTargetData(t,n){return this.Pr(n),It.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,It.resolve()}removeTargets(t,n,i){let l=0;const u=[];return this.si.forEach(((g,w)=>{w.sequenceNumber<=n&&i.get(w.targetId)===null&&(this.si.delete(g),u.push(this.removeMatchingKeysForTargetId(t,w.targetId)),l++)})),It.waitFor(u).next((()=>l))}getTargetCount(t){return It.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return It.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),It.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((g=>{u.push(l.markPotentiallyOrphaned(t,g))})),It.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),It.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return It.resolve(i)}containsKey(t,n){return It.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,n){this.ui={},this.overlays={},this.ci=new g0(0),this.li=!1,this.li=!0,this.hi=new n5,this.referenceDelegate=t(this),this.Pi=new a5(this),this.indexManager=new GO,this.remoteDocumentCache=(function(l){return new r5(l)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new jO(n),this.Ii=new t5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new e5,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new i5(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){Ht("MemoryPersistence","Starting transaction:",t);const l=new o5(this.ci.next());return this.referenceDelegate.Ei(),i(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,n){return It.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class o5 extends OM{constructor(t){super(),this.currentSequenceNumber=t}}class zp{constructor(t){this.persistence=t,this.Ri=new Fp,this.Vi=null}static mi(t){return new zp(t)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),It.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),It.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),It.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return It.forEach(this.fi,(i=>{const l=te.fromPath(i);return this.gi(t,l).next((u=>{u||n.removeEntry(l,fe.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return It.or([()=>It.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class zd{constructor(t,n){this.persistence=t,this.pi=new jl((i=>kM(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=QO(this,n)}static mi(t,n){return new zd(t,n)}Ei(){}di(t){return It.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((l=>i+l))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return It.forEach(this.pi,((i,l)=>this.br(t,i,l).next((u=>u?It.resolve():n(l)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(g=>this.br(t,g,n).next((w=>{w||(i++,u.removeEntry(g,fe.min()))})))).next((()=>u.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),It.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),It.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),It.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),It.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=dd(t.data.value)),n}br(t,n,i){return It.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return It.resolve(l!==void 0&&l>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t,n,i,l){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=l}static As(t,n){let i=Pe(),l=Pe();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new jp(t,n.fromCache,i,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return N4()?8:PM(Zi())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,l){const u={result:null};return this.ys(t,n).next((g=>{u.result=g})).next((()=>{if(!u.result)return this.ws(t,n,l,i).next((g=>{u.result=g}))})).next((()=>{if(u.result)return;const g=new l5;return this.Ss(t,n,g).next((w=>{if(u.result=w,this.Vs)return this.bs(t,n,g,w.size)}))})).next((()=>u.result))}bs(t,n,i,l){return i.documentReadCount<this.fs?(Cc()<=Me.DEBUG&&Ht("QueryEngine","SDK will not create cache indexes for query:",vc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),It.resolve()):(Cc()<=Me.DEBUG&&Ht("QueryEngine","Query:",vc(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.gs*l?(Cc()<=Me.DEBUG&&Ht("QueryEngine","The SDK decides to create cache indexes for query:",vc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ks(n))):It.resolve())}ys(t,n){if(Kx(n))return It.resolve(null);let i=Ks(n);return this.indexManager.getIndexType(t,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Tm(n,null,"F"),i=Ks(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((u=>{const g=Pe(...u);return this.ps.getDocuments(t,g).next((w=>this.indexManager.getMinOffset(t,i).next((E=>{const y=this.Ds(n,w);return this.Cs(n,y,g,E.readTime)?this.ys(t,Tm(n,null,"F")):this.vs(t,y,n,E)}))))})))))}ws(t,n,i,l){return Kx(n)||l.isEqual(fe.min())?It.resolve(null):this.ps.getDocuments(t,i).next((u=>{const g=this.Ds(n,u);return this.Cs(n,g,i,l)?It.resolve(null):(Cc()<=Me.DEBUG&&Ht("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),vc(n)),this.vs(t,g,n,RM(l,ph)).next((w=>w)))}))}Ds(t,n){let i=new pi(uv(t));return n.forEach(((l,u)=>{A0(t,u)&&(i=i.add(u))})),i}Cs(t,n,i,l){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,n,i){return Cc()<=Me.DEBUG&&Ht("QueryEngine","Using full collection scan to execute query:",vc(n)),this.ps.getDocumentsMatchingQuery(t,n,Uo.min(),i)}vs(t,n,i,l){return this.ps.getDocumentsMatchingQuery(t,i,l).next((u=>(n.forEach((g=>{u=u.insert(g.key,g)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="LocalStore",u5=3e8;class h5{constructor(t,n,i,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new kn(Oe),this.xs=new jl((u=>Op(u)),Pp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new $O(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function f5(e,t,n,i){return new h5(e,t,n,i)}async function Pv(e,t){const n=me(e);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const g=[],w=[];let E=Pe();for(const y of l){g.push(y.batchId);for(const _ of y.mutations)E=E.add(_.key)}for(const y of u){w.push(y.batchId);for(const _ of y.mutations)E=E.add(_.key)}return n.localDocuments.getDocuments(i,E).next((y=>({Ls:y,removedBatchIds:g,addedBatchIds:w})))}))}))}function d5(e,t){const n=me(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(w,E,y,_){const b=y.batch,R=b.keys();let k=It.resolve();return R.forEach((z=>{k=k.next((()=>_.getEntry(E,z))).next((q=>{const j=y.docVersions.get(z);Je(j!==null,48541),q.version.compareTo(j)<0&&(b.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),_.addEntry(q)))}))})),k.next((()=>w.mutationQueue.removeMutationBatch(E,b)))})(n,i,t,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(w){let E=Pe();for(let y=0;y<w.mutationResults.length;++y)w.mutationResults[y].transformResults.length>0&&(E=E.add(w.batch.mutations[y].key));return E})(t)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function Lv(e){const t=me(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function g5(e,t){const n=me(e),i=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const g=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const w=[];t.targetChanges.forEach(((_,b)=>{const R=l.get(b);if(!R)return;w.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,b))));let k=R.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?k=k.withResumeToken(ki.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,i)),l=l.insert(b,k),(function(q,j,nt){return q.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=u5?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0})(R,k,_)&&w.push(n.Pi.updateTargetData(u,k))}));let E=qa(),y=Pe();if(t.documentUpdates.forEach((_=>{t.resolvedLimboDocuments.has(_)&&w.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),w.push(m5(u,g,t.documentUpdates).next((_=>{E=_.ks,y=_.qs}))),!i.isEqual(fe.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((b=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));w.push(_)}return It.waitFor(w).next((()=>g.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,E,y))).next((()=>E))})).then((u=>(n.Ms=l,u)))}function m5(e,t,n){let i=Pe(),l=Pe();return n.forEach((u=>i=i.add(u))),t.getEntries(e,i).next((u=>{let g=qa();return n.forEach(((w,E)=>{const y=u.get(w);E.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(w)),E.isNoDocument()&&E.version.isEqual(fe.min())?(t.removeEntry(w,E.readTime),g=g.insert(w,E)):!y.isValidDocument()||E.version.compareTo(y.version)>0||E.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(E),g=g.insert(w,E)):Ht(Hp,"Ignoring outdated watch update for ",w,". Current version:",y.version," Watch version:",E.version)})),{ks:g,qs:l}}))}function p5(e,t){const n=me(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Np),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function y5(e,t){const n=me(e);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.Pi.getTargetData(i,t).next((u=>u?(l=u,It.resolve(l)):n.Pi.allocateTargetId(i).next((g=>(l=new Do(t,g,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.Ms.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function bm(e,t,n){const i=me(e),l=i.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(g=>i.persistence.referenceDelegate.removeTarget(g,l)))}catch(g){if(!$c(g))throw g;Ht(Hp,`Failed to update sequence numbers for target ${t}: ${g}`)}i.Ms=i.Ms.remove(t),i.xs.delete(l.target)}function lw(e,t,n){const i=me(e);let l=fe.min(),u=Pe();return i.persistence.runTransaction("Execute query","readwrite",(g=>(function(E,y,_){const b=me(E),R=b.xs.get(_);return R!==void 0?It.resolve(b.Ms.get(R)):b.Pi.getTargetData(y,_)})(i,g,Ks(t)).next((w=>{if(w)return l=w.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(g,w.targetId).next((E=>{u=E}))})).next((()=>i.Fs.getDocumentsMatchingQuery(g,t,n?l:fe.min(),n?u:Pe()))).next((w=>(E5(i,nO(t),w),{documents:w,Qs:u})))))}function E5(e,t,n){let i=e.Os.get(t)||fe.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),e.Os.set(t,i)}class cw{constructor(){this.activeTargetIds=lO()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class A5{constructor(){this.Mo=new cw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new cw,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="ConnectivityMonitor";class hw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ht(uw,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Ht(uw,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed=null;function Im(){return ed===null?ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():ed++,"0x"+ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="RestConnection",w5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T5{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${l}`,this.Wo=this.databaseId.database===Ld?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Go(t,n,i,l,u){const g=Im(),w=this.zo(t,n.toUriEncodedString());Ht(Fg,`Sending RPC '${t}' ${g}:`,w,i);const E={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(E,l,u);const{host:y}=new URL(w),_=Ul(y);return this.Jo(t,w,E,i,_).then((b=>(Ht(Fg,`Received RPC '${t}' ${g}: `,b),b)),(b=>{throw zc(Fg,`RPC '${t}' ${g} failed with error: `,b,"url: ",w,"request:",i),b}))}Ho(t,n,i,l,u,g){return this.Go(t,n,i,l,u)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>t[u]=l)),i&&i.headers.forEach(((l,u)=>t[u]=l))}zo(t,n){const i=w5[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="WebChannelConnection";class C5 extends T5{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,l,u){const g=Im();return new Promise(((w,E)=>{const y=new UC;y.setWithCredentials(!0),y.listenOnce(FC.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case fd.NO_ERROR:const b=y.getResponseJson();Ht(Xi,`XHR for RPC '${t}' ${g} received:`,JSON.stringify(b)),w(b);break;case fd.TIMEOUT:Ht(Xi,`RPC '${t}' ${g} timed out`),E(new Kt(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const R=y.getStatus();if(Ht(Xi,`RPC '${t}' ${g} failed with status:`,R,"response text:",y.getResponseText()),R>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k?.error;if(z&&z.status&&z.message){const q=(function(nt){const Z=nt.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(Z)>=0?Z:Dt.UNKNOWN})(z.status);E(new Kt(q,z.message))}else E(new Kt(Dt.UNKNOWN,"Server responded with status "+y.getStatus()))}else E(new Kt(Dt.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:t,streamId:g,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ht(Xi,`RPC '${t}' ${g} completed.`)}}));const _=JSON.stringify(l);Ht(Xi,`RPC '${t}' ${g} sending request:`,l),y.send(n,"POST",_,i,15)}))}T_(t,n,i){const l=Im(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],g=HC(),w=jC(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(E.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(E.useFetchStreams=!0),this.jo(E.initMessageHeaders,n,i),E.encodeInitMessageHeaders=!0;const _=u.join("");Ht(Xi,`Creating RPC '${t}' stream ${l}: ${_}`,E);const b=g.createWebChannel(_,E);this.I_(b);let R=!1,k=!1;const z=new _5({Yo:j=>{k?Ht(Xi,`Not sending because RPC '${t}' stream ${l} is closed:`,j):(R||(Ht(Xi,`Opening RPC '${t}' stream ${l} transport.`),b.open(),R=!0),Ht(Xi,`RPC '${t}' stream ${l} sending:`,j),b.send(j))},Zo:()=>b.close()}),q=(j,nt,Z)=>{j.listen(nt,(W=>{try{Z(W)}catch(yt){setTimeout((()=>{throw yt}),0)}}))};return q(b,Wu.EventType.OPEN,(()=>{k||(Ht(Xi,`RPC '${t}' stream ${l} transport opened.`),z.o_())})),q(b,Wu.EventType.CLOSE,(()=>{k||(k=!0,Ht(Xi,`RPC '${t}' stream ${l} transport closed`),z.a_(),this.E_(b))})),q(b,Wu.EventType.ERROR,(j=>{k||(k=!0,zc(Xi,`RPC '${t}' stream ${l} transport errored. Name:`,j.name,"Message:",j.message),z.a_(new Kt(Dt.UNAVAILABLE,"The operation could not be completed")))})),q(b,Wu.EventType.MESSAGE,(j=>{if(!k){const nt=j.data[0];Je(!!nt,16349);const Z=nt,W=Z?.error||Z[0]?.error;if(W){Ht(Xi,`RPC '${t}' stream ${l} received error:`,W);const yt=W.status;let wt=(function(U){const V=si[U];if(V!==void 0)return Tv(V)})(yt),Rt=W.message;wt===void 0&&(wt=Dt.INTERNAL,Rt="Unknown error status: "+yt+" with message "+W.message),k=!0,z.a_(new Kt(wt,Rt)),b.close()}else Ht(Xi,`RPC '${t}' stream ${l} received:`,nt),z.u_(nt)}})),q(w,zC.STAT_EVENT,(j=>{j.stat===pm.PROXY?Ht(Xi,`RPC '${t}' stream ${l} detected buffering proxy`):j.stat===pm.NOPROXY&&Ht(Xi,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function zg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(e){return new IO(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,n,i=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&Ht("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="PersistentStream";class Bv{constructor(t,n,i,l,u,g,w,E){this.Mi=t,this.S_=i,this.b_=l,this.connection=u,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kv(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Dt.RESOURCE_EXHAUSTED?(Ga(n.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{t((()=>{const l=new Kt(Dt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Ht(fw,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Ht(fw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class v5 extends Bv{constructor(t,n,i,l,u,g){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,g),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=DO(this.serializer,t),i=(function(u){if(!("targetChange"in u))return fe.min();const g=u.targetChange;return g.targetIds&&g.targetIds.length?fe.min():g.readTime?Zs(g.readTime):fe.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Sm(this.serializer),n.addTarget=(function(u,g){let w;const E=g.target;if(w=wm(E)?{documents:PO(u,E)}:{query:LO(u,E).ft},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=vv(u,g.resumeToken);const y=_m(u,g.expectedCount);y!==null&&(w.expectedCount=y)}else if(g.snapshotVersion.compareTo(fe.min())>0){w.readTime=Fd(u,g.snapshotVersion.toTimestamp());const y=_m(u,g.expectedCount);y!==null&&(w.expectedCount=y)}return w})(this.serializer,t);const i=BO(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Sm(this.serializer),n.removeTarget=t,this.q_(n)}}class S5 extends Bv{constructor(t,n,i,l,u,g){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,g),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Je(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Je(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Je(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=OO(t.writeResults,t.commitTime),i=Zs(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Sm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>MO(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{}class I5 extends b5{constructor(t,n,i,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Kt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,g])=>this.connection.Go(t,Cm(n,i),l,u,g))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Kt(Dt.UNKNOWN,u.toString())}))}Ho(t,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([g,w])=>this.connection.Ho(t,Cm(n,i),l,g,w,u))).catch((g=>{throw g.name==="FirebaseError"?(g.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Kt(Dt.UNKNOWN,g.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class R5{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ga(n),this.aa=!1):Ht("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll="RemoteStore";class N5{constructor(t,n,i,l,u){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((g=>{i.enqueueAndForget((async()=>{Hl(this)&&(Ht(Ll,"Restarting streams for network reachability change."),await(async function(E){const y=me(E);y.Ea.add(4),await Fh(y),y.Ra.set("Unknown"),y.Ea.delete(4),await C0(y)})(this))}))})),this.Ra=new R5(i,l)}}async function C0(e){if(Hl(e))for(const t of e.da)await t(!0)}async function Fh(e){for(const t of e.da)await t(!1)}function Vv(e,t){const n=me(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Xp(n)?Yp(n):tu(n).O_()&&qp(n,t))}function Gp(e,t){const n=me(e),i=tu(n);n.Ia.delete(t),i.O_()&&Uv(n,t),n.Ia.size===0&&(i.O_()?i.L_():Hl(n)&&n.Ra.set("Unknown"))}function qp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fe.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tu(e).Y_(t)}function Uv(e,t){e.Va.Ue(t),tu(e).Z_(t)}function Yp(e){e.Va=new CO({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),tu(e).start(),e.Ra.ua()}function Xp(e){return Hl(e)&&!tu(e).x_()&&e.Ia.size>0}function Hl(e){return me(e).Ea.size===0}function Fv(e){e.Va=void 0}async function D5(e){e.Ra.set("Online")}async function M5(e){e.Ia.forEach(((t,n)=>{qp(e,t)}))}async function O5(e,t){Fv(e),Xp(e)?(e.Ra.ha(t),Yp(e)):e.Ra.set("Unknown")}async function P5(e,t,n){if(e.Ra.set("Online"),t instanceof Cv&&t.state===2&&t.cause)try{await(async function(l,u){const g=u.cause;for(const w of u.targetIds)l.Ia.has(w)&&(await l.remoteSyncer.rejectListen(w,g),l.Ia.delete(w),l.Va.removeTarget(w))})(e,t)}catch(i){Ht(Ll,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await jd(e,i)}else if(t instanceof pd?e.Va.Ze(t):t instanceof _v?e.Va.st(t):e.Va.tt(t),!n.isEqual(fe.min()))try{const i=await Lv(e.localStore);n.compareTo(i)>=0&&await(function(u,g){const w=u.Va.Tt(g);return w.targetChanges.forEach(((E,y)=>{if(E.resumeToken.approximateByteSize()>0){const _=u.Ia.get(y);_&&u.Ia.set(y,_.withResumeToken(E.resumeToken,g))}})),w.targetMismatches.forEach(((E,y)=>{const _=u.Ia.get(E);if(!_)return;u.Ia.set(E,_.withResumeToken(ki.EMPTY_BYTE_STRING,_.snapshotVersion)),Uv(u,E);const b=new Do(_.target,E,y,_.sequenceNumber);qp(u,b)})),u.remoteSyncer.applyRemoteEvent(w)})(e,n)}catch(i){Ht(Ll,"Failed to raise snapshot:",i),await jd(e,i)}}async function jd(e,t,n){if(!$c(t))throw t;e.Ea.add(1),await Fh(e),e.Ra.set("Offline"),n||(n=()=>Lv(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ht(Ll,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await C0(e)}))}function zv(e,t){return t().catch((n=>jd(e,n,t)))}async function v0(e){const t=me(e),n=Ho(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Np;for(;L5(t);)try{const l=await p5(t.localStore,i);if(l===null){t.Ta.length===0&&n.L_();break}i=l.batchId,k5(t,l)}catch(l){await jd(t,l)}jv(t)&&Hv(t)}function L5(e){return Hl(e)&&e.Ta.length<10}function k5(e,t){e.Ta.push(t);const n=Ho(e);n.O_()&&n.X_&&n.ea(t.mutations)}function jv(e){return Hl(e)&&!Ho(e).x_()&&e.Ta.length>0}function Hv(e){Ho(e).start()}async function B5(e){Ho(e).ra()}async function V5(e){const t=Ho(e);for(const n of e.Ta)t.ea(n.mutations)}async function U5(e,t,n){const i=e.Ta.shift(),l=Bp.from(i,t,n);await zv(e,(()=>e.remoteSyncer.applySuccessfulWrite(l))),await v0(e)}async function F5(e,t){t&&Ho(e).X_&&await(async function(i,l){if((function(g){return wO(g)&&g!==Dt.ABORTED})(l.code)){const u=i.Ta.shift();Ho(i).B_(),await zv(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await v0(i)}})(e,t),jv(e)&&Hv(e)}async function dw(e,t){const n=me(e);n.asyncQueue.verifyOperationInProgress(),Ht(Ll,"RemoteStore received new credentials");const i=Hl(n);n.Ea.add(3),await Fh(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await C0(n)}async function z5(e,t){const n=me(e);t?(n.Ea.delete(2),await C0(n)):t||(n.Ea.add(2),await Fh(n),n.Ra.set("Unknown"))}function tu(e){return e.ma||(e.ma=(function(n,i,l){const u=me(n);return u.sa(),new v5(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(e.datastore,e.asyncQueue,{Xo:D5.bind(null,e),t_:M5.bind(null,e),r_:O5.bind(null,e),H_:P5.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Xp(e)?Yp(e):e.Ra.set("Unknown")):(await e.ma.stop(),Fv(e))}))),e.ma}function Ho(e){return e.fa||(e.fa=(function(n,i,l){const u=me(n);return u.sa(),new S5(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:B5.bind(null,e),r_:F5.bind(null,e),ta:V5.bind(null,e),na:U5.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await v0(e)):(await e.fa.stop(),e.Ta.length>0&&(Ht(Ll,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,n,i,l,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((g=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,l,u){const g=Date.now()+i,w=new Wp(t,n,g,l,u);return w.start(i),w}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(Dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(e,t){if(Ga("AsyncQueue",`${t}: ${e}`),$c(e))return new Kt(Dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{static emptySet(t){return new Vc(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||te.comparator(n.key,i.key):(n,i)=>te.comparator(n.key,i.key),this.keyedMap=Ku(),this.sortedSet=new kn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Vc)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Vc;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.ga=new kn(te.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):se(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class Yc{constructor(t,n,i,l,u,g,w,E,y){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=E,this.hasCachedResults=y}static fromInitialDocuments(t,n,i,l,u){const g=[];return n.forEach((w=>{g.push({type:0,doc:w})})),new Yc(t,n,Vc.emptySet(n),g,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&E0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class H5{constructor(){this.queries=mw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=me(n),u=l.queries;l.queries=mw(),u.forEach(((g,w)=>{for(const E of w.Sa)E.onError(i)}))})(this,new Kt(Dt.ABORTED,"Firestore shutting down"))}}function mw(){return new jl((e=>cv(e)),E0)}async function G5(e,t){const n=me(e);let i=3;const l=t.query;let u=n.queries.get(l);u?!u.ba()&&t.Da()&&(i=2):(u=new j5,i=t.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(g){const w=Kp(g,`Initialization of query '${vc(t.query)}' failed`);return void t.onError(w)}n.queries.set(l,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Qp(n)}async function q5(e,t){const n=me(e),i=t.query;let l=3;const u=n.queries.get(i);if(u){const g=u.Sa.indexOf(t);g>=0&&(u.Sa.splice(g,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Y5(e,t){const n=me(e);let i=!1;for(const l of t){const u=l.query,g=n.queries.get(u);if(g){for(const w of g.Sa)w.Fa(l)&&(i=!0);g.wa=l}}i&&Qp(n)}function X5(e,t,n){const i=me(e),l=i.queries.get(t);if(l)for(const u of l.Sa)u.onError(n);i.queries.delete(t)}function Qp(e){e.Ca.forEach((t=>{t.next()}))}var Rm,pw;(pw=Rm||(Rm={})).Ma="default",pw.Cache="cache";class W5{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const l of t.docChanges)l.type!==3&&i.push(l);t=new Yc(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Yc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(t){this.key=t}}class qv{constructor(t){this.key=t}}class K5{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=uv(t),this.tu=new Vc(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new gw,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,g=l,w=!1;const E=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((_,b)=>{const R=l.get(_),k=A0(this.query,b)?b:null,z=!!R&&this.mutatedKeys.has(R.key),q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let j=!1;R&&k?R.data.isEqual(k.data)?z!==q&&(i.track({type:3,doc:k}),j=!0):this.su(R,k)||(i.track({type:2,doc:k}),j=!0,(E&&this.eu(k,E)>0||y&&this.eu(k,y)<0)&&(w=!0)):!R&&k?(i.track({type:0,doc:k}),j=!0):R&&!k&&(i.track({type:1,doc:R}),j=!0,(E||y)&&(w=!0)),j&&(k?(g=g.add(k),u=q?u.add(_):u.delete(_)):(g=g.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;g.size>this.query.limit;){const _=this.query.limitType==="F"?g.last():g.first();g=g.delete(_.key),u=u.delete(_.key),i.track({type:1,doc:_})}return{tu:g,iu:i,Cs:w,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const g=t.iu.ya();g.sort(((_,b)=>(function(k,z){const q=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:j})}};return q(k)-q(z)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(i),l=l??!1;const w=n&&!l?this._u():[],E=this.Xa.size===0&&this.current&&!l?1:0,y=E!==this.Za;return this.Za=E,g.length!==0||y?{snapshot:new Yc(this.query,t.tu,u,g,t.mutatedKeys,E===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:w}:{au:w}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new qv(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new Gv(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=Pe();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Yc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zp="SyncEngine";class Q5{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class Z5{constructor(t){this.key=t,this.hu=!1}}class J5{constructor(t,n,i,l,u,g){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=g,this.Pu={},this.Tu=new jl((w=>cv(w)),E0),this.Iu=new Map,this.Eu=new Set,this.du=new kn(te.comparator),this.Au=new Map,this.Ru=new Fp,this.Vu={},this.mu=new Map,this.fu=qc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $5(e,t,n=!0){const i=Zv(e);let l;const u=i.Tu.get(t);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Yv(i,t,n,!0),l}async function t9(e,t){const n=Zv(e);await Yv(n,t,!0,!1)}async function Yv(e,t,n,i){const l=await y5(e.localStore,Ks(t)),u=l.targetId,g=e.sharedClientState.addLocalQueryTarget(u,n);let w;return i&&(w=await e9(e,t,u,g==="current",l.resumeToken)),e.isPrimaryClient&&n&&Vv(e.remoteStore,l),w}async function e9(e,t,n,i,l){e.pu=(b,R,k)=>(async function(q,j,nt,Z){let W=j.view.ru(nt);W.Cs&&(W=await lw(q.localStore,j.query,!1).then((({documents:H})=>j.view.ru(H,W))));const yt=Z&&Z.targetChanges.get(j.targetId),wt=Z&&Z.targetMismatches.get(j.targetId)!=null,Rt=j.view.applyChanges(W,q.isPrimaryClient,yt,wt);return Ew(q,j.targetId,Rt.au),Rt.snapshot})(e,b,R,k);const u=await lw(e.localStore,t,!0),g=new K5(t,u.Qs),w=g.ru(u.documents),E=Uh.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",l),y=g.applyChanges(w,e.isPrimaryClient,E);Ew(e,n,y.au);const _=new Q5(t,n,g);return e.Tu.set(t,_),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),y.snapshot}async function n9(e,t,n){const i=me(e),l=i.Tu.get(t),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((g=>!E0(g,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await bm(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Gp(i.remoteStore,l.targetId),Nm(i,l.targetId)})).catch(Jc)):(Nm(i,l.targetId),await bm(i.localStore,l.targetId,!0))}async function i9(e,t){const n=me(e),i=n.Tu.get(t),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Gp(n.remoteStore,i.targetId))}async function r9(e,t,n){const i=h9(e);try{const l=await(function(g,w){const E=me(g),y=Tn.now(),_=w.reduce(((k,z)=>k.add(z.key)),Pe());let b,R;return E.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let z=qa(),q=Pe();return E.Ns.getEntries(k,_).next((j=>{z=j,z.forEach(((nt,Z)=>{Z.isValidDocument()||(q=q.add(nt))}))})).next((()=>E.localDocuments.getOverlayedDocuments(k,z))).next((j=>{b=j;const nt=[];for(const Z of w){const W=pO(Z,b.get(Z.key).overlayedDocument);W!=null&&nt.push(new Qo(Z.key,W,nv(W.value.mapValue),Qs.exists(!0)))}return E.mutationQueue.addMutationBatch(k,y,nt,w)})).next((j=>{R=j;const nt=j.applyToLocalDocumentSet(b,q);return E.documentOverlayCache.saveOverlays(k,j.batchId,nt)}))})).then((()=>({batchId:R.batchId,changes:fv(b)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(l.batchId),(function(g,w,E){let y=g.Vu[g.currentUser.toKey()];y||(y=new kn(Oe)),y=y.insert(w,E),g.Vu[g.currentUser.toKey()]=y})(i,l.batchId,n),await zh(i,l.changes),await v0(i.remoteStore)}catch(l){const u=Kp(l,"Failed to persist write");n.reject(u)}}async function Xv(e,t){const n=me(e);try{const i=await g5(n.localStore,t);t.targetChanges.forEach(((l,u)=>{const g=n.Au.get(u);g&&(Je(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?g.hu=!0:l.modifiedDocuments.size>0?Je(g.hu,14607):l.removedDocuments.size>0&&(Je(g.hu,42227),g.hu=!1))})),await zh(n,i,t)}catch(i){await Jc(i)}}function yw(e,t,n){const i=me(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,g)=>{const w=g.view.va(t);w.snapshot&&l.push(w.snapshot)})),(function(g,w){const E=me(g);E.onlineState=w;let y=!1;E.queries.forEach(((_,b)=>{for(const R of b.Sa)R.va(w)&&(y=!0)})),y&&Qp(E)})(i.eventManager,t),l.length&&i.Pu.H_(l),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function s9(e,t,n){const i=me(e);i.sharedClientState.updateQueryState(t,"rejected",n);const l=i.Au.get(t),u=l&&l.key;if(u){let g=new kn(te.comparator);g=g.insert(u,Ki.newNoDocument(u,fe.min()));const w=Pe().add(u),E=new T0(fe.min(),new Map,new kn(Oe),g,w);await Xv(i,E),i.du=i.du.remove(u),i.Au.delete(t),Jp(i)}else await bm(i.localStore,t,!1).then((()=>Nm(i,t,n))).catch(Jc)}async function a9(e,t){const n=me(e),i=t.batch.batchId;try{const l=await d5(n.localStore,t);Kv(n,i,null),Wv(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await zh(n,l)}catch(l){await Jc(l)}}async function o9(e,t,n){const i=me(e);try{const l=await(function(g,w){const E=me(g);return E.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return E.mutationQueue.lookupMutationBatch(y,w).next((b=>(Je(b!==null,37113),_=b.keys(),E.mutationQueue.removeMutationBatch(y,b)))).next((()=>E.mutationQueue.performConsistencyCheck(y))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(y,_,w))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>E.localDocuments.getDocuments(y,_)))}))})(i.localStore,t);Kv(i,t,n),Wv(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await zh(i,l)}catch(l){await Jc(l)}}function Wv(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function Kv(e,t,n){const i=me(e);let l=i.Vu[i.currentUser.toKey()];if(l){const u=l.get(t);u&&(n?u.reject(n):u.resolve(),l=l.remove(t)),i.Vu[i.currentUser.toKey()]=l}}function Nm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((i=>{e.Ru.containsKey(i)||Qv(e,i)}))}function Qv(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Gp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Jp(e))}function Ew(e,t,n){for(const i of n)i instanceof Gv?(e.Ru.addReference(i.key,t),l9(e,i)):i instanceof qv?(Ht(Zp,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||Qv(e,i.key)):se(19791,{wu:i})}function l9(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(Ht(Zp,"New document in limbo: "+n),e.Eu.add(i),Jp(e))}function Jp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new te(On.fromString(t)),i=e.fu.next();e.Au.set(i,new Z5(n)),e.du=e.du.insert(n,i),Vv(e.remoteStore,new Do(Ks(Lp(n.path)),i,"TargetPurposeLimboResolution",g0.ce))}}async function zh(e,t,n){const i=me(e),l=[],u=[],g=[];i.Tu.isEmpty()||(i.Tu.forEach(((w,E)=>{g.push(i.pu(E,t,n).then((y=>{if((y||n)&&i.isPrimaryClient){const _=y?!y.fromCache:n?.targetChanges.get(E.targetId)?.current;i.sharedClientState.updateQueryState(E.targetId,_?"current":"not-current")}if(y){l.push(y);const _=jp.As(E.targetId,y);u.push(_)}})))})),await Promise.all(g),i.Pu.H_(l),await(async function(E,y){const _=me(E);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>It.forEach(y,(R=>It.forEach(R.Es,(k=>_.persistence.referenceDelegate.addReference(b,R.targetId,k))).next((()=>It.forEach(R.ds,(k=>_.persistence.referenceDelegate.removeReference(b,R.targetId,k)))))))))}catch(b){if(!$c(b))throw b;Ht(Hp,"Failed to update sequence numbers: "+b)}for(const b of y){const R=b.targetId;if(!b.fromCache){const k=_.Ms.get(R),z=k.snapshotVersion,q=k.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(R,q)}}})(i.localStore,u))}async function c9(e,t){const n=me(e);if(!n.currentUser.isEqual(t)){Ht(Zp,"User change. New user:",t.toKey());const i=await Pv(n.localStore,t);n.currentUser=t,(function(u,g){u.mu.forEach((w=>{w.forEach((E=>{E.reject(new Kt(Dt.CANCELLED,g))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await zh(n,i.Ls)}}function u9(e,t){const n=me(e),i=n.Au.get(t);if(i&&i.hu)return Pe().add(i.key);{let l=Pe();const u=n.Iu.get(t);if(!u)return l;for(const g of u){const w=n.Tu.get(g);l=l.unionWith(w.view.nu)}return l}}function Zv(e){const t=me(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=u9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=s9.bind(null,t),t.Pu.H_=Y5.bind(null,t.eventManager),t.Pu.yu=X5.bind(null,t.eventManager),t}function h9(e){const t=me(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=a9.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=o9.bind(null,t),t}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_0(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return f5(this.persistence,new c5,t.initialUser,this.serializer)}Cu(t){return new Ov(zp.mi,this.serializer)}Du(t){return new A5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class f9 extends Hd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Je(this.persistence.referenceDelegate instanceof zd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new WO(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new Ov((i=>zd.mi(i,n)),this.serializer)}}class Dm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c9.bind(null,this.syncEngine),await z5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new H5})()}createDatastore(t){const n=_0(t.databaseInfo.databaseId),i=(function(u){return new C5(u)})(t.databaseInfo);return(function(u,g,w,E){return new I5(u,g,w,E)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,l,u,g,w){return new N5(i,l,u,g,w)})(this.localStore,this.datastore,t.asyncQueue,(n=>yw(this.syncEngine,n,0)),(function(){return hw.v()?new hw:new x5})())}createSyncEngine(t,n){return(function(l,u,g,w,E,y,_){const b=new J5(l,u,g,w,E,y);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=me(n);Ht(Ll,"RemoteStore shutting down."),i.Ea.add(5),await Fh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Dm.provider={build:()=>new Dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ga("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="FirestoreClient";class g9{constructor(t,n,i,l,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=l,this.user=Wi.UNAUTHENTICATED,this.clientId=Ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async g=>{Ht(Go,"Received user=",g.uid),await this.authCredentialListener(g),this.user=g})),this.appCheckCredentials.start(i,(g=>(Ht(Go,"Received new app check token=",g),this.appCheckCredentialListener(g,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Kp(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function jg(e,t){e.asyncQueue.verifyOperationInProgress(),Ht(Go,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async l=>{i.isEqual(l)||(await Pv(t.localStore,l),i=l)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Aw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await m9(e);Ht(Go,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((i=>dw(t.remoteStore,i))),e.setAppCheckTokenChangeListener(((i,l)=>dw(t.remoteStore,l))),e._onlineComponents=t}async function m9(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ht(Go,"Using user provided OfflineComponentProvider");try{await jg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Dt.FAILED_PRECONDITION||l.code===Dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;zc("Error using user provided cache. Falling back to memory cache: "+n),await jg(e,new Hd)}}else Ht(Go,"Using default OfflineComponentProvider"),await jg(e,new f9(void 0));return e._offlineComponents}async function Jv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ht(Go,"Using user provided OnlineComponentProvider"),await Aw(e,e._uninitializedComponentsProvider._online)):(Ht(Go,"Using default OnlineComponentProvider"),await Aw(e,new Dm))),e._onlineComponents}function p9(e){return Jv(e).then((t=>t.syncEngine))}async function y9(e){const t=await Jv(e),n=t.eventManager;return n.onListen=$5.bind(null,t.syncEngine),n.onUnlisten=n9.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=t9.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=i9.bind(null,t.syncEngine),n}function E9(e,t,n={}){const i=new Lo;return e.asyncQueue.enqueueAndForget((async()=>(function(u,g,w,E,y){const _=new d9({next:R=>{_.Nu(),g.enqueueAndForget((()=>q5(u,b)));const k=R.docs.has(w);!k&&R.fromCache?y.reject(new Kt(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&R.fromCache&&E&&E.source==="server"?y.reject(new Kt(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),b=new W5(Lp(w.path),_,{includeMetadataChanges:!0,qa:!0});return G5(u,b)})(await y9(e),e.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firestore.googleapis.com",ww=!0;class Tw{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Kt(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tS,this.ssl=ww}else this.host=t.host,this.ssl=t.ssl??ww;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Mv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<YO)throw new Kt(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}IM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$v(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Kt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Kt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Kt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $p{constructor(t,n,i,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Kt(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new yM;switch(i.type){case"firstParty":return new wM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Kt(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=xw.get(n);i&&(Ht("ComponentProvider","Removing Datastore"),xw.delete(n),i.terminate())})(this),Promise.resolve()}}function A9(e,t,n,i={}){e=Pl(e,$p);const l=Ul(t),u=e._getSettings(),g={...u,emulatorOptions:e._getEmulatorOptions()},w=`${t}:${n}`;l&&(cp(`https://${w}`),up("Firestore",!0)),u.host!==tS&&u.host!==w&&zc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:w,ssl:l,emulatorOptions:i};if(!Vo(E,g)&&(e._setSettings(E),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=Wi.MOCK_USER;else{y=R_(i.mockUserToken,e._app?.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Kt(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Wi(b)}e._authCredentials=new EM(new qC(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ty(this.firestore,t,this._query)}}class mi{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _h(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new mi(this.firestore,t,this._key)}toJSON(){return{type:mi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Bh(n,mi._jsonSchema))return new mi(t,i||null,new te(On.fromString(n.referencePath)))}}mi._jsonSchemaVersion="firestore/documentReference/1.0",mi._jsonSchema={type:oi("string",mi._jsonSchemaVersion),referencePath:oi("string")};class _h extends ty{constructor(t,n,i){super(t,n,Lp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new mi(this.firestore,null,new te(t))}withConverter(t){return new _h(this.firestore,t,this._path)}}function ko(e,t,...n){if(e=Ci(e),arguments.length===1&&(t=Ip.newId()),bM("doc","path",t),e instanceof $p){const i=On.fromString(t,...n);return kx(i),new mi(e,null,new te(i))}{if(!(e instanceof mi||e instanceof _h))throw new Kt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(On.fromString(t,...n));return kx(i),new mi(e.firestore,e instanceof _h?e.converter:null,new te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="AsyncQueue";class Cw{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kv(this,"async_queue_retry"),this._c=()=>{const i=zg();i&&Ht(_w,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=zg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=zg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!$c(t))throw t;Ht(_w,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ga("INTERNAL UNHANDLED ERROR: ",vw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Wp.createAndSchedule(this,t,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&se(47125,{Pc:vw(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function vw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class S0 extends $p{constructor(t,n,i,l){super(t,n,i,l),this.type="firestore",this._queue=new Cw,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Cw(t),this._firestoreClient=void 0,await t}}}function x9(e,t){const n=typeof e=="object"?e:l0(),i=typeof e=="string"?e:Ld,l=Wo(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=S_("firestore");u&&A9(l,...u)}return l}function eS(e){if(e._terminated)throw new Kt(Dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||w9(e),e._firestoreClient}function w9(e){const t=e._freezeSettings(),n=(function(l,u,g,w){return new UM(l,u,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,$v(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new g9(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t){this._byteString=t}static fromBase64String(t){try{return new as(ki.fromBase64String(t))}catch(n){throw new Kt(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new as(ki.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:as._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Bh(t,as._jsonSchema))return as.fromBase64String(t.bytes)}}as._jsonSchemaVersion="firestore/bytes/1.0",as._jsonSchema={type:oi("string",as._jsonSchemaVersion),bytes:oi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Kt(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Kt(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Kt(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Oe(this._lat,t._lat)||Oe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(t){if(Bh(t,Js._jsonSchema))return new Js(t.latitude,t.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:oi("string",Js._jsonSchemaVersion),latitude:oi("number"),longitude:oi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:$s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Bh(t,$s._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new $s(t.vectorValues);throw new Kt(Dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$s._jsonSchemaVersion="firestore/vectorValue/1.0",$s._jsonSchema={type:oi("string",$s._jsonSchemaVersion),vectorValues:oi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=/^__.*__$/;class _9{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Qo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vh(t,this.data,n,this.fieldTransforms)}}class nS{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Qo(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function iS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:e})}}class ey{constructor(t,n,i,l,u,g){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ey({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Gd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(iS(this.Ac)&&T9.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class C9{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||_0(t)}Cc(t,n,i,l=!1){return new ey({Ac:t,methodName:n,Dc:i,path:Li.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rS(e){const t=e._freezeSettings(),n=_0(e._databaseId);return new C9(e._databaseId,!!t.ignoreUndefinedProperties,n)}function v9(e,t,n,i,l,u={}){const g=e.Cc(u.merge||u.mergeFields?2:0,t,n,l);iy("Data must be an object, but it was:",g,i);const w=sS(i,g);let E,y;if(u.merge)E=new Hr(g.fieldMask),y=g.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const R=Mm(t,b,n);if(!g.contains(R))throw new Kt(Dt.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);oS(_,R)||_.push(R)}E=new Hr(_),y=g.fieldTransforms.filter((b=>E.covers(b.field)))}else E=null,y=g.fieldTransforms;return new _9(new mr(w),E,y)}class R0 extends I0{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof R0}}class ny extends I0{_toFieldTransform(t){return new fO(t.path,new xh)}isEqual(t){return t instanceof ny}}function S9(e,t,n,i){const l=e.Cc(1,t,n);iy("Data must be an object, but it was:",l,i);const u=[],g=mr.empty();Ko(i,((E,y)=>{const _=ry(t,E,n);y=Ci(y);const b=l.yc(_);if(y instanceof R0)u.push(_);else{const R=N0(y,b);R!=null&&(u.push(_),g.set(_,R))}}));const w=new Hr(u);return new nS(g,w,l.fieldTransforms)}function b9(e,t,n,i,l,u){const g=e.Cc(1,t,n),w=[Mm(t,i,n)],E=[l];if(u.length%2!=0)throw new Kt(Dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)w.push(Mm(t,u[R])),E.push(u[R+1]);const y=[],_=mr.empty();for(let R=w.length-1;R>=0;--R)if(!oS(y,w[R])){const k=w[R];let z=E[R];z=Ci(z);const q=g.yc(k);if(z instanceof R0)y.push(k);else{const j=N0(z,q);j!=null&&(y.push(k),_.set(k,j))}}const b=new Hr(y);return new nS(_,b,g.fieldTransforms)}function N0(e,t){if(aS(e=Ci(e)))return iy("Unsupported field value:",t,e),sS(e,t);if(e instanceof I0)return(function(i,l){if(!iS(l.Ac))throw l.Sc(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,l){const u=[];let g=0;for(const w of i){let E=N0(w,l.wc(g));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),g++}return{arrayValue:{values:u}}})(e,t)}return(function(i,l){if((i=Ci(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cO(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Tn.fromDate(i);return{timestampValue:Fd(l.serializer,u)}}if(i instanceof Tn){const u=new Tn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fd(l.serializer,u)}}if(i instanceof Js)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof as)return{bytesValue:vv(l.serializer,i._byteString)};if(i instanceof mi){const u=l.databaseId,g=i.firestore._databaseId;if(!g.isEqual(u))throw l.Sc(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Up(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof $s)return(function(g,w){return{mapValue:{fields:{[tv]:{stringValue:ev},[kd]:{arrayValue:{values:g.toArray().map((y=>{if(typeof y!="number")throw w.Sc("VectorValues must only contain numeric values.");return kp(w.serializer,y)}))}}}}}})(i,l);throw l.Sc(`Unsupported field value: ${Rp(i)}`)})(e,t)}function sS(e,t){const n={};return WC(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ko(e,((i,l)=>{const u=N0(l,t.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function aS(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Tn||e instanceof Js||e instanceof as||e instanceof mi||e instanceof I0||e instanceof $s)}function iy(e,t,n){if(!aS(n)||!YC(n)){const i=Rp(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Mm(e,t,n){if((t=Ci(t))instanceof b0)return t._internalPath;if(typeof t=="string")return ry(e,t);throw Gd("Field path arguments must be of type string or ",e,!1,void 0,n)}const I9=new RegExp("[~\\*/\\[\\]]");function ry(e,t,n){if(t.search(I9)>=0)throw Gd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new b0(...t.split("."))._internalPath}catch{throw Gd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Gd(e,t,n,i,l){const u=i&&!i.isEmpty(),g=l!==void 0;let w=`Function ${t}() called with invalid data`;n&&(w+=" (via `toFirestore()`)"),w+=". ";let E="";return(u||g)&&(E+=" (found",u&&(E+=` in field ${i}`),g&&(E+=` in document ${l}`),E+=")"),new Kt(Dt.INVALID_ARGUMENT,w+e+E)}function oS(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(t,n,i,l,u){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new R9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(cS("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class R9 extends lS{data(){return super.data()}}function cS(e,t){return typeof t=="string"?ry(e,t):t instanceof b0?t._internalPath:t._delegate._internalPath}class N9{convertValue(t,n="none"){switch(jo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(zo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw se(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ko(t,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(t){const n=t.fields?.[kd].arrayValue?.values?.map((i=>ti(i.doubleValue)));return new $s(n)}convertGeoPoint(t){return new Js(ti(t.latitude),ti(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=p0(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(yh(t));default:return null}}convertTimestamp(t){const n=Fo(t);return new Tn(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=On.fromString(t);Je(Dv(i),9688,{name:t});const l=new Eh(i.get(1),i.get(3)),u=new te(i.popFirst(5));return l.isEqual(n)||Ga(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(e,t,n){let i;return i=e?e.toFirestore(t):t,i}class Zu{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bl extends lS{constructor(t,n,i,l,u,g){super(t,n,i,l,g),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(cS("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=bl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",bl._jsonSchema={type:oi("string",bl._jsonSchemaVersion),bundleSource:oi("string","DocumentSnapshot"),bundleName:oi("string"),bundle:oi("string")};class yd extends bl{data(t={}){return super.data(t)}}class oh{constructor(t,n,i,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Zu(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new yd(this._firestore,this._userDataWriter,i.key,i,new Zu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Kt(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let g=0;return l._snapshot.docChanges.map((w=>{const E=new yd(l._firestore,l._userDataWriter,w.doc.key,w.doc,new Zu(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter);return w.doc,{type:"added",doc:E,oldIndex:-1,newIndex:g++}}))}{let g=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((w=>u||w.type!==3)).map((w=>{const E=new yd(l._firestore,l._userDataWriter,w.doc.key,w.doc,new Zu(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,_=-1;return w.type!==0&&(y=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),w.type!==1&&(g=g.add(w.doc),_=g.indexOf(w.doc.key)),{type:M9(w.type),doc:E,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(Dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=oh._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ip.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function M9(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(e){e=Pl(e,mi);const t=Pl(e.firestore,S0);return E9(eS(t),e._key).then((n=>L9(t,e,n)))}oh._jsonSchemaVersion="firestore/querySnapshot/1.0",oh._jsonSchema={type:oi("string",oh._jsonSchemaVersion),bundleSource:oi("string","QuerySnapshot"),bundleName:oi("string"),bundle:oi("string")};class O9 extends N9{constructor(t){super(),this.firestore=t}convertBytes(t){return new as(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new mi(this.firestore,null,n)}}function P9(e,t,n){e=Pl(e,mi);const i=Pl(e.firestore,S0),l=D9(e.converter,t);return uS(i,[v9(rS(i),"setDoc",e._key,l,e.converter!==null,n).toMutation(e._key,Qs.none())])}function Yd(e,t,n,...i){e=Pl(e,mi);const l=Pl(e.firestore,S0),u=rS(l);let g;return g=typeof(t=Ci(t))=="string"||t instanceof b0?b9(u,"updateDoc",e._key,t,n,i):S9(u,"updateDoc",e._key,t),uS(l,[g.toMutation(e._key,Qs.exists(!0))])}function uS(e,t){return(function(i,l){const u=new Lo;return i.asyncQueue.enqueueAndForget((async()=>r9(await p9(i),l,u))),u.promise})(eS(e),t)}function L9(e,t,n){const i=n.docs.get(t._key),l=new O9(e);return new bl(e,l,t._key,i,new Zu(n.hasPendingWrites,n.fromCache),t.converter)}function k9(){return new ny("serverTimestamp")}(function(t,n=!0){(function(l){Zc=l})(zl),Rs(new ls("firestore",((i,{instanceIdentifier:l,options:u})=>{const g=i.getProvider("app").getImmediate(),w=new S0(new AM(i.getProvider("auth-internal")),new TM(g,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Kt(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(y.options.projectId,_)})(g,l),g);return u={useFetchStreams:n,...u},w._setSettings(u),w}),"PUBLIC").setMultipleInstances(!0)),yr(Mx,Ox,t),yr(Mx,Ox,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="firebasestorage.googleapis.com",B9="storageBucket",V9=120*1e3,U9=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends cs{constructor(t,n,i=0){super(Hg(t),`Firebase Storage: ${n} (${Hg(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,la.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Hg(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var aa;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(aa||(aa={}));function Hg(e){return"storage/"+e}function F9(){const e="An unknown error occurred, please check the error payload for server response.";return new la(aa.UNKNOWN,e)}function z9(){return new la(aa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function j9(){return new la(aa.CANCELED,"User canceled the upload/download.")}function H9(e){return new la(aa.INVALID_URL,"Invalid URL '"+e+"'.")}function G9(e){return new la(aa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Sw(e){return new la(aa.INVALID_ARGUMENT,e)}function fS(){return new la(aa.APP_DELETED,"The Firebase app was deleted.")}function q9(e){return new la(aa.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Ss.makeFromUrl(t,n)}catch{return new Ss(t,"")}if(i.path==="")return i;throw G9(t)}static makeFromUrl(t,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(yt){yt.path.charAt(yt.path.length-1)==="/"&&(yt.path_=yt.path_.slice(0,-1))}const g="(/(.*))?$",w=new RegExp("^gs://"+l+g,"i"),E={bucket:1,path:3};function y(yt){yt.path_=decodeURIComponent(yt.path)}const _="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),R="(/([^?#]*).*)?$",k=new RegExp(`^https?://${b}/${_}/b/${l}/o${R}`,"i"),z={bucket:1,path:3},q=n===hS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",nt=new RegExp(`^https?://${q}/${l}/${j}`,"i"),W=[{regex:w,indices:E,postModify:u},{regex:k,indices:z,postModify:y},{regex:nt,indices:{bucket:1,path:2},postModify:y}];for(let yt=0;yt<W.length;yt++){const wt=W[yt],Rt=wt.regex.exec(t);if(Rt){const H=Rt[wt.indices.bucket];let U=Rt[wt.indices.path];U||(U=""),i=new Ss(H,U),wt.postModify(i);break}}if(i==null)throw H9(t);return i}}class Y9{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(e,t,n){let i=1,l=null,u=null,g=!1,w=0;function E(){return w===2}let y=!1;function _(...j){y||(y=!0,t.apply(null,j))}function b(j){l=setTimeout(()=>{l=null,e(k,E())},j)}function R(){u&&clearTimeout(u)}function k(j,...nt){if(y){R();return}if(j){R(),_.call(null,j,...nt);return}if(E()||g){R(),_.call(null,j,...nt);return}i<64&&(i*=2);let W;w===1?(w=2,W=0):W=(i+Math.random())*1e3,b(W)}let z=!1;function q(j){z||(z=!0,R(),!y&&(l!==null?(j||(w=2),clearTimeout(l),b(0)):j||(w=1)))}return b(0),u=setTimeout(()=>{g=!0,q(!0)},n),q}function W9(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(e){return e!==void 0}function bw(e,t,n,i){if(i<t)throw Sw(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Sw(`Invalid value for '${e}'. Expected ${n} or less.`)}function Q9(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const l=t(i)+"="+t(e[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var Xd;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Xd||(Xd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(e,t){const n=e>=500&&e<600,l=[408,429].indexOf(e)!==-1,u=t.indexOf(e)!==-1;return n||l||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(t,n,i,l,u,g,w,E,y,_,b,R=!0,k=!1){this.url_=t,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=g,this.callback_=w,this.errorCallback_=E,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=b,this.retry=R,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,q)=>{this.resolve_=z,this.reject_=q,this.start_()})}start_(){const t=(i,l)=>{if(l){i(!1,new nd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const g=w=>{const E=w.loaded,y=w.lengthComputable?w.total:-1;this.progressCallback_!==null&&this.progressCallback_(E,y)};this.progressCallback_!==null&&u.addUploadProgressListener(g),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(g),this.pendingConnection_=null;const w=u.getErrorCode()===Xd.NO_ERROR,E=u.getStatus();if(!w||Z9(E,this.additionalRetryCodes_)&&this.retry){const _=u.getErrorCode()===Xd.ABORT;i(!1,new nd(!1,null,_));return}const y=this.successCodes_.indexOf(E)!==-1;i(!0,new nd(y,u))})},n=(i,l)=>{const u=this.resolve_,g=this.reject_,w=l.connection;if(l.wasSuccessCode)try{const E=this.callback_(w,w.getResponse());K9(E)?u(E):u()}catch(E){g(E)}else if(w!==null){const E=F9();E.serverResponse=w.getErrorText(),this.errorCallback_?g(this.errorCallback_(w,E)):g(E)}else if(l.canceled){const E=this.appDelete_?fS():j9();g(E)}else{const E=z9();g(E)}};this.canceled_?n(!1,new nd(!1,null,!0)):this.backoffId_=X9(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&W9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nd{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function $9(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function tP(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function eP(e,t){t&&(e["X-Firebase-GMPID"]=t)}function nP(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function iP(e,t,n,i,l,u,g=!0,w=!1){const E=Q9(e.urlParams),y=e.url+E,_=Object.assign({},e.headers);return eP(_,t),$9(_,n),tP(_,u),nP(_,i),new J9(y,e.method,_,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,l,g,w)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function sP(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,n){this._service=t,n instanceof Ss?this._location=n:this._location=Ss.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Wd(t,n)}get root(){const t=new Ss(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sP(this._location.path)}get storage(){return this._service}get parent(){const t=rP(this._location.path);if(t===null)return null;const n=new Ss(this._location.bucket,t);return new Wd(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw q9(t)}}function Iw(e,t){const n=t?.[B9];return n==null?null:Ss.makeFromBucketSpec(n,e)}function aP(e,t,n,i={}){e.host=`${t}:${n}`;const l=Ul(t);l&&(cp(`https://${e.host}/b`),up("Storage",!0)),e._isUsingEmulator=!0,e._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(e._overrideAuthToken=typeof u=="string"?u:R_(u,e.app.options.projectId))}class oP{constructor(t,n,i,l,u,g=!1){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=g,this._bucket=null,this._host=hS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V9,this._maxUploadRetryTime=U9,this._requests=new Set,l!=null?this._bucket=Ss.makeFromBucketSpec(l,this._host):this._bucket=Iw(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ss.makeFromBucketSpec(this._url,t):this._bucket=Iw(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){bw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){bw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Wd(this,t)}_makeRequest(t,n,i,l,u=!0){if(this._deleted)return new Y9(fS());{const g=iP(t,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(g),g.getPromise().then(()=>this._requests.delete(g),()=>this._requests.delete(g)),g}}async makeRequestWithTokens(t,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,l).getPromise()}}const Rw="@firebase/storage",Nw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="storage";function lP(e=l0(),t){e=Ci(e);const i=Wo(e,dS).getImmediate({identifier:t}),l=S_("storage");return l&&cP(i,...l),i}function cP(e,t,n,i={}){aP(e,t,n,i)}function uP(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return new oP(n,i,l,t,zl)}function hP(){Rs(new ls(dS,uP,"PUBLIC").setMultipleInstances(!0)),yr(Rw,Nw,""),yr(Rw,Nw,"esm2020")}hP();const fP={apiKey:"AIzaSyCLL-yZ9m6vgZ04Yj0x-wDjtxkJOzCiEMc",authDomain:"basecamp-app-e6386.firebaseapp.com",projectId:"basecamp-app-e6386",storageBucket:"basecamp-app-e6386.firebasestorage.app",messagingSenderId:"929651436196",appId:"1:929651436196:web:790b5001a09d8db991d431",measurementId:"G-L0L3JE5SCM"},D0=k_(fP);d8(D0);const Ed=mM(D0),Bo=x9(D0);lP(D0);const gS=st.createContext(),dP=({children:e})=>{const[t,n]=st.useState(null),[i,l]=st.useState(null);return st.useEffect(()=>{const u=SC(Ed,async g=>{if(g){n(g);const w=ko(Bo,"profiles",g.uid),E=await qd(w);E.exists()?l(E.data()):l(null)}else n(null),l(null)});return()=>u()},[]),Tt.jsx(gS.Provider,{value:{user:t,setUser:n,profile:i,setProfile:l},children:e})},mS=()=>st.useContext(gS);var Gt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Gt||(Gt={}));var Dw=new Map([[Gt.QR_CODE,"QR_CODE"],[Gt.AZTEC,"AZTEC"],[Gt.CODABAR,"CODABAR"],[Gt.CODE_39,"CODE_39"],[Gt.CODE_93,"CODE_93"],[Gt.CODE_128,"CODE_128"],[Gt.DATA_MATRIX,"DATA_MATRIX"],[Gt.MAXICODE,"MAXICODE"],[Gt.ITF,"ITF"],[Gt.EAN_13,"EAN_13"],[Gt.EAN_8,"EAN_8"],[Gt.PDF_417,"PDF_417"],[Gt.RSS_14,"RSS_14"],[Gt.RSS_EXPANDED,"RSS_EXPANDED"],[Gt.UPC_A,"UPC_A"],[Gt.UPC_E,"UPC_E"],[Gt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Mw;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Mw||(Mw={}));function gP(e){return Object.values(Gt).includes(e)}var qo;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(qo||(qo={}));var Cs=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[qo.SCAN_TYPE_CAMERA,qo.SCAN_TYPE_FILE],e})(),pS=(function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Dw.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Dw.get(t))},e})(),Ow=(function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Om;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Om||(Om={}));var yS=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Om.UNKWOWN_ERROR}},e})(),ES=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function Ys(e){return typeof e>"u"||e===null}function mP(e,t,n){return e>n?n:e<t?t:e}var Ic=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),rn=(function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e})(),Pw=(function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e})(),AS=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),g=Object.keys(t),w=0,E=g;w<E.length;w++){var y=E[w];if(u.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e})(),Ju={exports:{}},pP=Ju.exports,Lw;function yP(){return Lw||(Lw=1,(function(e,t){(function(n,i){i(t)})(pP,(function(n){function i(O){return O==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,s){O.__proto__=s}||function(O,s){for(var o in s)s.hasOwnProperty(o)&&(O[o]=s[o])};function u(O,s){l(O,s);function o(){this.constructor=O}O.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function g(O,s){var o=Object.setPrototypeOf;o?o(O,s):O.__proto__=s}function w(O,s){s===void 0&&(s=O.constructor);var o=Error.captureStackTrace;o&&o(O,s)}var E=(function(O){u(s,O);function s(o){var c=this.constructor,f=O.call(this,o)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),g(f,c.prototype),w(f),f}return s})(Error);class y extends E{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}y.kind="Exception";class _ extends y{}_.kind="ArgumentException";class b extends y{}b.kind="IllegalArgumentException";class R{constructor(s){if(this.binarizer=s,s===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,c,f){const d=this.binarizer.getLuminanceSource().crop(s,o,c,f);return new R(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends y{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class z{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class q{static arraycopy(s,o,c,f,d){for(;d--;)c[f++]=s[o++]}static currentTimeMillis(){return Date.now()}}class j extends y{}j.kind="IndexOutOfBoundsException";class nt extends j{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}nt.kind="ArrayIndexOutOfBoundsException";class Z{static fill(s,o){for(let c=0,f=s.length;c<f;c++)s[c]=o}static fillWithin(s,o,c,f){Z.rangeCheck(s.length,o,c);for(let d=o;d<c;d++)s[d]=f}static rangeCheck(s,o,c){if(o>c)throw new b("fromIndex("+o+") > toIndex("+c+")");if(o<0)throw new nt(o);if(c>s)throw new nt(c)}static asList(...s){return s}static create(s,o,c){return Array.from({length:s}).map(d=>Array.from({length:o}).fill(c))}static createInt32Array(s,o,c){return Array.from({length:s}).map(d=>Int32Array.from({length:o}).fill(c))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let c=0,f=s.length;c<f;c++)if(s[c]!==o[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const c of s)o=31*o+c;return o}static fillUint8Array(s,o){for(let c=0;c!==s.length;c++)s[c]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const c=new Uint8Array(o);return c.set(s),c}return s.slice(0,o)}static copyOfRange(s,o,c){const f=c-o,d=new Int32Array(f);return q.arraycopy(s,o,d,0,f),d}static binarySearch(s,o,c){c===void 0&&(c=Z.numberComparator);let f=0,d=s.length-1;for(;f<=d;){const p=d+f>>1,x=c(o,s[p]);if(x>0)f=p+1;else if(x<0)d=p-1;else return p}return-f-1}static numberComparator(s,o){return s-o}}class W{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let c=31;return o=s<<16,o!==0&&(c-=16,s=o),o=s<<8,o!==0&&(c-=8,s=o),o=s<<4,o!==0&&(c-=4,s=o),o=s<<2,o!==0&&(c-=2,s=o),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class yt{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=yt.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=yt.makeArray(s);q.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const c=this.bits;let f=Math.floor(s/32),d=c[f];d&=~((1<<(s&31))-1);const p=c.length;for(;d===0;){if(++f===p)return o;d=c[f]}const x=f*32+W.numberOfTrailingZeros(d);return x>o?o:x}getNextUnset(s){const o=this.size;if(s>=o)return o;const c=this.bits;let f=Math.floor(s/32),d=~c[f];d&=~((1<<(s&31))-1);const p=c.length;for(;d===0;){if(++f===p)return o;d=~c[f]}const x=f*32+W.numberOfTrailingZeros(d);return x>o?o:x}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new b;if(o===s)return;o--;const c=Math.floor(s/32),f=Math.floor(o/32),d=this.bits;for(let p=c;p<=f;p++){const x=p>c?0:s&31,S=(2<<(p<f?31:o&31))-(1<<x);d[p]|=S}}clear(){const s=this.bits.length,o=this.bits;for(let c=0;c<s;c++)o[c]=0}isRange(s,o,c){if(o<s||s<0||o>this.size)throw new b;if(o===s)return!0;o--;const f=Math.floor(s/32),d=Math.floor(o/32),p=this.bits;for(let x=f;x<=d;x++){const C=x>f?0:s&31,N=(2<<(x<d?31:o&31))-(1<<C)&4294967295;if((p[x]&N)!==(c?N:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let c=o;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let c=0;c<o;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new b("Sizes don't match");const o=this.bits;for(let c=0,f=o.length;c<f;c++)o[c]^=s.bits[c]}toBytes(s,o,c,f){for(let d=0;d<f;d++){let p=0;for(let x=0;x<8;x++)this.get(s)&&(p|=1<<7-x),s++;o[c+d]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),c=o+1,f=this.bits;for(let d=0;d<c;d++){let p=f[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[o-d]=p}if(this.size!==c*32){const d=c*32-this.size;let p=s[0]>>>d;for(let x=1;x<c;x++){const C=s[x];p|=C<<32-d,s[x-1]=p,p=C>>>d}s[c-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof yt))return!1;const o=s;return this.size===o.size&&Z.equals(this.bits,o.bits)}hashCode(){return 31*this.size+Z.hashCode(this.bits)}toString(){let s="";for(let o=0,c=this.size;o<c;o++)(o&7)===0&&(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new yt(this.size,this.bits.slice())}}var wt;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(wt||(wt={}));var Rt=wt;class H extends y{static getFormatInstance(){return new H}}H.kind="FormatException";var U;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(U||(U={}));class V{constructor(s,o,c,...f){this.valueIdentifier=s,this.name=c,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,V.VALUE_IDENTIFIER_TO_ECI.set(s,this),V.NAME_TO_ECI.set(c,this);const d=this.values;for(let p=0,x=d.length;p!==x;p++){const C=d[p];V.VALUES_TO_ECI.set(C,this)}for(const p of f)V.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new H("incorect value");const o=V.VALUES_TO_ECI.get(s);if(o===void 0)throw new H("incorect value");return o}static getCharacterSetECIByName(s){const o=V.NAME_TO_ECI.get(s);if(o===void 0)throw new H("incorect value");return o}equals(s){if(!(s instanceof V))return!1;const o=s;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(U.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(U.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(U.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(U.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(U.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(U.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(U.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(U.Big5,28,"Big5"),V.GB18030=new V(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(U.EUC_KR,30,"EUC_KR","EUC-KR");class et extends y{}et.kind="UnsupportedOperationException";class K{static decode(s,o){const c=this.encodingName(o);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!K.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const c=this.encodingName(o);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof V?s:V.getCharacterSetECIByName(s)}static decodeFallback(s,o){const c=this.encodingCharacterSet(o);if(K.isDecodeFallbackSupported(c)){let f="";for(let d=0,p=s.length;d<p;d++){let x=s[d].toString(16);x.length<2&&(x="0"+x),f+="%"+x}return decodeURIComponent(f)}if(c.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new et(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(V.UTF8)||s.equals(V.ISO8859_1)||s.equals(V.ASCII)}static encodeFallback(s){const c=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let d=0;d<c.length;d++)f.push(c[d].charCodeAt(0));return new Uint8Array(f)}}class J{static castAsNonUtf8Char(s,o=null){const c=o?o.getName():this.ISO88591;return K.decode(new Uint8Array([s]),c)}static guessEncoding(s,o){if(o!=null&&o.get(Rt.CHARACTER_SET)!==void 0)return o.get(Rt.CHARACTER_SET).toString();const c=s.length;let f=!0,d=!0,p=!0,x=0,C=0,S=0,N=0,P=0,L=0,Y=0,tt=0,it=0,lt=0,gt=0;const Ot=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let Lt=0;Lt<c&&(f||d||p);Lt++){const Nt=s[Lt]&255;p&&(x>0?(Nt&128)===0?p=!1:x--:(Nt&128)!==0&&((Nt&64)===0?p=!1:(x++,(Nt&32)===0?C++:(x++,(Nt&16)===0?S++:(x++,(Nt&8)===0?N++:p=!1))))),f&&(Nt>127&&Nt<160?f=!1:Nt>159&&(Nt<192||Nt===215||Nt===247)&&gt++),d&&(P>0?Nt<64||Nt===127||Nt>252?d=!1:P--:Nt===128||Nt===160||Nt>239?d=!1:Nt>160&&Nt<224?(L++,tt=0,Y++,Y>it&&(it=Y)):Nt>127?(P++,Y=0,tt++,tt>lt&&(lt=tt)):(Y=0,tt=0))}return p&&x>0&&(p=!1),d&&P>0&&(d=!1),p&&(Ot||C+S+N>0)?J.UTF8:d&&(J.ASSUME_SHIFT_JIS||it>=3||lt>=3)?J.SHIFT_JIS:f&&d?it===2&&L===2||gt*10>=c?J.SHIFT_JIS:J.ISO88591:f?J.ISO88591:d?J.SHIFT_JIS:p?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let c=-1;function f(p,x,C,S,N,P){if(p==="%%")return"%";if(o[++c]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let L=N?parseInt(N.substr(1)):void 0,Y;switch(P){case"s":Y=o[c];break;case"c":Y=o[c][0];break;case"f":Y=parseFloat(o[c]).toFixed(p);break;case"p":Y=parseFloat(o[c]).toPrecision(p);break;case"e":Y=parseFloat(o[c]).toExponential(p);break;case"x":Y=parseInt(o[c]).toString(L||16);break;case"d":Y=parseFloat(parseInt(o[c],L||10).toPrecision(p)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(L);let tt=parseInt(C),it=C&&C[0]+""=="0"?"0":" ";for(;Y.length<tt;)Y=x!==void 0?Y+it:it+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,f)}static getBytes(s,o){return K.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}J.SHIFT_JIS=V.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=V.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=V.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class X{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=J.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,c){for(let f=o;o<o+c;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class Jt{constructor(s,o,c,f){if(this.width=s,this.height=o,this.rowSize=c,this.bits=f,o==null&&(o=s),this.height=o,s<1||o<1)throw new b("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,c=s[0].length,f=new Jt(c,o);for(let d=0;d<o;d++){const p=s[d];for(let x=0;x<c;x++)p[x]&&f.set(x,d)}return f}static parseFromString(s,o,c){if(s===null)throw new b("stringRepresentation cannot be null");const f=new Array(s.length);let d=0,p=0,x=-1,C=0,S=0;for(;S<s.length;)if(s.charAt(S)===`
`||s.charAt(S)==="\r"){if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");p=d,C++}S++}else if(s.substring(S,S+o.length)===o)S+=o.length,f[d]=!0,d++;else if(s.substring(S,S+c.length)===c)S+=c.length,f[d]=!1,d++;else throw new b("illegal character encountered: "+s.substring(S));if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new b("row lengths do not match");C++}const N=new Jt(x,C);for(let P=0;P<d;P++)f[P]&&N.set(Math.floor(P%x),Math.floor(P/x));return N}get(s,o){const c=o*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new b("input matrix dimensions do not match");const o=new yt(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let d=0,p=this.height;d<p;d++){const x=d*c,C=s.getRow(d,o).getBitArray();for(let S=0;S<c;S++)f[x+S]^=C[S]}}clear(){const s=this.bits,o=s.length;for(let c=0;c<o;c++)s[c]=0}setRegion(s,o,c,f){if(o<0||s<0)throw new b("Left and top must be nonnegative");if(f<1||c<1)throw new b("Height and width must be at least 1");const d=s+c,p=o+f;if(p>this.height||d>this.width)throw new b("The region must fit inside the matrix");const x=this.rowSize,C=this.bits;for(let S=o;S<p;S++){const N=S*x;for(let P=s;P<d;P++)C[N+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new yt(this.width):o.clear();const c=this.rowSize,f=this.bits,d=s*c;for(let p=0;p<c;p++)o.setBulk(p*32,f[d+p]);return o}setRow(s,o){q.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let c=new yt(s),f=new yt(s);for(let d=0,p=Math.floor((o+1)/2);d<p;d++)c=this.getRow(d,c),f=this.getRow(o-1-d,f),c.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,c)}getEnclosingRectangle(){const s=this.width,o=this.height,c=this.rowSize,f=this.bits;let d=s,p=o,x=-1,C=-1;for(let S=0;S<o;S++)for(let N=0;N<c;N++){const P=f[S*c+N];if(P!==0){if(S<p&&(p=S),S>C&&(C=S),N*32<d){let L=0;for(;(P<<31-L&4294967295)===0;)L++;N*32+L<d&&(d=N*32+L)}if(N*32+31>x){let L=31;for(;!(P>>>L);)L--;N*32+L>x&&(x=N*32+L)}}}return x<d||C<p?null:Int32Array.from([d,p,x-d+1,C-p+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let c=0;for(;c<o.length&&o[c]===0;)c++;if(c===o.length)return null;const f=c/s;let d=c%s*32;const p=o[c];let x=0;for(;(p<<31-x&4294967295)===0;)x++;return d+=x,Int32Array.from([d,f])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let c=o.length-1;for(;c>=0&&o[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/s);let d=Math.floor(c%s)*32;const p=o[c];let x=31;for(;!(p>>>x);)x--;return d+=x,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof Jt))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&Z.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+Z.hashCode(this.bits),s}toString(s="X ",o="  ",c=`
`){return this.buildToString(s,o,c)}buildToString(s,o,c){let f=new X;for(let d=0,p=this.height;d<p;d++){for(let x=0,C=this.width;x<C;x++)f.append(this.get(x,d)?s:o);f.append(c)}return f.toString()}clone(){return new Jt(this.width,this.height,this.rowSize,this.bits.slice())}}class ht extends y{static getNotFoundInstance(){return new ht}}ht.kind="NotFoundException";class Et extends z{constructor(s){super(s),this.luminances=Et.EMPTY,this.buckets=new Int32Array(Et.LUMINANCE_BUCKETS)}getBlackRow(s,o){const c=this.getLuminanceSource(),f=c.getWidth();o==null||o.getSize()<f?o=new yt(f):o.clear(),this.initArrays(f);const d=c.getRow(s,this.luminances),p=this.buckets;for(let C=0;C<f;C++)p[(d[C]&255)>>Et.LUMINANCE_SHIFT]++;const x=Et.estimateBlackPoint(p);if(f<3)for(let C=0;C<f;C++)(d[C]&255)<x&&o.set(C);else{let C=d[0]&255,S=d[1]&255;for(let N=1;N<f-1;N++){const P=d[N+1]&255;(S*4-C-P)/2<x&&o.set(N),C=S,S=P}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight(),f=new Jt(o,c);this.initArrays(o);const d=this.buckets;for(let C=1;C<5;C++){const S=Math.floor(c*C/5),N=s.getRow(S,this.luminances),P=Math.floor(o*4/5);for(let L=Math.floor(o/5);L<P;L++){const Y=N[L]&255;d[Y>>Et.LUMINANCE_SHIFT]++}}const p=Et.estimateBlackPoint(d),x=s.getMatrix();for(let C=0;C<c;C++){const S=C*o;for(let N=0;N<o;N++)(x[S+N]&255)<p&&f.set(N,C)}return f}createBinarizer(s){return new Et(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let c=0;c<Et.LUMINANCE_BUCKETS;c++)o[c]=0}static estimateBlackPoint(s){const o=s.length;let c=0,f=0,d=0;for(let N=0;N<o;N++)s[N]>d&&(f=N,d=s[N]),s[N]>c&&(c=s[N]);let p=0,x=0;for(let N=0;N<o;N++){const P=N-f,L=s[N]*P*P;L>x&&(p=N,x=L)}if(f>p){const N=f;f=p,p=N}if(p-f<=o/16)throw new ht;let C=p-1,S=-1;for(let N=p-1;N>f;N--){const P=N-f,L=P*P*(p-N)*(c-s[N]);L>S&&(C=N,S=L)}return C<<Et.LUMINANCE_SHIFT}}Et.LUMINANCE_BITS=5,Et.LUMINANCE_SHIFT=8-Et.LUMINANCE_BITS,Et.LUMINANCE_BUCKETS=1<<Et.LUMINANCE_BITS,Et.EMPTY=Uint8ClampedArray.from([0]);class xt extends Et{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight();if(o>=xt.MINIMUM_DIMENSION&&c>=xt.MINIMUM_DIMENSION){const f=s.getMatrix();let d=o>>xt.BLOCK_SIZE_POWER;(o&xt.BLOCK_SIZE_MASK)!==0&&d++;let p=c>>xt.BLOCK_SIZE_POWER;(c&xt.BLOCK_SIZE_MASK)!==0&&p++;const x=xt.calculateBlackPoints(f,d,p,o,c),C=new Jt(o,c);xt.calculateThresholdForBlock(f,d,p,o,c,x,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new xt(s)}static calculateThresholdForBlock(s,o,c,f,d,p,x){const C=d-xt.BLOCK_SIZE,S=f-xt.BLOCK_SIZE;for(let N=0;N<c;N++){let P=N<<xt.BLOCK_SIZE_POWER;P>C&&(P=C);const L=xt.cap(N,2,c-3);for(let Y=0;Y<o;Y++){let tt=Y<<xt.BLOCK_SIZE_POWER;tt>S&&(tt=S);const it=xt.cap(Y,2,o-3);let lt=0;for(let Ot=-2;Ot<=2;Ot++){const Lt=p[L+Ot];lt+=Lt[it-2]+Lt[it-1]+Lt[it]+Lt[it+1]+Lt[it+2]}const gt=lt/25;xt.thresholdBlock(s,tt,P,gt,f,x)}}}static cap(s,o,c){return s<o?o:s>c?c:s}static thresholdBlock(s,o,c,f,d,p){for(let x=0,C=c*d+o;x<xt.BLOCK_SIZE;x++,C+=d)for(let S=0;S<xt.BLOCK_SIZE;S++)(s[C+S]&255)<=f&&p.set(o+S,c+x)}static calculateBlackPoints(s,o,c,f,d){const p=d-xt.BLOCK_SIZE,x=f-xt.BLOCK_SIZE,C=new Array(c);for(let S=0;S<c;S++){C[S]=new Int32Array(o);let N=S<<xt.BLOCK_SIZE_POWER;N>p&&(N=p);for(let P=0;P<o;P++){let L=P<<xt.BLOCK_SIZE_POWER;L>x&&(L=x);let Y=0,tt=255,it=0;for(let gt=0,Ot=N*f+L;gt<xt.BLOCK_SIZE;gt++,Ot+=f){for(let Lt=0;Lt<xt.BLOCK_SIZE;Lt++){const Nt=s[Ot+Lt]&255;Y+=Nt,Nt<tt&&(tt=Nt),Nt>it&&(it=Nt)}if(it-tt>xt.MIN_DYNAMIC_RANGE)for(gt++,Ot+=f;gt<xt.BLOCK_SIZE;gt++,Ot+=f)for(let Lt=0;Lt<xt.BLOCK_SIZE;Lt++)Y+=s[Ot+Lt]&255}let lt=Y>>xt.BLOCK_SIZE_POWER*2;if(it-tt<=xt.MIN_DYNAMIC_RANGE&&(lt=tt/2,S>0&&P>0)){const gt=(C[S-1][P]+2*C[S][P-1]+C[S-1][P-1])/4;tt<gt&&(lt=gt)}C[S][P]=lt}}return C}}xt.BLOCK_SIZE_POWER=3,xt.BLOCK_SIZE=1<<xt.BLOCK_SIZE_POWER,xt.BLOCK_SIZE_MASK=xt.BLOCK_SIZE-1,xt.MINIMUM_DIMENSION=xt.BLOCK_SIZE*5,xt.MIN_DYNAMIC_RANGE=24;class Ft{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,c,f){throw new et("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new et("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new et("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new X;for(let c=0;c<this.height;c++){const f=this.getRow(c,s);for(let d=0;d<this.width;d++){const p=f[d]&255;let x;p<64?x="#":p<128?x="+":p<192?x=".":x=" ",o.append(x)}o.append(`
`)}return o.toString()}}class $t extends Ft{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const c=this.delegate.getRow(s,o),f=this.getWidth();for(let d=0;d<f;d++)c[d]=255-(c[d]&255);return c}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(o);for(let f=0;f<o;f++)c[f]=255-(s[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,c,f){return new $t(this.delegate.crop(s,o,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $t(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $t(this.delegate.rotateCounterClockwise45())}}class $ extends Ft{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=$.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return $.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,c){const f=new Uint8ClampedArray(o*c);for(let d=0,p=0,x=s.length;d<x;d+=4,p++){let C;if(s[d+3]===0)C=255;else{const N=s[d],P=s[d+1],L=s[d+2];C=306*N+601*P+117*L+512>>10}f[p]=C}return f}getRow(s,o){if(s<0||s>=this.getHeight())throw new b("Requested row is outside the image: "+s);const c=this.getWidth(),f=s*c;return o===null?o=this.buffer.slice(f,f+c):(o.length<c&&(o=new Uint8ClampedArray(c)),o.set(this.buffer.slice(f,f+c))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,c,f){return super.crop(s,o,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),c=o.getContext("2d"),f=s*$.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*p),C=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*p);return o.width=x,o.height=C,c.translate(x/2,C/2),c.rotate(f),c.drawImage(this.canvas,d/-2,p/-2),this.buffer=$.makeBufferFromCanvasImageData(o),this}invert(){return new $t(this)}}$.DEGREE_TO_RADIANS=Math.PI/180;class St{constructor(s,o,c){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Bt=(globalThis||Wf||self||window||void 0)&&(globalThis||Wf||self||window||void 0).__awaiter||function(O,s,o,c){function f(d){return d instanceof o?d:new o(function(p){p(d)})}return new(o||(o=Promise))(function(d,p){function x(N){try{S(c.next(N))}catch(P){p(P)}}function C(N){try{S(c.throw(N))}catch(P){p(P)}}function S(N){N.done?d(N.value):f(N.value).then(x,C)}S((c=c.apply(O,s||[])).next())})};class Vt{constructor(s,o=500,c){this.reader=s,this.timeBetweenScansMillis=o,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Bt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const c of s){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const d=c.deviceId||c.id,p=c.label||`Video device ${o.length+1}`,x=c.groupId,C={deviceId:d,label:p,kind:f,groupId:x};o.push(C)}return o})}getVideoInputDevices(){return Bt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new St(o.deviceId,o.label))})}findDeviceById(s){return Bt(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return Bt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return Bt(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(s,o){return Bt(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,o)})}decodeOnceFromStream(s,o){return Bt(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,o,c){return Bt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,c)})}decodeFromVideoDevice(s,o,c){return Bt(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,c)})}decodeFromConstraints(s,o,c){return Bt(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,o,c)})}decodeFromStream(s,o,c){return Bt(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return Bt(this,void 0,void 0,function*(){const c=this.prepareVideoElement(o);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((o,c)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Bt(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const c=document.getElementById(s);if(!c)throw new _(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==o.toLowerCase())throw new _(`element with id '${s}' must be an ${o} element`);return c}decodeFromImage(s,o){if(!s&&!o)throw new _("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new _("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,c){if(s===void 0&&o===void 0)throw new _("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new _("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let c;return this.isImageLoaded(o)?c=this.decodeOnce(o,!1,!0):c=this._decodeOnLoadImage(o),c}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,o)}_decodeFromVideoElementSetup(s){if(!s)throw new _("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new _("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const c=this._decodeOnLoadImage(o);return o.src=s,c}decodeFromVideoUrl(s){if(!s)throw new _("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElement(o);return o.src=s,c}decodeFromVideoUrlContinuously(s,o){if(!s)throw new _("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,o);return c.src=s,f}_decodeOnLoadImage(s){return new Promise((o,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Bt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return Bt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,c=!0){this._stopAsyncDecode=!1;const f=(d,p)=>{if(this._stopAsyncDecode){p(new ht("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(s);d(x)}catch(x){const C=o&&x instanceof ht,N=(x instanceof k||x instanceof H)&&c;if(C||N)return setTimeout(f,this._timeBetweenDecodingAttempts,d,p);p(x)}};return new Promise((d,p)=>f(d,p))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);o(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof k||f instanceof H,p=f instanceof ht;(d||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,c){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,c=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),c=new $(o),f=new xt(c);return new R(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let c,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),o.style.width=c+"px",o.style.height=f+"px",o.width=c,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class zt{constructor(s,o,c=o==null?0:8*o.length,f,d,p=q.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=c,this.resultPoints=f,this.format=d,this.timestamp=p,this.text=s,this.rawBytes=o,c==null?this.numBits=o==null?0:8*o.length:this.numBits=c,this.resultPoints=f,this.format=d,this.resultMetadata=null,p==null?this.timestamp=q.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const c=new Array(o.length+s.length);q.arraycopy(o,0,c,0,o.length),q.arraycopy(s,0,c,o.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ee;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ee||(Ee={}));var Mt=Ee,Yn;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Yn||(Yn={}));var ce=Yn;class vi{constructor(s,o,c,f,d=-1,p=-1){this.rawBytes=s,this.text=o,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class us{exp(s){return this.expTable[s]}log(s){if(s===0)throw new b;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class Xn{constructor(s,o){if(o.length===0)throw new b;this.field=s;const c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),q.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let c;if(s===1){c=0;for(let p=0,x=o.length;p!==x;p++){const C=o[p];c=us.addOrSubtract(c,C)}return c}c=o[0];const f=o.length,d=this.field;for(let p=1;p<f;p++)c=us.addOrSubtract(d.multiply(s,c),o[p]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){const p=o;o=c,c=p}let f=new Int32Array(c.length);const d=c.length-o.length;q.arraycopy(c,0,f,0,d);for(let p=d;p<c.length;p++)f[p]=us.addOrSubtract(o[p-d],c[p]);return new Xn(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,c=o.length,f=s.coefficients,d=f.length,p=new Int32Array(c+d-1),x=this.field;for(let C=0;C<c;C++){const S=o[C];for(let N=0;N<d;N++)p[C+N]=us.addOrSubtract(p[C+N],x.multiply(S,f[N]))}return new Xn(x,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,c=this.field,f=new Int32Array(o),d=this.coefficients;for(let p=0;p<o;p++)f[p]=c.multiply(d[p],s);return new Xn(c,f)}multiplyByMonomial(s,o){if(s<0)throw new b;if(o===0)return this.field.getZero();const c=this.coefficients,f=c.length,d=new Int32Array(f+s),p=this.field;for(let x=0;x<f;x++)d[x]=p.multiply(c[x],o);return new Xn(p,d)}divide(s){if(!this.field.equals(s.field))throw new b("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new b("Divide by 0");const o=this.field;let c=o.getZero(),f=this;const d=s.getCoefficient(s.getDegree()),p=o.inverse(d);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const x=f.getDegree()-s.getDegree(),C=o.multiply(f.getCoefficient(f.getDegree()),p),S=s.multiplyByMonomial(x,C),N=o.buildMonomial(x,C);c=c.addOrSubtract(N),f=f.addOrSubtract(S)}return[c,f]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),o===0||c!==1){const f=this.field.log(c);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class hs extends y{}hs.kind="ArithmeticException";class we extends us{constructor(s,o,c){super(),this.primitive=s,this.size=o,this.generatorBase=c;const f=new Int32Array(o);let d=1;for(let x=0;x<o;x++)f[x]=d,d*=2,d>=o&&(d^=s,d&=o-1);this.expTable=f;const p=new Int32Array(o);for(let x=0;x<o-1;x++)p[f[x]]=x;this.logTable=p,this.zero=new Xn(this,Int32Array.from([0])),this.one=new Xn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new b;if(o===0)return this.zero;const c=new Int32Array(s+1);return c[0]=o,new Xn(this,c)}inverse(s){if(s===0)throw new hs;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;class Ar extends y{}Ar.kind="ReedSolomonException";class ar extends y{}ar.kind="IllegalStateException";class fs{constructor(s){this.field=s}decode(s,o){const c=this.field,f=new Xn(c,s),d=new Int32Array(o);let p=!0;for(let Y=0;Y<o;Y++){const tt=f.evaluateAt(c.exp(Y+c.getGeneratorBase()));d[d.length-1-Y]=tt,tt!==0&&(p=!1)}if(p)return;const x=new Xn(c,d),C=this.runEuclideanAlgorithm(c.buildMonomial(o,1),x,o),S=C[0],N=C[1],P=this.findErrorLocations(S),L=this.findErrorMagnitudes(N,P);for(let Y=0;Y<P.length;Y++){const tt=s.length-1-c.log(P[Y]);if(tt<0)throw new Ar("Bad error location");s[tt]=we.addOrSubtract(s[tt],L[Y])}}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){const Y=s;s=o,o=Y}const f=this.field;let d=s,p=o,x=f.getZero(),C=f.getOne();for(;p.getDegree()>=(c/2|0);){let Y=d,tt=x;if(d=p,x=C,d.isZero())throw new Ar("r_{i-1} was zero");p=Y;let it=f.getZero();const lt=d.getCoefficient(d.getDegree()),gt=f.inverse(lt);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Ot=p.getDegree()-d.getDegree(),Lt=f.multiply(p.getCoefficient(p.getDegree()),gt);it=it.addOrSubtract(f.buildMonomial(Ot,Lt)),p=p.addOrSubtract(d.multiplyByMonomial(Ot,Lt))}if(C=it.multiply(x).addOrSubtract(tt),p.getDegree()>=d.getDegree())throw new ar("Division algorithm failed to reduce polynomial?")}const S=C.getCoefficient(0);if(S===0)throw new Ar("sigmaTilde(0) was zero");const N=f.inverse(S),P=C.multiplyScalar(N),L=p.multiplyScalar(N);return[P,L]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const c=new Int32Array(o);let f=0;const d=this.field;for(let p=1;p<d.getSize()&&f<o;p++)s.evaluateAt(p)===0&&(c[f]=d.inverse(p),f++);if(f!==o)throw new Ar("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,o){const c=o.length,f=new Int32Array(c),d=this.field;for(let p=0;p<c;p++){const x=d.inverse(o[p]);let C=1;for(let S=0;S<c;S++)if(p!==S){const N=d.multiply(o[S],x),P=(N&1)===0?N|1:N&-2;C=d.multiply(C,P)}f[p]=d.multiply(s.evaluateAt(x),d.inverse(C)),d.getGeneratorBase()!==0&&(f[p]=d.multiply(f[p],x))}return f}}var Fe;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(Fe||(Fe={}));class qe{decode(s){this.ddata=s;let o=s.getBits(),c=this.extractBits(o),f=this.correctBits(c),d=qe.convertBoolArrayToByteArray(f),p=qe.getEncodedData(f),x=new vi(d,p,null,null);return x.setNumBits(f.length),x}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,c=Fe.UPPER,f=Fe.UPPER,d="",p=0;for(;p<o;)if(f===Fe.BINARY){if(o-p<5)break;let x=qe.readCode(s,p,5);if(p+=5,x===0){if(o-p<11)break;x=qe.readCode(s,p,11)+31,p+=11}for(let C=0;C<x;C++){if(o-p<8){p=o;break}const S=qe.readCode(s,p,8);d+=J.castAsNonUtf8Char(S),p+=8}f=c}else{let x=f===Fe.DIGIT?4:5;if(o-p<x)break;let C=qe.readCode(s,p,x);p+=x;let S=qe.getCharacter(f,C);S.startsWith("CTRL_")?(c=f,f=qe.getTable(S.charAt(5)),S.charAt(6)==="L"&&(c=f)):(d+=S,f=c)}return d}static getTable(s){switch(s){case"L":return Fe.LOWER;case"P":return Fe.PUNCT;case"M":return Fe.MIXED;case"D":return Fe.DIGIT;case"B":return Fe.BINARY;case"U":default:return Fe.UPPER}}static getCharacter(s,o){switch(s){case Fe.UPPER:return qe.UPPER_TABLE[o];case Fe.LOWER:return qe.LOWER_TABLE[o];case Fe.MIXED:return qe.MIXED_TABLE[o];case Fe.PUNCT:return qe.PUNCT_TABLE[o];case Fe.DIGIT:return qe.DIGIT_TABLE[o];default:throw new ar("Bad table")}}correctBits(s){let o,c;this.ddata.getNbLayers()<=2?(c=6,o=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,o=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,o=we.AZTEC_DATA_10):(c=12,o=we.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=s.length/c;if(d<f)throw new H;let p=s.length%c,x=new Int32Array(d);for(let L=0;L<d;L++,p+=c)x[L]=qe.readCode(s,p,c);try{new fs(o).decode(x,d-f)}catch(L){throw new H(L)}let C=(1<<c)-1,S=0;for(let L=0;L<f;L++){let Y=x[L];if(Y===0||Y===C)throw new H;(Y===1||Y===C-1)&&S++}let N=new Array(f*c-S),P=0;for(let L=0;L<f;L++){let Y=x[L];if(Y===1||Y===C-1)N.fill(Y>1,P,P+c-1),P+=c-1;else for(let tt=c-1;tt>=0;--tt)N[P++]=(Y&1<<tt)!==0}return N}extractBits(s){let o=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(o?11:14)+c*4,d=new Int32Array(f),p=new Array(this.totalBitsInLayer(c,o));if(o)for(let x=0;x<d.length;x++)d[x]=x;else{let x=f+1+2*W.truncDivision(W.truncDivision(f,2)-1,15),C=f/2,S=W.truncDivision(x,2);for(let N=0;N<C;N++){let P=N+W.truncDivision(N,15);d[C-N-1]=S-P-1,d[C+N]=S+P+1}}for(let x=0,C=0;x<c;x++){let S=(c-x)*4+(o?9:12),N=x*2,P=f-1-N;for(let L=0;L<S;L++){let Y=L*2;for(let tt=0;tt<2;tt++)p[C+Y+tt]=s.get(d[N+tt],d[N+L]),p[C+2*S+Y+tt]=s.get(d[N+L],d[P-tt]),p[C+4*S+Y+tt]=s.get(d[P-tt],d[P-L]),p[C+6*S+Y+tt]=s.get(d[P-L],d[N+tt])}C+=S*8}return p}static readCode(s,o,c){let f=0;for(let d=o;d<o+c;d++)f<<=1,s[d]&&(f|=1);return f}static readByte(s,o){let c=s.length-o;return c>=8?qe.readCode(s,o,8):qe.readCode(s,o,c)<<8-c}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let c=0;c<o.length;c++)o[c]=qe.readByte(s,8*c);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Zt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,c,f){const d=s-c,p=o-f;return Math.sqrt(d*d+p*p)}static sum(s){let o=0;for(let c=0,f=s.length;c!==f;c++){const d=s[c];o+=d}return o}}class In{static floatToIntBits(s){return s}}In.MAX_VALUE=Number.MAX_SAFE_INTEGER;class jt{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof jt){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*In.floatToIntBits(this.x)+In.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let d,p,x;if(c>=o&&c>=f?(p=s[0],d=s[1],x=s[2]):f>=c&&f>=o?(p=s[1],d=s[0],x=s[2]):(p=s[2],d=s[0],x=s[1]),this.crossProductZ(d,p,x)<0){const C=d;d=x,x=C}s[0]=d,s[1]=p,s[2]=x}static distance(s,o){return Zt.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,c){const f=o.x,d=o.y;return(c.x-f)*(s.y-d)-(c.y-d)*(s.x-f)}}class Ka{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Qa extends Ka{constructor(s,o,c,f,d){super(s,o),this.compact=c,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class xr{constructor(s,o,c,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=xr.INIT_SIZE),c==null&&(c=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const d=o/2|0;if(this.leftInit=c-d,this.rightInit=c+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ht}detect(){let s=this.leftInit,o=this.rightInit,c=this.upInit,f=this.downInit,d=!1,p=!0,x=!1,C=!1,S=!1,N=!1,P=!1;const L=this.width,Y=this.height;for(;p;){p=!1;let tt=!0;for(;(tt||!C)&&o<L;)tt=this.containsBlackPoint(c,f,o,!1),tt?(o++,p=!0,C=!0):C||o++;if(o>=L){d=!0;break}let it=!0;for(;(it||!S)&&f<Y;)it=this.containsBlackPoint(s,o,f,!0),it?(f++,p=!0,S=!0):S||f++;if(f>=Y){d=!0;break}let lt=!0;for(;(lt||!N)&&s>=0;)lt=this.containsBlackPoint(c,f,s,!1),lt?(s--,p=!0,N=!0):N||s--;if(s<0){d=!0;break}let gt=!0;for(;(gt||!P)&&c>=0;)gt=this.containsBlackPoint(s,o,c,!0),gt?(c--,p=!0,P=!0):P||c--;if(c<0){d=!0;break}p&&(x=!0)}if(!d&&x){const tt=o-s;let it=null;for(let Lt=1;it===null&&Lt<tt;Lt++)it=this.getBlackPointOnSegment(s,f-Lt,s+Lt,f);if(it==null)throw new ht;let lt=null;for(let Lt=1;lt===null&&Lt<tt;Lt++)lt=this.getBlackPointOnSegment(s,c+Lt,s+Lt,c);if(lt==null)throw new ht;let gt=null;for(let Lt=1;gt===null&&Lt<tt;Lt++)gt=this.getBlackPointOnSegment(o,c+Lt,o-Lt,c);if(gt==null)throw new ht;let Ot=null;for(let Lt=1;Ot===null&&Lt<tt;Lt++)Ot=this.getBlackPointOnSegment(o,f-Lt,o-Lt,f);if(Ot==null)throw new ht;return this.centerEdges(Ot,it,gt,lt)}else throw new ht}getBlackPointOnSegment(s,o,c,f){const d=Zt.round(Zt.distance(s,o,c,f)),p=(c-s)/d,x=(f-o)/d,C=this.image;for(let S=0;S<d;S++){const N=Zt.round(s+S*p),P=Zt.round(o+S*x);if(C.get(N,P))return new jt(N,P)}return null}centerEdges(s,o,c,f){const d=s.getX(),p=s.getY(),x=o.getX(),C=o.getY(),S=c.getX(),N=c.getY(),P=f.getX(),L=f.getY(),Y=xr.CORR;return d<this.width/2?[new jt(P-Y,L+Y),new jt(x+Y,C+Y),new jt(S-Y,N-Y),new jt(d+Y,p-Y)]:[new jt(P+Y,L+Y),new jt(x+Y,C-Y),new jt(S-Y,N+Y),new jt(d-Y,p-Y)]}containsBlackPoint(s,o,c,f){const d=this.image;if(f){for(let p=s;p<=o;p++)if(d.get(p,c))return!0}else for(let p=s;p<=o;p++)if(d.get(c,p))return!0;return!1}}xr.INIT_SIZE=10,xr.CORR=1;class ds{static checkAndNudgePoints(s,o){const c=s.getWidth(),f=s.getHeight();let d=!0;for(let p=0;p<o.length&&d;p+=2){const x=Math.floor(o[p]),C=Math.floor(o[p+1]);if(x<-1||x>c||C<-1||C>f)throw new ht;d=!1,x===-1?(o[p]=0,d=!0):x===c&&(o[p]=c-1,d=!0),C===-1?(o[p+1]=0,d=!0):C===f&&(o[p+1]=f-1,d=!0)}d=!0;for(let p=o.length-2;p>=0&&d;p-=2){const x=Math.floor(o[p]),C=Math.floor(o[p+1]);if(x<-1||x>c||C<-1||C>f)throw new ht;d=!1,x===-1?(o[p]=0,d=!0):x===c&&(o[p]=c-1,d=!0),C===-1?(o[p+1]=0,d=!0):C===f&&(o[p+1]=f-1,d=!0)}}}class ei{constructor(s,o,c,f,d,p,x,C,S){this.a11=s,this.a21=o,this.a31=c,this.a12=f,this.a22=d,this.a32=p,this.a13=x,this.a23=C,this.a33=S}static quadrilateralToQuadrilateral(s,o,c,f,d,p,x,C,S,N,P,L,Y,tt,it,lt){const gt=ei.quadrilateralToSquare(s,o,c,f,d,p,x,C);return ei.squareToQuadrilateral(S,N,P,L,Y,tt,it,lt).times(gt)}transformPoints(s){const o=s.length,c=this.a11,f=this.a12,d=this.a13,p=this.a21,x=this.a22,C=this.a23,S=this.a31,N=this.a32,P=this.a33;for(let L=0;L<o;L+=2){const Y=s[L],tt=s[L+1],it=d*Y+C*tt+P;s[L]=(c*Y+p*tt+S)/it,s[L+1]=(f*Y+x*tt+N)/it}}transformPointsWithValues(s,o){const c=this.a11,f=this.a12,d=this.a13,p=this.a21,x=this.a22,C=this.a23,S=this.a31,N=this.a32,P=this.a33,L=s.length;for(let Y=0;Y<L;Y++){const tt=s[Y],it=o[Y],lt=d*tt+C*it+P;s[Y]=(c*tt+p*it+S)/lt,o[Y]=(f*tt+x*it+N)/lt}}static squareToQuadrilateral(s,o,c,f,d,p,x,C){const S=s-c+d-x,N=o-f+p-C;if(S===0&&N===0)return new ei(c-s,d-c,s,f-o,p-f,o,0,0,1);{const P=c-d,L=x-d,Y=f-p,tt=C-p,it=P*tt-L*Y,lt=(S*tt-L*N)/it,gt=(P*N-S*Y)/it;return new ei(c-s+lt*c,x-s+gt*x,s,f-o+lt*f,C-o+gt*C,o,lt,gt,1)}}static quadrilateralToSquare(s,o,c,f,d,p,x,C){return ei.squareToQuadrilateral(s,o,c,f,d,p,x,C).buildAdjoint()}buildAdjoint(){return new ei(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new ei(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class li extends ds{sampleGrid(s,o,c,f,d,p,x,C,S,N,P,L,Y,tt,it,lt,gt,Ot,Lt){const Nt=ei.quadrilateralToQuadrilateral(f,d,p,x,C,S,N,P,L,Y,tt,it,lt,gt,Ot,Lt);return this.sampleGridWithTransform(s,o,c,Nt)}sampleGridWithTransform(s,o,c,f){if(o<=0||c<=0)throw new ht;const d=new Jt(o,c),p=new Float32Array(2*o);for(let x=0;x<c;x++){const C=p.length,S=x+.5;for(let N=0;N<C;N+=2)p[N]=N/2+.5,p[N+1]=S;f.transformPoints(p),ds.checkAndNudgePoints(s,p);try{for(let N=0;N<C;N+=2)s.get(Math.floor(p[N]),Math.floor(p[N+1]))&&d.set(N/2,x)}catch{throw new ht}}return d}}class Wn{static setGridSampler(s){Wn.gridSampler=s}static getInstance(){return Wn.gridSampler}}Wn.gridSampler=new li;class Ye{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new jt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Gl{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),c=this.getBullsEyeCorners(o);if(s){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new Qa(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ht;let o=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(c,o);let f=0;for(let p=0;p<4;p++){let x=c[(this.shift+p)%4];this.compact?(f<<=7,f+=x>>1&127):(f<<=10,f+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,o){let c=0;s.forEach((f,d,p)=>{let x=(f>>o-2<<1)+(f&1);c=(c<<3)+x}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(W.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new ht}getCorrectedParameterData(s,o){let c,f;o?(c=7,f=2):(c=10,f=4);let d=c-f,p=new Int32Array(c);for(let C=c-1;C>=0;--C)p[C]=s&15,s>>=4;try{new fs(we.AZTEC_PARAM).decode(p,d)}catch{throw new ht}let x=0;for(let C=0;C<f;C++)x=(x<<4)+p[C];return x}getBullsEyeCorners(s){let o=s,c=s,f=s,d=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(o,p,1,-1),L=this.getFirstDifferent(c,p,1,1),Y=this.getFirstDifferent(f,p,-1,1),tt=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let it=this.distancePoint(tt,P)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(it<.75||it>1.25||!this.isWhiteOrBlackRectangle(P,L,Y,tt))break}o=P,c=L,f=Y,d=tt,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ht;this.compact=this.nbCenterLayers===5;let x=new jt(o.getX()+.5,o.getY()-.5),C=new jt(c.getX()+.5,c.getY()+.5),S=new jt(f.getX()-.5,f.getY()+.5),N=new jt(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,C,S,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,c,f;try{let x=new xr(this.image).detect();s=x[0],o=x[1],c=x[2],f=x[3]}catch{let C=this.image.getWidth()/2,S=this.image.getHeight()/2;s=this.getFirstDifferent(new Ye(C+7,S-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Ye(C+7,S+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ye(C-7,S+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Ye(C-7,S-7),!1,-1,-1).toResultPoint()}let d=Zt.round((s.getX()+f.getX()+o.getX()+c.getX())/4),p=Zt.round((s.getY()+f.getY()+o.getY()+c.getY())/4);try{let x=new xr(this.image,15,d,p).detect();s=x[0],o=x[1],c=x[2],f=x[3]}catch{s=this.getFirstDifferent(new Ye(d+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Ye(d+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Ye(d-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Ye(d-7,p-7),!1,-1,-1).toResultPoint()}return d=Zt.round((s.getX()+f.getX()+o.getX()+c.getX())/4),p=Zt.round((s.getY()+f.getY()+o.getY()+c.getY())/4),new Ye(d,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,c,f,d){let p=Wn.getInstance(),x=this.getDimension(),C=x/2-this.nbCenterLayers,S=x/2+this.nbCenterLayers;return p.sampleGrid(s,x,x,C,C,S,C,S,S,C,S,o.getX(),o.getY(),c.getX(),c.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(s,o,c){let f=0,d=this.distanceResultPoint(s,o),p=d/c,x=s.getX(),C=s.getY(),S=p*(o.getX()-s.getX())/d,N=p*(o.getY()-s.getY())/d;for(let P=0;P<c;P++)this.image.get(Zt.round(x+P*S),Zt.round(C+P*N))&&(f|=1<<c-P-1);return f}isWhiteOrBlackRectangle(s,o,c,f){let d=3;s=new Ye(s.getX()-d,s.getY()+d),o=new Ye(o.getX()-d,o.getY()-d),c=new Ye(c.getX()+d,c.getY()-d),f=new Ye(f.getX()+d,f.getY()+d);let p=this.getColor(f,s);if(p===0)return!1;let x=this.getColor(s,o);return x!==p||(x=this.getColor(o,c),x!==p)?!1:(x=this.getColor(c,f),x===p)}getColor(s,o){let c=this.distancePoint(s,o),f=(o.getX()-s.getX())/c,d=(o.getY()-s.getY())/c,p=0,x=s.getX(),C=s.getY(),S=this.image.get(s.getX(),s.getY()),N=Math.ceil(c);for(let L=0;L<N;L++)x+=f,C+=d,this.image.get(Zt.round(x),Zt.round(C))!==S&&p++;let P=p/c;return P>.1&&P<.9?0:P<=.1===S?1:-1}getFirstDifferent(s,o,c,f){let d=s.getX()+c,p=s.getY()+f;for(;this.isValid(d,p)&&this.image.get(d,p)===o;)d+=c,p+=f;for(d-=c,p-=f;this.isValid(d,p)&&this.image.get(d,p)===o;)d+=c;for(d-=c;this.isValid(d,p)&&this.image.get(d,p)===o;)p+=f;return p-=f,new Ye(d,p)}expandSquare(s,o,c){let f=c/(2*o),d=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),x=(s[0].getX()+s[2].getX())/2,C=(s[0].getY()+s[2].getY())/2,S=new jt(x+f*d,C+f*p),N=new jt(x-f*d,C-f*p);d=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),x=(s[1].getX()+s[3].getX())/2,C=(s[1].getY()+s[3].getY())/2;let P=new jt(x+f*d,C+f*p),L=new jt(x-f*d,C-f*p);return[S,P,N,L]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=Zt.round(s.getX()),c=Zt.round(s.getY());return this.isValid(o,c)}distancePoint(s,o){return Zt.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return Zt.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class ca{decode(s,o=null){let c=null,f=new Gl(s.getBlackMatrix()),d=null,p=null;try{let N=f.detectMirror(!1);d=N.getPoints(),this.reportFoundResultPoints(o,d),p=new qe().decode(N)}catch(N){c=N}if(p==null)try{let N=f.detectMirror(!0);d=N.getPoints(),this.reportFoundResultPoints(o,d),p=new qe().decode(N)}catch(N){throw c??N}let x=new zt(p.getText(),p.getRawBytes(),p.getNumBits(),d,Mt.AZTEC,q.currentTimeMillis()),C=p.getByteSegments();C!=null&&x.putMetadata(ce.BYTE_SEGMENTS,C);let S=p.getECLevel();return S!=null&&x.putMetadata(ce.ERROR_CORRECTION_LEVEL,S),x}reportFoundResultPoints(s,o){if(s!=null){let c=s.get(Rt.NEED_RESULT_POINT_CALLBACK);c!=null&&o.forEach((f,d,p)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class ql extends Vt{constructor(s=500){super(new ca,s)}}class Xe{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get(Rt.TRY_HARDER)===!0&&s.isRotateSupported()){const d=s.rotateCounterClockwise(),p=this.doDecode(d,o),x=p.getResultMetadata();let C=270;x!==null&&x.get(ce.ORIENTATION)===!0&&(C=C+x.get(ce.ORIENTATION)%360),p.putMetadata(ce.ORIENTATION,C);const S=p.getResultPoints();if(S!==null){const N=d.getHeight();for(let P=0;P<S.length;P++)S[P]=new jt(N-S[P].getY()-1,S[P].getX())}return p}else throw new ht}}reset(){}doDecode(s,o){const c=s.getWidth(),f=s.getHeight();let d=new yt(c);const p=o&&o.get(Rt.TRY_HARDER)===!0,x=Math.max(1,f>>(p?8:5));let C;p?C=f:C=15;const S=Math.trunc(f/2);for(let N=0;N<C;N++){const P=Math.trunc((N+1)/2),L=(N&1)===0,Y=S+x*(L?P:-P);if(Y<0||Y>=f)break;try{d=s.getBlackRow(Y,d)}catch{continue}for(let tt=0;tt<2;tt++){if(tt===1&&(d.reverse(),o&&o.get(Rt.NEED_RESULT_POINT_CALLBACK)===!0)){const it=new Map;o.forEach((lt,gt)=>it.set(gt,lt)),it.delete(Rt.NEED_RESULT_POINT_CALLBACK),o=it}try{const it=this.decodeRow(Y,d,o);if(tt===1){it.putMetadata(ce.ORIENTATION,180);const lt=it.getResultPoints();lt!==null&&(lt[0]=new jt(c-lt[0].getX()-1,lt[0].getY()),lt[1]=new jt(c-lt[1].getX()-1,lt[1].getY()))}return it}catch{}}}throw new ht}static recordPattern(s,o,c){const f=c.length;for(let S=0;S<f;S++)c[S]=0;const d=s.getSize();if(o>=d)throw new ht;let p=!s.get(o),x=0,C=o;for(;C<d;){if(s.get(C)!==p)c[x]++;else{if(++x===f)break;c[x]=1,p=!p}C++}if(!(x===f||x===f-1&&C===d))throw new ht}static recordPatternInReverse(s,o,c){let f=c.length,d=s.get(o);for(;o>0&&f>=0;)s.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new ht;Xe.recordPattern(s,o+1,c)}static patternMatchVariance(s,o,c){const f=s.length;let d=0,p=0;for(let S=0;S<f;S++)d+=s[S],p+=o[S];if(d<p)return Number.POSITIVE_INFINITY;const x=d/p;c*=x;let C=0;for(let S=0;S<f;S++){const N=s[S],P=o[S]*x,L=N>P?N-P:P-N;if(L>c)return Number.POSITIVE_INFINITY;C+=L}return C/d}}class kt extends Xe{static findStartPattern(s){const o=s.getSize(),c=s.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),p=c,x=!1;const C=6;for(let S=c;S<o;S++)if(s.get(S)!==x)d[f]++;else{if(f===C-1){let N=kt.MAX_AVG_VARIANCE,P=-1;for(let L=kt.CODE_START_A;L<=kt.CODE_START_C;L++){const Y=Xe.patternMatchVariance(d,kt.CODE_PATTERNS[L],kt.MAX_INDIVIDUAL_VARIANCE);Y<N&&(N=Y,P=L)}if(P>=0&&s.isRange(Math.max(0,p-(S-p)/2),p,!1))return Int32Array.from([p,S,P]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,x=!x}throw new ht}static decodeCode(s,o,c){Xe.recordPattern(s,c,o);let f=kt.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<kt.CODE_PATTERNS.length;p++){const x=kt.CODE_PATTERNS[p],C=this.patternMatchVariance(o,x,kt.MAX_INDIVIDUAL_VARIANCE);C<f&&(f=C,d=p)}if(d>=0)return d;throw new ht}decodeRow(s,o,c){const f=c&&c.get(Rt.ASSUME_GS1)===!0,d=kt.findStartPattern(o),p=d[2];let x=0;const C=new Uint8Array(20);C[x++]=p;let S;switch(p){case kt.CODE_START_A:S=kt.CODE_CODE_A;break;case kt.CODE_START_B:S=kt.CODE_CODE_B;break;case kt.CODE_START_C:S=kt.CODE_CODE_C;break;default:throw new H}let N=!1,P=!1,L="",Y=d[0],tt=d[1];const it=Int32Array.from([0,0,0,0,0,0]);let lt=0,gt=0,Ot=p,Lt=0,Nt=!0,ge=!1,he=!1;for(;!N;){const Fs=P;switch(P=!1,lt=gt,gt=kt.decodeCode(o,it,tt),C[x++]=gt,gt!==kt.CODE_STOP&&(Nt=!0),gt!==kt.CODE_STOP&&(Lt++,Ot+=Lt*gt),Y=tt,tt+=it.reduce((Or,Xh)=>Or+Xh,0),gt){case kt.CODE_START_A:case kt.CODE_START_B:case kt.CODE_START_C:throw new H}switch(S){case kt.CODE_CODE_A:if(gt<64)he===ge?L+=String.fromCharCode(32+gt):L+=String.fromCharCode(32+gt+128),he=!1;else if(gt<96)he===ge?L+=String.fromCharCode(gt-64):L+=String.fromCharCode(gt+64),he=!1;else switch(gt!==kt.CODE_STOP&&(Nt=!1),gt){case kt.CODE_FNC_1:f&&(L.length===0?L+="]C1":L+="");break;case kt.CODE_FNC_2:case kt.CODE_FNC_3:break;case kt.CODE_FNC_4_A:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case kt.CODE_SHIFT:P=!0,S=kt.CODE_CODE_B;break;case kt.CODE_CODE_B:S=kt.CODE_CODE_B;break;case kt.CODE_CODE_C:S=kt.CODE_CODE_C;break;case kt.CODE_STOP:N=!0;break}break;case kt.CODE_CODE_B:if(gt<96)he===ge?L+=String.fromCharCode(32+gt):L+=String.fromCharCode(32+gt+128),he=!1;else switch(gt!==kt.CODE_STOP&&(Nt=!1),gt){case kt.CODE_FNC_1:f&&(L.length===0?L+="]C1":L+="");break;case kt.CODE_FNC_2:case kt.CODE_FNC_3:break;case kt.CODE_FNC_4_B:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case kt.CODE_SHIFT:P=!0,S=kt.CODE_CODE_A;break;case kt.CODE_CODE_A:S=kt.CODE_CODE_A;break;case kt.CODE_CODE_C:S=kt.CODE_CODE_C;break;case kt.CODE_STOP:N=!0;break}break;case kt.CODE_CODE_C:if(gt<100)gt<10&&(L+="0"),L+=gt;else switch(gt!==kt.CODE_STOP&&(Nt=!1),gt){case kt.CODE_FNC_1:f&&(L.length===0?L+="]C1":L+="");break;case kt.CODE_CODE_A:S=kt.CODE_CODE_A;break;case kt.CODE_CODE_B:S=kt.CODE_CODE_B;break;case kt.CODE_STOP:N=!0;break}break}Fs&&(S=S===kt.CODE_CODE_A?kt.CODE_CODE_B:kt.CODE_CODE_A)}const Ri=tt-Y;if(tt=o.getNextUnset(tt),!o.isRange(tt,Math.min(o.getSize(),tt+(tt-Y)/2),!1))throw new ht;if(Ot-=Lt*lt,Ot%103!==lt)throw new k;const ur=L.length;if(ur===0)throw new ht;ur>0&&Nt&&(S===kt.CODE_CODE_C?L=L.substring(0,ur-2):L=L.substring(0,ur-1));const Hi=(d[1]+d[0])/2,tn=Y+Ri/2,ui=C.length,Gi=new Uint8Array(ui);for(let Fs=0;Fs<ui;Fs++)Gi[Fs]=C[Fs];const Ta=[new jt(Hi,s),new jt(tn,s)];return new zt(L,Gi,0,Ta,Mt.CODE_128,new Date().getTime())}}kt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],kt.MAX_AVG_VARIANCE=.25,kt.MAX_INDIVIDUAL_VARIANCE=.7,kt.CODE_SHIFT=98,kt.CODE_CODE_C=99,kt.CODE_CODE_B=100,kt.CODE_CODE_A=101,kt.CODE_FNC_1=102,kt.CODE_FNC_2=97,kt.CODE_FNC_3=96,kt.CODE_FNC_4_A=101,kt.CODE_FNC_4_B=100,kt.CODE_START_A=103,kt.CODE_START_B=104,kt.CODE_START_C=105,kt.CODE_STOP=106;class We extends Xe{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=We.findAsteriskPattern(o,f),p=o.getNextSet(d[1]),x=o.getSize(),C,S;do{We.recordPattern(o,p,f);let it=We.toNarrowWidePattern(f);if(it<0)throw new ht;C=We.patternToChar(it),this.decodeRowResult+=C,S=p;for(let lt of f)p+=lt;p=o.getNextSet(p)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let it of f)N+=it;let P=p-S-N;if(p!==x&&P*2<N)throw new ht;if(this.usingCheckDigit){let it=this.decodeRowResult.length-1,lt=0;for(let gt=0;gt<it;gt++)lt+=We.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(gt));if(this.decodeRowResult.charAt(it)!==We.ALPHABET_STRING.charAt(lt%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,it)}if(this.decodeRowResult.length===0)throw new ht;let L;this.extendedMode?L=We.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let Y=(d[1]+d[0])/2,tt=S+N/2;return new zt(L,null,0,[new jt(Y,s),new jt(tt,s)],Mt.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let c=s.getSize(),f=s.getNextSet(0),d=0,p=f,x=!1,C=o.length;for(let S=f;S<c;S++)if(s.get(S)!==x)o[d]++;else{if(d===C-1){if(this.toNarrowWidePattern(o)===We.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((S-p)/2)),p,!1))return[p,S];p+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,x=!x}throw new ht}static toNarrowWidePattern(s){let o=s.length,c=0,f;do{let d=2147483647;for(let C of s)C<d&&C>c&&(d=C);c=d,f=0;let p=0,x=0;for(let C=0;C<o;C++){let S=s[C];S>c&&(x|=1<<o-1-C,f++,p+=S)}if(f===3){for(let C=0;C<o&&f>0;C++){let S=s[C];if(S>c&&(f--,S*2>=p))return-1}return x}}while(f>3);return-1}static patternToChar(s){for(let o=0;o<We.CHARACTER_ENCODINGS.length;o++)if(We.CHARACTER_ENCODINGS[o]===s)return We.ALPHABET_STRING.charAt(o);if(s===We.ASTERISK_ENCODING)return"*";throw new ht}static decodeExtended(s){let o=s.length,c="";for(let f=0;f<o;f++){let d=s.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=s.charAt(f+1),x="\0";switch(d){case"+":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")x=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")x=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")x=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")x="\0";else if(p==="V")x="@";else if(p==="W")x="`";else if(p==="X"||p==="Y"||p==="Z")x="";else throw new H;break;case"/":if(p>="A"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")x=":";else throw new H;break}c+=x,f++}else c+=d}return c}}We.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",We.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],We.ASTERISK_ENCODING=148;class Ae extends Xe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,c){let f=this.decodeStart(o),d=this.decodeEnd(o),p=new X;Ae.decodeMiddle(o,f[1],d[0],p);let x=p.toString(),C=null;c!=null&&(C=c.get(Rt.ALLOWED_LENGTHS)),C==null&&(C=Ae.DEFAULT_ALLOWED_LENGTHS);let S=x.length,N=!1,P=0;for(let tt of C){if(S===tt){N=!0;break}tt>P&&(P=tt)}if(!N&&S>P&&(N=!0),!N)throw new H;const L=[new jt(f[1],s),new jt(d[0],s)];return new zt(x,null,0,L,Mt.ITF,new Date().getTime())}static decodeMiddle(s,o,c,f){let d=new Int32Array(10),p=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),p.fill(0),x.fill(0);o<c;){Xe.recordPattern(s,o,d);for(let S=0;S<5;S++){let N=2*S;p[S]=d[N],x[S]=d[N+1]}let C=Ae.decodeDigit(p);f.append(C.toString()),C=this.decodeDigit(x),f.append(C.toString()),d.forEach(function(S){o+=S})}}decodeStart(s){let o=Ae.skipWhiteSpace(s),c=Ae.findGuardPattern(s,o,Ae.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,o){let c=this.narrowLineWidth*10;c=c<o?c:o;for(let f=o-1;c>0&&f>=0&&!s.get(f);f--)c--;if(c!==0)throw new ht}static skipWhiteSpace(s){const o=s.getSize(),c=s.getNextSet(0);if(c===o)throw new ht;return c}decodeEnd(s){s.reverse();try{let o=Ae.skipWhiteSpace(s),c;try{c=Ae.findGuardPattern(s,o,Ae.END_PATTERN_REVERSED[0])}catch(d){d instanceof ht&&(c=Ae.findGuardPattern(s,o,Ae.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let f=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-f,c}finally{s.reverse()}}static findGuardPattern(s,o,c){let f=c.length,d=new Int32Array(f),p=s.getSize(),x=!1,C=0,S=o;d.fill(0);for(let N=o;N<p;N++)if(s.get(N)!==x)d[C]++;else{if(C===f-1){if(Xe.patternMatchVariance(d,c,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return[S,N];S+=d[0]+d[1],q.arraycopy(d,2,d,0,C-1),d[C-1]=0,d[C]=0,C--}else C++;d[C]=1,x=!x}throw new ht}static decodeDigit(s){let o=Ae.MAX_AVG_VARIANCE,c=-1,f=Ae.PATTERNS.length;for(let d=0;d<f;d++){let p=Ae.PATTERNS[d],x=Xe.patternMatchVariance(s,p,Ae.MAX_INDIVIDUAL_VARIANCE);x<o?(o=x,c=d):x===o&&(c=-1)}if(c>=0)return c%10;throw new ht}}Ae.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ae.MAX_AVG_VARIANCE=.38,Ae.MAX_INDIVIDUAL_VARIANCE=.5,Ae.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ae.START_PATTERN=Int32Array.from([1,1,1,1]),Ae.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ke extends Xe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,c,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),c=Ke.findGuardPattern(s,f,!1,this.START_END_PATTERN,d);let p=c[0];f=c[1];let x=p-(f-p);x>=0&&(o=s.isRange(x,p,!1))}return c}static checkChecksum(s){return Ke.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return Ke.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let f=o-1;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}c*=3;for(let f=o-2;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}return(1e3-c)%10}static decodeEnd(s,o){return Ke.findGuardPattern(s,o,!1,Ke.START_END_PATTERN,new Int32Array(Ke.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,c,f){return this.findGuardPattern(s,o,c,f,new Int32Array(f.length))}static findGuardPattern(s,o,c,f,d){let p=s.getSize();o=c?s.getNextUnset(o):s.getNextSet(o);let x=0,C=o,S=f.length,N=c;for(let P=o;P<p;P++)if(s.get(P)!==N)d[x]++;else{if(x===S-1){if(Xe.patternMatchVariance(d,f,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return Int32Array.from([C,P]);C+=d[0]+d[1];let L=d.slice(2,d.length-1);for(let Y=0;Y<x-1;Y++)d[Y]=L[Y];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,N=!N}throw new ht}static decodeDigit(s,o,c,f){this.recordPattern(s,c,o);let d=this.MAX_AVG_VARIANCE,p=-1,x=f.length;for(let C=0;C<x;C++){let S=f[C],N=Xe.patternMatchVariance(o,S,Ke.MAX_INDIVIDUAL_VARIANCE);N<d&&(d=N,p=C)}if(p>=0)return p;throw new ht}}Ke.MAX_AVG_VARIANCE=.48,Ke.MAX_INDIVIDUAL_VARIANCE=.7,Ke.START_END_PATTERN=Int32Array.from([1,1,1]),Ke.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ke.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ke.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class qr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,c,f),p=f.toString(),x=qr.parseExtensionString(p),C=[new jt((c[0]+c[1])/2,s),new jt(d,s)],S=new zt(p,null,0,C,Mt.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1],x=0;for(let S=0;S<5&&p<d;S++){let N=Ke.decodeDigit(s,f,p,Ke.L_AND_G_PATTERNS);c+=String.fromCharCode(48+N%10);for(let P of f)p+=P;N>=10&&(x|=1<<4-S),S!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==5)throw new ht;let C=this.determineCheckDigit(x);if(qr.extensionChecksum(c.toString())!==C)throw new ht;return p}static extensionChecksum(s){let o=s.length,c=0;for(let f=o-2;f>=0;f-=2)c+=s.charAt(f).charCodeAt(0)-48;c*=3;for(let f=o-1;f>=0;f-=2)c+=s.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ht}static parseExtensionString(s){if(s.length!==5)return null;let o=qr.parseExtension5String(s);return o==null?null:new Map([[ce.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let c=parseInt(s.substring(1)),f=(c/100).toString(),d=c%100,p=d<10?"0"+d:d.toString();return o+f+"."+p}}class ua{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,c,f),p=f.toString(),x=ua.parseExtensionString(p),C=[new jt((c[0]+c[1])/2,s),new jt(d,s)],S=new zt(p,null,0,C,Mt.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&S.putAllMetadata(x),S}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1],x=0;for(let C=0;C<2&&p<d;C++){let S=Ke.decodeDigit(s,f,p,Ke.L_AND_G_PATTERNS);c+=String.fromCharCode(48+S%10);for(let N of f)p+=N;S>=10&&(x|=1<<1-C),C!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==2)throw new ht;if(parseInt(c.toString())%4!==x)throw new ht;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[ce.ISSUE_NUMBER,parseInt(s)]])}}class gs{static decodeRow(s,o,c){let f=Ke.findGuardPattern(o,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new qr().decodeRow(s,o,f)}catch{return new ua().decodeRow(s,o,f)}}}gs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _e extends Ke{constructor(){super(),this.decodeRowStringBuffer="",_e.L_AND_G_PATTERNS=_e.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=_e.L_PATTERNS[s-10],c=new Int32Array(o.length);for(let f=0;f<o.length;f++)c[f]=o[o.length-f-1];_e.L_AND_G_PATTERNS[s]=c}}decodeRow(s,o,c){let f=_e.findStartGuardPattern(o),d=c==null?null:c.get(Rt.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Nt=new jt((f[0]+f[1])/2,s);d.foundPossibleResultPoint(Nt)}let p=this.decodeMiddle(o,f,this.decodeRowStringBuffer),x=p.rowOffset,C=p.resultString;if(d!=null){const Nt=new jt(x,s);d.foundPossibleResultPoint(Nt)}let S=this.decodeEnd(o,x);if(d!=null){const Nt=new jt((S[0]+S[1])/2,s);d.foundPossibleResultPoint(Nt)}let N=S[1],P=N+(N-S[0]);if(P>=o.getSize()||!o.isRange(N,P,!1))throw new ht;let L=C.toString();if(L.length<8)throw new H;if(!_e.checkChecksum(L))throw new k;let Y=(f[1]+f[0])/2,tt=(S[1]+S[0])/2,it=this.getBarcodeFormat(),lt=[new jt(Y,s),new jt(tt,s)],gt=new zt(L,null,0,lt,it,new Date().getTime()),Ot=0;try{let Nt=gs.decodeRow(s,o,S[1]);gt.putMetadata(ce.UPC_EAN_EXTENSION,Nt.getText()),gt.putAllMetadata(Nt.getResultMetadata()),gt.addResultPoints(Nt.getResultPoints()),Ot=Nt.getText().length}catch{}let Lt=c==null?null:c.get(Rt.ALLOWED_EAN_EXTENSIONS);if(Lt!=null){let Nt=!1;for(let ge in Lt)if(Ot.toString()===ge){Nt=!0;break}if(!Nt)throw new ht}return gt}decodeEnd(s,o){return _e.findGuardPattern(s,o,!1,_e.START_END_PATTERN,new Int32Array(_e.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return _e.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return _e.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let f=o-1;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}c*=3;for(let f=o-2;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}return(1e3-c)%10}}class $e extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1],x=0;for(let S=0;S<6&&p<d;S++){let N=_e.decodeDigit(s,f,p,_e.L_AND_G_PATTERNS);c+=String.fromCharCode(48+N%10);for(let P of f)p+=P;N>=10&&(x|=1<<5-S)}c=$e.determineFirstDigit(c,x),p=_e.findGuardPattern(s,p,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&p<d;S++){let N=_e.decodeDigit(s,f,p,_e.L_PATTERNS);c+=String.fromCharCode(48+N);for(let P of f)p+=P}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Mt.EAN_13}static determineFirstDigit(s,o){for(let c=0;c<10;c++)if(o===this.FIRST_DIGIT_ENCODINGS[c])return s=String.fromCharCode(48+c)+s,s;throw new ht}}$e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Jo extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1];for(let C=0;C<4&&p<d;C++){let S=_e.decodeDigit(s,f,p,_e.L_PATTERNS);c+=String.fromCharCode(48+S);for(let N of f)p+=N}p=_e.findGuardPattern(s,p,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&p<d;C++){let S=_e.decodeDigit(s,f,p,_e.L_PATTERNS);c+=String.fromCharCode(48+S);for(let N of f)p+=N}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Mt.EAN_8}}class ms extends _e{constructor(){super(...arguments),this.ean13Reader=new $e}getBarcodeFormat(){return Mt.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,c))}decodeMiddle(s,o,c){return this.ean13Reader.decodeMiddle(s,o,c)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let c=new zt(o.substring(1),null,null,s.getResultPoints(),Mt.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new ht}reset(){this.ean13Reader.reset()}}class ni extends _e{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,c){const f=this.decodeMiddleCounters.map(S=>S);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=s.getSize();let p=o[1],x=0;for(let S=0;S<6&&p<d;S++){const N=ni.decodeDigit(s,f,p,ni.L_AND_G_PATTERNS);c+=String.fromCharCode(48+N%10);for(let P of f)p+=P;N>=10&&(x|=1<<5-S)}let C=ni.determineNumSysAndCheckDigit(c,x);return{rowOffset:p,resultString:C}}decodeEnd(s,o){return ni.findGuardPatternWithoutCounters(s,o,!0,ni.MIDDLE_END_PATTERN)}checkChecksum(s){return _e.checkChecksum(ni.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let d=String.fromCharCode(48+c),p=String.fromCharCode(48+f);return d+s+p}throw ht.getNotFoundInstance()}getBarcodeFormat(){return Mt.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new X;c.append(s.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:c.appendChars(o,0,2),c.append(f),c.append("0000"),c.appendChars(o,2,3);break;case 3:c.appendChars(o,0,3),c.append("00000"),c.appendChars(o,3,2);break;case 4:c.appendChars(o,0,4),c.append("00000"),c.append(o[4]);break;default:c.appendChars(o,0,5),c.append("0000"),c.append(f);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}ni.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ni.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ha extends Xe{constructor(s){super();let o=s==null?null:s.get(Rt.POSSIBLE_FORMATS),c=[];i(o)?(c.push(new $e),c.push(new ms),c.push(new Jo),c.push(new ni)):(o.indexOf(Mt.EAN_13)>-1&&c.push(new $e),o.indexOf(Mt.UPC_A)>-1&&c.push(new ms),o.indexOf(Mt.EAN_8)>-1&&c.push(new Jo),o.indexOf(Mt.UPC_E)>-1&&c.push(new ni)),this.readers=c}decodeRow(s,o,c){for(let f of this.readers)try{const d=f.decodeRow(s,o,c),p=d.getBarcodeFormat()===Mt.EAN_13&&d.getText().charAt(0)==="0",x=c==null?null:c.get(Rt.POSSIBLE_FORMATS),C=x==null||x.includes(Mt.UPC_A);if(p&&C){const S=d.getRawBytes(),N=new zt(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),Mt.UPC_A);return N.putAllMetadata(d.getResultMetadata()),N}return d}catch{}throw new ht}reset(){for(let s of this.readers)s.reset()}}class Bn extends Xe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let c=0;c<o.length;c++)if(Xe.patternMatchVariance(s,o[c],Bn.MAX_INDIVIDUAL_VARIANCE)<Bn.MAX_AVG_VARIANCE)return c;throw new ht}static count(s){return Zt.sum(new Int32Array(s))}static increment(s,o){let c=0,f=o[0];for(let d=1;d<s.length;d++)o[d]>f&&(f=o[d],c=d);s[c]++}static decrement(s,o){let c=0,f=o[0];for(let d=1;d<s.length;d++)o[d]<f&&(f=o[d],c=d);s[c]--}static isFinderPattern(s){let o=s[0]+s[1],c=o+s[2]+s[3],f=o/c;if(f>=Bn.MIN_FINDER_PATTERN_RATIO&&f<=Bn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let x of s)x>p&&(p=x),x<d&&(d=x);return p<10*d}return!1}}Bn.MAX_AVG_VARIANCE=.2,Bn.MAX_INDIVIDUAL_VARIANCE=.45,Bn.MIN_FINDER_PATTERN_RATIO=9.5/12,Bn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Bi{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Bi))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Za{constructor(s,o,c,f,d){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new jt(c,d)),this.resultPoints.push(new jt(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Za))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class Kn{constructor(){}static getRSSvalue(s,o,c){let f=0;for(let C of s)f+=C;let d=0,p=0,x=s.length;for(let C=0;C<x-1;C++){let S;for(S=1,p|=1<<C;S<s[C];S++,p&=~(1<<C)){let N=Kn.combins(f-S-1,x-C-2);if(c&&p===0&&f-S-(x-C-1)>=x-C-1&&(N-=Kn.combins(f-S-(x-C),x-C-2)),x-C-1>1){let P=0;for(let L=f-S-(x-C-2);L>o;L--)P+=Kn.combins(f-S-L-1,x-C-3);N-=P*(x-1-C)}else f-S>o&&N--;d+=N}f-=S}return d}static combins(s,o){let c,f;s-o>o?(f=o,c=s-o):(f=s-o,c=o);let d=1,p=1;for(let x=s;x>c;x--)d*=x,p<=f&&(d/=p,p++);for(;p<=f;)d/=p,p++;return d}}class Rn{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let c=12*o,f=new yt(c),d=0,x=s[0].getRightChar().getValue();for(let C=11;C>=0;--C)(x&1<<C)!=0&&f.set(d),d++;for(let C=1;C<s.length;++C){let S=s[C],N=S.getLeftChar().getValue();for(let P=11;P>=0;--P)(N&1<<P)!=0&&f.set(d),d++;if(S.getRightChar()!=null){let P=S.getRightChar().getValue();for(let L=11;L>=0;--L)(P&1<<L)!=0&&f.set(d),d++}}return f}}class pn{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wr{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Vn extends wr{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Vn.FNC1}}Vn.FNC1="$";class Ji extends wr{constructor(s,o,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Vi extends wr{constructor(s,o,c){if(super(s),o<0||o>10||c<0||c>10)throw new H;this.firstDigit=o,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Vi.FNC1}isSecondDigitFNC1(){return this.secondDigit===Vi.FNC1}isAnyFNC1(){return this.firstDigit===Vi.FNC1||this.secondDigit===Vi.FNC1}}Vi.FNC1=10;class Ut{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ht;let o=s.substring(0,2);for(let d of Ut.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(2,d[2],s):Ut.processFixedAI(2,d[1],s);if(s.length<3)throw new ht;let c=s.substring(0,3);for(let d of Ut.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(3,d[2],s):Ut.processFixedAI(3,d[1],s);for(let d of Ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(4,d[2],s):Ut.processFixedAI(4,d[1],s);if(s.length<4)throw new ht;let f=s.substring(0,4);for(let d of Ut.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(4,d[2],s):Ut.processFixedAI(4,d[1],s);throw new ht}static processFixedAI(s,o,c){if(c.length<s)throw new ht;let f=c.substring(0,s);if(c.length<s+o)throw new ht;let d=c.substring(s,s+o),p=c.substring(s+o),x="("+f+")"+d,C=Ut.parseFieldsInGeneralPurpose(p);return C==null?x:x+C}static processVariableAI(s,o,c){let f=c.substring(0,s),d;c.length<s+o?d=c.length:d=s+o;let p=c.substring(s,d),x=c.substring(d),C="("+f+")"+p,S=Ut.parseFieldsInGeneralPurpose(x);return S==null?C:C+S}}Ut.VARIABLE_LENGTH=[],Ut.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ut.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ut.VARIABLE_LENGTH,20],["22",Ut.VARIABLE_LENGTH,29],["30",Ut.VARIABLE_LENGTH,8],["37",Ut.VARIABLE_LENGTH,8],["90",Ut.VARIABLE_LENGTH,30],["91",Ut.VARIABLE_LENGTH,30],["92",Ut.VARIABLE_LENGTH,30],["93",Ut.VARIABLE_LENGTH,30],["94",Ut.VARIABLE_LENGTH,30],["95",Ut.VARIABLE_LENGTH,30],["96",Ut.VARIABLE_LENGTH,30],["97",Ut.VARIABLE_LENGTH,3],["98",Ut.VARIABLE_LENGTH,30],["99",Ut.VARIABLE_LENGTH,30]],Ut.THREE_DIGIT_DATA_LENGTH=[["240",Ut.VARIABLE_LENGTH,30],["241",Ut.VARIABLE_LENGTH,30],["242",Ut.VARIABLE_LENGTH,6],["250",Ut.VARIABLE_LENGTH,30],["251",Ut.VARIABLE_LENGTH,30],["253",Ut.VARIABLE_LENGTH,17],["254",Ut.VARIABLE_LENGTH,20],["400",Ut.VARIABLE_LENGTH,30],["401",Ut.VARIABLE_LENGTH,30],["402",17],["403",Ut.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ut.VARIABLE_LENGTH,20],["421",Ut.VARIABLE_LENGTH,15],["422",3],["423",Ut.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ut.VARIABLE_LENGTH,15],["391",Ut.VARIABLE_LENGTH,18],["392",Ut.VARIABLE_LENGTH,15],["393",Ut.VARIABLE_LENGTH,18],["703",Ut.VARIABLE_LENGTH,30]],Ut.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ut.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ut.VARIABLE_LENGTH,20],["8003",Ut.VARIABLE_LENGTH,30],["8004",Ut.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ut.VARIABLE_LENGTH,30],["8008",Ut.VARIABLE_LENGTH,12],["8018",18],["8020",Ut.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ut.VARIABLE_LENGTH,70],["8200",Ut.VARIABLE_LENGTH,70]];class $i{constructor(s){this.buffer=new X,this.information=s}decodeAllCodes(s,o){let c=o,f=null;do{let d=this.decodeGeneralPurposeField(c,f),p=Ut.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&s.append(p),d.isRemaining()?f=""+d.getRemainingValue():f=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Vi(this.information.getSize(),Vi.FNC1,Vi.FNC1):new Vi(this.information.getSize(),d-1,Vi.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),c=(o-8)/11,f=(o-8)%11;return new Vi(s+7,c,f)}extractNumericValueFromBitArray(s,o){return $i.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,c){let f=0;for(let d=0;d<c;++d)s.get(o+d)&&(f|=1<<c-d-1);return f}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Ji(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Ji(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let c=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Ji(this.current.getPosition(),this.buffer.toString()):o=new Ji(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new pn(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Ji(this.current.getPosition(),this.buffer.toString());return new pn(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new pn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Ji(this.current.getPosition(),this.buffer.toString());return new pn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new pn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Ji(this.current.getPosition(),this.buffer.toString());return new pn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new pn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new Vn(s+5,Vn.FNC1);if(o>=5&&o<15)return new Vn(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new Vn(s+7,""+(c+1));if(c>=90&&c<116)return new Vn(s+7,""+(c+7));let f=this.extractNumericValueFromBitArray(s,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new Vn(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new Vn(s+5,Vn.FNC1);if(o>=5&&o<15)return new Vn(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new Vn(s+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new ar("Decoding invalid alphanumeric value: "+c)}return new Vn(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class Ns{constructor(s){this.information=s,this.generalDecoder=new $i(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class yn extends Ns{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,c)}encodeCompressedGtinWithoutAI(s,o,c){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&s.append("0"),d/10===0&&s.append("0"),s.append(d)}yn.appendCheckDigit(s,c)}static appendCheckDigit(s,o){let c=0;for(let f=0;f<13;f++){let d=s.charAt(f+o).charCodeAt(0)-48;c+=(f&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c)}}yn.GTIN_SIZE=40;class Si extends yn{constructor(s){super(s)}parseInformation(){let s=new X;s.append("(01)");let o=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Si.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,Si.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,Si.HEADER_SIZE+44)}}Si.HEADER_SIZE=4;class Tr extends Ns{constructor(s){super(s)}parseInformation(){let s=new X;return this.getGeneralDecoder().decodeAllCodes(s,Tr.HEADER_SIZE)}}Tr.HEADER_SIZE=5;class _r extends yn{constructor(s){super(s)}encodeCompressedWeight(s,o,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,c);this.addWeightCode(s,f);let d=this.checkWeight(f),p=1e5;for(let x=0;x<5;++x)d/p===0&&s.append("0"),p/=10;s.append(d)}}class ze extends _r{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=ze.HEADER_SIZE+_r.GTIN_SIZE+ze.WEIGHT_SIZE)throw new ht;let s=new X;return this.encodeCompressedGtin(s,ze.HEADER_SIZE),this.encodeCompressedWeight(s,ze.HEADER_SIZE+_r.GTIN_SIZE,ze.WEIGHT_SIZE),s.toString()}}ze.HEADER_SIZE=5,ze.WEIGHT_SIZE=15;class Yl extends ze{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class fa extends ze{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Qn extends yn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+yn.GTIN_SIZE)throw new ht;let s=new X;this.encodeCompressedGtin(s,Qn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+yn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+yn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2;class dn extends yn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<dn.HEADER_SIZE+yn.GTIN_SIZE)throw new ht;let s=new X;this.encodeCompressedGtin(s,dn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+yn.GTIN_SIZE,dn.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+yn.GTIN_SIZE+dn.LAST_DIGIT_SIZE,dn.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(dn.HEADER_SIZE+yn.GTIN_SIZE+dn.LAST_DIGIT_SIZE+dn.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}dn.HEADER_SIZE=8,dn.LAST_DIGIT_SIZE=2,dn.FIRST_THREE_DIGITS_SIZE=10;class je extends _r{constructor(s,o,c){super(s),this.dateCode=c,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=je.HEADER_SIZE+je.GTIN_SIZE+je.WEIGHT_SIZE+je.DATE_SIZE)throw new ht;let s=new X;return this.encodeCompressedGtin(s,je.HEADER_SIZE),this.encodeCompressedWeight(s,je.HEADER_SIZE+je.GTIN_SIZE,je.WEIGHT_SIZE),this.encodeCompressedDate(s,je.HEADER_SIZE+je.GTIN_SIZE+je.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,je.DATE_SIZE);if(c==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=c%32;c/=32;let d=c%12+1;c/=12;let p=c;p/10==0&&s.append("0"),s.append(p),d/10==0&&s.append("0"),s.append(d),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}je.HEADER_SIZE=8,je.WEIGHT_SIZE=20,je.DATE_SIZE=16;function Cr(O){try{if(O.get(1))return new Si(O);if(!O.get(2))return new Tr(O);switch($i.extractNumericValueFromBitArray(O,1,4)){case 4:return new Yl(O);case 5:return new fa(O)}switch($i.extractNumericValueFromBitArray(O,1,5)){case 12:return new Qn(O);case 13:return new dn(O)}switch($i.extractNumericValueFromBitArray(O,1,7)){case 56:return new je(O,"310","11");case 57:return new je(O,"320","11");case 58:return new je(O,"310","13");case 59:return new je(O,"320","13");case 60:return new je(O,"310","15");case 61:return new je(O,"320","15");case 62:return new je(O,"310","17");case 63:return new je(O,"320","17")}}catch(s){throw console.log(s),new ar("unknown decoder: "+O)}}class tr{constructor(s,o,c,f){this.leftchar=s,this.rightchar=o,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof tr?tr.equalsOrNull(s.leftchar,o.leftchar)&&tr.equalsOrNull(s.rightchar,o.rightchar)&&tr.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:tr.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class $o{constructor(s,o,c){this.pairs=s,this.rowNumber=o,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof $o?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let c;return s.forEach((f,d)=>{o.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class vt extends Bn{constructor(s){super(...arguments),this.pairs=new Array(vt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,c){this.pairs.length=0,this.startFromEven=!1;try{return vt.constructResult(this.decodeRow2pairs(s,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,vt.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(d){if(d instanceof ht){if(!this.pairs.length)throw new ht;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ht}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let c=o;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!vt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(f);try{return this.checkRows(d,c+1)}catch(p){this.verbose&&console.log(p)}}throw new ht}static isValidSequence(s){for(let o of vt.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let c=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=o[f]){c=!1;break}if(c)return!0}return!1}storeRow(s,o){let c=0,f=!1,d=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>s){d=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),c++}d||f||vt.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new $o(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let c of o)if(c.getPairs().length!==s.length){for(let f of c.getPairs())for(let d of s)if(tr.equals(f,d))break}}static isPartialRow(s,o){for(let c of o){let f=!0;for(let d of s){let p=!1;for(let x of c.getPairs())if(d.equals(x)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=Rn.buildBitArray(s),f=Cr(o).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],p[0],p[1]];return new zt(f,null,null,x,Mt.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let C=this.pairs.get(x);f+=C.getLeftChar().getChecksumPortion(),d++;let S=C.getRightChar();S!=null&&(f+=S.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(s,o){let c;return s.get(o)?(c=s.getNextUnset(o),c=s.getNextSet(c)):(c=s.getNextSet(o),c=s.getNextUnset(c)),c}retrieveNextPair(s,o,c){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,p=!0,x=-1;do this.findNextPair(s,o,x),d=this.parseFoundFinderPattern(s,c,f),d==null?x=vt.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let C=this.decodeDataCharacter(s,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ht;let S;try{S=this.decodeDataCharacter(s,d,f,!1)}catch(N){S=null,this.verbose&&console.log(N)}return new tr(C,S,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p;c>=0?p=c:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let x=o.length%2!=0;this.startFromEven&&(x=!x);let C=!1;for(;p<d&&(C=!s.get(p),!!C);)p++;let S=0,N=p;for(let P=p;P<d;P++)if(s.get(P)!=C)f[S]++;else{if(S==3){if(x&&vt.reverseCounters(f),vt.isFinderPattern(f)){this.startEnd[0]=N,this.startEnd[1]=P;return}x&&vt.reverseCounters(f),N+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,S--}else S++;f[S]=1,C=!C}throw new ht}static reverseCounters(s){let o=s.length;for(let c=0;c<o/2;++c){let f=s[c];s[c]=s[o-c-1],s[o-c-1]=f}}parseFoundFinderPattern(s,o,c){let f,d,p;if(c){let S=this.startEnd[0]-1;for(;S>=0&&!s.get(S);)S--;S++,f=this.startEnd[0]-S,d=S,p=this.startEnd[1]}else d=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let x=this.getDecodeFinderCounters();q.arraycopy(x,0,x,1,x.length-1),x[0]=f;let C;try{C=this.parseFinderValue(x,vt.FINDER_PATTERNS)}catch{return null}return new Za(C,[d,p],d,p,o)}decodeDataCharacter(s,o,c,f){let d=this.getDataCharacterCounters();for(let tn=0;tn<d.length;tn++)d[tn]=0;if(f)vt.recordPatternInReverse(s,o.getStartEnd()[0],d);else{vt.recordPattern(s,o.getStartEnd()[1],d);for(let tn=0,ui=d.length-1;tn<ui;tn++,ui--){let Gi=d[tn];d[tn]=d[ui],d[ui]=Gi}}let p=17,x=Zt.sum(new Int32Array(d))/p,C=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(x-C)/C>.3)throw new ht;let S=this.getOddCounts(),N=this.getEvenCounts(),P=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let tn=0;tn<d.length;tn++){let ui=1*d[tn]/x,Gi=ui+.5;if(Gi<1){if(ui<.3)throw new ht;Gi=1}else if(Gi>8){if(ui>8.7)throw new ht;Gi=8}let Ta=tn/2;(tn&1)==0?(S[Ta]=Gi,P[Ta]=ui-Gi):(N[Ta]=Gi,L[Ta]=ui-Gi)}this.adjustOddEvenCounts(p);let Y=4*o.getValue()+(c?0:2)+(f?0:1)-1,tt=0,it=0;for(let tn=S.length-1;tn>=0;tn--){if(vt.isNotA1left(o,c,f)){let ui=vt.WEIGHTS[Y][2*tn];it+=S[tn]*ui}tt+=S[tn]}let lt=0;for(let tn=N.length-1;tn>=0;tn--)if(vt.isNotA1left(o,c,f)){let ui=vt.WEIGHTS[Y][2*tn+1];lt+=N[tn]*ui}let gt=it+lt;if((tt&1)!=0||tt>13||tt<4)throw new ht;let Ot=(13-tt)/2,Lt=vt.SYMBOL_WIDEST[Ot],Nt=9-Lt,ge=Kn.getRSSvalue(S,Lt,!0),he=Kn.getRSSvalue(N,Nt,!1),Ri=vt.EVEN_TOTAL_SUBSET[Ot],ur=vt.GSUM[Ot],Hi=ge*Ri+he+ur;return new Bi(Hi,gt)}static isNotA1left(s,o,c){return!(s.getValue()==0&&o&&c)}adjustOddEvenCounts(s){let o=Zt.sum(new Int32Array(this.getOddCounts())),c=Zt.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let p=!1,x=!1;c>13?x=!0:c<4&&(p=!0);let C=o+c-s,S=(o&1)==1,N=(c&1)==0;if(C==1)if(S){if(N)throw new ht;d=!0}else{if(!N)throw new ht;x=!0}else if(C==-1)if(S){if(N)throw new ht;f=!0}else{if(!N)throw new ht;p=!0}else if(C==0){if(S){if(!N)throw new ht;o<c?(f=!0,x=!0):(d=!0,p=!0)}else if(N)throw new ht}else throw new ht;if(f){if(d)throw new ht;vt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&vt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new ht;vt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&vt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vt.SYMBOL_WIDEST=[7,5,4,3,1],vt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],vt.GSUM=[0,348,1388,2948,3988],vt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],vt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],vt.FINDER_PAT_A=0,vt.FINDER_PAT_B=1,vt.FINDER_PAT_C=2,vt.FINDER_PAT_D=3,vt.FINDER_PAT_E=4,vt.FINDER_PAT_F=5,vt.FINDER_PATTERN_SEQUENCES=[[vt.FINDER_PAT_A,vt.FINDER_PAT_A],[vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B],[vt.FINDER_PAT_A,vt.FINDER_PAT_C,vt.FINDER_PAT_B,vt.FINDER_PAT_D],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_C],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_D,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_D],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_E],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F]],vt.MAX_PAIRS=11;class da extends Bi{constructor(s,o,c){super(s,o),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Le extends Bn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,c){const f=this.decodePair(o,!1,s,c);Le.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,s,c);Le.addOrTally(this.possibleRightPairs,d),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Le.checkChecksum(p,x))return Le.constructResult(p,x)}throw new ht}static addOrTally(s,o){if(o==null)return;let c=!1;for(let f of s)if(f.getValue()===o.getValue()){f.incrementCount(),c=!0;break}c||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let c=4537077*s.getValue()+o.getValue(),f=new String(c).toString(),d=new X;for(let S=13-f.length;S>0;S--)d.append("0");d.append(f);let p=0;for(let S=0;S<13;S++){let N=d.charAt(S).charCodeAt(0)-48;p+=(S&1)===0?3*N:N}p=10-p%10,p===10&&(p=0),d.append(p.toString());let x=s.getFinderPattern().getResultPoints(),C=o.getFinderPattern().getResultPoints();return new zt(d.toString(),null,0,[x[0],x[1],C[0],C[1]],Mt.RSS_14,new Date().getTime())}static checkChecksum(s,o){let c=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(s,o,c,f){try{let d=this.findFinderPattern(s,o),p=this.parseFoundFinderPattern(s,c,o,d),x=f==null?null:f.get(Rt.NEED_RESULT_POINT_CALLBACK);if(x!=null){let N=(d[0]+d[1])/2;o&&(N=s.getSize()-1-N),x.foundPossibleResultPoint(new jt(N,c))}let C=this.decodeDataCharacter(s,p,!0),S=this.decodeDataCharacter(s,p,!1);return new da(1597*C.getValue()+S.getValue(),C.getChecksumPortion()+4*S.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,o,c){let f=this.getDataCharacterCounters();for(let lt=0;lt<f.length;lt++)f[lt]=0;if(c)Xe.recordPatternInReverse(s,o.getStartEnd()[0],f);else{Xe.recordPattern(s,o.getStartEnd()[1]+1,f);for(let lt=0,gt=f.length-1;lt<gt;lt++,gt--){let Ot=f[lt];f[lt]=f[gt],f[gt]=Ot}}let d=c?16:15,p=Zt.sum(new Int32Array(f))/d,x=this.getOddCounts(),C=this.getEvenCounts(),S=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let lt=0;lt<f.length;lt++){let gt=f[lt]/p,Ot=Math.floor(gt+.5);Ot<1?Ot=1:Ot>8&&(Ot=8);let Lt=Math.floor(lt/2);(lt&1)===0?(x[Lt]=Ot,S[Lt]=gt-Ot):(C[Lt]=Ot,N[Lt]=gt-Ot)}this.adjustOddEvenCounts(c,d);let P=0,L=0;for(let lt=x.length-1;lt>=0;lt--)L*=9,L+=x[lt],P+=x[lt];let Y=0,tt=0;for(let lt=C.length-1;lt>=0;lt--)Y*=9,Y+=C[lt],tt+=C[lt];let it=L+3*Y;if(c){if((P&1)!==0||P>12||P<4)throw new ht;let lt=(12-P)/2,gt=Le.OUTSIDE_ODD_WIDEST[lt],Ot=9-gt,Lt=Kn.getRSSvalue(x,gt,!1),Nt=Kn.getRSSvalue(C,Ot,!0),ge=Le.OUTSIDE_EVEN_TOTAL_SUBSET[lt],he=Le.OUTSIDE_GSUM[lt];return new Bi(Lt*ge+Nt+he,it)}else{if((tt&1)!==0||tt>10||tt<4)throw new ht;let lt=(10-tt)/2,gt=Le.INSIDE_ODD_WIDEST[lt],Ot=9-gt,Lt=Kn.getRSSvalue(x,gt,!0),Nt=Kn.getRSSvalue(C,Ot,!1),ge=Le.INSIDE_ODD_TOTAL_SUBSET[lt],he=Le.INSIDE_GSUM[lt];return new Bi(Nt*ge+Lt+he,it)}}findFinderPattern(s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=s.getSize(),d=!1,p=0;for(;p<f&&(d=!s.get(p),o!==d);)p++;let x=0,C=p;for(let S=p;S<f;S++)if(s.get(S)!==d)c[x]++;else{if(x===3){if(Bn.isFinderPattern(c))return[C,S];C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,d=!d}throw new ht}parseFoundFinderPattern(s,o,c,f){let d=s.get(f[0]),p=f[0]-1;for(;p>=0&&d!==s.get(p);)p--;p++;const x=f[0]-p,C=this.getDecodeFinderCounters(),S=new Int32Array(C.length);q.arraycopy(C,0,S,1,C.length-1),S[0]=x;const N=this.parseFinderValue(S,Le.FINDER_PATTERNS);let P=p,L=f[1];return c&&(P=s.getSize()-1-P,L=s.getSize()-1-L),new Za(N,[p,f[1]],P,L,o)}adjustOddEvenCounts(s,o){let c=Zt.sum(new Int32Array(this.getOddCounts())),f=Zt.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,x=!1,C=!1;s?(c>12?p=!0:c<4&&(d=!0),f>12?C=!0:f<4&&(x=!0)):(c>11?p=!0:c<5&&(d=!0),f>10?C=!0:f<4&&(x=!0));let S=c+f-o,N=(c&1)===(s?1:0),P=(f&1)===1;if(S===1)if(N){if(P)throw new ht;p=!0}else{if(!P)throw new ht;C=!0}else if(S===-1)if(N){if(P)throw new ht;d=!0}else{if(!P)throw new ht;x=!0}else if(S===0){if(N){if(!P)throw new ht;c<f?(d=!0,C=!0):(p=!0,x=!0)}else if(P)throw new ht}else throw new ht;if(d){if(p)throw new ht;Bn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Bn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(C)throw new ht;Bn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&Bn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Le.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Le.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Le.OUTSIDE_GSUM=[0,161,961,2015,2715],Le.INSIDE_GSUM=[0,336,1036,1516],Le.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Le.INSIDE_ODD_WIDEST=[2,4,6,8],Le.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class or extends Xe{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const c=s?s.get(Rt.POSSIBLE_FORMATS):null,f=s&&s.get(Rt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Mt.EAN_13)||c.includes(Mt.UPC_A)||c.includes(Mt.EAN_8)||c.includes(Mt.UPC_E))&&this.readers.push(new ha(s)),c.includes(Mt.CODE_39)&&this.readers.push(new We(f)),c.includes(Mt.CODE_128)&&this.readers.push(new kt),c.includes(Mt.ITF)&&this.readers.push(new Ae),c.includes(Mt.RSS_14)&&this.readers.push(new Le),c.includes(Mt.RSS_EXPANDED)&&this.readers.push(new vt(this.verbose))):(this.readers.push(new ha(s)),this.readers.push(new We),this.readers.push(new ha(s)),this.readers.push(new kt),this.readers.push(new Ae),this.readers.push(new Le),this.readers.push(new vt(this.verbose)))}decodeRow(s,o,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,o,c)}catch{}throw new ht}reset(){this.readers.forEach(s=>s.reset())}}class Ja extends Vt{constructor(s=500,o){super(new or(o),s,o)}}class xe{constructor(s,o,c){this.ecCodewords=s,this.ecBlocks=[o],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ce{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pe{constructor(s,o,c,f,d,p){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=p;let x=0;const C=p.getECCodewords(),S=p.getECBlocks();for(let N of S)x+=N.getCount()*(N.getDataCodewords()+C);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if((s&1)!==0||(o&1)!==0)throw new H;for(let c of pe.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===o)return c;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new pe(1,10,10,8,8,new xe(5,new Ce(1,3))),new pe(2,12,12,10,10,new xe(7,new Ce(1,5))),new pe(3,14,14,12,12,new xe(10,new Ce(1,8))),new pe(4,16,16,14,14,new xe(12,new Ce(1,12))),new pe(5,18,18,16,16,new xe(14,new Ce(1,18))),new pe(6,20,20,18,18,new xe(18,new Ce(1,22))),new pe(7,22,22,20,20,new xe(20,new Ce(1,30))),new pe(8,24,24,22,22,new xe(24,new Ce(1,36))),new pe(9,26,26,24,24,new xe(28,new Ce(1,44))),new pe(10,32,32,14,14,new xe(36,new Ce(1,62))),new pe(11,36,36,16,16,new xe(42,new Ce(1,86))),new pe(12,40,40,18,18,new xe(48,new Ce(1,114))),new pe(13,44,44,20,20,new xe(56,new Ce(1,144))),new pe(14,48,48,22,22,new xe(68,new Ce(1,174))),new pe(15,52,52,24,24,new xe(42,new Ce(2,102))),new pe(16,64,64,14,14,new xe(56,new Ce(2,140))),new pe(17,72,72,16,16,new xe(36,new Ce(4,92))),new pe(18,80,80,18,18,new xe(48,new Ce(4,114))),new pe(19,88,88,20,20,new xe(56,new Ce(4,144))),new pe(20,96,96,22,22,new xe(68,new Ce(4,174))),new pe(21,104,104,24,24,new xe(56,new Ce(6,136))),new pe(22,120,120,18,18,new xe(68,new Ce(6,175))),new pe(23,132,132,20,20,new xe(62,new Ce(8,163))),new pe(24,144,144,22,22,new xe(62,new Ce(8,156),new Ce(2,155))),new pe(25,8,18,6,16,new xe(7,new Ce(1,5))),new pe(26,8,32,6,14,new xe(11,new Ce(1,10))),new pe(27,12,26,10,24,new xe(14,new Ce(1,16))),new pe(28,12,36,10,16,new xe(18,new Ce(1,22))),new pe(29,16,36,14,16,new xe(24,new Ce(1,32))),new pe(30,16,48,14,22,new xe(28,new Ce(1,49)))]}}pe.VERSIONS=pe.buildVersions();class tl{constructor(s){const o=s.getHeight();if(o<8||o>144||(o&1)!==0)throw new H;this.version=tl.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new Jt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),c=s.getWidth();return pe.getVersionForDimensions(o,c)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,c=4,f=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let x=!1,C=!1,S=!1,N=!1;do if(c===d&&f===0&&!x)s[o++]=this.readCorner1(d,p)&255,c-=2,f+=2,x=!0;else if(c===d-2&&f===0&&(p&3)!==0&&!C)s[o++]=this.readCorner2(d,p)&255,c-=2,f+=2,C=!0;else if(c===d+4&&f===2&&(p&7)===0&&!S)s[o++]=this.readCorner3(d,p)&255,c-=2,f+=2,S=!0;else if(c===d-2&&f===0&&(p&7)===4&&!N)s[o++]=this.readCorner4(d,p)&255,c-=2,f+=2,N=!0;else{do c<d&&f>=0&&!this.readMappingMatrix.get(f,c)&&(s[o++]=this.readUtah(c,f,d,p)&255),c-=2,f+=2;while(c>=0&&f<p);c+=1,f+=3;do c>=0&&f<p&&!this.readMappingMatrix.get(f,c)&&(s[o++]=this.readUtah(c,f,d,p)&255),c+=2,f-=2;while(c<d&&f>=0);c+=3,f+=1}while(c<d||f<p);if(o!==this.version.getTotalCodewords())throw new H;return s}readModule(s,o,c,f){return s<0&&(s+=c,o+=4-(c+4&7)),o<0&&(o+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,c,f){let d=0;return this.readModule(s-2,o-2,c,f)&&(d|=1),d<<=1,this.readModule(s-2,o-1,c,f)&&(d|=1),d<<=1,this.readModule(s-1,o-2,c,f)&&(d|=1),d<<=1,this.readModule(s-1,o-1,c,f)&&(d|=1),d<<=1,this.readModule(s-1,o,c,f)&&(d|=1),d<<=1,this.readModule(s,o-2,c,f)&&(d|=1),d<<=1,this.readModule(s,o-1,c,f)&&(d|=1),d<<=1,this.readModule(s,o,c,f)&&(d|=1),d}readCorner1(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,1,s,o)&&(c|=1),c<<=1,this.readModule(s-1,2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}readCorner2(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-4,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner3(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-3,s,o)&&(c|=1),c<<=1,this.readModule(1,o-2,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner4(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new b("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=o/f|0,x=c/d|0,C=p*f,S=x*d,N=new Jt(S,C);for(let P=0;P<p;++P){const L=P*f;for(let Y=0;Y<x;++Y){const tt=Y*d;for(let it=0;it<f;++it){const lt=P*(f+2)+1+it,gt=L+it;for(let Ot=0;Ot<d;++Ot){const Lt=Y*(d+2)+1+Ot;if(s.get(Lt,lt)){const Nt=tt+Ot;N.set(Nt,gt)}}}}}return N}}class er{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const c=o.getECBlocks();let f=0;const d=c.getECBlocks();for(let it of d)f+=it.getCount();const p=new Array(f);let x=0;for(let it of d)for(let lt=0;lt<it.getCount();lt++){const gt=it.getDataCodewords(),Ot=c.getECCodewords()+gt;p[x++]=new er(gt,new Uint8Array(Ot))}const S=p[0].codewords.length-c.getECCodewords(),N=S-1;let P=0;for(let it=0;it<N;it++)for(let lt=0;lt<x;lt++)p[lt].codewords[it]=s[P++];const L=o.getVersionNumber()===24,Y=L?8:x;for(let it=0;it<Y;it++)p[it].codewords[S-1]=s[P++];const tt=p[0].codewords.length;for(let it=S;it<tt;it++)for(let lt=0;lt<x;lt++){const gt=L?(lt+8)%x:lt,Ot=L&&gt>7?it-1:it;p[gt].codewords[Ot]=s[P++]}if(P!==s.length)throw new b;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hn{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new b(""+s);let o=0,c=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(c>0){const p=8-c,x=s<p?s:p,C=p-x,S=255>>8-x<<C;o=(d[f]&S)>>C,s-=x,c+=x,c===8&&(c=0,f++)}if(s>0){for(;s>=8;)o=o<<8|d[f]&255,f++,s-=8;if(s>0){const p=8-s,x=255>>p<<p;o=o<<s|(d[f]&x)>>p,c+=s}}return this.bitOffset=c,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var sn;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(sn||(sn={}));class Ui{static decode(s){const o=new hn(s),c=new X,f=new X,d=new Array;let p=sn.ASCII_ENCODE;do if(p===sn.ASCII_ENCODE)p=this.decodeAsciiSegment(o,c,f);else{switch(p){case sn.C40_ENCODE:this.decodeC40Segment(o,c);break;case sn.TEXT_ENCODE:this.decodeTextSegment(o,c);break;case sn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,c);break;case sn.EDIFACT_ENCODE:this.decodeEdifactSegment(o,c);break;case sn.BASE256_ENCODE:this.decodeBase256Segment(o,c,d);break;default:throw new H}p=sn.ASCII_ENCODE}while(p!==sn.PAD_ENCODE&&o.available()>0);return f.length()>0&&c.append(f.toString()),new vi(s,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,o,c){let f=!1;do{let d=s.readBits(8);if(d===0)throw new H;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),sn.ASCII_ENCODE;if(d===129)return sn.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&o.append("0"),o.append(""+p)}else switch(d){case 230:return sn.C40_ENCODE;case 231:return sn.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),c.insert(0,"");break;case 237:o.append("[)>06"),c.insert(0,"");break;case 238:return sn.ANSIX12_ENCODE;case 239:return sn.TEXT_ENCODE;case 240:return sn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new H;break}}while(s.available()>0);return sn.ASCII_ENCODE}static decodeC40Segment(s,o){let c=!1;const f=[];let d=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),f);for(let x=0;x<3;x++){const C=f[x];switch(d){case 0:if(C<3)d=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[C];c?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):o.append(S)}else throw new H;break;case 1:c?(o.append(String.fromCharCode(C+128)),c=!1):o.append(String.fromCharCode(C)),d=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[C];c?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):o.append(S)}else switch(C){case 27:o.append("");break;case 30:c=!0;break;default:throw new H}d=0;break;case 3:c?(o.append(String.fromCharCode(C+224)),c=!1):o.append(String.fromCharCode(C+96)),d=0;break;default:throw new H}}}while(s.available()>0)}static decodeTextSegment(s,o){let c=!1,f=[],d=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),f);for(let x=0;x<3;x++){const C=f[x];switch(d){case 0:if(C<3)d=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[C];c?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):o.append(S)}else throw new H;break;case 1:c?(o.append(String.fromCharCode(C+128)),c=!1):o.append(String.fromCharCode(C)),d=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[C];c?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):o.append(S)}else switch(C){case 27:o.append("");break;case 30:c=!0;break;default:throw new H}d=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[C];c?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):o.append(S),d=0}else throw new H;break;default:throw new H}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const c=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),c);for(let d=0;d<3;d++){const p=c[d];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new H;break}}}while(s.available()>0)}static parseTwoBytes(s,o,c){let f=(s<<8)+o-1,d=Math.floor(f/1600);c[0]=d,f-=d*1600,d=Math.floor(f/40),c[1]=d,c[2]=f-d*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let f=s.readBits(6);if(f===31){const d=8-s.getBitOffset();d!==8&&s.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,o,c){let f=1+s.getByteOffset();const d=this.unrandomize255State(s.readBits(8),f++);let p;if(d===0?p=s.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(s.readBits(8),f++),p<0)throw new H;const x=new Uint8Array(p);for(let C=0;C<p;C++){if(s.available()<8)throw new H;x[C]=this.unrandomize255State(s.readBits(8),f++)}c.push(x);try{o.append(K.decode(x,J.ISO88591))}catch(C){throw new ar("Platform does not support required encoding: "+C.message)}}static unrandomize255State(s,o){const c=149*o%255+1,f=s-c;return f>=0?f:f+256}}Ui.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ui.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ui.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ui.TEXT_SHIFT2_SET_CHARS=Ui.C40_SHIFT2_SET_CHARS,Ui.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ds{constructor(){this.rsDecoder=new fs(we.DATA_MATRIX_FIELD_256)}decode(s){const o=new tl(s),c=o.getVersion(),f=o.readCodewords(),d=er.getDataBlocks(f,c);let p=0;for(let S of d)p+=S.getNumDataCodewords();const x=new Uint8Array(p),C=d.length;for(let S=0;S<C;S++){const N=d[S],P=N.getCodewords(),L=N.getNumDataCodewords();this.correctErrors(P,L);for(let Y=0;Y<L;Y++)x[Y*C+S]=P[Y]}return Ui.decode(x)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new k}for(let f=0;f<o;f++)s[f]=c[f]}}class ne{constructor(s){this.image=s,this.rectangleDetector=new xr(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ht;o=this.shiftToModuleCenter(o);const c=o[0],f=o[1],d=o[2],p=o[3];let x=this.transitionsBetween(c,p)+1,C=this.transitionsBetween(d,p)+1;(x&1)===1&&(x+=1),(C&1)===1&&(C+=1),4*x<7*C&&4*C<7*x&&(x=C=Math.max(x,C));let S=ne.sampleGrid(this.image,c,f,d,p,x,C);return new Ka(S,[c,f,d,p])}static shiftPoint(s,o,c){let f=(o.getX()-s.getX())/(c+1),d=(o.getY()-s.getY())/(c+1);return new jt(s.getX()+f,s.getY()+d)}static moveAway(s,o,c){let f=s.getX(),d=s.getY();return f<o?f-=1:f+=1,d<c?d-=1:d+=1,new jt(f,d)}detectSolid1(s){let o=s[0],c=s[1],f=s[3],d=s[2],p=this.transitionsBetween(o,c),x=this.transitionsBetween(c,f),C=this.transitionsBetween(f,d),S=this.transitionsBetween(d,o),N=p,P=[d,o,c,f];return N>x&&(N=x,P[0]=o,P[1]=c,P[2]=f,P[3]=d),N>C&&(N=C,P[0]=c,P[1]=f,P[2]=d,P[3]=o),N>S&&(P[0]=f,P[1]=d,P[2]=o,P[3]=c),P}detectSolid2(s){let o=s[0],c=s[1],f=s[2],d=s[3],p=this.transitionsBetween(o,d),x=ne.shiftPoint(c,f,(p+1)*4),C=ne.shiftPoint(f,c,(p+1)*4),S=this.transitionsBetween(x,o),N=this.transitionsBetween(C,d);return S<N?(s[0]=o,s[1]=c,s[2]=f,s[3]=d):(s[0]=c,s[1]=f,s[2]=d,s[3]=o),s}correctTopRight(s){let o=s[0],c=s[1],f=s[2],d=s[3],p=this.transitionsBetween(o,d),x=this.transitionsBetween(c,d),C=ne.shiftPoint(o,c,(x+1)*4),S=ne.shiftPoint(f,c,(p+1)*4);p=this.transitionsBetween(C,d),x=this.transitionsBetween(S,d);let N=new jt(d.getX()+(f.getX()-c.getX())/(p+1),d.getY()+(f.getY()-c.getY())/(p+1)),P=new jt(d.getX()+(o.getX()-c.getX())/(x+1),d.getY()+(o.getY()-c.getY())/(x+1));if(!this.isValid(N))return this.isValid(P)?P:null;if(!this.isValid(P))return N;let L=this.transitionsBetween(C,N)+this.transitionsBetween(S,N),Y=this.transitionsBetween(C,P)+this.transitionsBetween(S,P);return L>Y?N:P}shiftToModuleCenter(s){let o=s[0],c=s[1],f=s[2],d=s[3],p=this.transitionsBetween(o,d)+1,x=this.transitionsBetween(f,d)+1,C=ne.shiftPoint(o,c,x*4),S=ne.shiftPoint(f,c,p*4);p=this.transitionsBetween(C,d)+1,x=this.transitionsBetween(S,d)+1,(p&1)===1&&(p+=1),(x&1)===1&&(x+=1);let N=(o.getX()+c.getX()+f.getX()+d.getX())/4,P=(o.getY()+c.getY()+f.getY()+d.getY())/4;o=ne.moveAway(o,N,P),c=ne.moveAway(c,N,P),f=ne.moveAway(f,N,P),d=ne.moveAway(d,N,P);let L,Y;return C=ne.shiftPoint(o,c,x*4),C=ne.shiftPoint(C,d,p*4),L=ne.shiftPoint(c,o,x*4),L=ne.shiftPoint(L,f,p*4),S=ne.shiftPoint(f,d,x*4),S=ne.shiftPoint(S,c,p*4),Y=ne.shiftPoint(d,f,x*4),Y=ne.shiftPoint(Y,o,p*4),[C,L,S,Y]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,c,f,d,p,x){return Wn.getInstance().sampleGrid(s,p,x,.5,.5,p-.5,.5,p-.5,x-.5,.5,x-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(s,o){let c=Math.trunc(s.getX()),f=Math.trunc(s.getY()),d=Math.trunc(o.getX()),p=Math.trunc(o.getY()),x=Math.abs(p-f)>Math.abs(d-c);if(x){let it=c;c=f,f=it,it=d,d=p,p=it}let C=Math.abs(d-c),S=Math.abs(p-f),N=-C/2,P=f<p?1:-1,L=c<d?1:-1,Y=0,tt=this.image.get(x?f:c,x?c:f);for(let it=c,lt=f;it!==d;it+=L){let gt=this.image.get(x?lt:it,x?it:lt);if(gt!==tt&&(Y++,tt=gt),N+=S,N>0){if(lt===p)break;lt+=P,N-=C}}return Y}}class yi{constructor(){this.decoder=new Ds}decode(s,o=null){let c,f;if(o!=null&&o.has(Rt.PURE_BARCODE)){const S=yi.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(S),f=yi.NO_POINTS}else{const S=new ne(s.getBlackMatrix()).detect();c=this.decoder.decode(S.getBits()),f=S.getPoints()}const d=c.getRawBytes(),p=new zt(c.getText(),d,8*d.length,f,Mt.DATA_MATRIX,q.currentTimeMillis()),x=c.getByteSegments();x!=null&&p.putMetadata(ce.BYTE_SEGMENTS,x);const C=c.getECLevel();return C!=null&&p.putMetadata(ce.ERROR_CORRECTION_LEVEL,C),p}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o==null||c==null)throw new ht;const f=this.moduleSize(o,s);let d=o[1];const p=c[1];let x=o[0];const S=(c[0]-x+1)/f,N=(p-d+1)/f;if(S<=0||N<=0)throw new ht;const P=f/2;d+=P,x+=P;const L=new Jt(S,N);for(let Y=0;Y<N;Y++){const tt=d+Y*f;for(let it=0;it<S;it++)s.get(x+it*f,tt)&&L.set(it,Y)}return L}static moduleSize(s,o){const c=o.getWidth();let f=s[0];const d=s[1];for(;f<c&&o.get(f,d);)f++;if(f===c)throw new ht;const p=f-s[0];if(p===0)throw new ht;return p}}yi.NO_POINTS=[];class ga extends Vt{constructor(s=500){super(new yi,s)}}var En;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(En||(En={}));class He{constructor(s,o,c){this.value=s,this.stringValue=o,this.bits=c,He.FOR_BITS.set(c,this),He.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return He.L;case"M":return He.M;case"Q":return He.Q;case"H":return He.H;default:throw new _(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof He))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=He.FOR_BITS.size)throw new b;return He.FOR_BITS.get(s)}}He.FOR_BITS=new Map,He.FOR_VALUE=new Map,He.L=new He(En.L,"L",1),He.M=new He(En.M,"M",0),He.Q=new He(En.Q,"Q",3),He.H=new He(En.H,"H",2);class Un{constructor(s){this.errorCorrectionLevel=He.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return W.bitCount(s^o)}static decodeFormatInformation(s,o){const c=Un.doDecodeFormatInformation(s,o);return c!==null?c:Un.doDecodeFormatInformation(s^Un.FORMAT_INFO_MASK_QR,o^Un.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let c=Number.MAX_SAFE_INTEGER,f=0;for(const d of Un.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===s||p===o)return new Un(d[1]);let x=Un.numBitsDiffering(s,p);x<c&&(f=d[1],c=x),s!==o&&(x=Un.numBitsDiffering(o,p),x<c&&(f=d[1],c=x))}return c<=3?new Un(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Un))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Un.FORMAT_INFO_MASK_QR=21522,Un.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ct{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const c of o)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class G{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Yt{constructor(s,o,...c){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=c;let f=0;const d=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const x of p)f+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new H;try{return this.getVersionForNumber((s-17)/4)}catch{throw new H}}static getVersionForNumber(s){if(s<1||s>40)throw new b;return Yt.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<Yt.VERSION_DECODE_INFO.length;f++){const d=Yt.VERSION_DECODE_INFO[f];if(d===s)return Yt.getVersionForNumber(f+7);const p=Un.numBitsDiffering(s,d);p<o&&(c=f+7,o=p)}return o<=3?Yt.getVersionForNumber(c):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new Jt(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const d=this.alignmentPatternCenters[f]-2;for(let p=0;p<c;p++)f===0&&(p===0||p===c-1)||f===c-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}Yt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Yt.VERSIONS=[new Yt(1,new Int32Array(0),new ct(7,new G(1,19)),new ct(10,new G(1,16)),new ct(13,new G(1,13)),new ct(17,new G(1,9))),new Yt(2,Int32Array.from([6,18]),new ct(10,new G(1,34)),new ct(16,new G(1,28)),new ct(22,new G(1,22)),new ct(28,new G(1,16))),new Yt(3,Int32Array.from([6,22]),new ct(15,new G(1,55)),new ct(26,new G(1,44)),new ct(18,new G(2,17)),new ct(22,new G(2,13))),new Yt(4,Int32Array.from([6,26]),new ct(20,new G(1,80)),new ct(18,new G(2,32)),new ct(26,new G(2,24)),new ct(16,new G(4,9))),new Yt(5,Int32Array.from([6,30]),new ct(26,new G(1,108)),new ct(24,new G(2,43)),new ct(18,new G(2,15),new G(2,16)),new ct(22,new G(2,11),new G(2,12))),new Yt(6,Int32Array.from([6,34]),new ct(18,new G(2,68)),new ct(16,new G(4,27)),new ct(24,new G(4,19)),new ct(28,new G(4,15))),new Yt(7,Int32Array.from([6,22,38]),new ct(20,new G(2,78)),new ct(18,new G(4,31)),new ct(18,new G(2,14),new G(4,15)),new ct(26,new G(4,13),new G(1,14))),new Yt(8,Int32Array.from([6,24,42]),new ct(24,new G(2,97)),new ct(22,new G(2,38),new G(2,39)),new ct(22,new G(4,18),new G(2,19)),new ct(26,new G(4,14),new G(2,15))),new Yt(9,Int32Array.from([6,26,46]),new ct(30,new G(2,116)),new ct(22,new G(3,36),new G(2,37)),new ct(20,new G(4,16),new G(4,17)),new ct(24,new G(4,12),new G(4,13))),new Yt(10,Int32Array.from([6,28,50]),new ct(18,new G(2,68),new G(2,69)),new ct(26,new G(4,43),new G(1,44)),new ct(24,new G(6,19),new G(2,20)),new ct(28,new G(6,15),new G(2,16))),new Yt(11,Int32Array.from([6,30,54]),new ct(20,new G(4,81)),new ct(30,new G(1,50),new G(4,51)),new ct(28,new G(4,22),new G(4,23)),new ct(24,new G(3,12),new G(8,13))),new Yt(12,Int32Array.from([6,32,58]),new ct(24,new G(2,92),new G(2,93)),new ct(22,new G(6,36),new G(2,37)),new ct(26,new G(4,20),new G(6,21)),new ct(28,new G(7,14),new G(4,15))),new Yt(13,Int32Array.from([6,34,62]),new ct(26,new G(4,107)),new ct(22,new G(8,37),new G(1,38)),new ct(24,new G(8,20),new G(4,21)),new ct(22,new G(12,11),new G(4,12))),new Yt(14,Int32Array.from([6,26,46,66]),new ct(30,new G(3,115),new G(1,116)),new ct(24,new G(4,40),new G(5,41)),new ct(20,new G(11,16),new G(5,17)),new ct(24,new G(11,12),new G(5,13))),new Yt(15,Int32Array.from([6,26,48,70]),new ct(22,new G(5,87),new G(1,88)),new ct(24,new G(5,41),new G(5,42)),new ct(30,new G(5,24),new G(7,25)),new ct(24,new G(11,12),new G(7,13))),new Yt(16,Int32Array.from([6,26,50,74]),new ct(24,new G(5,98),new G(1,99)),new ct(28,new G(7,45),new G(3,46)),new ct(24,new G(15,19),new G(2,20)),new ct(30,new G(3,15),new G(13,16))),new Yt(17,Int32Array.from([6,30,54,78]),new ct(28,new G(1,107),new G(5,108)),new ct(28,new G(10,46),new G(1,47)),new ct(28,new G(1,22),new G(15,23)),new ct(28,new G(2,14),new G(17,15))),new Yt(18,Int32Array.from([6,30,56,82]),new ct(30,new G(5,120),new G(1,121)),new ct(26,new G(9,43),new G(4,44)),new ct(28,new G(17,22),new G(1,23)),new ct(28,new G(2,14),new G(19,15))),new Yt(19,Int32Array.from([6,30,58,86]),new ct(28,new G(3,113),new G(4,114)),new ct(26,new G(3,44),new G(11,45)),new ct(26,new G(17,21),new G(4,22)),new ct(26,new G(9,13),new G(16,14))),new Yt(20,Int32Array.from([6,34,62,90]),new ct(28,new G(3,107),new G(5,108)),new ct(26,new G(3,41),new G(13,42)),new ct(30,new G(15,24),new G(5,25)),new ct(28,new G(15,15),new G(10,16))),new Yt(21,Int32Array.from([6,28,50,72,94]),new ct(28,new G(4,116),new G(4,117)),new ct(26,new G(17,42)),new ct(28,new G(17,22),new G(6,23)),new ct(30,new G(19,16),new G(6,17))),new Yt(22,Int32Array.from([6,26,50,74,98]),new ct(28,new G(2,111),new G(7,112)),new ct(28,new G(17,46)),new ct(30,new G(7,24),new G(16,25)),new ct(24,new G(34,13))),new Yt(23,Int32Array.from([6,30,54,78,102]),new ct(30,new G(4,121),new G(5,122)),new ct(28,new G(4,47),new G(14,48)),new ct(30,new G(11,24),new G(14,25)),new ct(30,new G(16,15),new G(14,16))),new Yt(24,Int32Array.from([6,28,54,80,106]),new ct(30,new G(6,117),new G(4,118)),new ct(28,new G(6,45),new G(14,46)),new ct(30,new G(11,24),new G(16,25)),new ct(30,new G(30,16),new G(2,17))),new Yt(25,Int32Array.from([6,32,58,84,110]),new ct(26,new G(8,106),new G(4,107)),new ct(28,new G(8,47),new G(13,48)),new ct(30,new G(7,24),new G(22,25)),new ct(30,new G(22,15),new G(13,16))),new Yt(26,Int32Array.from([6,30,58,86,114]),new ct(28,new G(10,114),new G(2,115)),new ct(28,new G(19,46),new G(4,47)),new ct(28,new G(28,22),new G(6,23)),new ct(30,new G(33,16),new G(4,17))),new Yt(27,Int32Array.from([6,34,62,90,118]),new ct(30,new G(8,122),new G(4,123)),new ct(28,new G(22,45),new G(3,46)),new ct(30,new G(8,23),new G(26,24)),new ct(30,new G(12,15),new G(28,16))),new Yt(28,Int32Array.from([6,26,50,74,98,122]),new ct(30,new G(3,117),new G(10,118)),new ct(28,new G(3,45),new G(23,46)),new ct(30,new G(4,24),new G(31,25)),new ct(30,new G(11,15),new G(31,16))),new Yt(29,Int32Array.from([6,30,54,78,102,126]),new ct(30,new G(7,116),new G(7,117)),new ct(28,new G(21,45),new G(7,46)),new ct(30,new G(1,23),new G(37,24)),new ct(30,new G(19,15),new G(26,16))),new Yt(30,Int32Array.from([6,26,52,78,104,130]),new ct(30,new G(5,115),new G(10,116)),new ct(28,new G(19,47),new G(10,48)),new ct(30,new G(15,24),new G(25,25)),new ct(30,new G(23,15),new G(25,16))),new Yt(31,Int32Array.from([6,30,56,82,108,134]),new ct(30,new G(13,115),new G(3,116)),new ct(28,new G(2,46),new G(29,47)),new ct(30,new G(42,24),new G(1,25)),new ct(30,new G(23,15),new G(28,16))),new Yt(32,Int32Array.from([6,34,60,86,112,138]),new ct(30,new G(17,115)),new ct(28,new G(10,46),new G(23,47)),new ct(30,new G(10,24),new G(35,25)),new ct(30,new G(19,15),new G(35,16))),new Yt(33,Int32Array.from([6,30,58,86,114,142]),new ct(30,new G(17,115),new G(1,116)),new ct(28,new G(14,46),new G(21,47)),new ct(30,new G(29,24),new G(19,25)),new ct(30,new G(11,15),new G(46,16))),new Yt(34,Int32Array.from([6,34,62,90,118,146]),new ct(30,new G(13,115),new G(6,116)),new ct(28,new G(14,46),new G(23,47)),new ct(30,new G(44,24),new G(7,25)),new ct(30,new G(59,16),new G(1,17))),new Yt(35,Int32Array.from([6,30,54,78,102,126,150]),new ct(30,new G(12,121),new G(7,122)),new ct(28,new G(12,47),new G(26,48)),new ct(30,new G(39,24),new G(14,25)),new ct(30,new G(22,15),new G(41,16))),new Yt(36,Int32Array.from([6,24,50,76,102,128,154]),new ct(30,new G(6,121),new G(14,122)),new ct(28,new G(6,47),new G(34,48)),new ct(30,new G(46,24),new G(10,25)),new ct(30,new G(2,15),new G(64,16))),new Yt(37,Int32Array.from([6,28,54,80,106,132,158]),new ct(30,new G(17,122),new G(4,123)),new ct(28,new G(29,46),new G(14,47)),new ct(30,new G(49,24),new G(10,25)),new ct(30,new G(24,15),new G(46,16))),new Yt(38,Int32Array.from([6,32,58,84,110,136,162]),new ct(30,new G(4,122),new G(18,123)),new ct(28,new G(13,46),new G(32,47)),new ct(30,new G(48,24),new G(14,25)),new ct(30,new G(42,15),new G(32,16))),new Yt(39,Int32Array.from([6,26,54,82,110,138,166]),new ct(30,new G(20,117),new G(4,118)),new ct(28,new G(40,47),new G(7,48)),new ct(30,new G(43,24),new G(22,25)),new ct(30,new G(10,15),new G(67,16))),new Yt(40,Int32Array.from([6,30,58,86,114,142,170]),new ct(30,new G(19,118),new G(6,119)),new ct(28,new G(18,47),new G(31,48)),new ct(30,new G(34,24),new G(34,25)),new ct(30,new G(20,15),new G(61,16)))];var Nn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(Nn||(Nn={}));class An{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let c=0;c<o;c++)for(let f=0;f<o;f++)this.isMasked(c,f)&&s.flip(f,c)}}An.values=new Map([[Nn.DATA_MASK_000,new An(Nn.DATA_MASK_000,(O,s)=>(O+s&1)===0)],[Nn.DATA_MASK_001,new An(Nn.DATA_MASK_001,(O,s)=>(O&1)===0)],[Nn.DATA_MASK_010,new An(Nn.DATA_MASK_010,(O,s)=>s%3===0)],[Nn.DATA_MASK_011,new An(Nn.DATA_MASK_011,(O,s)=>(O+s)%3===0)],[Nn.DATA_MASK_100,new An(Nn.DATA_MASK_100,(O,s)=>(Math.floor(O/2)+Math.floor(s/3)&1)===0)],[Nn.DATA_MASK_101,new An(Nn.DATA_MASK_101,(O,s)=>O*s%6===0)],[Nn.DATA_MASK_110,new An(Nn.DATA_MASK_110,(O,s)=>O*s%6<3)],[Nn.DATA_MASK_111,new An(Nn.DATA_MASK_111,(O,s)=>(O+s+O*s%3&1)===0)]]);class ps{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new H;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);const o=this.bitMatrix.getHeight();let c=0;const f=o-7;for(let d=o-1;d>=f;d--)c=this.copyBit(8,d,c);for(let d=o-8;d<o;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=Un.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return Yt.getVersionForNumber(o);let c=0;const f=s-11;for(let p=5;p>=0;p--)for(let x=s-9;x>=f;x--)c=this.copyBit(x,p,c);let d=Yt.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;c=0;for(let p=5;p>=0;p--)for(let x=s-9;x>=f;x--)c=this.copyBit(p,x,c);if(d=Yt.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new H}copyBit(s,o,c){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?c<<1|1:c<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),c=An.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let p=!0;const x=new Uint8Array(o.getTotalCodewords());let C=0,S=0,N=0;for(let P=f-1;P>0;P-=2){P===6&&P--;for(let L=0;L<f;L++){const Y=p?f-1-L:L;for(let tt=0;tt<2;tt++)d.get(P-tt,Y)||(N++,S<<=1,this.bitMatrix.get(P-tt,Y)&&(S|=1),N===8&&(x[C++]=S,N=0,S=0))}p=!p}if(C!==o.getTotalCodewords())throw new H;return x}remask(){if(this.parsedFormatInfo===null)return;const s=An.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,c=s.getWidth();o<c;o++)for(let f=o+1,d=s.getHeight();f<d;f++)s.get(o,f)!==s.get(f,o)&&(s.flip(f,o),s.flip(o,f))}}class ma{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,c){if(s.length!==o.getTotalCodewords())throw new b;const f=o.getECBlocksForLevel(c);let d=0;const p=f.getECBlocks();for(const tt of p)d+=tt.getCount();const x=new Array(d);let C=0;for(const tt of p)for(let it=0;it<tt.getCount();it++){const lt=tt.getDataCodewords(),gt=f.getECCodewordsPerBlock()+lt;x[C++]=new ma(lt,new Uint8Array(gt))}const S=x[0].codewords.length;let N=x.length-1;for(;N>=0&&x[N].codewords.length!==S;)N--;N++;const P=S-f.getECCodewordsPerBlock();let L=0;for(let tt=0;tt<P;tt++)for(let it=0;it<C;it++)x[it].codewords[tt]=s[L++];for(let tt=N;tt<C;tt++)x[tt].codewords[P]=s[L++];const Y=x[0].codewords.length;for(let tt=P;tt<Y;tt++)for(let it=0;it<C;it++){const lt=it<N?tt:tt+1;x[it].codewords[lt]=s[L++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ei;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(Ei||(Ei={}));class Xt{constructor(s,o,c,f){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=c,this.bits=f,Xt.FOR_BITS.set(f,this),Xt.FOR_VALUE.set(s,this)}static forBits(s){const o=Xt.FOR_BITS.get(s);if(o===void 0)throw new b;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let c;return o<=9?c=0:o<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Xt))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.TERMINATOR=new Xt(Ei.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xt.NUMERIC=new Xt(Ei.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xt.ALPHANUMERIC=new Xt(Ei.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xt.STRUCTURED_APPEND=new Xt(Ei.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xt.BYTE=new Xt(Ei.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xt.ECI=new Xt(Ei.ECI,"ECI",Int32Array.from([0,0,0]),7),Xt.KANJI=new Xt(Ei.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xt.FNC1_FIRST_POSITION=new Xt(Ei.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xt.FNC1_SECOND_POSITION=new Xt(Ei.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xt.HANZI=new Xt(Ei.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class an{static decode(s,o,c,f){const d=new hn(s);let p=new X;const x=new Array;let C=-1,S=-1;try{let N=null,P=!1,L;do{if(d.available()<4)L=Xt.TERMINATOR;else{const Y=d.readBits(4);L=Xt.forBits(Y)}switch(L){case Xt.TERMINATOR:break;case Xt.FNC1_FIRST_POSITION:case Xt.FNC1_SECOND_POSITION:P=!0;break;case Xt.STRUCTURED_APPEND:if(d.available()<16)throw new H;C=d.readBits(8),S=d.readBits(8);break;case Xt.ECI:const Y=an.parseECIValue(d);if(N=V.getCharacterSetECIByValue(Y),N===null)throw new H;break;case Xt.HANZI:const tt=d.readBits(4),it=d.readBits(L.getCharacterCountBits(o));tt===an.GB2312_SUBSET&&an.decodeHanziSegment(d,p,it);break;default:const lt=d.readBits(L.getCharacterCountBits(o));switch(L){case Xt.NUMERIC:an.decodeNumericSegment(d,p,lt);break;case Xt.ALPHANUMERIC:an.decodeAlphanumericSegment(d,p,lt,P);break;case Xt.BYTE:an.decodeByteSegment(d,p,lt,N,x,f);break;case Xt.KANJI:an.decodeKanjiSegment(d,p,lt);break;default:throw new H}break}}while(L!==Xt.TERMINATOR)}catch{throw new H}return new vi(s,p.toString(),x.length===0?null:x,c===null?null:c.toString(),C,S)}static decodeHanziSegment(s,o,c){if(c*13>s.available())throw new H;const f=new Uint8Array(2*c);let d=0;for(;c>0;){const p=s.readBits(13);let x=p/96<<8&4294967295|p%96;x<959?x+=41377:x+=42657,f[d]=x>>8&255,f[d+1]=x&255,d+=2,c--}try{o.append(K.decode(f,J.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(s,o,c){if(c*13>s.available())throw new H;const f=new Uint8Array(2*c);let d=0;for(;c>0;){const p=s.readBits(13);let x=p/192<<8&4294967295|p%192;x<7936?x+=33088:x+=49472,f[d]=x>>8,f[d+1]=x,d+=2,c--}try{o.append(K.decode(f,J.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(s,o,c,f,d,p){if(8*c>s.available())throw new H;const x=new Uint8Array(c);for(let S=0;S<c;S++)x[S]=s.readBits(8);let C;f===null?C=J.guessEncoding(x,p):C=f.getName();try{o.append(K.decode(x,C))}catch(S){throw new H(S)}d.push(x)}static toAlphaNumericChar(s){if(s>=an.ALPHANUMERIC_CHARS.length)throw new H;return an.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,c,f){const d=o.length();for(;c>1;){if(s.available()<11)throw new H;const p=s.readBits(11);o.append(an.toAlphaNumericChar(Math.floor(p/45))),o.append(an.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(s.available()<6)throw new H;o.append(an.toAlphaNumericChar(s.readBits(6)))}if(f)for(let p=d;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,""))}static decodeNumericSegment(s,o,c){for(;c>=3;){if(s.available()<10)throw new H;const f=s.readBits(10);if(f>=1e3)throw new H;o.append(an.toAlphaNumericChar(Math.floor(f/100))),o.append(an.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(an.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(s.available()<7)throw new H;const f=s.readBits(7);if(f>=100)throw new H;o.append(an.toAlphaNumericChar(Math.floor(f/10))),o.append(an.toAlphaNumericChar(f%10))}else if(c===1){if(s.available()<4)throw new H;const f=s.readBits(4);if(f>=10)throw new H;o.append(an.toAlphaNumericChar(f))}}static parseECIValue(s){const o=s.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const c=s.readBits(8);return(o&63)<<8&4294967295|c}if((o&224)===192){const c=s.readBits(16);return(o&31)<<16&4294967295|c}throw new H}}an.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",an.GB2312_SUBSET=1;class el{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class vr{constructor(){this.rsDecoder=new fs(we.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(Jt.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const c=new ps(s);let f=null;try{return this.decodeBitMatrixParser(c,o)}catch(d){f=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const d=this.decodeBitMatrixParser(c,o);return d.setOther(new el(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(s,o){const c=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),p=ma.getDataBlocks(d,c,f);let x=0;for(const N of p)x+=N.getNumDataCodewords();const C=new Uint8Array(x);let S=0;for(const N of p){const P=N.getCodewords(),L=N.getNumDataCodewords();this.correctErrors(P,L);for(let Y=0;Y<L;Y++)C[S++]=P[Y]}return an.decode(C,c,f,o)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new k}for(let f=0;f<o;f++)s[f]=c[f]}}class pa extends jt{constructor(s,o,c){super(s,o),this.estimatedModuleSize=c}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const f=(this.getX()+o)/2,d=(this.getY()+s)/2,p=(this.estimatedModuleSize+c)/2;return new pa(f,d,p)}}class Ms{constructor(s,o,c,f,d,p,x){this.image=s,this.startX=o,this.startY=c,this.width=f,this.height=d,this.moduleSize=p,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,c=this.width,f=s+c,d=this.startY+o/2,p=new Int32Array(3),x=this.image;for(let C=0;C<o;C++){const S=d+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));p[0]=0,p[1]=0,p[2]=0;let N=s;for(;N<f&&!x.get(N,S);)N++;let P=0;for(;N<f;){if(x.get(N,S))if(P===1)p[1]++;else if(P===2){if(this.foundPatternCross(p)){const L=this.handlePossibleCenter(p,S,N);if(L!==null)return L}p[0]=p[2],p[1]=1,p[2]=0,P=1}else p[++P]++;else P===1&&P++,p[P]++;N++}if(this.foundPatternCross(p)){const L=this.handlePossibleCenter(p,S,f);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ht}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,c=o/2;for(let f=0;f<3;f++)if(Math.abs(o-s[f])>=c)return!1;return!0}crossCheckVertical(s,o,c,f){const d=this.image,p=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let C=s;for(;C>=0&&d.get(o,C)&&x[1]<=c;)x[1]++,C--;if(C<0||x[1]>c)return NaN;for(;C>=0&&!d.get(o,C)&&x[0]<=c;)x[0]++,C--;if(x[0]>c)return NaN;for(C=s+1;C<p&&d.get(o,C)&&x[1]<=c;)x[1]++,C++;if(C===p||x[1]>c)return NaN;for(;C<p&&!d.get(o,C)&&x[2]<=c;)x[2]++,C++;if(x[2]>c)return NaN;const S=x[0]+x[1]+x[2];return 5*Math.abs(S-f)>=2*f?NaN:this.foundPatternCross(x)?Ms.centerFromEnd(x,C):NaN}handlePossibleCenter(s,o,c){const f=s[0]+s[1]+s[2],d=Ms.centerFromEnd(s,c),p=this.crossCheckVertical(o,d,2*s[1],f);if(!isNaN(p)){const x=(s[0]+s[1]+s[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(x,p,d))return S.combineEstimate(p,d,x);const C=new pa(d,p,x);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class Yr extends jt{constructor(s,o,c,f){super(s,o),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const f=this.count+1,d=(this.count*this.getX()+o)/f,p=(this.count*this.getY()+s)/f,x=(this.count*this.estimatedModuleSize+c)/f;return new Yr(d,p,x,f)}}class bi{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Dn{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get(Rt.TRY_HARDER)!==void 0,c=s!=null&&s.get(Rt.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),p=f.getWidth();let x=Math.floor(3*d/(4*Dn.MAX_MODULES));(x<Dn.MIN_SKIP||o)&&(x=Dn.MIN_SKIP);let C=!1;const S=new Int32Array(5);for(let P=x-1;P<d&&!C;P+=x){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let L=0;for(let Y=0;Y<p;Y++)if(f.get(Y,P))(L&1)===1&&L++,S[L]++;else if((L&1)===0)if(L===4)if(Dn.foundPatternCross(S)){if(this.handlePossibleCenter(S,P,Y,c)===!0)if(x=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const it=this.findRowSkip();it>S[2]&&(P+=it-S[2]-x,Y=p-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,L=3;continue}L=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,L=3;else S[++L]++;else S[L]++;Dn.foundPatternCross(S)&&this.handlePossibleCenter(S,P,p,c)===!0&&(x=S[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return jt.orderBestPatterns(N),new bi(N)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let d=0;d<5;d++){const p=s[d];if(p===0)return!1;o+=p}if(o<7)return!1;const c=o/7,f=c/2;return Math.abs(c-s[0])<f&&Math.abs(c-s[1])<f&&Math.abs(3*c-s[2])<3*f&&Math.abs(c-s[3])<f&&Math.abs(c-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,c,f){const d=this.getCrossCheckStateCount();let p=0;const x=this.image;for(;s>=p&&o>=p&&x.get(o-p,s-p);)d[2]++,p++;if(s<p||o<p)return!1;for(;s>=p&&o>=p&&!x.get(o-p,s-p)&&d[1]<=c;)d[1]++,p++;if(s<p||o<p||d[1]>c)return!1;for(;s>=p&&o>=p&&x.get(o-p,s-p)&&d[0]<=c;)d[0]++,p++;if(d[0]>c)return!1;const C=x.getHeight(),S=x.getWidth();for(p=1;s+p<C&&o+p<S&&x.get(o+p,s+p);)d[2]++,p++;if(s+p>=C||o+p>=S)return!1;for(;s+p<C&&o+p<S&&!x.get(o+p,s+p)&&d[3]<c;)d[3]++,p++;if(s+p>=C||o+p>=S||d[3]>=c)return!1;for(;s+p<C&&o+p<S&&x.get(o+p,s+p)&&d[4]<c;)d[4]++,p++;if(d[4]>=c)return!1;const N=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(N-f)<2*f&&Dn.foundPatternCross(d)}crossCheckVertical(s,o,c,f){const d=this.image,p=d.getHeight(),x=this.getCrossCheckStateCount();let C=s;for(;C>=0&&d.get(o,C);)x[2]++,C--;if(C<0)return NaN;for(;C>=0&&!d.get(o,C)&&x[1]<=c;)x[1]++,C--;if(C<0||x[1]>c)return NaN;for(;C>=0&&d.get(o,C)&&x[0]<=c;)x[0]++,C--;if(x[0]>c)return NaN;for(C=s+1;C<p&&d.get(o,C);)x[2]++,C++;if(C===p)return NaN;for(;C<p&&!d.get(o,C)&&x[3]<c;)x[3]++,C++;if(C===p||x[3]>=c)return NaN;for(;C<p&&d.get(o,C)&&x[4]<c;)x[4]++,C++;if(x[4]>=c)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-f)>=2*f?NaN:Dn.foundPatternCross(x)?Dn.centerFromEnd(x,C):NaN}crossCheckHorizontal(s,o,c,f){const d=this.image,p=d.getWidth(),x=this.getCrossCheckStateCount();let C=s;for(;C>=0&&d.get(C,o);)x[2]++,C--;if(C<0)return NaN;for(;C>=0&&!d.get(C,o)&&x[1]<=c;)x[1]++,C--;if(C<0||x[1]>c)return NaN;for(;C>=0&&d.get(C,o)&&x[0]<=c;)x[0]++,C--;if(x[0]>c)return NaN;for(C=s+1;C<p&&d.get(C,o);)x[2]++,C++;if(C===p)return NaN;for(;C<p&&!d.get(C,o)&&x[3]<c;)x[3]++,C++;if(C===p||x[3]>=c)return NaN;for(;C<p&&d.get(C,o)&&x[4]<c;)x[4]++,C++;if(x[4]>=c)return NaN;const S=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(S-f)>=f?NaN:Dn.foundPatternCross(x)?Dn.centerFromEnd(x,C):NaN}handlePossibleCenter(s,o,c,f){const d=s[0]+s[1]+s[2]+s[3]+s[4];let p=Dn.centerFromEnd(s,c),x=this.crossCheckVertical(o,Math.floor(p),s[2],d);if(!isNaN(x)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(x),s[2],d),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(x),Math.floor(p),s[2],d)))){const C=d/7;let S=!1;const N=this.possibleCenters;for(let P=0,L=N.length;P<L;P++){const Y=N[P];if(Y.aboutEquals(C,x,p)){N[P]=Y.combineEstimate(x,p,C),S=!0;break}}if(!S){const P=new Yr(p,x,C);N.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const c of this.possibleCenters)if(c.getCount()>=Dn.CENTER_QUORUM)if(o==null)o=c;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-c.getX())-Math.abs(o.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=Dn.CENTER_QUORUM&&(s++,o+=p.getEstimatedModuleSize());if(s<3)return!1;const f=o/c;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ht;const o=this.possibleCenters;let c;if(s>3){let f=0,d=0;for(const C of this.possibleCenters){const S=C.getEstimatedModuleSize();f+=S,d+=S*S}c=f/s;let p=Math.sqrt(d/s-c*c);o.sort((C,S)=>{const N=Math.abs(S.getEstimatedModuleSize()-c),P=Math.abs(C.getEstimatedModuleSize()-c);return N<P?-1:N>P?1:0});const x=Math.max(.2*c,p);for(let C=0;C<o.length&&o.length>3;C++){const S=o[C];Math.abs(S.getEstimatedModuleSize()-c)>x&&(o.splice(C,1),C--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();c=f/o.length,o.sort((d,p)=>{if(p.getCount()===d.getCount()){const x=Math.abs(p.getEstimatedModuleSize()-c),C=Math.abs(d.getEstimatedModuleSize()-c);return x<C?1:x>C?-1:0}else return p.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Dn.CENTER_QUORUM=2,Dn.MIN_SKIP=3,Dn.MAX_MODULES=57;class Sr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(Rt.NEED_RESULT_POINT_CALLBACK);const c=new Dn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){const o=s.getTopLeft(),c=s.getTopRight(),f=s.getBottomLeft(),d=this.calculateModuleSize(o,c,f);if(d<1)throw new ht("No pattern found in proccess finder.");const p=Sr.computeDimension(o,c,f,d),x=Yt.getProvisionalVersionForDimension(p),C=x.getDimensionForVersion()-7;let S=null;if(x.getAlignmentPatternCenters().length>0){const Y=c.getX()-o.getX()+f.getX(),tt=c.getY()-o.getY()+f.getY(),it=1-3/C,lt=Math.floor(o.getX()+it*(Y-o.getX())),gt=Math.floor(o.getY()+it*(tt-o.getY()));for(let Ot=4;Ot<=16;Ot<<=1)try{S=this.findAlignmentInRegion(d,lt,gt,Ot);break}catch(Lt){if(!(Lt instanceof ht))throw Lt}}const N=Sr.createTransform(o,c,f,S,p),P=Sr.sampleGrid(this.image,N,p);let L;return S===null?L=[f,o,c]:L=[f,o,c,S],new Ka(P,L)}static createTransform(s,o,c,f,d){const p=d-3.5;let x,C,S,N;return f!==null?(x=f.getX(),C=f.getY(),S=p-3,N=S):(x=o.getX()-s.getX()+c.getX(),C=o.getY()-s.getY()+c.getY(),S=p,N=p),ei.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,S,N,3.5,p,s.getX(),s.getY(),o.getX(),o.getY(),x,C,c.getX(),c.getY())}static sampleGrid(s,o,c){return Wn.getInstance().sampleGridWithTransform(s,c,c,o)}static computeDimension(s,o,c,f){const d=Zt.round(jt.distance(s,o)/f),p=Zt.round(jt.distance(s,c)/f);let x=Math.floor((d+p)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ht("Dimensions could be not found.")}return x}calculateModuleSize(s,o,c){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,o){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,c,f){let d=this.sizeOfBlackWhiteBlackRun(s,o,c,f),p=1,x=s-(c-s);x<0?(p=s/(s-x),x=0):x>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(x-s),x=this.image.getWidth()-1);let C=Math.floor(o-(f-o)*p);return p=1,C<0?(p=o/(o-C),C=0):C>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(C-o),C=this.image.getHeight()-1),x=Math.floor(s+(x-s)*p),d+=this.sizeOfBlackWhiteBlackRun(s,o,x,C),d-1}sizeOfBlackWhiteBlackRun(s,o,c,f){const d=Math.abs(f-o)>Math.abs(c-s);if(d){let Y=s;s=o,o=Y,Y=c,c=f,f=Y}const p=Math.abs(c-s),x=Math.abs(f-o);let C=-p/2;const S=s<c?1:-1,N=o<f?1:-1;let P=0;const L=c+S;for(let Y=s,tt=o;Y!==L;Y+=S){const it=d?tt:Y,lt=d?Y:tt;if(P===1===this.image.get(it,lt)){if(P===2)return Zt.distance(Y,tt,s,o);P++}if(C+=x,C>0){if(tt===f)break;tt+=N,C-=p}}return P===2?Zt.distance(c+S,f,s,o):NaN}findAlignmentInRegion(s,o,c,f){const d=Math.floor(f*s),p=Math.max(0,o-d),x=Math.min(this.image.getWidth()-1,o+d);if(x-p<s*3)throw new ht("Alignment top exceeds estimated module size.");const C=Math.max(0,c-d),S=Math.min(this.image.getHeight()-1,c+d);if(S-C<s*3)throw new ht("Alignment bottom exceeds estimated module size.");return new Ms(this.image,p,C,x-p,S-C,s,this.resultPointCallback).find()}}class Fi{constructor(){this.decoder=new vr}getDecoder(){return this.decoder}decode(s,o){let c,f;if(o!=null&&o.get(Rt.PURE_BARCODE)!==void 0){const C=Fi.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(C,o),f=Fi.NO_POINTS}else{const C=new Sr(s.getBlackMatrix()).detect(o);c=this.decoder.decodeBitMatrix(C.getBits(),o),f=C.getPoints()}c.getOther()instanceof el&&c.getOther().applyMirroredCorrection(f);const d=new zt(c.getText(),c.getRawBytes(),void 0,f,Mt.QR_CODE,void 0),p=c.getByteSegments();p!==null&&d.putMetadata(ce.BYTE_SEGMENTS,p);const x=c.getECLevel();return x!==null&&d.putMetadata(ce.ERROR_CORRECTION_LEVEL,x),c.hasStructuredAppend()&&(d.putMetadata(ce.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(ce.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o===null||c===null)throw new ht;const f=this.moduleSize(o,s);let d=o[1],p=c[1],x=o[0],C=c[0];if(x>=C||d>=p)throw new ht;if(p-d!==C-x&&(C=x+(p-d),C>=s.getWidth()))throw new ht;const S=Math.round((C-x+1)/f),N=Math.round((p-d+1)/f);if(S<=0||N<=0)throw new ht;if(N!==S)throw new ht;const P=Math.floor(f/2);d+=P,x+=P;const L=x+Math.floor((S-1)*f)-C;if(L>0){if(L>P)throw new ht;x-=L}const Y=d+Math.floor((N-1)*f)-p;if(Y>0){if(Y>P)throw new ht;d-=Y}const tt=new Jt(S,N);for(let it=0;it<N;it++){const lt=d+Math.floor(it*f);for(let gt=0;gt<S;gt++)s.get(x+Math.floor(gt*f),lt)&&tt.set(gt,it)}return tt}static moduleSize(s,o){const c=o.getHeight(),f=o.getWidth();let d=s[0],p=s[1],x=!0,C=0;for(;d<f&&p<c;){if(x!==o.get(d,p)){if(++C===5)break;x=!x}d++,p++}if(d===f||p===c)throw new ht;return(d-s[0])/7}}Fi.NO_POINTS=new Array;class Wt{PDF417Common(){}static getBitCountSum(s){return Zt.sum(s)}static toIntArray(s){if(s==null||!s.length)return Wt.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let c=0;for(const f of s)o[c++]=f;return o}static getCodeword(s){const o=Z.binarySearch(Wt.SYMBOL_TABLE,s&262143);return o<0?-1:(Wt.CODEWORD_TABLE[o]-1)%Wt.NUMBER_OF_CODEWORDS}}Wt.NUMBER_OF_CODEWORDS=929,Wt.MAX_CODEWORDS_IN_BARCODE=Wt.NUMBER_OF_CODEWORDS-1,Wt.MIN_ROWS_IN_BARCODE=3,Wt.MAX_ROWS_IN_BARCODE=90,Wt.MODULES_IN_CODEWORD=17,Wt.MODULES_IN_STOP_PATTERN=18,Wt.BARS_IN_MODULE=8,Wt.EMPTY_INT_ARRAY=new Int32Array([]),Wt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Wt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ii{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ie{static detectMultiple(s,o,c){let f=s.getBlackMatrix(),d=ie.detect(c,f);return d.length||(f=f.clone(),f.rotate180(),d=ie.detect(c,f)),new Ii(f,d)}static detect(s,o){const c=new Array;let f=0,d=0,p=!1;for(;f<o.getHeight();){const x=ie.findVertices(o,f,d);if(x[0]==null&&x[3]==null){if(!p)break;p=!1,d=0;for(const C of c)C[1]!=null&&(f=Math.trunc(Math.max(f,C[1].getY()))),C[3]!=null&&(f=Math.max(f,Math.trunc(C[3].getY())));f+=ie.ROW_STEP;continue}if(p=!0,c.push(x),!s)break;x[2]!=null?(d=Math.trunc(x[2].getX()),f=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),f=Math.trunc(x[4].getY()))}return c}static findVertices(s,o,c){const f=s.getHeight(),d=s.getWidth(),p=new Array(8);return ie.copyToResult(p,ie.findRowsWithPattern(s,f,d,o,c,ie.START_PATTERN),ie.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),ie.copyToResult(p,ie.findRowsWithPattern(s,f,d,o,c,ie.STOP_PATTERN),ie.INDEXES_STOP_PATTERN),p}static copyToResult(s,o,c){for(let f=0;f<c.length;f++)s[c[f]]=o[f]}static findRowsWithPattern(s,o,c,f,d,p){const x=new Array(4);let C=!1;const S=new Int32Array(p.length);for(;f<o;f+=ie.ROW_STEP){let P=ie.findGuardPattern(s,d,f,c,!1,p,S);if(P!=null){for(;f>0;){const L=ie.findGuardPattern(s,d,--f,c,!1,p,S);if(L!=null)P=L;else{f++;break}}x[0]=new jt(P[0],f),x[1]=new jt(P[1],f),C=!0;break}}let N=f+1;if(C){let P=0,L=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;N<o;N++){const Y=ie.findGuardPattern(s,L[0],N,c,!1,p,S);if(Y!=null&&Math.abs(L[0]-Y[0])<ie.MAX_PATTERN_DRIFT&&Math.abs(L[1]-Y[1])<ie.MAX_PATTERN_DRIFT)L=Y,P=0;else{if(P>ie.SKIPPED_ROW_COUNT_MAX)break;P++}}N-=P+1,x[2]=new jt(L[0],N),x[3]=new jt(L[1],N)}return N-f<ie.BARCODE_MIN_HEIGHT&&Z.fill(x,null),x}static findGuardPattern(s,o,c,f,d,p,x){Z.fillWithin(x,0,x.length,0);let C=o,S=0;for(;s.get(C,c)&&C>0&&S++<ie.MAX_PIXEL_DRIFT;)C--;let N=C,P=0,L=p.length;for(let Y=d;N<f;N++)if(s.get(N,c)!==Y)x[P]++;else{if(P===L-1){if(ie.patternMatchVariance(x,p,ie.MAX_INDIVIDUAL_VARIANCE)<ie.MAX_AVG_VARIANCE)return new Int32Array([C,N]);C+=x[0]+x[1],q.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,Y=!Y}return P===L-1&&ie.patternMatchVariance(x,p,ie.MAX_INDIVIDUAL_VARIANCE)<ie.MAX_AVG_VARIANCE?new Int32Array([C,N-1]):null}static patternMatchVariance(s,o,c){let f=s.length,d=0,p=0;for(let S=0;S<f;S++)d+=s[S],p+=o[S];if(d<p)return 1/0;let x=d/p;c*=x;let C=0;for(let S=0;S<f;S++){let N=s[S],P=o[S]*x,L=N>P?N-P:P-N;if(L>c)return 1/0;C+=L}return C/d}}ie.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ie.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ie.MAX_AVG_VARIANCE=.42,ie.MAX_INDIVIDUAL_VARIANCE=.8,ie.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ie.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ie.MAX_PIXEL_DRIFT=3,ie.MAX_PATTERN_DRIFT=5,ie.SKIPPED_ROW_COUNT_MAX=25,ie.ROW_STEP=5,ie.BARCODE_MIN_HEIGHT=10;class gn{constructor(s,o){if(o.length===0)throw new b;this.field=s;let c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),q.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)o=this.field.add(this.field.multiply(s,o),this.coefficients[f]);return o}add(s){if(!this.field.equals(s.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){let p=o;o=c,c=p}let f=new Int32Array(c.length),d=c.length-o.length;q.arraycopy(c,0,f,0,d);for(let p=d;p<c.length;p++)f[p]=this.field.add(o[p-d],c[p]);return new gn(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new b("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof gn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new gn(this.field,new Int32Array([0]));let o=this.coefficients,c=o.length,f=s.coefficients,d=f.length,p=new Int32Array(c+d-1);for(let x=0;x<c;x++){let C=o[x];for(let S=0;S<d;S++)p[x+S]=this.field.add(p[x+S],this.field.multiply(C,f[S]))}return new gn(this.field,p)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.subtract(0,this.coefficients[c]);return new gn(this.field,o)}multiplyScalar(s){if(s===0)return new gn(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,c=new Int32Array(o);for(let f=0;f<o;f++)c[f]=this.field.multiply(this.coefficients[f],s);return new gn(this.field,c)}multiplyByMonomial(s,o){if(s<0)throw new b;if(o===0)return new gn(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+s);for(let d=0;d<c;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new gn(this.field,f)}toString(){let s=new X;for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(o===0||c!==1)&&s.append(c),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class lr{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new b;return this.logTable[s]}inverse(s){if(s===0)throw new hs;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Ze extends lr{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let f=0;f<s;f++)this.expTable[f]=c,c=c*o%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new gn(this,new Int32Array([0])),this.one=new gn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new b;if(o===0)return this.zero;let c=new Int32Array(s+1);return c[0]=o,new gn(this,c)}}Ze.PDF417_GF=new Ze(Wt.NUMBER_OF_CODEWORDS,3);class ya{constructor(){this.field=Ze.PDF417_GF}decode(s,o,c){let f=new gn(this.field,s),d=new Int32Array(o),p=!1;for(let tt=o;tt>0;tt--){let it=f.evaluateAt(this.field.exp(tt));d[o-tt]=it,it!==0&&(p=!0)}if(!p)return 0;let x=this.field.getOne();if(c!=null)for(const tt of c){let it=this.field.exp(s.length-1-tt),lt=new gn(this.field,new Int32Array([this.field.subtract(0,it),1]));x=x.multiply(lt)}let C=new gn(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),C,o),N=S[0],P=S[1],L=this.findErrorLocations(N),Y=this.findErrorMagnitudes(P,N,L);for(let tt=0;tt<L.length;tt++){let it=s.length-1-this.field.log(L[tt]);if(it<0)throw k.getChecksumInstance();s[it]=this.field.subtract(s[it],Y[tt])}return L.length}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){let L=s;s=o,o=L}let f=s,d=o,p=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let L=f,Y=p;if(f=d,p=x,f.isZero())throw k.getChecksumInstance();d=L;let tt=this.field.getZero(),it=f.getCoefficient(f.getDegree()),lt=this.field.inverse(it);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let gt=d.getDegree()-f.getDegree(),Ot=this.field.multiply(d.getCoefficient(d.getDegree()),lt);tt=tt.add(this.field.buildMonomial(gt,Ot)),d=d.subtract(f.multiplyByMonomial(gt,Ot))}x=tt.multiply(p).subtract(Y).negative()}let C=x.getCoefficient(0);if(C===0)throw k.getChecksumInstance();let S=this.field.inverse(C),N=x.multiply(S),P=d.multiply(S);return[N,P]}findErrorLocations(s){let o=s.getDegree(),c=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)s.evaluateAt(d)===0&&(c[f]=this.field.inverse(d),f++);if(f!==o)throw k.getChecksumInstance();return c}findErrorMagnitudes(s,o,c){let f=o.getDegree(),d=new Int32Array(f);for(let S=1;S<=f;S++)d[f-S]=this.field.multiply(S,o.getCoefficient(S));let p=new gn(this.field,d),x=c.length,C=new Int32Array(x);for(let S=0;S<x;S++){let N=this.field.inverse(c[S]),P=this.field.subtract(0,s.evaluateAt(N)),L=this.field.inverse(p.evaluateAt(N));C[S]=this.field.multiply(P,L)}return C}}class Xr{constructor(s,o,c,f,d){s instanceof Xr?this.constructor_2(s):this.constructor_1(s,o,c,f,d)}constructor_1(s,o,c,f,d){const p=o==null||c==null,x=f==null||d==null;if(p&&x)throw new ht;p?(o=new jt(0,f.getY()),c=new jt(0,d.getY())):x&&(f=new jt(s.getWidth()-1,o.getY()),d=new jt(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=o,this.bottomLeft=c,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new Xr(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,c){let f=this.topLeft,d=this.bottomLeft,p=this.topRight,x=this.bottomRight;if(s>0){let C=c?this.topLeft:this.topRight,S=Math.trunc(C.getY()-s);S<0&&(S=0);let N=new jt(C.getX(),S);c?f=N:p=N}if(o>0){let C=c?this.bottomLeft:this.bottomRight,S=Math.trunc(C.getY()+o);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let N=new jt(C.getX(),S);c?d=N:x=N}return new Xr(this.image,f,d,p,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ea{constructor(s,o,c,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=c,this.rowCount=o+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class br{constructor(){this.buffer=""}static form(s,o){let c=-1;function f(p,x,C,S,N,P){if(p==="%%")return"%";if(o[++c]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let L=N?parseInt(N.substr(1)):void 0,Y;switch(P){case"s":Y=o[c];break;case"c":Y=o[c][0];break;case"f":Y=parseFloat(o[c]).toFixed(p);break;case"p":Y=parseFloat(o[c]).toPrecision(p);break;case"e":Y=parseFloat(o[c]).toExponential(p);break;case"x":Y=parseInt(o[c]).toString(L||16);break;case"d":Y=parseFloat(parseInt(o[c],L||10).toPrecision(p)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(L);let tt=parseInt(C),it=C&&C[0]+""=="0"?"0":" ";for(;Y.length<tt;)Y=x!==void 0?Y+it:it+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,f)}format(s,...o){this.buffer+=br.form(s,o)}toString(){return this.buffer}}class ys{constructor(s){this.boundingBox=new Xr(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let c=1;c<ys.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(s)-c;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(s)+c,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new br;let o=0;for(const c of this.codewords){if(c==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,c.getRowNumber(),c.getValue())}return s.toString()}}ys.MAX_NEARBY_DISTANCE=5;class xn{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[c,f]of this.values.entries()){const d={getKey:()=>c,getValue:()=>f};d.getValue()>s?(s=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===s&&o.push(d.getKey())}return Wt.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class ci extends ys{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),C=-1,S=1,N=0;for(let P=p;P<x;P++){if(o[P]==null)continue;let L=o[P],Y=L.getRowNumber()-C;if(Y===0)N++;else if(Y===1)S=Math.max(S,N),N=1,C=L.getRowNumber();else if(Y<0||L.getRowNumber()>=s.getRowCount()||Y>P)o[P]=null;else{let tt;S>2?tt=(S-2)*Y:tt=Y;let it=tt>=P;for(let lt=1;lt<=tt&&!it;lt++)it=o[P-lt]!=null;it?o[P]=null:(C=L.getRowNumber(),N=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=this.getCodewords(),C=-1;for(let S=d;S<p;S++){if(x[S]==null)continue;let N=x[S];N.setRowNumberAsRowIndicatorColumn();let P=N.getRowNumber()-C;P===0||(P===1?C=N.getRowNumber():N.getRowNumber()>=s.getRowCount()?x[S]=null:C=N.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new xn,c=new xn,f=new xn,d=new xn;for(let x of s){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let C=x.getValue()%30,S=x.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:c.setValue(C*3+1);break;case 1:d.setValue(C/3),f.setValue(C%3);break;case 2:o.setValue(C+1);break}}if(o.getValue().length===0||c.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<Wt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>Wt.MAX_ROWS_IN_BARCODE)return null;let p=new Ea(o.getValue()[0],c.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,o){for(let c=0;c<s.length;c++){let f=s[c];if(s[c]==null)continue;let d=f.getValue()%30,p=f.getRowNumber();if(p>o.getRowCount()){s[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(s[c]=null);break;case 2:d+1!==o.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ir{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Wt.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let c=this.detectionResultColumns[o].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&o[c]!=null&&s[c].getRowNumber()===o[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[c];d!=null&&(d.setRowNumber(s[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let x=this.detectionResultColumns[p].getCodewords()[c];x!=null&&(d=Ir.adjustRowNumberIfValid(f,d,x),x.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let x=this.detectionResultColumns[p].getCodewords()[c];x!=null&&(d=Ir.adjustRowNumberIfValid(f,d,x),x.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,c){if(!this.detectionResultColumns[s-1])return;let f=c[o],d=this.detectionResultColumns[s-1].getCodewords(),p=d;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let x=new Array(14);x[2]=d[o],x[3]=p[o],o>0&&(x[0]=c[o-1],x[4]=d[o-1],x[5]=p[o-1]),o>1&&(x[8]=c[o-2],x[10]=d[o-2],x[11]=p[o-2]),o<c.length-1&&(x[1]=c[o+1],x[6]=d[o+1],x[7]=p[o+1]),o<c.length-2&&(x[9]=c[o+2],x[12]=d[o+2],x[13]=p[o+2]);for(let C of x)if(Ir.adjustRowNumber(f,C))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new br;for(let c=0;c<s.getCodewords().length;c++){o.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[c];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Rr{constructor(s,o,c,f){this.rowNumber=Rr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Rr.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Rr.BARCODE_ROW_UNKNOWN=-1;class Fn{static initialize(){for(let s=0;s<Wt.SYMBOL_TABLE.length;s++){let o=Wt.SYMBOL_TABLE[s],c=o&1;for(let f=0;f<Wt.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===c;)d+=1,o>>=1;c=o&1,Fn.RATIOS_TABLE[s]||(Fn.RATIOS_TABLE[s]=new Array(Wt.BARS_IN_MODULE)),Fn.RATIOS_TABLE[s][Wt.BARS_IN_MODULE-f-1]=Math.fround(d/Wt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=Fn.getDecodedCodewordValue(Fn.sampleBitCounts(s));return o!==-1?o:Fn.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=Zt.sum(s),c=new Int32Array(Wt.BARS_IN_MODULE),f=0,d=0;for(let p=0;p<Wt.MODULES_IN_CODEWORD;p++){let x=o/(2*Wt.MODULES_IN_CODEWORD)+p*o/Wt.MODULES_IN_CODEWORD;d+s[f]<=x&&(d+=s[f],f++),c[f]++}return c}static getDecodedCodewordValue(s){let o=Fn.getBitValue(s);return Wt.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let c=0;c<s.length;c++)for(let f=0;f<s[c];f++)o=o<<1|(c%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=Zt.sum(s),c=new Array(Wt.BARS_IN_MODULE);if(o>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(s[p]/o);let f=In.MAX_VALUE,d=-1;this.bSymbolTableReady||Fn.initialize();for(let p=0;p<Fn.RATIOS_TABLE.length;p++){let x=0,C=Fn.RATIOS_TABLE[p];for(let S=0;S<Wt.BARS_IN_MODULE;S++){let N=Math.fround(C[S]-c[S]);if(x+=Math.fround(N*N),x>=f)break}x<f&&(f=x,d=Wt.SYMBOL_TABLE[p])}return d}}Fn.bSymbolTableReady=!1,Fn.RATIOS_TABLE=new Array(Wt.SYMBOL_TABLE.length).map(O=>new Array(Wt.BARS_IN_MODULE));class Aa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Os{static parseLong(s,o=void 0){return parseInt(s,o)}}class Nr extends y{}Nr.kind="NullPointerException";class xa{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,c){if(s==null)throw new Nr;if(o<0||o>s.length||c<0||o+c>s.length||o+c<0)throw new j;if(c===0)return;for(let f=0;f<c;f++)this.write(s[o+f])}flush(){}close(){}}class wa extends y{}class ru extends xa{constructor(s=32){if(super(),this.count=0,s<0)throw new b("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new wa;c=W.MAX_VALUE}this.buf=Z.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,c){if(o<0||o>s.length||c<0||o+c-s.length>0)throw new j;this.ensureCapacity(this.count+c),q.arraycopy(s,o,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Ve;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ve||(Ve={}));function Ps(){if(typeof window<"u")return window.BigInt||null;if(typeof Wf<"u")return Wf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Es;function Dr(O){if(typeof Es>"u"&&(Es=Ps()),Es===null)throw new Error("BigInt is not supported!");return Es(O)}function nl(){let O=[];O[0]=Dr(1);let s=Dr(900);O[1]=s;for(let o=2;o<16;o++)O[o]=O[o-1]*s;return O}class mt{static decode(s,o){let c=new X(""),f=V.ISO8859_1;c.enableDecoding(f);let d=1,p=s[d++],x=new Aa;for(;d<s[0];){switch(p){case mt.TEXT_COMPACTION_MODE_LATCH:d=mt.textCompaction(s,d,c);break;case mt.BYTE_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:d=mt.byteCompaction(p,s,f,d,c);break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d++]);break;case mt.NUMERIC_COMPACTION_MODE_LATCH:d=mt.numericCompaction(s,d,c);break;case mt.ECI_CHARSET:V.getCharacterSetECIByValue(s[d++]);break;case mt.ECI_GENERAL_PURPOSE:d+=2;break;case mt.ECI_USER_DEFINED:d++;break;case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=mt.decodeMacroBlock(s,d,x);break;case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=mt.textCompaction(s,d,c);break}if(d<s.length)p=s[d++];else throw H.getFormatInstance()}if(c.length()===0)throw H.getFormatInstance();let C=new vi(null,c.toString(),null,o);return C.setOther(x),C}static decodeMacroBlock(s,o,c){if(o+mt.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw H.getFormatInstance();let f=new Int32Array(mt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<mt.NUMBER_OF_SEQUENCE_CODEWORDS;x++,o++)f[x]=s[o];c.setSegmentIndex(W.parseInt(mt.decodeBase900toBase10(f,mt.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new X;o=mt.textCompaction(s,o,d),c.setFileId(d.toString());let p=-1;for(s[o]===mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<s[0];)switch(s[o]){case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new X;o=mt.textCompaction(s,o+1,x),c.setFileName(x.toString());break;case mt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new X;o=mt.textCompaction(s,o+1,C),c.setSender(C.toString());break;case mt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new X;o=mt.textCompaction(s,o+1,S),c.setAddressee(S.toString());break;case mt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new X;o=mt.numericCompaction(s,o+1,N),c.setSegmentCount(W.parseInt(N.toString()));break;case mt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new X;o=mt.numericCompaction(s,o+1,P),c.setTimestamp(Os.parseLong(P.toString()));break;case mt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new X;o=mt.numericCompaction(s,o+1,L),c.setChecksum(W.parseInt(L.toString()));break;case mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new X;o=mt.numericCompaction(s,o+1,Y),c.setFileSize(Os.parseLong(Y.toString()));break;default:throw H.getFormatInstance()}break;case mt.MACRO_PDF417_TERMINATOR:o++,c.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(p!==-1){let x=o-p;c.isLastSegment()&&x--,c.setOptionalData(Z.copyOfRange(s,p,p+x))}return o}static textCompaction(s,o,c){let f=new Int32Array((s[0]-o)*2),d=new Int32Array((s[0]-o)*2),p=0,x=!1;for(;o<s[0]&&!x;){let C=s[o++];if(C<mt.TEXT_COMPACTION_MODE_LATCH)f[p]=C/30,f[p+1]=C%30,p+=2;else switch(C){case mt.TEXT_COMPACTION_MODE_LATCH:f[p++]=mt.TEXT_COMPACTION_MODE_LATCH;break;case mt.BYTE_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.NUMERIC_COMPACTION_MODE_LATCH:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:o--,x=!0;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=s[o++],d[p]=C,p++;break}}return mt.decodeTextCompaction(f,d,p,c),o}static decodeTextCompaction(s,o,c,f){let d=Ve.ALPHA,p=Ve.ALPHA,x=0;for(;x<c;){let C=s[x],S="";switch(d){case Ve.ALPHA:if(C<26)S=String.fromCharCode(65+C);else switch(C){case 26:S=" ";break;case mt.LL:d=Ve.LOWER;break;case mt.ML:d=Ve.MIXED;break;case mt.PS:p=d,d=Ve.PUNCT_SHIFT;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.LOWER:if(C<26)S=String.fromCharCode(97+C);else switch(C){case 26:S=" ";break;case mt.AS:p=d,d=Ve.ALPHA_SHIFT;break;case mt.ML:d=Ve.MIXED;break;case mt.PS:p=d,d=Ve.PUNCT_SHIFT;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.MIXED:if(C<mt.PL)S=mt.MIXED_CHARS[C];else switch(C){case mt.PL:d=Ve.PUNCT;break;case 26:S=" ";break;case mt.LL:d=Ve.LOWER;break;case mt.AL:d=Ve.ALPHA;break;case mt.PS:p=d,d=Ve.PUNCT_SHIFT;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.PUNCT:if(C<mt.PAL)S=mt.PUNCT_CHARS[C];else switch(C){case mt.PAL:d=Ve.ALPHA;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.ALPHA_SHIFT:if(d=p,C<26)S=String.fromCharCode(65+C);else switch(C){case 26:S=" ";break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.PUNCT_SHIFT:if(d=p,C<mt.PAL)S=mt.PUNCT_CHARS[C];else switch(C){case mt.PAL:d=Ve.ALPHA;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break}S!==""&&f.append(S),x++}}static byteCompaction(s,o,c,f,d){let p=new ru,x=0,C=0,S=!1;switch(s){case mt.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),P=o[f++];for(;f<o[0]&&!S;)switch(N[x++]=P,C=900*C+P,P=o[f++],P){case mt.TEXT_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH:case mt.NUMERIC_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:f--,S=!0;break;default:if(x%5===0&&x>0){for(let L=0;L<6;++L)p.write(Number(Dr(C)>>Dr(8*(5-L))));C=0,x=0}break}f===o[0]&&P<mt.TEXT_COMPACTION_MODE_LATCH&&(N[x++]=P);for(let L=0;L<x;L++)p.write(N[L]);break;case mt.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!S;){let L=o[f++];if(L<mt.TEXT_COMPACTION_MODE_LATCH)x++,C=900*C+L;else switch(L){case mt.TEXT_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH:case mt.NUMERIC_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:f--,S=!0;break}if(x%5===0&&x>0){for(let Y=0;Y<6;++Y)p.write(Number(Dr(C)>>Dr(8*(5-Y))));C=0,x=0}}break}return d.append(K.decode(p.toByteArray(),c)),f}static numericCompaction(s,o,c){let f=0,d=!1,p=new Int32Array(mt.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!d;){let x=s[o++];if(o===s[0]&&(d=!0),x<mt.TEXT_COMPACTION_MODE_LATCH)p[f]=x,f++;else switch(x){case mt.TEXT_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%mt.MAX_NUMERIC_CODEWORDS===0||x===mt.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(c.append(mt.decodeBase900toBase10(p,f)),f=0)}return o}static decodeBase900toBase10(s,o){let c=Dr(0);for(let d=0;d<o;d++)c+=mt.EXP900[o-d-1]*Dr(s[d]);let f=c.toString();if(f.charAt(0)!=="1")throw new H;return f.substring(1)}}mt.TEXT_COMPACTION_MODE_LATCH=900,mt.BYTE_COMPACTION_MODE_LATCH=901,mt.NUMERIC_COMPACTION_MODE_LATCH=902,mt.BYTE_COMPACTION_MODE_LATCH_6=924,mt.ECI_USER_DEFINED=925,mt.ECI_GENERAL_PURPOSE=926,mt.ECI_CHARSET=927,mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,mt.MACRO_PDF417_TERMINATOR=922,mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,mt.MAX_NUMERIC_CODEWORDS=15,mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,mt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,mt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,mt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,mt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,mt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,mt.PL=25,mt.LL=27,mt.AS=27,mt.ML=28,mt.AL=28,mt.PS=29,mt.PAL=29,mt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,mt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",mt.EXP900=Ps()?nl():[],mt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class de{constructor(){}static decode(s,o,c,f,d,p,x){let C=new Xr(s,o,c,f,d),S=null,N=null,P;for(let tt=!0;;tt=!1){if(o!=null&&(S=de.getRowIndicatorColumn(s,C,o,!0,p,x)),f!=null&&(N=de.getRowIndicatorColumn(s,C,f,!1,p,x)),P=de.merge(S,N),P==null)throw ht.getNotFoundInstance();let it=P.getBoundingBox();if(tt&&it!=null&&(it.getMinY()<C.getMinY()||it.getMaxY()>C.getMaxY()))C=it;else break}P.setBoundingBox(C);let L=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,S),P.setDetectionResultColumn(L,N);let Y=S!=null;for(let tt=1;tt<=L;tt++){let it=Y?tt:L-tt;if(P.getDetectionResultColumn(it)!==void 0)continue;let lt;it===0||it===L?lt=new ci(C,it===0):lt=new ys(C),P.setDetectionResultColumn(it,lt);let gt=-1,Ot=gt;for(let Lt=C.getMinY();Lt<=C.getMaxY();Lt++){if(gt=de.getStartColumn(P,it,Lt,Y),gt<0||gt>C.getMaxX()){if(Ot===-1)continue;gt=Ot}let Nt=de.detectCodeword(s,C.getMinX(),C.getMaxX(),Y,gt,Lt,p,x);Nt!=null&&(lt.setCodeword(Lt,Nt),Ot=gt,p=Math.min(p,Nt.getWidth()),x=Math.max(x,Nt.getWidth()))}}return de.createDecoderResult(P)}static merge(s,o){if(s==null&&o==null)return null;let c=de.getBarcodeMetadata(s,o);if(c==null)return null;let f=Xr.merge(de.adjustBoundingBox(s),de.adjustBoundingBox(o));return new Ir(c,f)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let c=de.getMax(o),f=0;for(let x of o)if(f+=c-x,x>0)break;let d=s.getCodewords();for(let x=0;f>0&&d[x]==null;x++)f--;let p=0;for(let x=o.length-1;x>=0&&(p+=c-o[x],!(o[x]>0));x--);for(let x=d.length-1;p>0&&d[x]==null;x--)p--;return s.getBoundingBox().addMissingRows(f,p,s.isLeft())}static getMax(s){let o=-1;for(let c of s)o=Math.max(o,c);return o}static getBarcodeMetadata(s,o){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(s,o,c,f,d,p){let x=new ci(o,f);for(let C=0;C<2;C++){let S=C===0?1:-1,N=Math.trunc(Math.trunc(c.getX()));for(let P=Math.trunc(Math.trunc(c.getY()));P<=o.getMaxY()&&P>=o.getMinY();P+=S){let L=de.detectCodeword(s,0,s.getWidth(),f,N,P,d,p);L!=null&&(x.setCodeword(P,L),f?N=L.getStartX():N=L.getEndX())}}return x}static adjustCodewordCount(s,o){let c=o[0][1],f=c.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-de.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(d<1||d>Wt.MAX_CODEWORDS_IN_BARCODE)throw ht.getNotFoundInstance();c.setValue(d)}else f[0]!==d&&c.setValue(d)}static createDecoderResult(s){let o=de.createBarcodeMatrix(s);de.adjustCodewordCount(s,o);let c=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],p=new Array;for(let C=0;C<s.getBarcodeRowCount();C++)for(let S=0;S<s.getBarcodeColumnCount();S++){let N=o[C][S+1].getValue(),P=C*s.getBarcodeColumnCount()+S;N.length===0?c.push(P):N.length===1?f[P]=N[0]:(p.push(P),d.push(N))}let x=new Array(d.length);for(let C=0;C<x.length;C++)x[C]=d[C];return de.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,Wt.toIntArray(c),Wt.toIntArray(p),x)}static createDecoderResultFromAmbiguousValues(s,o,c,f,d){let p=new Int32Array(f.length),x=100;for(;x-- >0;){for(let C=0;C<p.length;C++)o[f[C]]=d[C][p[C]];try{return de.decodeCodewords(o,s,c)}catch(C){if(!(C instanceof k))throw C}if(p.length===0)throw k.getChecksumInstance();for(let C=0;C<p.length;C++)if(p[C]<d[C].length-1){p[C]++;break}else if(p[C]=0,C===p.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new xn;let c=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][c].setValue(d.getValue())}}}c++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,c,f){let d=f?1:-1,p=null;if(de.isValidBarcodeColumn(s,o-d)&&(p=s.getDetectionResultColumn(o-d).getCodeword(c)),p!=null)return f?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(o).getCodewordNearby(c),p!=null)return f?p.getStartX():p.getEndX();if(de.isValidBarcodeColumn(s,o-d)&&(p=s.getDetectionResultColumn(o-d).getCodewordNearby(c)),p!=null)return f?p.getEndX():p.getStartX();let x=0;for(;de.isValidBarcodeColumn(s,o-d);){o-=d;for(let C of s.getDetectionResultColumn(o).getCodewords())if(C!=null)return(f?C.getEndX():C.getStartX())+d*x*(C.getEndX()-C.getStartX());x++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,c,f,d,p,x,C){d=de.adjustCodewordStartColumn(s,o,c,f,d,p);let S=de.getModuleBitCount(s,o,c,f,d,p);if(S==null)return null;let N,P=Zt.sum(S);if(f)N=d+P;else{for(let tt=0;tt<S.length/2;tt++){let it=S[tt];S[tt]=S[S.length-1-tt],S[S.length-1-tt]=it}N=d,d=N-P}if(!de.checkCodewordSkew(P,x,C))return null;let L=Fn.getDecodedValue(S),Y=Wt.getCodeword(L);return Y===-1?null:new Rr(d,N,de.getCodewordBucketNumber(L),Y)}static getModuleBitCount(s,o,c,f,d,p){let x=d,C=new Int32Array(8),S=0,N=f?1:-1,P=f;for(;(f?x<c:x>=o)&&S<C.length;)s.get(x,p)===P?(C[S]++,x+=N):(S++,P=!P);return S===C.length||x===(f?c:o)&&S===C.length-1?C:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,c,f,d,p){let x=d,C=f?-1:1;for(let S=0;S<2;S++){for(;(f?x>=o:x<c)&&f===s.get(x,p);){if(Math.abs(d-x)>de.CODEWORD_SKEW_SIZE)return d;x+=C}C=-C,f=!f}return x}static checkCodewordSkew(s,o,c){return o-de.CODEWORD_SKEW_SIZE<=s&&s<=c+de.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,c){if(s.length===0)throw H.getFormatInstance();let f=1<<o+1,d=de.correctErrors(s,c,f);de.verifyCodewordCount(s,f);let p=mt.decode(s,""+o);return p.setErrorsCorrected(d),p.setErasures(c.length),p}static correctErrors(s,o,c){if(o!=null&&o.length>c/2+de.MAX_ERRORS||c<0||c>de.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return de.errorCorrection.decode(s,c,o)}static verifyCodewordCount(s,o){if(s.length<4)throw H.getFormatInstance();let c=s[0];if(c>s.length)throw H.getFormatInstance();if(c===0)if(o<s.length)s[0]=s.length-o;else throw H.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),c=0,f=o.length-1;for(;!((s&1)!==c&&(c=s&1,f--,f<0));)o[f]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return de.getCodewordBucketNumber(de.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new br;for(let c=0;c<s.length;c++){o.format("Row %2d: ",c);for(let f=0;f<s[c].length;f++){let d=s[c][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}de.CODEWORD_SKEW_SIZE=2,de.MAX_ERRORS=3,de.MAX_EC_CODEWORDS=512,de.errorCorrection=new ya;class _n{decode(s,o=null){let c=_n.decode(s,o,!1);if(c==null||c.length===0||c[0]==null)throw ht.getNotFoundInstance();return c[0]}decodeMultiple(s,o=null){try{return _n.decode(s,o,!0)}catch(c){throw c instanceof H||c instanceof k?ht.getNotFoundInstance():c}}static decode(s,o,c){const f=new Array,d=ie.detectMultiple(s,o,c);for(const p of d.getPoints()){const x=de.decode(d.getBits(),p[4],p[5],p[6],p[7],_n.getMinCodewordWidth(p),_n.getMaxCodewordWidth(p)),C=new zt(x.getText(),x.getRawBytes(),void 0,p,Mt.PDF_417);C.putMetadata(ce.ERROR_CORRECTION_LEVEL,x.getECLevel());const S=x.getOther();S!=null&&C.putMetadata(ce.PDF417_EXTRA_METADATA,S),f.push(C)}return f.map(p=>p)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?W.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(_n.getMaxWidth(s[0],s[4]),_n.getMaxWidth(s[6],s[2])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(s[1],s[5]),_n.getMaxWidth(s[7],s[3])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(_n.getMinWidth(s[0],s[4]),_n.getMinWidth(s[6],s[2])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(s[1],s[5]),_n.getMinWidth(s[7],s[3])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ls extends y{}Ls.kind="ReaderException";class il{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!i(s)&&s.get(Rt.TRY_HARDER)===!0,c=i(s)?null:s.get(Rt.POSSIBLE_FORMATS),f=new Array;if(!i(c)){const d=c.some(p=>p===Mt.UPC_A||p===Mt.UPC_E||p===Mt.EAN_13||p===Mt.EAN_8||p===Mt.CODABAR||p===Mt.CODE_39||p===Mt.CODE_93||p===Mt.CODE_128||p===Mt.ITF||p===Mt.RSS_14||p===Mt.RSS_EXPANDED);d&&!o&&f.push(new or(s,this.verbose)),c.includes(Mt.QR_CODE)&&f.push(new Fi),c.includes(Mt.DATA_MATRIX)&&f.push(new yi),c.includes(Mt.AZTEC)&&f.push(new ca),c.includes(Mt.PDF_417)&&f.push(new _n),d&&o&&f.push(new or(s,this.verbose))}f.length===0&&(o||f.push(new or(s,this.verbose)),f.push(new Fi),f.push(new yi),f.push(new ca),f.push(new _n),o&&f.push(new or(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Ls("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(c){if(c instanceof Ls)continue}throw new ht("No MultiFormat Readers were able to detect the code.")}}class As extends Vt{constructor(s=null,o=500){const c=new il;c.setHints(s),super(c,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class Xl extends Vt{constructor(s=500){super(new _n,s)}}class Wl extends Vt{constructor(s=500){super(new Fi,s)}}var ks;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(ks||(ks={}));var Cn=ks;class Bs{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Xn(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let c=o[o.length-1];const f=this.field;for(let d=o.length;d<=s;d++){const p=c.multiply(new Xn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(p),c=p}}return o[s]}encode(s,o){if(o===0)throw new b("No error correction bytes");const c=s.length-o;if(c<=0)throw new b("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(c);q.arraycopy(s,0,d,0,c);let p=new Xn(this.field,d);p=p.multiplyByMonomial(o,1);const C=p.divide(f)[1].getCoefficients(),S=o-C.length;for(let N=0;N<S;N++)s[c+N]=0;q.arraycopy(C,0,s,c+S,C.length)}}class ve{constructor(){}static applyMaskPenaltyRule1(s){return ve.applyMaskPenaltyRule1Internal(s,!0)+ve.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const c=s.getArray(),f=s.getWidth(),d=s.getHeight();for(let p=0;p<d-1;p++){const x=c[p];for(let C=0;C<f-1;C++){const S=x[C];S===x[C+1]&&S===c[p+1][C]&&S===c[p+1][C+1]&&o++}}return ve.N2*o}static applyMaskPenaltyRule3(s){let o=0;const c=s.getArray(),f=s.getWidth(),d=s.getHeight();for(let p=0;p<d;p++)for(let x=0;x<f;x++){const C=c[p];x+6<f&&C[x]===1&&C[x+1]===0&&C[x+2]===1&&C[x+3]===1&&C[x+4]===1&&C[x+5]===0&&C[x+6]===1&&(ve.isWhiteHorizontal(C,x-4,x)||ve.isWhiteHorizontal(C,x+7,x+11))&&o++,p+6<d&&c[p][x]===1&&c[p+1][x]===0&&c[p+2][x]===1&&c[p+3][x]===1&&c[p+4][x]===1&&c[p+5][x]===0&&c[p+6][x]===1&&(ve.isWhiteVertical(c,x,p-4,p)||ve.isWhiteVertical(c,x,p+7,p+11))&&o++}return o*ve.N3}static isWhiteHorizontal(s,o,c){o=Math.max(o,0),c=Math.min(c,s.length);for(let f=o;f<c;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,o,c,f){c=Math.max(c,0),f=Math.min(f,s.length);for(let d=c;d<f;d++)if(s[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const c=s.getArray(),f=s.getWidth(),d=s.getHeight();for(let C=0;C<d;C++){const S=c[C];for(let N=0;N<f;N++)S[N]===1&&o++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*ve.N4}static getDataMaskBit(s,o,c){let f,d;switch(s){case 0:f=c+o&1;break;case 1:f=c&1;break;case 2:f=o%3;break;case 3:f=(c+o)%3;break;case 4:f=Math.floor(c/2)+Math.floor(o/3)&1;break;case 5:d=c*o,f=(d&1)+d%3;break;case 6:d=c*o,f=(d&1)+d%3&1;break;case 7:d=c*o,f=d%3+(c+o&1)&1;break;default:throw new b("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,o){let c=0;const f=o?s.getHeight():s.getWidth(),d=o?s.getWidth():s.getHeight(),p=s.getArray();for(let x=0;x<f;x++){let C=0,S=-1;for(let N=0;N<d;N++){const P=o?p[x][N]:p[N][x];P===S?C++:(C>=5&&(c+=ve.N1+(C-5)),C=1,S=P)}C>=5&&(c+=ve.N1+(C-5))}return c}}ve.N1=3,ve.N2=3,ve.N3=40,ve.N4=10;class Vs{constructor(s,o){this.width=s,this.height=o;const c=new Array(o);for(let f=0;f!==o;f++)c[f]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,c){this.bytes[o][s]=c}setBoolean(s,o,c){this.bytes[o][s]=c?1:0}clear(s){for(const o of this.bytes)Z.fill(o,s)}equals(s){if(!(s instanceof Vs))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let c=0,f=this.height;c<f;++c){const d=this.bytes[c],p=o.bytes[c];for(let x=0,C=this.width;x<C;++x)if(d[x]!==p[x])return!1}return!0}toString(){const s=new X;for(let o=0,c=this.height;o<c;++o){const f=this.bytes[o];for(let d=0,p=this.width;d<p;++d)switch(f[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Wr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new X;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Wr.NUM_MASK_PATTERNS}}Wr.NUM_MASK_PATTERNS=8;class Ne extends y{}Ne.kind="WriterException";class A{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,c,f,d){A.clearMatrix(d),A.embedBasicPatterns(c,d),A.embedTypeInfo(o,f,d),A.maybeEmbedVersionInfo(c,d),A.embedDataBits(s,f,d)}static embedBasicPatterns(s,o){A.embedPositionDetectionPatternsAndSeparators(o),A.embedDarkDotAtLeftBottomCorner(o),A.maybeEmbedPositionAdjustmentPatterns(s,o),A.embedTimingPatterns(o)}static embedTypeInfo(s,o,c){const f=new yt;A.makeTypeInfoBits(s,o,f);for(let d=0,p=f.getSize();d<p;++d){const x=f.get(f.getSize()-1-d),C=A.TYPE_INFO_COORDINATES[d],S=C[0],N=C[1];if(c.setBoolean(S,N,x),d<8){const P=c.getWidth()-d-1;c.setBoolean(P,8,x)}else{const L=c.getHeight()-7+(d-8);c.setBoolean(8,L,x)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const c=new yt;A.makeVersionInfoBits(s,c);let f=17;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const x=c.get(f);f--,o.setBoolean(d,o.getHeight()-11+p,x),o.setBoolean(o.getHeight()-11+p,d,x)}}static embedDataBits(s,o,c){let f=0,d=-1,p=c.getWidth()-1,x=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);x>=0&&x<c.getHeight();){for(let C=0;C<2;++C){const S=p-C;if(!A.isEmpty(c.get(S,x)))continue;let N;f<s.getSize()?(N=s.get(f),++f):N=!1,o!==255&&ve.getDataMaskBit(o,S,x)&&(N=!N),c.setBoolean(S,x,N)}x+=d}d=-d,x+=d,p-=2}if(f!==s.getSize())throw new Ne("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-W.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new b("0 polynomial");const c=A.findMSBSet(o);for(s<<=c-1;A.findMSBSet(s)>=c;)s^=o<<A.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,o,c){if(!Wr.isValidMaskPattern(o))throw new Ne("Invalid mask pattern");const f=s.getBits()<<3|o;c.appendBits(f,5);const d=A.calculateBCHCode(f,A.TYPE_INFO_POLY);c.appendBits(d,10);const p=new yt;if(p.appendBits(A.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new Ne("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const c=A.calculateBCHCode(s.getVersionNumber(),A.VERSION_INFO_POLY);if(o.appendBits(c,12),o.getSize()!==18)throw new Ne("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const c=(o+1)%2;A.isEmpty(s.get(o,6))&&s.setNumber(o,6,c),A.isEmpty(s.get(6,o))&&s.setNumber(6,o,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Ne;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,c){for(let f=0;f<8;++f){if(!A.isEmpty(c.get(s+f,o)))throw new Ne;c.setNumber(s+f,o,0)}}static embedVerticalSeparationPattern(s,o,c){for(let f=0;f<7;++f){if(!A.isEmpty(c.get(s,o+f)))throw new Ne;c.setNumber(s,o+f,0)}}static embedPositionAdjustmentPattern(s,o,c){for(let f=0;f<5;++f){const d=A.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)c.setNumber(s+p,o+f,d[p])}}static embedPositionDetectionPattern(s,o,c){for(let f=0;f<7;++f){const d=A.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)c.setNumber(s+p,o+f,d[p])}}static embedPositionDetectionPatternsAndSeparators(s){const o=A.POSITION_DETECTION_PATTERN[0].length;A.embedPositionDetectionPattern(0,0,s),A.embedPositionDetectionPattern(s.getWidth()-o,0,s),A.embedPositionDetectionPattern(0,s.getWidth()-o,s);const c=8;A.embedHorizontalSeparationPattern(0,c-1,s),A.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),A.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);const f=7;A.embedVerticalSeparationPattern(f,0,s),A.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),A.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const c=s.getVersionNumber()-1,f=A.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,p=f.length;d!==p;d++){const x=f[d];if(x>=0)for(let C=0;C!==p;C++){const S=f[C];S>=0&&A.isEmpty(o.get(S,x))&&A.embedPositionAdjustmentPattern(S-2,x-2,o)}}}}A.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),A.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),A.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),A.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),A.VERSION_INFO_POLY=7973,A.TYPE_INFO_POLY=1335,A.TYPE_INFO_MASK_PATTERN=21522;class I{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(s){return ve.applyMaskPenaltyRule1(s)+ve.applyMaskPenaltyRule2(s)+ve.applyMaskPenaltyRule3(s)+ve.applyMaskPenaltyRule4(s)}static encode(s,o,c=null){let f=D.DEFAULT_BYTE_MODE_ENCODING;const d=c!==null&&c.get(Cn.CHARACTER_SET)!==void 0;d&&(f=c.get(Cn.CHARACTER_SET).toString());const p=this.chooseMode(s,f),x=new yt;if(p===Xt.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==f)){const Lt=V.getCharacterSetECIByName(f);Lt!==void 0&&this.appendECI(Lt,x)}this.appendModeInfo(p,x);const C=new yt;this.appendBytes(s,p,C,f);let S;if(c!==null&&c.get(Cn.QR_VERSION)!==void 0){const Lt=Number.parseInt(c.get(Cn.QR_VERSION).toString(),10);S=Yt.getVersionForNumber(Lt);const Nt=this.calculateBitsNeeded(p,x,C,S);if(!this.willFit(Nt,S,o))throw new Ne("Data too big for requested version")}else S=this.recommendVersion(o,p,x,C);const N=new yt;N.appendBitArray(x);const P=p===Xt.BYTE?C.getSizeInBytes():s.length;this.appendLengthInfo(P,S,p,N),N.appendBitArray(C);const L=S.getECBlocksForLevel(o),Y=S.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(Y,N);const tt=this.interleaveWithECBytes(N,S.getTotalCodewords(),Y,L.getNumBlocks()),it=new Wr;it.setECLevel(o),it.setMode(p),it.setVersion(S);const lt=S.getDimensionForVersion(),gt=new Vs(lt,lt),Ot=this.chooseMaskPattern(tt,o,S,gt);return it.setMaskPattern(Ot),A.buildMatrix(tt,o,S,Ot,gt),it.setMatrix(gt),it}static recommendVersion(s,o,c,f){const d=this.calculateBitsNeeded(o,c,f,Yt.getVersionForNumber(1)),p=this.chooseVersion(d,s),x=this.calculateBitsNeeded(o,c,f,p);return this.chooseVersion(x,s)}static calculateBitsNeeded(s,o,c,f){return o.getSize()+s.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(s){return s<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return Xt.KANJI;let c=!1,f=!1;for(let d=0,p=s.length;d<p;++d){const x=s.charAt(d);if(D.isDigit(x))c=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)f=!0;else return Xt.BYTE}return f?Xt.ALPHANUMERIC:c?Xt.NUMERIC:Xt.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=K.encode(s,V.SJIS)}catch{return!1}const c=o.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,o,c,f){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let x=0;x<Wr.NUM_MASK_PATTERNS;x++){A.buildMatrix(s,o,c,x,f);let C=this.calculateMaskPenalty(f);C<d&&(d=C,p=x)}return p}static chooseVersion(s,o){for(let c=1;c<=40;c++){const f=Yt.getVersionForNumber(c);if(D.willFit(s,f,o))return f}throw new Ne("Data too big")}static willFit(s,o,c){const f=o.getTotalCodewords(),p=o.getECBlocksForLevel(c).getTotalECCodewords(),x=f-p,C=(s+7)/8;return x>=C}static terminateBits(s,o){const c=s*8;if(o.getSize()>c)throw new Ne("data bits cannot fit in the QR Code"+o.getSize()+" > "+c);for(let p=0;p<4&&o.getSize()<c;++p)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let p=f;p<8;p++)o.appendBit(!1);const d=s-o.getSizeInBytes();for(let p=0;p<d;++p)o.appendBits((p&1)===0?236:17,8);if(o.getSize()!==c)throw new Ne("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,c,f,d,p){if(f>=c)throw new Ne("Block ID too large");const x=s%c,C=c-x,S=Math.floor(s/c),N=S+1,P=Math.floor(o/c),L=P+1,Y=S-P,tt=N-L;if(Y!==tt)throw new Ne("EC bytes mismatch");if(c!==C+x)throw new Ne("RS blocks mismatch");if(s!==(P+Y)*C+(L+tt)*x)throw new Ne("Total bytes mismatch");f<C?(d[0]=P,p[0]=Y):(d[0]=L,p[0]=tt)}static interleaveWithECBytes(s,o,c,f){if(s.getSizeInBytes()!==c)throw new Ne("Number of bits and data bytes does not match");let d=0,p=0,x=0;const C=new Array;for(let N=0;N<f;++N){const P=new Int32Array(1),L=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,c,f,N,P,L);const Y=P[0],tt=new Uint8Array(Y);s.toBytes(8*d,tt,0,Y);const it=D.generateECBytes(tt,L[0]);C.push(new I(tt,it)),p=Math.max(p,Y),x=Math.max(x,it.length),d+=P[0]}if(c!==d)throw new Ne("Data bytes does not match offset");const S=new yt;for(let N=0;N<p;++N)for(const P of C){const L=P.getDataBytes();N<L.length&&S.appendBits(L[N],8)}for(let N=0;N<x;++N)for(const P of C){const L=P.getErrorCorrectionBytes();N<L.length&&S.appendBits(L[N],8)}if(o!==S.getSizeInBytes())throw new Ne("Interleaving error: "+o+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(s,o){const c=s.length,f=new Int32Array(c+o);for(let p=0;p<c;p++)f[p]=s[p]&255;new Bs(we.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let p=0;p<o;p++)d[p]=f[c+p];return d}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,c,f){const d=c.getCharacterCountBits(o);if(s>=1<<d)throw new Ne(s+" is bigger than "+((1<<d)-1));f.appendBits(s,d)}static appendBytes(s,o,c,f){switch(o){case Xt.NUMERIC:D.appendNumericBytes(s,c);break;case Xt.ALPHANUMERIC:D.appendAlphanumericBytes(s,c);break;case Xt.BYTE:D.append8BitBytes(s,c,f);break;case Xt.KANJI:D.appendKanjiBytes(s,c);break;default:throw new Ne("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=D.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const c=s.length;let f=0;for(;f<c;){const d=D.getDigit(s.charAt(f));if(f+2<c){const p=D.getDigit(s.charAt(f+1)),x=D.getDigit(s.charAt(f+2));o.appendBits(d*100+p*10+x,10),f+=3}else if(f+1<c){const p=D.getDigit(s.charAt(f+1));o.appendBits(d*10+p,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(s,o){const c=s.length;let f=0;for(;f<c;){const d=D.getAlphanumericCode(s.charCodeAt(f));if(d===-1)throw new Ne;if(f+1<c){const p=D.getAlphanumericCode(s.charCodeAt(f+1));if(p===-1)throw new Ne;o.appendBits(d*45+p,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(s,o,c){let f;try{f=K.encode(s,c)}catch(d){throw new Ne(d)}for(let d=0,p=f.length;d!==p;d++){const x=f[d];o.appendBits(x,8)}}static appendKanjiBytes(s,o){let c;try{c=K.encode(s,V.SJIS)}catch(d){throw new Ne(d)}const f=c.length;for(let d=0;d<f;d+=2){const p=c[d]&255,x=c[d+1]&255,C=p<<8&4294967295|x;let S=-1;if(C>=33088&&C<=40956?S=C-33088:C>=57408&&C<=60351&&(S=C-49472),S===-1)throw new Ne("Invalid byte sequence");const N=(S>>8)*192+(S&255);o.appendBits(N,13)}}static appendECI(s,o){o.appendBits(Xt.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(s,o,c,f=null){if(s.length===0)throw new b("Found empty contents");if(o<0||c<0)throw new b("Requested dimensions are too small: "+o+"x"+c);let d=He.L,p=F.QUIET_ZONE_SIZE;f!==null&&(f.get(Cn.ERROR_CORRECTION)!==void 0&&(d=He.fromString(f.get(Cn.ERROR_CORRECTION).toString())),f.get(Cn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Cn.MARGIN).toString(),10)));const x=D.encode(s,d,f);return this.renderResult(x,o,c,p)}writeToDom(s,o,c,f,d=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(o,c,f,d);s&&s.appendChild(p)}renderResult(s,o,c,f){const d=s.getMatrix();if(d===null)throw new ar;const p=d.getWidth(),x=d.getHeight(),C=p+f*2,S=x+f*2,N=Math.max(o,C),P=Math.max(c,S),L=Math.min(Math.floor(N/C),Math.floor(P/S)),Y=Math.floor((N-p*L)/2),tt=Math.floor((P-x*L)/2),it=this.createSVGElement(N,P);for(let lt=0,gt=tt;lt<x;lt++,gt+=L)for(let Ot=0,Lt=Y;Ot<p;Ot++,Lt+=L)if(d.get(Ot,lt)===1){const Nt=this.createSvgRectElement(Lt,gt,L,L);it.appendChild(Nt)}return it}createSVGElement(s,o){const c=document.createElementNS(F.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",o.toString()),c}createSvgRectElement(s,o,c,f){const d=document.createElementNS(F.SVG_NS,"rect");return d.setAttributeNS(null,"x",s.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class ot{encode(s,o,c,f,d){if(s.length===0)throw new b("Found empty contents");if(o!==Mt.QR_CODE)throw new b("Can only encode QR_CODE, but got "+o);if(c<0||f<0)throw new b(`Requested dimensions are too small: ${c}x${f}`);let p=He.L,x=ot.QUIET_ZONE_SIZE;d!==null&&(d.get(Cn.ERROR_CORRECTION)!==void 0&&(p=He.fromString(d.get(Cn.ERROR_CORRECTION).toString())),d.get(Cn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(Cn.MARGIN).toString(),10)));const C=D.encode(s,p,d);return ot.renderResult(C,c,f,x)}static renderResult(s,o,c,f){const d=s.getMatrix();if(d===null)throw new ar;const p=d.getWidth(),x=d.getHeight(),C=p+f*2,S=x+f*2,N=Math.max(o,C),P=Math.max(c,S),L=Math.min(Math.floor(N/C),Math.floor(P/S)),Y=Math.floor((N-p*L)/2),tt=Math.floor((P-x*L)/2),it=new Jt(N,P);for(let lt=0,gt=tt;lt<x;lt++,gt+=L)for(let Ot=0,Lt=Y;Ot<p;Ot++,Lt+=L)d.get(Ot,lt)===1&&it.setRegion(Lt,gt,L,L);return it}}ot.QUIET_ZONE_SIZE=4;class At{encode(s,o,c,f,d){let p;switch(o){case Mt.QR_CODE:p=new ot;break;default:throw new b("No encoder available for format "+o)}return p.encode(s,o,c,f,d)}}class Pt extends Ft{constructor(s,o,c,f,d,p,x,C){if(super(p,x),this.yuvData=s,this.dataWidth=o,this.dataHeight=c,this.left=f,this.top=d,f+p>o||d+x>c)throw new b("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(p,x)}getRow(s,o){if(s<0||s>=this.getHeight())throw new b("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(s+this.top)*this.dataWidth+this.left;return q.arraycopy(this.yuvData,f,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const c=s*o,f=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return q.arraycopy(this.yuvData,d,f,0,c),f;for(let p=0;p<o;p++){const x=p*s;q.arraycopy(this.yuvData,d,f,x,s),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,c,f){return new Pt(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,c,f,!1)}renderThumbnail(){const s=this.getWidth()/Pt.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Pt.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const x=p*s;for(let C=0;C<s;C++){const S=f[d+C*Pt.THUMBNAIL_SCALE_FACTOR]&255;c[x+C]=4278190080|S*65793}d+=this.dataWidth*Pt.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/Pt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const c=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const p=d+s/2;for(let x=d,C=d+s-1;x<p;x++,C--){const S=c[x];c[x]=c[C],c[C]=S}}}invert(){return new $t(this)}}Pt.THUMBNAIL_SCALE_FACTOR=2;class ae extends Ft{constructor(s,o,c,f,d,p,x){if(super(o,c),this.dataWidth=f,this.dataHeight=d,this.left=p,this.top=x,s.BYTES_PER_ELEMENT===4){const C=o*c,S=new Uint8ClampedArray(C);for(let N=0;N<C;N++){const P=s[N],L=P>>16&255,Y=P>>7&510,tt=P&255;S[N]=(L+Y+tt)/4&255}this.luminances=S}else this.luminances=s;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+c>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new b("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(s+this.top)*this.dataWidth+this.left;return q.arraycopy(this.luminances,f,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const c=s*o,f=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return q.arraycopy(this.luminances,d,f,0,c),f;for(let p=0;p<o;p++){const x=p*s;q.arraycopy(this.luminances,d,f,x,s),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,c,f){return new ae(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new $t(this)}}class on extends V{static forName(s){return this.getCharacterSetECIByName(s)}}class Ue{}Ue.ISO_8859_1=V.ISO8859_1;class vn{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class zi{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class Kr{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ai extends Kr{constructor(s,o,c){super(s),this.value=o,this.bitCount=c}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new Ai(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ai(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+W.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class nr extends Ai{constructor(s,o,c){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=c}appendTo(s,o){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+c],8)}addBinaryShift(s,o){return new nr(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Mr(O,s,o){return new nr(O,s,o)}function xs(O,s,o){return new Ai(O,s,o)}const L0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Us=0,rl=1,ir=2,$a=3,ji=4,k0=new Ai(null,0,0),to=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Yh(O){for(let s of O)Z.fill(s,-1);return O[Us][ji]=0,O[rl][ji]=0,O[rl][Us]=28,O[$a][ji]=0,O[ir][ji]=0,O[ir][Us]=15,O}const su=Yh(Z.createInt32Array(6,6));class cr{constructor(s,o,c,f){this.token=s,this.mode=o,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let c=this.bitCount,f=this.token;if(s!==this.mode){let p=to[this.mode][s];f=xs(f,p&65535,p>>16),c+=p>>16}let d=s===ir?4:5;return f=xs(f,o,d),new cr(f,s,0,c+d)}shiftAndAppend(s,o){let c=this.token,f=this.mode===ir?4:5;return c=xs(c,su[this.mode][s],f),c=xs(c,o,5),new cr(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let o=this.token,c=this.mode,f=this.bitCount;if(this.mode===ji||this.mode===ir){let x=to[c][Us];o=xs(o,x&65535,x>>16),f+=x>>16,c=Us}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new cr(o,c,this.binaryShiftByteCount+1,f+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Mr(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new cr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(to[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=cr.calculateBinaryShiftCost(s)-cr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())o.unshift(f);let c=new yt;for(const f of o)f.appendTo(c,s);return c}toString(){return J.format("%s bits=%d bytes=%d",L0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}cr.INITIAL_STATE=new cr(k0,Us,0,0);function au(O){const s=J.getCharCode(" "),o=J.getCharCode("."),c=J.getCharCode(",");O[Us][s]=1;const f=J.getCharCode("Z"),d=J.getCharCode("A");for(let L=d;L<=f;L++)O[Us][L]=L-d+2;O[rl][s]=1;const p=J.getCharCode("z"),x=J.getCharCode("a");for(let L=x;L<=p;L++)O[rl][L]=L-x+2;O[ir][s]=1;const C=J.getCharCode("9"),S=J.getCharCode("0");for(let L=S;L<=C;L++)O[ir][L]=L-S+2;O[ir][c]=12,O[ir][o]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<N.length;L++)O[$a][J.getCharCode(N[L])]=L;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<P.length;L++)J.getCharCode(P[L])>0&&(O[ji][J.getCharCode(P[L])]=L);return O}const Kl=au(Z.createInt32Array(5,256));class eo{constructor(s){this.text=s}encode(){const s=J.getCharCode(" "),o=J.getCharCode(`
`);let c=zi.singletonList(cr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case J.getCharCode("\r"):p=x===o?2:0;break;case J.getCharCode("."):p=x===s?3:0;break;case J.getCharCode(","):p=x===s?4:0;break;case J.getCharCode(":"):p=x===s?5:0;break;default:p=0}p>0?(c=eo.updateStateListForPair(c,d,p),d++):c=this.updateStateListForChar(c,d)}return zi.min(c,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const c=[];for(let f of s)this.updateStateForChar(f,o,c);return eo.simplifyStates(c)}updateStateForChar(s,o,c){let f=this.text[o]&255,d=Kl[s.getMode()][f]>0,p=null;for(let x=0;x<=ji;x++){let C=Kl[x][f];if(C>0){if(p==null&&(p=s.endBinaryShift(o)),!d||x===s.getMode()||x===ir){const S=p.latchAndAppend(x,C);c.push(S)}if(!d&&su[s.getMode()][x]>=0){const S=p.shiftAndAppend(x,C);c.push(S)}}}if(s.getBinaryShiftByteCount()>0||Kl[s.getMode()][f]===0){let x=s.addBinaryShiftChar(o);c.push(x)}}static updateStateListForPair(s,o,c){const f=[];for(let d of s)this.updateStateForPair(d,o,c,f);return this.simplifyStates(f)}static updateStateForPair(s,o,c,f){let d=s.endBinaryShift(o);if(f.push(d.latchAndAppend(ji,c)),s.getMode()!==ji&&f.push(d.shiftAndAppend(ji,c)),c===3||c===4){let p=d.latchAndAppend(ir,16-c).latchAndAppend(ir,1);f.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(p)}}static simplifyStates(s){let o=[];for(const c of s){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(d)&&(o=o.filter(p=>p!==d))}f&&o.push(c)}return o}}class De{constructor(){}static encodeBytes(s){return De.encode(s,De.DEFAULT_EC_PERCENT,De.DEFAULT_AZTEC_LAYERS)}static encode(s,o,c){let f=new eo(s).encode(),d=W.truncDivision(f.getSize()*o,100)+11,p=f.getSize()+d,x,C,S,N,P;if(c!==De.DEFAULT_AZTEC_LAYERS){if(x=c<0,C=Math.abs(c),C>(x?De.MAX_NB_BITS_COMPACT:De.MAX_NB_BITS))throw new b(J.format("Illegal value %s for layers",c));S=De.totalBitsInLayer(C,x),N=De.WORD_SIZE[C];let Nt=S-S%N;if(P=De.stuffBits(f,N),P.getSize()+d>Nt)throw new b("Data to large for user specified layer");if(x&&P.getSize()>N*64)throw new b("Data to large for user specified layer")}else{N=0,P=null;for(let Nt=0;;Nt++){if(Nt>De.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(x=Nt<=3,C=x?Nt+1:Nt,S=De.totalBitsInLayer(C,x),p>S)continue;(P==null||N!==De.WORD_SIZE[C])&&(N=De.WORD_SIZE[C],P=De.stuffBits(f,N));let ge=S-S%N;if(!(x&&P.getSize()>N*64)&&P.getSize()+d<=ge)break}}let L=De.generateCheckWords(P,S,N),Y=P.getSize()/N,tt=De.generateModeMessage(x,C,Y),it=(x?11:14)+C*4,lt=new Int32Array(it),gt;if(x){gt=it;for(let Nt=0;Nt<lt.length;Nt++)lt[Nt]=Nt}else{gt=it+1+2*W.truncDivision(W.truncDivision(it,2)-1,15);let Nt=W.truncDivision(it,2),ge=W.truncDivision(gt,2);for(let he=0;he<Nt;he++){let Ri=he+W.truncDivision(he,15);lt[Nt-he-1]=ge-Ri-1,lt[Nt+he]=ge+Ri+1}}let Ot=new Jt(gt);for(let Nt=0,ge=0;Nt<C;Nt++){let he=(C-Nt)*4+(x?9:12);for(let Ri=0;Ri<he;Ri++){let ur=Ri*2;for(let Hi=0;Hi<2;Hi++)L.get(ge+ur+Hi)&&Ot.set(lt[Nt*2+Hi],lt[Nt*2+Ri]),L.get(ge+he*2+ur+Hi)&&Ot.set(lt[Nt*2+Ri],lt[it-1-Nt*2-Hi]),L.get(ge+he*4+ur+Hi)&&Ot.set(lt[it-1-Nt*2-Hi],lt[it-1-Nt*2-Ri]),L.get(ge+he*6+ur+Hi)&&Ot.set(lt[it-1-Nt*2-Ri],lt[Nt*2+Hi])}ge+=he*8}if(De.drawModeMessage(Ot,x,gt,tt),x)De.drawBullsEye(Ot,W.truncDivision(gt,2),5);else{De.drawBullsEye(Ot,W.truncDivision(gt,2),7);for(let Nt=0,ge=0;Nt<W.truncDivision(it,2)-1;Nt+=15,ge+=16)for(let he=W.truncDivision(gt,2)&1;he<gt;he+=2)Ot.set(W.truncDivision(gt,2)-ge,he),Ot.set(W.truncDivision(gt,2)+ge,he),Ot.set(he,W.truncDivision(gt,2)-ge),Ot.set(he,W.truncDivision(gt,2)+ge)}let Lt=new vn;return Lt.setCompact(x),Lt.setSize(gt),Lt.setLayers(C),Lt.setCodeWords(Y),Lt.setMatrix(Ot),Lt}static drawBullsEye(s,o,c){for(let f=0;f<c;f+=2)for(let d=o-f;d<=o+f;d++)s.set(d,o-f),s.set(d,o+f),s.set(o-f,d),s.set(o+f,d);s.set(o-c,o-c),s.set(o-c+1,o-c),s.set(o-c,o-c+1),s.set(o+c,o-c),s.set(o+c,o-c+1),s.set(o+c,o+c-1)}static generateModeMessage(s,o,c){let f=new yt;return s?(f.appendBits(o-1,2),f.appendBits(c-1,6),f=De.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(c-1,11),f=De.generateCheckWords(f,40,4)),f}static drawModeMessage(s,o,c,f){let d=W.truncDivision(c,2);if(o)for(let p=0;p<7;p++){let x=d-3+p;f.get(p)&&s.set(x,d-5),f.get(p+7)&&s.set(d+5,x),f.get(20-p)&&s.set(x,d+5),f.get(27-p)&&s.set(d-5,x)}else for(let p=0;p<10;p++){let x=d-5+p+W.truncDivision(p,5);f.get(p)&&s.set(x,d-7),f.get(p+10)&&s.set(d+7,x),f.get(29-p)&&s.set(x,d+7),f.get(39-p)&&s.set(d-7,x)}}static generateCheckWords(s,o,c){let f=s.getSize()/c,d=new Bs(De.getGF(c)),p=W.truncDivision(o,c),x=De.bitsToWords(s,c,p);d.encode(x,p-f);let C=o%c,S=new yt;S.appendBits(0,C);for(const N of Array.from(x))S.appendBits(N,c);return S}static bitsToWords(s,o,c){let f=new Int32Array(c),d,p;for(d=0,p=s.getSize()/o;d<p;d++){let x=0;for(let C=0;C<o;C++)x|=s.get(d*o+C)?1<<o-C-1:0;f[d]=x}return f}static getGF(s){switch(s){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new b("Unsupported word size "+s)}}static stuffBits(s,o){let c=new yt,f=s.getSize(),d=(1<<o)-2;for(let p=0;p<f;p+=o){let x=0;for(let C=0;C<o;C++)(p+C>=f||s.get(p+C))&&(x|=1<<o-1-C);(x&d)===d?(c.appendBits(x&d,o),p--):(x&d)===0?(c.appendBits(x|1,o),p--):c.appendBits(x,o)}return c}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}De.DEFAULT_EC_PERCENT=33,De.DEFAULT_AZTEC_LAYERS=0,De.MAX_NB_BITS=32,De.MAX_NB_BITS_COMPACT=4,De.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ql{encode(s,o,c,f){return this.encodeWithHints(s,o,c,f,null)}encodeWithHints(s,o,c,f,d){let p=Ue.ISO_8859_1,x=De.DEFAULT_EC_PERCENT,C=De.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Cn.CHARACTER_SET)&&(p=on.forName(d.get(Cn.CHARACTER_SET).toString())),d.has(Cn.ERROR_CORRECTION)&&(x=W.parseInt(d.get(Cn.ERROR_CORRECTION).toString())),d.has(Cn.AZTEC_LAYERS)&&(C=W.parseInt(d.get(Cn.AZTEC_LAYERS).toString()))),Ql.encodeLayers(s,o,c,f,p,x,C)}static encodeLayers(s,o,c,f,d,p,x){if(o!==Mt.AZTEC)throw new b("Can only encode AZTEC, but got "+o);let C=De.encode(J.getBytes(s,d),p,x);return Ql.renderResult(C,c,f)}static renderResult(s,o,c){let f=s.getMatrix();if(f==null)throw new ar;let d=f.getWidth(),p=f.getHeight(),x=Math.max(o,d),C=Math.max(c,p),S=Math.min(x/d,C/p),N=(x-d*S)/2,P=(C-p*S)/2,L=new Jt(x,C);for(let Y=0,tt=P;Y<p;Y++,tt+=S)for(let it=0,lt=N;it<d;it++,lt+=S)f.get(it,Y)&&L.setRegion(lt,tt,S,S);return L}}n.AbstractExpandedDecoder=Ns,n.ArgumentException=_,n.ArithmeticException=hs,n.AztecCode=vn,n.AztecCodeReader=ca,n.AztecCodeWriter=Ql,n.AztecDecoder=qe,n.AztecDetector=Gl,n.AztecDetectorResult=Qa,n.AztecEncoder=De,n.AztecHighLevelEncoder=eo,n.AztecPoint=Ye,n.BarcodeFormat=Mt,n.Binarizer=z,n.BinaryBitmap=R,n.BitArray=yt,n.BitMatrix=Jt,n.BitSource=hn,n.BrowserAztecCodeReader=ql,n.BrowserBarcodeReader=Ja,n.BrowserCodeReader=Vt,n.BrowserDatamatrixCodeReader=ga,n.BrowserMultiFormatReader=As,n.BrowserPDF417Reader=Xl,n.BrowserQRCodeReader=Wl,n.BrowserQRCodeSvgWriter=F,n.CharacterSetECI=V,n.ChecksumException=k,n.Code128Reader=kt,n.Code39Reader=We,n.DataMatrixDecodedBitStreamParser=Ui,n.DataMatrixReader=yi,n.DecodeHintType=Rt,n.DecoderResult=vi,n.DefaultGridSampler=li,n.DetectorResult=Ka,n.EAN13Reader=$e,n.EncodeHintType=Cn,n.Exception=y,n.FormatException=H,n.GenericGF=we,n.GenericGFPoly=Xn,n.GlobalHistogramBinarizer=Et,n.GridSampler=ds,n.GridSamplerInstance=Wn,n.HTMLCanvasElementLuminanceSource=$,n.HybridBinarizer=xt,n.ITFReader=Ae,n.IllegalArgumentException=b,n.IllegalStateException=ar,n.InvertedLuminanceSource=$t,n.LuminanceSource=Ft,n.MathUtils=Zt,n.MultiFormatOneDReader=or,n.MultiFormatReader=il,n.MultiFormatWriter=At,n.NotFoundException=ht,n.OneDReader=Xe,n.PDF417DecodedBitStreamParser=mt,n.PDF417DecoderErrorCorrection=ya,n.PDF417Reader=_n,n.PDF417ResultMetadata=Aa,n.PerspectiveTransform=ei,n.PlanarYUVLuminanceSource=Pt,n.QRCodeByteMatrix=Vs,n.QRCodeDataMask=An,n.QRCodeDecodedBitStreamParser=an,n.QRCodeDecoderErrorCorrectionLevel=He,n.QRCodeDecoderFormatInformation=Un,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=Wr,n.QRCodeMaskUtil=ve,n.QRCodeMatrixUtil=A,n.QRCodeMode=Xt,n.QRCodeReader=Fi,n.QRCodeVersion=Yt,n.QRCodeWriter=ot,n.RGBLuminanceSource=ae,n.RSS14Reader=Le,n.RSSExpandedReader=vt,n.ReaderException=Ls,n.ReedSolomonDecoder=fs,n.ReedSolomonEncoder=Bs,n.ReedSolomonException=Ar,n.Result=zt,n.ResultMetadataType=ce,n.ResultPoint=jt,n.StringUtils=J,n.UnsupportedOperationException=et,n.VideoInputDevice=St,n.WhiteRectangleDetector=xr,n.WriterException=Ne,n.ZXingArrays=Z,n.ZXingCharset=on,n.ZXingInteger=W,n.ZXingStandardCharsets=Ue,n.ZXingStringBuilder=X,n.ZXingStringEncoding=K,n.ZXingSystem=q,n.createAbstractExpandedDecoder=Cr,Object.defineProperty(n,"__esModule",{value:!0})}))})(Ju,Ju.exports)),Ju.exports}var wn=yP();const EP=s_(wn),AP=I3({__proto__:null,default:EP},[wn]);var kw=(function(){function e(t,n,i){if(this.formatMap=new Map([[Gt.QR_CODE,wn.BarcodeFormat.QR_CODE],[Gt.AZTEC,wn.BarcodeFormat.AZTEC],[Gt.CODABAR,wn.BarcodeFormat.CODABAR],[Gt.CODE_39,wn.BarcodeFormat.CODE_39],[Gt.CODE_93,wn.BarcodeFormat.CODE_93],[Gt.CODE_128,wn.BarcodeFormat.CODE_128],[Gt.DATA_MATRIX,wn.BarcodeFormat.DATA_MATRIX],[Gt.MAXICODE,wn.BarcodeFormat.MAXICODE],[Gt.ITF,wn.BarcodeFormat.ITF],[Gt.EAN_13,wn.BarcodeFormat.EAN_13],[Gt.EAN_8,wn.BarcodeFormat.EAN_8],[Gt.PDF_417,wn.BarcodeFormat.PDF_417],[Gt.RSS_14,wn.BarcodeFormat.RSS_14],[Gt.RSS_EXPANDED,wn.BarcodeFormat.RSS_EXPANDED],[Gt.UPC_A,wn.BarcodeFormat.UPC_A],[Gt.UPC_E,wn.BarcodeFormat.UPC_E],[Gt.UPC_EAN_EXTENSION,wn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!AP)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var l=this.createZXingFormats(t),u=new Map;u.set(wn.DecodeHintType.POSSIBLE_FORMATS,l),u.set(wn.DecodeHintType.TRY_HARDER,!1),this.hints=u}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,l){try{i(n.decode(t))}catch(u){l(u)}})},e.prototype.decode=function(t){var n=new wn.MultiFormatReader(this.verbose,this.hints),i=new wn.HTMLCanvasElementLuminanceSource(t),l=new wn.BinaryBitmap(new wn.HybridBinarizer(i)),u=n.decode(l);return{text:u.text,format:pS.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,l){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,l=t;i<l.length;i++){var u=l[i];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),xP=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},wP=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Bw=(function(){function e(t,n,i){if(this.formatMap=new Map([[Gt.QR_CODE,"qr_code"],[Gt.AZTEC,"aztec"],[Gt.CODABAR,"codabar"],[Gt.CODE_39,"code_39"],[Gt.CODE_93,"code_93"],[Gt.CODE_128,"code_128"],[Gt.DATA_MATRIX,"data_matrix"],[Gt.ITF,"itf"],[Gt.EAN_13,"ean_13"],[Gt.EAN_8,"ean_8"],[Gt.PDF_417,"pdf417"],[Gt.UPC_A,"upc_a"],[Gt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var l=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return xP(this,void 0,void 0,function(){var n,i;return wP(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:pS.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,l=0,u=t;l<u.length;l++){var g=u[l],w=g.boundingBox.width*g.boundingBox.height;w>i&&(i=w,n=g)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,l=t;i<l.length;i++){var u=l[i];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,l){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),Vw=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},Uw=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},TP=(function(){function e(t,n,i,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Bw.isSupported()?(this.primaryDecoder=new Bw(t,i,l),this.secondaryDecoder=new kw(t,i,l)):this.primaryDecoder=new kw(t,i,l)}return e.prototype.decodeAsync=function(t){return Vw(this,void 0,void 0,function(){var n;return Uw(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Vw(this,void 0,void 0,function(){var n,i;return Uw(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,l.sent()];case 3:if(i=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var l=i[n];t+=l}var u=t/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),sy=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),Kd=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},Qd=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},xS=(function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e})(),_P=(function(e){sy(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var l={advanced:[i]};return this.track.applyConstraints(l)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(xS),CP=(function(e){sy(t,e);function t(n){return e.call(this,"zoom",n)||this}return t})(_P),vP=(function(e){sy(t,e);function t(n){return e.call(this,"torch",n)||this}return t})(xS),SP=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new CP(this.track)},e.prototype.torchFeature=function(){return new vP(this.track)},e})(),bP=(function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,l=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,l),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,l){return Kd(this,void 0,void 0,function(){var u,g;return Qd(this,function(w){switch(w.label){case 0:return u=new e(t,n,l),i.aspectRatio?(g={aspectRatio:i.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:w.sent(),w.label=2;case 2:return u.setupSurface(),[2,u]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Kd(this,void 0,void 0,function(){return Qd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var l=t.mediaStream.getVideoTracks(),u=l.length,g=0;t.mediaStream.getVideoTracks().forEach(function(w){t.mediaStream.removeTrack(w),w.stop(),++g,g>=u&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new SP(this.getFirstTrackOrFail())},e})(),IP=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return Kd(this,void 0,void 0,function(){return Qd(this,function(l){return[2,bP.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return Kd(this,void 0,void 0,function(){var n,i;return Qd(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=l.sent(),[2,new e(i)]}})})},e})(),Fw=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},zw=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},RP=(function(){function e(){}return e.failIfNotSupported=function(){return Fw(this,void 0,void 0,function(){return zw(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Fw(this,void 0,void 0,function(){return zw(this,function(n){return[2,IP.create(t)]})})},e})(),NP=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},DP=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},MP=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ic.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ic.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return NP(this,void 0,void 0,function(){var t,n,i,l,u,g,w;return DP(this,function(E){switch(E.label){case 0:return t=function(y){for(var _=y.getVideoTracks(),b=0,R=_;b<R.length;b++){var k=R[b];k.enabled=!1,k.stop(),y.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=E.sent(),l=[],u=0,g=i;u<g.length;u++)w=g[u],w.kind==="videoinput"&&l.push({id:w.deviceId,label:w.label});return t(n),[2,l]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(u){for(var g=[],w=0,E=u;w<E.length;w++){var y=E[w];y.kind==="video"&&g.push({id:y.id,label:y.label})}t(g)},l=MediaStreamTrack;l.getSources(i)})},e})(),Gn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Gn||(Gn={}));var OP=(function(){function e(){this.state=Gn.NOT_STARTED,this.onGoingTransactionNewState=Gn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Gn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Gn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Gn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Gn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Gn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Gn.UNKNOWN:throw"Transition from unknown is not allowed";case Gn.NOT_STARTED:this.failIfNewStateIs(t,[Gn.PAUSED]);break;case Gn.SCANNING:break;case Gn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,l=n;i<l.length;i++){var u=l[i];if(t===u)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),PP=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Gn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Gn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Gn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Gn.PAUSED},e})(),LP=(function(){function e(){}return e.create=function(){return new PP(new OP)},e})(),kP=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(i[u]=l[u])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),Fr=(function(e){kP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(Cs),BP=(function(){function e(t,n){this.logger=n,this.fps=Fr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Fr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?AS.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ys(this.qrbox)},e.create=function(t,n){return new e(t,n)},e})(),jw=(function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new ES(this.verbose),this.qrcode=new TP(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=LP.create()}return e.prototype.start=function(t,n,i,l){var u=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;l?g=l:g=this.verbose?this.logger.log:function(){};var w=BP.create(n,this.logger);this.clearElement();var E=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=E,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:Fr.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var b=this,R=this.stateManagerProxy.startTransition(Gn.SCANNING);return new Promise(function(k,z){var q=y?w.videoConstraints:b.createVideoConstraints(t);if(!q){R.cancel(),z("videoConstraints should be defined");return}var j={};(!y||w.aspectRatio)&&(j.aspectRatio=w.aspectRatio);var nt={onRenderSurfaceReady:function(Z,W){b.setupUi(Z,W,w),b.isScanning=!0,b.foreverScan(w,i,g)}};RP.failIfNotSupported().then(function(Z){Z.create(q).then(function(W){return W.render(u.element,j,nt).then(function(yt){b.renderedCamera=yt,R.execute(),k(null)}).catch(function(yt){R.cancel(),z(yt)})}).catch(function(W){R.cancel(),z(Ic.errorGettingUserMedia(W))})}).catch(function(Z){R.cancel(),z(Ic.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Gn.PAUSED),this.showPausedState(),(Ys(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Gn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Gn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var u=document.getElementById(Fr.SHADED_REGION_ELEMENT_ID);u&&t.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),i(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ys(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var g=new Image;g.onload=function(){var w=g.width,E=g.height,y=document.getElementById(i.elementId),_=y.clientWidth?y.clientWidth:Fr.DEFAULT_WIDTH,b=Math.max(y.clientHeight?y.clientHeight:E,Fr.FILE_SCAN_MIN_HEIGHT),R=i.computeCanvasDrawConfig(w,E,_,b);if(n){var k=i.createCanvasElement(_,b,"qr-canvas-visible");k.style.display="inline-block",y.appendChild(k);var z=k.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=_,z.canvas.height=b,z.drawImage(g,0,0,w,E,R.x,R.y,R.width,R.height)}var q=Fr.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(g.width,R.width),nt=Math.max(g.height,R.height),Z=j+2*q,W=nt+2*q,yt=i.createCanvasElement(Z,W);y.appendChild(yt);var wt=yt.getContext("2d");if(!wt)throw"Unable to get 2d context from canvas";wt.canvas.width=Z,wt.canvas.height=W,wt.drawImage(g,0,0,w,E,q,q,j,nt);try{i.qrcode.decodeRobustlyAsync(yt).then(function(Rt){l(Ow.createFromQrcodeResult(Rt))}).catch(u)}catch(Rt){u("QR code parse error, error = ".concat(Rt))}},g.onerror=u,g.onabort=u,g.onstalled=u,g.onsuspend=u,g.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return MP.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!AS.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Gt.QR_CODE,Gt.AZTEC,Gt.CODABAR,Gt.CODE_39,Gt.CODE_93,Gt.CODE_128,Gt.DATA_MATRIX,Gt.MAXICODE,Gt.ITF,Gt.EAN_13,Gt.EAN_8,Gt.PDF_417,Gt.RSS_14,Gt.RSS_EXPANDED,Gt.UPC_A,Gt.UPC_E,Gt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],l=0,u=t.formatsToSupport;l<u.length;l++){var g=u[l];gP(g)?i.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ys(t))return!0;if(!Ys(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ys(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Ys(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var l=this,u=i.qrbox;this.validateQrboxConfig(u);var g=this.toQrdimensions(t,n,u),w=function(y){if(y<Fr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Fr.MIN_QR_BOX_SIZE,"px.")},E=function(y){return y>t&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};w(g.width),w(g.height),g.width=E(g.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var l=Ys(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(t,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=i.isShadedBoxEnabled()&&u.height<=n,w={x:0,y:0,width:t,height:n},E=g?this.getShadedRegionBounds(t,n,u):w,y=this.createCanvasElement(E.width,E.height),_={willReadFrequently:!0},b=y.getContext("2d",_);b.canvas.width=E.width,b.canvas.height=E.height,this.element.append(y),g&&this.possiblyInsertShadingElement(this.element,t,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=b,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ic.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return t(l.text,Ow.createFromQrcodeResult(l)),i.possiblyUpdateShaders(!0),!0}).catch(function(l){i.possiblyUpdateShaders(!1);var u=Ic.codeParseError(l);return n(u,yS.createFrom(u)),!1})},e.prototype.foreverScan=function(t,n,i){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),g=u.videoWidth/u.clientWidth,w=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*g,y=this.qrRegion.height*w,_=this.qrRegion.x*g,b=this.qrRegion.y*w;this.context.drawImage(u,_,b,E,y,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(t,n,i)},l.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(k){!k&&t.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,i).finally(function(){R()})):R()}).catch(function(k){l.logger.logError("Error happend while scanning context",k),R()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",l={user:!0,environment:!0},u="exact",g=function(z){if(z in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},w=Object.keys(t);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var E=Object.keys(t)[0];if(E!==n&&E!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(E===n){var y=t.facingMode;if(typeof y=="string"){if(g(y))return{facingMode:y}}else if(typeof y=="object")if(u in y){if(g(y["".concat(u)]))return{facingMode:{exact:y["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var _=typeof y;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(u in b)return{deviceId:{exact:b["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var R=typeof b;throw"Invalid type of 'deviceId' = ".concat(R)}}}var k=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},e.prototype.computeCanvasDrawConfig=function(t,n,i,l){if(t<=i&&n<=l){var u=(i-t)/2,g=(l-n)/2;return{x:u,y:g,width:t,height:n}}else{var w=t,E=n;return t>i&&(n=i/t*n,t=i),n>l&&(t=l/n*t,n=l),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(E)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,l)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Fr.BORDER_SHADER_MATCH_COLOR:Fr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var l=t,u=n,g=document.createElement("canvas");return g.style.width="".concat(l,"px"),g.style.height="".concat(u,"px"),g.style.display="none",g.id=Ys(i)?"qr-canvas":i,g},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,l){if(!(n-l.width<1||i-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var g=(n-l.width)/2,w=(i-l.height)/2;if(u.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(Fr.SHADED_REGION_ELEMENT_ID),n-l.width<11||i-l.height<11)this.hasBorderShaders=!1;else{var E=5,y=40;this.insertShaderBorders(u,y,E,-E,null,0,!0),this.insertShaderBorders(u,y,E,-E,null,0,!1),this.insertShaderBorders(u,y,E,null,-E,0,!0),this.insertShaderBorders(u,y,E,null,-E,0,!1),this.insertShaderBorders(u,E,y+E,-E,null,-E,!0),this.insertShaderBorders(u,E,y+E,null,-E,-E,!0),this.insertShaderBorders(u,E,y+E,-E,null,-E,!1),this.insertShaderBorders(u,E,y+E,null,-E,-E,!1),this.hasBorderShaders=!0}t.append(u)}},e.prototype.insertShaderBorders=function(t,n,i,l,u,g,w){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=Fr.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(n,"px"),E.style.height="".concat(i,"px"),l!==null&&(E.style.top="".concat(l,"px")),u!==null&&(E.style.bottom="".concat(u,"px")),w?E.style.left="".concat(g,"px"):E.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),t.appendChild(E)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),ay="data:image/svg+xml;base64,",VP=ay+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",UP=ay+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Hw=ay+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",FP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Gw=(function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e})(),zP=(function(){function e(){this.data=Gw.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Gw.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e})(),jP=(function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Pw.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(l);var u=document.createElement("a");u.innerText=Pw.reportIssues(),u.href="https://github.com/mebjas/html5-qrcode/issues",u.target="new",u.style.color="white",this.infoDiv.appendChild(u),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e})(),HP=(function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Hw,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=FP,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Hw,this.infoIcon.style.opacity="0.6")},e})(),GP=(function(){function e(){var t=this;this.infoDiv=new jP,this.infoIcon=new HP(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e})(),qP=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},YP=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},qw=(function(){function e(){}return e.hasPermissions=function(){return qP(this,void 0,void 0,function(){var t,n,i,l;return YP(this,function(u){switch(u.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=u.sent(),n=0,i=t;n<i.length;n++)if(l=i[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},e})(),vo=(function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===qo.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===qo.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Cs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Cs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,l=t;i<l.length;i++){var u=l[i];if(!Cs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(u))throw"Unsupported scan type ".concat(u)}return t},e})(),jr=(function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e})(),Ua=(function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(jr.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e})(),wS=function(e,t,n,i){function l(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function w(_){try{y(i.next(_))}catch(b){g(b)}}function E(_){try{y(i.throw(_))}catch(b){g(b)}}function y(_){_.done?u(_.value):l(_.value).then(w,E)}y((i=i.apply(e,t||[])).next())})},TS=function(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,l,u,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(_){return E([y,_])}}function E(y){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(i=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(_){y=[6,_],l=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Yw=(function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return wS(this,void 0,void 0,function(){var t,n;return TS(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?rn.torchOffButton():rn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?rn.torchOnFailedMessage():rn.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e})(),XP=(function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=Ua.createElement("button",jr.TORCH_BUTTON_ID),this.torchController=new Yw(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=rn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(u){return wS(i,void 0,void 0,function(){return TS(this,function(g){switch(g.label){case 0:return[4,l.torchController.flipState()];case 1:return g.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(jr.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(jr.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(jr.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(jr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Yw(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=rn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,l){var u=new e(n,l);return u.render(t,i),u},e})(),WP=(function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Ua.createElement("button",jr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(w){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Ua.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var u=this;this.fileScanInput.addEventListener("change",function(w){if(!(w==null||w.target==null)){var E=w.target;if(!(E.files&&E.files.length===0)){var y=E.files,_=y[0],b=_.name;u.setImageNameToButton(b),i(_)}}});var g=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(g),this.fileBasedScanRegion.addEventListener("dragenter",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(w){u.fileBasedScanRegion.style.border=u.fileBasedScanRegionActiveBorder(),w.stopPropagation(),w.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(w){w.stopPropagation(),w.preventDefault(),u.fileBasedScanRegion.style.border=u.fileBasedScanRegionDefaultBorder();var E=w.dataTransfer;if(E){var y=E.files;if(!y||y.length===0)return;for(var _=!1,b=0;b<y.length;++b){var R=y.item(b);if(R){var k=/image.*/;if(R.type.match(k)){_=!0;var z=R.name;u.setImageNameToButton(z),i(R),g.innerText=rn.dragAndDropMessage();break}}}_||(g.innerText=rn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=rn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),l=t.length,u=t.substring(l-8,l);t="".concat(i,"....").concat(u)}var g=rn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=g},e.prototype.setInitialValueToButton=function(){var t=rn.fileSelectionChooseImage()+" - "+rn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var l=new e(t,n,i);return l},e})(),KP=(function(){function e(t){this.selectElement=Ua.createElement("select",jr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var l=rn.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var u=1,g=0,w=this.cameras;g<w.length;g++){var E=w[g],y=E.id,_=E.label==null?y:E.label;(!_||_==="")&&(_=[rn.anonymousCameraPrefix(),u++].join(" "));var b=document.createElement("option");b.value=y,b.innerText=_,this.options.push(b),this.selectElement.appendChild(b)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var l=i[n];if(l.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e})(),QP=(function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ua.createElement("input",jr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=rn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,l){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e})(),zr;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(zr||(zr={}));function ZP(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function JP(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var $P=(function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new vo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ES(this.verbose),this.persistedDataManager=new zP,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(u,g){if(t)t(u,g);else{if(i.lastMatchFound===u)return;i.lastMatchFound=u,i.setHeaderMessage(rn.lastMatch(u),zr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(u,g){n&&n(u,g)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new jw(this.getScanRegionId(),JP(this.config,this.verbose))},e.prototype.pause=function(t){(Ys(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,l){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(u){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(u){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",u),l(u)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Cs.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Cs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Cs.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Cs.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Cs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Cs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Cs.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),vo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),u=this.getDashboardId();l.id=u,l.style.width="100%",t.appendChild(l),this.setupInitialDashboard(l)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new GP;i.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(rn.cameraPermissionRequesting());var u=function(){i||l.createPermissionButton(t,n)};jw.getCameras().then(function(g){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),g&&g.length>0?(t.removeChild(n),l.renderCameraSelection(g)):(l.setHeaderMessage(rn.noCameraFound(),zr.STATUS_WARNING),u())}).catch(function(g){l.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:u(),l.setHeaderMessage(g,zr.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,l=Ua.createElement("button",this.getCameraPermissionButtonId());l.innerText=rn.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,i.createCameraListUi(t,n,l)}),n.appendChild(l)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(vo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){qw.hasPermissions().then(function(l){l?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(l){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=vo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var l=document.createElement("div");l.style.textAlign="center",i.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,l),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=vo.isFileScanType(this.currentScanType),i=this,l=function(u){if(!i.html5Qrcode)throw"html5Qrcode not defined";vo.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(rn.loadingImage()),i.html5Qrcode.scanFileV2(u,!0).then(function(g){i.resetHeaderMessage(),i.qrCodeSuccessCallback(g.decodedText,g)}).catch(function(g){i.setHeaderMessage(g,zr.STATUS_WARNING),i.qrCodeErrorCallback(g,yS.createFrom(g))}))};this.fileSelectionUi=WP.create(t,n,l)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var u=QP.create(l,!1),g=function(q){var j=q.zoomFeature();if(j.isSupported()){u.setOnCameraZoomValueChangeCallback(function(Z){j.apply(Z)});var nt=1;n.config.defaultZoomValueIfSupported&&(nt=n.config.defaultZoomValueIfSupported),nt=mP(nt,j.min(),j.max()),u.setValues(j.min(),j.max(),nt,j.step()),u.show()}},w=KP.create(l,t),E=document.createElement("span"),y=Ua.createElement("button",jr.CAMERA_START_BUTTON_ID);y.innerText=rn.scanButtonStartScanningText(),E.appendChild(y);var _=Ua.createElement("button",jr.CAMERA_STOP_BUTTON_ID);_.innerText=rn.scanButtonStopScanningText(),_.style.display="none",_.disabled=!0,E.appendChild(_);var b,R=function(q){if(!q.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(q.torchFeature()):b=XP.create(E,q.torchFeature(),{display:"none",marginLeft:"5px"},function(j){i.setHeaderMessage(j,zr.STATUS_WARNING)}),b.show()};l.appendChild(E);var k=function(q){q||(y.style.display="none"),y.innerText=rn.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,q&&(y.style.display="inline-block")};if(y.addEventListener("click",function(q){y.innerText=rn.scanButtonScanningStarting(),w.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var j=w.getValue();i.persistedDataManager.setLastUsedCameraId(j),i.html5Qrcode.start(j,ZP(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(nt){_.disabled=!1,_.style.display="inline-block",k(!1);var Z=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&R(Z),n.config.showZoomSliderIfSupported===!0&&g(Z)}).catch(function(nt){i.showHideScanTypeSwapLink(!0),w.enable(),k(!0),i.setHeaderMessage(nt,zr.STATUS_WARNING)})}),w.hasSingleItem()&&y.click(),_.addEventListener("click",function(q){if(!i.html5Qrcode)throw"html5Qrcode not defined";_.disabled=!0,i.html5Qrcode.stop().then(function(j){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),w.enable(),y.disabled=!1,_.style.display="none",y.style.display="inline-block",b&&(b.reset(),b.hide()),u.removeOnCameraZoomValueChangeCallback(),u.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(j){_.disabled=!1,i.setHeaderMessage(j,zr.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var z=i.persistedDataManager.getLastUsedCameraId();w.hasValue(z)?(w.setValue(z),y.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=rn.textIfCameraScanSelected(),i=rn.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");u.style.textAlign="center";var g=Ua.createElement("span",this.getDashboardSectionSwapLinkId());g.style.textDecoration="underline",g.style.cursor="pointer",g.innerText=vo.isCameraScanType(this.currentScanType)?n:i,g.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,vo.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),g.innerText=i,t.currentScanType=qo.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),g.innerText=n,t.currentScanType=qo.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),u.appendChild(g),l.appendChild(u)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){qw.hasPermissions().then(function(i){if(i){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=zr.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case zr.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case zr.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case zr.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=VP,this.cameraScanImage.alt=rn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=UP,this.fileScanImage.alt=rn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return jr.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return jr.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e})();function _S({onScan:e,scanning:t}){const n=st.useRef(null);return st.useEffect(()=>{if(!t){n.current&&n.current.clear().catch(()=>{});return}return n.current=new $P("reader",{fps:20,qrbox:{width:250,height:250},rememberLastUsedCamera:!0,disableFlip:!1},!1),n.current.render(i=>{try{const l=JSON.parse(i);e(l),n.current.clear()}catch(l){console.error("QR Code 不是 JSON 格式",l)}},()=>{}),()=>{n.current&&n.current.clear().catch(()=>{})}},[t,e]),Tt.jsx("div",{id:"reader",className:"mt-2 w-64 h-64"})}function tL({lang:e}){const{user:t,profile:n,setProfile:i}=mS(),g=e==="zh"?[{id:1,text:"跟主管開會",point:10,requiresQRCode:!0},{id:2,text:"和人資吃午餐",point:10,requiresQRCode:!0},{id:3,text:"共用辦公設備",point:10},{id:4,text:"一起參加公司活動",point:20},{id:5,text:"認識實習生",point:20,requiresQRCode:!0},{id:6,text:"分享工作經驗",point:15},{id:7,text:"參與團隊會議並提出建議",point:15},{id:8,text:"組織團隊建設活動",point:25},{id:9,text:"參加公司志願者活動",point:30},{id:10,text:"推薦優秀人才加入公司",point:50},{id:11,text:"與同事合作完成專案",point:40},{id:12,text:"參加跨部門合作",point:35},{id:13,text:"完成編輯個人檔案",point:15}]:[{id:1,text:"Have coffee with colleagues",point:10,requiresQRCode:!0},{id:2,text:"Have lunch together",point:10,requiresQRCode:!0},{id:3,text:"Share office equipment",point:10},{id:4,text:"Participate in company events",point:20},{id:5,text:"Get to know interns",point:20,requiresQRCode:!0},{id:6,text:"Share work experience",point:15},{id:7,text:"Attend team meetings and provide suggestions",point:15},{id:8,text:"Organize team-building activities",point:25},{id:9,text:"Join company volunteer activities",point:30},{id:10,text:"Refer talented individuals to join the company",point:50},{id:11,text:"Collaborate with colleagues to complete projects",point:40},{id:12,text:"Participate in cross-departmental collaboration",point:35},{id:13,text:"Complete and edit personal profile",point:15}],[w,E]=st.useState(n?.completedIds||[]),[y,_]=st.useState("tasks"),[b,R]=st.useState(!1),[k,z]=st.useState(null);st.useEffect(()=>{E(n?.completedIds||[])},[n]);const q=async Z=>{if(!t||!n||w.includes(Z.id))return;const W=(n.scores||0)+Z.point,yt=[...w,Z.id],wt=ko(Bo,"profiles",t.uid);await Yd(wt,{scores:W,completedIds:yt}),i({...n,scores:W,completedIds:yt}),E(yt)},j=Z=>{z(Z),R(!0)},nt=Z=>{if(k){try{const W=typeof Z=="string"?JSON.parse(Z):Z;if(w.includes(k.id)){alert(e==="zh"?"任務已完成 ✅":"Task already completed ✅"),z(null),R(!1);return}const wt={跟主管開會:"主管",和人資吃午餐:"人資",認識實習生:"實習生"}[k.text];wt&&W.title===wt?(q(k),alert(e==="zh"?"任務完成 ✅":"Task Completed ✅")):alert(e==="zh"?"QR 資料不符合任務":"QR data does not match task")}catch{alert(e==="zh"?"QR Code 格式錯誤":"QR Code format error")}z(null),R(!1)}};return Tt.jsxs("div",{className:"page-container",style:{textAlign:"center"},children:[Tt.jsx("h2",{children:e==="zh"?"社交任務":"Social Tasks"}),Tt.jsx("p",{children:e==="zh"?"完成與同梯互動的任務":"Complete social tasks with colleagues"}),Tt.jsxs("div",{style:{marginBottom:"20px"},children:[Tt.jsx("button",{onClick:()=>_("tasks"),style:{marginRight:"10px",backgroundColor:y==="tasks"?"#4caf50":"#eee",color:y==="tasks"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:e==="zh"?"任務列表":"Task List"}),Tt.jsx("button",{onClick:()=>_("completed"),style:{backgroundColor:y==="completed"?"#4caf50":"#eee",color:y==="completed"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:e==="zh"?"已完成任務":"Completed Tasks"})]}),y==="completed"&&Tt.jsx(XA,{tasks:g.filter(Z=>w.includes(Z.id)),completedIds:w,onComplete:()=>{},lang:e}),y==="tasks"&&Tt.jsx(XA,{tasks:g.filter(Z=>!w.includes(Z.id)),completedIds:w,onComplete:q,onScanQRCode:j,lang:e}),b&&k&&Tt.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.6)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999},children:[Tt.jsx("button",{onClick:()=>{R(!1),z(null)},className:"px-4 py-2 bg-red-500 text-white rounded-lg mb-4",children:e==="zh"?"停止掃描":"Stop Scanning"}),Tt.jsx(_S,{scanning:b,onScan:nt})]})]})}const CS=st.createContext({});function eL(e){const t=st.useRef(null);return t.current===null&&(t.current=e()),t.current}const oy=typeof window<"u",nL=oy?st.useLayoutEffect:st.useEffect,ly=st.createContext(null);function cy(e,t){e.indexOf(t)===-1&&e.push(t)}function uy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ya=(e,t,n)=>n>t?t:n<e?e:n;let hy=()=>{};const Xa={},vS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function SS(e){return typeof e=="object"&&e!==null}const bS=e=>/^0[^.\s]+$/u.test(e);function fy(e){let t;return()=>(t===void 0&&(t=e()),t)}const os=e=>e,iL=(e,t)=>n=>t(e(n)),jh=(...e)=>e.reduce(iL),Ch=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class dy{constructor(){this.subscriptions=[]}add(t){return cy(this.subscriptions,t),()=>uy(this.subscriptions,t)}notify(t,n,i){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,n,i);else for(let u=0;u<l;u++){const g=this.subscriptions[u];g&&g(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ta=e=>e*1e3,ea=e=>e/1e3;function IS(e,t){return t?e*(1e3/t):0}const RS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,rL=1e-7,sL=12;function aL(e,t,n,i,l){let u,g,w=0;do g=t+(n-t)/2,u=RS(g,i,l)-e,u>0?n=g:t=g;while(Math.abs(u)>rL&&++w<sL);return g}function Hh(e,t,n,i){if(e===t&&n===i)return os;const l=u=>aL(u,0,1,e,n);return u=>u===0||u===1?u:RS(l(u),t,i)}const NS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,DS=e=>t=>1-e(1-t),MS=Hh(.33,1.53,.69,.99),gy=DS(MS),OS=NS(gy),PS=e=>(e*=2)<1?.5*gy(e):.5*(2-Math.pow(2,-10*(e-1))),my=e=>1-Math.sin(Math.acos(e)),LS=DS(my),kS=NS(my),oL=Hh(.42,0,1,1),lL=Hh(0,0,.58,1),BS=Hh(.42,0,.58,1),cL=e=>Array.isArray(e)&&typeof e[0]!="number",VS=e=>Array.isArray(e)&&typeof e[0]=="number",uL={linear:os,easeIn:oL,easeInOut:BS,easeOut:lL,circIn:my,circInOut:kS,circOut:LS,backIn:gy,backInOut:OS,backOut:MS,anticipate:PS},hL=e=>typeof e=="string",Xw=e=>{if(VS(e)){hy(e.length===4);const[t,n,i,l]=e;return Hh(t,n,i,l)}else if(hL(e))return uL[e];return e},id=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function fL(e,t){let n=new Set,i=new Set,l=!1,u=!1;const g=new WeakSet;let w={delta:0,timestamp:0,isProcessing:!1};function E(_){g.has(_)&&(y.schedule(_),e()),_(w)}const y={schedule:(_,b=!1,R=!1)=>{const z=R&&l?n:i;return b&&g.add(_),z.has(_)||z.add(_),_},cancel:_=>{i.delete(_),g.delete(_)},process:_=>{if(w=_,l){u=!0;return}l=!0,[n,i]=[i,n],n.forEach(E),n.clear(),l=!1,u&&(u=!1,y.process(_))}};return y}const dL=40;function US(e,t){let n=!1,i=!0;const l={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,g=id.reduce((W,yt)=>(W[yt]=fL(u),W),{}),{setup:w,read:E,resolveKeyframes:y,preUpdate:_,update:b,preRender:R,render:k,postRender:z}=g,q=()=>{const W=Xa.useManualTiming?l.timestamp:performance.now();n=!1,Xa.useManualTiming||(l.delta=i?1e3/60:Math.max(Math.min(W-l.timestamp,dL),1)),l.timestamp=W,l.isProcessing=!0,w.process(l),E.process(l),y.process(l),_.process(l),b.process(l),R.process(l),k.process(l),z.process(l),l.isProcessing=!1,n&&t&&(i=!1,e(q))},j=()=>{n=!0,i=!0,l.isProcessing||e(q)};return{schedule:id.reduce((W,yt)=>{const wt=g[yt];return W[yt]=(Rt,H=!1,U=!1)=>(n||j(),wt.schedule(Rt,H,U)),W},{}),cancel:W=>{for(let yt=0;yt<id.length;yt++)g[id[yt]].cancel(W)},state:l,steps:g}}const{schedule:bn,cancel:Yo,state:Oi,steps:Gg}=US(typeof requestAnimationFrame<"u"?requestAnimationFrame:os,!0);let Ad;function gL(){Ad=void 0}const pr={now:()=>(Ad===void 0&&pr.set(Oi.isProcessing||Xa.useManualTiming?Oi.timestamp:performance.now()),Ad),set:e=>{Ad=e,queueMicrotask(gL)}},FS=e=>t=>typeof t=="string"&&t.startsWith(e),py=FS("--"),mL=FS("var(--"),yy=e=>mL(e)?pL.test(e.split("/*")[0].trim()):!1,pL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},vh={...eu,transform:e=>Ya(0,1,e)},rd={...eu,default:1},lh=e=>Math.round(e*1e5)/1e5,Ey=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yL(e){return e==null}const EL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ay=(e,t)=>n=>!!(typeof n=="string"&&EL.test(n)&&n.startsWith(e)||t&&!yL(n)&&Object.prototype.hasOwnProperty.call(n,t)),zS=(e,t,n)=>i=>{if(typeof i!="string")return i;const[l,u,g,w]=i.match(Ey);return{[e]:parseFloat(l),[t]:parseFloat(u),[n]:parseFloat(g),alpha:w!==void 0?parseFloat(w):1}},AL=e=>Ya(0,255,e),qg={...eu,transform:e=>Math.round(AL(e))},Cl={test:Ay("rgb","red"),parse:zS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+qg.transform(e)+", "+qg.transform(t)+", "+qg.transform(n)+", "+lh(vh.transform(i))+")"};function xL(e){let t="",n="",i="",l="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),l=e.substring(4,5),t+=t,n+=n,i+=i,l+=l),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:l?parseInt(l,16)/255:1}}const Pm={test:Ay("#"),parse:xL,transform:Cl.transform},Gh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),bo=Gh("deg"),na=Gh("%"),le=Gh("px"),wL=Gh("vh"),TL=Gh("vw"),Ww={...na,parse:e=>na.parse(e)/100,transform:e=>na.transform(e*100)},Rc={test:Ay("hsl","hue"),parse:zS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+na.transform(lh(t))+", "+na.transform(lh(n))+", "+lh(vh.transform(i))+")"},ai={test:e=>Cl.test(e)||Pm.test(e)||Rc.test(e),parse:e=>Cl.test(e)?Cl.parse(e):Rc.test(e)?Rc.parse(e):Pm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Cl.transform(e):Rc.transform(e),getAnimatableNone:e=>{const t=ai.parse(e);return t.alpha=0,ai.transform(t)}},_L=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function CL(e){return isNaN(e)&&typeof e=="string"&&(e.match(Ey)?.length||0)+(e.match(_L)?.length||0)>0}const jS="number",HS="color",vL="var",SL="var(",Kw="${}",bL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sh(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},l=[];let u=0;const w=t.replace(bL,E=>(ai.test(E)?(i.color.push(u),l.push(HS),n.push(ai.parse(E))):E.startsWith(SL)?(i.var.push(u),l.push(vL),n.push(E)):(i.number.push(u),l.push(jS),n.push(parseFloat(E))),++u,Kw)).split(Kw);return{values:n,split:w,indexes:i,types:l}}function GS(e){return Sh(e).values}function qS(e){const{split:t,types:n}=Sh(e),i=t.length;return l=>{let u="";for(let g=0;g<i;g++)if(u+=t[g],l[g]!==void 0){const w=n[g];w===jS?u+=lh(l[g]):w===HS?u+=ai.transform(l[g]):u+=l[g]}return u}}const IL=e=>typeof e=="number"?0:ai.test(e)?ai.getAnimatableNone(e):e;function RL(e){const t=GS(e);return qS(e)(t.map(IL))}const Xo={test:CL,parse:GS,createTransformer:qS,getAnimatableNone:RL};function Yg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function NL({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let l=0,u=0,g=0;if(!t)l=u=g=n;else{const w=n<.5?n*(1+t):n+t-n*t,E=2*n-w;l=Yg(E,w,e+1/3),u=Yg(E,w,e),g=Yg(E,w,e-1/3)}return{red:Math.round(l*255),green:Math.round(u*255),blue:Math.round(g*255),alpha:i}}function Zd(e,t){return n=>n>0?t:e}const Pn=(e,t,n)=>e+(t-e)*n,Xg=(e,t,n)=>{const i=e*e,l=n*(t*t-i)+i;return l<0?0:Math.sqrt(l)},DL=[Pm,Cl,Rc],ML=e=>DL.find(t=>t.test(e));function Qw(e){const t=ML(e);if(!t)return!1;let n=t.parse(e);return t===Rc&&(n=NL(n)),n}const Zw=(e,t)=>{const n=Qw(e),i=Qw(t);if(!n||!i)return Zd(e,t);const l={...n};return u=>(l.red=Xg(n.red,i.red,u),l.green=Xg(n.green,i.green,u),l.blue=Xg(n.blue,i.blue,u),l.alpha=Pn(n.alpha,i.alpha,u),Cl.transform(l))},Lm=new Set(["none","hidden"]);function OL(e,t){return Lm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function PL(e,t){return n=>Pn(e,t,n)}function xy(e){return typeof e=="number"?PL:typeof e=="string"?yy(e)?Zd:ai.test(e)?Zw:BL:Array.isArray(e)?YS:typeof e=="object"?ai.test(e)?Zw:LL:Zd}function YS(e,t){const n=[...e],i=n.length,l=e.map((u,g)=>xy(u)(u,t[g]));return u=>{for(let g=0;g<i;g++)n[g]=l[g](u);return n}}function LL(e,t){const n={...e,...t},i={};for(const l in n)e[l]!==void 0&&t[l]!==void 0&&(i[l]=xy(e[l])(e[l],t[l]));return l=>{for(const u in i)n[u]=i[u](l);return n}}function kL(e,t){const n=[],i={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const u=t.types[l],g=e.indexes[u][i[u]],w=e.values[g]??0;n[l]=w,i[u]++}return n}const BL=(e,t)=>{const n=Xo.createTransformer(t),i=Sh(e),l=Sh(t);return i.indexes.var.length===l.indexes.var.length&&i.indexes.color.length===l.indexes.color.length&&i.indexes.number.length>=l.indexes.number.length?Lm.has(e)&&!l.values.length||Lm.has(t)&&!i.values.length?OL(e,t):jh(YS(kL(i,l),l.values),n):Zd(e,t)};function XS(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Pn(e,t,n):xy(e)(e,t)}const VL=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bn.update(t,n),stop:()=>Yo(t),now:()=>Oi.isProcessing?Oi.timestamp:pr.now()}},WS=(e,t,n=10)=>{let i="";const l=Math.max(Math.round(t/n),2);for(let u=0;u<l;u++)i+=Math.round(e(u/(l-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Jd=2e4;function wy(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Jd;)t+=n,i=e.next(t);return t>=Jd?1/0:t}function UL(e,t=100,n){const i=n({...e,keyframes:[0,t]}),l=Math.min(wy(i),Jd);return{type:"keyframes",ease:u=>i.next(l*u).value/t,duration:ea(l)}}const FL=5;function KS(e,t,n){const i=Math.max(t-FL,0);return IS(n-e(i),t-i)}const qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wg=.001;function zL({duration:e=qn.duration,bounce:t=qn.bounce,velocity:n=qn.velocity,mass:i=qn.mass}){let l,u,g=1-t;g=Ya(qn.minDamping,qn.maxDamping,g),e=Ya(qn.minDuration,qn.maxDuration,ea(e)),g<1?(l=y=>{const _=y*g,b=_*e,R=_-n,k=km(y,g),z=Math.exp(-b);return Wg-R/k*z},u=y=>{const b=y*g*e,R=b*n+n,k=Math.pow(g,2)*Math.pow(y,2)*e,z=Math.exp(-b),q=km(Math.pow(y,2),g);return(-l(y)+Wg>0?-1:1)*((R-k)*z)/q}):(l=y=>{const _=Math.exp(-y*e),b=(y-n)*e+1;return-Wg+_*b},u=y=>{const _=Math.exp(-y*e),b=(n-y)*(e*e);return _*b});const w=5/e,E=HL(l,u,w);if(e=ta(e),isNaN(E))return{stiffness:qn.stiffness,damping:qn.damping,duration:e};{const y=Math.pow(E,2)*i;return{stiffness:y,damping:g*2*Math.sqrt(i*y),duration:e}}}const jL=12;function HL(e,t,n){let i=n;for(let l=1;l<jL;l++)i=i-e(i)/t(i);return i}function km(e,t){return e*Math.sqrt(1-t*t)}const GL=["duration","bounce"],qL=["stiffness","damping","mass"];function Jw(e,t){return t.some(n=>e[n]!==void 0)}function YL(e){let t={velocity:qn.velocity,stiffness:qn.stiffness,damping:qn.damping,mass:qn.mass,isResolvedFromDuration:!1,...e};if(!Jw(e,qL)&&Jw(e,GL))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),l=i*i,u=2*Ya(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:qn.mass,stiffness:l,damping:u}}else{const n=zL(e);t={...t,...n,mass:qn.mass},t.isResolvedFromDuration=!0}return t}function $d(e=qn.visualDuration,t=qn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:l}=n;const u=n.keyframes[0],g=n.keyframes[n.keyframes.length-1],w={done:!1,value:u},{stiffness:E,damping:y,mass:_,duration:b,velocity:R,isResolvedFromDuration:k}=YL({...n,velocity:-ea(n.velocity||0)}),z=R||0,q=y/(2*Math.sqrt(E*_)),j=g-u,nt=ea(Math.sqrt(E/_)),Z=Math.abs(j)<5;i||(i=Z?qn.restSpeed.granular:qn.restSpeed.default),l||(l=Z?qn.restDelta.granular:qn.restDelta.default);let W;if(q<1){const wt=km(nt,q);W=Rt=>{const H=Math.exp(-q*nt*Rt);return g-H*((z+q*nt*j)/wt*Math.sin(wt*Rt)+j*Math.cos(wt*Rt))}}else if(q===1)W=wt=>g-Math.exp(-nt*wt)*(j+(z+nt*j)*wt);else{const wt=nt*Math.sqrt(q*q-1);W=Rt=>{const H=Math.exp(-q*nt*Rt),U=Math.min(wt*Rt,300);return g-H*((z+q*nt*j)*Math.sinh(U)+wt*j*Math.cosh(U))/wt}}const yt={calculatedDuration:k&&b||null,next:wt=>{const Rt=W(wt);if(k)w.done=wt>=b;else{let H=wt===0?z:0;q<1&&(H=wt===0?ta(z):KS(W,wt,Rt));const U=Math.abs(H)<=i,V=Math.abs(g-Rt)<=l;w.done=U&&V}return w.value=w.done?g:Rt,w},toString:()=>{const wt=Math.min(wy(yt),Jd),Rt=WS(H=>yt.next(wt*H).value,wt,30);return wt+"ms "+Rt},toTransition:()=>{}};return yt}$d.applyToOptions=e=>{const t=UL(e,100,$d);return e.ease=t.ease,e.duration=ta(t.duration),e.type="keyframes",e};function Bm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:l=10,bounceStiffness:u=500,modifyTarget:g,min:w,max:E,restDelta:y=.5,restSpeed:_}){const b=e[0],R={done:!1,value:b},k=U=>w!==void 0&&U<w||E!==void 0&&U>E,z=U=>w===void 0?E:E===void 0||Math.abs(w-U)<Math.abs(E-U)?w:E;let q=n*t;const j=b+q,nt=g===void 0?j:g(j);nt!==j&&(q=nt-b);const Z=U=>-q*Math.exp(-U/i),W=U=>nt+Z(U),yt=U=>{const V=Z(U),et=W(U);R.done=Math.abs(V)<=y,R.value=R.done?nt:et};let wt,Rt;const H=U=>{k(R.value)&&(wt=U,Rt=$d({keyframes:[R.value,z(R.value)],velocity:KS(W,U,R.value),damping:l,stiffness:u,restDelta:y,restSpeed:_}))};return H(0),{calculatedDuration:null,next:U=>{let V=!1;return!Rt&&wt===void 0&&(V=!0,yt(U),H(U)),wt!==void 0&&U>=wt?Rt.next(U-wt):(!V&&yt(U),R)}}}function XL(e,t,n){const i=[],l=n||Xa.mix||XS,u=e.length-1;for(let g=0;g<u;g++){let w=l(e[g],e[g+1]);if(t){const E=Array.isArray(t)?t[g]||os:t;w=jh(E,w)}i.push(w)}return i}function WL(e,t,{clamp:n=!0,ease:i,mixer:l}={}){const u=e.length;if(hy(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const g=e[0]===e[1];e[0]>e[u-1]&&(e=[...e].reverse(),t=[...t].reverse());const w=XL(t,i,l),E=w.length,y=_=>{if(g&&_<e[0])return t[0];let b=0;if(E>1)for(;b<e.length-2&&!(_<e[b+1]);b++);const R=Ch(e[b],e[b+1],_);return w[b](R)};return n?_=>y(Ya(e[0],e[u-1],_)):y}function KL(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const l=Ch(0,t,i);e.push(Pn(n,1,l))}}function QL(e){const t=[0];return KL(t,e.length-1),t}function ZL(e,t){return e.map(n=>n*t)}function JL(e,t){return e.map(()=>t||BS).splice(0,e.length-1)}function ch({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const l=cL(i)?i.map(Xw):Xw(i),u={done:!1,value:t[0]},g=ZL(n&&n.length===t.length?n:QL(t),e),w=WL(g,t,{ease:Array.isArray(l)?l:JL(t,l)});return{calculatedDuration:e,next:E=>(u.value=w(E),u.done=E>=e,u)}}const $L=e=>e!==null;function Ty(e,{repeat:t,repeatType:n="loop"},i,l=1){const u=e.filter($L),w=l<0||t&&n!=="loop"&&t%2===1?0:u.length-1;return!w||i===void 0?u[w]:i}const t7={decay:Bm,inertia:Bm,tween:ch,keyframes:ch,spring:$d};function QS(e){typeof e.type=="string"&&(e.type=t7[e.type])}class _y{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const e7=e=>e/100;class Cy extends _y{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==pr.now()&&this.tick(pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;QS(t);const{type:n=ch,repeat:i=0,repeatDelay:l=0,repeatType:u,velocity:g=0}=t;let{keyframes:w}=t;const E=n||ch;E!==ch&&typeof w[0]!="number"&&(this.mixKeyframes=jh(e7,XS(w[0],w[1])),w=[0,100]);const y=E({...t,keyframes:w});u==="mirror"&&(this.mirroredGenerator=E({...t,keyframes:[...w].reverse(),velocity:-g})),y.calculatedDuration===null&&(y.calculatedDuration=wy(y));const{calculatedDuration:_}=y;this.calculatedDuration=_,this.resolvedDuration=_+l,this.totalDuration=this.resolvedDuration*(i+1)-l,this.generator=y}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:l,mixKeyframes:u,mirroredGenerator:g,resolvedDuration:w,calculatedDuration:E}=this;if(this.startTime===null)return i.next(0);const{delay:y=0,keyframes:_,repeat:b,repeatType:R,repeatDelay:k,type:z,onUpdate:q,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const nt=this.currentTime-y*(this.playbackSpeed>=0?1:-1),Z=this.playbackSpeed>=0?nt<0:nt>l;this.currentTime=Math.max(nt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let W=this.currentTime,yt=i;if(b){const U=Math.min(this.currentTime,l)/w;let V=Math.floor(U),et=U%1;!et&&U>=1&&(et=1),et===1&&V--,V=Math.min(V,b+1),!!(V%2)&&(R==="reverse"?(et=1-et,k&&(et-=k/w)):R==="mirror"&&(yt=g)),W=Ya(0,1,et)*w}const wt=Z?{done:!1,value:_[0]}:yt.next(W);u&&(wt.value=u(wt.value));let{done:Rt}=wt;!Z&&E!==null&&(Rt=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Rt);return H&&z!==Bm&&(wt.value=Ty(_,this.options,j,this.speed)),q&&q(wt.value),H&&this.finish(),wt}then(t,n){return this.finished.then(t,n)}get duration(){return ea(this.calculatedDuration)}get time(){return ea(this.currentTime)}set time(t){t=ta(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(pr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ea(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=VL,startTime:n}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function n7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const vl=e=>e*180/Math.PI,Vm=e=>{const t=vl(Math.atan2(e[1],e[0]));return Um(t)},i7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Vm,rotateZ:Vm,skewX:e=>vl(Math.atan(e[1])),skewY:e=>vl(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Um=e=>(e=e%360,e<0&&(e+=360),e),$w=Vm,tT=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),eT=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),r7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tT,scaleY:eT,scale:e=>(tT(e)+eT(e))/2,rotateX:e=>Um(vl(Math.atan2(e[6],e[5]))),rotateY:e=>Um(vl(Math.atan2(-e[2],e[0]))),rotateZ:$w,rotate:$w,skewX:e=>vl(Math.atan(e[4])),skewY:e=>vl(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Fm(e){return e.includes("scale")?1:0}function zm(e,t){if(!e||e==="none")return Fm(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,l;if(n)i=r7,l=n;else{const w=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=i7,l=w}if(!l)return Fm(t);const u=i[t],g=l[1].split(",").map(a7);return typeof u=="function"?u(g):g[u]}const s7=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return zm(n,t)};function a7(e){return parseFloat(e.trim())}const nu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],iu=new Set(nu),nT=e=>e===eu||e===le,o7=new Set(["x","y","z"]),l7=nu.filter(e=>!o7.has(e));function c7(e){const t=[];return l7.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Il={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>zm(t,"x"),y:(e,{transform:t})=>zm(t,"y")};Il.translateX=Il.x;Il.translateY=Il.y;const Rl=new Set;let jm=!1,Hm=!1,Gm=!1;function ZS(){if(Hm){const e=Array.from(Rl).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const l=c7(i);l.length&&(n.set(i,l),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const l=n.get(i);l&&l.forEach(([u,g])=>{i.getValue(u)?.set(g)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Hm=!1,jm=!1,Rl.forEach(e=>e.complete(Gm)),Rl.clear()}function JS(){Rl.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Hm=!0)})}function u7(){Gm=!0,JS(),ZS(),Gm=!1}class vy{constructor(t,n,i,l,u,g=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=l,this.element=u,this.isAsync=g}scheduleResolve(){this.state="scheduled",this.isAsync?(Rl.add(this),jm||(jm=!0,bn.read(JS),bn.resolveKeyframes(ZS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:l}=this;if(t[0]===null){const u=l?.get(),g=t[t.length-1];if(u!==void 0)t[0]=u;else if(i&&n){const w=i.readValue(n,g);w!=null&&(t[0]=w)}t[0]===void 0&&(t[0]=g),l&&u===void 0&&l.set(t[0])}n7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Rl.delete(this)}cancel(){this.state==="scheduled"&&(Rl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const h7=e=>e.startsWith("--");function f7(e,t,n){h7(t)?e.style.setProperty(t,n):e.style[t]=n}const d7=fy(()=>window.ScrollTimeline!==void 0),g7={};function m7(e,t){const n=fy(e);return()=>g7[t]??n()}const $S=m7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$u=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,iT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$u([0,.65,.55,1]),circOut:$u([.55,0,1,.45]),backIn:$u([.31,.01,.66,-.59]),backOut:$u([.33,1.53,.69,.99])};function tb(e,t){if(e)return typeof e=="function"?$S()?WS(e,t):"ease-out":VS(e)?$u(e):Array.isArray(e)?e.map(n=>tb(n,t)||iT.easeOut):iT[e]}function p7(e,t,n,{delay:i=0,duration:l=300,repeat:u=0,repeatType:g="loop",ease:w="easeOut",times:E}={},y=void 0){const _={[t]:n};E&&(_.offset=E);const b=tb(w,l);Array.isArray(b)&&(_.easing=b);const R={delay:i,duration:l,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:u+1,direction:g==="reverse"?"alternate":"normal"};return y&&(R.pseudoElement=y),e.animate(_,R)}function eb(e){return typeof e=="function"&&"applyToOptions"in e}function y7({type:e,...t}){return eb(e)&&$S()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class E7 extends _y{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:l,pseudoElement:u,allowFlatten:g=!1,finalKeyframe:w,onComplete:E}=t;this.isPseudoElement=!!u,this.allowFlatten=g,this.options=t,hy(typeof t.type!="string");const y=y7(t);this.animation=p7(n,i,l,y,u),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const _=Ty(l,this.options,w,this.speed);this.updateMotionValue?this.updateMotionValue(_):f7(n,i,_),this.animation.cancel()}E?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ea(Number(t))}get time(){return ea(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ta(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&d7()?(this.animation.timeline=t,os):n(this)}}const nb={anticipate:PS,backInOut:OS,circInOut:kS};function A7(e){return e in nb}function x7(e){typeof e.ease=="string"&&A7(e.ease)&&(e.ease=nb[e.ease])}const rT=10;class w7 extends E7{constructor(t){x7(t),QS(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:l,element:u,...g}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const w=new Cy({...g,autoplay:!1}),E=ta(this.finishedTime??this.time);n.setWithVelocity(w.sample(E-rT).value,w.sample(E).value,rT),w.stop()}}const sT=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xo.test(e)||e==="0")&&!e.startsWith("url("));function T7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function _7(e,t,n,i){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const u=e[e.length-1],g=sT(l,t),w=sT(u,t);return!g||!w?!1:T7(e)||(n==="spring"||eb(n))&&i}function qm(e){e.duration=0,e.type}const C7=new Set(["opacity","clipPath","filter","transform"]),v7=fy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function S7(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:l,damping:u,type:g}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:E,transformTemplate:y}=t.owner.getProps();return v7()&&n&&C7.has(n)&&(n!=="transform"||!y)&&!E&&!i&&l!=="mirror"&&u!==0&&g!=="inertia"}const b7=40;class I7 extends _y{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:l=0,repeatDelay:u=0,repeatType:g="loop",keyframes:w,name:E,motionValue:y,element:_,...b}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=pr.now();const R={autoplay:t,delay:n,type:i,repeat:l,repeatDelay:u,repeatType:g,name:E,motionValue:y,element:_,...b},k=_?.KeyframeResolver||vy;this.keyframeResolver=new k(w,(z,q,j)=>this.onKeyframesResolved(z,q,R,!j),E,y,_),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,i,l){this.keyframeResolver=void 0;const{name:u,type:g,velocity:w,delay:E,isHandoff:y,onUpdate:_}=i;this.resolvedAt=pr.now(),_7(t,u,g,w)||((Xa.instantAnimations||!E)&&_?.(Ty(t,i,n)),t[0]=t[t.length-1],qm(i),i.repeat=0);const R={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>b7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},k=!y&&S7(R)?new w7({...R,element:R.motionValue.owner.current}):new Cy(R);k.finished.then(()=>this.notifyFinished()).catch(os),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),u7()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const R7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function N7(e){const t=R7.exec(e);if(!t)return[,];const[,n,i,l]=t;return[`--${n??i}`,l]}function ib(e,t,n=1){const[i,l]=N7(e);if(!i)return;const u=window.getComputedStyle(t).getPropertyValue(i);if(u){const g=u.trim();return vS(g)?parseFloat(g):g}return yy(l)?ib(l,t,n+1):l}function Sy(e,t){return e?.[t]??e?.default??e}const rb=new Set(["width","height","top","left","right","bottom",...nu]),D7={test:e=>e==="auto",parse:e=>e},sb=e=>t=>t.test(e),ab=[eu,le,na,bo,TL,wL,D7],aT=e=>ab.find(sb(e));function M7(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||bS(e):!0}const O7=new Set(["brightness","contrast","saturate","opacity"]);function P7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Ey)||[];if(!i)return e;const l=n.replace(i,"");let u=O7.has(t)?1:0;return i!==n&&(u*=100),t+"("+u+l+")"}const L7=/\b([a-z-]*)\(.*?\)/gu,Ym={...Xo,getAnimatableNone:e=>{const t=e.match(L7);return t?t.map(P7).join(" "):e}},oT={...eu,transform:Math.round},k7={rotate:bo,rotateX:bo,rotateY:bo,rotateZ:bo,scale:rd,scaleX:rd,scaleY:rd,scaleZ:rd,skew:bo,skewX:bo,skewY:bo,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:vh,originX:Ww,originY:Ww,originZ:le},by={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...k7,zIndex:oT,fillOpacity:vh,strokeOpacity:vh,numOctaves:oT},B7={...by,color:ai,backgroundColor:ai,outlineColor:ai,fill:ai,stroke:ai,borderColor:ai,borderTopColor:ai,borderRightColor:ai,borderBottomColor:ai,borderLeftColor:ai,filter:Ym,WebkitFilter:Ym},ob=e=>B7[e];function lb(e,t){let n=ob(e);return n!==Ym&&(n=Xo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const V7=new Set(["auto","none","0"]);function U7(e,t,n){let i=0,l;for(;i<e.length&&!l;){const u=e[i];typeof u=="string"&&!V7.has(u)&&Sh(u).values.length&&(l=e[i]),i++}if(l&&n)for(const u of t)e[u]=lb(n,l)}class F7 extends vy{constructor(t,n,i,l,u){super(t,n,i,l,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let E=0;E<t.length;E++){let y=t[E];if(typeof y=="string"&&(y=y.trim(),yy(y))){const _=ib(y,n.current);_!==void 0&&(t[E]=_),E===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!rb.has(i)||t.length!==2)return;const[l,u]=t,g=aT(l),w=aT(u);if(g!==w)if(nT(g)&&nT(w))for(let E=0;E<t.length;E++){const y=t[E];typeof y=="string"&&(t[E]=parseFloat(y))}else Il[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let l=0;l<t.length;l++)(t[l]===null||M7(t[l]))&&i.push(l);i.length&&U7(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Il[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&t.getValue(i,l).jump(l,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const l=t.getValue(n);l&&l.jump(this.measuredOrigin,!1);const u=i.length-1,g=i[u];i[u]=Il[n](t.measureViewportBox(),window.getComputedStyle(t.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),this.removedTransforms?.length&&this.removedTransforms.forEach(([w,E])=>{t.getValue(w).set(E)}),this.resolveNoneKeyframes()}}function z7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const l=n?.[e]??i.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const cb=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function j7(e){return SS(e)&&"offsetHeight"in e}const lT=30,H7=e=>!isNaN(parseFloat(e));class G7{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const l=pr.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=pr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=H7(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new dy);const i=this.events[t].add(n);return t==="change"?()=>{i(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lT);return IS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xc(e,t){return new G7(e,t)}const{schedule:Iy}=US(queueMicrotask,!1),_s={x:!1,y:!1};function ub(){return _s.x||_s.y}function q7(e){return e==="x"||e==="y"?_s[e]?null:(_s[e]=!0,()=>{_s[e]=!1}):_s.x||_s.y?null:(_s.x=_s.y=!0,()=>{_s.x=_s.y=!1})}function hb(e,t){const n=z7(e),i=new AbortController,l={passive:!0,...t,signal:i.signal};return[n,l,()=>i.abort()]}function cT(e){return!(e.pointerType==="touch"||ub())}function Y7(e,t,n={}){const[i,l,u]=hb(e,n),g=w=>{if(!cT(w))return;const{target:E}=w,y=t(E,w);if(typeof y!="function"||!E)return;const _=b=>{cT(b)&&(y(b),E.removeEventListener("pointerleave",_))};E.addEventListener("pointerleave",_,l)};return i.forEach(w=>{w.addEventListener("pointerenter",g,l)}),u}const fb=(e,t)=>t?e===t?!0:fb(e,t.parentElement):!1,Ry=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,X7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function W7(e){return X7.has(e.tagName)||e.tabIndex!==-1}const xd=new WeakSet;function uT(e){return t=>{t.key==="Enter"&&e(t)}}function Kg(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const K7=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=uT(()=>{if(xd.has(n))return;Kg(n,"down");const l=uT(()=>{Kg(n,"up")}),u=()=>Kg(n,"cancel");n.addEventListener("keyup",l,t),n.addEventListener("blur",u,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function hT(e){return Ry(e)&&!ub()}function Q7(e,t,n={}){const[i,l,u]=hb(e,n),g=w=>{const E=w.currentTarget;if(!hT(w))return;xd.add(E);const y=t(E,w),_=(k,z)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",R),xd.has(E)&&xd.delete(E),hT(k)&&typeof y=="function"&&y(k,{success:z})},b=k=>{_(k,E===window||E===document||n.useGlobalTarget||fb(E,k.target))},R=k=>{_(k,!1)};window.addEventListener("pointerup",b,l),window.addEventListener("pointercancel",R,l)};return i.forEach(w=>{(n.useGlobalTarget?window:w).addEventListener("pointerdown",g,l),j7(w)&&(w.addEventListener("focus",y=>K7(y,l)),!W7(w)&&!w.hasAttribute("tabindex")&&(w.tabIndex=0))}),u}function db(e){return SS(e)&&"ownerSVGElement"in e}function Z7(e){return db(e)&&e.tagName==="svg"}const Qi=e=>!!(e&&e.getVelocity),J7=[...ab,ai,Xo],$7=e=>J7.find(sb(e)),gb=st.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function tk(e=!0){const t=st.useContext(ly);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:l}=t,u=st.useId();st.useEffect(()=>{if(e)return l(u)},[e]);const g=st.useCallback(()=>e&&i&&i(u),[u,i,e]);return!n&&i?[!1,g]:[!0]}const mb=st.createContext({strict:!1}),fT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wc={};for(const e in fT)Wc[e]={isEnabled:t=>fT[e].some(n=>!!t[n])};function ek(e){for(const t in e)Wc[t]={...Wc[t],...e[t]}}const nk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function t0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nk.has(e)}let pb=e=>!t0(e);function ik(e){typeof e=="function"&&(pb=t=>t.startsWith("on")?!t0(t):e(t))}try{ik(require("@emotion/is-prop-valid").default)}catch{}function rk(e,t,n){const i={};for(const l in e)l==="values"&&typeof e.values=="object"||(pb(l)||n===!0&&t0(l)||!t&&!t0(l)||e.draggable&&l.startsWith("onDrag"))&&(i[l]=e[l]);return i}const M0=st.createContext({});function O0(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function bh(e){return typeof e=="string"||Array.isArray(e)}const Ny=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dy=["initial",...Ny];function P0(e){return O0(e.animate)||Dy.some(t=>bh(e[t]))}function yb(e){return!!(P0(e)||e.variants)}function sk(e,t){if(P0(e)){const{initial:n,animate:i}=e;return{initial:n===!1||bh(n)?n:void 0,animate:bh(i)?i:void 0}}return e.inherit!==!1?t:{}}function ak(e){const{initial:t,animate:n}=sk(e,st.useContext(M0));return st.useMemo(()=>({initial:t,animate:n}),[dT(t),dT(n)])}function dT(e){return Array.isArray(e)?e.join(" "):e}const Ih={};function ok(e){for(const t in e)Ih[t]=e[t],py(t)&&(Ih[t].isCSSVariable=!0)}function Eb(e,{layout:t,layoutId:n}){return iu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ih[e]||e==="opacity")}const lk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ck=nu.length;function uk(e,t,n){let i="",l=!0;for(let u=0;u<ck;u++){const g=nu[u],w=e[g];if(w===void 0)continue;let E=!0;if(typeof w=="number"?E=w===(g.startsWith("scale")?1:0):E=parseFloat(w)===0,!E||n){const y=cb(w,by[g]);if(!E){l=!1;const _=lk[g]||g;i+=`${_}(${y}) `}n&&(t[g]=y)}}return i=i.trim(),n?i=n(t,l?"":i):l&&(i="none"),i}function My(e,t,n){const{style:i,vars:l,transformOrigin:u}=e;let g=!1,w=!1;for(const E in t){const y=t[E];if(iu.has(E)){g=!0;continue}else if(py(E)){l[E]=y;continue}else{const _=cb(y,by[E]);E.startsWith("origin")?(w=!0,u[E]=_):i[E]=_}}if(t.transform||(g||n?i.transform=uk(t,e.transform,n):i.transform&&(i.transform="none")),w){const{originX:E="50%",originY:y="50%",originZ:_=0}=u;i.transformOrigin=`${E} ${y} ${_}`}}const Oy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ab(e,t,n){for(const i in t)!Qi(t[i])&&!Eb(i,n)&&(e[i]=t[i])}function hk({transformTemplate:e},t){return st.useMemo(()=>{const n=Oy();return My(n,t,e),Object.assign({},n.vars,n.style)},[t])}function fk(e,t){const n=e.style||{},i={};return Ab(i,n,e),Object.assign(i,hk(e,t)),i}function dk(e,t){const n={},i=fk(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const gk={offset:"stroke-dashoffset",array:"stroke-dasharray"},mk={offset:"strokeDashoffset",array:"strokeDasharray"};function pk(e,t,n=1,i=0,l=!0){e.pathLength=1;const u=l?gk:mk;e[u.offset]=le.transform(-i);const g=le.transform(t),w=le.transform(n);e[u.array]=`${g} ${w}`}function xb(e,{attrX:t,attrY:n,attrScale:i,pathLength:l,pathSpacing:u=1,pathOffset:g=0,...w},E,y,_){if(My(e,w,y),E){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:b,style:R}=e;b.transform&&(R.transform=b.transform,delete b.transform),(R.transform||b.transformOrigin)&&(R.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),R.transform&&(R.transformBox=_?.transformBox??"fill-box",delete b.transformBox),t!==void 0&&(b.x=t),n!==void 0&&(b.y=n),i!==void 0&&(b.scale=i),l!==void 0&&pk(b,l,u,g,!1)}const wb=()=>({...Oy(),attrs:{}}),Tb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function yk(e,t,n,i){const l=st.useMemo(()=>{const u=wb();return xb(u,t,Tb(i),e.transformTemplate,e.style),{...u.attrs,style:{...u.style}}},[t]);if(e.style){const u={};Ab(u,e.style,e),l.style={...u,...l.style}}return l}const Ek=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Py(e){return typeof e!="string"||e.includes("-")?!1:!!(Ek.indexOf(e)>-1||/[A-Z]/u.test(e))}function Ak(e,t,n,{latestValues:i},l,u=!1){const w=(Py(e)?yk:dk)(t,i,l,e),E=rk(t,typeof e=="string",u),y=e!==st.Fragment?{...E,...w,ref:n}:{},{children:_}=t,b=st.useMemo(()=>Qi(_)?_.get():_,[_]);return st.createElement(e,{...y,children:b})}function gT(e){const t=[{},{}];return e?.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Ly(e,t,n,i){if(typeof t=="function"){const[l,u]=gT(i);t=t(n!==void 0?n:e.custom,l,u)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,u]=gT(i);t=t(n!==void 0?n:e.custom,l,u)}return t}function wd(e){return Qi(e)?e.get():e}function xk({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,l){return{latestValues:wk(n,i,l,e),renderState:t()}}function wk(e,t,n,i){const l={},u=i(e,{});for(const R in u)l[R]=wd(u[R]);let{initial:g,animate:w}=e;const E=P0(e),y=yb(e);t&&y&&!E&&e.inherit!==!1&&(g===void 0&&(g=t.initial),w===void 0&&(w=t.animate));let _=n?n.initial===!1:!1;_=_||g===!1;const b=_?w:g;if(b&&typeof b!="boolean"&&!O0(b)){const R=Array.isArray(b)?b:[b];for(let k=0;k<R.length;k++){const z=Ly(e,R[k]);if(z){const{transitionEnd:q,transition:j,...nt}=z;for(const Z in nt){let W=nt[Z];if(Array.isArray(W)){const yt=_?W.length-1:0;W=W[yt]}W!==null&&(l[Z]=W)}for(const Z in q)l[Z]=q[Z]}}}return l}const _b=e=>(t,n)=>{const i=st.useContext(M0),l=st.useContext(ly),u=()=>xk(e,t,i,l);return n?u():eL(u)};function ky(e,t,n){const{style:i}=e,l={};for(const u in i)(Qi(i[u])||t.style&&Qi(t.style[u])||Eb(u,e)||n?.getValue(u)?.liveStyle!==void 0)&&(l[u]=i[u]);return l}const Tk=_b({scrapeMotionValuesFromProps:ky,createRenderState:Oy});function Cb(e,t,n){const i=ky(e,t,n);for(const l in e)if(Qi(e[l])||Qi(t[l])){const u=nu.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;i[u]=e[l]}return i}const _k=_b({scrapeMotionValuesFromProps:Cb,createRenderState:wb}),Ck=Symbol.for("motionComponentSymbol");function Nc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vk(e,t,n){return st.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Nc(n)&&(n.current=i))},[t])}const By=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Sk="framerAppearId",vb="data-"+By(Sk),Sb=st.createContext({});function bk(e,t,n,i,l){const{visualElement:u}=st.useContext(M0),g=st.useContext(mb),w=st.useContext(ly),E=st.useContext(gb).reducedMotion,y=st.useRef(null);i=i||g.renderer,!y.current&&i&&(y.current=i(e,{visualState:t,parent:u,props:n,presenceContext:w,blockInitialAnimation:w?w.initial===!1:!1,reducedMotionConfig:E}));const _=y.current,b=st.useContext(Sb);_&&!_.projection&&l&&(_.type==="html"||_.type==="svg")&&Ik(y.current,n,l,b);const R=st.useRef(!1);st.useInsertionEffect(()=>{_&&R.current&&_.update(n,w)});const k=n[vb],z=st.useRef(!!k&&!window.MotionHandoffIsComplete?.(k)&&window.MotionHasOptimisedAnimation?.(k));return nL(()=>{_&&(R.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),z.current&&_.animationState&&_.animationState.animateChanges())}),st.useEffect(()=>{_&&(!z.current&&_.animationState&&_.animationState.animateChanges(),z.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(k)}),z.current=!1),_.enteringChildren=void 0)}),_}function Ik(e,t,n,i){const{layoutId:l,layout:u,drag:g,dragConstraints:w,layoutScroll:E,layoutRoot:y,layoutCrossfade:_}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:bb(e.parent)),e.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!g||w&&Nc(w),visualElement:e,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,crossfade:_,layoutScroll:E,layoutRoot:y})}function bb(e){if(e)return e.options.allowProjection!==!1?e.projection:bb(e.parent)}function Qg(e,{forwardMotionProps:t=!1}={},n,i){n&&ek(n);const l=Py(e)?_k:Tk;function u(w,E){let y;const _={...st.useContext(gb),...w,layoutId:Rk(w)},{isStatic:b}=_,R=ak(w),k=l(w,b);if(!b&&oy){Nk();const z=Dk(_);y=z.MeasureLayout,R.visualElement=bk(e,k,_,i,z.ProjectionNode)}return Tt.jsxs(M0.Provider,{value:R,children:[y&&R.visualElement?Tt.jsx(y,{visualElement:R.visualElement,..._}):null,Ak(e,w,vk(k,R.visualElement,E),k,b,t)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const g=st.forwardRef(u);return g[Ck]=e,g}function Rk({layoutId:e}){const t=st.useContext(CS).id;return t&&e!==void 0?t+"-"+e:e}function Nk(e,t){st.useContext(mb).strict}function Dk(e){const{drag:t,layout:n}=Wc;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Mk(e,t){if(typeof Proxy>"u")return Qg;const n=new Map,i=(u,g)=>Qg(u,g,e,t),l=(u,g)=>i(u,g);return new Proxy(l,{get:(u,g)=>g==="create"?i:(n.has(g)||n.set(g,Qg(g,void 0,e,t)),n.get(g))})}function Ib({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function Ok({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Pk(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Zg(e){return e===void 0||e===1}function Xm({scale:e,scaleX:t,scaleY:n}){return!Zg(e)||!Zg(t)||!Zg(n)}function xl(e){return Xm(e)||Rb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Rb(e){return mT(e.x)||mT(e.y)}function mT(e){return e&&e!=="0%"}function e0(e,t,n){const i=e-n,l=t*i;return n+l}function pT(e,t,n,i,l){return l!==void 0&&(e=e0(e,l,i)),e0(e,n,i)+t}function Wm(e,t=0,n=1,i,l){e.min=pT(e.min,t,n,i,l),e.max=pT(e.max,t,n,i,l)}function Nb(e,{x:t,y:n}){Wm(e.x,t.translate,t.scale,t.originPoint),Wm(e.y,n.translate,n.scale,n.originPoint)}const yT=.999999999999,ET=1.0000000000001;function Lk(e,t,n,i=!1){const l=n.length;if(!l)return;t.x=t.y=1;let u,g;for(let w=0;w<l;w++){u=n[w],g=u.projectionDelta;const{visualElement:E}=u.options;E&&E.props.style&&E.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Mc(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),g&&(t.x*=g.x.scale,t.y*=g.y.scale,Nb(e,g)),i&&xl(u.latestValues)&&Mc(e,u.latestValues))}t.x<ET&&t.x>yT&&(t.x=1),t.y<ET&&t.y>yT&&(t.y=1)}function Dc(e,t){e.min=e.min+t,e.max=e.max+t}function AT(e,t,n,i,l=.5){const u=Pn(e.min,e.max,l);Wm(e,t,n,u,i)}function Mc(e,t){AT(e.x,t.x,t.scaleX,t.scale,t.originX),AT(e.y,t.y,t.scaleY,t.scale,t.originY)}function Db(e,t){return Ib(Pk(e.getBoundingClientRect(),t))}function kk(e,t,n){const i=Db(e,n),{scroll:l}=t;return l&&(Dc(i.x,l.offset.x),Dc(i.y,l.offset.y)),i}const xT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oc=()=>({x:xT(),y:xT()}),wT=()=>({min:0,max:0}),$n=()=>({x:wT(),y:wT()}),Km={current:null},Mb={current:!1};function Bk(){if(Mb.current=!0,!!oy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Km.current=e.matches;e.addEventListener("change",t),t()}else Km.current=!1}const Vk=new WeakMap;function Uk(e,t,n){for(const i in t){const l=t[i],u=n[i];if(Qi(l))e.addValue(i,l);else if(Qi(u))e.addValue(i,Xc(l,{owner:e}));else if(u!==l)if(e.hasValue(i)){const g=e.getValue(i);g.liveStyle===!0?g.jump(l):g.hasAnimated||g.set(l)}else{const g=e.getStaticValue(i);e.addValue(i,Xc(g!==void 0?g:l,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const TT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fk{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:l,blockInitialAnimation:u,visualState:g},w={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=pr.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,bn.render(this.render,!1,!0))};const{latestValues:E,renderState:y}=g;this.latestValues=E,this.baseTarget={...E},this.initialValues=n.initial?{...E}:{},this.renderState=y,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=w,this.blockInitialAnimation=!!u,this.isControllingVariants=P0(n),this.isVariantNode=yb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:_,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const R in b){const k=b[R];E[R]!==void 0&&Qi(k)&&k.set(E[R])}}mount(t){this.current=t,Vk.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Mb.current||Bk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Km.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Yo(this.notifyUpdate),Yo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=iu.has(t);i&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",g=>{this.latestValues[t]=g,this.props.onUpdate&&bn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{l(),u&&u(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Wc){const n=Wc[t];if(!n)continue;const{isEnabled:i,Feature:l}=n;if(!this.features[t]&&l&&i(this.props)&&(this.features[t]=new l(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$n()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<TT.length;i++){const l=TT[i];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const u="on"+l,g=t[u];g&&(this.propEventSubscriptions[l]=this.on(l,g))}this.prevMotionValues=Uk(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Xc(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(vS(i)||bS(i))?i=parseFloat(i):!$7(i)&&Xo.test(n)&&(i=lb(t,n)),this.setBaseTarget(t,Qi(i)?i.get():i)),Qi(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const u=Ly(this.props,n,this.presenceContext?.custom);u&&(i=u[t])}if(n&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Qi(l)?l:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new dy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Iy.render(this.render)}}class Ob extends Fk{constructor(){super(...arguments),this.KeyframeResolver=F7}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Pb(e,{style:t,vars:n},i,l){const u=e.style;let g;for(g in t)u[g]=t[g];l?.applyProjectionStyles(u,i);for(g in n)u.setProperty(g,n[g])}function zk(e){return window.getComputedStyle(e)}class jk extends Ob{constructor(){super(...arguments),this.type="html",this.renderInstance=Pb}readValueFromInstance(t,n){if(iu.has(n))return this.projection?.isProjecting?Fm(n):s7(t,n);{const i=zk(t),l=(py(n)?i.getPropertyValue(n):i[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Db(t,n)}build(t,n,i){My(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return ky(t,n,i)}}const Lb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hk(e,t,n,i){Pb(e,t,void 0,i);for(const l in t.attrs)e.setAttribute(Lb.has(l)?l:By(l),t.attrs[l])}class Gk extends Ob{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$n}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(iu.has(n)){const i=ob(n);return i&&i.default||0}return n=Lb.has(n)?n:By(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return Cb(t,n,i)}build(t,n,i){xb(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,l){Hk(t,n,i,l)}mount(t){this.isSVGTag=Tb(t.tagName),super.mount(t)}}const qk=(e,t)=>Py(e)?new Gk(t):new jk(t,{allowProjection:e!==st.Fragment});function Uc(e,t,n){const i=e.getProps();return Ly(i,t,n!==void 0?n:i.custom,e)}const Qm=e=>Array.isArray(e);function Yk(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Xc(n))}function Xk(e){return Qm(e)?e[e.length-1]||0:e}function Wk(e,t){const n=Uc(e,t);let{transitionEnd:i={},transition:l={},...u}=n||{};u={...u,...i};for(const g in u){const w=Xk(u[g]);Yk(e,g,w)}}function Kk(e){return!!(Qi(e)&&e.add)}function Zm(e,t){const n=e.getValue("willChange");if(Kk(n))return n.add(t);if(!n&&Xa.WillChange){const i=new Xa.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function kb(e){return e.props[vb]}const Qk=e=>e!==null;function Zk(e,{repeat:t,repeatType:n="loop"},i){const l=e.filter(Qk),u=t&&n!=="loop"&&t%2===1?0:l.length-1;return l[u]}const Jk={type:"spring",stiffness:500,damping:25,restSpeed:10},$k=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),tB={type:"keyframes",duration:.8},eB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nB=(e,{keyframes:t})=>t.length>2?tB:iu.has(e)?e.startsWith("scale")?$k(t[1]):Jk:eB;function iB({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:l,repeat:u,repeatType:g,repeatDelay:w,from:E,elapsed:y,..._}){return!!Object.keys(_).length}const Vy=(e,t,n,i={},l,u)=>g=>{const w=Sy(i,e)||{},E=w.delay||i.delay||0;let{elapsed:y=0}=i;y=y-ta(E);const _={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...w,delay:-y,onUpdate:R=>{t.set(R),w.onUpdate&&w.onUpdate(R)},onComplete:()=>{g(),w.onComplete&&w.onComplete()},name:e,motionValue:t,element:u?void 0:l};iB(w)||Object.assign(_,nB(e,_)),_.duration&&(_.duration=ta(_.duration)),_.repeatDelay&&(_.repeatDelay=ta(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let b=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(qm(_),_.delay===0&&(b=!0)),(Xa.instantAnimations||Xa.skipAnimations)&&(b=!0,qm(_),_.delay=0),_.allowFlatten=!w.type&&!w.ease,b&&!u&&t.get()!==void 0){const R=Zk(_.keyframes,w);if(R!==void 0){bn.update(()=>{_.onUpdate(R),_.onComplete()});return}}return w.isSync?new Cy(_):new I7(_)};function rB({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function Bb(e,t,{delay:n=0,transitionOverride:i,type:l}={}){let{transition:u=e.getDefaultTransition(),transitionEnd:g,...w}=t;i&&(u=i);const E=[],y=l&&e.animationState&&e.animationState.getState()[l];for(const _ in w){const b=e.getValue(_,e.latestValues[_]??null),R=w[_];if(R===void 0||y&&rB(y,_))continue;const k={delay:n,...Sy(u||{},_)},z=b.get();if(z!==void 0&&!b.isAnimating&&!Array.isArray(R)&&R===z&&!k.velocity)continue;let q=!1;if(window.MotionHandoffAnimation){const nt=kb(e);if(nt){const Z=window.MotionHandoffAnimation(nt,_,bn);Z!==null&&(k.startTime=Z,q=!0)}}Zm(e,_),b.start(Vy(_,b,R,e.shouldReduceMotion&&rb.has(_)?{type:!1}:k,e,q));const j=b.animation;j&&E.push(j)}return g&&Promise.all(E).then(()=>{bn.update(()=>{g&&Wk(e,g)})}),E}function Vb(e,t,n,i=0,l=1){const u=Array.from(e).sort((y,_)=>y.sortNodePosition(_)).indexOf(t),g=e.size,w=(g-1)*i;return typeof n=="function"?n(u,g):l===1?u*i:w-u*i}function Jm(e,t,n={}){const i=Uc(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(l=n.transitionOverride);const u=i?()=>Promise.all(Bb(e,i,n)):()=>Promise.resolve(),g=e.variantChildren&&e.variantChildren.size?(E=0)=>{const{delayChildren:y=0,staggerChildren:_,staggerDirection:b}=l;return sB(e,t,E,y,_,b,n)}:()=>Promise.resolve(),{when:w}=l;if(w){const[E,y]=w==="beforeChildren"?[u,g]:[g,u];return E().then(()=>y())}else return Promise.all([u(),g(n.delay)])}function sB(e,t,n=0,i=0,l=0,u=1,g){const w=[];for(const E of e.variantChildren)E.notify("AnimationStart",t),w.push(Jm(E,t,{...g,delay:n+(typeof i=="function"?0:i)+Vb(e.variantChildren,E,i,l,u)}).then(()=>E.notify("AnimationComplete",t)));return Promise.all(w)}function aB(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const l=t.map(u=>Jm(e,u,n));i=Promise.all(l)}else if(typeof t=="string")i=Jm(e,t,n);else{const l=typeof t=="function"?Uc(e,t,n.custom):t;i=Promise.all(Bb(e,l,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function Ub(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const oB=Dy.length;function Fb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Fb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<oB;n++){const i=Dy[n],l=e.props[i];(bh(l)||l===!1)&&(t[i]=l)}return t}const lB=[...Ny].reverse(),cB=Ny.length;function uB(e){return t=>Promise.all(t.map(({animation:n,options:i})=>aB(e,n,i)))}function hB(e){let t=uB(e),n=_T(),i=!0;const l=E=>(y,_)=>{const b=Uc(e,_,E==="exit"?e.presenceContext?.custom:void 0);if(b){const{transition:R,transitionEnd:k,...z}=b;y={...y,...z,...k}}return y};function u(E){t=E(e)}function g(E){const{props:y}=e,_=Fb(e.parent)||{},b=[],R=new Set;let k={},z=1/0;for(let j=0;j<cB;j++){const nt=lB[j],Z=n[nt],W=y[nt]!==void 0?y[nt]:_[nt],yt=bh(W),wt=nt===E?Z.isActive:null;wt===!1&&(z=j);let Rt=W===_[nt]&&W!==y[nt]&&yt;if(Rt&&i&&e.manuallyAnimateOnMount&&(Rt=!1),Z.protectedKeys={...k},!Z.isActive&&wt===null||!W&&!Z.prevProp||O0(W)||typeof W=="boolean")continue;const H=fB(Z.prevProp,W);let U=H||nt===E&&Z.isActive&&!Rt&&yt||j>z&&yt,V=!1;const et=Array.isArray(W)?W:[W];let K=et.reduce(l(nt),{});wt===!1&&(K={});const{prevResolvedValues:J={}}=Z,X={...J,...K},Jt=xt=>{U=!0,R.has(xt)&&(V=!0,R.delete(xt)),Z.needsAnimating[xt]=!0;const Ft=e.getValue(xt);Ft&&(Ft.liveStyle=!1)};for(const xt in X){const Ft=K[xt],$t=J[xt];if(k.hasOwnProperty(xt))continue;let $=!1;Qm(Ft)&&Qm($t)?$=!Ub(Ft,$t):$=Ft!==$t,$?Ft!=null?Jt(xt):R.add(xt):Ft!==void 0&&R.has(xt)?Jt(xt):Z.protectedKeys[xt]=!0}Z.prevProp=W,Z.prevResolvedValues=K,Z.isActive&&(k={...k,...K}),i&&e.blockInitialAnimation&&(U=!1);const ht=Rt&&H;U&&(!ht||V)&&b.push(...et.map(xt=>{const Ft={type:nt};if(typeof xt=="string"&&i&&!ht&&e.manuallyAnimateOnMount&&e.parent){const{parent:$t}=e,$=Uc($t,xt);if($t.enteringChildren&&$){const{delayChildren:St}=$.transition||{};Ft.delay=Vb($t.enteringChildren,e,St)}}return{animation:xt,options:Ft}}))}if(R.size){const j={};if(typeof y.initial!="boolean"){const nt=Uc(e,Array.isArray(y.initial)?y.initial[0]:y.initial);nt&&nt.transition&&(j.transition=nt.transition)}R.forEach(nt=>{const Z=e.getBaseTarget(nt),W=e.getValue(nt);W&&(W.liveStyle=!0),j[nt]=Z??null}),b.push({animation:j})}let q=!!b.length;return i&&(y.initial===!1||y.initial===y.animate)&&!e.manuallyAnimateOnMount&&(q=!1),i=!1,q?t(b):Promise.resolve()}function w(E,y){if(n[E].isActive===y)return Promise.resolve();e.variantChildren?.forEach(b=>b.animationState?.setActive(E,y)),n[E].isActive=y;const _=g(E);for(const b in n)n[b].protectedKeys={};return _}return{animateChanges:g,setActive:w,setAnimateFunction:u,getState:()=>n,reset:()=>{n=_T(),i=!0}}}function fB(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ub(t,e):!1}function El(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _T(){return{animate:El(!0),whileInView:El(),whileHover:El(),whileTap:El(),whileDrag:El(),whileFocus:El(),exit:El()}}class Zo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class dB extends Zo{constructor(t){super(t),t.animationState||(t.animationState=hB(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();O0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let gB=0;class mB extends Zo{constructor(){super(...arguments),this.id=gB++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const l=this.node.animationState.setActive("exit",!t);n&&!t&&l.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const pB={animation:{Feature:dB},exit:{Feature:mB}};function Rh(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function qh(e){return{point:{x:e.pageX,y:e.pageY}}}const yB=e=>t=>Ry(t)&&e(t,qh(t));function uh(e,t,n,i){return Rh(e,t,yB(n),i)}const zb=1e-4,EB=1-zb,AB=1+zb,jb=.01,xB=0-jb,wB=0+jb;function sr(e){return e.max-e.min}function TB(e,t,n){return Math.abs(e-t)<=n}function CT(e,t,n,i=.5){e.origin=i,e.originPoint=Pn(t.min,t.max,e.origin),e.scale=sr(n)/sr(t),e.translate=Pn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=EB&&e.scale<=AB||isNaN(e.scale))&&(e.scale=1),(e.translate>=xB&&e.translate<=wB||isNaN(e.translate))&&(e.translate=0)}function hh(e,t,n,i){CT(e.x,t.x,n.x,i?i.originX:void 0),CT(e.y,t.y,n.y,i?i.originY:void 0)}function vT(e,t,n){e.min=n.min+t.min,e.max=e.min+sr(t)}function _B(e,t,n){vT(e.x,t.x,n.x),vT(e.y,t.y,n.y)}function ST(e,t,n){e.min=t.min-n.min,e.max=e.min+sr(t)}function fh(e,t,n){ST(e.x,t.x,n.x),ST(e.y,t.y,n.y)}function rs(e){return[e("x"),e("y")]}const Hb=({current:e})=>e?e.ownerDocument.defaultView:null,bT=(e,t)=>Math.abs(e-t);function CB(e,t){const n=bT(e.x,t.x),i=bT(e.y,t.y);return Math.sqrt(n**2+i**2)}class Gb{constructor(t,n,{transformPagePoint:i,contextWindow:l=window,dragSnapToOrigin:u=!1,distanceThreshold:g=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=$g(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,z=CB(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!z)return;const{point:q}=R,{timestamp:j}=Oi;this.history.push({...q,timestamp:j});const{onStart:nt,onMove:Z}=this.handlers;k||(nt&&nt(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),Z&&Z(this.lastMoveEvent,R)},this.handlePointerMove=(R,k)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=Jg(k,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(R,k)=>{this.end();const{onEnd:z,onSessionEnd:q,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const nt=$g(R.type==="pointercancel"?this.lastMoveEventInfo:Jg(k,this.transformPagePoint),this.history);this.startEvent&&z&&z(R,nt),q&&q(R,nt)},!Ry(t))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=g,this.contextWindow=l||window;const w=qh(t),E=Jg(w,this.transformPagePoint),{point:y}=E,{timestamp:_}=Oi;this.history=[{...y,timestamp:_}];const{onSessionStart:b}=n;b&&b(t,$g(E,this.history)),this.removeListeners=jh(uh(this.contextWindow,"pointermove",this.handlePointerMove),uh(this.contextWindow,"pointerup",this.handlePointerUp),uh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Yo(this.updatePoint)}}function Jg(e,t){return t?{point:t(e.point)}:e}function IT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $g({point:e},t){return{point:e,delta:IT(e,qb(t)),offset:IT(e,vB(t)),velocity:SB(t,.1)}}function vB(e){return e[0]}function qb(e){return e[e.length-1]}function SB(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const l=qb(e);for(;n>=0&&(i=e[n],!(l.timestamp-i.timestamp>ta(t)));)n--;if(!i)return{x:0,y:0};const u=ea(l.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const g={x:(l.x-i.x)/u,y:(l.y-i.y)/u};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function bB(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Pn(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Pn(n,e,i.max):Math.min(e,n)),e}function RT(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function IB(e,{top:t,left:n,bottom:i,right:l}){return{x:RT(e.x,n,l),y:RT(e.y,t,i)}}function NT(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function RB(e,t){return{x:NT(e.x,t.x),y:NT(e.y,t.y)}}function NB(e,t){let n=.5;const i=sr(e),l=sr(t);return l>i?n=Ch(t.min,t.max-i,e.min):i>l&&(n=Ch(e.min,e.max-l,t.min)),Ya(0,1,n)}function DB(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const $m=.35;function MB(e=$m){return e===!1?e=0:e===!0&&(e=$m),{x:DT(e,"left","right"),y:DT(e,"top","bottom")}}function DT(e,t,n){return{min:MT(e,t),max:MT(e,n)}}function MT(e,t){return typeof e=="number"?e:e[t]||0}const OB=new WeakMap;class PB{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$n(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const u=b=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qh(b).point)},g=(b,R)=>{const{drag:k,dragPropagation:z,onDragStart:q}=this.getProps();if(k&&!z&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q7(k),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rs(nt=>{let Z=this.getAxisMotionValue(nt).get()||0;if(na.test(Z)){const{projection:W}=this.visualElement;if(W&&W.layout){const yt=W.layout.layoutBox[nt];yt&&(Z=sr(yt)*(parseFloat(Z)/100))}}this.originPoint[nt]=Z}),q&&bn.postRender(()=>q(b,R)),Zm(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},w=(b,R)=>{this.latestPointerEvent=b,this.latestPanInfo=R;const{dragPropagation:k,dragDirectionLock:z,onDirectionLock:q,onDrag:j}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:nt}=R;if(z&&this.currentDirection===null){this.currentDirection=LB(nt),this.currentDirection!==null&&q&&q(this.currentDirection);return}this.updateAxis("x",R.point,nt),this.updateAxis("y",R.point,nt),this.visualElement.render(),j&&j(b,R)},E=(b,R)=>{this.latestPointerEvent=b,this.latestPanInfo=R,this.stop(b,R),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>rs(b=>this.getAnimationState(b)==="paused"&&this.getAxisMotionValue(b).animation?.play()),{dragSnapToOrigin:_}=this.getProps();this.panSession=new Gb(t,{onSessionStart:u,onStart:g,onMove:w,onSessionEnd:E,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,distanceThreshold:i,contextWindow:Hb(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,l=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!l||!i)return;const{velocity:g}=l;this.startAnimation(g);const{onDragEnd:w}=this.getProps();w&&bn.postRender(()=>w(i,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:l}=this.getProps();if(!i||!sd(t,l,this.currentDirection))return;const u=this.getAxisMotionValue(t);let g=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(g=bB(g,this.constraints[t],this.elastic[t])),u.set(g)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&Nc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=IB(i.layoutBox,t):this.constraints=!1,this.elastic=MB(n),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rs(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=DB(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Nc(t))return!1;const i=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const u=kk(i,l.root,this.visualElement.getTransformPagePoint());let g=RB(l.layout.layoutBox,u);if(n){const w=n(Ok(g));this.hasMutatedConstraints=!!w,w&&(g=Ib(w))}return g}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:l,dragTransition:u,dragSnapToOrigin:g,onDragTransitionEnd:w}=this.getProps(),E=this.constraints||{},y=rs(_=>{if(!sd(_,n,this.currentDirection))return;let b=E&&E[_]||{};g&&(b={min:0,max:0});const R=l?200:1e6,k=l?40:1e7,z={type:"inertia",velocity:i?t[_]:0,bounceStiffness:R,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...u,...b};return this.startAxisValueAnimation(_,z)});return Promise.all(y).then(w)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return Zm(this.visualElement,t),i.start(Vy(t,i,0,n,this.visualElement,!1))}stopAnimation(){rs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){rs(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),l=i[n];return l||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){rs(n=>{const{drag:i}=this.getProps();if(!sd(n,i,this.currentDirection))return;const{projection:l}=this.visualElement,u=this.getAxisMotionValue(n);if(l&&l.layout){const{min:g,max:w}=l.layout.layoutBox[n];u.set(t[n]-Pn(g,w,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Nc(n)||!i||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};rs(g=>{const w=this.getAxisMotionValue(g);if(w&&this.constraints!==!1){const E=w.get();l[g]=NB({min:E,max:E},this.constraints[g])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),rs(g=>{if(!sd(g,t,null))return;const w=this.getAxisMotionValue(g),{min:E,max:y}=this.constraints[g];w.set(Pn(E,y,l[g]))})}addListeners(){if(!this.visualElement.current)return;OB.set(this.visualElement,this);const t=this.visualElement.current,n=uh(t,"pointerdown",E=>{const{drag:y,dragListener:_=!0}=this.getProps();y&&_&&this.start(E)}),i=()=>{const{dragConstraints:E}=this.getProps();Nc(E)&&E.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,u=l.addEventListener("measure",i);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),bn.read(i);const g=Rh(window,"resize",()=>this.scalePositionWithinConstraints()),w=l.addEventListener("didUpdate",(({delta:E,hasLayoutChanged:y})=>{this.isDragging&&y&&(rs(_=>{const b=this.getAxisMotionValue(_);b&&(this.originPoint[_]+=E[_].translate,b.set(b.get()+E[_].translate))}),this.visualElement.render())}));return()=>{g(),n(),u(),w&&w()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:l=!1,dragConstraints:u=!1,dragElastic:g=$m,dragMomentum:w=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:l,dragConstraints:u,dragElastic:g,dragMomentum:w}}}function sd(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function LB(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class kB extends Zo{constructor(t){super(t),this.removeGroupControls=os,this.removeListeners=os,this.controls=new PB(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||os}unmount(){this.removeGroupControls(),this.removeListeners()}}const OT=e=>(t,n)=>{e&&bn.postRender(()=>e(t,n))};class BB extends Zo{constructor(){super(...arguments),this.removePointerDownListener=os}onPointerDown(t){this.session=new Gb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hb(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:l}=this.node.getProps();return{onSessionStart:OT(t),onStart:OT(n),onMove:i,onEnd:(u,g)=>{delete this.session,l&&bn.postRender(()=>l(u,g))}}}mount(){this.removePointerDownListener=uh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Td={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(le.test(e))e=parseFloat(e);else return e;const n=PT(e,t.target.x),i=PT(e,t.target.y);return`${n}% ${i}%`}},VB={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,l=Xo.parse(e);if(l.length>5)return i;const u=Xo.createTransformer(e),g=typeof l[0]!="number"?1:0,w=n.x.scale*t.x,E=n.y.scale*t.y;l[0+g]/=w,l[1+g]/=E;const y=Pn(w,E,.5);return typeof l[2+g]=="number"&&(l[2+g]/=y),typeof l[3+g]=="number"&&(l[3+g]/=y),u(l)}};let tm=!1;class UB extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:l}=this.props,{projection:u}=t;ok(FB),u&&(n.group&&n.group.add(u),i&&i.register&&l&&i.register(u),tm&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Td.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:l,isPresent:u}=this.props,{projection:g}=i;return g&&(g.isPresent=u,tm=!0,l||t.layoutDependency!==n||n===void 0||t.isPresent!==u?g.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?g.promote():g.relegate()||bn.postRender(()=>{const w=g.getStack();(!w||!w.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Iy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:l}=t;tm=!0,l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),i&&i.deregister&&i.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Yb(e){const[t,n]=tk(),i=st.useContext(CS);return Tt.jsx(UB,{...e,layoutGroup:i,switchLayoutGroup:st.useContext(Sb),isPresent:t,safeToRemove:n})}const FB={borderRadius:{...Xu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xu,borderTopRightRadius:Xu,borderBottomLeftRadius:Xu,borderBottomRightRadius:Xu,boxShadow:VB};function zB(e,t,n){const i=Qi(e)?e:Xc(e);return i.start(Vy("",i,t,n)),i.animation}const jB=(e,t)=>e.depth-t.depth;class HB{constructor(){this.children=[],this.isDirty=!1}add(t){cy(this.children,t),this.isDirty=!0}remove(t){uy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jB),this.isDirty=!1,this.children.forEach(t)}}function GB(e,t){const n=pr.now(),i=({timestamp:l})=>{const u=l-n;u>=t&&(Yo(i),e(u-t))};return bn.setup(i,!0),()=>Yo(i)}const Xb=["TopLeft","TopRight","BottomLeft","BottomRight"],qB=Xb.length,LT=e=>typeof e=="string"?parseFloat(e):e,kT=e=>typeof e=="number"||le.test(e);function YB(e,t,n,i,l,u){l?(e.opacity=Pn(0,n.opacity??1,XB(i)),e.opacityExit=Pn(t.opacity??1,0,WB(i))):u&&(e.opacity=Pn(t.opacity??1,n.opacity??1,i));for(let g=0;g<qB;g++){const w=`border${Xb[g]}Radius`;let E=BT(t,w),y=BT(n,w);if(E===void 0&&y===void 0)continue;E||(E=0),y||(y=0),E===0||y===0||kT(E)===kT(y)?(e[w]=Math.max(Pn(LT(E),LT(y),i),0),(na.test(y)||na.test(E))&&(e[w]+="%")):e[w]=y}(t.rotate||n.rotate)&&(e.rotate=Pn(t.rotate||0,n.rotate||0,i))}function BT(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const XB=Wb(0,.5,LS),WB=Wb(.5,.95,os);function Wb(e,t,n){return i=>i<e?0:i>t?1:n(Ch(e,t,i))}function VT(e,t){e.min=t.min,e.max=t.max}function is(e,t){VT(e.x,t.x),VT(e.y,t.y)}function UT(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function FT(e,t,n,i,l){return e-=t,e=e0(e,1/n,i),l!==void 0&&(e=e0(e,1/l,i)),e}function KB(e,t=0,n=1,i=.5,l,u=e,g=e){if(na.test(t)&&(t=parseFloat(t),t=Pn(g.min,g.max,t/100)-g.min),typeof t!="number")return;let w=Pn(u.min,u.max,i);e===u&&(w-=t),e.min=FT(e.min,t,n,w,l),e.max=FT(e.max,t,n,w,l)}function zT(e,t,[n,i,l],u,g){KB(e,t[n],t[i],t[l],t.scale,u,g)}const QB=["x","scaleX","originX"],ZB=["y","scaleY","originY"];function jT(e,t,n,i){zT(e.x,t,QB,n?n.x:void 0,i?i.x:void 0),zT(e.y,t,ZB,n?n.y:void 0,i?i.y:void 0)}function HT(e){return e.translate===0&&e.scale===1}function Kb(e){return HT(e.x)&&HT(e.y)}function GT(e,t){return e.min===t.min&&e.max===t.max}function JB(e,t){return GT(e.x,t.x)&&GT(e.y,t.y)}function qT(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Qb(e,t){return qT(e.x,t.x)&&qT(e.y,t.y)}function YT(e){return sr(e.x)/sr(e.y)}function XT(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class $B{constructor(){this.members=[]}add(t){cy(this.members,t),t.scheduleRender()}remove(t){if(uy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(l=>t===l);if(n===0)return!1;let i;for(let l=n;l>=0;l--){const u=this.members[l];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tV(e,t,n){let i="";const l=e.x.translate/t.x,u=e.y.translate/t.y,g=n?.z||0;if((l||u||g)&&(i=`translate3d(${l}px, ${u}px, ${g}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:y,rotate:_,rotateX:b,rotateY:R,skewX:k,skewY:z}=n;y&&(i=`perspective(${y}px) ${i}`),_&&(i+=`rotate(${_}deg) `),b&&(i+=`rotateX(${b}deg) `),R&&(i+=`rotateY(${R}deg) `),k&&(i+=`skewX(${k}deg) `),z&&(i+=`skewY(${z}deg) `)}const w=e.x.scale*t.x,E=e.y.scale*t.y;return(w!==1||E!==1)&&(i+=`scale(${w}, ${E})`),i||"none"}const em=["","X","Y","Z"],eV=1e3;let nV=0;function nm(e,t,n,i){const{latestValues:l}=t;l[e]&&(n[e]=l[e],t.setStaticValue(e,0),i&&(i[e]=0))}function Zb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=kb(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bn,!(l||u))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&Zb(i)}function Jb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:l}){return class{constructor(g={},w=t?.()){this.id=nV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sV),this.nodes.forEach(cV),this.nodes.forEach(uV),this.nodes.forEach(aV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=w?w.root||w:this,this.path=w?[...w.path,w]:[],this.parent=w,this.depth=w?w.depth+1:0;for(let E=0;E<this.path.length;E++)this.path[E].shouldResetTransform=!0;this.root===this&&(this.nodes=new HB)}addEventListener(g,w){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new dy),this.eventHandlers.get(g).add(w)}notifyListeners(g,...w){const E=this.eventHandlers.get(g);E&&E.notify(...w)}hasListeners(g){return this.eventHandlers.has(g)}mount(g){if(this.instance)return;this.isSVG=db(g)&&!Z7(g),this.instance=g;const{layoutId:w,layout:E,visualElement:y}=this.options;if(y&&!y.current&&y.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(E||w)&&(this.isLayoutDirty=!0),e){let _,b=0;const R=()=>this.root.updateBlockedByResize=!1;bn.read(()=>{b=window.innerWidth}),e(g,()=>{const k=window.innerWidth;k!==b&&(b=k,this.root.updateBlockedByResize=!0,_&&_(),_=GB(R,250),Td.hasAnimatedSinceResize&&(Td.hasAnimatedSinceResize=!1,this.nodes.forEach(QT)))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&y&&(w||E)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:b,hasRelativeLayoutChanged:R,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const z=this.options.transition||y.getDefaultTransition()||mV,{onLayoutAnimationStart:q,onLayoutAnimationComplete:j}=y.getProps(),nt=!this.targetLayout||!Qb(this.targetLayout,k),Z=!b&&R;if(this.options.layoutRoot||this.resumeFrom||Z||b&&(nt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const W={...Sy(z,"layout"),onPlay:q,onComplete:j};(y.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W),this.setAnimationOrigin(_,Z)}else b||QT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hV),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Zb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const b=this.path[_];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:w,layout:E}=this.options;if(w===void 0&&!E)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(KT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(lV),this.nodes.forEach(iV),this.nodes.forEach(rV)):this.nodes.forEach(KT),this.clearAllSnapshots();const w=pr.now();Oi.delta=Ya(0,1e3/60,w-Oi.timestamp),Oi.timestamp=w,Oi.isProcessing=!0,Gg.update.process(Oi),Gg.preRender.process(Oi),Gg.render.process(Oi),Oi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Iy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(oV),this.sharedNodes.forEach(fV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!sr(this.snapshot.measuredBox.x)&&!sr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let E=0;E<this.path.length;E++)this.path[E].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:w}=this.options;w&&w.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let w=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(w=!1),w&&this.instance){const E=i(this.instance);this.scroll={animationId:this.root.animationId,phase:g,isRoot:E,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:E}}}resetTransform(){if(!l)return;const g=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,w=this.projectionDelta&&!Kb(this.projectionDelta),E=this.getTransformTemplate(),y=E?E(this.latestValues,""):void 0,_=y!==this.prevTransformTemplateValue;g&&this.instance&&(w||xl(this.latestValues)||_)&&(l(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const w=this.measurePageBox();let E=this.removeElementScroll(w);return g&&(E=this.removeTransform(E)),pV(E),{animationId:this.root.animationId,measuredBox:w,layoutBox:E,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:g}=this.options;if(!g)return $n();const w=g.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(yV))){const{scroll:y}=this.root;y&&(Dc(w.x,y.offset.x),Dc(w.y,y.offset.y))}return w}removeElementScroll(g){const w=$n();if(is(w,g),this.scroll?.wasRoot)return w;for(let E=0;E<this.path.length;E++){const y=this.path[E],{scroll:_,options:b}=y;y!==this.root&&_&&b.layoutScroll&&(_.wasRoot&&is(w,g),Dc(w.x,_.offset.x),Dc(w.y,_.offset.y))}return w}applyTransform(g,w=!1){const E=$n();is(E,g);for(let y=0;y<this.path.length;y++){const _=this.path[y];!w&&_.options.layoutScroll&&_.scroll&&_!==_.root&&Mc(E,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),xl(_.latestValues)&&Mc(E,_.latestValues)}return xl(this.latestValues)&&Mc(E,this.latestValues),E}removeTransform(g){const w=$n();is(w,g);for(let E=0;E<this.path.length;E++){const y=this.path[E];if(!y.instance||!xl(y.latestValues))continue;Xm(y.latestValues)&&y.updateSnapshot();const _=$n(),b=y.measurePageBox();is(_,b),jT(w,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,_)}return xl(this.latestValues)&&jT(w,this.latestValues),w}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Oi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const E=!!this.resumingFrom||this!==w;if(!(g||E&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:b}=this.options;if(!(!this.layout||!(_||b))){if(this.resolvedRelativeTargetAt=Oi.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),fh(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),is(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$n(),this.targetWithTransforms=$n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_B(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):is(this.target,this.layout.layoutBox),Nb(this.target,this.targetDelta)):is(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),fh(this.relativeTargetOrigin,this.target,R.target),is(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Xm(this.parent.latestValues)||Rb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const g=this.getLead(),w=!!this.resumingFrom||this!==g;let E=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(E=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(E=!1),this.resolvedRelativeTargetAt===Oi.timestamp&&(E=!1),E)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;is(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,R=this.treeScale.y;Lk(this.layoutCorrected,this.treeScale,this.path,w),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=$n());const{target:k}=g;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(UT(this.prevProjectionDelta.x,this.projectionDelta.x),UT(this.prevProjectionDelta.y,this.projectionDelta.y)),hh(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==R||!XT(this.projectionDelta.x,this.prevProjectionDelta.x)||!XT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){if(this.options.visualElement?.scheduleRender(),g){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oc(),this.projectionDelta=Oc(),this.projectionDeltaWithTransform=Oc()}setAnimationOrigin(g,w=!1){const E=this.snapshot,y=E?E.latestValues:{},_={...this.latestValues},b=Oc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!w;const R=$n(),k=E?E.source:void 0,z=this.layout?this.layout.source:void 0,q=k!==z,j=this.getStack(),nt=!j||j.members.length<=1,Z=!!(q&&!nt&&this.options.crossfade===!0&&!this.path.some(gV));this.animationProgress=0;let W;this.mixTargetDelta=yt=>{const wt=yt/1e3;ZT(b.x,g.x,wt),ZT(b.y,g.y,wt),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fh(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dV(this.relativeTarget,this.relativeTargetOrigin,R,wt),W&&JB(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=$n()),is(W,this.relativeTarget)),q&&(this.animationValues=_,YB(_,y,this.latestValues,wt,Z,nt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=wt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Yo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{Td.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Xc(0)),this.currentAnimation=zB(this.motionValue,[0,1e3],{...g,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),g.onUpdate&&g.onUpdate(w)},onStop:()=>{},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:w,target:E,layout:y,latestValues:_}=g;if(!(!w||!E||!y)){if(this!==g&&this.layout&&y&&$b(this.options.animationType,this.layout.layoutBox,y.layoutBox)){E=this.target||$n();const b=sr(this.layout.layoutBox.x);E.x.min=g.target.x.min,E.x.max=E.x.min+b;const R=sr(this.layout.layoutBox.y);E.y.min=g.target.y.min,E.y.max=E.y.min+R}is(w,E),Mc(w,_),hh(this.projectionDeltaWithTransform,this.layoutCorrected,w,_)}}registerSharedNode(g,w){this.sharedNodes.has(g)||this.sharedNodes.set(g,new $B),this.sharedNodes.get(g).add(w);const y=w.options.initialPromotionConfig;w.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(w):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){const{layoutId:g}=this.options;return g?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:g}=this.options;return g?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:w,preserveFollowOpacity:E}={}){const y=this.getStack();y&&y.promote(this,E),g&&(this.projectionDelta=void 0,this.needsReset=!0),w&&this.setOptions({transition:w})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetSkewAndRotation(){const{visualElement:g}=this.options;if(!g)return;let w=!1;const{latestValues:E}=g;if((E.z||E.rotate||E.rotateX||E.rotateY||E.rotateZ||E.skewX||E.skewY)&&(w=!0),!w)return;const y={};E.z&&nm("z",g,y,this.animationValues);for(let _=0;_<em.length;_++)nm(`rotate${em[_]}`,g,y,this.animationValues),nm(`skew${em[_]}`,g,y,this.animationValues);g.render();for(const _ in y)g.setStaticValue(_,y[_]),this.animationValues&&(this.animationValues[_]=y[_]);g.scheduleRender()}applyProjectionStyles(g,w){if(!this.instance||this.isSVG)return;if(!this.isVisible){g.visibility="hidden";return}const E=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,g.visibility="",g.opacity="",g.pointerEvents=wd(w?.pointerEvents)||"",g.transform=E?E(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=wd(w?.pointerEvents)||""),this.hasProjected&&!xl(this.latestValues)&&(g.transform=E?E({},""):"none",this.hasProjected=!1);return}g.visibility="";const _=y.animationValues||y.latestValues;this.applyTransformsToTarget();let b=tV(this.projectionDeltaWithTransform,this.treeScale,_);E&&(b=E(_,b)),g.transform=b;const{x:R,y:k}=this.projectionDelta;g.transformOrigin=`${R.origin*100}% ${k.origin*100}% 0`,y.animationValues?g.opacity=y===this?_.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:g.opacity=y===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const z in Ih){if(_[z]===void 0)continue;const{correct:q,applyTo:j,isCSSVariable:nt}=Ih[z],Z=b==="none"?_[z]:q(_[z],y);if(j){const W=j.length;for(let yt=0;yt<W;yt++)g[j[yt]]=Z}else nt?this.options.visualElement.renderState.vars[z]=Z:g[z]=Z}this.options.layoutId&&(g.pointerEvents=y===this?wd(w?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>g.currentAnimation?.stop()),this.root.nodes.forEach(WT),this.root.sharedNodes.clear()}}}function iV(e){e.updateLayout()}function rV(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:l}=e.options,u=t.source!==e.layout.source;l==="size"?rs(_=>{const b=u?t.measuredBox[_]:t.layoutBox[_],R=sr(b);b.min=n[_].min,b.max=b.min+R}):$b(l,t.layoutBox,n)&&rs(_=>{const b=u?t.measuredBox[_]:t.layoutBox[_],R=sr(n[_]);b.max=b.min+R,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[_].max=e.relativeTarget[_].min+R)});const g=Oc();hh(g,n,t.layoutBox);const w=Oc();u?hh(w,e.applyTransform(i,!0),t.measuredBox):hh(w,n,t.layoutBox);const E=!Kb(g);let y=!1;if(!e.resumeFrom){const _=e.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:b,layout:R}=_;if(b&&R){const k=$n();fh(k,t.layoutBox,b.layoutBox);const z=$n();fh(z,n,R.layoutBox),Qb(k,z)||(y=!0),_.options.layoutRoot&&(e.relativeTarget=z,e.relativeTargetOrigin=k,e.relativeParent=_)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:w,layoutDelta:g,hasLayoutChanged:E,hasRelativeLayoutChanged:y})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function sV(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function aV(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function oV(e){e.clearSnapshot()}function WT(e){e.clearMeasurements()}function KT(e){e.isLayoutDirty=!1}function lV(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function QT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function cV(e){e.resolveTargetDelta()}function uV(e){e.calcProjection()}function hV(e){e.resetSkewAndRotation()}function fV(e){e.removeLeadSnapshot()}function ZT(e,t,n){e.translate=Pn(t.translate,0,n),e.scale=Pn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function JT(e,t,n,i){e.min=Pn(t.min,n.min,i),e.max=Pn(t.max,n.max,i)}function dV(e,t,n,i){JT(e.x,t.x,n.x,i),JT(e.y,t.y,n.y,i)}function gV(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const mV={duration:.45,ease:[.4,0,.1,1]},$T=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),t_=$T("applewebkit/")&&!$T("chrome/")?Math.round:os;function e_(e){e.min=t_(e.min),e.max=t_(e.max)}function pV(e){e_(e.x),e_(e.y)}function $b(e,t,n){return e==="position"||e==="preserve-aspect"&&!TB(YT(t),YT(n),.2)}function yV(e){return e!==e.root&&e.scroll?.wasRoot}const EV=Jb({attachResizeListener:(e,t)=>Rh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),im={current:void 0},tI=Jb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!im.current){const e=new EV({});e.mount(window),e.setOptions({layoutScroll:!0}),im.current=e}return im.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),AV={pan:{Feature:BB},drag:{Feature:kB,ProjectionNode:tI,MeasureLayout:Yb}};function n_(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,u=i[l];u&&bn.postRender(()=>u(t,qh(t)))}class xV extends Zo{mount(){const{current:t}=this.node;t&&(this.unmount=Y7(t,(n,i)=>(n_(this.node,i,"Start"),l=>n_(this.node,l,"End"))))}unmount(){}}class wV extends Zo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jh(Rh(this.node.current,"focus",()=>this.onFocus()),Rh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function i_(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),u=i[l];u&&bn.postRender(()=>u(t,qh(t)))}class TV extends Zo{mount(){const{current:t}=this.node;t&&(this.unmount=Q7(t,(n,i)=>(i_(this.node,i,"Start"),(l,{success:u})=>i_(this.node,l,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tp=new WeakMap,rm=new WeakMap,_V=e=>{const t=tp.get(e.target);t&&t(e)},CV=e=>{e.forEach(_V)};function vV({root:e,...t}){const n=e||document;rm.has(n)||rm.set(n,{});const i=rm.get(n),l=JSON.stringify(t);return i[l]||(i[l]=new IntersectionObserver(CV,{root:e,...t})),i[l]}function SV(e,t,n){const i=vV(t);return tp.set(e,n),i.observe(e),()=>{tp.delete(e),i.unobserve(e)}}const bV={some:0,all:1};class IV extends Zo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:l="some",once:u}=t,g={root:n?n.current:void 0,rootMargin:i,threshold:typeof l=="number"?l:bV[l]},w=E=>{const{isIntersecting:y}=E;if(this.isInView===y||(this.isInView=y,u&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:_,onViewportLeave:b}=this.node.getProps(),R=y?_:b;R&&R(E)};return SV(this.node.current,g,w)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(RV(t,n))&&this.startObserver()}unmount(){}}function RV({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const NV={inView:{Feature:IV},tap:{Feature:TV},focus:{Feature:wV},hover:{Feature:xV}},DV={layout:{ProjectionNode:tI,MeasureLayout:Yb}},MV={...pB,...NV,...AV,...DV},OV=Mk(MV,qk);function PV({lang:e}){const t=[{id:1,text_zh:"咖啡券",text_en:"Coffee Coupon",points:30},{id:2,text_zh:"小點心",text_en:"Snack",points:50},{id:3,text_zh:"電影票",text_en:"Movie Ticket",points:200},{id:4,text_zh:"購物禮券",text_en:"Shopping Voucher",points:100},{id:5,text_zh:"電子產品折扣",text_en:"Electronics Discount",points:300}],{user:n,profile:i,setProfile:l}=mS(),[u,g]=st.useState([]),[w,E]=st.useState("progress"),[y,_]=st.useState([]),b=[50,100,250,500],R=async z=>{if(!n||y.includes(z))return;const q=20,j=ko(Bo,"profiles",n.uid);await Yd(j,{scores:(i.scores||0)+q,claimedMilestones:[...i.claimedMilestones||[],z]}),l({...i,scores:(i.scores||0)+q,claimedMilestones:[...i.claimedMilestones||[],z]}),_([...y,z]),alert(`🎉 你獲得額外 ${q} 分！`)};st.useEffect(()=>{if(!n)return;(async()=>{const q=ko(Bo,"profiles",n.uid),j=await qd(q);if(j.exists()){const nt=j.data();g(nt.redeemedIds||[])}})()},[n]);const k=async z=>{if(!(!i||!n)&&i.scores>=z.points&&!u.includes(z.id)){const q=i.scores-z.points,j=[...u,z.id],nt=ko(Bo,"profiles",n.uid);await Yd(nt,{scores:q,redeemedIds:j}),l({...i,scores:q}),g(j),alert(e==="zh"?"🎉 兌換成功！":"🎉 Redeemed!")}};return Tt.jsxs("div",{className:"page-container",style:{maxWidth:500,margin:"0 auto",textAlign:"center"},children:[Tt.jsx("h2",{children:e==="zh"?"獎勵頁面":"Rewards Page"}),Tt.jsxs("div",{style:{marginBottom:20},children:[Tt.jsx("button",{onClick:()=>E("progress"),style:{marginRight:10,backgroundColor:w==="progress"?"#4caf50":"#eee",color:w==="progress"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:e==="zh"?"分數進度":"Progress"}),Tt.jsx("button",{onClick:()=>E("list"),style:{backgroundColor:w==="list"?"#4caf50":"#eee",color:w==="list"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:e==="zh"?"可兌換獎勵":"Reward List"})]}),w==="progress"&&Tt.jsxs("div",{children:[Tt.jsxs("p",{children:[e==="zh"?"你的分數: ":"Your Score: "," ",i?.scores||0]}),Tt.jsx("div",{style:{alignItems:"center",height:50,width:280,backgroundColor:"#eee",borderRadius:15,overflow:"hidden",marginBottom:10},children:Tt.jsxs("div",{style:{position:"relative",height:50,backgroundColor:"#eee",borderRadius:15,marginBottom:20},children:[Tt.jsx("div",{style:{width:`${Math.min(i?.scores||0/b[b.length-1],1)*100}%`,height:"100%",background:"linear-gradient(90deg, #4caf50, #00e676)",borderRadius:15,transition:"width 0.5s ease-out"}}),b.map((z,q)=>{const j=i?.scores>=z,nt=i?.claimedMilestones?.includes(z);return Tt.jsx(OV.span,{style:{position:"absolute",left:`${Math.min(z/b[b.length-1],1)*100}%`,top:0,transform:"translateX(-80%)",fontSize:25,cursor:j?"pointer":"default"},whileHover:j&&!nt?{scale:1.3,rotate:-5}:{},whileTap:j&&!nt?{scale:.9}:{},animate:nt?{scale:[1.2,.8,1],rotate:[0,10,-10,0]}:{},transition:{duration:.5},onClick:()=>j&&!nt&&R(z),children:nt?"📦":"🎁"},q)})]})})]}),w==="list"&&Tt.jsx("ul",{style:{listStyle:"none",padding:0},children:t.map(z=>{const q=u.includes(z.id);return Tt.jsxs("li",{style:{marginBottom:10,padding:10,border:"1px solid #ccc",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:q?"#f6fff6":"#fff"},children:[Tt.jsxs("span",{children:[e==="zh"?z.text_zh:z.text_en," - ",z.points," ",e==="zh"?"分":"pts"]}),Tt.jsx("button",{onClick:()=>k(z),disabled:q||(i?.scores||0)<z.points,style:{padding:"5px 10px",border:"none",borderRadius:6,backgroundColor:q?"#9e9e9e":"#4caf50",color:"#fff",cursor:q||(i?.scores||0)<z.points?"not-allowed":"pointer"},children:q?e==="zh"?"已兌換":"Redeemed":e==="zh"?"兌換":"Redeem"})]},z.id)})})]})}var LV=Object.defineProperty,n0=Object.getOwnPropertySymbols,eI=Object.prototype.hasOwnProperty,nI=Object.prototype.propertyIsEnumerable,r_=(e,t,n)=>t in e?LV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ep=(e,t)=>{for(var n in t||(t={}))eI.call(t,n)&&r_(e,n,t[n]);if(n0)for(var n of n0(t))nI.call(t,n)&&r_(e,n,t[n]);return e},np=(e,t)=>{var n={};for(var i in e)eI.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&n0)for(var i of n0(e))t.indexOf(i)<0&&nI.call(e,i)&&(n[i]=e[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var kl;(e=>{const t=class Re{constructor(E,y,_,b){if(this.version=E,this.errorCorrectionLevel=y,this.modules=[],this.isFunction=[],E<Re.MIN_VERSION||E>Re.MAX_VERSION)throw new RangeError("Version value out of range");if(b<-1||b>7)throw new RangeError("Mask value out of range");this.size=E*4+17;let R=[];for(let z=0;z<this.size;z++)R.push(!1);for(let z=0;z<this.size;z++)this.modules.push(R.slice()),this.isFunction.push(R.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(_);if(this.drawCodewords(k),b==-1){let z=1e9;for(let q=0;q<8;q++){this.applyMask(q),this.drawFormatBits(q);const j=this.getPenaltyScore();j<z&&(b=q,z=j),this.applyMask(q)}}l(0<=b&&b<=7),this.mask=b,this.applyMask(b),this.drawFormatBits(b),this.isFunction=[]}static encodeText(E,y){const _=e.QrSegment.makeSegments(E);return Re.encodeSegments(_,y)}static encodeBinary(E,y){const _=e.QrSegment.makeBytes(E);return Re.encodeSegments([_],y)}static encodeSegments(E,y,_=1,b=40,R=-1,k=!0){if(!(Re.MIN_VERSION<=_&&_<=b&&b<=Re.MAX_VERSION)||R<-1||R>7)throw new RangeError("Invalid value");let z,q;for(z=_;;z++){const W=Re.getNumDataCodewords(z,y)*8,yt=g.getTotalBits(E,z);if(yt<=W){q=yt;break}if(z>=b)throw new RangeError("Data too long")}for(const W of[Re.Ecc.MEDIUM,Re.Ecc.QUARTILE,Re.Ecc.HIGH])k&&q<=Re.getNumDataCodewords(z,W)*8&&(y=W);let j=[];for(const W of E){n(W.mode.modeBits,4,j),n(W.numChars,W.mode.numCharCountBits(z),j);for(const yt of W.getData())j.push(yt)}l(j.length==q);const nt=Re.getNumDataCodewords(z,y)*8;l(j.length<=nt),n(0,Math.min(4,nt-j.length),j),n(0,(8-j.length%8)%8,j),l(j.length%8==0);for(let W=236;j.length<nt;W^=253)n(W,8,j);let Z=[];for(;Z.length*8<j.length;)Z.push(0);return j.forEach((W,yt)=>Z[yt>>>3]|=W<<7-(yt&7)),new Re(z,y,Z,R)}getModule(E,y){return 0<=E&&E<this.size&&0<=y&&y<this.size&&this.modules[y][E]}getModules(){return this.modules}drawFunctionPatterns(){for(let _=0;_<this.size;_++)this.setFunctionModule(6,_,_%2==0),this.setFunctionModule(_,6,_%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const E=this.getAlignmentPatternPositions(),y=E.length;for(let _=0;_<y;_++)for(let b=0;b<y;b++)_==0&&b==0||_==0&&b==y-1||_==y-1&&b==0||this.drawAlignmentPattern(E[_],E[b]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(E){const y=this.errorCorrectionLevel.formatBits<<3|E;let _=y;for(let R=0;R<10;R++)_=_<<1^(_>>>9)*1335;const b=(y<<10|_)^21522;l(b>>>15==0);for(let R=0;R<=5;R++)this.setFunctionModule(8,R,i(b,R));this.setFunctionModule(8,7,i(b,6)),this.setFunctionModule(8,8,i(b,7)),this.setFunctionModule(7,8,i(b,8));for(let R=9;R<15;R++)this.setFunctionModule(14-R,8,i(b,R));for(let R=0;R<8;R++)this.setFunctionModule(this.size-1-R,8,i(b,R));for(let R=8;R<15;R++)this.setFunctionModule(8,this.size-15+R,i(b,R));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let E=this.version;for(let _=0;_<12;_++)E=E<<1^(E>>>11)*7973;const y=this.version<<12|E;l(y>>>18==0);for(let _=0;_<18;_++){const b=i(y,_),R=this.size-11+_%3,k=Math.floor(_/3);this.setFunctionModule(R,k,b),this.setFunctionModule(k,R,b)}}drawFinderPattern(E,y){for(let _=-4;_<=4;_++)for(let b=-4;b<=4;b++){const R=Math.max(Math.abs(b),Math.abs(_)),k=E+b,z=y+_;0<=k&&k<this.size&&0<=z&&z<this.size&&this.setFunctionModule(k,z,R!=2&&R!=4)}}drawAlignmentPattern(E,y){for(let _=-2;_<=2;_++)for(let b=-2;b<=2;b++)this.setFunctionModule(E+b,y+_,Math.max(Math.abs(b),Math.abs(_))!=1)}setFunctionModule(E,y,_){this.modules[y][E]=_,this.isFunction[y][E]=!0}addEccAndInterleave(E){const y=this.version,_=this.errorCorrectionLevel;if(E.length!=Re.getNumDataCodewords(y,_))throw new RangeError("Invalid argument");const b=Re.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][y],R=Re.ECC_CODEWORDS_PER_BLOCK[_.ordinal][y],k=Math.floor(Re.getNumRawDataModules(y)/8),z=b-k%b,q=Math.floor(k/b);let j=[];const nt=Re.reedSolomonComputeDivisor(R);for(let W=0,yt=0;W<b;W++){let wt=E.slice(yt,yt+q-R+(W<z?0:1));yt+=wt.length;const Rt=Re.reedSolomonComputeRemainder(wt,nt);W<z&&wt.push(0),j.push(wt.concat(Rt))}let Z=[];for(let W=0;W<j[0].length;W++)j.forEach((yt,wt)=>{(W!=q-R||wt>=z)&&Z.push(yt[W])});return l(Z.length==k),Z}drawCodewords(E){if(E.length!=Math.floor(Re.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let y=0;for(let _=this.size-1;_>=1;_-=2){_==6&&(_=5);for(let b=0;b<this.size;b++)for(let R=0;R<2;R++){const k=_-R,q=(_+1&2)==0?this.size-1-b:b;!this.isFunction[q][k]&&y<E.length*8&&(this.modules[q][k]=i(E[y>>>3],7-(y&7)),y++)}}l(y==E.length*8)}applyMask(E){if(E<0||E>7)throw new RangeError("Mask value out of range");for(let y=0;y<this.size;y++)for(let _=0;_<this.size;_++){let b;switch(E){case 0:b=(_+y)%2==0;break;case 1:b=y%2==0;break;case 2:b=_%3==0;break;case 3:b=(_+y)%3==0;break;case 4:b=(Math.floor(_/3)+Math.floor(y/2))%2==0;break;case 5:b=_*y%2+_*y%3==0;break;case 6:b=(_*y%2+_*y%3)%2==0;break;case 7:b=((_+y)%2+_*y%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[y][_]&&b&&(this.modules[y][_]=!this.modules[y][_])}}getPenaltyScore(){let E=0;for(let R=0;R<this.size;R++){let k=!1,z=0,q=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[R][j]==k?(z++,z==5?E+=Re.PENALTY_N1:z>5&&E++):(this.finderPenaltyAddHistory(z,q),k||(E+=this.finderPenaltyCountPatterns(q)*Re.PENALTY_N3),k=this.modules[R][j],z=1);E+=this.finderPenaltyTerminateAndCount(k,z,q)*Re.PENALTY_N3}for(let R=0;R<this.size;R++){let k=!1,z=0,q=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][R]==k?(z++,z==5?E+=Re.PENALTY_N1:z>5&&E++):(this.finderPenaltyAddHistory(z,q),k||(E+=this.finderPenaltyCountPatterns(q)*Re.PENALTY_N3),k=this.modules[j][R],z=1);E+=this.finderPenaltyTerminateAndCount(k,z,q)*Re.PENALTY_N3}for(let R=0;R<this.size-1;R++)for(let k=0;k<this.size-1;k++){const z=this.modules[R][k];z==this.modules[R][k+1]&&z==this.modules[R+1][k]&&z==this.modules[R+1][k+1]&&(E+=Re.PENALTY_N2)}let y=0;for(const R of this.modules)y=R.reduce((k,z)=>k+(z?1:0),y);const _=this.size*this.size,b=Math.ceil(Math.abs(y*20-_*10)/_)-1;return l(0<=b&&b<=9),E+=b*Re.PENALTY_N4,l(0<=E&&E<=2568888),E}getAlignmentPatternPositions(){if(this.version==1)return[];{const E=Math.floor(this.version/7)+2,y=this.version==32?26:Math.ceil((this.version*4+4)/(E*2-2))*2;let _=[6];for(let b=this.size-7;_.length<E;b-=y)_.splice(1,0,b);return _}}static getNumRawDataModules(E){if(E<Re.MIN_VERSION||E>Re.MAX_VERSION)throw new RangeError("Version number out of range");let y=(16*E+128)*E+64;if(E>=2){const _=Math.floor(E/7)+2;y-=(25*_-10)*_-55,E>=7&&(y-=36)}return l(208<=y&&y<=29648),y}static getNumDataCodewords(E,y){return Math.floor(Re.getNumRawDataModules(E)/8)-Re.ECC_CODEWORDS_PER_BLOCK[y.ordinal][E]*Re.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][E]}static reedSolomonComputeDivisor(E){if(E<1||E>255)throw new RangeError("Degree out of range");let y=[];for(let b=0;b<E-1;b++)y.push(0);y.push(1);let _=1;for(let b=0;b<E;b++){for(let R=0;R<y.length;R++)y[R]=Re.reedSolomonMultiply(y[R],_),R+1<y.length&&(y[R]^=y[R+1]);_=Re.reedSolomonMultiply(_,2)}return y}static reedSolomonComputeRemainder(E,y){let _=y.map(b=>0);for(const b of E){const R=b^_.shift();_.push(0),y.forEach((k,z)=>_[z]^=Re.reedSolomonMultiply(k,R))}return _}static reedSolomonMultiply(E,y){if(E>>>8||y>>>8)throw new RangeError("Byte out of range");let _=0;for(let b=7;b>=0;b--)_=_<<1^(_>>>7)*285,_^=(y>>>b&1)*E;return l(_>>>8==0),_}finderPenaltyCountPatterns(E){const y=E[1];l(y<=this.size*3);const _=y>0&&E[2]==y&&E[3]==y*3&&E[4]==y&&E[5]==y;return(_&&E[0]>=y*4&&E[6]>=y?1:0)+(_&&E[6]>=y*4&&E[0]>=y?1:0)}finderPenaltyTerminateAndCount(E,y,_){return E&&(this.finderPenaltyAddHistory(y,_),y=0),y+=this.size,this.finderPenaltyAddHistory(y,_),this.finderPenaltyCountPatterns(_)}finderPenaltyAddHistory(E,y){y[0]==0&&(E+=this.size),y.pop(),y.unshift(E)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(w,E,y){if(E<0||E>31||w>>>E)throw new RangeError("Value out of range");for(let _=E-1;_>=0;_--)y.push(w>>>_&1)}function i(w,E){return(w>>>E&1)!=0}function l(w){if(!w)throw new Error("Assertion error")}const u=class Hn{constructor(E,y,_){if(this.mode=E,this.numChars=y,this.bitData=_,y<0)throw new RangeError("Invalid argument");this.bitData=_.slice()}static makeBytes(E){let y=[];for(const _ of E)n(_,8,y);return new Hn(Hn.Mode.BYTE,E.length,y)}static makeNumeric(E){if(!Hn.isNumeric(E))throw new RangeError("String contains non-numeric characters");let y=[];for(let _=0;_<E.length;){const b=Math.min(E.length-_,3);n(parseInt(E.substring(_,_+b),10),b*3+1,y),_+=b}return new Hn(Hn.Mode.NUMERIC,E.length,y)}static makeAlphanumeric(E){if(!Hn.isAlphanumeric(E))throw new RangeError("String contains unencodable characters in alphanumeric mode");let y=[],_;for(_=0;_+2<=E.length;_+=2){let b=Hn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(_))*45;b+=Hn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(_+1)),n(b,11,y)}return _<E.length&&n(Hn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(_)),6,y),new Hn(Hn.Mode.ALPHANUMERIC,E.length,y)}static makeSegments(E){return E==""?[]:Hn.isNumeric(E)?[Hn.makeNumeric(E)]:Hn.isAlphanumeric(E)?[Hn.makeAlphanumeric(E)]:[Hn.makeBytes(Hn.toUtf8ByteArray(E))]}static makeEci(E){let y=[];if(E<0)throw new RangeError("ECI assignment value out of range");if(E<128)n(E,8,y);else if(E<16384)n(2,2,y),n(E,14,y);else if(E<1e6)n(6,3,y),n(E,21,y);else throw new RangeError("ECI assignment value out of range");return new Hn(Hn.Mode.ECI,0,y)}static isNumeric(E){return Hn.NUMERIC_REGEX.test(E)}static isAlphanumeric(E){return Hn.ALPHANUMERIC_REGEX.test(E)}getData(){return this.bitData.slice()}static getTotalBits(E,y){let _=0;for(const b of E){const R=b.mode.numCharCountBits(y);if(b.numChars>=1<<R)return 1/0;_+=4+R+b.bitData.length}return _}static toUtf8ByteArray(E){E=encodeURI(E);let y=[];for(let _=0;_<E.length;_++)E.charAt(_)!="%"?y.push(E.charCodeAt(_)):(y.push(parseInt(E.substring(_+1,_+3),16)),_+=2);return y}};u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=u;e.QrSegment=u})(kl||(kl={}));(e=>{(t=>{const n=class{constructor(l,u){this.ordinal=l,this.formatBits=u}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(kl||(kl={}));(e=>{(t=>{const n=class{constructor(l,u){this.modeBits=l,this.numBitsCharCount=u}numCharCountBits(l){return this.numBitsCharCount[Math.floor((l+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(kl||(kl={}));var Pc=kl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var kV={L:Pc.QrCode.Ecc.LOW,M:Pc.QrCode.Ecc.MEDIUM,Q:Pc.QrCode.Ecc.QUARTILE,H:Pc.QrCode.Ecc.HIGH},iI=128,rI="L",sI="#FFFFFF",aI="#000000",oI=!1,lI=1,BV=4,VV=0,UV=.1;function cI(e,t=0){const n=[];return e.forEach(function(i,l){let u=null;i.forEach(function(g,w){if(!g&&u!==null){n.push(`M${u+t} ${l+t}h${w-u}v1H${u+t}z`),u=null;return}if(w===i.length-1){if(!g)return;u===null?n.push(`M${w+t},${l+t} h1v1H${w+t}z`):n.push(`M${u+t},${l+t} h${w+1-u}v1H${u+t}z`);return}g&&u===null&&(u=w)})}),n.join("")}function uI(e,t){return e.slice().map((n,i)=>i<t.y||i>=t.y+t.h?n:n.map((l,u)=>u<t.x||u>=t.x+t.w?l:!1))}function FV(e,t,n,i){if(i==null)return null;const l=e.length+n*2,u=Math.floor(t*UV),g=l/t,w=(i.width||u)*g,E=(i.height||u)*g,y=i.x==null?e.length/2-w/2:i.x*g,_=i.y==null?e.length/2-E/2:i.y*g,b=i.opacity==null?1:i.opacity;let R=null;if(i.excavate){let z=Math.floor(y),q=Math.floor(_),j=Math.ceil(w+y-z),nt=Math.ceil(E+_-q);R={x:z,y:q,w:j,h:nt}}const k=i.crossOrigin;return{x:y,y:_,h:E,w,excavation:R,opacity:b,crossOrigin:k}}function zV(e,t){return t!=null?Math.max(Math.floor(t),0):e?BV:VV}function hI({value:e,level:t,minVersion:n,includeMargin:i,marginSize:l,imageSettings:u,size:g,boostLevel:w}){let E=di.useMemo(()=>{const z=(Array.isArray(e)?e:[e]).reduce((q,j)=>(q.push(...Pc.QrSegment.makeSegments(j)),q),[]);return Pc.QrCode.encodeSegments(z,kV[t],n,void 0,void 0,w)},[e,t,n,w]);const{cells:y,margin:_,numCells:b,calculatedImageSettings:R}=di.useMemo(()=>{let k=E.getModules();const z=zV(i,l),q=k.length+z*2,j=FV(k,g,z,u);return{cells:k,margin:z,numCells:q,calculatedImageSettings:j}},[E,g,u,i,l]);return{qrcode:E,margin:_,cells:y,numCells:b,calculatedImageSettings:R}}var jV=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),fI=di.forwardRef(function(t,n){const i=t,{value:l,size:u=iI,level:g=rI,bgColor:w=sI,fgColor:E=aI,includeMargin:y=oI,minVersion:_=lI,boostLevel:b,marginSize:R,imageSettings:k}=i,q=np(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=q,nt=np(q,["style"]),Z=k?.src,W=di.useRef(null),yt=di.useRef(null),wt=di.useCallback(Jt=>{W.current=Jt,typeof n=="function"?n(Jt):n&&(n.current=Jt)},[n]),[Rt,H]=di.useState(!1),{margin:U,cells:V,numCells:et,calculatedImageSettings:K}=hI({value:l,level:g,minVersion:_,boostLevel:b,includeMargin:y,marginSize:R,imageSettings:k,size:u});di.useEffect(()=>{if(W.current!=null){const Jt=W.current,ht=Jt.getContext("2d");if(!ht)return;let Et=V;const xt=yt.current,Ft=K!=null&&xt!==null&&xt.complete&&xt.naturalHeight!==0&&xt.naturalWidth!==0;Ft&&K.excavation!=null&&(Et=uI(V,K.excavation));const $t=window.devicePixelRatio||1;Jt.height=Jt.width=u*$t;const $=u/et*$t;ht.scale($,$),ht.fillStyle=w,ht.fillRect(0,0,et,et),ht.fillStyle=E,jV?ht.fill(new Path2D(cI(Et,U))):V.forEach(function(St,Bt){St.forEach(function(Vt,zt){Vt&&ht.fillRect(zt+U,Bt+U,1,1)})}),K&&(ht.globalAlpha=K.opacity),Ft&&ht.drawImage(xt,K.x+U,K.y+U,K.w,K.h)}}),di.useEffect(()=>{H(!1)},[Z]);const J=ep({height:u,width:u},j);let X=null;return Z!=null&&(X=di.createElement("img",{src:Z,key:Z,style:{display:"none"},onLoad:()=>{H(!0)},ref:yt,crossOrigin:K?.crossOrigin})),di.createElement(di.Fragment,null,di.createElement("canvas",ep({style:J,height:u,width:u,ref:wt,role:"img"},nt)),X)});fI.displayName="QRCodeCanvas";var HV=di.forwardRef(function(t,n){const i=t,{value:l,size:u=iI,level:g=rI,bgColor:w=sI,fgColor:E=aI,includeMargin:y=oI,minVersion:_=lI,boostLevel:b,title:R,marginSize:k,imageSettings:z}=i,q=np(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:nt,numCells:Z,calculatedImageSettings:W}=hI({value:l,level:g,minVersion:_,boostLevel:b,includeMargin:y,marginSize:k,imageSettings:z,size:u});let yt=nt,wt=null;z!=null&&W!=null&&(W.excavation!=null&&(yt=uI(nt,W.excavation)),wt=di.createElement("image",{href:z.src,height:W.h,width:W.w,x:W.x+j,y:W.y+j,preserveAspectRatio:"none",opacity:W.opacity,crossOrigin:W.crossOrigin}));const Rt=cI(yt,j);return di.createElement("svg",ep({height:u,width:u,viewBox:`0 0 ${Z} ${Z}`,ref:n,role:"img"},q),!!R&&di.createElement("title",null,R),di.createElement("path",{fill:w,d:`M0,0 h${Z}v${Z}H0z`,shapeRendering:"crispEdges"}),di.createElement("path",{fill:E,d:Rt,shapeRendering:"crispEdges"}),wt)});HV.displayName="QRCodeSVG";function GV({profile:e}){if(!e)return null;const t={name:e.name,title:e.title,years:e.years,factory:e.factory,phone:e.phone,birthday:e.birthday,email:e.email};return Tt.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[Tt.jsx("h3",{className:"font-semibold text-sm",children:"我的 QR Code"}),Tt.jsx(fI,{value:JSON.stringify(t),size:180,bgColor:"#ffffff",fgColor:"#000000",level:"Q",includeMargin:!0})]})}const qV=new ka,_c={zh:{loginBtn:"使用 Google 登入",logoutBtn:"登出",scores:"🏆 積分",name:"姓名",title:"職稱",years:"年資",factory:"廠區",phone:"電話",birthday:"生日"},en:{loginBtn:"Sign in with Google",logoutBtn:"Logout",scores:"🏆 Scores",name:"Name",title:"Title      ",years:"Years      ",factory:"Factory",phone:"Phone      ",birthday:"Birthday"}};function YV({lang:e="zh"}){const[t,n]=st.useState(null),[i,l]=st.useState(null),[u,g]=st.useState(null),[w,E]=st.useState(!1),[y,_]=st.useState(!1);st.useEffect(()=>{const q=SC(Ed,async j=>{if(j){n(j);const nt=ko(Bo,"profiles",j.uid),Z=await qd(nt);Z.exists()&&l(Z.data())}else n(null),l(null)});return()=>q()},[]);const b=async()=>{try{const j=(await C6(Ed,qV)).user;n(j);const nt=ko(Bo,"profiles",j.uid),Z=await qd(nt);if(Z.exists())l(Z.data());else{const W={name:j.displayName||"",title:"",years:0,factory:"",phone:"",birthday:"",email:j.email||"",photoURL:j.photoURL||"",createdAt:k9(),scores:0};await P9(nt,W),l(W)}}catch(q){console.error("登入失敗",q)}},R=async()=>{try{await r6(Ed),n(null),l(null)}catch(q){console.error("登出失敗",q)}},k=async(q,j)=>{if(!t)return;const nt=ko(Bo,"profiles",t.uid);let Z=j;(q==="years"||q==="phone")&&(Z=j.replace(/\D/g,"")),await Yd(nt,{[q]:Z}),l(W=>({...W,[q]:Z})),g(null)},z=(q,j,nt="text")=>{const Z=_c[e][j]||j;return Tt.jsxs("div",{className:"info-row",children:[Tt.jsxs("span",{className:"info-label",children:[Z,"："]}),u===q?Tt.jsx("input",{type:nt,value:i?.[q]||"",onChange:W=>l(yt=>({...yt,[q]:W.target.value})),onBlur:W=>k(q,W.target.value),onKeyDown:W=>W.key==="Enter"&&k(q,W.target.value),autoFocus:!0}):Tt.jsx("span",{className:"info-value",onClick:()=>g(q),children:i?.[q]||"-"})]})};return Tt.jsx("div",{className:"profile-page",children:t?Tt.jsxs("div",{className:"profile-container",children:[Tt.jsxs("div",{className:"profile-main",children:[Tt.jsx("div",{className:"profile-avatar-container",children:Tt.jsx("img",{src:i?.photoURL||t.photoURL,alt:"avatar",className:"profile-avatar"})}),Tt.jsxs("div",{className:"profile-info",children:[Tt.jsx("div",{className:"profile-name",children:Tt.jsx("h2",{children:i?.name||_c[e].name})}),Tt.jsx("p",{className:"profile-email",children:i?.email||t.email}),z("title","title"),z("years","years"),z("factory","factory"),z("phone","phone"),z("birthday","birthday"),Tt.jsxs("p",{children:[_c[e].scores,": ",i?.scores||0]})]})]}),Tt.jsx("div",{className:"profile-actions",children:t?Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("button",{className:"profile-button green",onClick:()=>E(q=>!q),children:w?"隱藏 QR Code":"產生 QR Code"}),w&&Tt.jsx(GV,{profile:i}),Tt.jsx(_S,{scanning:y,onScan:q=>{console.log("掃描結果：",q),_(!1)}}),Tt.jsx("button",{className:"profile-button red",onClick:R,children:_c[e].logoutBtn})]}):Tt.jsx("button",{className:"profile-button green login-btn",onClick:b,children:_c[e].loginBtn})})]}):Tt.jsx("button",{className:"profile-button green",onClick:b,children:_c[e].loginBtn})})}const XV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAClCAYAAADvezeCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAACdhJREFUeF7t3XtwVFcBx/HvPpJAAuRBIAGa8ihICRSE2oLWqdJ2yihWq0il4uCgte2Io+PgqH+go305Y8vUsepotTroKDNW6Wgr09IK2GkZi7VTwIQaqS3hkRATkkAePJJd/zi7hZwl2YTs3nv37O/T+c225yzTzb2/DefuvbsbQbwyF9gOtAJvWHMiOe2jwCkgnsiDQHjAPURyUBj4DqbU5xO3ybwAlL1zT5EcUwo8zaXLncwRoDb5B0RyRS3wb0yJY4nbwXIG+KT5YyLB9wmgi/TFtvN9IIJIQEWABzBl7UvcjjS7gHJEAqYc8xLgaMqdzDHgGkQCYgFwiNSijiZngU8h4rPVQDcjX28PN5vRulx8EAG+hynhaJck6fIiMBERj1QAz2HK15+4zXaOA4sQybKFwFukFtCLnAM+jUiWrAF6yN56e7j5ARBFJEOiwMOYcnm1JEmXl4FKREapEnNRVBz/f3PbaQaWIHKZFgOHSS1WkHIeWIfICK3FXAQVtN/ag+VHQAEiaUSBRzGlCcp6e7j5OzAZkUFMwlzsZBcnl/I/4D2IWK7FvPnALkwu5jywHpGEdZiLm3JlvT3c/BSty/NaAfBDTBlcK3cye4EqJO9UYS5isgvhYlqBpUjeuA7zpgK7CC6nD7gLcd7ncHO9Pdz8AihEnFMI/ASzk/O13Mn8E5iCOKMac3GSvaPzOW3A+5CctwxzUZK9gxWzLr8XyVlfwJz0yPclSbr8CihCckYR8DNSd6QyeF4HpiGBNxV4hdQdqKRPO/B+JLBuAFpI3XHK8NMPbABCSGCEMAdLWm9nLr8BxiC+GwM8QeoOUkaf/UAN4psrgFdJ3TFK5tIBfADx3I2YkxX2DlEynxjwFbQu90QI+BLmJIXW295mKzAWyZqxwBZSN7ziXeqA6UjGXYk5GWFvcMX7dALLkYz5IOYkhL2hFf8SAzaidfmohDAHN7n28Q35lCeBYmTEioHfkrpBleDlIDATGbYZmIMZe0MqwU0XcAuS1s2YjWVvQCX4iQFfR+vySwoBX0OvbbuQp4AS5B0lmIMVe0MpuZtDwFUIszAHKfYGUnI/XcAKfObnV9Tdivmwy6n2hDihEPgM5jLml6w5p4WAb6L1dj7lT8A48sA4zEGIvQEU93MImIPDZgMNpP7gSv6kG/gwHvJqDf4hYCfmQ3gkfxVgvh4mhlmXxwdO554QsInUZ7KiPAOMJ4eNx/wQ9g+mKMn8F5hLDpqDefD2D6QodnqA28iSbKzBP4JZb0+yJ0QuoQC4Ewhz4UsJAikM3EfqM1RRhptngVICaALwHKkPWFFGmsPAPALkaqCR1AeqKJebXuB2MmC0a/DbgReACntCZBSiwBrM9Sy7MaX3VBh4iNRnnqJkOs8DZVymy3n3RRmwDX10gHjnCOZseJ09kU7YHkijFvM/UbnFSzWYL89aZU+kM5I1+CpG+deFyChEgTswn7iwC7N8yYgI8AipayNF8Ss7gXKGId0avBz4M/pqCwmeY5h1+QF74mJDrcEXYN4vqXJLEE3DfD78HfbExQZbg6/BnDadYE+IBEgEWI3p6U7MdeZDigCPkbrmUZSg50VgIpaL1+AVwHZg6UVjIrmkCfOWuNeTA8mCLwT2JQdFctxa4HdgliRrgKcx1+WKuGAViXV5CG9P3CzGHAxIftpA4jerR7qimK+K88ppe0DySg/e9m3I18FFcp4KLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHFa1B6QIYSgatYErlw4kZKKMUSiIfseGRfrj9PdcY6jdSdpeqODeDxu30WGoIIP06QZ47n5nvlUv6vUnvJMW2MXOx+v59jBdntKBqGCD8Os6yazcuMiCgoLWD5nFQun3UB58WSi4QL7rhnXH+un80wr9U172RHeyur7r2fHj/9F/a5j9l3lElTwNCqnj2flxkVUldXw+fd+m+oJ0+27ZN24olKmlV7FkprlbHnlQW7dAKdaejlad9K+q1h0kJnG8rvmES2Isn7ZJl/KfbGJJdWsX/YtCiJF3HR3LaFw9o8Bcp0KPoSKK0qYVlvOjbM/xtTSmfa0L8qLJ7Oidq15bPPK7WmxqOBDqFkwEYD5U5ZaM/6aX70MgJprKqwZsangQygpLwSgbOwka8ZfZWMrASgpL7JmxKaCDyEcMZsnEg7WsXg08XjCUe2+dLSFxGkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4zeuCxxK3+vyx/JTc/57xuuDdiVvPf1AJhC57INu8LnhH4rZvwKjki057INu8LngL5lmsguenN+2BbPO64HGgHojYE+K8c8ARezDbvC44wLPAGHtQnPc80G8PZpsfBX/KHpC88KQ94AU/Cr4POAz02hPirBjwjD3oBT8KHsc8m8faE+KkOPA3oM2e8IIfBQd4BPOa+Dl7QpwTAjbZg17xq+AngIcB8/Gt4qo45phrjz3hFb8KDrAZ87r4eXtCnBEDvmEPesnPgncBXwQK0Kl7V90H/Mce9JKfBQf4I2Yj+P04JPO2AQ/Yg14LQrG+iyl64MRi5qLH/liwrizoj5vzJfH+QP7FFwMOAOsS/+6rIBQ8BnwW2GVP+K27/SwAnb2+vMI1qM7eVuDC4wuQOOZ6k9u4cOWor4JQcDAbYwXwWOK/A3G9+LF6843CB0/8w5rxV32zeTxH6wL3jcc7gOsxJ/ICISgFB/NqypeBuzG/1X0veWvjaZobOtndsI0TpxvtaV909raxve7XdDT1BOWLYJPLkM3ASi5cEh0IQbyq7zXg98B0YC6m6L5942nL26eovWkqb7Ye4OqqaykuHG/fxTOdZ9rYsvch2rqb2P7oPjqaeuy7eCm5X14D7gR+nhgLlCAWHKAV2ArsBt4NTBkw66Hu9rO0H++mevEY9rz1FwiFKCkspTBSRCgUIp7lf/pifZzsaebVxr/yyz3309Z9nF1PHKThpWb7oXrtCHAP8FXg7YFTweHbb8YRCAELgY8Dq4HagdPeqJ5Tyi33LqByxjh7yjOdzb3sfLyOw/t8O+g9AvyBC2cnPb/8daRyoeC2mcASzPKlCijFo+vLQ5FQaPbSqsoZiyurx5UXFYcLwlk/hon1x+I97ed6Gve3tTS83NTS3xf36qW385i3mLUCDcB+oI4ALkOG8n8uq3EDMZcE5gAAAABJRU5ErkJggg==",WV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACVCAYAAAC3i3MLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAC3pJREFUeF7t3VtsFPcVx/GvbwJaau4LTbiYWk2NoUppaFGJEdSAwgsuyKFNWpQ+VKnSpFUieGmblqhKmqhCLg2xo9L2pSBHbbiYSoWYu6FEfQA5ESUJ4BgnLpes8YIdG3zdnT5MQcqZWe/M/nf2Ys5HOi9n7P3Pf/bnmZ3ZWW8e6TUBqASWAPOBB4BJQDEwBHQD14D3gbPAMeAdIMq9pwBYDCwHvgqUA9Oxt2EB9ra6AVwA3gNOAU3ALUaZscD3gSPAMGD5rE6gFvga94ZvAX8BbuLcFolqAPgnsA4oIscVAD/C3qPIiSZbb2H/JY5Gi4B/4ZxzstUGfI8cVQm8i3NSqahhoA6YyuhwP7ADiOGcayrqbeCb5Ihi4E2ckwiiuoAfkNt+iv2aRc4t1RUD/gyMIYuVAP/BufJB12+BfHJLIfBHnHMJut4GQmShCuA6zhVOV+0FxpMbJgFHcc4hXfUR9lld1lgLDOJc0XRXM/Ypbjabjn3aLdc93dUDLCULfB24jXMFM1VvYR8estEY4N841zlTdR2YSwZ9EbiMc8UyXVvJTjtxrmum6xz2iU/S8mTDo3HACeAbckEiJSUlrF69mpUrVzJ37lxCoRBTp05lYGCAjo4OwuEwzc3NNDY20tTURF9fn3wIL36MfdaRLX4BvCybiRQXF1NZWckjjzzCgw8+SCgUIhQKUVRUREdHB9evX+fDDz/k0KFDHDx4kCtXrsiH8OIAsAb7TC1ttuBM84i1YsUK6+TJk1YsFrO86u3ttWpqaqxQKOR4vAQ1CHyZ7LAIn9d45syZY23fvt0aGBiQm2REBw8etJYsWeJ4PA+1kTQqxb5kLlfCtaZPn24dOXJEztWXW7duWRs3bnQ8doLaR3bwfHU5Pz/feumll6zBwUG5CXzZt2+fNXHiRMfjj1A3SeOF2V04V8C1HnroIau9vV3OL2k7d+60xo4d6xhnhPo2mbUe5zq51oQJE6z9+/fLKSft4sWL1rx58xzjjFC1pEEFzoFdq6yszOru7pbzMtbQ0OAYa4R6F/s9uUwYA1zCuU6OKioqsk6ePCmnaiwcDlszZ850jBenhoB5BOwYzoEdVVxcbJ0/f17OJ2VeeOEFx5gj1HfJjJ/gXBfXqq2tlVNMmdOnT/vZa/8dn/ychT2AfREsobq6Op5++mnZTplYLMbChQs5e/asXOTmMPBD4EvADPzN2a8YcBVoBQ7h4RaUyspKjh49Ktsp9eKLL7J582bZdjOI/eZup1yQCi/jTKyjZs+ebfX398s/hJTbs2ePY+xcrFOnTsmppVx3d7c1efJkx9hx6mcE5B2cgznqtddek+sfiGg0apWVlTnGz6Vavny5nFZgfBz238IHr+9iT8PD7hhg7dq1shWI/Px8qqqqZDunpHP9fYy1jABu+1iFM6mOmj9/vgx+oI4dO+ZYh1yqc+fOySkFJhaLWdOmTXOsQ5zytLMA73ug+bLhpqKiQrYCtWTJEvLygnxNHJxJkyYxf76nzZoSeXl5PPzww7Idj+cV8xqgObLh5r777pOtQI0ZM4YpU6bIdk6YMWOGbAXOx5izZSMerwHydJ9NKJT+m90yMWYqZGK9fYz5BdmIx2uAPi8bboqLje4MSMrkyZNlKydkYr0nTpwoW/F8Tjbi8RqgXtlw09XVJVuBKyjI1DsVZvLzvW761Llx44ZsxeP5w4le797rlg03HR0dspU1ysrKKC8vD/RFt2VZnDlzhvb2drkoK/h4fnpkIx6vAWqTDTdJ3tCUFk8++SQbNwZ/28tzzz3Hq6++KttZ4dq1a7IVj6fnG7wfwt6TDTcnTpyQrayRrkNGYaHXv8n0isVinDp1SrbjeV824vG6Ve+8jTGilpYWLl26JNsqC5w+fZqbN2/Ktpte4LxsxuM1QDeB07LpZs+ePbKlskBDQ4NsxXMM+94gT7wGCOybrxOqqanh9u3bsq0yKBKJ8Prrr8t2PPtlYyR+AvRXPBzGwuEwdXV1sq0yaMuWLfT0eDqx6sPnTWV+AvQR0CibbjZv3kxzc7NsqwxoamqipqZGtuN5E4+XbO7wEyCAX+FhL9Tf38+6dev8XHdQAfj4449Zv349w8PDcpGbAeA3spmI3wA1Y/8vm4Ta29upqKjggw8+kItUGpw5c4aKigo6Oz3fnfoHfFz/ucNvgACexz5WJtTS0sLixYupr68nFkvrBx/vWdFolO3bt7N06VIuX74sF8fTQRKfnIXkAnQF+J1sxtPT08OGDRtYuHAhe/fu9bo7VT4NDQ1RX19PeXk5Tz31FP39/fJHRvJr4FPZ9KKQ5D6R+CdgBT7+RcjZs2eprq5mwoQJrFy5klWrVlFSUkIoFGLatGmMHTtW/oonPnbRWaWzszPpde/v7yccDn/ms/HHjx+nt9fTe97S3v9XMjnoBOftjKOytm7dKu/yDMSmTZscY4/iSuoQptRdGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGfF8A2+qPgE6PDzM0NAQ0WiUaDSKZVl3Kxlefy9d9yr7GSfZT4jk5eXdrYKCAgoLC+9WKkQiEdmKy/OIyV52D9ry5cs93cy/YMEC2QrEokWLZMtVdXU1u3fvlu2s4CfYeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBHP/x+otrZWtrJCNn9T9EhaW1uzdpv6Jf99/ais48ePf+YrCYKya9cux9ijuPQQpsxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlpBCok00fSoHVsimVlpayenXCH0tKQ0MDV69ele2sF+Q2aWxspLW1VbbdNAKefjAoj+K8Oumo6upqecE2ZZYtW+YYz62y7Up0kNukurraMV6cehRDeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSOmAeqXDTeDg4OypQI0MDAgW/H0yYZfpgG6LBtuIpGIbKkA+djenp6/kaQlQG1tbViWJdsqAJZl0dbWJtvxeHr+RmIaoAgedoPXrl2jpaVFtlUALl68yCeffCLbbvqAG7Lpl2mALKBJNt3U19fLlgrAG2+8IVvxHMd+/oyYBgjgb7LhZtu2bX6OzSoJkUiEbdu2yXY8np63RFIRoH8ACU+zurq6ePzxx4lGo3KRSoFoNMpjjz1GV1eXXORmAPt5M5aKAHUDu2XTzeHDh6mqqvI6SU/Gjx8vW66GhoZkKxBeT6GLi4tlK2ldXV2sWbOGI0eOyEXx7AY+lc1keP7e+ASeB6qBMXKBdODAAebNm8emTZt44oknCIVC8kd8KSkpkS1XGzZsYOrUqeTl5clFKROLxQiHw7Ltau7cubLlW0dHBzt27KCmpsbrC2ew9z7Py2ayUrk1XwF+LpuJLFiwgNLSUqZMmcK4cePk4oQuXLjg5y8va1RVVTFr1izZTqivr49IJEJrayvnzp2Ti714BfilbCYrlQEqBt4H7pcLVNa4DJQDPXJBslLxGuiOT4Eq4LZcoLLCbeA7pDA8QVmH84vNtDJbMWAtOeRZnJPQylw9Sw56FHu3KSejlb66TQq+1jKTFgFXcU5MK/i6ir39c94kYCswhHOSWqmvIeD32Nt9VPkKsA/7BZ2ctJZ5RbG37wOMcjOAZ4CTaJhMK4a9HZ/B3q5pl8oLickYB8wEZgOzAG9vbN3beoH/Au3YFwYT3o8VpP8BOx/K48GQwasAAAAASUVORK5CYII=",KV="/basecamp-app/assets/setting_icon-fnFuyX_C.png",QV={zh:[{title:"公司環境",path:"/explore"},{title:"交通資訊",path:"/info"},{title:"社交任務",path:"/social"},{title:"獎勵兌換",path:"/rewards"},{title:"個人資訊",path:"/settings"}],en:[{title:"Environment",path:"/explore"},{title:"Transport Info",path:"/info"},{title:"Social Tasks",path:"/social"},{title:"Rewards",path:"/rewards"},{title:"Profile",path:"/settings"}]};function ZV({lang:e}){const t=QV[e],n=[{title:e==="zh"?"公司生活":"Company Life",items:t.slice(0,2),icons:[XV]},{title:e==="zh"?"社交獎勵":"Social & Rewards",items:t.slice(2,4),icons:[WV]},{title:e==="zh"?"設定":"Settings",items:t.slice(4,5),icons:[KV]}];return Tt.jsxs("div",{className:"home-container",children:[Tt.jsx("h1",{children:"Scan & Connect"}),Tt.jsx("div",{className:"menu-container",children:n.map((i,l)=>Tt.jsxs("div",{className:"menu-row-wrapper",children:[Tt.jsxs("div",{className:"menu-row-title",children:[Tt.jsx("div",{className:"row-icons",children:i.icons.map((u,g)=>Tt.jsx("img",{src:u,alt:`icon-${g}`,className:"row-icon"},g))}),Tt.jsx("span",{className:"row-title-text",children:i.title})]}),Tt.jsx("div",{className:"menu-row",children:i.items.map((u,g)=>Tt.jsx(s0,{to:u.path,className:"menu-button",children:u.title},g))})]},l))})]})}function JV(){const[e,t]=st.useState("zh");return Tt.jsx(dP,{children:Tt.jsxs(JR,{children:[Tt.jsxs(RR,{children:[Tt.jsx(So,{path:"/",element:Tt.jsx(ZV,{lang:e})}),Tt.jsx(So,{path:"/explore",element:Tt.jsx(d4,{lang:e})}),Tt.jsx(So,{path:"/info",element:Tt.jsx(u4,{lang:e})}),Tt.jsx(So,{path:"/social",element:Tt.jsx(tL,{lang:e})}),Tt.jsx(So,{path:"/rewards",element:Tt.jsx(PV,{lang:e})}),Tt.jsx(So,{path:"/settings",element:Tt.jsx(YV,{lang:e,setLang:t})}),Tt.jsx(So,{path:"/mailbox",element:Tt.jsx(l4,{})})]}),Tt.jsxs("div",{className:"bottom-buttons",children:[Tt.jsx("button",{className:"lang-button",onClick:()=>t(e==="zh"?"en":"zh"),children:e==="zh"?"English":"中文"}),Tt.jsx(s0,{to:"/",className:"home-button",children:e==="zh"?"首頁":"Home"})]})]})})}V3.createRoot(document.getElementById("root")).render(Tt.jsx(st.StrictMode,{children:Tt.jsx(JV,{})}));

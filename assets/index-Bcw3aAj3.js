function gI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Iy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cy={exports:{}},of={},vy={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fu=Symbol.for("react.element"),pI=Symbol.for("react.portal"),mI=Symbol.for("react.fragment"),yI=Symbol.for("react.strict_mode"),wI=Symbol.for("react.profiler"),EI=Symbol.for("react.provider"),_I=Symbol.for("react.context"),xI=Symbol.for("react.forward_ref"),AI=Symbol.for("react.suspense"),II=Symbol.for("react.memo"),CI=Symbol.for("react.lazy"),gp=Symbol.iterator;function vI(t){return t===null||typeof t!="object"?null:(t=gp&&t[gp]||t["@@iterator"],typeof t=="function"?t:null)}var Ty={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sy=Object.assign,Ry={};function el(t,e,n){this.props=t,this.context=e,this.refs=Ry,this.updater=n||Ty}el.prototype.isReactComponent={};el.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};el.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ny(){}Ny.prototype=el.prototype;function m0(t,e,n){this.props=t,this.context=e,this.refs=Ry,this.updater=n||Ty}var y0=m0.prototype=new Ny;y0.constructor=m0;Sy(y0,el.prototype);y0.isPureReactComponent=!0;var pp=Array.isArray,by=Object.prototype.hasOwnProperty,w0={current:null},Py={key:!0,ref:!0,__self:!0,__source:!0};function Oy(t,e,n){var r,s={},a=null,h=null;if(e!=null)for(r in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(a=""+e.key),e)by.call(e,r)&&!Py.hasOwnProperty(r)&&(s[r]=e[r]);var y=arguments.length-2;if(y===1)s.children=n;else if(1<y){for(var p=Array(y),m=0;m<y;m++)p[m]=arguments[m+2];s.children=p}if(t&&t.defaultProps)for(r in y=t.defaultProps,y)s[r]===void 0&&(s[r]=y[r]);return{$$typeof:Fu,type:t,key:a,ref:h,props:s,_owner:w0.current}}function TI(t,e){return{$$typeof:Fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fu}function SI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mp=/\/+/g;function td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?SI(""+t.key):e.toString(36)}function Lc(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(a){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case Fu:case pI:h=!0}}if(h)return h=t,s=s(h),t=r===""?"."+td(h,0):r,pp(s)?(n="",t!=null&&(n=t.replace(mp,"$&/")+"/"),Lc(s,e,n,"",function(m){return m})):s!=null&&(E0(s)&&(s=TI(s,n+(!s.key||h&&h.key===s.key?"":(""+s.key).replace(mp,"$&/")+"/")+t)),e.push(s)),1;if(h=0,r=r===""?".":r+":",pp(t))for(var y=0;y<t.length;y++){a=t[y];var p=r+td(a,y);h+=Lc(a,e,n,p,s)}else if(p=vI(t),typeof p=="function")for(t=p.call(t),y=0;!(a=t.next()).done;)a=a.value,p=r+td(a,y++),h+=Lc(a,e,n,p,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function cc(t,e,n){if(t==null)return t;var r=[],s=0;return Lc(t,r,"","",function(a){return e.call(n,a,s++)}),r}function RI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Fc={transition:null},NI={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Fc,ReactCurrentOwner:w0};function Dy(){throw Error("act(...) is not supported in production builds of React.")}We.Children={map:cc,forEach:function(t,e,n){cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cc(t,function(){e++}),e},toArray:function(t){return cc(t,function(e){return e})||[]},only:function(t){if(!E0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};We.Component=el;We.Fragment=mI;We.Profiler=wI;We.PureComponent=m0;We.StrictMode=yI;We.Suspense=AI;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI;We.act=Dy;We.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sy({},t.props),s=t.key,a=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,h=w0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var y=t.type.defaultProps;for(p in e)by.call(e,p)&&!Py.hasOwnProperty(p)&&(r[p]=e[p]===void 0&&y!==void 0?y[p]:e[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){y=Array(p);for(var m=0;m<p;m++)y[m]=arguments[m+2];r.children=y}return{$$typeof:Fu,type:t.type,key:s,ref:a,props:r,_owner:h}};We.createContext=function(t){return t={$$typeof:_I,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EI,_context:t},t.Consumer=t};We.createElement=Oy;We.createFactory=function(t){var e=Oy.bind(null,t);return e.type=t,e};We.createRef=function(){return{current:null}};We.forwardRef=function(t){return{$$typeof:xI,render:t}};We.isValidElement=E0;We.lazy=function(t){return{$$typeof:CI,_payload:{_status:-1,_result:t},_init:RI}};We.memo=function(t,e){return{$$typeof:II,type:t,compare:e===void 0?null:e}};We.startTransition=function(t){var e=Fc.transition;Fc.transition={};try{t()}finally{Fc.transition=e}};We.unstable_act=Dy;We.useCallback=function(t,e){return zn.current.useCallback(t,e)};We.useContext=function(t){return zn.current.useContext(t)};We.useDebugValue=function(){};We.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};We.useEffect=function(t,e){return zn.current.useEffect(t,e)};We.useId=function(){return zn.current.useId()};We.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};We.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};We.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};We.useMemo=function(t,e){return zn.current.useMemo(t,e)};We.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};We.useRef=function(t){return zn.current.useRef(t)};We.useState=function(t){return zn.current.useState(t)};We.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};We.useTransition=function(){return zn.current.useTransition()};We.version="18.3.1";vy.exports=We;var ne=vy.exports;const rn=Iy(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI=ne,PI=Symbol.for("react.element"),OI=Symbol.for("react.fragment"),DI=Object.prototype.hasOwnProperty,kI=bI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MI={key:!0,ref:!0,__self:!0,__source:!0};function ky(t,e,n){var r,s={},a=null,h=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(h=e.ref);for(r in e)DI.call(e,r)&&!MI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PI,type:t,key:a,ref:h,props:s,_owner:kI.current}}of.Fragment=OI;of.jsx=ky;of.jsxs=ky;Cy.exports=of;var se=Cy.exports,My={exports:{}},Er={},Ly={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,Ae){var Se=pe.length;pe.push(Ae);e:for(;0<Se;){var ct=Se-1>>>1,ze=pe[ct];if(0<s(ze,Ae))pe[ct]=Ae,pe[Se]=ze,Se=ct;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var Ae=pe[0],Se=pe.pop();if(Se!==Ae){pe[0]=Se;e:for(var ct=0,ze=pe.length,wn=ze>>>1;ct<wn;){var at=2*(ct+1)-1,Ur=pe[at],xe=at+1,xr=pe[xe];if(0>s(Ur,Se))xe<ze&&0>s(xr,Ur)?(pe[ct]=xr,pe[xe]=Se,ct=xe):(pe[ct]=Ur,pe[at]=Se,ct=at);else if(xe<ze&&0>s(xr,Se))pe[ct]=xr,pe[xe]=Se,ct=xe;else break e}}return Ae}function s(pe,Ae){var Se=pe.sortIndex-Ae.sortIndex;return Se!==0?Se:pe.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var h=Date,y=h.now();t.unstable_now=function(){return h.now()-y}}var p=[],m=[],E=1,x=null,v=3,O=!1,V=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(pe){for(var Ae=n(m);Ae!==null;){if(Ae.callback===null)r(m);else if(Ae.startTime<=pe)r(m),Ae.sortIndex=Ae.expirationTime,e(p,Ae);else break;Ae=n(m)}}function q(pe){if(U=!1,N(pe),!V)if(n(p)!==null)V=!0,gt(ie);else{var Ae=n(m);Ae!==null&&Te(q,Ae.startTime-pe)}}function ie(pe,Ae){V=!1,U&&(U=!1,F(k),k=-1),O=!0;var Se=v;try{for(N(Ae),x=n(p);x!==null&&(!(x.expirationTime>Ae)||pe&&!W());){var ct=x.callback;if(typeof ct=="function"){x.callback=null,v=x.priorityLevel;var ze=ct(x.expirationTime<=Ae);Ae=t.unstable_now(),typeof ze=="function"?x.callback=ze:x===n(p)&&r(p),N(Ae)}else r(p);x=n(p)}if(x!==null)var wn=!0;else{var at=n(m);at!==null&&Te(q,at.startTime-Ae),wn=!1}return wn}finally{x=null,v=Se,O=!1}}var re=!1,P=null,k=-1,b=5,j=-1;function W(){return!(t.unstable_now()-j<b)}function X(){if(P!==null){var pe=t.unstable_now();j=pe;var Ae=!0;try{Ae=P(!0,pe)}finally{Ae?z():(re=!1,P=null)}}else re=!1}var z;if(typeof D=="function")z=function(){D(X)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,J=Le.port2;Le.port1.onmessage=X,z=function(){J.postMessage(null)}}else z=function(){H(X,0)};function gt(pe){P=pe,re||(re=!0,z())}function Te(pe,Ae){k=H(function(){pe(t.unstable_now())},Ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){V||O||(V=!0,gt(ie))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(pe){switch(v){case 1:case 2:case 3:var Ae=3;break;default:Ae=v}var Se=v;v=Ae;try{return pe()}finally{v=Se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,Ae){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Se=v;v=pe;try{return Ae()}finally{v=Se}},t.unstable_scheduleCallback=function(pe,Ae,Se){var ct=t.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?ct+Se:ct):Se=ct,pe){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Se+ze,pe={id:E++,callback:Ae,priorityLevel:pe,startTime:Se,expirationTime:ze,sortIndex:-1},Se>ct?(pe.sortIndex=Se,e(m,pe),n(p)===null&&pe===n(m)&&(U?(F(k),k=-1):U=!0,Te(q,Se-ct))):(pe.sortIndex=ze,e(p,pe),V||O||(V=!0,gt(ie))),pe},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(pe){var Ae=v;return function(){var Se=v;v=Ae;try{return pe.apply(this,arguments)}finally{v=Se}}}})(Fy);Ly.exports=Fy;var LI=Ly.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=ne,wr=LI;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,uu={};function zo(t,e){Ua(t,e),Ua(t+"Capture",e)}function Ua(t,e){for(uu[t]=e,t=0;t<e.length;t++)By.add(e[t])}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gd=Object.prototype.hasOwnProperty,BI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yp={},wp={};function VI(t){return Gd.call(wp,t)?!0:Gd.call(yp,t)?!1:BI.test(t)?wp[t]=!0:(yp[t]=!0,!1)}function UI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zI(t,e,n,r){if(e===null||typeof e>"u"||UI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jn(t,e,n,r,s,a,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=h}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tn[t]=new jn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tn[e]=new jn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tn[t]=new jn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tn[t]=new jn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tn[t]=new jn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tn[t]=new jn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tn[t]=new jn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tn[t]=new jn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tn[t]=new jn(t,5,!1,t.toLowerCase(),null,!1,!1)});var _0=/[\-:]([a-z])/g;function x0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_0,x0);Tn[e]=new jn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_0,x0);Tn[e]=new jn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_0,x0);Tn[e]=new jn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tn[t]=new jn(t,1,!1,t.toLowerCase(),null,!1,!1)});Tn.xlinkHref=new jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tn[t]=new jn(t,1,!1,t.toLowerCase(),null,!0,!0)});function A0(t,e,n,r){var s=Tn.hasOwnProperty(e)?Tn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zI(e,n,s,r)&&(n=null),r||s===null?VI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var os=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),Xd=Symbol.for("react.profiler"),Vy=Symbol.for("react.provider"),Uy=Symbol.for("react.context"),C0=Symbol.for("react.forward_ref"),Kd=Symbol.for("react.suspense"),qd=Symbol.for("react.suspense_list"),v0=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),zy=Symbol.for("react.offscreen"),Ep=Symbol.iterator;function Sl(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,nd;function Ll(t){if(nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nd=e&&e[1]||""}return`
`+nd+t}var rd=!1;function id(t,e){if(!t||rd)return"";rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),a=r.stack.split(`
`),h=s.length-1,y=a.length-1;1<=h&&0<=y&&s[h]!==a[y];)y--;for(;1<=h&&0<=y;h--,y--)if(s[h]!==a[y]){if(h!==1||y!==1)do if(h--,y--,0>y||s[h]!==a[y]){var p=`
`+s[h].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=h&&0<=y);break}}}finally{rd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ll(t):""}function jI(t){switch(t.tag){case 5:return Ll(t.type);case 16:return Ll("Lazy");case 13:return Ll("Suspense");case 19:return Ll("SuspenseList");case 0:case 2:case 15:return t=id(t.type,!1),t;case 11:return t=id(t.type.render,!1),t;case 1:return t=id(t.type,!0),t;default:return""}}function Yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ya:return"Fragment";case ma:return"Portal";case Xd:return"Profiler";case I0:return"StrictMode";case Kd:return"Suspense";case qd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uy:return(t.displayName||"Context")+".Consumer";case Vy:return(t._context.displayName||"Context")+".Provider";case C0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case v0:return e=t.displayName||null,e!==null?e:Yd(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return Yd(t(e))}catch{}}return null}function HI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yd(e);case 8:return e===I0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WI(t){var e=jy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(h){r=""+h,a.call(this,h)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fc(t){t._valueTracker||(t._valueTracker=WI(t))}function Hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ah(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qd(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _p(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wy(t,e){e=e.checked,e!=null&&A0(t,"checked",e,!1)}function $d(t,e){Wy(t,e);var n=Hs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zd(t,e.type,Hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zd(t,e,n){(e!=="number"||ah(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fl=Array.isArray;function ba(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ap(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(Fl(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hs(n)}}function Gy(t,e){var n=Hs(e.value),r=Hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ip(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dc,Ky=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dc=dc||document.createElement("div"),dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GI=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(t){GI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wl[e]=Wl[t]})});function qy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wl.hasOwnProperty(t)&&Wl[t]?(""+e).trim():e+"px"}function Yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var XI=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t1(t,e){if(e){if(XI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function n1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r1=null;function T0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var i1=null,Pa=null,Oa=null;function Cp(t){if(t=Uu(t)){if(typeof i1!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=hf(e),i1(t.stateNode,t.type,e))}}function Qy(t){Pa?Oa?Oa.push(t):Oa=[t]:Pa=t}function $y(){if(Pa){var t=Pa,e=Oa;if(Oa=Pa=null,Cp(t),e)for(t=0;t<e.length;t++)Cp(e[t])}}function Zy(t,e){return t(e)}function Jy(){}var sd=!1;function ew(t,e,n){if(sd)return t(e,n);sd=!0;try{return Zy(t,e,n)}finally{sd=!1,(Pa!==null||Oa!==null)&&(Jy(),$y())}}function hu(t,e){var n=t.stateNode;if(n===null)return null;var r=hf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var s1=!1;if($i)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){s1=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{s1=!1}function KI(t,e,n,r,s,a,h,y,p){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(E){this.onError(E)}}var Gl=!1,lh=null,uh=!1,o1=null,qI={onError:function(t){Gl=!0,lh=t}};function YI(t,e,n,r,s,a,h,y,p){Gl=!1,lh=null,KI.apply(qI,arguments)}function QI(t,e,n,r,s,a,h,y,p){if(YI.apply(this,arguments),Gl){if(Gl){var m=lh;Gl=!1,lh=null}else throw Error(ce(198));uh||(uh=!0,o1=m)}}function jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vp(t){if(jo(t)!==t)throw Error(ce(188))}function $I(t){var e=t.alternate;if(!e){if(e=jo(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return vp(s),t;if(a===r)return vp(s),e;a=a.sibling}throw Error(ce(188))}if(n.return!==r.return)n=s,r=a;else{for(var h=!1,y=s.child;y;){if(y===n){h=!0,n=s,r=a;break}if(y===r){h=!0,r=s,n=a;break}y=y.sibling}if(!h){for(y=a.child;y;){if(y===n){h=!0,n=a,r=s;break}if(y===r){h=!0,r=a,n=s;break}y=y.sibling}if(!h)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function nw(t){return t=$I(t),t!==null?rw(t):null}function rw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rw(t);if(e!==null)return e;t=t.sibling}return null}var iw=wr.unstable_scheduleCallback,Tp=wr.unstable_cancelCallback,ZI=wr.unstable_shouldYield,JI=wr.unstable_requestPaint,Xt=wr.unstable_now,eC=wr.unstable_getCurrentPriorityLevel,S0=wr.unstable_ImmediatePriority,sw=wr.unstable_UserBlockingPriority,ch=wr.unstable_NormalPriority,tC=wr.unstable_LowPriority,ow=wr.unstable_IdlePriority,af=null,mi=null;function nC(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(af,t,void 0,(t.current.flags&128)===128)}catch{}}var $r=Math.clz32?Math.clz32:sC,rC=Math.log,iC=Math.LN2;function sC(t){return t>>>=0,t===0?32:31-(rC(t)/iC|0)|0}var gc=64,pc=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,h=n&268435455;if(h!==0){var y=h&~s;y!==0?r=Bl(y):(a&=h,a!==0&&(r=Bl(a)))}else h=n&~s,h!==0?r=Bl(h):a!==0&&(r=Bl(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$r(e),s=1<<n,r|=t[n],e&=~s;return r}function oC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var h=31-$r(a),y=1<<h,p=s[h];p===-1?(!(y&n)||y&r)&&(s[h]=oC(y,e)):p<=e&&(t.expiredLanes|=y),a&=~y}}function a1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aw(){var t=gc;return gc<<=1,!(gc&4194240)&&(gc=64),t}function od(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$r(e),t[e]=n}function lC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$r(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function R0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$r(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ft=0;function lw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uw,N0,cw,hw,fw,l1=!1,mc=[],Ps=null,Os=null,Ds=null,fu=new Map,du=new Map,Is=[],uC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sp(t,e){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(e.pointerId)}}function Nl(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Uu(e),e!==null&&N0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cC(t,e,n,r,s){switch(e){case"focusin":return Ps=Nl(Ps,t,e,n,r,s),!0;case"dragenter":return Os=Nl(Os,t,e,n,r,s),!0;case"mouseover":return Ds=Nl(Ds,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return fu.set(a,Nl(fu.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,du.set(a,Nl(du.get(a)||null,t,e,n,r,s)),!0}return!1}function dw(t){var e=Eo(t.target);if(e!==null){var n=jo(e);if(n!==null){if(e=n.tag,e===13){if(e=tw(n),e!==null){t.blockedOn=e,fw(t.priority,function(){cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=u1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);r1=r,n.target.dispatchEvent(r),r1=null}else return e=Uu(n),e!==null&&N0(e),t.blockedOn=n,!1;e.shift()}return!0}function Rp(t,e,n){Bc(t)&&n.delete(e)}function hC(){l1=!1,Ps!==null&&Bc(Ps)&&(Ps=null),Os!==null&&Bc(Os)&&(Os=null),Ds!==null&&Bc(Ds)&&(Ds=null),fu.forEach(Rp),du.forEach(Rp)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,l1||(l1=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,hC)))}function gu(t){function e(s){return bl(s,t)}if(0<mc.length){bl(mc[0],t);for(var n=1;n<mc.length;n++){var r=mc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ps!==null&&bl(Ps,t),Os!==null&&bl(Os,t),Ds!==null&&bl(Ds,t),fu.forEach(e),du.forEach(e),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)dw(n),n.blockedOn===null&&Is.shift()}var Da=os.ReactCurrentBatchConfig,fh=!0;function fC(t,e,n,r){var s=ft,a=Da.transition;Da.transition=null;try{ft=1,b0(t,e,n,r)}finally{ft=s,Da.transition=a}}function dC(t,e,n,r){var s=ft,a=Da.transition;Da.transition=null;try{ft=4,b0(t,e,n,r)}finally{ft=s,Da.transition=a}}function b0(t,e,n,r){if(fh){var s=u1(t,e,n,r);if(s===null)md(t,e,r,dh,n),Sp(t,r);else if(cC(s,t,e,n,r))r.stopPropagation();else if(Sp(t,r),e&4&&-1<uC.indexOf(t)){for(;s!==null;){var a=Uu(s);if(a!==null&&uw(a),a=u1(t,e,n,r),a===null&&md(t,e,r,dh,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else md(t,e,r,null,n)}}var dh=null;function u1(t,e,n,r){if(dh=null,t=T0(r),t=Eo(t),t!==null)if(e=jo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dh=t,null}function gw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eC()){case S0:return 1;case sw:return 4;case ch:case tC:return 16;case ow:return 536870912;default:return 16}default:return 16}}var Rs=null,P0=null,Vc=null;function pw(){if(Vc)return Vc;var t,e=P0,n=e.length,r,s="value"in Rs?Rs.value:Rs.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var h=n-t;for(r=1;r<=h&&e[n-r]===s[a-r];r++);return Vc=s.slice(t,1<r?1-r:void 0)}function Uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function Np(){return!1}function _r(t){function e(n,r,s,a,h){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=h,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(n=t[y],this[y]=n?n(a):a[y]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yc:Np,this.isPropagationStopped=Np,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O0=_r(tl),Vu=kt({},tl,{view:0,detail:0}),gC=_r(Vu),ad,ld,Pl,lf=kt({},Vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pl&&(Pl&&t.type==="mousemove"?(ad=t.screenX-Pl.screenX,ld=t.screenY-Pl.screenY):ld=ad=0,Pl=t),ad)},movementY:function(t){return"movementY"in t?t.movementY:ld}}),bp=_r(lf),pC=kt({},lf,{dataTransfer:0}),mC=_r(pC),yC=kt({},Vu,{relatedTarget:0}),ud=_r(yC),wC=kt({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),EC=_r(wC),_C=kt({},tl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xC=_r(_C),AC=kt({},tl,{data:0}),Pp=_r(AC),IC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vC[t])?!!e[t]:!1}function D0(){return TC}var SC=kt({},Vu,{key:function(t){if(t.key){var e=IC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D0,charCode:function(t){return t.type==="keypress"?Uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RC=_r(SC),NC=kt({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Op=_r(NC),bC=kt({},Vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D0}),PC=_r(bC),OC=kt({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),DC=_r(OC),kC=kt({},lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MC=_r(kC),LC=[9,13,27,32],k0=$i&&"CompositionEvent"in window,Xl=null;$i&&"documentMode"in document&&(Xl=document.documentMode);var FC=$i&&"TextEvent"in window&&!Xl,mw=$i&&(!k0||Xl&&8<Xl&&11>=Xl),Dp=" ",kp=!1;function yw(t,e){switch(t){case"keyup":return LC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ww(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wa=!1;function BC(t,e){switch(t){case"compositionend":return ww(e);case"keypress":return e.which!==32?null:(kp=!0,Dp);case"textInput":return t=e.data,t===Dp&&kp?null:t;default:return null}}function VC(t,e){if(wa)return t==="compositionend"||!k0&&yw(t,e)?(t=pw(),Vc=P0=Rs=null,wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mw&&e.locale!=="ko"?null:e.data;default:return null}}var UC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UC[t.type]:e==="textarea"}function Ew(t,e,n,r){Qy(r),e=gh(e,"onChange"),0<e.length&&(n=new O0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kl=null,pu=null;function zC(t){bw(t,0)}function uf(t){var e=xa(t);if(Hy(e))return t}function jC(t,e){if(t==="change")return e}var _w=!1;if($i){var cd;if($i){var hd="oninput"in document;if(!hd){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),hd=typeof Lp.oninput=="function"}cd=hd}else cd=!1;_w=cd&&(!document.documentMode||9<document.documentMode)}function Fp(){Kl&&(Kl.detachEvent("onpropertychange",xw),pu=Kl=null)}function xw(t){if(t.propertyName==="value"&&uf(pu)){var e=[];Ew(e,pu,t,T0(t)),ew(zC,e)}}function HC(t,e,n){t==="focusin"?(Fp(),Kl=e,pu=n,Kl.attachEvent("onpropertychange",xw)):t==="focusout"&&Fp()}function WC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uf(pu)}function GC(t,e){if(t==="click")return uf(e)}function XC(t,e){if(t==="input"||t==="change")return uf(e)}function KC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ei=typeof Object.is=="function"?Object.is:KC;function mu(t,e){if(ei(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gd.call(e,s)||!ei(t[s],e[s]))return!1}return!0}function Bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vp(t,e){var n=Bp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bp(n)}}function Aw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Aw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Iw(){for(var t=window,e=ah();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ah(t.document)}return e}function M0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qC(t){var e=Iw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Aw(n.ownerDocument.documentElement,n)){if(r!==null&&M0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=Vp(n,a);var h=Vp(n,r);s&&h&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YC=$i&&"documentMode"in document&&11>=document.documentMode,Ea=null,c1=null,ql=null,h1=!1;function Up(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;h1||Ea==null||Ea!==ah(r)||(r=Ea,"selectionStart"in r&&M0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ql&&mu(ql,r)||(ql=r,r=gh(c1,"onSelect"),0<r.length&&(e=new O0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ea)))}function wc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _a={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},fd={},Cw={};$i&&(Cw=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function cf(t){if(fd[t])return fd[t];if(!_a[t])return t;var e=_a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cw)return fd[t]=e[n];return t}var vw=cf("animationend"),Tw=cf("animationiteration"),Sw=cf("animationstart"),Rw=cf("transitionend"),Nw=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(t,e){Nw.set(t,e),zo(e,[t])}for(var dd=0;dd<zp.length;dd++){var gd=zp[dd],QC=gd.toLowerCase(),$C=gd[0].toUpperCase()+gd.slice(1);Zs(QC,"on"+$C)}Zs(vw,"onAnimationEnd");Zs(Tw,"onAnimationIteration");Zs(Sw,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs(Rw,"onTransitionEnd");Ua("onMouseEnter",["mouseout","mouseover"]);Ua("onMouseLeave",["mouseout","mouseover"]);Ua("onPointerEnter",["pointerout","pointerover"]);Ua("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vl));function jp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QI(r,e,void 0,t),t.currentTarget=null}function bw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var h=r.length-1;0<=h;h--){var y=r[h],p=y.instance,m=y.currentTarget;if(y=y.listener,p!==a&&s.isPropagationStopped())break e;jp(s,y,m),a=p}else for(h=0;h<r.length;h++){if(y=r[h],p=y.instance,m=y.currentTarget,y=y.listener,p!==a&&s.isPropagationStopped())break e;jp(s,y,m),a=p}}}if(uh)throw t=o1,uh=!1,o1=null,t}function It(t,e){var n=e[m1];n===void 0&&(n=e[m1]=new Set);var r=t+"__bubble";n.has(r)||(Pw(e,t,2,!1),n.add(r))}function pd(t,e,n){var r=0;e&&(r|=4),Pw(n,t,r,e)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[Ec]){t[Ec]=!0,By.forEach(function(n){n!=="selectionchange"&&(ZC.has(n)||pd(n,!1,t),pd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ec]||(e[Ec]=!0,pd("selectionchange",!1,e))}}function Pw(t,e,n,r){switch(gw(e)){case 1:var s=fC;break;case 4:s=dC;break;default:s=b0}n=s.bind(null,e,n,t),s=void 0,!s1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function md(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var y=r.stateNode.containerInfo;if(y===s||y.nodeType===8&&y.parentNode===s)break;if(h===4)for(h=r.return;h!==null;){var p=h.tag;if((p===3||p===4)&&(p=h.stateNode.containerInfo,p===s||p.nodeType===8&&p.parentNode===s))return;h=h.return}for(;y!==null;){if(h=Eo(y),h===null)return;if(p=h.tag,p===5||p===6){r=a=h;continue e}y=y.parentNode}}r=r.return}ew(function(){var m=a,E=T0(n),x=[];e:{var v=Nw.get(t);if(v!==void 0){var O=O0,V=t;switch(t){case"keypress":if(Uc(n)===0)break e;case"keydown":case"keyup":O=RC;break;case"focusin":V="focus",O=ud;break;case"focusout":V="blur",O=ud;break;case"beforeblur":case"afterblur":O=ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=mC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=PC;break;case vw:case Tw:case Sw:O=EC;break;case Rw:O=DC;break;case"scroll":O=gC;break;case"wheel":O=MC;break;case"copy":case"cut":case"paste":O=xC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Op}var U=(e&4)!==0,H=!U&&t==="scroll",F=U?v!==null?v+"Capture":null:v;U=[];for(var D=m,N;D!==null;){N=D;var q=N.stateNode;if(N.tag===5&&q!==null&&(N=q,F!==null&&(q=hu(D,F),q!=null&&U.push(wu(D,q,N)))),H)break;D=D.return}0<U.length&&(v=new O(v,V,null,n,E),x.push({event:v,listeners:U}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",v&&n!==r1&&(V=n.relatedTarget||n.fromElement)&&(Eo(V)||V[Zi]))break e;if((O||v)&&(v=E.window===E?E:(v=E.ownerDocument)?v.defaultView||v.parentWindow:window,O?(V=n.relatedTarget||n.toElement,O=m,V=V?Eo(V):null,V!==null&&(H=jo(V),V!==H||V.tag!==5&&V.tag!==6)&&(V=null)):(O=null,V=m),O!==V)){if(U=bp,q="onMouseLeave",F="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(U=Op,q="onPointerLeave",F="onPointerEnter",D="pointer"),H=O==null?v:xa(O),N=V==null?v:xa(V),v=new U(q,D+"leave",O,n,E),v.target=H,v.relatedTarget=N,q=null,Eo(E)===m&&(U=new U(F,D+"enter",V,n,E),U.target=N,U.relatedTarget=H,q=U),H=q,O&&V)t:{for(U=O,F=V,D=0,N=U;N;N=ha(N))D++;for(N=0,q=F;q;q=ha(q))N++;for(;0<D-N;)U=ha(U),D--;for(;0<N-D;)F=ha(F),N--;for(;D--;){if(U===F||F!==null&&U===F.alternate)break t;U=ha(U),F=ha(F)}U=null}else U=null;O!==null&&Hp(x,v,O,U,!1),V!==null&&H!==null&&Hp(x,H,V,U,!0)}}e:{if(v=m?xa(m):window,O=v.nodeName&&v.nodeName.toLowerCase(),O==="select"||O==="input"&&v.type==="file")var ie=jC;else if(Mp(v))if(_w)ie=XC;else{ie=WC;var re=HC}else(O=v.nodeName)&&O.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(ie=GC);if(ie&&(ie=ie(t,m))){Ew(x,ie,n,E);break e}re&&re(t,v,m),t==="focusout"&&(re=v._wrapperState)&&re.controlled&&v.type==="number"&&Zd(v,"number",v.value)}switch(re=m?xa(m):window,t){case"focusin":(Mp(re)||re.contentEditable==="true")&&(Ea=re,c1=m,ql=null);break;case"focusout":ql=c1=Ea=null;break;case"mousedown":h1=!0;break;case"contextmenu":case"mouseup":case"dragend":h1=!1,Up(x,n,E);break;case"selectionchange":if(YC)break;case"keydown":case"keyup":Up(x,n,E)}var P;if(k0)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else wa?yw(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(mw&&n.locale!=="ko"&&(wa||k!=="onCompositionStart"?k==="onCompositionEnd"&&wa&&(P=pw()):(Rs=E,P0="value"in Rs?Rs.value:Rs.textContent,wa=!0)),re=gh(m,k),0<re.length&&(k=new Pp(k,t,null,n,E),x.push({event:k,listeners:re}),P?k.data=P:(P=ww(n),P!==null&&(k.data=P)))),(P=FC?BC(t,n):VC(t,n))&&(m=gh(m,"onBeforeInput"),0<m.length&&(E=new Pp("onBeforeInput","beforeinput",null,n,E),x.push({event:E,listeners:m}),E.data=P))}bw(x,e)})}function wu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=hu(t,n),a!=null&&r.unshift(wu(t,a,s)),a=hu(t,e),a!=null&&r.push(wu(t,a,s))),t=t.return}return r}function ha(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hp(t,e,n,r,s){for(var a=e._reactName,h=[];n!==null&&n!==r;){var y=n,p=y.alternate,m=y.stateNode;if(p!==null&&p===r)break;y.tag===5&&m!==null&&(y=m,s?(p=hu(n,a),p!=null&&h.unshift(wu(n,p,y))):s||(p=hu(n,a),p!=null&&h.push(wu(n,p,y)))),n=n.return}h.length!==0&&t.push({event:e,listeners:h})}var JC=/\r\n?/g,ev=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(JC,`
`).replace(ev,"")}function _c(t,e,n){if(e=Wp(e),Wp(t)!==e&&n)throw Error(ce(425))}function ph(){}var f1=null,d1=null;function g1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var p1=typeof setTimeout=="function"?setTimeout:void 0,tv=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,nv=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(t){return Gp.resolve(null).then(t).catch(rv)}:p1;function rv(t){setTimeout(function(){throw t})}function yd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gu(e)}function ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nl=Math.random().toString(36).slice(2),pi="__reactFiber$"+nl,Eu="__reactProps$"+nl,Zi="__reactContainer$"+nl,m1="__reactEvents$"+nl,iv="__reactListeners$"+nl,sv="__reactHandles$"+nl;function Eo(t){var e=t[pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[pi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xp(t);t!==null;){if(n=t[pi])return n;t=Xp(t)}return e}t=n,n=t.parentNode}return null}function Uu(t){return t=t[pi]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function hf(t){return t[Eu]||null}var y1=[],Aa=-1;function Js(t){return{current:t}}function Tt(t){0>Aa||(t.current=y1[Aa],y1[Aa]=null,Aa--)}function Et(t,e){Aa++,y1[Aa]=t.current,t.current=e}var Ws={},Mn=Js(Ws),Jn=Js(!1),No=Ws;function za(t,e){var n=t.type.contextTypes;if(!n)return Ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function er(t){return t=t.childContextTypes,t!=null}function mh(){Tt(Jn),Tt(Mn)}function Kp(t,e,n){if(Mn.current!==Ws)throw Error(ce(168));Et(Mn,e),Et(Jn,n)}function Ow(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ce(108,HI(t)||"Unknown",s));return kt({},n,r)}function yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ws,No=Mn.current,Et(Mn,t),Et(Jn,Jn.current),!0}function qp(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=Ow(t,e,No),r.__reactInternalMemoizedMergedChildContext=t,Tt(Jn),Tt(Mn),Et(Mn,t)):Tt(Jn),Et(Jn,n)}var Hi=null,ff=!1,wd=!1;function Dw(t){Hi===null?Hi=[t]:Hi.push(t)}function ov(t){ff=!0,Dw(t)}function eo(){if(!wd&&Hi!==null){wd=!0;var t=0,e=ft;try{var n=Hi;for(ft=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hi=null,ff=!1}catch(s){throw Hi!==null&&(Hi=Hi.slice(t+1)),iw(S0,eo),s}finally{ft=e,wd=!1}}return null}var Ia=[],Ca=0,wh=null,Eh=0,br=[],Pr=0,bo=null,Gi=1,Xi="";function mo(t,e){Ia[Ca++]=Eh,Ia[Ca++]=wh,wh=t,Eh=e}function kw(t,e,n){br[Pr++]=Gi,br[Pr++]=Xi,br[Pr++]=bo,bo=t;var r=Gi;t=Xi;var s=32-$r(r)-1;r&=~(1<<s),n+=1;var a=32-$r(e)+s;if(30<a){var h=s-s%5;a=(r&(1<<h)-1).toString(32),r>>=h,s-=h,Gi=1<<32-$r(e)+s|n<<s|r,Xi=a+t}else Gi=1<<a|n<<s|r,Xi=t}function L0(t){t.return!==null&&(mo(t,1),kw(t,1,0))}function F0(t){for(;t===wh;)wh=Ia[--Ca],Ia[Ca]=null,Eh=Ia[--Ca],Ia[Ca]=null;for(;t===bo;)bo=br[--Pr],br[Pr]=null,Xi=br[--Pr],br[Pr]=null,Gi=br[--Pr],br[Pr]=null}var mr=null,gr=null,St=!1,qr=null;function Mw(t,e){var n=kr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mr=t,gr=ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mr=t,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bo!==null?{id:Gi,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mr=t,gr=null,!0):!1;default:return!1}}function w1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function E1(t){if(St){var e=gr;if(e){var n=e;if(!Yp(t,e)){if(w1(t))throw Error(ce(418));e=ks(n.nextSibling);var r=mr;e&&Yp(t,e)?Mw(r,n):(t.flags=t.flags&-4097|2,St=!1,mr=t)}}else{if(w1(t))throw Error(ce(418));t.flags=t.flags&-4097|2,St=!1,mr=t}}}function Qp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mr=t}function xc(t){if(t!==mr)return!1;if(!St)return Qp(t),St=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!g1(t.type,t.memoizedProps)),e&&(e=gr)){if(w1(t))throw Lw(),Error(ce(418));for(;e;)Mw(t,e),e=ks(e.nextSibling)}if(Qp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gr=ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gr=null}}else gr=mr?ks(t.stateNode.nextSibling):null;return!0}function Lw(){for(var t=gr;t;)t=ks(t.nextSibling)}function ja(){gr=mr=null,St=!1}function B0(t){qr===null?qr=[t]:qr.push(t)}var av=os.ReactCurrentBatchConfig;function Ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(h){var y=s.refs;h===null?delete y[a]:y[a]=h},e._stringRef=a,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Ac(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $p(t){var e=t._init;return e(t._payload)}function Fw(t){function e(F,D){if(t){var N=F.deletions;N===null?(F.deletions=[D],F.flags|=16):N.push(D)}}function n(F,D){if(!t)return null;for(;D!==null;)e(F,D),D=D.sibling;return null}function r(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function s(F,D){return F=Bs(F,D),F.index=0,F.sibling=null,F}function a(F,D,N){return F.index=N,t?(N=F.alternate,N!==null?(N=N.index,N<D?(F.flags|=2,D):N):(F.flags|=2,D)):(F.flags|=1048576,D)}function h(F){return t&&F.alternate===null&&(F.flags|=2),F}function y(F,D,N,q){return D===null||D.tag!==6?(D=vd(N,F.mode,q),D.return=F,D):(D=s(D,N),D.return=F,D)}function p(F,D,N,q){var ie=N.type;return ie===ya?E(F,D,N.props.children,q,N.key):D!==null&&(D.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===xs&&$p(ie)===D.type)?(q=s(D,N.props),q.ref=Ol(F,D,N),q.return=F,q):(q=Kc(N.type,N.key,N.props,null,F.mode,q),q.ref=Ol(F,D,N),q.return=F,q)}function m(F,D,N,q){return D===null||D.tag!==4||D.stateNode.containerInfo!==N.containerInfo||D.stateNode.implementation!==N.implementation?(D=Td(N,F.mode,q),D.return=F,D):(D=s(D,N.children||[]),D.return=F,D)}function E(F,D,N,q,ie){return D===null||D.tag!==7?(D=To(N,F.mode,q,ie),D.return=F,D):(D=s(D,N),D.return=F,D)}function x(F,D,N){if(typeof D=="string"&&D!==""||typeof D=="number")return D=vd(""+D,F.mode,N),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case hc:return N=Kc(D.type,D.key,D.props,null,F.mode,N),N.ref=Ol(F,null,D),N.return=F,N;case ma:return D=Td(D,F.mode,N),D.return=F,D;case xs:var q=D._init;return x(F,q(D._payload),N)}if(Fl(D)||Sl(D))return D=To(D,F.mode,N,null),D.return=F,D;Ac(F,D)}return null}function v(F,D,N,q){var ie=D!==null?D.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return ie!==null?null:y(F,D,""+N,q);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case hc:return N.key===ie?p(F,D,N,q):null;case ma:return N.key===ie?m(F,D,N,q):null;case xs:return ie=N._init,v(F,D,ie(N._payload),q)}if(Fl(N)||Sl(N))return ie!==null?null:E(F,D,N,q,null);Ac(F,N)}return null}function O(F,D,N,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number")return F=F.get(N)||null,y(D,F,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case hc:return F=F.get(q.key===null?N:q.key)||null,p(D,F,q,ie);case ma:return F=F.get(q.key===null?N:q.key)||null,m(D,F,q,ie);case xs:var re=q._init;return O(F,D,N,re(q._payload),ie)}if(Fl(q)||Sl(q))return F=F.get(N)||null,E(D,F,q,ie,null);Ac(D,q)}return null}function V(F,D,N,q){for(var ie=null,re=null,P=D,k=D=0,b=null;P!==null&&k<N.length;k++){P.index>k?(b=P,P=null):b=P.sibling;var j=v(F,P,N[k],q);if(j===null){P===null&&(P=b);break}t&&P&&j.alternate===null&&e(F,P),D=a(j,D,k),re===null?ie=j:re.sibling=j,re=j,P=b}if(k===N.length)return n(F,P),St&&mo(F,k),ie;if(P===null){for(;k<N.length;k++)P=x(F,N[k],q),P!==null&&(D=a(P,D,k),re===null?ie=P:re.sibling=P,re=P);return St&&mo(F,k),ie}for(P=r(F,P);k<N.length;k++)b=O(P,F,k,N[k],q),b!==null&&(t&&b.alternate!==null&&P.delete(b.key===null?k:b.key),D=a(b,D,k),re===null?ie=b:re.sibling=b,re=b);return t&&P.forEach(function(W){return e(F,W)}),St&&mo(F,k),ie}function U(F,D,N,q){var ie=Sl(N);if(typeof ie!="function")throw Error(ce(150));if(N=ie.call(N),N==null)throw Error(ce(151));for(var re=ie=null,P=D,k=D=0,b=null,j=N.next();P!==null&&!j.done;k++,j=N.next()){P.index>k?(b=P,P=null):b=P.sibling;var W=v(F,P,j.value,q);if(W===null){P===null&&(P=b);break}t&&P&&W.alternate===null&&e(F,P),D=a(W,D,k),re===null?ie=W:re.sibling=W,re=W,P=b}if(j.done)return n(F,P),St&&mo(F,k),ie;if(P===null){for(;!j.done;k++,j=N.next())j=x(F,j.value,q),j!==null&&(D=a(j,D,k),re===null?ie=j:re.sibling=j,re=j);return St&&mo(F,k),ie}for(P=r(F,P);!j.done;k++,j=N.next())j=O(P,F,k,j.value,q),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?k:j.key),D=a(j,D,k),re===null?ie=j:re.sibling=j,re=j);return t&&P.forEach(function(X){return e(F,X)}),St&&mo(F,k),ie}function H(F,D,N,q){if(typeof N=="object"&&N!==null&&N.type===ya&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case hc:e:{for(var ie=N.key,re=D;re!==null;){if(re.key===ie){if(ie=N.type,ie===ya){if(re.tag===7){n(F,re.sibling),D=s(re,N.props.children),D.return=F,F=D;break e}}else if(re.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===xs&&$p(ie)===re.type){n(F,re.sibling),D=s(re,N.props),D.ref=Ol(F,re,N),D.return=F,F=D;break e}n(F,re);break}else e(F,re);re=re.sibling}N.type===ya?(D=To(N.props.children,F.mode,q,N.key),D.return=F,F=D):(q=Kc(N.type,N.key,N.props,null,F.mode,q),q.ref=Ol(F,D,N),q.return=F,F=q)}return h(F);case ma:e:{for(re=N.key;D!==null;){if(D.key===re)if(D.tag===4&&D.stateNode.containerInfo===N.containerInfo&&D.stateNode.implementation===N.implementation){n(F,D.sibling),D=s(D,N.children||[]),D.return=F,F=D;break e}else{n(F,D);break}else e(F,D);D=D.sibling}D=Td(N,F.mode,q),D.return=F,F=D}return h(F);case xs:return re=N._init,H(F,D,re(N._payload),q)}if(Fl(N))return V(F,D,N,q);if(Sl(N))return U(F,D,N,q);Ac(F,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,D!==null&&D.tag===6?(n(F,D.sibling),D=s(D,N),D.return=F,F=D):(n(F,D),D=vd(N,F.mode,q),D.return=F,F=D),h(F)):n(F,D)}return H}var Ha=Fw(!0),Bw=Fw(!1),_h=Js(null),xh=null,va=null,V0=null;function U0(){V0=va=xh=null}function z0(t){var e=_h.current;Tt(_h),t._currentValue=e}function _1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ka(t,e){xh=t,V0=va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zn=!0),t.firstContext=null)}function Lr(t){var e=t._currentValue;if(V0!==t)if(t={context:t,memoizedValue:e,next:null},va===null){if(xh===null)throw Error(ce(308));va=t,xh.dependencies={lanes:0,firstContext:t}}else va=va.next=t;return e}var _o=null;function j0(t){_o===null?_o=[t]:_o.push(t)}function Vw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,j0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ji(t,r)}function Ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var As=!1;function H0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ji(t,n)}return s=r.interleaved,s===null?(e.next=e,j0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ji(t,n)}function zc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,R0(t,n)}}function Zp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=h:a=a.next=h,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ah(t,e,n,r){var s=t.updateQueue;As=!1;var a=s.firstBaseUpdate,h=s.lastBaseUpdate,y=s.shared.pending;if(y!==null){s.shared.pending=null;var p=y,m=p.next;p.next=null,h===null?a=m:h.next=m,h=p;var E=t.alternate;E!==null&&(E=E.updateQueue,y=E.lastBaseUpdate,y!==h&&(y===null?E.firstBaseUpdate=m:y.next=m,E.lastBaseUpdate=p))}if(a!==null){var x=s.baseState;h=0,E=m=p=null,y=a;do{var v=y.lane,O=y.eventTime;if((r&v)===v){E!==null&&(E=E.next={eventTime:O,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var V=t,U=y;switch(v=e,O=n,U.tag){case 1:if(V=U.payload,typeof V=="function"){x=V.call(O,x,v);break e}x=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=U.payload,v=typeof V=="function"?V.call(O,x,v):V,v==null)break e;x=kt({},x,v);break e;case 2:As=!0}}y.callback!==null&&y.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[y]:v.push(y))}else O={eventTime:O,lane:v,tag:y.tag,payload:y.payload,callback:y.callback,next:null},E===null?(m=E=O,p=x):E=E.next=O,h|=v;if(y=y.next,y===null){if(y=s.shared.pending,y===null)break;v=y,y=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(E===null&&(p=x),s.baseState=p,s.firstBaseUpdate=m,s.lastBaseUpdate=E,e=s.shared.interleaved,e!==null){s=e;do h|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Oo|=h,t.lanes=h,t.memoizedState=x}}function Jp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ce(191,s));s.call(r)}}}var zu={},yi=Js(zu),_u=Js(zu),xu=Js(zu);function xo(t){if(t===zu)throw Error(ce(174));return t}function W0(t,e){switch(Et(xu,e),Et(_u,t),Et(yi,zu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:e1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=e1(e,t)}Tt(yi),Et(yi,e)}function Wa(){Tt(yi),Tt(_u),Tt(xu)}function zw(t){xo(xu.current);var e=xo(yi.current),n=e1(e,t.type);e!==n&&(Et(_u,t),Et(yi,n))}function G0(t){_u.current===t&&(Tt(yi),Tt(_u))}var bt=Js(0);function Ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ed=[];function X0(){for(var t=0;t<Ed.length;t++)Ed[t]._workInProgressVersionPrimary=null;Ed.length=0}var jc=os.ReactCurrentDispatcher,_d=os.ReactCurrentBatchConfig,Po=0,Ot=null,sn=null,pn=null,Ch=!1,Yl=!1,Au=0,lv=0;function Nn(){throw Error(ce(321))}function K0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ei(t[n],e[n]))return!1;return!0}function q0(t,e,n,r,s,a){if(Po=a,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jc.current=t===null||t.memoizedState===null?fv:dv,t=n(r,s),Yl){a=0;do{if(Yl=!1,Au=0,25<=a)throw Error(ce(301));a+=1,pn=sn=null,e.updateQueue=null,jc.current=gv,t=n(r,s)}while(Yl)}if(jc.current=vh,e=sn!==null&&sn.next!==null,Po=0,pn=sn=Ot=null,Ch=!1,e)throw Error(ce(300));return t}function Y0(){var t=Au!==0;return Au=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Ot.memoizedState=pn=t:pn=pn.next=t,pn}function Fr(){if(sn===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=pn===null?Ot.memoizedState:pn.next;if(e!==null)pn=e,sn=t;else{if(t===null)throw Error(ce(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},pn===null?Ot.memoizedState=pn=t:pn=pn.next=t}return pn}function Iu(t,e){return typeof e=="function"?e(t):e}function xd(t){var e=Fr(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=sn,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var h=s.next;s.next=a.next,a.next=h}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var y=h=null,p=null,m=a;do{var E=m.lane;if((Po&E)===E)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var x={lane:E,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(y=p=x,h=r):p=p.next=x,Ot.lanes|=E,Oo|=E}m=m.next}while(m!==null&&m!==a);p===null?h=r:p.next=y,ei(r,e.memoizedState)||(Zn=!0),e.memoizedState=r,e.baseState=h,e.baseQueue=p,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ot.lanes|=a,Oo|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ad(t){var e=Fr(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var h=s=s.next;do a=t(a,h.action),h=h.next;while(h!==s);ei(a,e.memoizedState)||(Zn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function jw(){}function Hw(t,e){var n=Ot,r=Fr(),s=e(),a=!ei(r.memoizedState,s);if(a&&(r.memoizedState=s,Zn=!0),r=r.queue,Q0(Xw.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,Cu(9,Gw.bind(null,n,r,s,e),void 0,null),mn===null)throw Error(ce(349));Po&30||Ww(n,e,s)}return s}function Ww(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gw(t,e,n,r){e.value=n,e.getSnapshot=r,Kw(e)&&qw(t)}function Xw(t,e,n){return n(function(){Kw(e)&&qw(t)})}function Kw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ei(t,n)}catch{return!0}}function qw(t){var e=Ji(t,1);e!==null&&Zr(e,t,1,-1)}function em(t){var e=di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:t},e.queue=t,t=t.dispatch=hv.bind(null,Ot,t),[e.memoizedState,t]}function Cu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yw(){return Fr().memoizedState}function Hc(t,e,n,r){var s=di();Ot.flags|=t,s.memoizedState=Cu(1|e,n,void 0,r===void 0?null:r)}function df(t,e,n,r){var s=Fr();r=r===void 0?null:r;var a=void 0;if(sn!==null){var h=sn.memoizedState;if(a=h.destroy,r!==null&&K0(r,h.deps)){s.memoizedState=Cu(e,n,a,r);return}}Ot.flags|=t,s.memoizedState=Cu(1|e,n,a,r)}function tm(t,e){return Hc(8390656,8,t,e)}function Q0(t,e){return df(2048,8,t,e)}function Qw(t,e){return df(4,2,t,e)}function $w(t,e){return df(4,4,t,e)}function Zw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jw(t,e,n){return n=n!=null?n.concat([t]):null,df(4,4,Zw.bind(null,e,t),n)}function $0(){}function eE(t,e){var n=Fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&K0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tE(t,e){var n=Fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&K0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nE(t,e,n){return Po&21?(ei(n,e)||(n=aw(),Ot.lanes|=n,Oo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zn=!0),t.memoizedState=n)}function uv(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var r=_d.transition;_d.transition={};try{t(!1),e()}finally{ft=n,_d.transition=r}}function rE(){return Fr().memoizedState}function cv(t,e,n){var r=Fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iE(t))sE(e,n);else if(n=Vw(t,e,n,r),n!==null){var s=Un();Zr(n,t,r,s),oE(n,e,r)}}function hv(t,e,n){var r=Fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iE(t))sE(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var h=e.lastRenderedState,y=a(h,n);if(s.hasEagerState=!0,s.eagerState=y,ei(y,h)){var p=e.interleaved;p===null?(s.next=s,j0(e)):(s.next=p.next,p.next=s),e.interleaved=s;return}}catch{}finally{}n=Vw(t,e,s,r),n!==null&&(s=Un(),Zr(n,t,r,s),oE(n,e,r))}}function iE(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function sE(t,e){Yl=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,R0(t,n)}}var vh={readContext:Lr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},fv={readContext:Lr,useCallback:function(t,e){return di().memoizedState=[t,e===void 0?null:e],t},useContext:Lr,useEffect:tm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4194308,4,Zw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hc(4,2,t,e)},useMemo:function(t,e){var n=di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cv.bind(null,Ot,t),[r.memoizedState,t]},useRef:function(t){var e=di();return t={current:t},e.memoizedState=t},useState:em,useDebugValue:$0,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=em(!1),e=t[0];return t=uv.bind(null,t[1]),di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ot,s=di();if(St){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),mn===null)throw Error(ce(349));Po&30||Ww(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,tm(Xw.bind(null,r,a,t),[t]),r.flags|=2048,Cu(9,Gw.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=di(),e=mn.identifierPrefix;if(St){var n=Xi,r=Gi;n=(r&~(1<<32-$r(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Au++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dv={readContext:Lr,useCallback:eE,useContext:Lr,useEffect:Q0,useImperativeHandle:Jw,useInsertionEffect:Qw,useLayoutEffect:$w,useMemo:tE,useReducer:xd,useRef:Yw,useState:function(){return xd(Iu)},useDebugValue:$0,useDeferredValue:function(t){var e=Fr();return nE(e,sn.memoizedState,t)},useTransition:function(){var t=xd(Iu)[0],e=Fr().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:Hw,useId:rE,unstable_isNewReconciler:!1},gv={readContext:Lr,useCallback:eE,useContext:Lr,useEffect:Q0,useImperativeHandle:Jw,useInsertionEffect:Qw,useLayoutEffect:$w,useMemo:tE,useReducer:Ad,useRef:Yw,useState:function(){return Ad(Iu)},useDebugValue:$0,useDeferredValue:function(t){var e=Fr();return sn===null?e.memoizedState=t:nE(e,sn.memoizedState,t)},useTransition:function(){var t=Ad(Iu)[0],e=Fr().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:Hw,useId:rE,unstable_isNewReconciler:!1};function Xr(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function x1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gf={isMounted:function(t){return(t=t._reactInternals)?jo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Un(),s=Fs(t),a=Yi(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ms(t,a,s),e!==null&&(Zr(e,t,s,r),zc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Un(),s=Fs(t),a=Yi(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ms(t,a,s),e!==null&&(Zr(e,t,s,r),zc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Un(),r=Fs(t),s=Yi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ms(t,s,r),e!==null&&(Zr(e,t,r,n),zc(e,t,r))}};function nm(t,e,n,r,s,a,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,h):e.prototype&&e.prototype.isPureReactComponent?!mu(n,r)||!mu(s,a):!0}function aE(t,e,n){var r=!1,s=Ws,a=e.contextType;return typeof a=="object"&&a!==null?a=Lr(a):(s=er(e)?No:Mn.current,r=e.contextTypes,a=(r=r!=null)?za(t,s):Ws),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function rm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gf.enqueueReplaceState(e,e.state,null)}function A1(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},H0(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Lr(a):(a=er(e)?No:Mn.current,s.context=za(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(x1(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gf.enqueueReplaceState(s,s.state,null),Ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ga(t,e){try{var n="",r=e;do n+=jI(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Id(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function I1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pv=typeof WeakMap=="function"?WeakMap:Map;function lE(t,e,n){n=Yi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sh||(Sh=!0,D1=r),I1(t,e)},n}function uE(t,e,n){n=Yi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){I1(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){I1(t,e),typeof r!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),n}function im(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Nv.bind(null,t,e,n),e.then(t,t))}function sm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function om(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yi(-1,1),e.tag=2,Ms(n,e,1))),n.lanes|=1),t)}var mv=os.ReactCurrentOwner,Zn=!1;function Vn(t,e,n,r){e.child=t===null?Bw(e,null,n,r):Ha(e,t.child,n,r)}function am(t,e,n,r,s){n=n.render;var a=e.ref;return ka(e,s),r=q0(t,e,n,r,a,s),n=Y0(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,es(t,e,s)):(St&&n&&L0(e),e.flags|=1,Vn(t,e,r,s),e.child)}function lm(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!sg(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,cE(t,e,a,r,s)):(t=Kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var h=a.memoizedProps;if(n=n.compare,n=n!==null?n:mu,n(h,r)&&t.ref===e.ref)return es(t,e,s)}return e.flags|=1,t=Bs(a,r),t.ref=e.ref,t.return=e,e.child=t}function cE(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(mu(a,r)&&t.ref===e.ref)if(Zn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(Zn=!0);else return e.lanes=t.lanes,es(t,e,s)}return C1(t,e,n,r,s)}function hE(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Sa,dr),dr|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(Sa,dr),dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Et(Sa,dr),dr|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Et(Sa,dr),dr|=r;return Vn(t,e,s,n),e.child}function fE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function C1(t,e,n,r,s){var a=er(n)?No:Mn.current;return a=za(e,a),ka(e,s),n=q0(t,e,n,r,a,s),r=Y0(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,es(t,e,s)):(St&&r&&L0(e),e.flags|=1,Vn(t,e,n,s),e.child)}function um(t,e,n,r,s){if(er(n)){var a=!0;yh(e)}else a=!1;if(ka(e,s),e.stateNode===null)Wc(t,e),aE(e,n,r),A1(e,n,r,s),r=!0;else if(t===null){var h=e.stateNode,y=e.memoizedProps;h.props=y;var p=h.context,m=n.contextType;typeof m=="object"&&m!==null?m=Lr(m):(m=er(n)?No:Mn.current,m=za(e,m));var E=n.getDerivedStateFromProps,x=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";x||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==r||p!==m)&&rm(e,h,r,m),As=!1;var v=e.memoizedState;h.state=v,Ah(e,r,h,s),p=e.memoizedState,y!==r||v!==p||Jn.current||As?(typeof E=="function"&&(x1(e,n,E,r),p=e.memoizedState),(y=As||nm(e,n,y,r,v,p,m))?(x||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=p),h.props=r,h.state=p,h.context=m,r=y):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{h=e.stateNode,Uw(t,e),y=e.memoizedProps,m=e.type===e.elementType?y:Xr(e.type,y),h.props=m,x=e.pendingProps,v=h.context,p=n.contextType,typeof p=="object"&&p!==null?p=Lr(p):(p=er(n)?No:Mn.current,p=za(e,p));var O=n.getDerivedStateFromProps;(E=typeof O=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==x||v!==p)&&rm(e,h,r,p),As=!1,v=e.memoizedState,h.state=v,Ah(e,r,h,s);var V=e.memoizedState;y!==x||v!==V||Jn.current||As?(typeof O=="function"&&(x1(e,n,O,r),V=e.memoizedState),(m=As||nm(e,n,m,r,v,V,p)||!1)?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,V,p),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,V,p)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=V),h.props=r,h.state=V,h.context=p,r=m):(typeof h.componentDidUpdate!="function"||y===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return v1(t,e,n,r,a,s)}function v1(t,e,n,r,s,a){fE(t,e);var h=(e.flags&128)!==0;if(!r&&!h)return s&&qp(e,n,!1),es(t,e,a);r=e.stateNode,mv.current=e;var y=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&h?(e.child=Ha(e,t.child,null,a),e.child=Ha(e,null,y,a)):Vn(t,e,y,a),e.memoizedState=r.state,s&&qp(e,n,!0),e.child}function dE(t){var e=t.stateNode;e.pendingContext?Kp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kp(t,e.context,!1),W0(t,e.containerInfo)}function cm(t,e,n,r,s){return ja(),B0(s),e.flags|=256,Vn(t,e,n,r),e.child}var T1={dehydrated:null,treeContext:null,retryLane:0};function S1(t){return{baseLanes:t,cachePool:null,transitions:null}}function gE(t,e,n){var r=e.pendingProps,s=bt.current,a=!1,h=(e.flags&128)!==0,y;if((y=h)||(y=t!==null&&t.memoizedState===null?!1:(s&2)!==0),y?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Et(bt,s&1),t===null)return E1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=r.children,t=r.fallback,a?(r=e.mode,a=e.child,h={mode:"hidden",children:h},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=h):a=yf(h,r,0,null),t=To(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=S1(n),e.memoizedState=T1,t):Z0(e,h));if(s=t.memoizedState,s!==null&&(y=s.dehydrated,y!==null))return yv(t,e,h,r,y,s,n);if(a){a=r.fallback,h=e.mode,s=t.child,y=s.sibling;var p={mode:"hidden",children:r.children};return!(h&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=p,e.deletions=null):(r=Bs(s,p),r.subtreeFlags=s.subtreeFlags&14680064),y!==null?a=Bs(y,a):(a=To(a,h,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,h=t.child.memoizedState,h=h===null?S1(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},a.memoizedState=h,a.childLanes=t.childLanes&~n,e.memoizedState=T1,r}return a=t.child,t=a.sibling,r=Bs(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Z0(t,e){return e=yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ic(t,e,n,r){return r!==null&&B0(r),Ha(e,t.child,null,n),t=Z0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yv(t,e,n,r,s,a,h){if(n)return e.flags&256?(e.flags&=-257,r=Id(Error(ce(422))),Ic(t,e,h,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=yf({mode:"visible",children:r.children},s,0,null),a=To(a,s,h,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Ha(e,t.child,null,h),e.child.memoizedState=S1(h),e.memoizedState=T1,a);if(!(e.mode&1))return Ic(t,e,h,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var y=r.dgst;return r=y,a=Error(ce(419)),r=Id(a,r,void 0),Ic(t,e,h,r)}if(y=(h&t.childLanes)!==0,Zn||y){if(r=mn,r!==null){switch(h&-h){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|h)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Ji(t,s),Zr(r,t,s,-1))}return ig(),r=Id(Error(ce(421))),Ic(t,e,h,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=bv.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,gr=ks(s.nextSibling),mr=e,St=!0,qr=null,t!==null&&(br[Pr++]=Gi,br[Pr++]=Xi,br[Pr++]=bo,Gi=t.id,Xi=t.overflow,bo=e),e=Z0(e,r.children),e.flags|=4096,e)}function hm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_1(t.return,e,n)}function Cd(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function pE(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Vn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hm(t,n,e);else if(t.tag===19)hm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et(bt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cd(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cd(e,!0,n,null,a);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function es(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=Bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wv(t,e,n){switch(e.tag){case 3:dE(e),ja();break;case 5:zw(e);break;case 1:er(e.type)&&yh(e);break;case 4:W0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Et(_h,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?gE(t,e,n):(Et(bt,bt.current&1),t=es(t,e,n),t!==null?t.sibling:null);Et(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return pE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Et(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,hE(t,e,n)}return es(t,e,n)}var mE,R1,yE,wE;mE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};R1=function(){};yE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xo(yi.current);var a=null;switch(n){case"input":s=Qd(t,s),r=Qd(t,r),a=[];break;case"select":s=kt({},s,{value:void 0}),r=kt({},r,{value:void 0}),a=[];break;case"textarea":s=Jd(t,s),r=Jd(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ph)}t1(n,r);var h;n=null;for(m in s)if(!r.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var y=s[m];for(h in y)y.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(uu.hasOwnProperty(m)?a||(a=[]):(a=a||[]).push(m,null));for(m in r){var p=r[m];if(y=s!=null?s[m]:void 0,r.hasOwnProperty(m)&&p!==y&&(p!=null||y!=null))if(m==="style")if(y){for(h in y)!y.hasOwnProperty(h)||p&&p.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in p)p.hasOwnProperty(h)&&y[h]!==p[h]&&(n||(n={}),n[h]=p[h])}else n||(a||(a=[]),a.push(m,n)),n=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,y=y?y.__html:void 0,p!=null&&y!==p&&(a=a||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(a=a||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(uu.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&It("scroll",t),a||y===p||(a=[])):(a=a||[]).push(m,p))}n&&(a=a||[]).push("style",n);var m=a;(e.updateQueue=m)&&(e.flags|=4)}};wE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Dl(t,e){if(!St)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ev(t,e,n){var r=e.pendingProps;switch(F0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return er(e.type)&&mh(),bn(e),null;case 3:return r=e.stateNode,Wa(),Tt(Jn),Tt(Mn),X0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qr!==null&&(L1(qr),qr=null))),R1(t,e),bn(e),null;case 5:G0(e);var s=xo(xu.current);if(n=e.type,t!==null&&e.stateNode!=null)yE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return bn(e),null}if(t=xo(yi.current),xc(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[pi]=e,r[Eu]=a,t=(e.mode&1)!==0,n){case"dialog":It("cancel",r),It("close",r);break;case"iframe":case"object":case"embed":It("load",r);break;case"video":case"audio":for(s=0;s<Vl.length;s++)It(Vl[s],r);break;case"source":It("error",r);break;case"img":case"image":case"link":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"input":_p(r,a),It("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},It("invalid",r);break;case"textarea":Ap(r,a),It("invalid",r)}t1(n,a),s=null;for(var h in a)if(a.hasOwnProperty(h)){var y=a[h];h==="children"?typeof y=="string"?r.textContent!==y&&(a.suppressHydrationWarning!==!0&&_c(r.textContent,y,t),s=["children",y]):typeof y=="number"&&r.textContent!==""+y&&(a.suppressHydrationWarning!==!0&&_c(r.textContent,y,t),s=["children",""+y]):uu.hasOwnProperty(h)&&y!=null&&h==="onScroll"&&It("scroll",r)}switch(n){case"input":fc(r),xp(r,a,!0);break;case"textarea":fc(r),Ip(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ph)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{h=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=h.createElement(n,{is:r.is}):(t=h.createElement(n),n==="select"&&(h=t,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):t=h.createElementNS(t,n),t[pi]=e,t[Eu]=r,mE(t,e,!1,!1),e.stateNode=t;e:{switch(h=n1(n,r),n){case"dialog":It("cancel",t),It("close",t),s=r;break;case"iframe":case"object":case"embed":It("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vl.length;s++)It(Vl[s],t);s=r;break;case"source":It("error",t),s=r;break;case"img":case"image":case"link":It("error",t),It("load",t),s=r;break;case"details":It("toggle",t),s=r;break;case"input":_p(t,r),s=Qd(t,r),It("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=kt({},r,{value:void 0}),It("invalid",t);break;case"textarea":Ap(t,r),s=Jd(t,r),It("invalid",t);break;default:s=r}t1(n,s),y=s;for(a in y)if(y.hasOwnProperty(a)){var p=y[a];a==="style"?Yy(t,p):a==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Ky(t,p)):a==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&cu(t,p):typeof p=="number"&&cu(t,""+p):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(uu.hasOwnProperty(a)?p!=null&&a==="onScroll"&&It("scroll",t):p!=null&&A0(t,a,p,h))}switch(n){case"input":fc(t),xp(t,r,!1);break;case"textarea":fc(t),Ip(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hs(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?ba(t,!!r.multiple,a,!1):r.defaultValue!=null&&ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ph)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(t&&e.stateNode!=null)wE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=xo(xu.current),xo(yi.current),xc(e)){if(r=e.stateNode,n=e.memoizedProps,r[pi]=e,(a=r.nodeValue!==n)&&(t=mr,t!==null))switch(t.tag){case 3:_c(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_c(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pi]=e,e.stateNode=r}return bn(e),null;case 13:if(Tt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(St&&gr!==null&&e.mode&1&&!(e.flags&128))Lw(),ja(),e.flags|=98560,a=!1;else if(a=xc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ce(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ce(317));a[pi]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),a=!1}else qr!==null&&(L1(qr),qr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?an===0&&(an=3):ig())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return Wa(),R1(t,e),t===null&&yu(e.stateNode.containerInfo),bn(e),null;case 10:return z0(e.type._context),bn(e),null;case 17:return er(e.type)&&mh(),bn(e),null;case 19:if(Tt(bt),a=e.memoizedState,a===null)return bn(e),null;if(r=(e.flags&128)!==0,h=a.rendering,h===null)if(r)Dl(a,!1);else{if(an!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=Ih(t),h!==null){for(e.flags|=128,Dl(a,!1),r=h.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,h=a.alternate,h===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,t=h.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(bt,bt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Xt()>Xa&&(e.flags|=128,r=!0,Dl(a,!1),e.lanes=4194304)}else{if(!r)if(t=Ih(h),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!h.alternate&&!St)return bn(e),null}else 2*Xt()-a.renderingStartTime>Xa&&n!==1073741824&&(e.flags|=128,r=!0,Dl(a,!1),e.lanes=4194304);a.isBackwards?(h.sibling=e.child,e.child=h):(n=a.last,n!==null?n.sibling=h:e.child=h,a.last=h)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Xt(),e.sibling=null,n=bt.current,Et(bt,r?n&1|2:n&1),e):(bn(e),null);case 22:case 23:return rg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dr&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function _v(t,e){switch(F0(e),e.tag){case 1:return er(e.type)&&mh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wa(),Tt(Jn),Tt(Mn),X0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return G0(e),null;case 13:if(Tt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(bt),null;case 4:return Wa(),null;case 10:return z0(e.type._context),null;case 22:case 23:return rg(),null;case 24:return null;default:return null}}var Cc=!1,Dn=!1,xv=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(t,e,r)}else n.current=null}function N1(t,e,n){try{n()}catch(r){jt(t,e,r)}}var fm=!1;function Av(t,e){if(f1=fh,t=Iw(),M0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var h=0,y=-1,p=-1,m=0,E=0,x=t,v=null;t:for(;;){for(var O;x!==n||s!==0&&x.nodeType!==3||(y=h+s),x!==a||r!==0&&x.nodeType!==3||(p=h+r),x.nodeType===3&&(h+=x.nodeValue.length),(O=x.firstChild)!==null;)v=x,x=O;for(;;){if(x===t)break t;if(v===n&&++m===s&&(y=h),v===a&&++E===r&&(p=h),(O=x.nextSibling)!==null)break;x=v,v=x.parentNode}x=O}n=y===-1||p===-1?null:{start:y,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(d1={focusedElem:t,selectionRange:n},fh=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var U=V.memoizedProps,H=V.memoizedState,F=e.stateNode,D=F.getSnapshotBeforeUpdate(e.elementType===e.type?U:Xr(e.type,U),H);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(q){jt(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return V=fm,fm=!1,V}function Ql(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&N1(e,n,a)}s=s.next}while(s!==r)}}function pf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function b1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function EE(t){var e=t.alternate;e!==null&&(t.alternate=null,EE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pi],delete e[Eu],delete e[m1],delete e[iv],delete e[sv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _E(t){return t.tag===5||t.tag===3||t.tag===4}function dm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_E(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function P1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ph));else if(r!==4&&(t=t.child,t!==null))for(P1(t,e,n),t=t.sibling;t!==null;)P1(t,e,n),t=t.sibling}function O1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(O1(t,e,n),t=t.sibling;t!==null;)O1(t,e,n),t=t.sibling}var An=null,Kr=!1;function ws(t,e,n){for(n=n.child;n!==null;)xE(t,e,n),n=n.sibling}function xE(t,e,n){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(af,n)}catch{}switch(n.tag){case 5:Dn||Ta(n,e);case 6:var r=An,s=Kr;An=null,ws(t,e,n),An=r,Kr=s,An!==null&&(Kr?(t=An,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):An.removeChild(n.stateNode));break;case 18:An!==null&&(Kr?(t=An,n=n.stateNode,t.nodeType===8?yd(t.parentNode,n):t.nodeType===1&&yd(t,n),gu(t)):yd(An,n.stateNode));break;case 4:r=An,s=Kr,An=n.stateNode.containerInfo,Kr=!0,ws(t,e,n),An=r,Kr=s;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,h=a.destroy;a=a.tag,h!==void 0&&(a&2||a&4)&&N1(n,e,h),s=s.next}while(s!==r)}ws(t,e,n);break;case 1:if(!Dn&&(Ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(y){jt(n,e,y)}ws(t,e,n);break;case 21:ws(t,e,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,ws(t,e,n),Dn=r):ws(t,e,n);break;default:ws(t,e,n)}}function gm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xv),e.forEach(function(r){var s=Pv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,h=e,y=h;e:for(;y!==null;){switch(y.tag){case 5:An=y.stateNode,Kr=!1;break e;case 3:An=y.stateNode.containerInfo,Kr=!0;break e;case 4:An=y.stateNode.containerInfo,Kr=!0;break e}y=y.return}if(An===null)throw Error(ce(160));xE(a,h,s),An=null,Kr=!1;var p=s.alternate;p!==null&&(p.return=null),s.return=null}catch(m){jt(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)AE(e,t),e=e.sibling}function AE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),fi(t),r&4){try{Ql(3,t,t.return),pf(3,t)}catch(U){jt(t,t.return,U)}try{Ql(5,t,t.return)}catch(U){jt(t,t.return,U)}}break;case 1:Gr(e,t),fi(t),r&512&&n!==null&&Ta(n,n.return);break;case 5:if(Gr(e,t),fi(t),r&512&&n!==null&&Ta(n,n.return),t.flags&32){var s=t.stateNode;try{cu(s,"")}catch(U){jt(t,t.return,U)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,h=n!==null?n.memoizedProps:a,y=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{y==="input"&&a.type==="radio"&&a.name!=null&&Wy(s,a),n1(y,h);var m=n1(y,a);for(h=0;h<p.length;h+=2){var E=p[h],x=p[h+1];E==="style"?Yy(s,x):E==="dangerouslySetInnerHTML"?Ky(s,x):E==="children"?cu(s,x):A0(s,E,x,m)}switch(y){case"input":$d(s,a);break;case"textarea":Gy(s,a);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var O=a.value;O!=null?ba(s,!!a.multiple,O,!1):v!==!!a.multiple&&(a.defaultValue!=null?ba(s,!!a.multiple,a.defaultValue,!0):ba(s,!!a.multiple,a.multiple?[]:"",!1))}s[Eu]=a}catch(U){jt(t,t.return,U)}}break;case 6:if(Gr(e,t),fi(t),r&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(U){jt(t,t.return,U)}}break;case 3:if(Gr(e,t),fi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gu(e.containerInfo)}catch(U){jt(t,t.return,U)}break;case 4:Gr(e,t),fi(t);break;case 13:Gr(e,t),fi(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(tg=Xt())),r&4&&gm(t);break;case 22:if(E=n!==null&&n.memoizedState!==null,t.mode&1?(Dn=(m=Dn)||E,Gr(e,t),Dn=m):Gr(e,t),fi(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!E&&t.mode&1)for(_e=t,E=t.child;E!==null;){for(x=_e=E;_e!==null;){switch(v=_e,O=v.child,v.tag){case 0:case 11:case 14:case 15:Ql(4,v,v.return);break;case 1:Ta(v,v.return);var V=v.stateNode;if(typeof V.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(U){jt(r,n,U)}}break;case 5:Ta(v,v.return);break;case 22:if(v.memoizedState!==null){mm(x);continue}}O!==null?(O.return=v,_e=O):mm(x)}E=E.sibling}e:for(E=null,x=t;;){if(x.tag===5){if(E===null){E=x;try{s=x.stateNode,m?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(y=x.stateNode,p=x.memoizedProps.style,h=p!=null&&p.hasOwnProperty("display")?p.display:null,y.style.display=qy("display",h))}catch(U){jt(t,t.return,U)}}}else if(x.tag===6){if(E===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(U){jt(t,t.return,U)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;E===x&&(E=null),x=x.return}E===x&&(E=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Gr(e,t),fi(t),r&4&&gm(t);break;case 21:break;default:Gr(e,t),fi(t)}}function fi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_E(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cu(s,""),r.flags&=-33);var a=dm(t);O1(t,a,s);break;case 3:case 4:var h=r.stateNode.containerInfo,y=dm(t);P1(t,y,h);break;default:throw Error(ce(161))}}catch(p){jt(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Iv(t,e,n){_e=t,IE(t)}function IE(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,a=s.child;if(s.tag===22&&r){var h=s.memoizedState!==null||Cc;if(!h){var y=s.alternate,p=y!==null&&y.memoizedState!==null||Dn;y=Cc;var m=Dn;if(Cc=h,(Dn=p)&&!m)for(_e=s;_e!==null;)h=_e,p=h.child,h.tag===22&&h.memoizedState!==null?ym(s):p!==null?(p.return=h,_e=p):ym(s);for(;a!==null;)_e=a,IE(a),a=a.sibling;_e=s,Cc=y,Dn=m}pm(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,_e=a):pm(t)}}function pm(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||pf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Jp(e,a,r);break;case 3:var h=e.updateQueue;if(h!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jp(e,h,n)}break;case 5:var y=e.stateNode;if(n===null&&e.flags&4){n=y;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var E=m.memoizedState;if(E!==null){var x=E.dehydrated;x!==null&&gu(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Dn||e.flags&512&&b1(e)}catch(v){jt(e,e.return,v)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function mm(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function ym(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pf(4,e)}catch(p){jt(e,n,p)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(p){jt(e,s,p)}}var a=e.return;try{b1(e)}catch(p){jt(e,a,p)}break;case 5:var h=e.return;try{b1(e)}catch(p){jt(e,h,p)}}}catch(p){jt(e,e.return,p)}if(e===t){_e=null;break}var y=e.sibling;if(y!==null){y.return=e.return,_e=y;break}_e=e.return}}var Cv=Math.ceil,Th=os.ReactCurrentDispatcher,J0=os.ReactCurrentOwner,Mr=os.ReactCurrentBatchConfig,it=0,mn=null,Jt=null,vn=0,dr=0,Sa=Js(0),an=0,vu=null,Oo=0,mf=0,eg=0,$l=null,Qn=null,tg=0,Xa=1/0,ji=null,Sh=!1,D1=null,Ls=null,vc=!1,Ns=null,Rh=0,Zl=0,k1=null,Gc=-1,Xc=0;function Un(){return it&6?Xt():Gc!==-1?Gc:Gc=Xt()}function Fs(t){return t.mode&1?it&2&&vn!==0?vn&-vn:av.transition!==null?(Xc===0&&(Xc=aw()),Xc):(t=ft,t!==0||(t=window.event,t=t===void 0?16:gw(t.type)),t):1}function Zr(t,e,n,r){if(50<Zl)throw Zl=0,k1=null,Error(ce(185));Bu(t,n,r),(!(it&2)||t!==mn)&&(t===mn&&(!(it&2)&&(mf|=n),an===4&&Cs(t,vn)),tr(t,r),n===1&&it===0&&!(e.mode&1)&&(Xa=Xt()+500,ff&&eo()))}function tr(t,e){var n=t.callbackNode;aC(t,e);var r=hh(t,t===mn?vn:0);if(r===0)n!==null&&Tp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Tp(n),e===1)t.tag===0?ov(wm.bind(null,t)):Dw(wm.bind(null,t)),nv(function(){!(it&6)&&eo()}),n=null;else{switch(lw(r)){case 1:n=S0;break;case 4:n=sw;break;case 16:n=ch;break;case 536870912:n=ow;break;default:n=ch}n=PE(n,CE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CE(t,e){if(Gc=-1,Xc=0,it&6)throw Error(ce(327));var n=t.callbackNode;if(Ma()&&t.callbackNode!==n)return null;var r=hh(t,t===mn?vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nh(t,r);else{e=r;var s=it;it|=2;var a=TE();(mn!==t||vn!==e)&&(ji=null,Xa=Xt()+500,vo(t,e));do try{Sv();break}catch(y){vE(t,y)}while(!0);U0(),Th.current=a,it=s,Jt!==null?e=0:(mn=null,vn=0,e=an)}if(e!==0){if(e===2&&(s=a1(t),s!==0&&(r=s,e=M1(t,s))),e===1)throw n=vu,vo(t,0),Cs(t,r),tr(t,Xt()),n;if(e===6)Cs(t,r);else{if(s=t.current.alternate,!(r&30)&&!vv(s)&&(e=Nh(t,r),e===2&&(a=a1(t),a!==0&&(r=a,e=M1(t,a))),e===1))throw n=vu,vo(t,0),Cs(t,r),tr(t,Xt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:yo(t,Qn,ji);break;case 3:if(Cs(t,r),(r&130023424)===r&&(e=tg+500-Xt(),10<e)){if(hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Un(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=p1(yo.bind(null,t,Qn,ji),e);break}yo(t,Qn,ji);break;case 4:if(Cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var h=31-$r(r);a=1<<h,h=e[h],h>s&&(s=h),r&=~a}if(r=s,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cv(r/1960))-r,10<r){t.timeoutHandle=p1(yo.bind(null,t,Qn,ji),r);break}yo(t,Qn,ji);break;case 5:yo(t,Qn,ji);break;default:throw Error(ce(329))}}}return tr(t,Xt()),t.callbackNode===n?CE.bind(null,t):null}function M1(t,e){var n=$l;return t.current.memoizedState.isDehydrated&&(vo(t,e).flags|=256),t=Nh(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&L1(e)),t}function L1(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function vv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!ei(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cs(t,e){for(e&=~eg,e&=~mf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$r(e),r=1<<n;t[n]=-1,e&=~r}}function wm(t){if(it&6)throw Error(ce(327));Ma();var e=hh(t,0);if(!(e&1))return tr(t,Xt()),null;var n=Nh(t,e);if(t.tag!==0&&n===2){var r=a1(t);r!==0&&(e=r,n=M1(t,r))}if(n===1)throw n=vu,vo(t,0),Cs(t,e),tr(t,Xt()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,Qn,ji),tr(t,Xt()),null}function ng(t,e){var n=it;it|=1;try{return t(e)}finally{it=n,it===0&&(Xa=Xt()+500,ff&&eo())}}function Do(t){Ns!==null&&Ns.tag===0&&!(it&6)&&Ma();var e=it;it|=1;var n=Mr.transition,r=ft;try{if(Mr.transition=null,ft=1,t)return t()}finally{ft=r,Mr.transition=n,it=e,!(it&6)&&eo()}}function rg(){dr=Sa.current,Tt(Sa)}function vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tv(n)),Jt!==null)for(n=Jt.return;n!==null;){var r=n;switch(F0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mh();break;case 3:Wa(),Tt(Jn),Tt(Mn),X0();break;case 5:G0(r);break;case 4:Wa();break;case 13:Tt(bt);break;case 19:Tt(bt);break;case 10:z0(r.type._context);break;case 22:case 23:rg()}n=n.return}if(mn=t,Jt=t=Bs(t.current,null),vn=dr=e,an=0,vu=null,eg=mf=Oo=0,Qn=$l=null,_o!==null){for(e=0;e<_o.length;e++)if(n=_o[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var h=a.next;a.next=s,r.next=h}n.pending=r}_o=null}return t}function vE(t,e){do{var n=Jt;try{if(U0(),jc.current=vh,Ch){for(var r=Ot.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ch=!1}if(Po=0,pn=sn=Ot=null,Yl=!1,Au=0,J0.current=null,n===null||n.return===null){an=1,vu=e,Jt=null;break}e:{var a=t,h=n.return,y=n,p=e;if(e=vn,y.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,E=y,x=E.tag;if(!(E.mode&1)&&(x===0||x===11||x===15)){var v=E.alternate;v?(E.updateQueue=v.updateQueue,E.memoizedState=v.memoizedState,E.lanes=v.lanes):(E.updateQueue=null,E.memoizedState=null)}var O=sm(h);if(O!==null){O.flags&=-257,om(O,h,y,a,e),O.mode&1&&im(a,m,e),e=O,p=m;var V=e.updateQueue;if(V===null){var U=new Set;U.add(p),e.updateQueue=U}else V.add(p);break e}else{if(!(e&1)){im(a,m,e),ig();break e}p=Error(ce(426))}}else if(St&&y.mode&1){var H=sm(h);if(H!==null){!(H.flags&65536)&&(H.flags|=256),om(H,h,y,a,e),B0(Ga(p,y));break e}}a=p=Ga(p,y),an!==4&&(an=2),$l===null?$l=[a]:$l.push(a),a=h;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var F=lE(a,p,e);Zp(a,F);break e;case 1:y=p;var D=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof D.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ls===null||!Ls.has(N)))){a.flags|=65536,e&=-e,a.lanes|=e;var q=uE(a,y,e);Zp(a,q);break e}}a=a.return}while(a!==null)}RE(n)}catch(ie){e=ie,Jt===n&&n!==null&&(Jt=n=n.return);continue}break}while(!0)}function TE(){var t=Th.current;return Th.current=vh,t===null?vh:t}function ig(){(an===0||an===3||an===2)&&(an=4),mn===null||!(Oo&268435455)&&!(mf&268435455)||Cs(mn,vn)}function Nh(t,e){var n=it;it|=2;var r=TE();(mn!==t||vn!==e)&&(ji=null,vo(t,e));do try{Tv();break}catch(s){vE(t,s)}while(!0);if(U0(),it=n,Th.current=r,Jt!==null)throw Error(ce(261));return mn=null,vn=0,an}function Tv(){for(;Jt!==null;)SE(Jt)}function Sv(){for(;Jt!==null&&!ZI();)SE(Jt)}function SE(t){var e=bE(t.alternate,t,dr);t.memoizedProps=t.pendingProps,e===null?RE(t):Jt=e,J0.current=null}function RE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_v(n,e),n!==null){n.flags&=32767,Jt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,Jt=null;return}}else if(n=Ev(n,e,dr),n!==null){Jt=n;return}if(e=e.sibling,e!==null){Jt=e;return}Jt=e=t}while(e!==null);an===0&&(an=5)}function yo(t,e,n){var r=ft,s=Mr.transition;try{Mr.transition=null,ft=1,Rv(t,e,n,r)}finally{Mr.transition=s,ft=r}return null}function Rv(t,e,n,r){do Ma();while(Ns!==null);if(it&6)throw Error(ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(lC(t,a),t===mn&&(Jt=mn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vc||(vc=!0,PE(ch,function(){return Ma(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Mr.transition,Mr.transition=null;var h=ft;ft=1;var y=it;it|=4,J0.current=null,Av(t,n),AE(n,t),qC(d1),fh=!!f1,d1=f1=null,t.current=n,Iv(n),JI(),it=y,ft=h,Mr.transition=a}else t.current=n;if(vc&&(vc=!1,Ns=t,Rh=s),a=t.pendingLanes,a===0&&(Ls=null),nC(n.stateNode),tr(t,Xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sh)throw Sh=!1,t=D1,D1=null,t;return Rh&1&&t.tag!==0&&Ma(),a=t.pendingLanes,a&1?t===k1?Zl++:(Zl=0,k1=t):Zl=0,eo(),null}function Ma(){if(Ns!==null){var t=lw(Rh),e=Mr.transition,n=ft;try{if(Mr.transition=null,ft=16>t?16:t,Ns===null)var r=!1;else{if(t=Ns,Ns=null,Rh=0,it&6)throw Error(ce(331));var s=it;for(it|=4,_e=t.current;_e!==null;){var a=_e,h=a.child;if(_e.flags&16){var y=a.deletions;if(y!==null){for(var p=0;p<y.length;p++){var m=y[p];for(_e=m;_e!==null;){var E=_e;switch(E.tag){case 0:case 11:case 15:Ql(8,E,a)}var x=E.child;if(x!==null)x.return=E,_e=x;else for(;_e!==null;){E=_e;var v=E.sibling,O=E.return;if(EE(E),E===m){_e=null;break}if(v!==null){v.return=O,_e=v;break}_e=O}}}var V=a.alternate;if(V!==null){var U=V.child;if(U!==null){V.child=null;do{var H=U.sibling;U.sibling=null,U=H}while(U!==null)}}_e=a}}if(a.subtreeFlags&2064&&h!==null)h.return=a,_e=h;else e:for(;_e!==null;){if(a=_e,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ql(9,a,a.return)}var F=a.sibling;if(F!==null){F.return=a.return,_e=F;break e}_e=a.return}}var D=t.current;for(_e=D;_e!==null;){h=_e;var N=h.child;if(h.subtreeFlags&2064&&N!==null)N.return=h,_e=N;else e:for(h=D;_e!==null;){if(y=_e,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:pf(9,y)}}catch(ie){jt(y,y.return,ie)}if(y===h){_e=null;break e}var q=y.sibling;if(q!==null){q.return=y.return,_e=q;break e}_e=y.return}}if(it=s,eo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(af,t)}catch{}r=!0}return r}finally{ft=n,Mr.transition=e}}return!1}function Em(t,e,n){e=Ga(n,e),e=lE(t,e,1),t=Ms(t,e,1),e=Un(),t!==null&&(Bu(t,1,e),tr(t,e))}function jt(t,e,n){if(t.tag===3)Em(t,t,n);else for(;e!==null;){if(e.tag===3){Em(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ls===null||!Ls.has(r))){t=Ga(n,t),t=uE(e,t,1),e=Ms(e,t,1),t=Un(),e!==null&&(Bu(e,1,t),tr(e,t));break}}e=e.return}}function Nv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Un(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(vn&n)===n&&(an===4||an===3&&(vn&130023424)===vn&&500>Xt()-tg?vo(t,0):eg|=n),tr(t,e)}function NE(t,e){e===0&&(t.mode&1?(e=pc,pc<<=1,!(pc&130023424)&&(pc=4194304)):e=1);var n=Un();t=Ji(t,e),t!==null&&(Bu(t,e,n),tr(t,n))}function bv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NE(t,n)}function Pv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),NE(t,n)}var bE;bE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jn.current)Zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zn=!1,wv(t,e,n);Zn=!!(t.flags&131072)}else Zn=!1,St&&e.flags&1048576&&kw(e,Eh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wc(t,e),t=e.pendingProps;var s=za(e,Mn.current);ka(e,n),s=q0(null,e,r,t,s,n);var a=Y0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(r)?(a=!0,yh(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,H0(e),s.updater=gf,e.stateNode=s,s._reactInternals=e,A1(e,r,t,n),e=v1(null,e,r,!0,a,n)):(e.tag=0,St&&a&&L0(e),Vn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Dv(r),t=Xr(r,t),s){case 0:e=C1(null,e,r,t,n);break e;case 1:e=um(null,e,r,t,n);break e;case 11:e=am(null,e,r,t,n);break e;case 14:e=lm(null,e,r,Xr(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xr(r,s),C1(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xr(r,s),um(t,e,r,s,n);case 3:e:{if(dE(e),t===null)throw Error(ce(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Uw(t,e),Ah(e,r,null,n);var h=e.memoizedState;if(r=h.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Ga(Error(ce(423)),e),e=cm(t,e,r,n,s);break e}else if(r!==s){s=Ga(Error(ce(424)),e),e=cm(t,e,r,n,s);break e}else for(gr=ks(e.stateNode.containerInfo.firstChild),mr=e,St=!0,qr=null,n=Bw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ja(),r===s){e=es(t,e,n);break e}Vn(t,e,r,n)}e=e.child}return e;case 5:return zw(e),t===null&&E1(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,h=s.children,g1(r,s)?h=null:a!==null&&g1(r,a)&&(e.flags|=32),fE(t,e),Vn(t,e,h,n),e.child;case 6:return t===null&&E1(e),null;case 13:return gE(t,e,n);case 4:return W0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ha(e,null,r,n):Vn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xr(r,s),am(t,e,r,s,n);case 7:return Vn(t,e,e.pendingProps,n),e.child;case 8:return Vn(t,e,e.pendingProps.children,n),e.child;case 12:return Vn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,h=s.value,Et(_h,r._currentValue),r._currentValue=h,a!==null)if(ei(a.value,h)){if(a.children===s.children&&!Jn.current){e=es(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var y=a.dependencies;if(y!==null){h=a.child;for(var p=y.firstContext;p!==null;){if(p.context===r){if(a.tag===1){p=Yi(-1,n&-n),p.tag=2;var m=a.updateQueue;if(m!==null){m=m.shared;var E=m.pending;E===null?p.next=p:(p.next=E.next,E.next=p),m.pending=p}}a.lanes|=n,p=a.alternate,p!==null&&(p.lanes|=n),_1(a.return,n,e),y.lanes|=n;break}p=p.next}}else if(a.tag===10)h=a.type===e.type?null:a.child;else if(a.tag===18){if(h=a.return,h===null)throw Error(ce(341));h.lanes|=n,y=h.alternate,y!==null&&(y.lanes|=n),_1(h,n,e),h=a.sibling}else h=a.child;if(h!==null)h.return=a;else for(h=a;h!==null;){if(h===e){h=null;break}if(a=h.sibling,a!==null){a.return=h.return,h=a;break}h=h.return}a=h}Vn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ka(e,n),s=Lr(s),r=r(s),e.flags|=1,Vn(t,e,r,n),e.child;case 14:return r=e.type,s=Xr(r,e.pendingProps),s=Xr(r.type,s),lm(t,e,r,s,n);case 15:return cE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xr(r,s),Wc(t,e),e.tag=1,er(r)?(t=!0,yh(e)):t=!1,ka(e,n),aE(e,r,s),A1(e,r,s,n),v1(null,e,r,!0,t,n);case 19:return pE(t,e,n);case 22:return hE(t,e,n)}throw Error(ce(156,e.tag))};function PE(t,e){return iw(t,e)}function Ov(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,e,n,r){return new Ov(t,e,n,r)}function sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dv(t){if(typeof t=="function")return sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C0)return 11;if(t===v0)return 14}return 2}function Bs(t,e){var n=t.alternate;return n===null?(n=kr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kc(t,e,n,r,s,a){var h=2;if(r=t,typeof t=="function")sg(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case ya:return To(n.children,s,a,e);case I0:h=8,s|=8;break;case Xd:return t=kr(12,n,e,s|2),t.elementType=Xd,t.lanes=a,t;case Kd:return t=kr(13,n,e,s),t.elementType=Kd,t.lanes=a,t;case qd:return t=kr(19,n,e,s),t.elementType=qd,t.lanes=a,t;case zy:return yf(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vy:h=10;break e;case Uy:h=9;break e;case C0:h=11;break e;case v0:h=14;break e;case xs:h=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=kr(h,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function To(t,e,n,r){return t=kr(7,t,r,e),t.lanes=n,t}function yf(t,e,n,r){return t=kr(22,t,r,e),t.elementType=zy,t.lanes=n,t.stateNode={isHidden:!1},t}function vd(t,e,n){return t=kr(6,t,null,e),t.lanes=n,t}function Td(t,e,n){return e=kr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=od(0),this.expirationTimes=od(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=od(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function og(t,e,n,r,s,a,h,y,p){return t=new kv(t,e,n,y,p),e===1?(e=1,a===!0&&(e|=8)):e=0,a=kr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},H0(a),t}function Mv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function OE(t){if(!t)return Ws;t=t._reactInternals;e:{if(jo(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(er(n))return Ow(t,n,e)}return e}function DE(t,e,n,r,s,a,h,y,p){return t=og(n,r,!0,t,s,a,h,y,p),t.context=OE(null),n=t.current,r=Un(),s=Fs(n),a=Yi(r,s),a.callback=e??null,Ms(n,a,s),t.current.lanes=s,Bu(t,s,r),tr(t,r),t}function wf(t,e,n,r){var s=e.current,a=Un(),h=Fs(s);return n=OE(n),e.context===null?e.context=n:e.pendingContext=n,e=Yi(a,h),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ms(s,e,h),t!==null&&(Zr(t,s,h,a),zc(t,s,h)),h}function bh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _m(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ag(t,e){_m(t,e),(t=t.alternate)&&_m(t,e)}function Lv(){return null}var kE=typeof reportError=="function"?reportError:function(t){console.error(t)};function lg(t){this._internalRoot=t}Ef.prototype.render=lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));wf(t,e,null,null)};Ef.prototype.unmount=lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Do(function(){wf(null,t,null,null)}),e[Zi]=null}};function Ef(t){this._internalRoot=t}Ef.prototype.unstable_scheduleHydration=function(t){if(t){var e=hw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Is.length&&e!==0&&e<Is[n].priority;n++);Is.splice(n,0,t),n===0&&dw(t)}};function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xm(){}function Fv(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var m=bh(h);a.call(m)}}var h=DE(e,r,t,0,null,!1,!1,"",xm);return t._reactRootContainer=h,t[Zi]=h.current,yu(t.nodeType===8?t.parentNode:t),Do(),h}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var y=r;r=function(){var m=bh(p);y.call(m)}}var p=og(t,0,!1,null,null,!1,!1,"",xm);return t._reactRootContainer=p,t[Zi]=p.current,yu(t.nodeType===8?t.parentNode:t),Do(function(){wf(e,p,n,r)}),p}function xf(t,e,n,r,s){var a=n._reactRootContainer;if(a){var h=a;if(typeof s=="function"){var y=s;s=function(){var p=bh(h);y.call(p)}}wf(e,h,t,s)}else h=Fv(n,e,t,s,r);return bh(h)}uw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&(R0(e,n|1),tr(e,Xt()),!(it&6)&&(Xa=Xt()+500,eo()))}break;case 13:Do(function(){var r=Ji(t,1);if(r!==null){var s=Un();Zr(r,t,1,s)}}),ag(t,1)}};N0=function(t){if(t.tag===13){var e=Ji(t,134217728);if(e!==null){var n=Un();Zr(e,t,134217728,n)}ag(t,134217728)}};cw=function(t){if(t.tag===13){var e=Fs(t),n=Ji(t,e);if(n!==null){var r=Un();Zr(n,t,e,r)}ag(t,e)}};hw=function(){return ft};fw=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};i1=function(t,e,n){switch(e){case"input":if($d(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hf(r);if(!s)throw Error(ce(90));Hy(r),$d(r,s)}}}break;case"textarea":Gy(t,n);break;case"select":e=n.value,e!=null&&ba(t,!!n.multiple,e,!1)}};Zy=ng;Jy=Do;var Bv={usingClientEntryPoint:!1,Events:[Uu,xa,hf,Qy,$y,ng]},kl={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vv={bundleType:kl.bundleType,version:kl.version,rendererPackageName:kl.rendererPackageName,rendererConfig:kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nw(t),t===null?null:t.stateNode},findFiberByHostInstance:kl.findFiberByHostInstance||Lv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{af=Tc.inject(Vv),mi=Tc}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bv;Er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(e))throw Error(ce(200));return Mv(t,e,null,n)};Er.createRoot=function(t,e){if(!ug(t))throw Error(ce(299));var n=!1,r="",s=kE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=og(t,1,!1,null,null,n,!1,r,s),t[Zi]=e.current,yu(t.nodeType===8?t.parentNode:t),new lg(e)};Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=nw(e),t=t===null?null:t.stateNode,t};Er.flushSync=function(t){return Do(t)};Er.hydrate=function(t,e,n){if(!_f(e))throw Error(ce(200));return xf(null,t,e,!0,n)};Er.hydrateRoot=function(t,e,n){if(!ug(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",h=kE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),e=DE(e,null,t,1,n??null,s,!1,a,h),t[Zi]=e.current,yu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ef(e)};Er.render=function(t,e,n){if(!_f(e))throw Error(ce(200));return xf(null,t,e,!1,n)};Er.unmountComponentAtNode=function(t){if(!_f(t))throw Error(ce(40));return t._reactRootContainer?(Do(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};Er.unstable_batchedUpdates=ng;Er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_f(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return xf(t,e,n,!1,r)};Er.version="18.3.1-next-f1338f8080-20240426";function ME(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ME)}catch(t){console.error(t)}}ME(),My.exports=Er;var Uv=My.exports,LE,Am=Uv;LE=Am.createRoot,Am.hydrateRoot;/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Im="popstate";function zv(t={}){function e(r,s){let{pathname:a,search:h,hash:y}=r.location;return F1("",{pathname:a,search:h,hash:y},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Tu(s)}return Hv(e,n,null,t)}function Dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ci(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jv(){return Math.random().toString(36).substring(2,10)}function Cm(t,e){return{usr:t.state,key:t.key,idx:e}}function F1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?rl(e):e,state:n,key:e&&e.key||r||jv()}}function Tu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function rl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Hv(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,h=s.history,y="POP",p=null,m=E();m==null&&(m=0,h.replaceState({...h.state,idx:m},""));function E(){return(h.state||{idx:null}).idx}function x(){y="POP";let H=E(),F=H==null?null:H-m;m=H,p&&p({action:y,location:U.location,delta:F})}function v(H,F){y="PUSH";let D=F1(U.location,H,F);m=E()+1;let N=Cm(D,m),q=U.createHref(D);try{h.pushState(N,"",q)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;s.location.assign(q)}a&&p&&p({action:y,location:U.location,delta:1})}function O(H,F){y="REPLACE";let D=F1(U.location,H,F);m=E();let N=Cm(D,m),q=U.createHref(D);h.replaceState(N,"",q),a&&p&&p({action:y,location:U.location,delta:0})}function V(H){return Wv(H)}let U={get action(){return y},get location(){return t(s,h)},listen(H){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(Im,x),p=H,()=>{s.removeEventListener(Im,x),p=null}},createHref(H){return e(s,H)},createURL:V,encodeLocation(H){let F=V(H);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:v,replace:O,go(H){return h.go(H)}};return U}function Wv(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Dt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Tu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function FE(t,e,n="/"){return Gv(t,e,n,!1)}function Gv(t,e,n,r){let s=typeof e=="string"?rl(e):e,a=ts(s.pathname||"/",n);if(a==null)return null;let h=BE(t);Xv(h);let y=null;for(let p=0;y==null&&p<h.length;++p){let m=rT(a);y=tT(h[p],m,r)}return y}function BE(t,e=[],n=[],r="",s=!1){let a=(h,y,p=s,m)=>{let E={relativePath:m===void 0?h.path||"":m,caseSensitive:h.caseSensitive===!0,childrenIndex:y,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(r)&&p)return;Dt(E.relativePath.startsWith(r),`Absolute route path "${E.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(r.length)}let x=Qi([r,E.relativePath]),v=n.concat(E);h.children&&h.children.length>0&&(Dt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),BE(h.children,e,v,x,p)),!(h.path==null&&!h.index)&&e.push({path:x,score:Jv(x,h.index),routesMeta:v})};return t.forEach((h,y)=>{var p;if(h.path===""||!((p=h.path)!=null&&p.includes("?")))a(h,y);else for(let m of VE(h.path))a(h,y,!0,m)}),e}function VE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let h=VE(r.join("/")),y=[];return y.push(...h.map(p=>p===""?a:[a,p].join("/"))),s&&y.push(...h),y.map(p=>t.startsWith("/")&&p===""?"/":p)}function Xv(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Kv=/^:[\w-]+$/,qv=3,Yv=2,Qv=1,$v=10,Zv=-2,vm=t=>t==="*";function Jv(t,e){let n=t.split("/"),r=n.length;return n.some(vm)&&(r+=Zv),e&&(r+=Yv),n.filter(s=>!vm(s)).reduce((s,a)=>s+(Kv.test(a)?qv:a===""?Qv:$v),r)}function eT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function tT(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",h=[];for(let y=0;y<r.length;++y){let p=r[y],m=y===r.length-1,E=a==="/"?e:e.slice(a.length)||"/",x=Ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},E),v=p.route;if(!x&&m&&n&&!r[r.length-1].route.index&&(x=Ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!x)return null;Object.assign(s,x.params),h.push({params:s,pathname:Qi([a,x.pathname]),pathnameBase:aT(Qi([a,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(a=Qi([a,x.pathnameBase]))}return h}function Ph(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],h=a.replace(/(.)\/+$/,"$1"),y=s.slice(1);return{params:r.reduce((m,{paramName:E,isOptional:x},v)=>{if(E==="*"){let V=y[v]||"";h=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const O=y[v];return x&&!O?m[E]=void 0:m[E]=(O||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:h,pattern:t}}function nT(t,e=!1,n=!0){Ci(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,y,p)=>(r.push({paramName:y,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ci(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ts(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iT(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?rl(t):t;return{pathname:n?n.startsWith("/")?n:sT(n,e):e,search:lT(r),hash:uT(s)}}function sT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function UE(t){let e=oT(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function zE(t,e,n,r=!1){let s;typeof t=="string"?s=rl(t):(s={...t},Dt(!s.pathname||!s.pathname.includes("?"),Sd("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),Sd("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),Sd("#","search","hash",s)));let a=t===""||s.pathname==="",h=a?"/":s.pathname,y;if(h==null)y=n;else{let x=e.length-1;if(!r&&h.startsWith("..")){let v=h.split("/");for(;v[0]==="..";)v.shift(),x-=1;s.pathname=v.join("/")}y=x>=0?e[x]:"/"}let p=iT(s,y),m=h&&h!=="/"&&h.endsWith("/"),E=(a||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||E)&&(p.pathname+="/"),p}var Qi=t=>t.join("/").replace(/\/\/+/g,"/"),aT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var jE=["POST","PUT","PATCH","DELETE"];new Set(jE);var hT=["GET",...jE];new Set(hT);var il=ne.createContext(null);il.displayName="DataRouter";var Af=ne.createContext(null);Af.displayName="DataRouterState";ne.createContext(!1);var HE=ne.createContext({isTransitioning:!1});HE.displayName="ViewTransition";var fT=ne.createContext(new Map);fT.displayName="Fetchers";var dT=ne.createContext(null);dT.displayName="Await";var Ni=ne.createContext(null);Ni.displayName="Navigation";var ju=ne.createContext(null);ju.displayName="Location";var as=ne.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var cg=ne.createContext(null);cg.displayName="RouteError";function gT(t,{relative:e}={}){Dt(Hu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=ne.useContext(Ni),{hash:s,pathname:a,search:h}=Wu(t,{relative:e}),y=a;return n!=="/"&&(y=a==="/"?n:Qi([n,a])),r.createHref({pathname:y,search:h,hash:s})}function Hu(){return ne.useContext(ju)!=null}function Ho(){return Dt(Hu(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(ju).location}var WE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GE(t){ne.useContext(Ni).static||ne.useLayoutEffect(t)}function pT(){let{isDataRoute:t}=ne.useContext(as);return t?RT():mT()}function mT(){Dt(Hu(),"useNavigate() may be used only in the context of a <Router> component.");let t=ne.useContext(il),{basename:e,navigator:n}=ne.useContext(Ni),{matches:r}=ne.useContext(as),{pathname:s}=Ho(),a=JSON.stringify(UE(r)),h=ne.useRef(!1);return GE(()=>{h.current=!0}),ne.useCallback((p,m={})=>{if(Ci(h.current,WE),!h.current)return;if(typeof p=="number"){n.go(p);return}let E=zE(p,JSON.parse(a),s,m.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Qi([e,E.pathname])),(m.replace?n.replace:n.push)(E,m.state,m)},[e,n,a,s,t])}ne.createContext(null);function Wu(t,{relative:e}={}){let{matches:n}=ne.useContext(as),{pathname:r}=Ho(),s=JSON.stringify(UE(n));return ne.useMemo(()=>zE(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function yT(t,e){return XE(t,e)}function XE(t,e,n,r,s){var D;Dt(Hu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=ne.useContext(Ni),{matches:h}=ne.useContext(as),y=h[h.length-1],p=y?y.params:{},m=y?y.pathname:"/",E=y?y.pathnameBase:"/",x=y&&y.route;{let N=x&&x.path||"";KE(m,!x||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let v=Ho(),O;if(e){let N=typeof e=="string"?rl(e):e;Dt(E==="/"||((D=N.pathname)==null?void 0:D.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${N.pathname}" was given in the \`location\` prop.`),O=N}else O=v;let V=O.pathname||"/",U=V;if(E!=="/"){let N=E.replace(/^\//,"").split("/");U="/"+V.replace(/^\//,"").split("/").slice(N.length).join("/")}let H=FE(t,{pathname:U});Ci(x||H!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Ci(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=AT(H&&H.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:Qi([E,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?E:Qi([E,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),h,n,r,s);return e&&F?ne.createElement(ju.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},F):F}function wT(){let t=ST(),e=cT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=ne.createElement(ne.Fragment,null,ne.createElement("p",null,"💿 Hey developer 👋"),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:a},"ErrorBoundary")," or"," ",ne.createElement("code",{style:a},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),n?ne.createElement("pre",{style:s},n):null,h)}var ET=ne.createElement(wT,null),_T=class extends ne.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?ne.createElement(as.Provider,{value:this.props.routeContext},ne.createElement(cg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xT({routeContext:t,match:e,children:n}){let r=ne.useContext(il);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(as.Provider,{value:t},n)}function AT(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,h=n==null?void 0:n.errors;if(h!=null){let m=a.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);Dt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let y=!1,p=-1;if(n)for(let m=0;m<a.length;m++){let E=a[m];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=m),E.route.id){let{loaderData:x,errors:v}=n,O=E.route.loader&&!x.hasOwnProperty(E.route.id)&&(!v||v[E.route.id]===void 0);if(E.route.lazy||O){y=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((m,E,x)=>{let v,O=!1,V=null,U=null;n&&(v=h&&E.route.id?h[E.route.id]:void 0,V=E.route.errorElement||ET,y&&(p<0&&x===0?(KE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,U=null):p===x&&(O=!0,U=E.route.hydrateFallbackElement||null)));let H=e.concat(a.slice(0,x+1)),F=()=>{let D;return v?D=V:O?D=U:E.route.Component?D=ne.createElement(E.route.Component,null):E.route.element?D=E.route.element:D=m,ne.createElement(xT,{match:E,routeContext:{outlet:m,matches:H,isDataRoute:n!=null},children:D})};return n&&(E.route.ErrorBoundary||E.route.errorElement||x===0)?ne.createElement(_T,{location:n.location,revalidation:n.revalidation,component:V,error:v,children:F(),routeContext:{outlet:null,matches:H,isDataRoute:!0},unstable_onError:r}):F()},null)}function hg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IT(t){let e=ne.useContext(il);return Dt(e,hg(t)),e}function CT(t){let e=ne.useContext(Af);return Dt(e,hg(t)),e}function vT(t){let e=ne.useContext(as);return Dt(e,hg(t)),e}function fg(t){let e=vT(t),n=e.matches[e.matches.length-1];return Dt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function TT(){return fg("useRouteId")}function ST(){var r;let t=ne.useContext(cg),e=CT("useRouteError"),n=fg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function RT(){let{router:t}=IT("useNavigate"),e=fg("useNavigate"),n=ne.useRef(!1);return GE(()=>{n.current=!0}),ne.useCallback(async(s,a={})=>{Ci(n.current,WE),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var Tm={};function KE(t,e,n){!e&&!Tm[t]&&(Tm[t]=!0,Ci(!1,n))}ne.memo(NT);function NT({routes:t,future:e,state:n,unstable_onError:r}){return XE(t,void 0,n,r,e)}function _s(t){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bT({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){Dt(!Hu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),y=ne.useMemo(()=>({basename:h,navigator:s,static:a,future:{}}),[h,s,a]);typeof n=="string"&&(n=rl(n));let{pathname:p="/",search:m="",hash:E="",state:x=null,key:v="default"}=n,O=ne.useMemo(()=>{let V=ts(p,h);return V==null?null:{location:{pathname:V,search:m,hash:E,state:x,key:v},navigationType:r}},[h,p,m,E,x,v,r]);return Ci(O!=null,`<Router basename="${h}"> is not able to match the URL "${p}${m}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:ne.createElement(Ni.Provider,{value:y},ne.createElement(ju.Provider,{children:e,value:O}))}function PT({children:t,location:e}){return yT(B1(t),e)}function B1(t,e=[]){let n=[];return ne.Children.forEach(t,(r,s)=>{if(!ne.isValidElement(r))return;let a=[...e,s];if(r.type===ne.Fragment){n.push.apply(n,B1(r.props.children,a));return}Dt(r.type===_s,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=B1(r.props.children,a)),n.push(h)}),n}var qc="get",Yc="application/x-www-form-urlencoded";function If(t){return t!=null&&typeof t.tagName=="string"}function OT(t){return If(t)&&t.tagName.toLowerCase()==="button"}function DT(t){return If(t)&&t.tagName.toLowerCase()==="form"}function kT(t){return If(t)&&t.tagName.toLowerCase()==="input"}function MT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LT(t,e){return t.button===0&&(!e||e==="_self")&&!MT(t)}var Sc=null;function FT(){if(Sc===null)try{new FormData(document.createElement("form"),0),Sc=!1}catch{Sc=!0}return Sc}var BT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rd(t){return t!=null&&!BT.has(t)?(Ci(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yc}"`),null):t}function VT(t,e){let n,r,s,a,h;if(DT(t)){let y=t.getAttribute("action");r=y?ts(y,e):null,n=t.getAttribute("method")||qc,s=Rd(t.getAttribute("enctype"))||Yc,a=new FormData(t)}else if(OT(t)||kT(t)&&(t.type==="submit"||t.type==="image")){let y=t.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||y.getAttribute("action");if(r=p?ts(p,e):null,n=t.getAttribute("formmethod")||y.getAttribute("method")||qc,s=Rd(t.getAttribute("formenctype"))||Rd(y.getAttribute("enctype"))||Yc,a=new FormData(y,t),!FT()){let{name:m,type:E,value:x}=t;if(E==="image"){let v=m?`${m}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else m&&a.append(m,x)}}else{if(If(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qc,r=null,s=Yc,h=t}return a&&s==="text/plain"&&(h=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UT(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ts(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function zT(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function HT(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let h=await zT(a,n);return h.links?h.links():[]}return[]}));return KT(r.flat(1).filter(jT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Sm(t,e,n,r,s,a){let h=(p,m)=>n[m]?p.route.id!==n[m].route.id:!0,y=(p,m)=>{var E;return n[m].pathname!==p.pathname||((E=n[m].route.path)==null?void 0:E.endsWith("*"))&&n[m].params["*"]!==p.params["*"]};return a==="assets"?e.filter((p,m)=>h(p,m)||y(p,m)):a==="data"?e.filter((p,m)=>{var x;let E=r.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,m)||y(p,m))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((x=n[0])==null?void 0:x.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function WT(t,e,{includeHydrateFallback:n}={}){return GT(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function GT(t){return[...new Set(t)]}function XT(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function KT(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(XT(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function qE(){let t=ne.useContext(il);return dg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qT(){let t=ne.useContext(Af);return dg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var gg=ne.createContext(void 0);gg.displayName="FrameworkContext";function YE(){let t=ne.useContext(gg);return dg(t,"You must render this element inside a <HydratedRouter> element"),t}function YT(t,e){let n=ne.useContext(gg),[r,s]=ne.useState(!1),[a,h]=ne.useState(!1),{onFocus:y,onBlur:p,onMouseEnter:m,onMouseLeave:E,onTouchStart:x}=e,v=ne.useRef(null);ne.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let U=F=>{F.forEach(D=>{h(D.isIntersecting)})},H=new IntersectionObserver(U,{threshold:.5});return v.current&&H.observe(v.current),()=>{H.disconnect()}}},[t]),ne.useEffect(()=>{if(r){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[r]);let O=()=>{s(!0)},V=()=>{s(!1),h(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:Ml(y,O),onBlur:Ml(p,V),onMouseEnter:Ml(m,O),onMouseLeave:Ml(E,V),onTouchStart:Ml(x,O)}]:[!1,v,{}]}function Ml(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function QT({page:t,...e}){let{router:n}=qE(),r=ne.useMemo(()=>FE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?ne.createElement(ZT,{page:t,matches:r,...e}):null}function $T(t){let{manifest:e,routeModules:n}=YE(),[r,s]=ne.useState([]);return ne.useEffect(()=>{let a=!1;return HT(t,e,n).then(h=>{a||s(h)}),()=>{a=!0}},[t,e,n]),r}function ZT({page:t,matches:e,...n}){let r=Ho(),{manifest:s,routeModules:a}=YE(),{basename:h}=qE(),{loaderData:y,matches:p}=qT(),m=ne.useMemo(()=>Sm(t,e,p,s,r,"data"),[t,e,p,s,r]),E=ne.useMemo(()=>Sm(t,e,p,s,r,"assets"),[t,e,p,s,r]),x=ne.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let V=new Set,U=!1;if(e.forEach(F=>{var N;let D=s.routes[F.route.id];!D||!D.hasLoader||(!m.some(q=>q.route.id===F.route.id)&&F.route.id in y&&((N=a[F.route.id])!=null&&N.shouldRevalidate)||D.hasClientLoader?U=!0:V.add(F.route.id))}),V.size===0)return[];let H=UT(t,h,"data");return U&&V.size>0&&H.searchParams.set("_routes",e.filter(F=>V.has(F.route.id)).map(F=>F.route.id).join(",")),[H.pathname+H.search]},[h,y,r,s,m,e,t,a]),v=ne.useMemo(()=>WT(E,s),[E,s]),O=$T(E);return ne.createElement(ne.Fragment,null,x.map(V=>ne.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),v.map(V=>ne.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),O.map(({key:V,link:U})=>ne.createElement("link",{key:V,nonce:n.nonce,...U})))}function JT(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var QE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QE&&(window.__reactRouterVersion="7.9.1")}catch{}function e3({basename:t,children:e,window:n}){let r=ne.useRef();r.current==null&&(r.current=zv({window:n,v5Compat:!0}));let s=r.current,[a,h]=ne.useState({action:s.action,location:s.location}),y=ne.useCallback(p=>{ne.startTransition(()=>h(p))},[h]);return ne.useLayoutEffect(()=>s.listen(y),[s,y]),ne.createElement(bT,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var $E=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cf=ne.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:h,state:y,target:p,to:m,preventScrollReset:E,viewTransition:x,...v},O){let{basename:V}=ne.useContext(Ni),U=typeof m=="string"&&$E.test(m),H,F=!1;if(typeof m=="string"&&U&&(H=m,QE))try{let b=new URL(window.location.href),j=m.startsWith("//")?new URL(b.protocol+m):new URL(m),W=ts(j.pathname,V);j.origin===b.origin&&W!=null?m=W+j.search+j.hash:F=!0}catch{Ci(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=gT(m,{relative:s}),[N,q,ie]=YT(r,v),re=i3(m,{replace:h,state:y,target:p,preventScrollReset:E,relative:s,viewTransition:x});function P(b){e&&e(b),b.defaultPrevented||re(b)}let k=ne.createElement("a",{...v,...ie,href:H||D,onClick:F||a?e:P,ref:JT(O,q),target:p,"data-discover":!U&&n==="render"?"true":void 0});return N&&!U?ne.createElement(ne.Fragment,null,k,ne.createElement(QT,{page:D})):k});Cf.displayName="Link";var t3=ne.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:h,viewTransition:y,children:p,...m},E){let x=Wu(h,{relative:m.relative}),v=Ho(),O=ne.useContext(Af),{navigator:V,basename:U}=ne.useContext(Ni),H=O!=null&&u3(x)&&y===!0,F=V.encodeLocation?V.encodeLocation(x).pathname:x.pathname,D=v.pathname,N=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(D=D.toLowerCase(),N=N?N.toLowerCase():null,F=F.toLowerCase()),N&&U&&(N=ts(N,U)||N);const q=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let ie=D===F||!s&&D.startsWith(F)&&D.charAt(q)==="/",re=N!=null&&(N===F||!s&&N.startsWith(F)&&N.charAt(F.length)==="/"),P={isActive:ie,isPending:re,isTransitioning:H},k=ie?e:void 0,b;typeof r=="function"?b=r(P):b=[r,ie?"active":null,re?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(P):a;return ne.createElement(Cf,{...m,"aria-current":k,className:b,ref:E,style:j,to:h,viewTransition:y},typeof p=="function"?p(P):p)});t3.displayName="NavLink";var n3=ne.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:h=qc,action:y,onSubmit:p,relative:m,preventScrollReset:E,viewTransition:x,...v},O)=>{let V=a3(),U=l3(y,{relative:m}),H=h.toLowerCase()==="get"?"get":"post",F=typeof y=="string"&&$E.test(y),D=N=>{if(p&&p(N),N.defaultPrevented)return;N.preventDefault();let q=N.nativeEvent.submitter,ie=(q==null?void 0:q.getAttribute("formmethod"))||h;V(q||N.currentTarget,{fetcherKey:e,method:ie,navigate:n,replace:s,state:a,relative:m,preventScrollReset:E,viewTransition:x})};return ne.createElement("form",{ref:O,method:H,action:U,onSubmit:r?p:D,...v,"data-discover":!F&&t==="render"?"true":void 0})});n3.displayName="Form";function r3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(t){let e=ne.useContext(il);return Dt(e,r3(t)),e}function i3(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:h}={}){let y=pT(),p=Ho(),m=Wu(t,{relative:a});return ne.useCallback(E=>{if(LT(E,e)){E.preventDefault();let x=n!==void 0?n:Tu(p)===Tu(m);y(t,{replace:x,state:r,preventScrollReset:s,relative:a,viewTransition:h})}},[p,y,m,n,r,e,t,s,a,h])}var s3=0,o3=()=>`__${String(++s3)}__`;function a3(){let{router:t}=ZE("useSubmit"),{basename:e}=ne.useContext(Ni),n=TT();return ne.useCallback(async(r,s={})=>{let{action:a,method:h,encType:y,formData:p,body:m}=VT(r,e);if(s.navigate===!1){let E=s.fetcherKey||o3();await t.fetch(E,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:p,body:m,formMethod:s.method||h,formEncType:s.encType||y,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:p,body:m,formMethod:s.method||h,formEncType:s.encType||y,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function l3(t,{relative:e}={}){let{basename:n}=ne.useContext(Ni),r=ne.useContext(as);Dt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Wu(t||".",{relative:e})},h=Ho();if(t==null){a.search=h.search;let y=new URLSearchParams(a.search),p=y.getAll("index");if(p.some(E=>E==="")){y.delete("index"),p.filter(x=>x).forEach(x=>y.append("index",x));let E=y.toString();a.search=E?`?${E}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Qi([n,a.pathname])),Tu(a)}function u3(t,{relative:e}={}){let n=ne.useContext(HE);Dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZE("useViewTransitionState"),s=Wu(t,{relative:e});if(!n.isTransitioning)return!1;let a=ts(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=ts(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ph(s.pathname,h)!=null||Ph(s.pathname,a)!=null}function c3(){const[t,e]=ne.useState(""),[n,r]=ne.useState(""),[s,a]=ne.useState(""),h=async()=>{(await fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})})).ok?a("登入成功！"):a("登入失敗！")};return se.jsxs("div",{className:"page-container",children:[se.jsx("h2",{children:"信箱 Mailbox"}),se.jsx("input",{value:t,onChange:y=>e(y.target.value),placeholder:"帳號"}),se.jsx("input",{value:n,onChange:y=>r(y.target.value),type:"password",placeholder:"密碼"}),se.jsx("button",{onClick:h,children:"登入"}),se.jsx("p",{children:s})]})}const h3=[{route:"紅線",start:"火車站",end:"科學園區",time:"06:00 - 22:00",interval:"10 分鐘",description:"途經市中心、科學園區，停靠 10 個站點"},{route:"藍線",start:"東門",end:"光復路",time:"06:30 - 21:30",interval:"15 分鐘",description:"途經東區、光復路，停靠 8 個站點"},{route:"綠線",start:"市政府",end:"高鐵站",time:"07:00 - 20:00",interval:"12 分鐘",description:"連接市政府與高鐵站，途經科學園區"},{route:"黃線",start:"北區",end:"南區",time:"06:15 - 22:15",interval:"20 分鐘",description:"貫穿北區與南區，途經主要商圈"},{route:"橘線",start:"中央公園",end:"東湖",time:"06:45 - 21:45",interval:"15 分鐘",description:"環狀路線，途經學校與住宅區"},{route:"紫線",start:"新竹站",end:"香山",time:"07:00 - 20:30",interval:"30 分鐘",description:"跨區路線，連接新竹市與香山"},{route:"粉紅線",start:"科學園區",end:"新竹市政府",time:"06:30 - 22:00",interval:"10 分鐘",description:"主要接駁園區與政府機關"},{route:"灰線",start:"南門",end:"北門",time:"06:00 - 21:00",interval:"25 分鐘",description:"連接南北區，停靠住宅與商業區"}];function f3(){const[t,e]=ne.useState([]);return ne.useEffect(()=>{e(h3)},[]),se.jsx("div",{className:"page-container",children:se.jsxs("section",{className:"info-section",children:[se.jsx("h1",{children:"園區公車資訊"}),se.jsx("div",{className:"bus-cards-container",children:t.map((n,r)=>se.jsxs("div",{className:"bus-card",children:[se.jsxs("h2",{children:[n.route,"（",n.start," → ",n.end,"）"]}),se.jsxs("p",{children:[se.jsx("strong",{children:"營運時間："}),n.time]}),se.jsxs("p",{children:[se.jsx("strong",{children:"發車間隔："}),n.interval]}),se.jsxs("p",{children:[se.jsx("strong",{children:"路線描述："}),n.description]})]},r))})]})})}const d3={office:[{title_zh:"辦公室",title_en:"Office Room",desc_zh:"辦公人員使用",desc_en:"For office staff",phone:"1234-5678",time:"9:00-18:00"},{title_zh:"會議室",title_en:"Conference Room",desc_zh:"會議與討論空間",desc_en:"Meeting and discussion space",phone:"2345-6789",time:"9:00-18:00"},{title_zh:"無塵室",title_en:"Clean Room",desc_zh:"特殊環境",desc_en:"Special environment",phone:"3456-7890",time:"9:00-18:00"}],sport:[{title_zh:"健身房",title_en:"Gym",desc_zh:"運動健身",desc_en:"Fitness exercise",phone:"4567-8901",time:"6:00-22:00"},{title_zh:"游泳池",title_en:"Swimming Pool",desc_zh:"游泳休閒",desc_en:"Swimming leisure",phone:"5678-9012",time:"6:00-22:00"},{title_zh:"綜合球場",title_en:"Comprehensive Court",desc_zh:"多功能球場",desc_en:"Multi-purpose court",phone:"6789-0123",time:"6:00-22:00"}],leisure:[{title_zh:"圖書館",title_en:"Library",desc_zh:"閱讀書籍",desc_en:"Read books",phone:"7890-1234",time:"9:00-20:00"},{title_zh:"書店",title_en:"Book Store",desc_zh:"買書看書",desc_en:"Buy and read books",phone:"8901-2345",time:"9:00-20:00"},{title_zh:"展演廳",title_en:"Exhibition Hall",desc_zh:"展演活動",desc_en:"Exhibitions and performances",phone:"9012-3456",time:"9:00-20:00"}],food:[{title_zh:"麵包店",title_en:"Bread Store",desc_zh:"各式麵包",desc_en:"Various breads",phone:"0123-4567",time:"8:00-20:00"},{title_zh:"超商",title_en:"Convenience Store",desc_zh:"便利商店",desc_en:"Convenience store",phone:"1234-5670",time:"0:00-24:00"},{title_zh:"咖啡廳",title_en:"Coffee Shop",desc_zh:"飲品咖啡",desc_en:"Drinks and coffee",phone:"2345-6780",time:"8:00-20:00"}]};function g3({category:t,title:e,desc:n,phone:r,time:s}){return se.jsxs("div",{className:`card ${t}`,children:[se.jsx("h3",{children:e}),se.jsx("p",{children:n}),se.jsxs("p",{children:["📞 ",r]}),se.jsxs("p",{children:["🕒 ",s]})]})}function p3({lang:t}){const[e,n]=ne.useState("office"),r=[{key:"office",label_zh:"辦公場所",label_en:"Office"},{key:"sport",label_zh:"運動設施",label_en:"Sports"},{key:"leisure",label_zh:"休閒場所",label_en:"Leisure"},{key:"food",label_zh:"美食街",label_en:"Food Court"}];return se.jsxs("div",{className:"explore-page",children:[se.jsx("h1",{children:t==="zh"?"探索環境":"Explore Environment"}),se.jsx("div",{className:"category-buttons",children:r.map(s=>se.jsx("button",{className:`category-btn ${e===s.key?"active":""}`,onClick:()=>n(s.key),children:t==="zh"?s.label_zh:s.label_en},s.key))}),se.jsx("div",{className:"cards-container",children:d3[e].map((s,a)=>se.jsx(g3,{category:e,title:t==="zh"?s.title_zh:s.title_en,desc:t==="zh"?s.desc_zh:s.desc_en,phone:s.phone,time:s.time},a))})]})}function Rm({tasks:t=[],completedIds:e=[],onComplete:n,lang:r="zh"}){const s={zh:{point:"分",complete:"完成",done:"已完成"},en:{point:"pt",complete:"Complete",done:"Done"}};return se.jsx("ul",{style:{listStyle:"none",padding:0,width:"100%"},children:t.map(a=>{const h=e.includes(a.id);return se.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",border:"1px solid #eee",borderRadius:8,marginBottom:8,background:h?"#f6fff6":"#fff"},children:[se.jsxs("div",{style:{textAlign:"left"},children:[se.jsx("div",{style:{fontWeight:600},children:a.text}),se.jsxs("div",{style:{fontSize:12,color:"#666"},children:[a.point," ",s[r].point]})]}),se.jsx("button",{onClick:()=>n&&n(a),disabled:h,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:h?"#9e9e9e":"#4caf50",color:"#fff",cursor:h?"not-allowed":"pointer"},children:h?a.doneLabel||s[r].done:a.completeLabel||s[r].complete})]},a.id)})})}function m3({lang:t}){const r=t==="zh"?[{id:1,text:"找同事喝咖啡(掃描QRCODE以完成任務)",point:10},{id:2,text:"和同事吃午餐(掃描QRCODE以完成任務)",point:10},{id:3,text:"共用辦公設備",point:10},{id:4,text:"一起參加公司活動",point:20},{id:5,text:"認識實習生(掃描QRCODE以完成任務)連結gmail",point:20},{id:6,text:"分享工作經驗",point:15},{id:7,text:"參與團隊會議並提出建議",point:15},{id:8,text:"組織團隊建設活動",point:25},{id:9,text:"參加公司志願者活動",point:30},{id:10,text:"推薦優秀人才加入公司",point:50},{id:11,text:"與同事合作完成專案",point:40},{id:12,text:"參加跨部門合作",point:35},{id:13,text:"完成編輯個人檔案",point:15}]:[{id:1,text:"Have coffee with colleagues",point:10},{id:2,text:"Have lunch together",point:10},{id:3,text:"Share office equipment",point:10},{id:4,text:"Participate in company events",point:20},{id:5,text:"Get to know interns",point:20},{id:6,text:"Share work experience",point:15},{id:7,text:"Attend team meetings and provide suggestions",point:15},{id:8,text:"Organize team-building activities",point:25},{id:9,text:"Join company volunteer activities",point:30},{id:10,text:"Refer talented individuals to join the company",point:50},{id:11,text:"Collaborate with colleagues to complete projects",point:40},{id:12,text:"Participate in cross-departmental collaboration",point:35},{id:13,text:"Complete and edit personal profile",point:15}],[s,a]=ne.useState(()=>parseInt(localStorage.getItem("score"))||0),[h,y]=ne.useState(()=>{const x=localStorage.getItem("completedIds");return x?JSON.parse(x):[]}),[p,m]=ne.useState("tasks");ne.useEffect(()=>{localStorage.setItem("score",s),localStorage.setItem("completedIds",JSON.stringify(h))},[s,h]);const E=x=>{h.includes(x.id)||(a(v=>v+x.point),y(v=>[...v,x.id]))};return se.jsxs("div",{className:"page-container",style:{textAlign:"center"},children:[se.jsx("h2",{children:t==="zh"?"社交任務":"Social Tasks"}),se.jsx("p",{children:t==="zh"?"完成與同梯互動的任務":"Complete social tasks with colleagues"}),se.jsxs("div",{style:{marginBottom:"20px"},children:[se.jsx("button",{onClick:()=>m("tasks"),style:{marginRight:"10px",backgroundColor:p==="tasks"?"#4caf50":"#eee",color:p==="tasks"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:t==="zh"?"任務列表":"Task List"}),se.jsx("button",{onClick:()=>m("completed"),style:{backgroundColor:p==="completed"?"#4caf50":"#eee",color:p==="completed"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:t==="zh"?"已完成任務":"Completed Tasks"})]}),p==="completed"&&se.jsx(Rm,{tasks:r,completedIds:h,onComplete:E,lang:t}),p==="tasks"&&se.jsx(Rm,{tasks:r,completedIds:h,onComplete:E,lang:t})]})}const y3=()=>{};var Nm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},w3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],h=t[n++],y=t[n++],p=((s&7)<<18|(a&63)<<12|(h&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=t[n++],h=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|h&63)}}return e.join("")},e_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],h=s+1<t.length,y=h?t[s+1]:0,p=s+2<t.length,m=p?t[s+2]:0,E=a>>2,x=(a&3)<<4|y>>4;let v=(y&15)<<2|m>>6,O=m&63;p||(O=64,h||(v=64)),r.push(n[E],n[x],n[v],n[O])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],y=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const x=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||y==null||m==null||x==null)throw new E3;const v=a<<2|y>>4;if(r.push(v),m!==64){const O=y<<4&240|m>>2;if(r.push(O),x!==64){const V=m<<6&192|x;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _3=function(t){const e=JE(t);return e_.encodeByteArray(e,!0)},Oh=function(t){return _3(t).replace(/\./g,"")},t_=function(t){try{return e_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=()=>x3().__FIREBASE_DEFAULTS__,I3=()=>{if(typeof process>"u"||typeof Nm>"u")return;const t=Nm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t_(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return y3()||A3()||I3()||C3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},n_=t=>{var e,n;return(n=(e=vf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},r_=t=>{const e=n_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i_=()=>{var t;return(t=vf())==null?void 0:t.config},s_=t=>{var e;return(e=vf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Oh(JSON.stringify(n)),Oh(JSON.stringify(h)),""].join(".")}const Jl={};function T3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?t.emulator.push(e):t.prod.push(e);return t}function S3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bm=!1;function mg(t,e){if(typeof window>"u"||typeof document>"u"||!Wo(window.location.host)||Jl[t]===e||Jl[t]||bm)return;Jl[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=T3().prod.length>0;function h(){const v=document.getElementById(r);v&&v.remove()}function y(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function p(v,O){v.setAttribute("width","24"),v.setAttribute("id",O),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{bm=!0,h()},v}function E(v,O){v.setAttribute("id",O),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function x(){const v=S3(r),O=n("text"),V=document.getElementById(O)||document.createElement("span"),U=n("learnmore"),H=document.getElementById(U)||document.createElement("a"),F=n("preprendIcon"),D=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const N=v.element;y(N),E(H,U);const q=m();p(D,F),N.append(D,V,H,q),document.body.appendChild(N)}a?(V.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function N3(){var e;const t=(e=vf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function P3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O3(){const t=Ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D3(){return!N3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l_(){try{return typeof indexedDB=="object"}catch{return!1}}function u_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}function k3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="FirebaseError";class Vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M3,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Go.prototype.create)}}class Go{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],h=a?L3(a,r):"Error",y=`${this.serviceName}: ${h} (${s}).`;return new Vr(s,y,r)}}function L3(t,e){return t.replace(F3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const F3=/\{\$([^}]+)}/g;function B3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],h=e[s];if(Pm(a)&&Pm(h)){if(!Gs(a,h))return!1}else if(a!==h)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function V3(t,e){const n=new U3(t,e);return n.subscribe.bind(n)}class U3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");z3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nd),s.error===void 0&&(s.error=Nd),s.complete===void 0&&(s.complete=Nd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=1e3,H3=2,W3=4*60*60*1e3,G3=.5;function Om(t,e=j3,n=H3){const r=e*Math.pow(n,t),s=Math.round(G3*r*(Math.random()-.5)*2);return Math.min(W3,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t){return t&&t._delegate?t._delegate:t}class Br{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new v3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q3(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,h]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(a);r===y&&h.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K3(t){return t===wo?void 0:t}function q3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const Q3={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},$3=Ke.INFO,Z3={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},J3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Z3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=$3,this._logHandler=J3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const eS=(t,e)=>e.some(n=>t instanceof n);let Dm,km;function tS(){return Dm||(Dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nS(){return km||(km=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c_=new WeakMap,V1=new WeakMap,h_=new WeakMap,bd=new WeakMap,yg=new WeakMap;function rS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",h)},a=()=>{n(Vs(t.result)),s()},h=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&c_.set(n,t)}).catch(()=>{}),yg.set(e,t),e}function iS(t){if(V1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",h),t.removeEventListener("abort",h)},a=()=>{n(),s()},h=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",h),t.addEventListener("abort",h)});V1.set(t,e)}let U1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return V1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sS(t){U1=t(U1)}function oS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pd(this),e,...n);return h_.set(r,e.sort?e.sort():[e]),Vs(r)}:nS().includes(t)?function(...e){return t.apply(Pd(this),e),Vs(c_.get(this))}:function(...e){return Vs(t.apply(Pd(this),e))}}function aS(t){return typeof t=="function"?oS(t):(t instanceof IDBTransaction&&iS(t),eS(t,tS())?new Proxy(t,U1):t)}function Vs(t){if(t instanceof IDBRequest)return rS(t);if(bd.has(t))return bd.get(t);const e=aS(t);return e!==t&&(bd.set(t,e),yg.set(e,t)),e}const Pd=t=>yg.get(t);function f_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const h=indexedDB.open(t,e),y=Vs(h);return r&&h.addEventListener("upgradeneeded",p=>{r(Vs(h.result),p.oldVersion,p.newVersion,Vs(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),y.then(p=>{a&&p.addEventListener("close",()=>a()),s&&p.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),y}const lS=["get","getKey","getAll","getAllKeys","count"],uS=["put","add","delete","clear"],Od=new Map;function Mm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Od.get(e))return Od.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lS.includes(n)))return;const a=async function(h,...y){const p=this.transaction(h,s?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(y.shift())),(await Promise.all([m[n](...y),s&&p.done]))[0]};return Od.set(e,a),a}sS(t=>({...t,get:(e,n,r)=>Mm(e,n)||t.get(e,n,r),has:(e,n)=>!!Mm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const z1="@firebase/app",Lm="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Tf("@firebase/app"),fS="@firebase/app-compat",dS="@firebase/analytics-compat",gS="@firebase/analytics",pS="@firebase/app-check-compat",mS="@firebase/app-check",yS="@firebase/auth",wS="@firebase/auth-compat",ES="@firebase/database",_S="@firebase/data-connect",xS="@firebase/database-compat",AS="@firebase/functions",IS="@firebase/functions-compat",CS="@firebase/installations",vS="@firebase/installations-compat",TS="@firebase/messaging",SS="@firebase/messaging-compat",RS="@firebase/performance",NS="@firebase/performance-compat",bS="@firebase/remote-config",PS="@firebase/remote-config-compat",OS="@firebase/storage",DS="@firebase/storage-compat",kS="@firebase/firestore",MS="@firebase/ai",LS="@firebase/firestore-compat",FS="firebase",BS="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="[DEFAULT]",VS={[z1]:"fire-core",[fS]:"fire-core-compat",[gS]:"fire-analytics",[dS]:"fire-analytics-compat",[mS]:"fire-app-check",[pS]:"fire-app-check-compat",[yS]:"fire-auth",[wS]:"fire-auth-compat",[ES]:"fire-rtdb",[_S]:"fire-data-connect",[xS]:"fire-rtdb-compat",[AS]:"fire-fn",[IS]:"fire-fn-compat",[CS]:"fire-iid",[vS]:"fire-iid-compat",[TS]:"fire-fcm",[SS]:"fire-fcm-compat",[RS]:"fire-perf",[NS]:"fire-perf-compat",[bS]:"fire-rc",[PS]:"fire-rc-compat",[OS]:"fire-gcs",[DS]:"fire-gcs-compat",[kS]:"fire-fst",[LS]:"fire-fst-compat",[MS]:"fire-vertex","fire-js":"fire-js",[FS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map,US=new Map,H1=new Map;function Fm(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ti(t){const e=t.name;if(H1.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;H1.set(e,t);for(const n of Dh.values())Fm(n,t);for(const n of US.values())Fm(n,t);return!0}function to(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Or(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Go("app","Firebase",zS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=BS;function d_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:j1,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Us.create("bad-app-name",{appName:String(s)});if(n||(n=i_()),!n)throw Us.create("no-options");const a=Dh.get(s);if(a){if(Gs(n,a.options)&&Gs(r,a.config))return a;throw Us.create("duplicate-app",{appName:s})}const h=new Y3(s);for(const p of H1.values())h.addComponent(p);const y=new jS(n,r,h);return Dh.set(s,y),y}function Sf(t=j1){const e=Dh.get(t);if(!e&&t===j1&&i_())return d_();if(!e)throw Us.create("no-app",{appName:t});return e}function nr(t,e,n){let r=VS[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const h=[`Unable to register library "${r}" with version "${e}":`];s&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&h.push("and"),a&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(h.join(" "));return}ti(new Br(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="firebase-heartbeat-database",WS=1,Su="firebase-heartbeat-store";let Dd=null;function g_(){return Dd||(Dd=f_(HS,WS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Su)}catch(n){console.warn(n)}}}}).catch(t=>{throw Us.create("idb-open",{originalErrorMessage:t.message})})),Dd}async function GS(t){try{const n=(await g_()).transaction(Su),r=await n.objectStore(Su).get(p_(t));return await n.done,r}catch(e){if(e instanceof Vr)ns.warn(e.message);else{const n=Us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(n.message)}}}async function Bm(t,e){try{const r=(await g_()).transaction(Su,"readwrite");await r.objectStore(Su).put(e,p_(t)),await r.done}catch(n){if(n instanceof Vr)ns.warn(n.message);else{const r=Us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ns.warn(r.message)}}}function p_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=1024,KS=30;class qS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Vm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(h=>h.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>KS){const h=$S(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vm(),{heartbeatsToSend:r,unsentEntries:s}=YS(this._heartbeatsCache.heartbeats),a=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ns.warn(n),""}}}function Vm(){return new Date().toISOString().substring(0,10)}function YS(t,e=XS){const n=[];let r=t.slice();for(const s of t){const a=n.find(h=>h.agent===s.agent);if(a){if(a.dates.push(s.date),Um(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Um(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return l_()?u_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Bm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Um(t){return Oh(JSON.stringify({version:2,heartbeats:t})).length}function $S(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){ti(new Br("platform-logger",e=>new cS(e),"PRIVATE")),ti(new Br("heartbeat",e=>new qS(e),"PRIVATE")),nr(z1,Lm,t),nr(z1,Lm,"esm2020"),nr("fire-js","")}ZS("");var JS="firebase",e4="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(JS,e4,"app");const m_="@firebase/installations",wg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=1e4,w_=`w:${wg}`,E_="FIS_v2",t4="https://firebaseinstallations.googleapis.com/v1",n4=60*60*1e3,r4="installations",i4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ko=new Go(r4,i4,s4);function __(t){return t instanceof Vr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_({projectId:t}){return`${t4}/projects/${t}/installations`}function A_(t){return{token:t.token,requestStatus:2,expiresIn:a4(t.expiresIn),creationTime:Date.now()}}async function I_(t,e){const r=(await e.json()).error;return ko.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function C_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function o4(t,{refreshToken:e}){const n=C_(t);return n.append("Authorization",l4(e)),n}async function v_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function a4(t){return Number(t.replace("s","000"))}function l4(t){return`${E_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=x_(t),s=C_(t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const h={fid:n,authVersion:E_,appId:t.appId,sdkVersion:w_},y={method:"POST",headers:s,body:JSON.stringify(h)},p=await v_(()=>fetch(r,y));if(p.ok){const m=await p.json();return{fid:m.fid||n,registrationStatus:2,refreshToken:m.refreshToken,authToken:A_(m.authToken)}}else throw await I_("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=/^[cdef][\w-]{21}$/,W1="";function f4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=d4(t);return h4.test(n)?n:W1}catch{return W1}}function d4(t){return c4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;function R_(t,e){const n=Rf(t);N_(n,e),g4(n,e)}function N_(t,e){const n=S_.get(t);if(n)for(const r of n)r(e)}function g4(t,e){const n=p4();n&&n.postMessage({key:t,fid:e}),m4()}let Ao=null;function p4(){return!Ao&&"BroadcastChannel"in self&&(Ao=new BroadcastChannel("[Firebase] FID Change"),Ao.onmessage=t=>{N_(t.data.key,t.data.fid)}),Ao}function m4(){S_.size===0&&Ao&&(Ao.close(),Ao=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="firebase-installations-database",w4=1,Mo="firebase-installations-store";let kd=null;function Eg(){return kd||(kd=f_(y4,w4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Mo)}}})),kd}async function kh(t,e){const n=Rf(t),s=(await Eg()).transaction(Mo,"readwrite"),a=s.objectStore(Mo),h=await a.get(n);return await a.put(e,n),await s.done,(!h||h.fid!==e.fid)&&R_(t,e.fid),e}async function b_(t){const e=Rf(t),r=(await Eg()).transaction(Mo,"readwrite");await r.objectStore(Mo).delete(e),await r.done}async function Nf(t,e){const n=Rf(t),s=(await Eg()).transaction(Mo,"readwrite"),a=s.objectStore(Mo),h=await a.get(n),y=e(h);return y===void 0?await a.delete(n):await a.put(y,n),await s.done,y&&(!h||h.fid!==y.fid)&&R_(t,y.fid),y}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _g(t){let e;const n=await Nf(t.appConfig,r=>{const s=E4(r),a=_4(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===W1?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function E4(t){const e=t||{fid:f4(),registrationStatus:0};return P_(e)}function _4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ko.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=x4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:A4(t)}:{installationEntry:e}}async function x4(t,e){try{const n=await u4(t,e);return kh(t.appConfig,n)}catch(n){throw __(n)&&n.customData.serverCode===409?await b_(t.appConfig):await kh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function A4(t){let e=await zm(t.appConfig);for(;e.registrationStatus===1;)await T_(100),e=await zm(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _g(t);return r||n}return e}function zm(t){return Nf(t,e=>{if(!e)throw ko.create("installation-not-found");return P_(e)})}function P_(t){return I4(t)?{fid:t.fid,registrationStatus:0}:t}function I4(t){return t.registrationStatus===1&&t.registrationTime+y_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4({appConfig:t,heartbeatServiceProvider:e},n){const r=v4(t,n),s=o4(t,n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const h={installation:{sdkVersion:w_,appId:t.appId}},y={method:"POST",headers:s,body:JSON.stringify(h)},p=await v_(()=>fetch(r,y));if(p.ok){const m=await p.json();return A_(m)}else throw await I_("Generate Auth Token",p)}function v4(t,{fid:e}){return`${x_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xg(t,e=!1){let n;const r=await Nf(t.appConfig,a=>{if(!O_(a))throw ko.create("not-registered");const h=a.authToken;if(!e&&R4(h))return a;if(h.requestStatus===1)return n=T4(t,e),a;{if(!navigator.onLine)throw ko.create("app-offline");const y=b4(a);return n=S4(t,y),y}});return n?await n:r.authToken}async function T4(t,e){let n=await jm(t.appConfig);for(;n.authToken.requestStatus===1;)await T_(100),n=await jm(t.appConfig);const r=n.authToken;return r.requestStatus===0?xg(t,e):r}function jm(t){return Nf(t,e=>{if(!O_(e))throw ko.create("not-registered");const n=e.authToken;return P4(n)?{...e,authToken:{requestStatus:0}}:e})}async function S4(t,e){try{const n=await C4(t,e),r={...e,authToken:n};return await kh(t.appConfig,r),n}catch(n){if(__(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await b_(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await kh(t.appConfig,r)}throw n}}function O_(t){return t!==void 0&&t.registrationStatus===2}function R4(t){return t.requestStatus===2&&!N4(t)}function N4(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+n4}function b4(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function P4(t){return t.requestStatus===1&&t.requestTime+y_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t){const e=t,{installationEntry:n,registrationPromise:r}=await _g(e);return r?r.catch(console.error):xg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e=!1){const n=t;return await k4(n),(await xg(n,e)).token}async function k4(t){const{registrationPromise:e}=await _g(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){if(!t||!t.options)throw Md("App Configuration");if(!t.name)throw Md("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Md(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Md(t){return ko.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="installations",L4="installations-internal",F4=t=>{const e=t.getProvider("app").getImmediate(),n=M4(e),r=to(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},B4=t=>{const e=t.getProvider("app").getImmediate(),n=to(e,D_).getImmediate();return{getId:()=>O4(n),getToken:s=>D4(n,s)}};function V4(){ti(new Br(D_,F4,"PUBLIC")),ti(new Br(L4,B4,"PRIVATE"))}V4();nr(m_,wg);nr(m_,wg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="analytics",U4="firebase_id",z4="origin",j4=60*1e3,H4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ag="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Tf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yr=new Go("analytics","Analytics",W4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){if(!t.startsWith(Ag)){const e=yr.create("invalid-gtag-resource",{gtagURL:t});return rr.warn(e.message),""}return t}function k_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function X4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function K4(t,e){const n=X4("firebase-js-sdk-policy",{createScriptURL:G4}),r=document.createElement("script"),s=`${Ag}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function q4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Y4(t,e,n,r,s,a){const h=r[s];try{if(h)await e[h];else{const p=(await k_(n)).find(m=>m.measurementId===s);p&&await e[p.appId]}}catch(y){rr.error(y)}t("config",s,a)}async function Q4(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let h=s.send_to;Array.isArray(h)||(h=[h]);const y=await k_(n);for(const p of h){const m=y.find(x=>x.measurementId===p),E=m&&e[m.appId];if(E)a.push(E);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){rr.error(a)}}function $4(t,e,n,r){async function s(a,...h){try{if(a==="event"){const[y,p]=h;await Q4(t,e,n,y,p)}else if(a==="config"){const[y,p]=h;await Y4(t,e,n,r,y,p)}else if(a==="consent"){const[y,p]=h;t("consent",y,p)}else if(a==="get"){const[y,p,m]=h;t("get",y,p,m)}else if(a==="set"){const[y]=h;t("set",y)}else t(a,...h)}catch(y){rr.error(y)}}return s}function Z4(t,e,n,r,s){let a=function(...h){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=$4(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function J4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ag)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=30,tR=1e3;class nR{constructor(e={},n=tR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const M_=new nR;function rR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function iR(t){var h;const{appId:e,apiKey:n}=t,r={method:"GET",headers:rR(n)},s=H4.replace("{app-id}",e),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let y="";try{const p=await a.json();(h=p.error)!=null&&h.message&&(y=p.error.message)}catch{}throw yr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:y})}return a.json()}async function sR(t,e=M_,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw yr.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw yr.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},y=new lR;return setTimeout(async()=>{y.abort()},j4),L_({appId:r,apiKey:s,measurementId:a},h,y,e)}async function L_(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=M_){var y;const{appId:a,measurementId:h}=t;try{await oR(r,e)}catch(p){if(h)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:h};throw p}try{const p=await iR(t);return s.deleteThrottleMetadata(a),p}catch(p){const m=p;if(!aR(m)){if(s.deleteThrottleMetadata(a),h)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:a,measurementId:h};throw p}const E=Number((y=m==null?void 0:m.customData)==null?void 0:y.httpStatus)===503?Om(n,s.intervalMillis,eR):Om(n,s.intervalMillis),x={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return s.setThrottleMetadata(a,x),rr.debug(`Calling attemptFetch again in ${E} millis`),L_(t,x,r,s)}}function oR(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(yr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function aR(t){if(!(t instanceof Vr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class lR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function uR(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,h={...r,send_to:a};t("event",n,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(){if(l_())try{await u_()}catch(t){return rr.warn(yr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return rr.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function hR(t,e,n,r,s,a,h){const y=sR(t);y.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>rr.error(v)),e.push(y);const p=cR().then(v=>{if(v)return r.getId()}),[m,E]=await Promise.all([y,p]);J4(a)||K4(a,m.measurementId),s("js",new Date);const x=(h==null?void 0:h.config)??{};return x[z4]="firebase",x.update=!0,E!=null&&(x[U4]=E),s("config",m.measurementId,x),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.app=e}_delete(){return delete eu[this.app.options.appId],Promise.resolve()}}let eu={},Hm=[];const Wm={};let Ld="dataLayer",dR="gtag",Gm,F_,Xm=!1;function gR(){const t=[];if(a_()&&t.push("This is a browser extension environment."),k3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=yr.create("invalid-analytics-context",{errorInfo:e});rr.warn(n.message)}}function pR(t,e,n){gR();const r=t.options.appId;if(!r)throw yr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yr.create("no-api-key");if(eu[r]!=null)throw yr.create("already-exists",{id:r});if(!Xm){q4(Ld);const{wrappedGtag:a,gtagCore:h}=Z4(eu,Hm,Wm,Ld,dR);F_=a,Gm=h,Xm=!0}return eu[r]=hR(t,Hm,Wm,e,Gm,Ld,n),new fR(t)}function mR(t=Sf()){t=yn(t);const e=to(t,Mh);return e.isInitialized()?e.getImmediate():yR(t)}function yR(t,e={}){const n=to(t,Mh);if(n.isInitialized()){const s=n.getImmediate();if(Gs(e,n.getOptions()))return s;throw yr.create("already-initialized")}return n.initialize({options:e})}function wR(t,e,n,r){t=yn(t),uR(F_,eu[t.app.options.appId],e,n,r).catch(s=>rr.error(s))}const Km="@firebase/analytics",qm="0.10.18";function ER(){ti(new Br(Mh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return pR(r,s,n)},"PUBLIC")),ti(new Br("analytics-internal",t,"PRIVATE")),nr(Km,qm),nr(Km,qm,"esm2020");function t(e){try{const n=e.getProvider(Mh).getImmediate();return{logEvent:(r,s,a)=>wR(n,r,s,a)}}catch(n){throw yr.create("interop-component-reg-failed",{reason:n})}}}ER();function B_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _R=B_,V_=new Go("auth","Firebase",B_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Tf("@firebase/auth");function xR(t,...e){Lh.logLevel<=Ke.WARN&&Lh.warn(`Auth (${Xo}): ${t}`,...e)}function Qc(t,...e){Lh.logLevel<=Ke.ERROR&&Lh.error(`Auth (${Xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,...e){throw Cg(t,...e)}function Jr(t,...e){return Cg(t,...e)}function Ig(t,e,n){const r={..._R(),[e]:n};return new Go("auth","Firebase",r).create(e,{appName:t.name})}function So(t){return Ig(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vi(t,"argument-error"),Ig(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return V_.create(t,...e)}function De(t,e,...n){if(!t)throw Cg(e,...n)}function Ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qc(e),new Error(e)}function rs(t,e){t||Ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function IR(){return Ym()==="http:"||Ym()==="https:"}function Ym(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IR()||a_()||"connection"in navigator)?navigator.onLine:!0}function vR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,rs(n>e,"Short delay should be less than long delay!"),this.isMobile=R3()||P3()}get(){return CR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e){rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RR=new Xu(3e4,6e4);function Tg(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function sl(t,e,n,r,s={}){return z_(t,s,async()=>{let a={},h={};r&&(e==="GET"?h=r:a={body:JSON.stringify(r)});const y=Gu({key:t.config.apiKey,...h}).slice(1),p=await t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);const m={method:e,headers:p,...a};return b3()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Wo(t.emulatorConfig.host)&&(m.credentials="include"),U_.fetch()(await j_(t,t.config.apiHost,n,y),m)})}async function z_(t,e,n){t._canInitEmulator=!1;const r={...TR,...e};try{const s=new bR(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const h=await a.json();if("needConfirmation"in h)throw Rc(t,"account-exists-with-different-credential",h);if(a.ok&&!("errorMessage"in h))return h;{const y=a.ok?h.errorMessage:h.error.message,[p,m]=y.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(t,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Rc(t,"email-already-in-use",h);if(p==="USER_DISABLED")throw Rc(t,"user-disabled",h);const E=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Ig(t,E,m);vi(t,E)}}catch(s){if(s instanceof Vr)throw s;vi(t,"network-request-failed",{message:String(s)})}}async function NR(t,e,n,r,s={}){const a=await sl(t,e,n,r,s);return"mfaPendingCredential"in a&&vi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function j_(t,e,n,r){const s=`${e}${n}?${r}`,a=t,h=a.config.emulator?vg(t.config,s):`${t.config.apiScheme}://${s}`;return SR.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(h).toString():h}class bR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jr(this.auth,"network-request-failed")),RR.get())})}}function Rc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Jr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(t,e){return sl(t,"POST","/v1/accounts:delete",e)}async function Fh(t,e){return sl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OR(t,e=!1){const n=yn(t),r=await n.getIdToken(e),s=Sg(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,h=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:tu(Fd(s.auth_time)),issuedAtTime:tu(Fd(s.iat)),expirationTime:tu(Fd(s.exp)),signInProvider:h||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Fd(t){return Number(t)*1e3}function Sg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const s=t_(n);return s?JSON.parse(s):(Qc("Failed to decode base64 JWT payload"),null)}catch(s){return Qc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Qm(t){const e=Sg(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vr&&DR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tu(this.lastLoginAt),this.creationTime=tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){var x;const e=t.auth,n=await t.getIdToken(),r=await Ru(t,Fh(e,{idToken:n}));De(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(x=s.providerUserInfo)!=null&&x.length?H_(s.providerUserInfo):[],h=LR(t.providerData,a),y=t.isAnonymous,p=!(t.email&&s.passwordHash)&&!(h!=null&&h.length),m=y?p:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new X1(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(t,E)}async function MR(t){const e=yn(t);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function H_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){const n=await z_(t,{},async()=>{const r=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,h=await j_(t,s,"/v1/token",`key=${a}`),y=await t._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:y,body:r};return t.emulatorConfig&&Wo(t.emulatorConfig.host)&&(p.credentials="include"),U_.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BR(t,e){return sl(t,"POST","/v2/accounts:revokeToken",Tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=Qm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await FR(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,h=new La;return r&&(De(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),h.accessToken=s),a&&(De(typeof a=="number","internal-error",{appName:e}),h.expirationTime=a),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new kR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new X1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ru(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OR(this,e)}reload(){return MR(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(So(this.auth));const e=await this.getIdToken();return await Ru(this,PR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,h=n.photoURL??void 0,y=n.tenantId??void 0,p=n._redirectEventId??void 0,m=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:x,emailVerified:v,isAnonymous:O,providerData:V,stsTokenManager:U}=n;De(x&&U,e,"internal-error");const H=La.fromJSON(this.name,U);De(typeof x=="string",e,"internal-error"),Es(r,e.name),Es(s,e.name),De(typeof v=="boolean",e,"internal-error"),De(typeof O=="boolean",e,"internal-error"),Es(a,e.name),Es(h,e.name),Es(y,e.name),Es(p,e.name),Es(m,e.name),Es(E,e.name);const F=new Yr({uid:x,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:O,photoURL:h,phoneNumber:a,tenantId:y,stsTokenManager:H,createdAt:m,lastLoginAt:E});return V&&Array.isArray(V)&&(F.providerData=V.map(D=>({...D}))),p&&(F._redirectEventId=p),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new La;s.updateFromServerResponse(n);const a=new Yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bh(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?H_(s.providerUserInfo):[],h=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),y=new La;y.updateFromIdToken(r);const p=new Yr({uid:s.localId,auth:e,stsTokenManager:y,isAnonymous:h}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new X1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=new Map;function qi(t){rs(t instanceof Function,"Expected a class definition");let e=$m.get(t);return e?(rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$m.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}W_.type="NONE";const Zm=W_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){return`firebase:${t}:${e}:${n}`}class Fa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=$c(this.userKey,s.apiKey,a),this.fullPersistenceKey=$c("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fh(this.auth,{idToken:e}).catch(()=>{});return n?Yr._fromGetAccountInfoResponse(this.auth,n,e):null}return Yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fa(qi(Zm),e,r);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||qi(Zm);const h=$c(r,e.config.apiKey,e.name);let y=null;for(const m of n)try{const E=await m._get(h);if(E){let x;if(typeof E=="string"){const v=await Fh(e,{idToken:E}).catch(()=>{});if(!v)break;x=await Yr._fromGetAccountInfoResponse(e,v,E)}else x=Yr._fromJSON(e,E);m!==a&&(y=x),a=m;break}}catch{}const p=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Fa(a,e,r):(a=p[0],y&&await a._set(h,y.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(h)}catch{}})),new Fa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if($_(e))return"Webos";if(X_(e))return"Safari";if((e.includes("chrome/")||K_(e))&&!e.includes("edge/"))return"Chrome";if(Y_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function G_(t=Ln()){return/firefox\//i.test(t)}function X_(t=Ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K_(t=Ln()){return/crios\//i.test(t)}function q_(t=Ln()){return/iemobile/i.test(t)}function Y_(t=Ln()){return/android/i.test(t)}function Q_(t=Ln()){return/blackberry/i.test(t)}function $_(t=Ln()){return/webos/i.test(t)}function Rg(t=Ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VR(t=Ln()){var e;return Rg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function UR(){return O3()&&document.documentMode===10}function Z_(t=Ln()){return Rg(t)||Y_(t)||$_(t)||Q_(t)||/windows phone/i.test(t)||q_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e=[]){let n;switch(t){case"Browser":n=Jm(Ln());break;case"Worker":n=`${Jm(Ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((h,y)=>{try{const p=e(a);h(p)}catch(p){y(p)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e={}){return sl(t,"GET","/v2/passwordPolicy",Tg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=6;class WR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e2(this),this.idTokenSubscription=new e2(this),this.beforeStateQueue=new zR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fh(this,{idToken:e}),r=await Yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Or(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(y,y))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(a=this.redirectUser)==null?void 0:a._redirectEventId,y=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===y)&&(p!=null&&p.user)&&(r=p.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(So(this));const n=e?yn(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(So(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(So(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jR(this),n=new WR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Go("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let h=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(y,this,"internal-error"),y.then(()=>{h||a(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,s);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function bf(t){return yn(t)}class e2{constructor(e){this.auth=e,this.observer=null,this.addObserver=V3(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XR(t){Ng=t}function KR(t){return Ng.loadJS(t)}function qR(){return Ng.gapiScript}function YR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t,e){const n=to(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Gs(a,e??{}))return s;vi(s,"already-initialized")}return n.initialize({options:e})}function $R(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ZR(t,e,n){const r=bf(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=ex(e),{host:h,port:y}=JR(e),p=y===null?"":`:${y}`,m={url:`${a}//${h}${p}/`},E=Object.freeze({host:h,port:y,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(Gs(m,r.config.emulator)&&Gs(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Wo(h)?(pg(`${a}//${h}${p}`),mg("Auth",!0)):e8()}function ex(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JR(t){const e=ex(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:t2(r.substr(a.length+1))}}else{const[a,h]=r.split(":");return{host:a,port:t2(h)}}}function t2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,n){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e){return NR(t,"POST","/v1/accounts:signInWithIdp",Tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="http://localhost";class Lo extends tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const h=new Lo(r,s);return h.idToken=a.idToken||void 0,h.accessToken=a.accessToken||void 0,h.secret=a.secret,h.nonce=a.nonce,h.pendingToken=a.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Ba(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ba(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ba(e,n)}buildRequest(){const e={requestUri:t8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends bg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Ku{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lo._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wi.credential(n,r)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Ku{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Ku{constructor(){super("twitter.com")}static credential(e,n){return Lo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ss.credential(n,r)}catch{return null}}}Ss.TWITTER_SIGN_IN_METHOD="twitter.com";Ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Yr._fromIdTokenResponse(e,r,s),h=n2(r);return new Ka({user:a,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=n2(r);return new Ka({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function n2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Vr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vh(e,n,r,s)}}function nx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,a,e,r):a})}async function n8(t,e,n=!1){const r=await Ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ka._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(t,e,n=!1){const{auth:r}=t;if(Or(r.app))return Promise.reject(So(r));const s="reauthenticate";try{const a=await Ru(t,nx(r,s,e,t),n);De(a.idToken,r,"internal-error");const h=Sg(a.idToken);De(h,r,"internal-error");const{sub:y}=h;return De(t.uid===y,r,"user-mismatch"),Ka._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&vi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e,n=!1){if(Or(t.app))return Promise.reject(So(t));const r="signIn",s=await nx(t,r,e),a=await Ka._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}function s8(t,e,n,r){return yn(t).onIdTokenChanged(e,n,r)}function o8(t,e,n){return yn(t).beforeAuthStateChanged(e,n)}function rx(t,e,n,r){return yn(t).onAuthStateChanged(e,n,r)}function a8(t){return yn(t).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=1e3,u8=10;class sx extends ix{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,y,p)=>{this.notifyListeners(h,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},a=this.storage.getItem(r);UR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,u8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},l8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sx.type="LOCAL";const c8=sx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends ix{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ox.type="SESSION";const ax=ox;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Pf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,h=this.handlersMap[s];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const y=Array.from(h).map(async m=>m(n.origin,a)),p=await h8(y);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,h;return new Promise((y,p)=>{const m=Pg("",20);s.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},r);h={messageChannel:s,onMessage(x){const v=x;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(E),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),y(v.data.response);break;default:clearTimeout(E),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(h),s.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function d8(t){wi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function g8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function m8(){return lx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebaseLocalStorageDb",y8=1,zh="firebaseLocalStorage",cx="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(t,e){return t.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function w8(){const t=indexedDB.deleteDatabase(ux);return new qu(t).toPromise()}function K1(){const t=indexedDB.open(ux,y8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zh,{keyPath:cx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await w8(),e(await K1()))})})}async function r2(t,e,n){const r=Of(t,!0).put({[cx]:e,value:n});return new qu(r).toPromise()}async function E8(t,e){const n=Of(t,!1).get(e),r=await new qu(n).toPromise();return r===void 0?null:r.value}function i2(t,e){const n=Of(t,!0).delete(e);return new qu(n).toPromise()}const _8=800,x8=3;class hx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>x8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(m8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await g8(),!this.activeServiceWorker)return;this.sender=new f8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await K1();return await r2(e,Uh,"1"),await i2(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>r2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>E8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>i2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Of(s,!1).getAll();return new qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hx.type="LOCAL";const A8=hx;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){return e?qi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function I8(t){return i8(t.auth,new Og(t),t.bypassAuthState)}function C8(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),r8(n,new Og(t),t.bypassAuthState)}async function v8(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),n8(n,new Og(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:h,type:y}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I8;case"linkViaPopup":case"linkViaRedirect":return v8;case"reauthViaPopup":case"reauthViaRedirect":return C8;default:vi(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=new Xu(2e3,1e4);async function S8(t,e,n){if(Or(t.app))return Promise.reject(Jr(t,"operation-not-supported-in-this-environment"));const r=bf(t);AR(t,e,bg);const s=fx(r,n);return new Io(r,"signInViaPopup",e,s).executeNotNull()}class Io extends dx{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T8.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8="pendingRedirect",Zc=new Map;class N8 extends dx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const r=await b8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b8(t,e){const n=D8(e),r=O8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function P8(t,e){Zc.set(t._key(),e)}function O8(t){return qi(t._redirectPersistence)}function D8(t){return $c(R8,t.config.apiKey,t.name)}async function k8(t,e,n=!1){if(Or(t.app))return Promise.reject(So(t));const r=bf(t),s=fx(r,e),h=await new N8(r,s,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=10*60*1e3;class L8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gx(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M8&&this.cachedEventUids.clear(),this.cachedEventUids.has(s2(e))}saveEventToCache(e){this.cachedEventUids.add(s2(e)),this.lastProcessedEventTime=Date.now()}}function s2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B8(t,e={}){return sl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U8=/^https?/;async function z8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await B8(t);for(const n of e)try{if(j8(n))return}catch{}vi(t,"unauthorized-domain")}function j8(t){const e=G1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const h=new URL(t);return h.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!U8.test(n))return!1;if(V8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=new Xu(3e4,6e4);function o2(){const t=wi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function W8(t){return new Promise((e,n)=>{var s,a,h;function r(){o2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o2(),n(Jr(t,"network-request-failed"))},timeout:H8.get()})}if((a=(s=wi().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((h=wi().gapi)!=null&&h.load)r();else{const y=YR("iframefcb");return wi()[y]=()=>{gapi.load?r():n(Jr(t,"network-request-failed"))},KR(`${qR()}?onload=${y}`).catch(p=>n(p))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function G8(t){return Jc=Jc||W8(t),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=new Xu(5e3,15e3),K8="__/auth/iframe",q8="emulator/auth/iframe",Y8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $8(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vg(e,q8):`https://${t.config.authDomain}/${K8}`,r={apiKey:e.apiKey,appName:t.name,v:Xo},s=Q8.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Gu(r).slice(1)}`}async function Z8(t){const e=await G8(t),n=wi().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:$8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y8,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const h=Jr(t,"network-request-failed"),y=wi().setTimeout(()=>{a(h)},X8.get());function p(){wi().clearTimeout(y),s(r)}r.ping(p).then(p,()=>{a(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e6=500,t6=600,n6="_blank",r6="http://localhost";class a2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i6(t,e,n,r=e6,s=t6){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let y="";const p={...J8,width:r.toString(),height:s.toString(),top:a,left:h},m=Ln().toLowerCase();n&&(y=K_(m)?n6:n),G_(m)&&(e=e||r6,p.scrollbars="yes");const E=Object.entries(p).reduce((v,[O,V])=>`${v}${O}=${V},`,"");if(VR(m)&&y!=="_self")return s6(e||"",y),new a2(null);const x=window.open(e||"",y,E);De(x,t,"popup-blocked");try{x.focus()}catch{}return new a2(x)}function s6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="__/auth/handler",a6="emulator/auth/handler",l6=encodeURIComponent("fac");async function l2(t,e,n,r,s,a){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xo,eventId:s};if(e instanceof bg){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",B3(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,x]of Object.entries({}))h[E]=x}if(e instanceof Ku){const E=e.getScopes().filter(x=>x!=="");E.length>0&&(h.scopes=E.join(","))}t.tenantId&&(h.tid=t.tenantId);const y=h;for(const E of Object.keys(y))y[E]===void 0&&delete y[E];const p=await t._getAppCheckToken(),m=p?`#${l6}=${encodeURIComponent(p)}`:"";return`${u6(t)}?${Gu(y).slice(1)}${m}`}function u6({config:t}){return t.emulator?vg(t,a6):`https://${t.authDomain}/${o6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class c6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ax,this._completeRedirectFn=k8,this._overrideRedirectResult=P8}async _openPopup(e,n,r,s){var h;rs((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const a=await l2(e,n,r,G1(),s);return i6(e,a,Pg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await l2(e,n,r,G1(),s);return d8(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(rs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Z8(e),r=new L8(e);return n.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bd,{type:Bd},s=>{var h;const a=(h=s==null?void 0:s[0])==null?void 0:h[Bd];a!==void 0&&n(!!a),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=z8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z_()||X_()||Rg()}}const h6=c6;var u2="@firebase/auth",c2="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g6(t){ti(new Br("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:h,authDomain:y}=r.options;De(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:h,authDomain:y,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(t)},m=new GR(r,s,a,p);return $R(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ti(new Br("auth-internal",e=>{const n=bf(e.getProvider("auth").getImmediate());return(r=>new f6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(u2,c2,d6(t)),nr(u2,c2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=5*60,m6=s_("authIdTokenMaxAge")||p6;let h2=null;const y6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>m6)return;const s=n==null?void 0:n.token;h2!==s&&(h2=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function w6(t=Sf()){const e=to(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QR(t,{popupRedirectResolver:h6,persistence:[A8,c8,ax]}),r=s_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const h=y6(a.toString());o8(n,h,()=>h(n.currentUser)),s8(n,y=>h(y))}}const s=n_("auth");return s&&ZR(n,`http://${s}`),n}function E6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}XR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Jr("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",E6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g6("Browser");var f2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,px;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,k){function b(){}b.prototype=k.prototype,P.F=k.prototype,P.prototype=new b,P.prototype.constructor=P,P.D=function(j,W,X){for(var z=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)z[Le-2]=arguments[Le];return k.prototype[W].apply(j,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,k,b){b||(b=0);const j=Array(16);if(typeof k=="string")for(var W=0;W<16;++W)j[W]=k.charCodeAt(b++)|k.charCodeAt(b++)<<8|k.charCodeAt(b++)<<16|k.charCodeAt(b++)<<24;else for(W=0;W<16;++W)j[W]=k[b++]|k[b++]<<8|k[b++]<<16|k[b++]<<24;k=P.g[0],b=P.g[1],W=P.g[2];let X=P.g[3],z;z=k+(X^b&(W^X))+j[0]+3614090360&4294967295,k=b+(z<<7&4294967295|z>>>25),z=X+(W^k&(b^W))+j[1]+3905402710&4294967295,X=k+(z<<12&4294967295|z>>>20),z=W+(b^X&(k^b))+j[2]+606105819&4294967295,W=X+(z<<17&4294967295|z>>>15),z=b+(k^W&(X^k))+j[3]+3250441966&4294967295,b=W+(z<<22&4294967295|z>>>10),z=k+(X^b&(W^X))+j[4]+4118548399&4294967295,k=b+(z<<7&4294967295|z>>>25),z=X+(W^k&(b^W))+j[5]+1200080426&4294967295,X=k+(z<<12&4294967295|z>>>20),z=W+(b^X&(k^b))+j[6]+2821735955&4294967295,W=X+(z<<17&4294967295|z>>>15),z=b+(k^W&(X^k))+j[7]+4249261313&4294967295,b=W+(z<<22&4294967295|z>>>10),z=k+(X^b&(W^X))+j[8]+1770035416&4294967295,k=b+(z<<7&4294967295|z>>>25),z=X+(W^k&(b^W))+j[9]+2336552879&4294967295,X=k+(z<<12&4294967295|z>>>20),z=W+(b^X&(k^b))+j[10]+4294925233&4294967295,W=X+(z<<17&4294967295|z>>>15),z=b+(k^W&(X^k))+j[11]+2304563134&4294967295,b=W+(z<<22&4294967295|z>>>10),z=k+(X^b&(W^X))+j[12]+1804603682&4294967295,k=b+(z<<7&4294967295|z>>>25),z=X+(W^k&(b^W))+j[13]+4254626195&4294967295,X=k+(z<<12&4294967295|z>>>20),z=W+(b^X&(k^b))+j[14]+2792965006&4294967295,W=X+(z<<17&4294967295|z>>>15),z=b+(k^W&(X^k))+j[15]+1236535329&4294967295,b=W+(z<<22&4294967295|z>>>10),z=k+(W^X&(b^W))+j[1]+4129170786&4294967295,k=b+(z<<5&4294967295|z>>>27),z=X+(b^W&(k^b))+j[6]+3225465664&4294967295,X=k+(z<<9&4294967295|z>>>23),z=W+(k^b&(X^k))+j[11]+643717713&4294967295,W=X+(z<<14&4294967295|z>>>18),z=b+(X^k&(W^X))+j[0]+3921069994&4294967295,b=W+(z<<20&4294967295|z>>>12),z=k+(W^X&(b^W))+j[5]+3593408605&4294967295,k=b+(z<<5&4294967295|z>>>27),z=X+(b^W&(k^b))+j[10]+38016083&4294967295,X=k+(z<<9&4294967295|z>>>23),z=W+(k^b&(X^k))+j[15]+3634488961&4294967295,W=X+(z<<14&4294967295|z>>>18),z=b+(X^k&(W^X))+j[4]+3889429448&4294967295,b=W+(z<<20&4294967295|z>>>12),z=k+(W^X&(b^W))+j[9]+568446438&4294967295,k=b+(z<<5&4294967295|z>>>27),z=X+(b^W&(k^b))+j[14]+3275163606&4294967295,X=k+(z<<9&4294967295|z>>>23),z=W+(k^b&(X^k))+j[3]+4107603335&4294967295,W=X+(z<<14&4294967295|z>>>18),z=b+(X^k&(W^X))+j[8]+1163531501&4294967295,b=W+(z<<20&4294967295|z>>>12),z=k+(W^X&(b^W))+j[13]+2850285829&4294967295,k=b+(z<<5&4294967295|z>>>27),z=X+(b^W&(k^b))+j[2]+4243563512&4294967295,X=k+(z<<9&4294967295|z>>>23),z=W+(k^b&(X^k))+j[7]+1735328473&4294967295,W=X+(z<<14&4294967295|z>>>18),z=b+(X^k&(W^X))+j[12]+2368359562&4294967295,b=W+(z<<20&4294967295|z>>>12),z=k+(b^W^X)+j[5]+4294588738&4294967295,k=b+(z<<4&4294967295|z>>>28),z=X+(k^b^W)+j[8]+2272392833&4294967295,X=k+(z<<11&4294967295|z>>>21),z=W+(X^k^b)+j[11]+1839030562&4294967295,W=X+(z<<16&4294967295|z>>>16),z=b+(W^X^k)+j[14]+4259657740&4294967295,b=W+(z<<23&4294967295|z>>>9),z=k+(b^W^X)+j[1]+2763975236&4294967295,k=b+(z<<4&4294967295|z>>>28),z=X+(k^b^W)+j[4]+1272893353&4294967295,X=k+(z<<11&4294967295|z>>>21),z=W+(X^k^b)+j[7]+4139469664&4294967295,W=X+(z<<16&4294967295|z>>>16),z=b+(W^X^k)+j[10]+3200236656&4294967295,b=W+(z<<23&4294967295|z>>>9),z=k+(b^W^X)+j[13]+681279174&4294967295,k=b+(z<<4&4294967295|z>>>28),z=X+(k^b^W)+j[0]+3936430074&4294967295,X=k+(z<<11&4294967295|z>>>21),z=W+(X^k^b)+j[3]+3572445317&4294967295,W=X+(z<<16&4294967295|z>>>16),z=b+(W^X^k)+j[6]+76029189&4294967295,b=W+(z<<23&4294967295|z>>>9),z=k+(b^W^X)+j[9]+3654602809&4294967295,k=b+(z<<4&4294967295|z>>>28),z=X+(k^b^W)+j[12]+3873151461&4294967295,X=k+(z<<11&4294967295|z>>>21),z=W+(X^k^b)+j[15]+530742520&4294967295,W=X+(z<<16&4294967295|z>>>16),z=b+(W^X^k)+j[2]+3299628645&4294967295,b=W+(z<<23&4294967295|z>>>9),z=k+(W^(b|~X))+j[0]+4096336452&4294967295,k=b+(z<<6&4294967295|z>>>26),z=X+(b^(k|~W))+j[7]+1126891415&4294967295,X=k+(z<<10&4294967295|z>>>22),z=W+(k^(X|~b))+j[14]+2878612391&4294967295,W=X+(z<<15&4294967295|z>>>17),z=b+(X^(W|~k))+j[5]+4237533241&4294967295,b=W+(z<<21&4294967295|z>>>11),z=k+(W^(b|~X))+j[12]+1700485571&4294967295,k=b+(z<<6&4294967295|z>>>26),z=X+(b^(k|~W))+j[3]+2399980690&4294967295,X=k+(z<<10&4294967295|z>>>22),z=W+(k^(X|~b))+j[10]+4293915773&4294967295,W=X+(z<<15&4294967295|z>>>17),z=b+(X^(W|~k))+j[1]+2240044497&4294967295,b=W+(z<<21&4294967295|z>>>11),z=k+(W^(b|~X))+j[8]+1873313359&4294967295,k=b+(z<<6&4294967295|z>>>26),z=X+(b^(k|~W))+j[15]+4264355552&4294967295,X=k+(z<<10&4294967295|z>>>22),z=W+(k^(X|~b))+j[6]+2734768916&4294967295,W=X+(z<<15&4294967295|z>>>17),z=b+(X^(W|~k))+j[13]+1309151649&4294967295,b=W+(z<<21&4294967295|z>>>11),z=k+(W^(b|~X))+j[4]+4149444226&4294967295,k=b+(z<<6&4294967295|z>>>26),z=X+(b^(k|~W))+j[11]+3174756917&4294967295,X=k+(z<<10&4294967295|z>>>22),z=W+(k^(X|~b))+j[2]+718787259&4294967295,W=X+(z<<15&4294967295|z>>>17),z=b+(X^(W|~k))+j[9]+3951481745&4294967295,P.g[0]=P.g[0]+k&4294967295,P.g[1]=P.g[1]+(W+(z<<21&4294967295|z>>>11))&4294967295,P.g[2]=P.g[2]+W&4294967295,P.g[3]=P.g[3]+X&4294967295}r.prototype.v=function(P,k){k===void 0&&(k=P.length);const b=k-this.blockSize,j=this.C;let W=this.h,X=0;for(;X<k;){if(W==0)for(;X<=b;)s(this,P,X),X+=this.blockSize;if(typeof P=="string"){for(;X<k;)if(j[W++]=P.charCodeAt(X++),W==this.blockSize){s(this,j),W=0;break}}else for(;X<k;)if(j[W++]=P[X++],W==this.blockSize){s(this,j),W=0;break}}this.h=W,this.o+=k},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var k=1;k<P.length-8;++k)P[k]=0;k=this.o*8;for(var b=P.length-8;b<P.length;++b)P[b]=k&255,k/=256;for(this.v(P),P=Array(16),k=0,b=0;b<4;++b)for(let j=0;j<32;j+=8)P[k++]=this.g[b]>>>j&255;return P};function a(P,k){var b=y;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=k(P)}function h(P,k){this.h=k;const b=[];let j=!0;for(let W=P.length-1;W>=0;W--){const X=P[W]|0;j&&X==k||(b[W]=X,j=!1)}this.g=b}var y={};function p(P){return-128<=P&&P<128?a(P,function(k){return new h([k|0],k<0?-1:0)}):new h([P|0],P<0?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return x;if(P<0)return H(m(-P));const k=[];let b=1;for(let j=0;P>=b;j++)k[j]=P/b|0,b*=4294967296;return new h(k,0)}function E(P,k){if(P.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(P.charAt(0)=="-")return H(E(P.substring(1),k));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=m(Math.pow(k,8));let j=x;for(let X=0;X<P.length;X+=8){var W=Math.min(8,P.length-X);const z=parseInt(P.substring(X,X+W),k);W<8?(W=m(Math.pow(k,W)),j=j.j(W).add(m(z))):(j=j.j(b),j=j.add(m(z)))}return j}var x=p(0),v=p(1),O=p(16777216);t=h.prototype,t.m=function(){if(U(this))return-H(this).m();let P=0,k=1;for(let b=0;b<this.g.length;b++){const j=this.i(b);P+=(j>=0?j:4294967296+j)*k,k*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(V(this))return"0";if(U(this))return"-"+H(this).toString(P);const k=m(Math.pow(P,6));var b=this;let j="";for(;;){const W=q(b,k).g;b=F(b,W.j(k));let X=((b.g.length>0?b.g[0]:b.h)>>>0).toString(P);if(b=W,V(b))return X+j;for(;X.length<6;)X="0"+X;j=X+j}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function V(P){if(P.h!=0)return!1;for(let k=0;k<P.g.length;k++)if(P.g[k]!=0)return!1;return!0}function U(P){return P.h==-1}t.l=function(P){return P=F(this,P),U(P)?-1:V(P)?0:1};function H(P){const k=P.g.length,b=[];for(let j=0;j<k;j++)b[j]=~P.g[j];return new h(b,~P.h).add(v)}t.abs=function(){return U(this)?H(this):this},t.add=function(P){const k=Math.max(this.g.length,P.g.length),b=[];let j=0;for(let W=0;W<=k;W++){let X=j+(this.i(W)&65535)+(P.i(W)&65535),z=(X>>>16)+(this.i(W)>>>16)+(P.i(W)>>>16);j=z>>>16,X&=65535,z&=65535,b[W]=z<<16|X}return new h(b,b[b.length-1]&-2147483648?-1:0)};function F(P,k){return P.add(H(k))}t.j=function(P){if(V(this)||V(P))return x;if(U(this))return U(P)?H(this).j(H(P)):H(H(this).j(P));if(U(P))return H(this.j(H(P)));if(this.l(O)<0&&P.l(O)<0)return m(this.m()*P.m());const k=this.g.length+P.g.length,b=[];for(var j=0;j<2*k;j++)b[j]=0;for(j=0;j<this.g.length;j++)for(let W=0;W<P.g.length;W++){const X=this.i(j)>>>16,z=this.i(j)&65535,Le=P.i(W)>>>16,J=P.i(W)&65535;b[2*j+2*W]+=z*J,D(b,2*j+2*W),b[2*j+2*W+1]+=X*J,D(b,2*j+2*W+1),b[2*j+2*W+1]+=z*Le,D(b,2*j+2*W+1),b[2*j+2*W+2]+=X*Le,D(b,2*j+2*W+2)}for(P=0;P<k;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=k;P<2*k;P++)b[P]=0;return new h(b,0)};function D(P,k){for(;(P[k]&65535)!=P[k];)P[k+1]+=P[k]>>>16,P[k]&=65535,k++}function N(P,k){this.g=P,this.h=k}function q(P,k){if(V(k))throw Error("division by zero");if(V(P))return new N(x,x);if(U(P))return k=q(H(P),k),new N(H(k.g),H(k.h));if(U(k))return k=q(P,H(k)),new N(H(k.g),k.h);if(P.g.length>30){if(U(P)||U(k))throw Error("slowDivide_ only works with positive integers.");for(var b=v,j=k;j.l(P)<=0;)b=ie(b),j=ie(j);var W=re(b,1),X=re(j,1);for(j=re(j,2),b=re(b,2);!V(j);){var z=X.add(j);z.l(P)<=0&&(W=W.add(b),X=z),j=re(j,1),b=re(b,1)}return k=F(P,W.j(k)),new N(W,k)}for(W=x;P.l(k)>=0;){for(b=Math.max(1,Math.floor(P.m()/k.m())),j=Math.ceil(Math.log(b)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),X=m(b),z=X.j(k);U(z)||z.l(P)>0;)b-=j,X=m(b),z=X.j(k);V(X)&&(X=v),W=W.add(X),P=F(P,z)}return new N(W,P)}t.B=function(P){return q(this,P).h},t.and=function(P){const k=Math.max(this.g.length,P.g.length),b=[];for(let j=0;j<k;j++)b[j]=this.i(j)&P.i(j);return new h(b,this.h&P.h)},t.or=function(P){const k=Math.max(this.g.length,P.g.length),b=[];for(let j=0;j<k;j++)b[j]=this.i(j)|P.i(j);return new h(b,this.h|P.h)},t.xor=function(P){const k=Math.max(this.g.length,P.g.length),b=[];for(let j=0;j<k;j++)b[j]=this.i(j)^P.i(j);return new h(b,this.h^P.h)};function ie(P){const k=P.g.length+1,b=[];for(let j=0;j<k;j++)b[j]=P.i(j)<<1|P.i(j-1)>>>31;return new h(b,P.h)}function re(P,k){const b=k>>5;k%=32;const j=P.g.length-b,W=[];for(let X=0;X<j;X++)W[X]=k>0?P.i(X+b)>>>k|P.i(X+b+1)<<32-k:P.i(X+b);return new h(W,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,px=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=m,h.fromString=E,zs=h}).apply(typeof f2<"u"?f2:typeof self<"u"?self:typeof window<"u"?window:{});var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mx,Ul,yx,eh,q1,wx,Ex,_x;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nc=="object"&&Nc];for(var A=0;A<d.length;++A){var C=d[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function s(d,A){if(A)e:{var C=r;d=d.split(".");for(var M=0;M<d.length-1;M++){var Y=d[M];if(!(Y in C))break e;C=C[Y]}d=d[d.length-1],M=C[d],A=A(M),A!=M&&A!=null&&e(C,d,{configurable:!0,writable:!0,value:A})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(A){var C=[],M;for(M in A)Object.prototype.hasOwnProperty.call(A,M)&&C.push([M,A[M]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},h=this||self;function y(d){var A=typeof d;return A=="object"&&d!=null||A=="function"}function p(d,A,C){return d.call.apply(d.bind,arguments)}function m(d,A,C){return m=p,m.apply(null,arguments)}function E(d,A){var C=Array.prototype.slice.call(arguments,1);return function(){var M=C.slice();return M.push.apply(M,arguments),d.apply(this,M)}}function x(d,A){function C(){}C.prototype=A.prototype,d.Z=A.prototype,d.prototype=new C,d.prototype.constructor=d,d.Ob=function(M,Y,ee){for(var he=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)he[Fe-2]=arguments[Fe];return A.prototype[Y].apply(M,he)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const A=d.length;if(A>0){const C=Array(A);for(let M=0;M<A;M++)C[M]=d[M];return C}return[]}function V(d,A){for(let M=1;M<arguments.length;M++){const Y=arguments[M];var C=typeof Y;if(C=C!="object"?C:Y?Array.isArray(Y)?"array":C:"null",C=="array"||C=="object"&&typeof Y.length=="number"){C=d.length||0;const ee=Y.length||0;d.length=C+ee;for(let he=0;he<ee;he++)d[C+he]=Y[he]}else d.push(Y)}}class U{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function H(d){h.setTimeout(()=>{throw d},0)}function F(){var d=P;let A=null;return d.g&&(A=d.g,d.g=d.g.next,d.g||(d.h=null),A.next=null),A}class D{constructor(){this.h=this.g=null}add(A,C){const M=N.get();M.set(A,C),this.h?this.h.next=M:this.g=M,this.h=M}}var N=new U(()=>new q,d=>d.reset());class q{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,re=!1,P=new D,k=()=>{const d=Promise.resolve(void 0);ie=()=>{d.then(b)}};function b(){for(var d;d=F();){try{d.h.call(d.g)}catch(C){H(C)}var A=N;A.j(d),A.h<100&&(A.h++,d.next=A.g,A.g=d)}re=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(d,A){this.type=d,this.g=this.target=A,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,A=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const C=()=>{};h.addEventListener("test",C,A),h.removeEventListener("test",C,A)}catch{}return d}();function z(d){return/^[\s\xa0]*$/.test(d)}function Le(d,A){W.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,A)}x(Le,W),Le.prototype.init=function(d,A){const C=this.type=d.type,M=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=A,A=d.relatedTarget,A||(C=="mouseover"?A=d.fromElement:C=="mouseout"&&(A=d.toElement)),this.relatedTarget=A,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),gt=0;function Te(d,A,C,M,Y){this.listener=d,this.proxy=null,this.src=A,this.type=C,this.capture=!!M,this.ha=Y,this.key=++gt,this.da=this.fa=!1}function pe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ae(d,A,C){for(const M in d)A.call(C,d[M],M,d)}function Se(d,A){for(const C in d)A.call(void 0,d[C],C,d)}function ct(d){const A={};for(const C in d)A[C]=d[C];return A}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wn(d,A){let C,M;for(let Y=1;Y<arguments.length;Y++){M=arguments[Y];for(C in M)d[C]=M[C];for(let ee=0;ee<ze.length;ee++)C=ze[ee],Object.prototype.hasOwnProperty.call(M,C)&&(d[C]=M[C])}}function at(d){this.src=d,this.g={},this.h=0}at.prototype.add=function(d,A,C,M,Y){const ee=d.toString();d=this.g[ee],d||(d=this.g[ee]=[],this.h++);const he=xe(d,A,M,Y);return he>-1?(A=d[he],C||(A.fa=!1)):(A=new Te(A,this.src,ee,!!M,Y),A.fa=C,d.push(A)),A};function Ur(d,A){const C=A.type;if(C in d.g){var M=d.g[C],Y=Array.prototype.indexOf.call(M,A,void 0),ee;(ee=Y>=0)&&Array.prototype.splice.call(M,Y,1),ee&&(pe(A),d.g[C].length==0&&(delete d.g[C],d.h--))}}function xe(d,A,C,M){for(let Y=0;Y<d.length;++Y){const ee=d[Y];if(!ee.da&&ee.listener==A&&ee.capture==!!C&&ee.ha==M)return Y}return-1}var xr="closure_lm_"+(Math.random()*1e6|0),Lt={};function ls(d,A,C,M,Y){if(Array.isArray(A)){for(let ee=0;ee<A.length;ee++)ls(d,A[ee],C,M,Y);return null}return C=ht(C),d&&d[J]?d.J(A,C,y(M)?!!M.capture:!1,Y):io(d,A,C,!1,M,Y)}function io(d,A,C,M,Y,ee){if(!A)throw Error("Invalid event type");const he=y(Y)?!!Y.capture:!!Y;let Fe=Oi(d);if(Fe||(d[xr]=Fe=new at(d)),C=Fe.add(A,C,M,he,ee),C.proxy)return C;if(M=Rn(),C.proxy=M,M.src=d,M.listener=C,d.addEventListener)X||(Y=he),Y===void 0&&(Y=!1),d.addEventListener(A.toString(),M,Y);else if(d.attachEvent)d.attachEvent(Pi(A.toString()),M);else if(d.addListener&&d.removeListener)d.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Rn(){function d(C){return A.call(d.src,d.listener,C)}const A=Ar;return d}function so(d,A,C,M,Y){if(Array.isArray(A))for(var ee=0;ee<A.length;ee++)so(d,A[ee],C,M,Y);else M=y(M)?!!M.capture:!!M,C=ht(C),d&&d[J]?(d=d.i,ee=String(A).toString(),ee in d.g&&(A=d.g[ee],C=xe(A,C,M,Y),C>-1&&(pe(A[C]),Array.prototype.splice.call(A,C,1),A.length==0&&(delete d.g[ee],d.h--)))):d&&(d=Oi(d))&&(A=d.g[A.toString()],d=-1,A&&(d=xe(A,C,M,Y)),(C=d>-1?A[d]:null)&&Qe(C))}function Qe(d){if(typeof d!="number"&&d&&!d.da){var A=d.src;if(A&&A[J])Ur(A.i,d);else{var C=d.type,M=d.proxy;A.removeEventListener?A.removeEventListener(C,M,d.capture):A.detachEvent?A.detachEvent(Pi(C),M):A.addListener&&A.removeListener&&A.removeListener(M),(C=Oi(A))?(Ur(C,d),C.h==0&&(C.src=null,A[xr]=null)):pe(d)}}}function Pi(d){return d in Lt?Lt[d]:Lt[d]="on"+d}function Ar(d,A){if(d.da)d=!0;else{A=new Le(A,this);const C=d.listener,M=d.ha||d.src;d.fa&&Qe(d),d=C.call(M,A)}return d}function Oi(d){return d=d[xr],d instanceof at?d:null}var Ht="__closure_events_fn_"+(Math.random()*1e9>>>0);function ht(d){return typeof d=="function"?d:(d[Ht]||(d[Ht]=function(A){return d.handleEvent(A)}),d[Ht])}function be(){j.call(this),this.i=new at(this),this.M=this,this.G=null}x(be,j),be.prototype[J]=!0,be.prototype.removeEventListener=function(d,A,C,M){so(this,d,A,C,M)};function Kt(d,A){var C,M=d.G;if(M)for(C=[];M;M=M.G)C.push(M);if(d=d.M,M=A.type||A,typeof A=="string")A=new W(A,d);else if(A instanceof W)A.target=A.target||d;else{var Y=A;A=new W(M,d),wn(A,Y)}Y=!0;let ee,he;if(C)for(he=C.length-1;he>=0;he--)ee=A.g=C[he],Y=Ee(ee,M,!0,A)&&Y;if(ee=A.g=d,Y=Ee(ee,M,!0,A)&&Y,Y=Ee(ee,M,!1,A)&&Y,C)for(he=0;he<C.length;he++)ee=A.g=C[he],Y=Ee(ee,M,!1,A)&&Y}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var d=this.i;for(const A in d.g){const C=d.g[A];for(let M=0;M<C.length;M++)pe(C[M]);delete d.g[A],d.h--}}this.G=null},be.prototype.J=function(d,A,C,M){return this.i.add(String(d),A,!1,C,M)},be.prototype.K=function(d,A,C,M){return this.i.add(String(d),A,!0,C,M)};function Ee(d,A,C,M){if(A=d.i.g[String(A)],!A)return!0;A=A.concat();let Y=!0;for(let ee=0;ee<A.length;++ee){const he=A[ee];if(he&&!he.da&&he.capture==C){const Fe=he.listener,Vt=he.ha||he.src;he.fa&&Ur(d.i,he),Y=Fe.call(Vt,M)!==!1&&Y}}return Y&&!M.defaultPrevented}function Yo(d,A){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:h.setTimeout(d,A||0)}function cl(d){d.g=Yo(()=>{d.g=null,d.i&&(d.i=!1,cl(d))},d.l);const A=d.h;d.h=null,d.m.apply(null,A)}class zr extends j{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:cl(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(d){j.call(this),this.h=d,this.g={}}x(Di,j);var Hn=[];function hl(d){Ae(d.g,function(A,C){this.g.hasOwnProperty(C)&&Qe(A)},d),d.g={}}Di.prototype.N=function(){Di.Z.N.call(this),hl(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=h.JSON.stringify,En=h.JSON.parse,ec=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function oo(){}function tc(){}var mt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ge(){W.call(this,"d")}x(ge,W);function Rt(){W.call(this,"c")}x(Rt,W);var $e={},_t=null;function ni(){return _t=_t||new be}$e.Ia="serverreachability";function Qo(d){W.call(this,$e.Ia,d)}x(Qo,W);function us(d){const A=ni();Kt(A,new Qo(A))}$e.STAT_EVENT="statevent";function Ze(d,A){W.call(this,$e.STAT_EVENT,d),this.stat=A}x(Ze,W);function Nt(d){const A=ni();Kt(A,new Ze(A,d))}$e.Ja="timingevent";function fl(d,A){W.call(this,$e.Ja,d),this.size=A}x(fl,W);function cs(d,A){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},A)}function _n(){this.g=!0}_n.prototype.ua=function(){this.g=!1};function dl(d,A,C,M,Y,ee){d.info(function(){if(d.g)if(ee){var he="",Fe=ee.split("&");for(let ot=0;ot<Fe.length;ot++){var Vt=Fe[ot].split("=");if(Vt.length>1){const Wt=Vt[0];Vt=Vt[1];const cr=Wt.split("_");he=cr.length>=2&&cr[1]=="type"?he+(Wt+"="+Vt+"&"):he+(Wt+"=redacted&")}}}else he=null;else he=ee;return"XMLHTTP REQ ("+M+") [attempt "+Y+"]: "+A+`
`+C+`
`+he})}function cn(d,A,C,M,Y,ee,he){d.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+Y+"]: "+A+`
`+C+`
`+ee+" "+he})}function ir(d,A,C,M){d.info(function(){return"XMLHTTP TEXT ("+A+"): "+Cr(d,C)+(M?" "+M:"")})}function $o(d,A){d.info(function(){return"TIMEOUT: "+A})}_n.prototype.info=function(){};function Cr(d,A){if(!d.g)return A;if(!A)return null;try{const ee=JSON.parse(A);if(ee){for(d=0;d<ee.length;d++)if(Array.isArray(ee[d])){var C=ee[d];if(!(C.length<2)){var M=C[1];if(Array.isArray(M)&&!(M.length<1)){var Y=M[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let he=1;he<M.length;he++)M[he]=""}}}}return Ir(ee)}catch{return A}}var Zo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ri={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jo;function hn(){}x(hn,oo),hn.prototype.g=function(){return new XMLHttpRequest},Jo=new hn;function sr(d){return encodeURIComponent(String(d))}function Wn(d){var A=1;d=d.split(":");const C=[];for(;A>0&&d.length;)C.push(d.shift()),A--;return d.length&&C.push(d.join(":")),C}function me(d,A,C,M){this.j=d,this.i=A,this.l=C,this.S=M||1,this.V=new Di(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ki}function ki(){this.i=null,this.g="",this.h=!1}var ea={},fn={};function ii(d,A,C){d.M=1,d.A=lr(Gn(A)),d.u=C,d.R=!0,ao(d,null)}function ao(d,A){d.F=Date.now(),na(d),d.B=Gn(d.A);var C=d.B,M=d.S;Array.isArray(M)||(M=[String(M)]),yt(C.i,"t",M),d.C=0,C=d.j.L,d.h=new ki,d.g=aa(d.j,C?A:null,!d.u),d.P>0&&(d.O=new zr(m(d.Y,d,d.g),d.P)),A=d.V,C=d.g,M=d.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Hn[0]=Y.toString()),Y=Hn);for(let ee=0;ee<Y.length;ee++){const he=ls(C,Y[ee],M||A.handleEvent,!1,A.h||A);if(!he)break;A.g[he.key]=he}A=d.J?ct(d.J):{},d.u?(d.v||(d.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,A)):(d.v="GET",d.g.ea(d.B,d.v,null,A)),us(),dl(d.i,d.v,d.B,d.l,d.S,d.u)}me.prototype.ba=function(d){d=d.target;const A=this.O;A&&jr(d)==3?A.j():this.Y(d)},me.prototype.Y=function(d){try{if(d==this.g)e:{const Fe=jr(this.g),Vt=this.g.ya(),ot=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||gs(this.g)))){this.K||Fe!=4||Vt==7||(Vt==8||ot<=0?us(3):us(2)),tn(this);var A=this.g.ca();this.X=A;var C=ta(this);if(this.o=A==200,cn(this.i,this.v,this.B,this.l,this.S,Fe,A),this.o){if(this.U&&!this.L){t:{if(this.g){var M,Y=this.g;if((M=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(M)){var ee=M;break t}}ee=null}if(d=ee)ir(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vr(this,d);else{this.o=!1,this.m=3,Nt(12),si(this),lt(this);break e}}if(this.R){d=!0;let Wt;for(;!this.K&&this.C<C.length;)if(Wt=$f(this,C),Wt==fn){Fe==4&&(this.m=4,Nt(14),d=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==ea){this.m=4,Nt(15),ir(this.i,this.l,C,"[Invalid Chunk]"),d=!1;break}else ir(this.i,this.l,Wt,null),vr(this,Wt);if(or(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||C.length!=0||this.h.h||(this.m=1,Nt(16),d=!1),this.o=this.o&&d,!d)ir(this.i,this.l,C,"[Invalid Chunked Response]"),si(this),lt(this);else if(C.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Z(he),he.P=!0,Nt(11))}}else ir(this.i,this.l,C,null),vr(this,C);Fe==4&&si(this),this.o&&!this.K&&(Fe==4?go(this.j,this):(this.o=!1,na(this)))}else co(this.g),A==400&&C.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),si(this),lt(this)}}}catch{}finally{}};function ta(d){if(!or(d))return d.g.la();const A=gs(d.g);if(A==="")return"";let C="";const M=A.length,Y=jr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return si(d),lt(d),"";d.h.i=new h.TextDecoder}for(let ee=0;ee<M;ee++)d.h.h=!0,C+=d.h.i.decode(A[ee],{stream:!(Y&&ee==M-1)});return A.length=0,d.h.g+=C,d.C=0,d.h.g}function or(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function $f(d,A){var C=d.C,M=A.indexOf(`
`,C);return M==-1?fn:(C=Number(A.substring(C,M)),isNaN(C)?ea:(M+=1,M+C>A.length?fn:(A=A.slice(M,M+C),d.C=M+C,A)))}me.prototype.cancel=function(){this.K=!0,si(this)};function na(d){d.T=Date.now()+d.H,ar(d,d.H)}function ar(d,A){if(d.D!=null)throw Error("WatchDog timer not null");d.D=cs(m(d.aa,d),A)}function tn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}me.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?($o(this.i,this.B),this.M!=2&&(us(),Nt(17)),si(this),this.m=2,lt(this)):ar(this,this.T-d)};function lt(d){d.j.I==0||d.K||go(d.j,d)}function si(d){tn(d);var A=d.O;A&&typeof A.dispose=="function"&&A.dispose(),d.O=null,hl(d.V),d.g&&(A=d.g,d.g=null,A.abort(),A.dispose())}function vr(d,A){try{var C=d.j;if(C.I!=0&&(C.g==d||oi(C.h,d))){if(!d.L&&oi(C.h,d)&&C.I==3){try{var M=C.Ba.g.parse(A)}catch{M=null}if(Array.isArray(M)&&M.length==3){var Y=M;if(Y[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<d.F)Ft(C),ho(C);else break e;Il(C),Nt(18)}}else C.xa=Y[1],0<C.xa-C.K&&Y[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=cs(m(C.Va,C),6e3));xt(C.h)<=1&&C.ta&&(C.ta=void 0)}else Bi(C,11)}else if((d.L||C.g==d)&&Ft(C),!z(A))for(Y=C.Ba.g.parse(A),A=0;A<Y.length;A++){let ot=Y[A];const Wt=ot[0];if(!(Wt<=C.K))if(C.K=Wt,ot=ot[1],C.I==2)if(ot[0]=="c"){C.M=ot[1],C.ba=ot[2];const cr=ot[3];cr!=null&&(C.ka=cr,C.j.info("VER="+C.ka));const Vi=ot[4];Vi!=null&&(C.za=Vi,C.j.info("SVER="+C.za));const Bn=ot[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(M=1.5*Bn,C.O=M,C.j.info("backChannelRequestTimeoutMs_="+M)),M=C;const Rr=d.g;if(Rr){const la=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(la){var ee=M.h;ee.g||la.indexOf("spdy")==-1&&la.indexOf("quic")==-1&&la.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(pl(ee,ee.h),ee.h=null))}if(M.G){const Ui=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(M.wa=Ui,Oe(M.J,M.G,Ui))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-d.F,C.j.info("Handshake RTT: "+C.T+"ms")),M=C;var he=d;if(M.na=ac(M,M.L?M.ba:null,M.W),he.L){nt(M.h,he);var Fe=he,Vt=M.O;Vt&&(Fe.H=Vt),Fe.D&&(tn(Fe),na(Fe)),M.g=he}else Hr(M);C.i.length>0&&oa(C)}else ot[0]!="stop"&&ot[0]!="close"||Bi(C,7);else C.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Bi(C,7):sa(C):ot[0]!="noop"&&C.l&&C.l.qa(ot),C.A=0)}}us(4)}catch{}}var gl=class{constructor(d,A){this.g=d,this.map=A}};function ae(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function xt(d){return d.h?1:d.g?d.g.size:0}function oi(d,A){return d.h?d.h==A:d.g?d.g.has(A):!1}function pl(d,A){d.g?d.g.add(A):d.h=A}function nt(d,A){d.h&&d.h==A?d.h=null:d.g&&d.g.has(A)&&d.g.delete(A)}ae.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Je(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let A=d.i;for(const C of d.g.values())A=A.concat(C.G);return A}return O(d.i)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(d,A){if(d){d=d.split("&");for(let C=0;C<d.length;C++){const M=d[C].indexOf("=");let Y,ee=null;M>=0?(Y=d[C].substring(0,M),ee=d[C].substring(M+1)):Y=d[C],A(Y,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Tr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;d instanceof Tr?(this.l=d.l,At(this,d.j),this.o=d.o,this.g=d.g,Xn(this,d.u),this.h=d.h,yl(this,wl(d.i)),this.m=d.m):d&&(A=String(d).match(je))?(this.l=!1,At(this,A[1]||"",!0),this.o=lo(A[2]||""),this.g=lo(A[3]||"",!0),Xn(this,A[4]),this.h=lo(A[5]||"",!0),yl(this,A[6]||"",!0),this.m=lo(A[7]||"")):(this.l=!1,this.i=new dn(null,this.l))}Tr.prototype.toString=function(){const d=[];var A=this.j;A&&d.push(Sr(A,nn,!0),":");var C=this.g;return(C||A=="file")&&(d.push("//"),(A=this.o)&&d.push(Sr(A,nn,!0),"@"),d.push(sr(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&d.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&d.push("/"),d.push(Sr(C,C.charAt(0)=="/"?L:$,!0))),(C=this.i.toString())&&d.push("?",C),(C=this.m)&&d.push("#",Sr(C,qt)),d.join("")},Tr.prototype.resolve=function(d){const A=Gn(this);let C=!!d.j;C?At(A,d.j):C=!!d.o,C?A.o=d.o:C=!!d.g,C?A.g=d.g:C=d.u!=null;var M=d.h;if(C)Xn(A,d.u);else if(C=!!d.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var Y=A.h.lastIndexOf("/");Y!=-1&&(M=A.h.slice(0,Y+1)+M)}if(Y=M,Y==".."||Y==".")M="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){M=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const ee=[];for(let he=0;he<Y.length;){const Fe=Y[he++];Fe=="."?M&&he==Y.length&&ee.push(""):Fe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),M&&he==Y.length&&ee.push("")):(ee.push(Fe),M=!0)}M=ee.join("/")}else M=Y}return C?A.h=M:C=d.i.toString()!=="",C?yl(A,wl(d.i)):C=!!d.m,C&&(A.m=d.m),A};function Gn(d){return new Tr(d)}function At(d,A,C){d.j=C?lo(A,!0):A,d.j&&(d.j=d.j.replace(/:$/,""))}function Xn(d,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);d.u=A}else d.u=null}function yl(d,A,C){A instanceof dn?(d.i=A,El(d.i,d.l)):(C||(A=Sr(A,Ie)),d.i=new dn(A,d.l))}function Oe(d,A,C){d.i.set(A,C)}function lr(d){return Oe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function lo(d,A){return d?A?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Sr(d,A,C){return typeof d=="string"?(d=encodeURI(d).replace(A,dt),C&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function dt(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var nn=/[#\/\?@]/g,$=/[#\?:]/g,L=/[#\?]/g,Ie=/[#\?@]/g,qt=/#/g;function dn(d,A){this.h=this.g=null,this.i=d||null,this.j=!!A}function Mi(d){d.g||(d.g=new Map,d.h=0,d.i&&ml(d.i,function(A,C){d.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}t=dn.prototype,t.add=function(d,A){Mi(this),this.i=null,d=hs(this,d);let C=this.g.get(d);return C||this.g.set(d,C=[]),C.push(A),this.h+=1,this};function ra(d,A){Mi(d),A=hs(d,A),d.g.has(A)&&(d.i=null,d.h-=d.g.get(A).length,d.g.delete(A))}function Fn(d,A){return Mi(d),A=hs(d,A),d.g.has(A)}t.forEach=function(d,A){Mi(this),this.g.forEach(function(C,M){C.forEach(function(Y){d.call(A,Y,M,this)},this)},this)};function ve(d,A){Mi(d);let C=[];if(typeof A=="string")Fn(d,A)&&(C=C.concat(d.g.get(hs(d,A))));else for(d=Array.from(d.g.values()),A=0;A<d.length;A++)C=C.concat(d[A]);return C}t.set=function(d,A){return Mi(this),this.i=null,d=hs(this,d),Fn(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[A]),this.h+=1,this},t.get=function(d,A){return d?(d=ve(this,d),d.length>0?String(d[0]):A):A};function yt(d,A,C){ra(d,A),C.length>0&&(d.i=null,d.g.set(hs(d,A),O(C)),d.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],A=Array.from(this.g.keys());for(let M=0;M<A.length;M++){var C=A[M];const Y=sr(C);C=ve(this,C);for(let ee=0;ee<C.length;ee++){let he=Y;C[ee]!==""&&(he+="="+sr(C[ee])),d.push(he)}}return this.i=d.join("&")};function wl(d){const A=new dn;return A.i=d.i,d.g&&(A.g=new Map(d.g),A.h=d.h),A}function hs(d,A){return A=String(A),d.j&&(A=A.toLowerCase()),A}function El(d,A){A&&!d.j&&(Mi(d),d.i=null,d.g.forEach(function(C,M){const Y=M.toLowerCase();M!=Y&&(ra(this,M),yt(this,Y,C))},d)),d.j=A}function ia(d,A){const C=new _n;if(h.Image){const M=new Image;M.onload=E(ai,C,"TestLoadImage: loaded",!0,A,M),M.onerror=E(ai,C,"TestLoadImage: error",!1,A,M),M.onabort=E(ai,C,"TestLoadImage: abort",!1,A,M),M.ontimeout=E(ai,C,"TestLoadImage: timeout",!1,A,M),h.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=d}else A(!1)}function _l(d,A){const C=new _n,M=new AbortController,Y=setTimeout(()=>{M.abort(),ai(C,"TestPingServer: timeout",!1,A)},1e4);fetch(d,{signal:M.signal}).then(ee=>{clearTimeout(Y),ee.ok?ai(C,"TestPingServer: ok",!0,A):ai(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Y),ai(C,"TestPingServer: error",!1,A)})}function ai(d,A,C,M,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),M(C)}catch{}}function Yt(){this.g=new ec}function Li(d){this.i=d.Sb||null,this.h=d.ab||!1}x(Li,oo),Li.prototype.g=function(){return new ur(this.i,this.h)};function ur(d,A){be.call(this),this.H=d,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(ur,be),t=ur.prototype,t.open=function(d,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=A,this.readyState=1,ke(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(A.body=d),(this.H||h).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ke(this)),this.g&&(this.readyState=3,ke(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Re(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Re(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var A=d.value?d.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!d.done}))&&(this.response=this.responseText+=A)}d.done?uo(this):ke(this),this.readyState==3&&Re(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,uo(this))},t.Na=function(d){this.g&&(this.response=d,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ke(d)}t.setRequestHeader=function(d,A){this.A.append(d,A)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,d.push(C[0]+": "+C[1]),C=A.next();return d.join(`\r
`)};function ke(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Qt(d){let A="";return Ae(d,function(C,M){A+=M,A+=":",A+=C,A+=`\r
`}),A}function xl(d,A,C){e:{for(M in C){var M=!1;break e}M=!0}M||(C=Qt(C),typeof d=="string"?C!=null&&sr(C):Oe(d,A,C))}function wt(d){be.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(wt,be);var rc=/^https?$/i,Fi=["POST","PUT"];t=wt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,A,C,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);A=A?A.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jo.g(),this.g.onreadystatechange=v(m(this.Ca,this));try{this.B=!0,this.g.open(A,String(d),!0),this.B=!1}catch(ee){ic(this,ee);return}if(d=C||"",C=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var Y in M)C.set(Y,M[Y]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ee of M.keys())C.set(ee,M.get(ee));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(C.keys()).find(ee=>ee.toLowerCase()=="content-type"),Y=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Fi,A,void 0)>=0)||M||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,he]of C)this.g.setRequestHeader(ee,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ee){ic(this,ee)}};function ic(d,A){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=A,d.o=5,fs(d),li(d)}function fs(d){d.A||(d.A=!0,Kt(d,"complete"),Kt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Kt(this,"complete"),Kt(this,"abort"),li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ds(this):this.Xa())},t.Xa=function(){ds(this)};function ds(d){if(d.h&&typeof a<"u"){if(d.v&&jr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Kt(d,"readystatechange"),jr(d)==4){d.h=!1;try{const ee=d.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var M;if(M=ee===0){let he=String(d.D).match(je)[1]||null;!he&&h.self&&h.self.location&&(he=h.self.location.protocol.slice(0,-1)),M=!rc.test(he?he.toLowerCase():"")}C=M}if(C)Kt(d,"complete"),Kt(d,"success");else{d.o=6;try{var Y=jr(d)>2?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.ca()+"]",fs(d)}}finally{li(d)}}}}function li(d,A){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const C=d.g;d.g=null,A||Kt(d,"ready");try{C.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function jr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return jr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var A=this.g.responseText;return d&&A.indexOf(d)==0&&(A=A.substring(d.length)),En(A)}};function gs(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function co(d){const A={};d=(d.g&&jr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<d.length;M++){if(z(d[M]))continue;var C=Wn(d[M]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ee=A[Y]||[];A[Y]=ee,ee.push(C)}Se(A,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $t(d,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[d]||A}function Al(d){this.za=0,this.i=[],this.j=new _n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$t("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$t("baseRetryDelayMs",5e3,d),this.Za=$t("retryDelaySeedMs",1e4,d),this.Ta=$t("forwardChannelMaxRetries",2,d),this.va=$t("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ae(d&&d.concurrentRequestLimit),this.Ba=new Yt,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Al.prototype,t.ka=8,t.I=1,t.connect=function(d,A,C,M){Nt(0),this.W=d,this.H=A||{},C&&M!==void 0&&(this.H.OSID=C,this.H.OAID=M),this.F=this.X,this.J=ac(this,null,this.W),oa(this)};function sa(d){if(sc(d),d.I==3){var A=d.V++,C=Gn(d.J);if(Oe(C,"SID",d.M),Oe(C,"RID",A),Oe(C,"TYPE","terminate"),ps(d,C),A=new me(d,d.j,A),A.M=2,A.A=lr(Gn(C)),C=!1,h.navigator&&h.navigator.sendBeacon)try{C=h.navigator.sendBeacon(A.A.toString(),"")}catch{}!C&&h.Image&&(new Image().src=A.A,C=!0),C||(A.g=aa(A.j,null),A.g.ea(A.A)),A.F=Date.now(),na(A)}oc(d)}function ho(d){d.g&&(Z(d),d.g.cancel(),d.g=null)}function sc(d){ho(d),d.v&&(h.clearTimeout(d.v),d.v=null),Ft(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function oa(d){if(!nc(d.h)&&!d.m){d.m=!0;var A=d.Ea;ie||k(),re||(ie(),re=!0),P.add(A,d),d.D=0}}function Zf(d,A){return xt(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=A.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=cs(m(d.Ea,d,A),Cl(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Y=new me(this,this.j,d);let ee=this.o;if(this.U&&(ee?(ee=ct(ee),wn(ee,this.U)):ee=this.U),this.u!==null||this.R||(Y.J=ee,ee=null),this.S)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var M=this.i[C];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(A+=M,A>4096){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=fo(this,Y,A),C=Gn(this.J),Oe(C,"RID",d),Oe(C,"CVER",22),this.G&&Oe(C,"X-HTTP-Session-Id",this.G),ps(this,C),ee&&(this.R?A="headers="+sr(Qt(ee))+"&"+A:this.u&&xl(C,this.u,ee)),pl(this.h,Y),this.Ra&&Oe(C,"TYPE","init"),this.S?(Oe(C,"$req",A),Oe(C,"SID","null"),Y.U=!0,ii(Y,C,null)):ii(Y,C,A),this.I=2}}else this.I==3&&(d?st(this,d):this.i.length==0||nc(this.h)||st(this))};function st(d,A){var C;A?C=A.l:C=d.V++;const M=Gn(d.J);Oe(M,"SID",d.M),Oe(M,"RID",C),Oe(M,"AID",d.K),ps(d,M),d.u&&d.o&&xl(M,d.u,d.o),C=new me(d,d.j,C,d.D+1),d.u===null&&(C.J=d.o),A&&(d.i=A.G.concat(d.i)),A=fo(d,C,1e3),C.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),pl(d.h,C),ii(C,M,A)}function ps(d,A){d.H&&Ae(d.H,function(C,M){Oe(A,M,C)}),d.l&&Ae({},function(C,M){Oe(A,M,C)})}function fo(d,A,C){C=Math.min(d.i.length,C);const M=d.l?m(d.l.Ka,d.l,d):null;e:{var Y=d.i;let Fe=-1;for(;;){const Vt=["count="+C];Fe==-1?C>0?(Fe=Y[0].g,Vt.push("ofs="+Fe)):Fe=0:Vt.push("ofs="+Fe);let ot=!0;for(let Wt=0;Wt<C;Wt++){var ee=Y[Wt].g;const cr=Y[Wt].map;if(ee-=Fe,ee<0)Fe=Math.max(0,Y[Wt].g-100),ot=!1;else try{ee="req"+ee+"_"||"";try{var he=cr instanceof Map?cr:Object.entries(cr);for(const[Vi,Bn]of he){let Rr=Bn;y(Bn)&&(Rr=Ir(Bn)),Vt.push(ee+Vi+"="+encodeURIComponent(Rr))}}catch(Vi){throw Vt.push(ee+"type="+encodeURIComponent("_badmap")),Vi}}catch{M&&M(cr)}}if(ot){he=Vt.join("&");break e}}he=void 0}return d=d.i.splice(0,C),A.G=d,he}function Hr(d){if(!d.g&&!d.v){d.Y=1;var A=d.Da;ie||k(),re||(ie(),re=!0),P.add(A,d),d.A=0}}function Il(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=cs(m(d.Da,d),Cl(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Ve(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=cs(m(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),ho(this),Ve(this))};function Z(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Ve(d){d.g=new me(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var A=Gn(d.na);Oe(A,"RID","rpc"),Oe(A,"SID",d.M),Oe(A,"AID",d.K),Oe(A,"CI",d.F?"0":"1"),!d.F&&d.ia&&Oe(A,"TO",d.ia),Oe(A,"TYPE","xmlhttp"),ps(d,A),d.u&&d.o&&xl(A,d.u,d.o),d.O&&(d.g.H=d.O);var C=d.g;d=d.ba,C.M=1,C.A=lr(Gn(A)),C.u=null,C.R=!0,ao(C,d)}t.Va=function(){this.C!=null&&(this.C=null,ho(this),Il(this),Nt(19))};function Ft(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function go(d,A){var C=null;if(d.g==A){Ft(d),Z(d),d.g=null;var M=2}else if(oi(d.h,A))C=A.G,nt(d.h,A),M=1;else return;if(d.I!=0){if(A.o)if(M==1){C=A.u?A.u.length:0,A=Date.now()-A.F;var Y=d.D;M=ni(),Kt(M,new fl(M,C)),oa(d)}else Hr(d);else if(Y=A.m,Y==3||Y==0&&A.X>0||!(M==1&&Zf(d,A)||M==2&&Il(d)))switch(C&&C.length>0&&(A=d.h,A.i=A.i.concat(C)),Y){case 1:Bi(d,5);break;case 4:Bi(d,10);break;case 3:Bi(d,6);break;default:Bi(d,2)}}}function Cl(d,A){let C=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(C*=2),C*A}function Bi(d,A){if(d.j.info("Error code "+A),A==2){var C=m(d.bb,d),M=d.Ua;const Y=!M;M=new Tr(M||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||At(M,"https"),lr(M),Y?ia(M.toString(),C):_l(M.toString(),C)}else Nt(2);d.I=0,d.l&&d.l.pa(A),oc(d),sc(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function oc(d){if(d.I=0,d.ja=[],d.l){const A=Je(d.h);(A.length!=0||d.i.length!=0)&&(V(d.ja,A),V(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function ac(d,A,C){var M=C instanceof Tr?Gn(C):new Tr(C);if(M.g!="")A&&(M.g=A+"."+M.g),Xn(M,M.u);else{var Y=h.location;M=Y.protocol,A=A?A+"."+Y.hostname:Y.hostname,Y=+Y.port;const ee=new Tr(null);M&&At(ee,M),A&&(ee.g=A),Y&&Xn(ee,Y),C&&(ee.h=C),M=ee}return C=d.G,A=d.wa,C&&A&&Oe(M,C,A),Oe(M,"VER",d.ka),ps(d,M),M}function aa(d,A,C){if(A&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=d.Aa&&!d.ma?new wt(new Li({ab:C})):new wt(d.ma),A.Fa(d.L),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bt(){}t=Bt.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ms(){}ms.prototype.g=function(d,A){return new Ge(d,A)};function Ge(d,A){be.call(this),this.g=new Al(A),this.l=d,this.h=A&&A.messageUrlParams||null,d=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(d?d["X-WebChannel-Content-Type"]=A.messageContentType:d={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(d?d["X-WebChannel-Client-Profile"]=A.sa:d={"X-WebChannel-Client-Profile":A.sa}),this.g.U=d,(d=A&&A.Qb)&&!z(d)&&(this.g.u=d),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!z(A)&&(this.g.G=A,d=this.h,d!==null&&A in d&&(d=this.h,A in d&&delete d[A])),this.j=new et(this)}x(Ge,be),Ge.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){sa(this.g)},Ge.prototype.o=function(d){var A=this.g;if(typeof d=="string"){var C={};C.__data__=d,d=C}else this.v&&(C={},C.__data__=Ir(d),d=C);A.i.push(new gl(A.Ya++,d)),A.I==3&&oa(A)},Ge.prototype.N=function(){this.g.l=null,delete this.j,sa(this.g),delete this.g,Ge.Z.N.call(this)};function po(d){ge.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var A=d.__sm__;if(A){e:{for(const C in A){d=C;break e}d=void 0}(this.i=d)&&(d=this.i,A=A!==null&&d in A?A[d]:void 0),this.data=A}else this.data=d}x(po,ge);function ui(){Rt.call(this),this.status=1}x(ui,Rt);function et(d){this.g=d}x(et,Bt),et.prototype.ra=function(){Kt(this.g,"a")},et.prototype.qa=function(d){Kt(this.g,new po(d))},et.prototype.pa=function(d){Kt(this.g,new ui)},et.prototype.oa=function(){Kt(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,_x=function(){return new ms},Ex=function(){return ni()},wx=$e,q1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zo.NO_ERROR=0,Zo.TIMEOUT=8,Zo.HTTP_ERROR=6,eh=Zo,ri.COMPLETE="complete",yx=ri,tc.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",be.prototype.listen=be.prototype.J,Ul=tc,wt.prototype.listenOnce=wt.prototype.K,wt.prototype.getLastError=wt.prototype.Ha,wt.prototype.getLastErrorCode=wt.prototype.ya,wt.prototype.getStatus=wt.prototype.ca,wt.prototype.getResponseJson=wt.prototype.La,wt.prototype.getResponseText=wt.prototype.la,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Fa,mx=wt}).apply(typeof Nc<"u"?Nc:typeof self<"u"?self:typeof window<"u"?window:{});const d2="@firebase/firestore",g2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Tf("@firebase/firestore");function fa(){return Fo.logLevel}function ye(t,...e){if(Fo.logLevel<=Ke.DEBUG){const n=e.map(Dg);Fo.debug(`Firestore (${ol}): ${t}`,...n)}}function is(t,...e){if(Fo.logLevel<=Ke.ERROR){const n=e.map(Dg);Fo.error(`Firestore (${ol}): ${t}`,...n)}}function qa(t,...e){if(Fo.logLevel<=Ke.WARN){const n=e.map(Dg);Fo.warn(`Firestore (${ol}): ${t}`,...n)}}function Dg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xx(t,r,n)}function xx(t,e,n){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw is(r),new Error(r)}function ut(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||xx(e,s,r)}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class x6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class A6{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0,42304);let r=this.i;const s=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let a=new js;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new js,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await s(this.currentUser)})},y=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>y(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?y(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new js)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new Ax(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class I6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new I6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ut(this.o===void 0,3512);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const h=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new p2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=T6(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function Y1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Vd(s)===Vd(a)?qe(s,a):Vd(s)?1:-1}return qe(t.length,e.length)}const S6=55296,R6=57343;function Vd(t){const e=t.charCodeAt(0);return e>=S6&&e<=R6}function Ya(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="__name__";class gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=gi.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return qe(e.length,n.length)}static compareSegments(e,n){const r=gi.isNumericId(e),s=gi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gi.extractNumericId(e).compare(gi.extractNumericId(n)):Y1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class Pt extends gi{construct(e,n,r){return new Pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pt(n)}static emptyPath(){return new Pt([])}}const N6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends gi{construct(e,n,r){return new Cn(e,n,r)}static isValidIdentifier(e){return N6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m2}static keyField(){return new Cn([m2])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ce(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;s<e.length;){const y=e[s];if(y==="\\"){if(s+1===e.length)throw new Ce(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ce(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,s+=2}else y==="`"?(h=!h,s++):y!=="."||h?(r+=y,s++):(a(),s++)}if(a(),h)throw new Ce(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Pt.fromString(e))}static fromName(e){return new Ne(Pt.fromString(e).popFirst(5))}static empty(){return new Ne(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e,n){if(!n)throw new Ce(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P6(t,e,n,r){if(e===!0&&r===!0)throw new Ce(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function y2(t){if(!Ne.isDocumentKey(t))throw new Ce(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ix(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function Bo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mg(t);throw new Ce(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yu(t,e){if(!Ix(t))throw new Ce(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const h=t[r];if(s&&typeof h!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&h!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ce(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=-62135596800,E2=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*E2);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<w2)throw new Ce(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E2}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yu(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-w2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:en("string",vt._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new vt(0,0))}static max(){return new Me(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-1;function O6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new Xs(s,Ne.empty(),e)}function D6(t){return new Xs(t.readTime,t.key,Nu)}class Xs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xs(Me.min(),Ne.empty(),Nu)}static max(){return new Xs(Me.max(),Ne.empty(),Nu)}}function k6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==M6)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,r)=>{n(e)})}static reject(e){return new oe((n,r)=>{r(e)})}static waitFor(e){return new oe((n,r)=>{let s=0,a=0,h=!1;e.forEach(y=>{++s,y.next(()=>{++a,h&&a===s&&n()},p=>r(p))}),h=!0,a===s&&n()})}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next(s=>s?oe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new oe((r,s)=>{const a=e.length,h=new Array(a);let y=0;for(let p=0;p<a;p++){const m=p;n(e[m]).next(E=>{h[m]=E,++y,y===a&&r(h)},E=>s(E))}})}static doWhile(e,n){return new oe((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function F6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=-1;function kf(t){return t==null}function jh(t){return t===0&&1/t==-1/0}function B6(t){return typeof t=="number"&&Number.isInteger(t)&&!jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="";function V6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_2(e)),e=U6(t.get(n),e);return _2(e)}function U6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case Cx:n+="";break;default:n+=a}}return n}function _2(t){return t+Cx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??In.RED,this.left=s??In.EMPTY,this.right=a??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new In(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return In.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A2(this.data.getIterator())}getIteratorFrom(e){return new A2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class A2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new pr([])}unionWith(e){let n=new un(Cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Tx("Invalid base64 string: "+a):a}}(e);return new Sn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let h=0;h<s.length;++h)a+=String.fromCharCode(s[h]);return a}(e);return new Sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const z6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(t){if(ut(!!t,39018),typeof t=="string"){let e=0;const n=z6.exec(t);if(ut(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qs(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="server_timestamp",Rx="__type__",Nx="__previous_value__",bx="__local_write_time__";function Fg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Rx])==null?void 0:r.stringValue)===Sx}function Mf(t){const e=t.mapValue.fields[Nx];return Fg(e)?Mf(e):e}function bu(t){const e=Ks(t.mapValue.fields[bx].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r,s,a,h,y,p,m,E){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=E}}const Hh="(default)";class Pu{constructor(e,n){this.projectId=e,this.database=n||Hh}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="__type__",H6="__max__",Pc={mapValue:{}},Ox="__vector__",Wh="value";function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fg(t)?4:G6(t)?9007199254740991:W6(t)?10:11:Pe(28295,{value:t})}function Ti(t,e){if(t===e)return!0;const n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bu(t).isEqual(bu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const h=Ks(s.timestampValue),y=Ks(a.timestampValue);return h.seconds===y.seconds&&h.nanos===y.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return qs(s.bytesValue).isEqual(qs(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Gt(s.geoPointValue.latitude)===Gt(a.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Gt(s.integerValue)===Gt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const h=Gt(s.doubleValue),y=Gt(a.doubleValue);return h===y?jh(h)===jh(y):isNaN(h)&&isNaN(y)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(s,a){const h=s.mapValue.fields||{},y=a.mapValue.fields||{};if(x2(h)!==x2(y))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(y[p]===void 0||!Ti(h[p],y[p])))return!1;return!0}(t,e);default:return Pe(52216,{left:t})}}function Ou(t,e){return(t.values||[]).find(n=>Ti(n,e))!==void 0}function Qa(t,e){if(t===e)return 0;const n=Ys(t),r=Ys(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(a,h){const y=Gt(a.integerValue||a.doubleValue),p=Gt(h.integerValue||h.doubleValue);return y<p?-1:y>p?1:y===p?0:isNaN(y)?isNaN(p)?0:-1:1}(t,e);case 3:return I2(t.timestampValue,e.timestampValue);case 4:return I2(bu(t),bu(e));case 5:return Y1(t.stringValue,e.stringValue);case 6:return function(a,h){const y=qs(a),p=qs(h);return y.compareTo(p)}(t.bytesValue,e.bytesValue);case 7:return function(a,h){const y=a.split("/"),p=h.split("/");for(let m=0;m<y.length&&m<p.length;m++){const E=qe(y[m],p[m]);if(E!==0)return E}return qe(y.length,p.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,h){const y=qe(Gt(a.latitude),Gt(h.latitude));return y!==0?y:qe(Gt(a.longitude),Gt(h.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C2(t.arrayValue,e.arrayValue);case 10:return function(a,h){var v,O,V,U;const y=a.fields||{},p=h.fields||{},m=(v=y[Wh])==null?void 0:v.arrayValue,E=(O=p[Wh])==null?void 0:O.arrayValue,x=qe(((V=m==null?void 0:m.values)==null?void 0:V.length)||0,((U=E==null?void 0:E.values)==null?void 0:U.length)||0);return x!==0?x:C2(m,E)}(t.mapValue,e.mapValue);case 11:return function(a,h){if(a===Pc.mapValue&&h===Pc.mapValue)return 0;if(a===Pc.mapValue)return 1;if(h===Pc.mapValue)return-1;const y=a.fields||{},p=Object.keys(y),m=h.fields||{},E=Object.keys(m);p.sort(),E.sort();for(let x=0;x<p.length&&x<E.length;++x){const v=Y1(p[x],E[x]);if(v!==0)return v;const O=Qa(y[p[x]],m[E[x]]);if(O!==0)return O}return qe(p.length,E.length)}(t.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function I2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Ks(t),r=Ks(e),s=qe(n.seconds,r.seconds);return s!==0?s:qe(n.nanos,r.nanos)}function C2(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Qa(n[s],r[s]);if(a)return a}return qe(n.length,r.length)}function $a(t){return Q1(t)}function Q1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Q1(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const h of r)a?a=!1:s+=",",s+=`${h}:${Q1(n.fields[h])}`;return s+"}"}(t.mapValue):Pe(61005,{value:t})}function th(t){switch(Ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mf(t);return e?16+th(e):16;case 5:return 2*t.stringValue.length;case 6:return qs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+th(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return no(r.fields,(a,h)=>{s+=a.length+th(h)}),s}(t.mapValue);default:throw Pe(13486,{value:t})}}function $1(t){return!!t&&"integerValue"in t}function Bg(t){return!!t&&"arrayValue"in t}function v2(t){return!!t&&"nullValue"in t}function T2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nh(t){return!!t&&"mapValue"in t}function W6(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Px])==null?void 0:r.stringValue)===Ox}function nu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return{...t}}function G6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===H6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=Cn.emptyPath(),r={},s=[];e.forEach((h,y)=>{if(!n.isImmediateParentOf(y)){const p=this.getFieldsMap(n);this.applyChanges(p,r,s),r={},s=[],n=y.popLast()}h?r[y.lastSegment()]=nu(h):s.push(y.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){no(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new $n(nu(this.value))}}function Dx(t){const e=[];return no(t.fields,(n,r)=>{const s=new Cn([n]);if(nh(r)){const a=Dx(r.mapValue).fields;if(a.length===0)e.push(s);else for(const h of a)e.push(s.child(h))}else e.push(s)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r,s,a,h,y){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=h,this.documentState=y}static newInvalidDocument(e){return new kn(e,0,Me.min(),Me.min(),Me.min(),$n.empty(),0)}static newFoundDocument(e,n,r,s){return new kn(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new kn(e,2,n,Me.min(),Me.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new kn(e,3,n,Me.min(),Me.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function S2(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],h=t.position[s];if(a.field.isKeyField()?r=Ne.comparator(Ne.fromName(h.referenceValue),n.key):r=Qa(h,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function R2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n="asc"){this.field=e,this.dir=n}}function X6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{}class on extends kx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new q6(e,n,r):n==="array-contains"?new $6(e,r):n==="in"?new Z6(e,r):n==="not-in"?new J6(e,r):n==="array-contains-any"?new eN(e,r):new on(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y6(e,r):new Q6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends kx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Si(e,n)}matches(e){return Mx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Mx(t){return t.op==="and"}function Lx(t){return K6(t)&&Mx(t)}function K6(t){for(const e of t.filters)if(e instanceof Si)return!1;return!0}function Z1(t){if(t instanceof on)return t.field.canonicalString()+t.op.toString()+$a(t.value);if(Lx(t))return t.filters.map(e=>Z1(e)).join(",");{const e=t.filters.map(n=>Z1(n)).join(",");return`${t.op}(${e})`}}function Fx(t,e){return t instanceof on?function(r,s){return s instanceof on&&r.op===s.op&&r.field.isEqual(s.field)&&Ti(r.value,s.value)}(t,e):t instanceof Si?function(r,s){return s instanceof Si&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,h,y)=>a&&Fx(h,s.filters[y]),!0):!1}(t,e):void Pe(19439)}function Bx(t){return t instanceof on?function(n){return`${n.field.canonicalString()} ${n.op} ${$a(n.value)}`}(t):t instanceof Si?function(n){return n.op.toString()+" {"+n.getFilters().map(Bx).join(" ,")+"}"}(t):"Filter"}class q6 extends on{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y6 extends on{constructor(e,n){super(e,"in",n),this.keys=Vx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Q6 extends on{constructor(e,n){super(e,"not-in",n),this.keys=Vx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class $6 extends on{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bg(n)&&Ou(n.arrayValue,this.value)}}class Z6 extends on{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ou(this.value.arrayValue,n)}}class J6 extends on{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ou(this.value.arrayValue,n)}}class eN extends on{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n=null,r=[],s=[],a=null,h=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=h,this.endAt=y,this.Te=null}}function N2(t,e=null,n=[],r=[],s=null,a=null,h=null){return new tN(t,e,n,r,s,a,h)}function Vg(t){const e=Be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Z1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),kf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$a(r)).join(",")),e.Te=n}return e.Te}function Ug(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!X6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R2(t.startAt,e.startAt)&&R2(t.endAt,e.endAt)}function J1(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n=null,r=[],s=[],a=null,h="F",y=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=h,this.startAt=y,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nN(t,e,n,r,s,a,h,y){return new Lf(t,e,n,r,s,a,h,y)}function zg(t){return new Lf(t)}function b2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rN(t){return t.collectionGroup!==null}function ru(t){const e=Be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let y=new un(Cn.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(y=y.add(m.field))})}),y})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Xh(a,r))}),n.has(Cn.keyField().canonicalString())||e.Ie.push(new Xh(Cn.keyField(),r))}return e.Ie}function Ei(t){const e=Be(t);return e.Ee||(e.Ee=iN(e,ru(t))),e.Ee}function iN(t,e){if(t.limitType==="F")return N2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Xh(s.field,a)});const n=t.endAt?new Gh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gh(t.startAt.position,t.startAt.inclusive):null;return N2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function e0(t,e,n){return new Lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return Ug(Ei(t),Ei(e))&&t.limitType===e.limitType}function Ux(t){return`${Vg(Ei(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Bx(s)).join(", ")}]`),kf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$a(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$a(s)).join(",")),`Target(${r})`}(Ei(t))}; limitType=${t.limitType})`}function Bf(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ne.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of ru(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(h,y,p){const m=S2(h,y,p);return h.inclusive?m<=0:m<0}(r.startAt,ru(r),s)||r.endAt&&!function(h,y,p){const m=S2(h,y,p);return h.inclusive?m>=0:m>0}(r.endAt,ru(r),s))}(t,e)}function sN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zx(t){return(e,n)=>{let r=!1;for(const s of ru(t)){const a=oN(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function oN(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(a,h,y){const p=h.data.field(a),m=y.data.field(a);return p!==null&&m!==null?Qa(p,m):Pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return vx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Mt(Ne.comparator);function ss(){return aN}const jx=new Mt(Ne.comparator);function zl(...t){let e=jx;for(const n of t)e=e.insert(n.key,n);return e}function Hx(t){let e=jx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Co(){return iu()}function Wx(){return iu()}function iu(){return new Ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const lN=new Mt(Ne.comparator),uN=new un(Ne.comparator);function Ye(...t){let e=uN;for(const n of t)e=e.add(n);return e}const cN=new un(qe);function hN(){return cN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function Gx(t){return{integerValue:""+t}}function fN(t,e){return B6(e)?Gx(e):jg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function dN(t,e,n){return t instanceof Du?function(s,a){const h={fields:{[Rx]:{stringValue:Sx},[bx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fg(a)&&(a=Mf(a)),a&&(h.fields[Nx]=a),{mapValue:h}}(n,e):t instanceof ku?Kx(t,e):t instanceof Mu?qx(t,e):function(s,a){const h=Xx(s,a),y=P2(h)+P2(s.Ae);return $1(h)&&$1(s.Ae)?Gx(y):jg(s.serializer,y)}(t,e)}function gN(t,e,n){return t instanceof ku?Kx(t,e):t instanceof Mu?qx(t,e):n}function Xx(t,e){return t instanceof Kh?function(r){return $1(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Du extends Vf{}class ku extends Vf{constructor(e){super(),this.elements=e}}function Kx(t,e){const n=Yx(e);for(const r of t.elements)n.some(s=>Ti(s,r))||n.push(r);return{arrayValue:{values:n}}}class Mu extends Vf{constructor(e){super(),this.elements=e}}function qx(t,e){let n=Yx(e);for(const r of t.elements)n=n.filter(s=>!Ti(s,r));return{arrayValue:{values:n}}}class Kh extends Vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function P2(t){return Gt(t.integerValue||t.doubleValue)}function Yx(t){return Bg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n){this.field=e,this.transform=n}}function mN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ku&&s instanceof ku||r instanceof Mu&&s instanceof Mu?Ya(r.elements,s.elements,Ti):r instanceof Kh&&s instanceof Kh?Ti(r.Ae,s.Ae):r instanceof Du&&s instanceof Du}(t.transform,e.transform)}class yN{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uf{}function Qx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zx(t.key,_i.none()):new Qu(t.key,t.data,_i.none());{const n=t.data,r=$n.empty();let s=new un(Cn.comparator);for(let a of e.fields)if(!s.has(a)){let h=n.field(a);h===null&&a.length>1&&(a=a.popLast(),h=n.field(a)),h===null?r.delete(a):r.set(a,h),s=s.add(a)}return new ro(t.key,r,new pr(s.toArray()),_i.none())}}function wN(t,e,n){t instanceof Qu?function(s,a,h){const y=s.value.clone(),p=D2(s.fieldTransforms,a,h.transformResults);y.setAll(p),a.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(t,e,n):t instanceof ro?function(s,a,h){if(!rh(s.precondition,a))return void a.convertToUnknownDocument(h.version);const y=D2(s.fieldTransforms,a,h.transformResults),p=a.data;p.setAll($x(s)),p.setAll(y),a.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(t,e,n):function(s,a,h){a.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function su(t,e,n,r){return t instanceof Qu?function(a,h,y,p){if(!rh(a.precondition,h))return y;const m=a.value.clone(),E=k2(a.fieldTransforms,p,h);return m.setAll(E),h.convertToFoundDocument(h.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof ro?function(a,h,y,p){if(!rh(a.precondition,h))return y;const m=k2(a.fieldTransforms,p,h),E=h.data;return E.setAll($x(a)),E.setAll(m),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),y===null?null:y.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(t,e,n,r):function(a,h,y){return rh(a.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):y}(t,e,n)}function EN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Xx(r.transform,s||null);a!=null&&(n===null&&(n=$n.empty()),n.set(r.field,a))}return n||null}function O2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ya(r,s,(a,h)=>mN(a,h))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qu extends Uf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ro extends Uf{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $x(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function D2(t,e,n){const r=new Map;ut(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],h=a.transform,y=e.data.field(a.field);r.set(a.field,gN(h,y,n[s]))}return r}function k2(t,e,n){const r=new Map;for(const s of t){const a=s.transform,h=n.data.field(s.field);r.set(s.field,dN(a,h,e))}return r}class Zx extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _N extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&wN(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Wx();return this.mutations.forEach(s=>{const a=e.get(s.key),h=a.overlayedDocument;let y=this.applyToLocalView(h,a.mutatedFields);y=n.has(s.key)?null:y;const p=Qx(h,y);p!==null&&r.set(s.key,p),h.isValidDocument()||h.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(n,r)=>O2(n,r))&&Ya(this.baseMutations,e.baseMutations,(n,r)=>O2(n,r))}}class Hg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ut(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return lN}();const a=e.mutations;for(let h=0;h<a.length;h++)s=s.insert(a[h].key,r[h].version);return new Hg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,tt;function CN(t){switch(t){case le.OK:return Pe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function Jx(t){if(t===void 0)return is("GRPC error has no .code"),le.UNKNOWN;switch(t){case Zt.OK:return le.OK;case Zt.CANCELLED:return le.CANCELLED;case Zt.UNKNOWN:return le.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return le.INTERNAL;case Zt.UNAVAILABLE:return le.UNAVAILABLE;case Zt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Zt.NOT_FOUND:return le.NOT_FOUND;case Zt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Zt.ABORTED:return le.ABORTED;case Zt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Zt.DATA_LOSS:return le.DATA_LOSS;default:return Pe(39323,{code:t})}}(tt=Zt||(Zt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new zs([4294967295,4294967295],0);function M2(t){const e=vN().encode(t),n=new px;return n.update(e),new Uint8Array(n.digest())}function L2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zs([n,r],0),new zs([s,a],0)]}class Wg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jl(`Invalid padding: ${n}`);if(r<0)throw new jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zs.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zs.fromNumber(r)));return s.compare(TN)===1&&(s=new zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=M2(e),[r,s]=L2(n);for(let a=0;a<this.hashCount;a++){const h=this.ye(r,s,a);if(!this.we(h))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),h=new Wg(a,s,n);return r.forEach(y=>h.insert(y)),h}insert(e){if(this.ge===0)return;const n=M2(e),[r,s]=L2(n);for(let a=0;a<this.hashCount;a++){const h=this.ye(r,s,a);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zf(Me.min(),s,new Mt(qe),ss(),Ye())}}class $u{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $u(r,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class eA{constructor(e,n){this.targetId=e,this.Ce=n}}class tA{constructor(e,n,r=Sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class F2{constructor(){this.ve=0,this.Fe=B2(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),r=Ye();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Pe(38017,{changeType:a})}}),new $u(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=B2()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SN{constructor(e){this.Ge=e,this.ze=new Map,this.je=ss(),this.Je=Oc(),this.He=Oc(),this.Ye=new Mt(qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(J1(a))if(r===0){const h=new Ne(a.path);this.et(n,h,kn.newNoDocument(h,Me.min()))}else ut(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const y=this.ut(e),p=y?this.ct(y,e,h):1;if(p!==0){this.it(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let h,y;try{h=qs(r).toUint8Array()}catch(p){if(p instanceof Tx)return qa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{y=new Wg(h,s,a)}catch(p){return qa(p instanceof jl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return y.ge===0?null:y}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const h=this.Ge.ht(),y=`projects/${h.projectId}/databases/${h.database}/documents/${a.path.canonicalString()}`;e.mightContain(y)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,h)=>{const y=this.ot(h);if(y){if(a.current&&J1(y.target)){const p=new Ne(y.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,kn.newNoDocument(p,e))}a.Be&&(n.set(h,a.ke()),a.qe())}});let r=Ye();this.He.forEach((a,h)=>{let y=!0;h.forEachWhile(p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)}),y&&(r=r.add(a))}),this.je.forEach((a,h)=>h.setReadTime(e));const s=new zf(e,n,this.Ye,this.je,r);return this.je=ss(),this.Je=Oc(),this.He=Oc(),this.Ye=new Mt(qe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new F2,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new un(qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new un(qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new F2),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Oc(){return new Mt(Ne.comparator)}function B2(){return new Mt(Ne.comparator)}const RN={asc:"ASCENDING",desc:"DESCENDING"},NN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bN={and:"AND",or:"OR"};class PN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function t0(t,e){return t.useProto3Json||kf(e)?e:{value:e}}function qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ON(t,e){return qh(t,e.toTimestamp())}function xi(t){return ut(!!t,49232),Me.fromTimestamp(function(n){const r=Ks(n);return new vt(r.seconds,r.nanos)}(t))}function Gg(t,e){return n0(t,e).canonicalString()}function n0(t,e){const n=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rA(t){const e=Pt.fromString(t);return ut(lA(e),10190,{key:e.toString()}),e}function r0(t,e){return Gg(t.databaseId,e.path)}function Ud(t,e){const n=rA(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(sA(n))}function iA(t,e){return Gg(t.databaseId,e)}function DN(t){const e=rA(t);return e.length===4?Pt.emptyPath():sA(e)}function i0(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sA(t){return ut(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function V2(t,e,n){return{name:r0(t,e),fields:n.value.mapValue.fields}}function kN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Pe(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,E){return m.useProto3Json?(ut(E===void 0||typeof E=="string",58123),Sn.fromBase64String(E||"")):(ut(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Sn.fromUint8Array(E||new Uint8Array))}(t,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(m){const E=m.code===void 0?le.UNKNOWN:Jx(m.code);return new Ce(E,m.message||"")}(h);n=new tA(r,s,a,y||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ud(t,r.document.name),a=xi(r.document.updateTime),h=r.document.createTime?xi(r.document.createTime):Me.min(),y=new $n({mapValue:{fields:r.document.fields}}),p=kn.newFoundDocument(s,a,h,y),m=r.targetIds||[],E=r.removedTargetIds||[];n=new ih(m,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ud(t,r.document),a=r.readTime?xi(r.readTime):Me.min(),h=kn.newNoDocument(s,a),y=r.removedTargetIds||[];n=new ih([],y,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ud(t,r.document),a=r.removedTargetIds||[];n=new ih([],a,s,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,h=new IN(s,a),y=r.targetId;n=new eA(y,h)}}return n}function MN(t,e){let n;if(e instanceof Qu)n={update:V2(t,e.key,e.value)};else if(e instanceof Zx)n={delete:r0(t,e.key)};else if(e instanceof ro)n={update:V2(t,e.key,e.data),updateMask:WN(e.fieldMask)};else{if(!(e instanceof _N))return Pe(16599,{Vt:e.type});n={verify:r0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,h){const y=h.transform;if(y instanceof Du)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof ku)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Mu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Kh)return{fieldPath:h.field.canonicalString(),increment:y.Ae};throw Pe(20930,{transform:h.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:ON(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Pe(27497)}(t,e.precondition)),n}function LN(t,e){return t&&t.length>0?(ut(e!==void 0,14353),t.map(n=>function(s,a){let h=s.updateTime?xi(s.updateTime):xi(a);return h.isEqual(Me.min())&&(h=xi(a)),new yN(h,s.transformResults||[])}(n,e))):[]}function FN(t,e){return{documents:[iA(t,e.path)]}}function BN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iA(t,s);const a=function(m){if(m.length!==0)return aA(Si.create(m,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const h=function(m){if(m.length!==0)return m.map(E=>function(v){return{field:ga(v.field),direction:zN(v.dir)}}(E))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const y=t0(t,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ft:n,parent:s}}function VN(t){let e=DN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ut(r===1,65062);const E=n.from[0];E.allDescendants?s=E.collectionId:e=e.child(E.collectionId)}let a=[];n.where&&(a=function(x){const v=oA(x);return v instanceof Si&&Lx(v)?v.getFilters():[v]}(n.where));let h=[];n.orderBy&&(h=function(x){return x.map(v=>function(V){return new Xh(pa(V.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(v))}(n.orderBy));let y=null;n.limit&&(y=function(x){let v;return v=typeof x=="object"?x.value:x,kf(v)?null:v}(n.limit));let p=null;n.startAt&&(p=function(x){const v=!!x.before,O=x.values||[];return new Gh(O,v)}(n.startAt));let m=null;return n.endAt&&(m=function(x){const v=!x.before,O=x.values||[];return new Gh(O,v)}(n.endAt)),nN(e,s,h,a,y,"F",p,m)}function UN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pa(n.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pa(n.unaryFilter.field);return on.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pa(n.unaryFilter.field);return on.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=pa(n.unaryFilter.field);return on.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return on.create(pa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Si.create(n.compositeFilter.filters.map(r=>oA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(t):Pe(30097,{filter:t})}function zN(t){return RN[t]}function jN(t){return NN[t]}function HN(t){return bN[t]}function ga(t){return{fieldPath:t.canonicalString()}}function pa(t){return Cn.fromServerFormat(t.fieldPath)}function aA(t){return t instanceof on?function(n){if(n.op==="=="){if(T2(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(v2(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(T2(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(v2(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:jN(n.op),value:n.value}}}(t):t instanceof Si?function(n){const r=n.getFilters().map(s=>aA(s));return r.length===1?r[0]:{compositeFilter:{op:HN(n.op),filters:r}}}(t):Pe(54877,{filter:t})}function WN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r,s,a=Me.min(),h=Me.min(),y=Sn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y,this.expectedCount=p}withSequenceNumber(e){return new bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.yt=e}}function XN(t){const e=VN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?e0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.Cn=new qN}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Xs.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class qN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new un(Pt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uA=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(uA,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Za(0)}static cr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="LruGarbageCollector",YN=1048576;function j2([t,e],[n,r]){const s=qe(t,n);return s===0?qe(e,r):s}class QN{constructor(e){this.Ir=e,this.buffer=new un(j2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();j2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $N{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(z2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ll(n)?ye(z2,"Ignoring IndexedDB error during garbage collection: ",n):await al(n)}await this.Vr(3e5)})}}class ZN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(Df.ce);const r=new QN(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(U2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U2):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,h,y,p,m;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,h=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,y=Date.now(),this.removeTargets(e,r,n))).next(x=>(a=x,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(m=Date.now(),fa()<=Ke.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${s} in `+(y-h)+`ms
	Removed ${a} targets in `+(p-y)+`ms
	Removed ${x} documents in `+(m-p)+`ms
Total Duration: ${m-E}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:x})))}}function JN(t,e){return new ZN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(){this.changes=new Ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&su(r.mutation,s,pr.empty(),vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ye()){const s=Co();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let h=zl();return a.forEach((y,p)=>{h=h.insert(y,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const r=Co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((h,y)=>{n.set(h,y)})})}computeViews(e,n,r,s){let a=ss();const h=iu(),y=function(){return iu()}();return n.forEach((p,m)=>{const E=r.get(m.key);s.has(m.key)&&(E===void 0||E.mutation instanceof ro)?a=a.insert(m.key,m):E!==void 0?(h.set(m.key,E.mutation.getFieldMask()),su(E.mutation,m,E.mutation.getFieldMask(),vt.now())):h.set(m.key,pr.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((m,E)=>h.set(m,E)),n.forEach((m,E)=>y.set(m,new tb(E,h.get(m)??null))),y))}recalculateAndSaveOverlays(e,n){const r=iu();let s=new Mt((h,y)=>h-y),a=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const y of h)y.keys().forEach(p=>{const m=n.get(p);if(m===null)return;let E=r.get(p)||pr.empty();E=y.applyToLocalView(m,E),r.set(p,E);const x=(s.get(y.batchId)||Ye()).add(p);s=s.insert(y.batchId,x)})}).next(()=>{const h=[],y=s.getReverseIterator();for(;y.hasNext();){const p=y.getNext(),m=p.key,E=p.value,x=Wx();E.forEach(v=>{if(!a.has(v)){const O=Qx(n.get(v),r.get(v));O!==null&&x.set(v,O),a=a.add(v)}}),h.push(this.documentOverlayCache.saveOverlays(e,m,x))}return oe.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(h){return Ne.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const h=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):oe.resolve(Co());let y=Nu,p=a;return h.next(m=>oe.forEach(m,(E,x)=>(y<x.largestBatchId&&(y=x.largestBatchId),a.get(E)?oe.resolve():this.remoteDocumentCache.getEntry(e,E).next(v=>{p=p.insert(E,v)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,p,m,Ye())).next(E=>({batchId:y,changes:Hx(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let s=zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let h=zl();return this.indexManager.getCollectionParents(e,a).next(y=>oe.forEach(y,p=>{const m=function(x,v){return new Lf(v,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(E=>{E.forEach((x,v)=>{h=h.insert(x,v)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(h=>(a=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(h=>{a.forEach((p,m)=>{const E=m.getKey();h.get(E)===null&&(h=h.insert(E,kn.newInvalidDocument(E)))});let y=zl();return h.forEach((p,m)=>{const E=a.get(p);E!==void 0&&su(E.mutation,m,pr.empty(),vt.now()),Bf(n,m)&&(y=y.insert(p,m))}),y})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xi(s.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:XN(s.bundledQuery),readTime:xi(s.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.overlays=new Mt(Ne.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Co();return oe.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),oe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const s=Co(),a=n.length+1,h=new Ne(n.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const p=y.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>r&&s.set(p.getKey(),p)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Mt((m,E)=>m-E);const h=this.overlays.getIterator();for(;h.hasNext();){const m=h.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let E=a.get(m.largestBatchId);E===null&&(E=Co(),a=a.insert(m.largestBatchId,E)),E.set(m.getKey(),m)}}const y=Co(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,E)=>y.set(m,E)),!(y.size()>=s)););return oe.resolve(y)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const h=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new AN(n,r));let a=this.qr.get(n);a===void 0&&(a=Ye(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.Qr=new un(gn.$r),this.Ur=new un(gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new gn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Ne(new Pt([])),r=new gn(n,e),s=new gn(n,e+1),a=[];return this.Ur.forEachInRange([r,s],h=>{this.Gr(h),a.push(h.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ne(new Pt([])),r=new gn(n,e),s=new gn(n,e+1);let a=Ye();return this.Ur.forEachInRange([r,s],h=>{a=a.add(h.key)}),a}containsKey(e){const n=new gn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ne.comparator(e.key,n.key)||qe(e.Yr,n.Yr)}static Kr(e,n){return qe(e.Yr,n.Yr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new un(gn.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new xN(a,n,r,s);this.mutationQueue.push(h);for(const y of s)this.Zr=this.Zr.add(new gn(y.key,a)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return oe.resolve(h)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Lg:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gn(n,0),s=new gn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],h=>{const y=this.Xr(h.Yr);a.push(y)}),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(qe);return n.forEach(s=>{const a=new gn(s,0),h=new gn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,h],y=>{r=r.add(y.Yr)})}),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ne.isDocumentKey(a)||(a=a.child(""));const h=new gn(new Ne(a),0);let y=new un(qe);return this.Zr.forEachWhile(p=>{const m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(y=y.add(p.Yr)),!0)},h),oe.resolve(this.ti(y))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ut(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(n.mutations,s=>{const a=new gn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new gn(n,0),s=this.Zr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.ri=e,this.docs=function(){return new Mt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(n))}getEntries(e,n){let r=ss();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():kn.newInvalidDocument(s))}),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=ss();const h=n.path,y=new Ne(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(y);for(;p.hasNext();){const{key:m,value:{document:E}}=p.getNext();if(!h.isPrefixOf(m.path))break;m.path.length>h.length+1||k6(D6(E),r)<=0||(s.has(E.key)||Bf(n,E))&&(a=a.insert(E.key,E.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Pe(9500)}ii(e,n){return oe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lb(this)}getSize(e){return oe.resolve(this.size)}}class lb extends eb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.persistence=e,this.si=new Ko(n=>Vg(n),Ug),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Xg,this.targetCount=0,this.ai=Za.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((h,y)=>{y.sequenceNumber<=n&&r.get(y.targetId)===null&&(this.si.delete(h),a.push(this.removeMatchingKeysForTargetId(e,y.targetId)),s++)}),oe.waitFor(a).next(()=>s)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(h=>{a.push(s.markPotentiallyOrphaned(e,h))}),oe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Df(0),this.li=!1,this.li=!0,this.hi=new sb,this.referenceDelegate=e(this),this.Pi=new ub(this),this.indexManager=new KN,this.remoteDocumentCache=function(s){return new ab(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new GN(n),this.Ii=new rb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ib,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new ob(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const s=new cb(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return oe.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class cb extends L6{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.Ri=new Xg,this.Vi=null}static mi(e){return new Kg(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,r=>{const s=Ne.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,Me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yh{constructor(e,n){this.persistence=e,this.pi=new Ko(r=>V6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=JN(this,n)}static mi(e,n){return new Yh(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return oe.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?oe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,h=>this.br(e,h,n).next(y=>{y||(r++,a.removeEntry(h,Me.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=th(e.data.value)),n}br(e,n,r){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return oe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ye(),s=Ye();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new qg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return D3()?8:F6(Ln())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(h=>{a.result=h}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(h=>{a.result=h})}).next(()=>{if(a.result)return;const h=new hb;return this.Ss(e,n,h).next(y=>{if(a.result=y,this.Vs)return this.bs(e,n,h,y.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(fa()<=Ke.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(fa()<=Ke.DEBUG&&ye("QueryEngine","Query:",da(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(fa()<=Ke.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):oe.resolve())}ys(e,n){if(b2(n))return oe.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=e0(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const h=Ye(...a);return this.ps.getDocuments(e,h).next(y=>this.indexManager.getMinOffset(e,r).next(p=>{const m=this.Ds(n,y);return this.Cs(n,m,h,p.readTime)?this.ys(e,e0(n,null,"F")):this.vs(e,m,n,p)}))})))}ws(e,n,r,s){return b2(n)||s.isEqual(Me.min())?oe.resolve(null):this.ps.getDocuments(e,r).next(a=>{const h=this.Ds(n,a);return this.Cs(n,h,r,s)?oe.resolve(null):(fa()<=Ke.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),da(n)),this.vs(e,h,n,O6(s,Nu)).next(y=>y))})}Ds(e,n){let r=new un(zx(e));return n.forEach((s,a)=>{Bf(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return fa()<=Ke.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",da(n)),this.ps.getDocumentsMatchingQuery(e,n,Xs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(h=>{a=a.insert(h.key,h)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="LocalStore",db=3e8;class gb{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Mt(qe),this.xs=new Ko(a=>Vg(a),Ug),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function pb(t,e,n,r){return new gb(t,e,n,r)}async function hA(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const h=[],y=[];let p=Ye();for(const m of s){h.push(m.batchId);for(const E of m.mutations)p=p.add(E.key)}for(const m of a){y.push(m.batchId);for(const E of m.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(r,p).next(m=>({Ls:m,removedBatchIds:h,addedBatchIds:y}))})})}function mb(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(y,p,m,E){const x=m.batch,v=x.keys();let O=oe.resolve();return v.forEach(V=>{O=O.next(()=>E.getEntry(p,V)).next(U=>{const H=m.docVersions.get(V);ut(H!==null,48541),U.version.compareTo(H)<0&&(x.applyToRemoteDocument(U,m),U.isValidDocument()&&(U.setReadTime(m.commitVersion),E.addEntry(U)))})}),O.next(()=>y.mutationQueue.removeMutationBatch(p,x))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(y){let p=Ye();for(let m=0;m<y.mutationResults.length;++m)y.mutationResults[m].transformResults.length>0&&(p=p.add(y.batch.mutations[m].key));return p}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function fA(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function yb(t,e){const n=Be(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const y=[];e.targetChanges.forEach((E,x)=>{const v=s.get(x);if(!v)return;y.push(n.Pi.removeMatchingKeys(a,E.removedDocuments,x).next(()=>n.Pi.addMatchingKeys(a,E.addedDocuments,x)));let O=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?O=O.withResumeToken(Sn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,r)),s=s.insert(x,O),function(U,H,F){return U.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=db?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(v,O,E)&&y.push(n.Pi.updateTargetData(a,O))});let p=ss(),m=Ye();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(a,E))}),y.push(wb(a,h,e.documentUpdates).next(E=>{p=E.ks,m=E.qs})),!r.isEqual(Me.min())){const E=n.Pi.getLastRemoteSnapshotVersion(a).next(x=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));y.push(E)}return oe.waitFor(y).next(()=>h.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,p,m)).next(()=>p)}).then(a=>(n.Ms=s,a))}function wb(t,e,n){let r=Ye(),s=Ye();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let h=ss();return n.forEach((y,p)=>{const m=a.get(y);p.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(y)),p.isNoDocument()&&p.version.isEqual(Me.min())?(e.removeEntry(y,p.readTime),h=h.insert(y,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),h=h.insert(y,p)):ye(Yg,"Ignoring outdated watch update for ",y,". Current version:",m.version," Watch version:",p.version)}),{ks:h,qs:s}})}function Eb(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Lg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _b(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,oe.resolve(s)):n.Pi.allocateTargetId(r).next(h=>(s=new bs(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function s0(t,e,n){const r=Be(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,h=>r.persistence.referenceDelegate.removeTarget(h,s))}catch(h){if(!ll(h))throw h;ye(Yg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function H2(t,e,n){const r=Be(t);let s=Me.min(),a=Ye();return r.persistence.runTransaction("Execute query","readwrite",h=>function(p,m,E){const x=Be(p),v=x.xs.get(E);return v!==void 0?oe.resolve(x.Ms.get(v)):x.Pi.getTargetData(m,E)}(r,h,Ei(e)).next(y=>{if(y)return s=y.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,y.targetId).next(p=>{a=p})}).next(()=>r.Fs.getDocumentsMatchingQuery(h,e,n?s:Me.min(),n?a:Ye())).next(y=>(xb(r,sN(e),y),{documents:y,Qs:a})))}function xb(t,e,n){let r=t.Os.get(e)||Me.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class W2{constructor(){this.activeTargetIds=hN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ab{constructor(){this.Mo=new W2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new W2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="ConnectivityMonitor";class X2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(G2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(G2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function o0(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="RestConnection",Cb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const h=o0(),y=this.zo(e,n.toUriEncodedString());ye(zd,`Sending RPC '${e}' ${h}:`,y,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,s,a);const{host:m}=new URL(y),E=Wo(m);return this.Jo(e,y,p,r,E).then(x=>(ye(zd,`Received RPC '${e}' ${h}: `,x),x),x=>{throw qa(zd,`RPC '${e}' ${h} failed with error: `,x,"url: ",y,"request:",r),x})}Ho(e,n,r,s,a,h){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=Cb[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class Sb extends vb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const h=o0();return new Promise((y,p)=>{const m=new mx;m.setWithCredentials(!0),m.listenOnce(yx.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case eh.NO_ERROR:const x=m.getResponseJson();ye(Pn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(x)),y(x);break;case eh.TIMEOUT:ye(Pn,`RPC '${e}' ${h} timed out`),p(new Ce(le.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const v=m.getStatus();if(ye(Pn,`RPC '${e}' ${h} failed with status:`,v,"response text:",m.getResponseText()),v>0){let O=m.getResponseJson();Array.isArray(O)&&(O=O[0]);const V=O==null?void 0:O.error;if(V&&V.status&&V.message){const U=function(F){const D=F.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(D)>=0?D:le.UNKNOWN}(V.status);p(new Ce(U,V.message))}else p(new Ce(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ce(le.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:h,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ye(Pn,`RPC '${e}' ${h} completed.`)}});const E=JSON.stringify(s);ye(Pn,`RPC '${e}' ${h} sending request:`,s),m.send(n,"POST",E,r,15)})}T_(e,n,r){const s=o0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=_x(),y=Ex(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const E=a.join("");ye(Pn,`Creating RPC '${e}' stream ${s}: ${E}`,p);const x=h.createWebChannel(E,p);this.I_(x);let v=!1,O=!1;const V=new Tb({Yo:H=>{O?ye(Pn,`Not sending because RPC '${e}' stream ${s} is closed:`,H):(v||(ye(Pn,`Opening RPC '${e}' stream ${s} transport.`),x.open(),v=!0),ye(Pn,`RPC '${e}' stream ${s} sending:`,H),x.send(H))},Zo:()=>x.close()}),U=(H,F,D)=>{H.listen(F,N=>{try{D(N)}catch(q){setTimeout(()=>{throw q},0)}})};return U(x,Ul.EventType.OPEN,()=>{O||(ye(Pn,`RPC '${e}' stream ${s} transport opened.`),V.o_())}),U(x,Ul.EventType.CLOSE,()=>{O||(O=!0,ye(Pn,`RPC '${e}' stream ${s} transport closed`),V.a_(),this.E_(x))}),U(x,Ul.EventType.ERROR,H=>{O||(O=!0,qa(Pn,`RPC '${e}' stream ${s} transport errored. Name:`,H.name,"Message:",H.message),V.a_(new Ce(le.UNAVAILABLE,"The operation could not be completed")))}),U(x,Ul.EventType.MESSAGE,H=>{var F;if(!O){const D=H.data[0];ut(!!D,16349);const N=D,q=(N==null?void 0:N.error)||((F=N[0])==null?void 0:F.error);if(q){ye(Pn,`RPC '${e}' stream ${s} received error:`,q);const ie=q.status;let re=function(b){const j=Zt[b];if(j!==void 0)return Jx(j)}(ie),P=q.message;re===void 0&&(re=le.INTERNAL,P="Unknown error status: "+ie+" with message "+q.message),O=!0,V.a_(new Ce(re,P)),x.close()}else ye(Pn,`RPC '${e}' stream ${s} received:`,D),V.u_(D)}}),U(y,wx.STAT_EVENT,H=>{H.stat===q1.PROXY?ye(Pn,`RPC '${e}' stream ${s} detected buffering proxy`):H.stat===q1.NOPROXY&&ye(Pn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.__()},0),V}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){return new PN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="PersistentStream";class gA{constructor(e,n,r,s,a,h,y,p){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(is(n.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Ce(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ye(K2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ye(K2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rb extends gA{constructor(e,n,r,s,a,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,h),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kN(this.serializer,e),r=function(a){if(!("targetChange"in a))return Me.min();const h=a.targetChange;return h.targetIds&&h.targetIds.length?Me.min():h.readTime?xi(h.readTime):Me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=i0(this.serializer),n.addTarget=function(a,h){let y;const p=h.target;if(y=J1(p)?{documents:FN(a,p)}:{query:BN(a,p).ft},y.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){y.resumeToken=nA(a,h.resumeToken);const m=t0(a,h.expectedCount);m!==null&&(y.expectedCount=m)}else if(h.snapshotVersion.compareTo(Me.min())>0){y.readTime=qh(a,h.snapshotVersion.toTimestamp());const m=t0(a,h.expectedCount);m!==null&&(y.expectedCount=m)}return y}(this.serializer,e);const r=UN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=i0(this.serializer),n.removeTarget=e,this.q_(n)}}class Nb extends gA{constructor(e,n,r,s,a,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,h),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=LN(e.writeResults,e.commitTime),r=xi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=i0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{}class Pb extends bb{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ce(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.Go(e,n0(n,r),s,a,h)).catch(a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(le.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.connection.Ho(e,n0(n,r),s,h,y,a)).catch(h=>{throw h.name==="FirebaseError"?(h.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ce(le.UNKNOWN,h.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Ob{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="RemoteStore";class Db{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(h=>{r.enqueueAndForget(async()=>{qo(this)&&(ye(Vo,"Restarting streams for network reachability change."),await async function(p){const m=Be(p);m.Ea.add(4),await Zu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Hf(m)}(this))})}),this.Ra=new Ob(r,s)}}async function Hf(t){if(qo(t))for(const e of t.da)await e(!0)}async function Zu(t){for(const e of t.da)await e(!1)}function pA(t,e){const n=Be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jg(n)?Zg(n):ul(n).O_()&&$g(n,e))}function Qg(t,e){const n=Be(t),r=ul(n);n.Ia.delete(e),r.O_()&&mA(n,e),n.Ia.size===0&&(r.O_()?r.L_():qo(n)&&n.Ra.set("Unknown"))}function $g(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ul(t).Y_(e)}function mA(t,e){t.Va.Ue(e),ul(t).Z_(e)}function Zg(t){t.Va=new SN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ul(t).start(),t.Ra.ua()}function Jg(t){return qo(t)&&!ul(t).x_()&&t.Ia.size>0}function qo(t){return Be(t).Ea.size===0}function yA(t){t.Va=void 0}async function kb(t){t.Ra.set("Online")}async function Mb(t){t.Ia.forEach((e,n)=>{$g(t,e)})}async function Lb(t,e){yA(t),Jg(t)?(t.Ra.ha(e),Zg(t)):t.Ra.set("Unknown")}async function Fb(t,e,n){if(t.Ra.set("Online"),e instanceof tA&&e.state===2&&e.cause)try{await async function(s,a){const h=a.cause;for(const y of a.targetIds)s.Ia.has(y)&&(await s.remoteSyncer.rejectListen(y,h),s.Ia.delete(y),s.Va.removeTarget(y))}(t,e)}catch(r){ye(Vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qh(t,r)}else if(e instanceof ih?t.Va.Ze(e):e instanceof eA?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const r=await fA(t.localStore);n.compareTo(r)>=0&&await function(a,h){const y=a.Va.Tt(h);return y.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const E=a.Ia.get(m);E&&a.Ia.set(m,E.withResumeToken(p.resumeToken,h))}}),y.targetMismatches.forEach((p,m)=>{const E=a.Ia.get(p);if(!E)return;a.Ia.set(p,E.withResumeToken(Sn.EMPTY_BYTE_STRING,E.snapshotVersion)),mA(a,p);const x=new bs(E.target,p,m,E.sequenceNumber);$g(a,x)}),a.remoteSyncer.applyRemoteEvent(y)}(t,n)}catch(r){ye(Vo,"Failed to raise snapshot:",r),await Qh(t,r)}}async function Qh(t,e,n){if(!ll(e))throw e;t.Ea.add(1),await Zu(t),t.Ra.set("Offline"),n||(n=()=>fA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye(Vo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hf(t)})}function wA(t,e){return e().catch(n=>Qh(t,n,e))}async function Wf(t){const e=Be(t),n=Qs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lg;for(;Bb(e);)try{const s=await Eb(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Vb(e,s)}catch(s){await Qh(e,s)}EA(e)&&_A(e)}function Bb(t){return qo(t)&&t.Ta.length<10}function Vb(t,e){t.Ta.push(e);const n=Qs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function EA(t){return qo(t)&&!Qs(t).x_()&&t.Ta.length>0}function _A(t){Qs(t).start()}async function Ub(t){Qs(t).ra()}async function zb(t){const e=Qs(t);for(const n of t.Ta)e.ea(n.mutations)}async function jb(t,e,n){const r=t.Ta.shift(),s=Hg.from(r,e,n);await wA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wf(t)}async function Hb(t,e){e&&Qs(t).X_&&await async function(r,s){if(function(h){return CN(h)&&h!==le.ABORTED}(s.code)){const a=r.Ta.shift();Qs(r).B_(),await wA(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Wf(r)}}(t,e),EA(t)&&_A(t)}async function q2(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),ye(Vo,"RemoteStore received new credentials");const r=qo(n);n.Ea.add(3),await Zu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hf(n)}async function Wb(t,e){const n=Be(t);e?(n.Ea.delete(2),await Hf(n)):e||(n.Ea.add(2),await Zu(n),n.Ra.set("Unknown"))}function ul(t){return t.ma||(t.ma=function(n,r,s){const a=Be(n);return a.sa(),new Rb(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:kb.bind(null,t),t_:Mb.bind(null,t),r_:Lb.bind(null,t),H_:Fb.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Jg(t)?Zg(t):t.Ra.set("Unknown")):(await t.ma.stop(),yA(t))})),t.ma}function Qs(t){return t.fa||(t.fa=function(n,r,s){const a=Be(n);return a.sa(),new Nb(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ub.bind(null,t),r_:Hb.bind(null,t),ta:zb.bind(null,t),na:jb.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wf(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(Vo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const h=Date.now()+r,y=new ep(e,n,h,s,a);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(t,e){if(is("AsyncQueue",`${e}: ${t}`),ll(t))return new Ce(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{static emptySet(e){return new Va(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=zl(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.ga=new Mt(Ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ja{constructor(e,n,r,s,a,h,y,p,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,s,a){const h=[];return n.forEach(y=>{h.push({type:0,doc:y})}),new Ja(e,n,Va.emptySet(n),h,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xb{constructor(){this.queries=Q2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Be(n),a=s.queries;s.queries=Q2(),a.forEach((h,y)=>{for(const p of y.Sa)p.onError(r)})})(this,new Ce(le.ABORTED,"Firestore shutting down"))}}function Q2(){return new Ko(t=>Ux(t),Ff)}async function Kb(t,e){const n=Be(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new Gb,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(h){const y=tp(h,`Initialization of query '${da(e.query)}' failed`);return void e.onError(y)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&np(n)}async function qb(t,e){const n=Be(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const h=a.Sa.indexOf(e);h>=0&&(a.Sa.splice(h,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Yb(t,e){const n=Be(t);let r=!1;for(const s of e){const a=s.query,h=n.queries.get(a);if(h){for(const y of h.Sa)y.Fa(s)&&(r=!0);h.wa=s}}r&&np(n)}function Qb(t,e,n){const r=Be(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function np(t){t.Ca.forEach(e=>{e.next()})}var a0,$2;($2=a0||(a0={})).Ma="default",$2.Cache="cache";class $b{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==a0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.key=e}}class AA{constructor(e){this.key=e}}class Zb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=zx(e),this.tu=new Va(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Y2,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,h=s,y=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((E,x)=>{const v=s.get(E),O=Bf(this.query,x)?x:null,V=!!v&&this.mutatedKeys.has(v.key),U=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let H=!1;v&&O?v.data.isEqual(O.data)?V!==U&&(r.track({type:3,doc:O}),H=!0):this.su(v,O)||(r.track({type:2,doc:O}),H=!0,(p&&this.eu(O,p)>0||m&&this.eu(O,m)<0)&&(y=!0)):!v&&O?(r.track({type:0,doc:O}),H=!0):v&&!O&&(r.track({type:1,doc:v}),H=!0,(p||m)&&(y=!0)),H&&(O?(h=h.add(O),a=U?a.add(E):a.delete(E)):(h=h.delete(E),a=a.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{tu:h,iu:r,Cs:y,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort((E,x)=>function(O,V){const U=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:H})}};return U(O)-U(V)}(E.type,x.type)||this.eu(E.doc,x.doc)),this.ou(r),s=s??!1;const y=n&&!s?this._u():[],p=this.Xa.size===0&&this.current&&!s?1:0,m=p!==this.Za;return this.Za=p,h.length!==0||m?{snapshot:new Ja(this.query,e.tu,a,h,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Y2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new AA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new xA(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rp="SyncEngine";class Jb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eP{constructor(e){this.key=e,this.hu=!1}}class tP{constructor(e,n,r,s,a,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ko(y=>Ux(y),Ff),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Ne.comparator),this.Au=new Map,this.Ru=new Xg,this.Vu={},this.mu=new Map,this.fu=Za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nP(t,e,n=!0){const r=RA(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await IA(r,e,n,!0),s}async function rP(t,e){const n=RA(t);await IA(n,e,!0,!1)}async function IA(t,e,n,r){const s=await _b(t.localStore,Ei(e)),a=s.targetId,h=t.sharedClientState.addLocalQueryTarget(a,n);let y;return r&&(y=await iP(t,e,a,h==="current",s.resumeToken)),t.isPrimaryClient&&n&&pA(t.remoteStore,s),y}async function iP(t,e,n,r,s){t.pu=(x,v,O)=>async function(U,H,F,D){let N=H.view.ru(F);N.Cs&&(N=await H2(U.localStore,H.query,!1).then(({documents:P})=>H.view.ru(P,N)));const q=D&&D.targetChanges.get(H.targetId),ie=D&&D.targetMismatches.get(H.targetId)!=null,re=H.view.applyChanges(N,U.isPrimaryClient,q,ie);return J2(U,H.targetId,re.au),re.snapshot}(t,x,v,O);const a=await H2(t.localStore,e,!0),h=new Zb(e,a.Qs),y=h.ru(a.documents),p=$u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),m=h.applyChanges(y,t.isPrimaryClient,p);J2(t,n,m.au);const E=new Jb(e,n,h);return t.Tu.set(e,E),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),m.snapshot}async function sP(t,e,n){const r=Be(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(h=>!Ff(h,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await s0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qg(r.remoteStore,s.targetId),l0(r,s.targetId)}).catch(al)):(l0(r,s.targetId),await s0(r.localStore,s.targetId,!0))}async function oP(t,e){const n=Be(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qg(n.remoteStore,r.targetId))}async function aP(t,e,n){const r=gP(t);try{const s=await function(h,y){const p=Be(h),m=vt.now(),E=y.reduce((O,V)=>O.add(V.key),Ye());let x,v;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let V=ss(),U=Ye();return p.Ns.getEntries(O,E).next(H=>{V=H,V.forEach((F,D)=>{D.isValidDocument()||(U=U.add(F))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,V)).next(H=>{x=H;const F=[];for(const D of y){const N=EN(D,x.get(D.key).overlayedDocument);N!=null&&F.push(new ro(D.key,N,Dx(N.value.mapValue),_i.exists(!0)))}return p.mutationQueue.addMutationBatch(O,m,F,y)}).next(H=>{v=H;const F=H.applyToLocalDocumentSet(x,U);return p.documentOverlayCache.saveOverlays(O,H.batchId,F)})}).then(()=>({batchId:v.batchId,changes:Hx(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(h,y,p){let m=h.Vu[h.currentUser.toKey()];m||(m=new Mt(qe)),m=m.insert(y,p),h.Vu[h.currentUser.toKey()]=m}(r,s.batchId,n),await Ju(r,s.changes),await Wf(r.remoteStore)}catch(s){const a=tp(s,"Failed to persist write");n.reject(a)}}async function CA(t,e){const n=Be(t);try{const r=await yb(n.localStore,e);e.targetChanges.forEach((s,a)=>{const h=n.Au.get(a);h&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?h.hu=!0:s.modifiedDocuments.size>0?ut(h.hu,14607):s.removedDocuments.size>0&&(ut(h.hu,42227),h.hu=!1))}),await Ju(n,r,e)}catch(r){await al(r)}}function Z2(t,e,n){const r=Be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,h)=>{const y=h.view.va(e);y.snapshot&&s.push(y.snapshot)}),function(h,y){const p=Be(h);p.onlineState=y;let m=!1;p.queries.forEach((E,x)=>{for(const v of x.Sa)v.va(y)&&(m=!0)}),m&&np(p)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lP(t,e,n){const r=Be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let h=new Mt(Ne.comparator);h=h.insert(a,kn.newNoDocument(a,Me.min()));const y=Ye().add(a),p=new zf(Me.min(),new Map,new Mt(qe),h,y);await CA(r,p),r.du=r.du.remove(a),r.Au.delete(e),ip(r)}else await s0(r.localStore,e,!1).then(()=>l0(r,e,n)).catch(al)}async function uP(t,e){const n=Be(t),r=e.batch.batchId;try{const s=await mb(n.localStore,e);TA(n,r,null),vA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ju(n,s)}catch(s){await al(s)}}async function cP(t,e,n){const r=Be(t);try{const s=await function(h,y){const p=Be(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let E;return p.mutationQueue.lookupMutationBatch(m,y).next(x=>(ut(x!==null,37113),E=x.keys(),p.mutationQueue.removeMutationBatch(m,x))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,E,y)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,E)).next(()=>p.localDocuments.getDocuments(m,E))})}(r.localStore,e);TA(r,e,n),vA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ju(r,s)}catch(s){await al(s)}}function vA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function TA(t,e,n){const r=Be(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function l0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||SA(t,r)})}function SA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ip(t))}function J2(t,e,n){for(const r of n)r instanceof xA?(t.Ru.addReference(r.key,e),hP(t,r)):r instanceof AA?(ye(rp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||SA(t,r.key)):Pe(19791,{wu:r})}function hP(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ye(rp,"New document in limbo: "+n),t.Eu.add(r),ip(t))}function ip(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ne(Pt.fromString(e)),r=t.fu.next();t.Au.set(r,new eP(n)),t.du=t.du.insert(n,r),pA(t.remoteStore,new bs(Ei(zg(n.path)),r,"TargetPurposeLimboResolution",Df.ce))}}async function Ju(t,e,n){const r=Be(t),s=[],a=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach((y,p)=>{h.push(r.pu(p,e,n).then(m=>{var E;if((m||n)&&r.isPrimaryClient){const x=m?!m.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(m){s.push(m);const x=qg.As(p.targetId,m);a.push(x)}}))}),await Promise.all(h),r.Pu.H_(s),await async function(p,m){const E=Be(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>oe.forEach(m,v=>oe.forEach(v.Es,O=>E.persistence.referenceDelegate.addReference(x,v.targetId,O)).next(()=>oe.forEach(v.ds,O=>E.persistence.referenceDelegate.removeReference(x,v.targetId,O)))))}catch(x){if(!ll(x))throw x;ye(Yg,"Failed to update sequence numbers: "+x)}for(const x of m){const v=x.targetId;if(!x.fromCache){const O=E.Ms.get(v),V=O.snapshotVersion,U=O.withLastLimboFreeSnapshotVersion(V);E.Ms=E.Ms.insert(v,U)}}}(r.localStore,a))}async function fP(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){ye(rp,"User change. New user:",e.toKey());const r=await hA(n.localStore,e);n.currentUser=e,function(a,h){a.mu.forEach(y=>{y.forEach(p=>{p.reject(new Ce(le.CANCELLED,h))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ju(n,r.Ls)}}function dP(t,e){const n=Be(t),r=n.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let s=Ye();const a=n.Iu.get(e);if(!a)return s;for(const h of a){const y=n.Tu.get(h);s=s.unionWith(y.view.nu)}return s}}function RA(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.Pu.H_=Yb.bind(null,e.eventManager),e.Pu.yu=Qb.bind(null,e.eventManager),e}function gP(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cP.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pb(this.persistence,new fb,e.initialUser,this.serializer)}Cu(e){return new cA(Kg.mi,this.serializer)}Du(e){return new Ab}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class pP extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ut(this.persistence.referenceDelegate instanceof Yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $N(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new cA(r=>Yh.mi(r,n),this.serializer)}}class u0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await Wb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xb}()}createDatastore(e){const n=jf(e.databaseInfo.databaseId),r=function(a){return new Sb(a)}(e.databaseInfo);return function(a,h,y,p){return new Pb(a,h,y,p)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,h,y){return new Db(r,s,a,h,y)}(this.localStore,this.datastore,e.asyncQueue,n=>Z2(this.syncEngine,n,0),function(){return X2.v()?new X2:new Ib}())}createSyncEngine(e,n){return function(s,a,h,y,p,m,E){const x=new tP(s,a,h,y,p,m);return E&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Be(s);ye(Vo,"RemoteStore shutting down."),a.Ea.add(5),await Zu(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}u0.provider={build:()=>new u0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="FirestoreClient";class yP{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=On.UNAUTHENTICATED,this.clientId=kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async h=>{ye($s,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(ye($s,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),ye($s,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ey(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wP(t);ye($s,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>q2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>q2(e.remoteStore,s)),t._onlineComponents=e}async function wP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye($s,"Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qa("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new $h)}}else ye($s,"Using default OfflineComponentProvider"),await Hd(t,new pP(void 0));return t._offlineComponents}async function NA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye($s,"Using user provided OnlineComponentProvider"),await ey(t,t._uninitializedComponentsProvider._online)):(ye($s,"Using default OnlineComponentProvider"),await ey(t,new u0))),t._onlineComponents}function EP(t){return NA(t).then(e=>e.syncEngine)}async function _P(t){const e=await NA(t),n=e.eventManager;return n.onListen=nP.bind(null,e.syncEngine),n.onUnlisten=sP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),n}function xP(t,e,n={}){const r=new js;return t.asyncQueue.enqueueAndForget(async()=>function(a,h,y,p,m){const E=new mP({next:v=>{E.Nu(),h.enqueueAndForget(()=>qb(a,x));const O=v.docs.has(y);!O&&v.fromCache?m.reject(new Ce(le.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&v.fromCache&&p&&p.source==="server"?m.reject(new Ce(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(v)},error:v=>m.reject(v)}),x=new $b(zg(y.path),E,{includeMetadataChanges:!0,qa:!0});return Kb(a,x)}(await _P(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="firestore.googleapis.com",ny=!0;class ry{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PA,this.ssl=ny}else this.host=e.host,this.ssl=e.ssl??ny;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YN)throw new Ce(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ce(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ry({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ry(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _6;switch(r.type){case"firstParty":return new C6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ty.get(n);r&&(ye("ComponentProvider","Removing Datastore"),ty.delete(n),r.terminate())}(this),Promise.resolve()}}function AP(t,e,n,r={}){var m;t=Bo(t,sp);const s=Wo(e),a=t._getSettings(),h={...a,emulatorOptions:t._getEmulatorOptions()},y=`${e}:${n}`;s&&(pg(`https://${y}`),mg("Firestore",!0)),a.host!==PA&&a.host!==y&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:y,ssl:s,emulatorOptions:r};if(!Gs(p,h)&&(t._setSettings(p),r.mockUserToken)){let E,x;if(typeof r.mockUserToken=="string")E=r.mockUserToken,x=On.MOCK_USER;else{E=o_(r.mockUserToken,(m=t._app)==null?void 0:m.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ce(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new On(v)}t._authCredentials=new x6(new Ax(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new op(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yu(n,ln._jsonSchema))return new ln(e,r||null,new Ne(Pt.fromString(n.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:en("string",ln._jsonSchemaVersion),referencePath:en("string")};class Lu extends op{constructor(e,n,r){super(e,n,zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Ne(e))}withConverter(e){return new Lu(this.firestore,e,this._path)}}function ou(t,e,...n){if(t=yn(t),arguments.length===1&&(e=kg.newId()),b6("doc","path",e),t instanceof sp){const r=Pt.fromString(e,...n);return y2(r),new ln(t,null,new Ne(r))}{if(!(t instanceof ln||t instanceof Lu))throw new Ce(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pt.fromString(e,...n));return y2(r),new ln(t.firestore,t instanceof Lu?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="AsyncQueue";class sy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dA(this,"async_queue_retry"),this._c=()=>{const r=jd();r&&ye(iy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new js;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;ye(iy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",oy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ep.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Pe(47125,{Pc:oy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function oy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Gf extends sp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new sy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sy(e),this._firestoreClient=void 0,await e}}}function IP(t,e){const n=typeof t=="object"?t:Sf(),r=typeof t=="string"?t:Hh,s=to(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=r_("firestore");a&&AP(s,...a)}return s}function OA(t){if(t._terminated)throw new Ce(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CP(t),t._firestoreClient}function CP(t){var r,s,a;const e=t._freezeSettings(),n=function(y,p,m,E){return new j6(y,p,m,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,bA(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(y){const p=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(p),_online:p}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(Sn.fromBase64String(e))}catch(n){throw new Ce(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dr(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yu(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:en("string",Dr._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Yu(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:en("string",Ai._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yu(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ii(e.vectorValues);throw new Ce(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:en("string",Ii._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^__.*__$/;class TP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ro(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qu(e,this.data,n,this.fieldTransforms)}}class DA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ro(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:t})}}class ap{constructor(e,n,r,s,a,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kA(this.Ac)&&vP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jf(e)}Cc(e,n,r,s=!1){return new ap({Ac:e,methodName:n,Dc:r,path:Cn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MA(t){const e=t._freezeSettings(),n=jf(t._databaseId);return new SP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RP(t,e,n,r,s,a={}){const h=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);up("Data must be an object, but it was:",h,r);const y=LA(r,h);let p,m;if(a.merge)p=new pr(h.fieldMask),m=h.fieldTransforms;else if(a.mergeFields){const E=[];for(const x of a.mergeFields){const v=c0(e,x,n);if(!h.contains(v))throw new Ce(le.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);BA(E,v)||E.push(v)}p=new pr(E),m=h.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,m=h.fieldTransforms;return new TP(new $n(y),p,m)}class qf extends Kf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qf}}class lp extends Kf{_toFieldTransform(e){return new pN(e.path,new Du)}isEqual(e){return e instanceof lp}}function NP(t,e,n,r){const s=t.Cc(1,e,n);up("Data must be an object, but it was:",s,r);const a=[],h=$n.empty();no(r,(p,m)=>{const E=cp(e,p,n);m=yn(m);const x=s.yc(E);if(m instanceof qf)a.push(E);else{const v=Yf(m,x);v!=null&&(a.push(E),h.set(E,v))}});const y=new pr(a);return new DA(h,y,s.fieldTransforms)}function bP(t,e,n,r,s,a){const h=t.Cc(1,e,n),y=[c0(e,r,n)],p=[s];if(a.length%2!=0)throw new Ce(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)y.push(c0(e,a[v])),p.push(a[v+1]);const m=[],E=$n.empty();for(let v=y.length-1;v>=0;--v)if(!BA(m,y[v])){const O=y[v];let V=p[v];V=yn(V);const U=h.yc(O);if(V instanceof qf)m.push(O);else{const H=Yf(V,U);H!=null&&(m.push(O),E.set(O,H))}}const x=new pr(m);return new DA(E,x,h.fieldTransforms)}function Yf(t,e){if(FA(t=yn(t)))return up("Unsupported field value:",e,t),LA(t,e);if(t instanceof Kf)return function(r,s){if(!kA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let h=0;for(const y of r){let p=Yf(y,s.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),h++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=yn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=vt.fromDate(r);return{timestampValue:qh(s.serializer,a)}}if(r instanceof vt){const a=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qh(s.serializer,a)}}if(r instanceof Ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:nA(s.serializer,r._byteString)};if(r instanceof ln){const a=s.databaseId,h=r.firestore._databaseId;if(!h.isEqual(a))throw s.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Gg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ii)return function(h,y){return{mapValue:{fields:{[Px]:{stringValue:Ox},[Wh]:{arrayValue:{values:h.toArray().map(m=>{if(typeof m!="number")throw y.Sc("VectorValues must only contain numeric values.");return jg(y.serializer,m)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Mg(r)}`)}(t,e)}function LA(t,e){const n={};return vx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,s)=>{const a=Yf(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function FA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof Ai||t instanceof Dr||t instanceof ln||t instanceof Kf||t instanceof Ii)}function up(t,e,n){if(!FA(n)||!Ix(n)){const r=Mg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function c0(t,e,n){if((e=yn(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return cp(t,e);throw Zh("Field path arguments must be of type string or ",t,!1,void 0,n)}const PP=new RegExp("[~\\*/\\[\\]]");function cp(t,e,n){if(e.search(PP)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xf(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zh(t,e,n,r,s){const a=r&&!r.isEmpty(),h=s!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let p="";return(a||h)&&(p+=" (found",a&&(p+=` in field ${r}`),h&&(p+=` in document ${s}`),p+=")"),new Ce(le.INVALID_ARGUMENT,y+t+p)}function BA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(UA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OP extends VA{data(){return super.data()}}function UA(t,e){return typeof e=="string"?cp(t,e):e instanceof Xf?e._internalPath:e._delegate._internalPath}class DP{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return no(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[Wh].arrayValue)==null?void 0:s.values)==null?void 0:a.map(h=>Gt(h.doubleValue));return new Ii(n)}convertGeoPoint(e){return new Ai(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const n=Ks(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pt.fromString(e);ut(lA(r),9688,{name:e});const s=new Pu(r.get(1),r.get(3)),a=new Ne(r.popFirst(5));return s.isEqual(n)||is(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ro extends VA{constructor(e,n,r,s,a,h){super(e,n,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(UA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ro._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ro._jsonSchema={type:en("string",Ro._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class sh extends Ro{data(e={}){return super.data(e)}}class au{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sh(this._firestore,this._userDataWriter,r.key,r,new Hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let h=0;return s._snapshot.docChanges.map(y=>{const p=new sh(s._firestore,s._userDataWriter,y.doc.key,y.doc,new Hl(s._snapshot.mutatedKeys.has(y.doc.key),s._snapshot.fromCache),s.query.converter);return y.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(y=>a||y.type!==3).map(y=>{const p=new sh(s._firestore,s._userDataWriter,y.doc.key,y.doc,new Hl(s._snapshot.mutatedKeys.has(y.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,E=-1;return y.type!==0&&(m=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),y.type!==1&&(h=h.add(y.doc),E=h.indexOf(y.doc.key)),{type:MP(y.type),doc:p,oldIndex:m,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){t=Bo(t,ln);const e=Bo(t.firestore,Gf);return xP(OA(e),t._key).then(n=>BP(e,t,n))}au._jsonSchemaVersion="firestore/querySnapshot/1.0",au._jsonSchema={type:en("string",au._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class LP extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function FP(t,e,n){t=Bo(t,ln);const r=Bo(t.firestore,Gf),s=kP(t.converter,e);return jA(r,[RP(MA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_i.none())])}function zA(t,e,n,...r){t=Bo(t,ln);const s=Bo(t.firestore,Gf),a=MA(s);let h;return h=typeof(e=yn(e))=="string"||e instanceof Xf?bP(a,"updateDoc",t._key,e,n,r):NP(a,"updateDoc",t._key,e),jA(s,[h.toMutation(t._key,_i.exists(!0))])}function jA(t,e){return function(r,s){const a=new js;return r.asyncQueue.enqueueAndForget(async()=>aP(await EP(r),s,a)),a.promise}(OA(t),e)}function BP(t,e,n){const r=n.docs.get(e._key),s=new LP(t);return new Ro(t,s,e._key,r,new Hl(n.hasPendingWrites,n.fromCache),e.converter)}function VP(){return new lp("serverTimestamp")}(function(e,n=!0){(function(s){ol=s})(Xo),ti(new Br("firestore",(r,{instanceIdentifier:s,options:a})=>{const h=r.getProvider("app").getImmediate(),y=new Gf(new A6(r.getProvider("auth-internal")),new v6(h,r.getProvider("app-check-internal")),function(m,E){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ce(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(m.options.projectId,E)}(h,s),h);return a={useFetchStreams:n,...a},y._setSettings(a),y},"PUBLIC").setMultipleInstances(!0)),nr(d2,g2,e),nr(d2,g2,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebasestorage.googleapis.com",UP="storageBucket",zP=2*60*1e3,jP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Vr{constructor(e,n,r=0){super(Wd(e),`Firebase Storage: ${n} (${Wd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ri;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ri||(Ri={}));function Wd(t){return"storage/"+t}function HP(){const t="An unknown error occurred, please check the error payload for server response.";return new bi(Ri.UNKNOWN,t)}function WP(){return new bi(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GP(){return new bi(Ri.CANCELED,"User canceled the upload/download.")}function XP(t){return new bi(Ri.INVALID_URL,"Invalid URL '"+t+"'.")}function KP(t){return new bi(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ay(t){return new bi(Ri.INVALID_ARGUMENT,t)}function WA(){return new bi(Ri.APP_DELETED,"The Firebase app was deleted.")}function qP(t){return new bi(Ri.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qr.makeFromUrl(e,n)}catch{return new Qr(e,"")}if(r.path==="")return r;throw KP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const h="(/(.*))?$",y=new RegExp("^gs://"+s+h,"i"),p={bucket:1,path:3};function m(q){q.path_=decodeURIComponent(q.path)}const E="v[A-Za-z0-9_]+",x=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",O=new RegExp(`^https?://${x}/${E}/b/${s}/o${v}`,"i"),V={bucket:1,path:3},U=n===HA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,H="([^?#]*)",F=new RegExp(`^https?://${U}/${s}/${H}`,"i"),N=[{regex:y,indices:p,postModify:a},{regex:O,indices:V,postModify:m},{regex:F,indices:{bucket:1,path:2},postModify:m}];for(let q=0;q<N.length;q++){const ie=N[q],re=ie.regex.exec(e);if(re){const P=re[ie.indices.bucket];let k=re[ie.indices.path];k||(k=""),r=new Qr(P,k),ie.postModify(r);break}}if(r==null)throw XP(e);return r}}class YP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e,n){let r=1,s=null,a=null,h=!1,y=0;function p(){return y===2}let m=!1;function E(...H){m||(m=!0,e.apply(null,H))}function x(H){s=setTimeout(()=>{s=null,t(O,p())},H)}function v(){a&&clearTimeout(a)}function O(H,...F){if(m){v();return}if(H){v(),E.call(null,H,...F);return}if(p()||h){v(),E.call(null,H,...F);return}r<64&&(r*=2);let N;y===1?(y=2,N=0):N=(r+Math.random())*1e3,x(N)}let V=!1;function U(H){V||(V=!0,v(),!m&&(s!==null?(H||(y=2),clearTimeout(s),x(0)):H||(y=1)))}return x(0),a=setTimeout(()=>{h=!0,U(!0)},n),U}function $P(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){return t!==void 0}function ly(t,e,n,r){if(r<e)throw ay(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ay(`Invalid value for '${t}'. Expected ${n} or less.`)}function JP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Jh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jh||(Jh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r,s,a,h,y,p,m,E,x,v=!0,O=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=h,this.callback_=y,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=E,this.connectionFactory_=x,this.retry=v,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,U)=>{this.resolve_=V,this.reject_=U,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new kc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const h=y=>{const p=y.loaded,m=y.lengthComputable?y.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(h),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(h),this.pendingConnection_=null;const y=a.getErrorCode()===Jh.NO_ERROR,p=a.getStatus();if(!y||eO(p,this.additionalRetryCodes_)&&this.retry){const E=a.getErrorCode()===Jh.ABORT;r(!1,new kc(!1,null,E));return}const m=this.successCodes_.indexOf(p)!==-1;r(!0,new kc(m,a))})},n=(r,s)=>{const a=this.resolve_,h=this.reject_,y=s.connection;if(s.wasSuccessCode)try{const p=this.callback_(y,y.getResponse());ZP(p)?a(p):a()}catch(p){h(p)}else if(y!==null){const p=HP();p.serverResponse=y.getErrorText(),this.errorCallback_?h(this.errorCallback_(y,p)):h(p)}else if(s.canceled){const p=this.appDelete_?WA():GP();h(p)}else{const p=WP();h(p)}};this.canceled_?n(!1,new kc(!1,null,!0)):this.backoffId_=QP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$P(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oO(t,e,n,r,s,a,h=!0,y=!1){const p=JP(t.urlParams),m=t.url+p,E=Object.assign({},t.headers);return iO(E,e),nO(E,n),rO(E,a),sO(E,r),new tO(m,t.method,E,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,h,y)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this._service=e,n instanceof Qr?this._location=n:this._location=Qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ef(e,n)}get root(){const e=new Qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lO(this._location.path)}get storage(){return this._service}get parent(){const e=aO(this._location.path);if(e===null)return null;const n=new Qr(this._location.bucket,e);return new ef(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qP(e)}}function uy(t,e){const n=e==null?void 0:e[UP];return n==null?null:Qr.makeFromBucketSpec(n,t)}function uO(t,e,n,r={}){t.host=`${e}:${n}`;const s=Wo(e);s&&(pg(`https://${t.host}/b`),mg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:o_(a,t.app.options.projectId))}class cO{constructor(e,n,r,s,a,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=h,this._bucket=null,this._host=HA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zP,this._maxUploadRetryTime=jP,this._requests=new Set,s!=null?this._bucket=Qr.makeFromBucketSpec(s,this._host):this._bucket=uy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qr.makeFromBucketSpec(this._url,e):this._bucket=uy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ly("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ly("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ef(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new YP(WA());{const h=oO(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cy="@firebase/storage",hy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="storage";function hO(t=Sf(),e){t=yn(t);const r=to(t,GA).getImmediate({identifier:e}),s=r_("storage");return s&&fO(r,...s),r}function fO(t,e,n,r={}){uO(t,e,n,r)}function dO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cO(n,r,s,e,Xo)}function gO(){ti(new Br(GA,dO,"PUBLIC").setMultipleInstances(!0)),nr(cy,hy,""),nr(cy,hy,"esm2020")}gO();const pO={apiKey:"AIzaSyCLL-yZ9m6vgZ04Yj0x-wDjtxkJOzCiEMc",authDomain:"basecamp-app-e6386.firebaseapp.com",projectId:"basecamp-app-e6386",storageBucket:"basecamp-app-e6386.firebasestorage.app",messagingSenderId:"929651436196",appId:"1:929651436196:web:790b5001a09d8db991d431",measurementId:"G-L0L3JE5SCM"},Qf=d_(pO);mR(Qf);const oh=w6(Qf),lu=IP(Qf);hO(Qf);const XA=ne.createContext(),mO=({children:t})=>{const[e,n]=ne.useState(null),[r,s]=ne.useState(null);return ne.useEffect(()=>{const a=rx(oh,async h=>{if(h){n(h);const y=ou(lu,"profiles",h.uid),p=await h0(y);p.exists()?s(p.data()):s(null)}else n(null),s(null)});return()=>a()},[]),se.jsx(XA.Provider,{value:{user:e,setUser:n,profile:r,setProfile:s},children:t})},yO=()=>ne.useContext(XA);function wO({lang:t}){const e=[{id:1,text_zh:"咖啡券",text_en:"Coffee Coupon",points:30},{id:2,text_zh:"小點心",text_en:"Snack",points:50},{id:3,text_zh:"電影票",text_en:"Movie Ticket",points:200},{id:4,text_zh:"購物禮券",text_en:"Shopping Voucher",points:100},{id:5,text_zh:"電子產品折扣",text_en:"Electronics Discount",points:300}],{user:n,profile:r,setProfile:s}=yO(),[a,h]=ne.useState(()=>{const E=localStorage.getItem("redeemedIds");return E?JSON.parse(E):[]}),[y,p]=ne.useState("progress");ne.useEffect(()=>{localStorage.setItem("redeemedIds",JSON.stringify(a))},[a]);const m=async E=>{if(!(!r||!n)&&r.scores>=E.points&&!a.includes(E.id)){const x=r.scores-E.points,v=ou(lu,"profiles",n.uid);await zA(v,{scores:x}),s({...r,scores:x}),h(O=>[...O,E.id]),alert(t==="zh"?"🎉 兌換成功！":"🎉 Redeemed!")}};return se.jsxs("div",{className:"page-container",style:{maxWidth:500,margin:"0 auto",textAlign:"center"},children:[se.jsx("h2",{children:t==="zh"?"獎勵頁面":"Rewards Page"}),se.jsxs("div",{style:{marginBottom:20},children:[se.jsx("button",{onClick:()=>p("progress"),style:{marginRight:10,backgroundColor:y==="progress"?"#4caf50":"#eee",color:y==="progress"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:t==="zh"?"分數進度":"Progress"}),se.jsx("button",{onClick:()=>p("list"),style:{backgroundColor:y==="list"?"#4caf50":"#eee",color:y==="list"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:t==="zh"?"可兌換獎勵":"Reward List"})]}),y==="progress"&&se.jsxs("div",{children:[se.jsxs("p",{children:[t==="zh"?"你的分數: ":"Your Score: "," ",(r==null?void 0:r.scores)||0]}),se.jsx("div",{style:{height:25,width:"100%",backgroundColor:"#eee",borderRadius:12,overflow:"hidden",marginBottom:10},children:se.jsx("div",{style:{width:`${Math.min(((r==null?void 0:r.scores)||0)%30/30,1)*100}%`,height:"100%",backgroundColor:"#4caf50",transition:"width 0.3s"}})})]}),y==="list"&&se.jsx("ul",{style:{listStyle:"none",padding:0},children:e.map(E=>{const x=a.includes(E.id);return se.jsxs("li",{style:{marginBottom:10,padding:10,border:"1px solid #ccc",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:x?"#f6fff6":"#fff"},children:[se.jsxs("span",{children:[t==="zh"?E.text_zh:E.text_en," - ",E.points," ",t==="zh"?"分":"pts"]}),se.jsx("button",{onClick:()=>m(E),disabled:x||((r==null?void 0:r.scores)||0)<E.points,style:{padding:"5px 10px",border:"none",borderRadius:6,backgroundColor:x?"#9e9e9e":"#4caf50",color:"#fff",cursor:x||((r==null?void 0:r.scores)||0)<E.points?"not-allowed":"pointer"},children:x?t==="zh"?"已兌換":"Redeemed":t==="zh"?"兌換":"Redeem"})]},E.id)})})]})}var EO=Object.defineProperty,tf=Object.getOwnPropertySymbols,KA=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable,fy=(t,e,n)=>e in t?EO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f0=(t,e)=>{for(var n in e||(e={}))KA.call(e,n)&&fy(t,n,e[n]);if(tf)for(var n of tf(e))qA.call(e,n)&&fy(t,n,e[n]);return t},d0=(t,e)=>{var n={};for(var r in t)KA.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&tf)for(var r of tf(t))e.indexOf(r)<0&&qA.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Uo;(t=>{const e=class He{constructor(p,m,E,x){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<He.MIN_VERSION||p>He.MAX_VERSION)throw new RangeError("Version value out of range");if(x<-1||x>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let v=[];for(let V=0;V<this.size;V++)v.push(!1);for(let V=0;V<this.size;V++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const O=this.addEccAndInterleave(E);if(this.drawCodewords(O),x==-1){let V=1e9;for(let U=0;U<8;U++){this.applyMask(U),this.drawFormatBits(U);const H=this.getPenaltyScore();H<V&&(x=U,V=H),this.applyMask(U)}}s(0<=x&&x<=7),this.mask=x,this.applyMask(x),this.drawFormatBits(x),this.isFunction=[]}static encodeText(p,m){const E=t.QrSegment.makeSegments(p);return He.encodeSegments(E,m)}static encodeBinary(p,m){const E=t.QrSegment.makeBytes(p);return He.encodeSegments([E],m)}static encodeSegments(p,m,E=1,x=40,v=-1,O=!0){if(!(He.MIN_VERSION<=E&&E<=x&&x<=He.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let V,U;for(V=E;;V++){const N=He.getNumDataCodewords(V,m)*8,q=h.getTotalBits(p,V);if(q<=N){U=q;break}if(V>=x)throw new RangeError("Data too long")}for(const N of[He.Ecc.MEDIUM,He.Ecc.QUARTILE,He.Ecc.HIGH])O&&U<=He.getNumDataCodewords(V,N)*8&&(m=N);let H=[];for(const N of p){n(N.mode.modeBits,4,H),n(N.numChars,N.mode.numCharCountBits(V),H);for(const q of N.getData())H.push(q)}s(H.length==U);const F=He.getNumDataCodewords(V,m)*8;s(H.length<=F),n(0,Math.min(4,F-H.length),H),n(0,(8-H.length%8)%8,H),s(H.length%8==0);for(let N=236;H.length<F;N^=253)n(N,8,H);let D=[];for(;D.length*8<H.length;)D.push(0);return H.forEach((N,q)=>D[q>>>3]|=N<<7-(q&7)),new He(V,m,D,v)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let E=0;E<this.size;E++)this.setFunctionModule(6,E,E%2==0),this.setFunctionModule(E,6,E%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let E=0;E<m;E++)for(let x=0;x<m;x++)E==0&&x==0||E==0&&x==m-1||E==m-1&&x==0||this.drawAlignmentPattern(p[E],p[x]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let E=m;for(let v=0;v<10;v++)E=E<<1^(E>>>9)*1335;const x=(m<<10|E)^21522;s(x>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,r(x,v));this.setFunctionModule(8,7,r(x,6)),this.setFunctionModule(8,8,r(x,7)),this.setFunctionModule(7,8,r(x,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,r(x,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,r(x,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,r(x,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let E=0;E<12;E++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;s(m>>>18==0);for(let E=0;E<18;E++){const x=r(m,E),v=this.size-11+E%3,O=Math.floor(E/3);this.setFunctionModule(v,O,x),this.setFunctionModule(O,v,x)}}drawFinderPattern(p,m){for(let E=-4;E<=4;E++)for(let x=-4;x<=4;x++){const v=Math.max(Math.abs(x),Math.abs(E)),O=p+x,V=m+E;0<=O&&O<this.size&&0<=V&&V<this.size&&this.setFunctionModule(O,V,v!=2&&v!=4)}}drawAlignmentPattern(p,m){for(let E=-2;E<=2;E++)for(let x=-2;x<=2;x++)this.setFunctionModule(p+x,m+E,Math.max(Math.abs(x),Math.abs(E))!=1)}setFunctionModule(p,m,E){this.modules[m][p]=E,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,E=this.errorCorrectionLevel;if(p.length!=He.getNumDataCodewords(m,E))throw new RangeError("Invalid argument");const x=He.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][m],v=He.ECC_CODEWORDS_PER_BLOCK[E.ordinal][m],O=Math.floor(He.getNumRawDataModules(m)/8),V=x-O%x,U=Math.floor(O/x);let H=[];const F=He.reedSolomonComputeDivisor(v);for(let N=0,q=0;N<x;N++){let ie=p.slice(q,q+U-v+(N<V?0:1));q+=ie.length;const re=He.reedSolomonComputeRemainder(ie,F);N<V&&ie.push(0),H.push(ie.concat(re))}let D=[];for(let N=0;N<H[0].length;N++)H.forEach((q,ie)=>{(N!=U-v||ie>=V)&&D.push(q[N])});return s(D.length==O),D}drawCodewords(p){if(p.length!=Math.floor(He.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let E=this.size-1;E>=1;E-=2){E==6&&(E=5);for(let x=0;x<this.size;x++)for(let v=0;v<2;v++){const O=E-v,U=(E+1&2)==0?this.size-1-x:x;!this.isFunction[U][O]&&m<p.length*8&&(this.modules[U][O]=r(p[m>>>3],7-(m&7)),m++)}}s(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let E=0;E<this.size;E++){let x;switch(p){case 0:x=(E+m)%2==0;break;case 1:x=m%2==0;break;case 2:x=E%3==0;break;case 3:x=(E+m)%3==0;break;case 4:x=(Math.floor(E/3)+Math.floor(m/2))%2==0;break;case 5:x=E*m%2+E*m%3==0;break;case 6:x=(E*m%2+E*m%3)%2==0;break;case 7:x=((E+m)%2+E*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][E]&&x&&(this.modules[m][E]=!this.modules[m][E])}}getPenaltyScore(){let p=0;for(let v=0;v<this.size;v++){let O=!1,V=0,U=[0,0,0,0,0,0,0];for(let H=0;H<this.size;H++)this.modules[v][H]==O?(V++,V==5?p+=He.PENALTY_N1:V>5&&p++):(this.finderPenaltyAddHistory(V,U),O||(p+=this.finderPenaltyCountPatterns(U)*He.PENALTY_N3),O=this.modules[v][H],V=1);p+=this.finderPenaltyTerminateAndCount(O,V,U)*He.PENALTY_N3}for(let v=0;v<this.size;v++){let O=!1,V=0,U=[0,0,0,0,0,0,0];for(let H=0;H<this.size;H++)this.modules[H][v]==O?(V++,V==5?p+=He.PENALTY_N1:V>5&&p++):(this.finderPenaltyAddHistory(V,U),O||(p+=this.finderPenaltyCountPatterns(U)*He.PENALTY_N3),O=this.modules[H][v],V=1);p+=this.finderPenaltyTerminateAndCount(O,V,U)*He.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let O=0;O<this.size-1;O++){const V=this.modules[v][O];V==this.modules[v][O+1]&&V==this.modules[v+1][O]&&V==this.modules[v+1][O+1]&&(p+=He.PENALTY_N2)}let m=0;for(const v of this.modules)m=v.reduce((O,V)=>O+(V?1:0),m);const E=this.size*this.size,x=Math.ceil(Math.abs(m*20-E*10)/E)-1;return s(0<=x&&x<=9),p+=x*He.PENALTY_N4,s(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let E=[6];for(let x=this.size-7;E.length<p;x-=m)E.splice(1,0,x);return E}}static getNumRawDataModules(p){if(p<He.MIN_VERSION||p>He.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const E=Math.floor(p/7)+2;m-=(25*E-10)*E-55,p>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(He.getNumRawDataModules(p)/8)-He.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*He.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let x=0;x<p-1;x++)m.push(0);m.push(1);let E=1;for(let x=0;x<p;x++){for(let v=0;v<m.length;v++)m[v]=He.reedSolomonMultiply(m[v],E),v+1<m.length&&(m[v]^=m[v+1]);E=He.reedSolomonMultiply(E,2)}return m}static reedSolomonComputeRemainder(p,m){let E=m.map(x=>0);for(const x of p){const v=x^E.shift();E.push(0),m.forEach((O,V)=>E[V]^=He.reedSolomonMultiply(O,v))}return E}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let E=0;for(let x=7;x>=0;x--)E=E<<1^(E>>>7)*285,E^=(m>>>x&1)*p;return s(E>>>8==0),E}finderPenaltyCountPatterns(p){const m=p[1];s(m<=this.size*3);const E=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(E&&p[0]>=m*4&&p[6]>=m?1:0)+(E&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,E){return p&&(this.finderPenaltyAddHistory(m,E),m=0),m+=this.size,this.finderPenaltyAddHistory(m,E),this.finderPenaltyCountPatterns(E)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(y,p,m){if(p<0||p>31||y>>>p)throw new RangeError("Value out of range");for(let E=p-1;E>=0;E--)m.push(y>>>E&1)}function r(y,p){return(y>>>p&1)!=0}function s(y){if(!y)throw new Error("Assertion error")}const a=class Ut{constructor(p,m,E){if(this.mode=p,this.numChars=m,this.bitData=E,m<0)throw new RangeError("Invalid argument");this.bitData=E.slice()}static makeBytes(p){let m=[];for(const E of p)n(E,8,m);return new Ut(Ut.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!Ut.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let E=0;E<p.length;){const x=Math.min(p.length-E,3);n(parseInt(p.substring(E,E+x),10),x*3+1,m),E+=x}return new Ut(Ut.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!Ut.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],E;for(E=0;E+2<=p.length;E+=2){let x=Ut.ALPHANUMERIC_CHARSET.indexOf(p.charAt(E))*45;x+=Ut.ALPHANUMERIC_CHARSET.indexOf(p.charAt(E+1)),n(x,11,m)}return E<p.length&&n(Ut.ALPHANUMERIC_CHARSET.indexOf(p.charAt(E)),6,m),new Ut(Ut.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:Ut.isNumeric(p)?[Ut.makeNumeric(p)]:Ut.isAlphanumeric(p)?[Ut.makeAlphanumeric(p)]:[Ut.makeBytes(Ut.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,m);else if(p<16384)n(2,2,m),n(p,14,m);else if(p<1e6)n(6,3,m),n(p,21,m);else throw new RangeError("ECI assignment value out of range");return new Ut(Ut.Mode.ECI,0,m)}static isNumeric(p){return Ut.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return Ut.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let E=0;for(const x of p){const v=x.mode.numCharCountBits(m);if(x.numChars>=1<<v)return 1/0;E+=4+v+x.bitData.length}return E}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let E=0;E<p.length;E++)p.charAt(E)!="%"?m.push(p.charCodeAt(E)):(m.push(parseInt(p.substring(E+1,E+3),16)),E+=2);return m}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=a;t.QrSegment=a})(Uo||(Uo={}));(t=>{(e=>{const n=class{constructor(s,a){this.ordinal=s,this.formatBits=a}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Uo||(Uo={}));(t=>{(e=>{const n=class{constructor(s,a){this.modeBits=s,this.numBitsCharCount=a}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Uo||(Uo={}));var Ra=Uo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var _O={L:Ra.QrCode.Ecc.LOW,M:Ra.QrCode.Ecc.MEDIUM,Q:Ra.QrCode.Ecc.QUARTILE,H:Ra.QrCode.Ecc.HIGH},YA=128,QA="L",$A="#FFFFFF",ZA="#000000",JA=!1,eI=1,xO=4,AO=0,IO=.1;function tI(t,e=0){const n=[];return t.forEach(function(r,s){let a=null;r.forEach(function(h,y){if(!h&&a!==null){n.push(`M${a+e} ${s+e}h${y-a}v1H${a+e}z`),a=null;return}if(y===r.length-1){if(!h)return;a===null?n.push(`M${y+e},${s+e} h1v1H${y+e}z`):n.push(`M${a+e},${s+e} h${y+1-a}v1H${a+e}z`);return}h&&a===null&&(a=y)})}),n.join("")}function nI(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,a)=>a<e.x||a>=e.x+e.w?s:!1))}function CO(t,e,n,r){if(r==null)return null;const s=t.length+n*2,a=Math.floor(e*IO),h=s/e,y=(r.width||a)*h,p=(r.height||a)*h,m=r.x==null?t.length/2-y/2:r.x*h,E=r.y==null?t.length/2-p/2:r.y*h,x=r.opacity==null?1:r.opacity;let v=null;if(r.excavate){let V=Math.floor(m),U=Math.floor(E),H=Math.ceil(y+m-V),F=Math.ceil(p+E-U);v={x:V,y:U,w:H,h:F}}const O=r.crossOrigin;return{x:m,y:E,h:p,w:y,excavation:v,opacity:x,crossOrigin:O}}function vO(t,e){return e!=null?Math.max(Math.floor(e),0):t?xO:AO}function rI({value:t,level:e,minVersion:n,includeMargin:r,marginSize:s,imageSettings:a,size:h,boostLevel:y}){let p=rn.useMemo(()=>{const V=(Array.isArray(t)?t:[t]).reduce((U,H)=>(U.push(...Ra.QrSegment.makeSegments(H)),U),[]);return Ra.QrCode.encodeSegments(V,_O[e],n,void 0,void 0,y)},[t,e,n,y]);const{cells:m,margin:E,numCells:x,calculatedImageSettings:v}=rn.useMemo(()=>{let O=p.getModules();const V=vO(r,s),U=O.length+V*2,H=CO(O,h,V,a);return{cells:O,margin:V,numCells:U,calculatedImageSettings:H}},[p,h,a,r,s]);return{qrcode:p,margin:E,cells:m,numCells:x,calculatedImageSettings:v}}var TO=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),iI=rn.forwardRef(function(e,n){const r=e,{value:s,size:a=YA,level:h=QA,bgColor:y=$A,fgColor:p=ZA,includeMargin:m=JA,minVersion:E=eI,boostLevel:x,marginSize:v,imageSettings:O}=r,U=d0(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:H}=U,F=d0(U,["style"]),D=O==null?void 0:O.src,N=rn.useRef(null),q=rn.useRef(null),ie=rn.useCallback(Le=>{N.current=Le,typeof n=="function"?n(Le):n&&(n.current=Le)},[n]),[re,P]=rn.useState(!1),{margin:k,cells:b,numCells:j,calculatedImageSettings:W}=rI({value:s,level:h,minVersion:E,boostLevel:x,includeMargin:m,marginSize:v,imageSettings:O,size:a});rn.useEffect(()=>{if(N.current!=null){const Le=N.current,J=Le.getContext("2d");if(!J)return;let gt=b;const Te=q.current,pe=W!=null&&Te!==null&&Te.complete&&Te.naturalHeight!==0&&Te.naturalWidth!==0;pe&&W.excavation!=null&&(gt=nI(b,W.excavation));const Ae=window.devicePixelRatio||1;Le.height=Le.width=a*Ae;const Se=a/j*Ae;J.scale(Se,Se),J.fillStyle=y,J.fillRect(0,0,j,j),J.fillStyle=p,TO?J.fill(new Path2D(tI(gt,k))):b.forEach(function(ct,ze){ct.forEach(function(wn,at){wn&&J.fillRect(at+k,ze+k,1,1)})}),W&&(J.globalAlpha=W.opacity),pe&&J.drawImage(Te,W.x+k,W.y+k,W.w,W.h)}}),rn.useEffect(()=>{P(!1)},[D]);const X=f0({height:a,width:a},H);let z=null;return D!=null&&(z=rn.createElement("img",{src:D,key:D,style:{display:"none"},onLoad:()=>{P(!0)},ref:q,crossOrigin:W==null?void 0:W.crossOrigin})),rn.createElement(rn.Fragment,null,rn.createElement("canvas",f0({style:X,height:a,width:a,ref:ie,role:"img"},F)),z)});iI.displayName="QRCodeCanvas";var SO=rn.forwardRef(function(e,n){const r=e,{value:s,size:a=YA,level:h=QA,bgColor:y=$A,fgColor:p=ZA,includeMargin:m=JA,minVersion:E=eI,boostLevel:x,title:v,marginSize:O,imageSettings:V}=r,U=d0(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:H,cells:F,numCells:D,calculatedImageSettings:N}=rI({value:s,level:h,minVersion:E,boostLevel:x,includeMargin:m,marginSize:O,imageSettings:V,size:a});let q=F,ie=null;V!=null&&N!=null&&(N.excavation!=null&&(q=nI(F,N.excavation)),ie=rn.createElement("image",{href:V.src,height:N.h,width:N.w,x:N.x+H,y:N.y+H,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const re=tI(q,H);return rn.createElement("svg",f0({height:a,width:a,viewBox:`0 0 ${D} ${D}`,ref:n,role:"img"},U),!!v&&rn.createElement("title",null,v),rn.createElement("path",{fill:y,d:`M0,0 h${D}v${D}H0z`,shapeRendering:"crispEdges"}),rn.createElement("path",{fill:p,d:re,shapeRendering:"crispEdges"}),ie)});SO.displayName="QRCodeSVG";function RO({profile:t}){if(!t)return null;const e={name:t.name,title:t.title,years:t.years,factory:t.factory,phone:t.phone,birthday:t.birthday,email:t.email};return se.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[se.jsx("h3",{className:"font-semibold text-sm",children:"我的 QR Code"}),se.jsx(iI,{value:JSON.stringify(e),size:180,bgColor:"#ffffff",fgColor:"#000000",level:"Q",includeMargin:!0})]})}var we;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var dy=new Map([[we.QR_CODE,"QR_CODE"],[we.AZTEC,"AZTEC"],[we.CODABAR,"CODABAR"],[we.CODE_39,"CODE_39"],[we.CODE_93,"CODE_93"],[we.CODE_128,"CODE_128"],[we.DATA_MATRIX,"DATA_MATRIX"],[we.MAXICODE,"MAXICODE"],[we.ITF,"ITF"],[we.EAN_13,"EAN_13"],[we.EAN_8,"EAN_8"],[we.PDF_417,"PDF_417"],[we.RSS_14,"RSS_14"],[we.RSS_EXPANDED,"RSS_EXPANDED"],[we.UPC_A,"UPC_A"],[we.UPC_E,"UPC_E"],[we.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),gy;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(gy||(gy={}));function NO(t){return Object.values(we).includes(t)}var nf;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(nf||(nf={}));var bO=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[nf.SCAN_TYPE_CAMERA,nf.SCAN_TYPE_FILE],t}(),sI=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!dy.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,dy.get(e))},t}(),py=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),g0;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(g0||(g0={}));var PO=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:g0.UNKWOWN_ERROR}},t}(),OO=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function zi(t){return typeof t>"u"||t===null}var Na=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),oI=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(s),h=Object.keys(e),y=0,p=h;y<p.length;y++){var m=p[y];if(a.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),p0={exports:{}};(function(t,e){(function(n,r){r(e)})(Tl,function(n){function r(T){return T==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,i){T.__proto__=i}||function(T,i){for(var o in i)i.hasOwnProperty(o)&&(T[o]=i[o])};function a(T,i){s(T,i);function o(){this.constructor=T}T.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function h(T,i){var o=Object.setPrototypeOf;o?o(T,i):T.__proto__=i}function y(T,i){i===void 0&&(i=T.constructor);var o=Error.captureStackTrace;o&&o(T,i)}var p=function(T){a(i,T);function i(o){var l=this.constructor,u=T.call(this,o)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),h(u,l.prototype),y(u),u}return i}(Error);class m extends p{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}m.kind="Exception";class E extends m{}E.kind="ArgumentException";class x extends m{}x.kind="IllegalArgumentException";class v{constructor(i){if(this.binarizer=i,i===null)throw new x("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,u){const c=this.binarizer.getLuminanceSource().crop(i,o,l,u);return new v(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends m{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class V{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class U{static arraycopy(i,o,l,u,c){for(;c--;)l[u++]=i[o++]}static currentTimeMillis(){return Date.now()}}class H extends m{}H.kind="IndexOutOfBoundsException";class F extends H{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}F.kind="ArrayIndexOutOfBoundsException";class D{static fill(i,o){for(let l=0,u=i.length;l<u;l++)i[l]=o}static fillWithin(i,o,l,u){D.rangeCheck(i.length,o,l);for(let c=o;c<l;c++)i[c]=u}static rangeCheck(i,o,l){if(o>l)throw new x("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new F(o);if(l>i)throw new F(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(c=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(c=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,u=i.length;l<u;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const u=l-o,c=new Int32Array(u);return U.arraycopy(i,o,c,0,u),c}static binarySearch(i,o,l){l===void 0&&(l=D.numberComparator);let u=0,c=i.length-1;for(;u<=c;){const f=c+u>>1,g=l(o,i[f]);if(g>0)u=f+1;else if(g<0)c=f-1;else return f}return-u-1}static numberComparator(i,o){return i-o}}class N{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class q{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=q.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=q.makeArray(i);U.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let u=Math.floor(i/32),c=l[u];c&=~((1<<(i&31))-1);const f=l.length;for(;c===0;){if(++u===f)return o;c=l[u]}const g=u*32+N.numberOfTrailingZeros(c);return g>o?o:g}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let u=Math.floor(i/32),c=~l[u];c&=~((1<<(i&31))-1);const f=l.length;for(;c===0;){if(++u===f)return o;c=~l[u]}const g=u*32+N.numberOfTrailingZeros(c);return g>o?o:g}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new x;if(o===i)return;o--;const l=Math.floor(i/32),u=Math.floor(o/32),c=this.bits;for(let f=l;f<=u;f++){const g=f>l?0:i&31,_=(2<<(f<u?31:o&31))-(1<<g);c[f]|=_}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new x;if(o===i)return!0;o--;const u=Math.floor(i/32),c=Math.floor(o/32),f=this.bits;for(let g=u;g<=c;g++){const w=g>u?0:i&31,I=(2<<(g<c?31:o&31))-(1<<w)&4294967295;if((f[g]&I)!==(l?I:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new x("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new x("Sizes don't match");const o=this.bits;for(let l=0,u=o.length;l<u;l++)o[l]^=i.bits[l]}toBytes(i,o,l,u){for(let c=0;c<u;c++){let f=0;for(let g=0;g<8;g++)this.get(i)&&(f|=1<<7-g),i++;o[l+c]=f}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,u=this.bits;for(let c=0;c<l;c++){let f=u[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,i[o-c]=f}if(this.size!==l*32){const c=l*32-this.size;let f=i[0]>>>c;for(let g=1;g<l;g++){const w=i[g];f|=w<<32-c,i[g-1]=f,f=w>>>c}i[l-1]=f}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof q))return!1;const o=i;return this.size===o.size&&D.equals(this.bits,o.bits)}hashCode(){return 31*this.size+D.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)o&7||(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new q(this.size,this.bits.slice())}}var ie;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ie||(ie={}));var re=ie;class P extends m{static getFormatInstance(){return new P}}P.kind="FormatException";var k;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(k||(k={}));class b{constructor(i,o,l,...u){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=u,b.VALUE_IDENTIFIER_TO_ECI.set(i,this),b.NAME_TO_ECI.set(l,this);const c=this.values;for(let f=0,g=c.length;f!==g;f++){const w=c[f];b.VALUES_TO_ECI.set(w,this)}for(const f of u)b.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new P("incorect value");const o=b.VALUES_TO_ECI.get(i);if(o===void 0)throw new P("incorect value");return o}static getCharacterSetECIByName(i){const o=b.NAME_TO_ECI.get(i);if(o===void 0)throw new P("incorect value");return o}equals(i){if(!(i instanceof b))return!1;const o=i;return this.getName()===o.getName()}}b.VALUE_IDENTIFIER_TO_ECI=new Map,b.VALUES_TO_ECI=new Map,b.NAME_TO_ECI=new Map,b.Cp437=new b(k.Cp437,Int32Array.from([0,2]),"Cp437"),b.ISO8859_1=new b(k.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),b.ISO8859_2=new b(k.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),b.ISO8859_3=new b(k.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),b.ISO8859_4=new b(k.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),b.ISO8859_5=new b(k.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),b.ISO8859_6=new b(k.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),b.ISO8859_7=new b(k.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),b.ISO8859_8=new b(k.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),b.ISO8859_9=new b(k.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),b.ISO8859_10=new b(k.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),b.ISO8859_11=new b(k.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),b.ISO8859_13=new b(k.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),b.ISO8859_14=new b(k.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),b.ISO8859_15=new b(k.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),b.ISO8859_16=new b(k.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),b.SJIS=new b(k.SJIS,20,"SJIS","Shift_JIS"),b.Cp1250=new b(k.Cp1250,21,"Cp1250","windows-1250"),b.Cp1251=new b(k.Cp1251,22,"Cp1251","windows-1251"),b.Cp1252=new b(k.Cp1252,23,"Cp1252","windows-1252"),b.Cp1256=new b(k.Cp1256,24,"Cp1256","windows-1256"),b.UnicodeBigUnmarked=new b(k.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),b.UTF8=new b(k.UTF8,26,"UTF8","UTF-8"),b.ASCII=new b(k.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),b.Big5=new b(k.Big5,28,"Big5"),b.GB18030=new b(k.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),b.EUC_KR=new b(k.EUC_KR,30,"EUC_KR","EUC-KR");class j extends m{}j.kind="UnsupportedOperationException";class W{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!W.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof b?i:b.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(W.isDecodeFallbackSupported(l)){let u="";for(let c=0,f=i.length;c<f;c++){let g=i[c].toString(16);g.length<2&&(g="0"+g),u+="%"+g}return decodeURIComponent(u)}if(l.equals(b.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new j(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(b.UTF8)||i.equals(b.ISO8859_1)||i.equals(b.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let c=0;c<l.length;c++)u.push(l[c].charCodeAt(0));return new Uint8Array(u)}}class X{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return W.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(re.CHARACTER_SET)!==void 0)return o.get(re.CHARACTER_SET).toString();const l=i.length;let u=!0,c=!0,f=!0,g=0,w=0,_=0,I=0,S=0,R=0,B=0,G=0,K=0,Q=0,te=0;const fe=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let de=0;de<l&&(u||c||f);de++){const ue=i[de]&255;f&&(g>0?ue&128?g--:f=!1:ue&128&&(ue&64?(g++,ue&32?(g++,ue&16?(g++,ue&8?f=!1:I++):_++):w++):f=!1)),u&&(ue>127&&ue<160?u=!1:ue>159&&(ue<192||ue===215||ue===247)&&te++),c&&(S>0?ue<64||ue===127||ue>252?c=!1:S--:ue===128||ue===160||ue>239?c=!1:ue>160&&ue<224?(R++,G=0,B++,B>K&&(K=B)):ue>127?(S++,B=0,G++,G>Q&&(Q=G)):(B=0,G=0))}return f&&g>0&&(f=!1),c&&S>0&&(c=!1),f&&(fe||w+_+I>0)?X.UTF8:c&&(X.ASSUME_SHIFT_JIS||K>=3||Q>=3)?X.SHIFT_JIS:u&&c?K===2&&R===2||te*10>=l?X.SHIFT_JIS:X.ISO88591:u?X.ISO88591:c?X.SHIFT_JIS:f?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function u(f,g,w,_,I,S){if(f==="%%")return"%";if(o[++l]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let R=I?parseInt(I.substr(1)):void 0,B;switch(S){case"s":B=o[l];break;case"c":B=o[l][0];break;case"f":B=parseFloat(o[l]).toFixed(f);break;case"p":B=parseFloat(o[l]).toPrecision(f);break;case"e":B=parseFloat(o[l]).toExponential(f);break;case"x":B=parseInt(o[l]).toString(R||16);break;case"d":B=parseFloat(parseInt(o[l],R||10).toPrecision(f)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(R);let G=parseInt(w),K=w&&w[0]+""=="0"?"0":" ";for(;B.length<G;)B=g!==void 0?B+K:K+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(c,u)}static getBytes(i,o){return W.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}X.SHIFT_JIS=b.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=b.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=b.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class z{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=X.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let u=o;o<o+l;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class Le{constructor(i,o,l,u){if(this.width=i,this.height=o,this.rowSize=l,this.bits=u,o==null&&(o=i),this.height=o,i<1||o<1)throw new x("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,u=new Le(l,o);for(let c=0;c<o;c++){const f=i[c];for(let g=0;g<l;g++)f[g]&&u.set(g,c)}return u}static parseFromString(i,o,l){if(i===null)throw new x("stringRepresentation cannot be null");const u=new Array(i.length);let c=0,f=0,g=-1,w=0,_=0;for(;_<i.length;)if(i.charAt(_)===`
`||i.charAt(_)==="\r"){if(c>f){if(g===-1)g=c-f;else if(c-f!==g)throw new x("row lengths do not match");f=c,w++}_++}else if(i.substring(_,_+o.length)===o)_+=o.length,u[c]=!0,c++;else if(i.substring(_,_+l.length)===l)_+=l.length,u[c]=!1,c++;else throw new x("illegal character encountered: "+i.substring(_));if(c>f){if(g===-1)g=c-f;else if(c-f!==g)throw new x("row lengths do not match");w++}const I=new Le(g,w);for(let S=0;S<c;S++)u[S]&&I.set(Math.floor(S%g),Math.floor(S/g));return I}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new x("input matrix dimensions do not match");const o=new q(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let c=0,f=this.height;c<f;c++){const g=c*l,w=i.getRow(c,o).getBitArray();for(let _=0;_<l;_++)u[g+_]^=w[_]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,u){if(o<0||i<0)throw new x("Left and top must be nonnegative");if(u<1||l<1)throw new x("Height and width must be at least 1");const c=i+l,f=o+u;if(f>this.height||c>this.width)throw new x("The region must fit inside the matrix");const g=this.rowSize,w=this.bits;for(let _=o;_<f;_++){const I=_*g;for(let S=i;S<c;S++)w[I+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new q(this.width):o.clear();const l=this.rowSize,u=this.bits,c=i*l;for(let f=0;f<l;f++)o.setBulk(f*32,u[c+f]);return o}setRow(i,o){U.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new q(i),u=new q(i);for(let c=0,f=Math.floor((o+1)/2);c<f;c++)l=this.getRow(c,l),u=this.getRow(o-1-c,u),l.reverse(),u.reverse(),this.setRow(c,u),this.setRow(o-1-c,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,u=this.bits;let c=i,f=o,g=-1,w=-1;for(let _=0;_<o;_++)for(let I=0;I<l;I++){const S=u[_*l+I];if(S!==0){if(_<f&&(f=_),_>w&&(w=_),I*32<c){let R=0;for(;!(S<<31-R&4294967295);)R++;I*32+R<c&&(c=I*32+R)}if(I*32+31>g){let R=31;for(;!(S>>>R);)R--;I*32+R>g&&(g=I*32+R)}}}return g<c||w<f?null:Int32Array.from([c,f,g-c+1,w-f+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const u=l/i;let c=l%i*32;const f=o[l];let g=0;for(;!(f<<31-g&4294967295);)g++;return c+=g,Int32Array.from([c,u])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/i);let c=Math.floor(l%i)*32;const f=o[l];let g=31;for(;!(f>>>g);)g--;return c+=g,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Le))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&D.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+D.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let u=new z;for(let c=0,f=this.height;c<f;c++){for(let g=0,w=this.width;g<w;g++)u.append(this.get(g,c)?i:o);u.append(l)}return u.toString()}clone(){return new Le(this.width,this.height,this.rowSize,this.bits.slice())}}class J extends m{static getNotFoundInstance(){return new J}}J.kind="NotFoundException";class gt extends V{constructor(i){super(i),this.luminances=gt.EMPTY,this.buckets=new Int32Array(gt.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),u=l.getWidth();o==null||o.getSize()<u?o=new q(u):o.clear(),this.initArrays(u);const c=l.getRow(i,this.luminances),f=this.buckets;for(let w=0;w<u;w++)f[(c[w]&255)>>gt.LUMINANCE_SHIFT]++;const g=gt.estimateBlackPoint(f);if(u<3)for(let w=0;w<u;w++)(c[w]&255)<g&&o.set(w);else{let w=c[0]&255,_=c[1]&255;for(let I=1;I<u-1;I++){const S=c[I+1]&255;(_*4-w-S)/2<g&&o.set(I),w=_,_=S}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),u=new Le(o,l);this.initArrays(o);const c=this.buckets;for(let w=1;w<5;w++){const _=Math.floor(l*w/5),I=i.getRow(_,this.luminances),S=Math.floor(o*4/5);for(let R=Math.floor(o/5);R<S;R++){const B=I[R]&255;c[B>>gt.LUMINANCE_SHIFT]++}}const f=gt.estimateBlackPoint(c),g=i.getMatrix();for(let w=0;w<l;w++){const _=w*o;for(let I=0;I<o;I++)(g[_+I]&255)<f&&u.set(I,w)}return u}createBinarizer(i){return new gt(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<gt.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,u=0,c=0;for(let I=0;I<o;I++)i[I]>c&&(u=I,c=i[I]),i[I]>l&&(l=i[I]);let f=0,g=0;for(let I=0;I<o;I++){const S=I-u,R=i[I]*S*S;R>g&&(f=I,g=R)}if(u>f){const I=u;u=f,f=I}if(f-u<=o/16)throw new J;let w=f-1,_=-1;for(let I=f-1;I>u;I--){const S=I-u,R=S*S*(f-I)*(l-i[I]);R>_&&(w=I,_=R)}return w<<gt.LUMINANCE_SHIFT}}gt.LUMINANCE_BITS=5,gt.LUMINANCE_SHIFT=8-gt.LUMINANCE_BITS,gt.LUMINANCE_BUCKETS=1<<gt.LUMINANCE_BITS,gt.EMPTY=Uint8ClampedArray.from([0]);class Te extends gt{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=Te.MINIMUM_DIMENSION&&l>=Te.MINIMUM_DIMENSION){const u=i.getMatrix();let c=o>>Te.BLOCK_SIZE_POWER;o&Te.BLOCK_SIZE_MASK&&c++;let f=l>>Te.BLOCK_SIZE_POWER;l&Te.BLOCK_SIZE_MASK&&f++;const g=Te.calculateBlackPoints(u,c,f,o,l),w=new Le(o,l);Te.calculateThresholdForBlock(u,c,f,o,l,g,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new Te(i)}static calculateThresholdForBlock(i,o,l,u,c,f,g){const w=c-Te.BLOCK_SIZE,_=u-Te.BLOCK_SIZE;for(let I=0;I<l;I++){let S=I<<Te.BLOCK_SIZE_POWER;S>w&&(S=w);const R=Te.cap(I,2,l-3);for(let B=0;B<o;B++){let G=B<<Te.BLOCK_SIZE_POWER;G>_&&(G=_);const K=Te.cap(B,2,o-3);let Q=0;for(let fe=-2;fe<=2;fe++){const de=f[R+fe];Q+=de[K-2]+de[K-1]+de[K]+de[K+1]+de[K+2]}const te=Q/25;Te.thresholdBlock(i,G,S,te,u,g)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,u,c,f){for(let g=0,w=l*c+o;g<Te.BLOCK_SIZE;g++,w+=c)for(let _=0;_<Te.BLOCK_SIZE;_++)(i[w+_]&255)<=u&&f.set(o+_,l+g)}static calculateBlackPoints(i,o,l,u,c){const f=c-Te.BLOCK_SIZE,g=u-Te.BLOCK_SIZE,w=new Array(l);for(let _=0;_<l;_++){w[_]=new Int32Array(o);let I=_<<Te.BLOCK_SIZE_POWER;I>f&&(I=f);for(let S=0;S<o;S++){let R=S<<Te.BLOCK_SIZE_POWER;R>g&&(R=g);let B=0,G=255,K=0;for(let te=0,fe=I*u+R;te<Te.BLOCK_SIZE;te++,fe+=u){for(let de=0;de<Te.BLOCK_SIZE;de++){const ue=i[fe+de]&255;B+=ue,ue<G&&(G=ue),ue>K&&(K=ue)}if(K-G>Te.MIN_DYNAMIC_RANGE)for(te++,fe+=u;te<Te.BLOCK_SIZE;te++,fe+=u)for(let de=0;de<Te.BLOCK_SIZE;de++)B+=i[fe+de]&255}let Q=B>>Te.BLOCK_SIZE_POWER*2;if(K-G<=Te.MIN_DYNAMIC_RANGE&&(Q=G/2,_>0&&S>0)){const te=(w[_-1][S]+2*w[_][S-1]+w[_-1][S-1])/4;G<te&&(Q=te)}w[_][S]=Q}}return w}}Te.BLOCK_SIZE_POWER=3,Te.BLOCK_SIZE=1<<Te.BLOCK_SIZE_POWER,Te.BLOCK_SIZE_MASK=Te.BLOCK_SIZE-1,Te.MINIMUM_DIMENSION=Te.BLOCK_SIZE*5,Te.MIN_DYNAMIC_RANGE=24;class pe{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,u){throw new j("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new j("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new j("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new z;for(let l=0;l<this.height;l++){const u=this.getRow(l,i);for(let c=0;c<this.width;c++){const f=u[c]&255;let g;f<64?g="#":f<128?g="+":f<192?g=".":g=" ",o.append(g)}o.append(`
`)}return o.toString()}}class Ae extends pe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),u=this.getWidth();for(let c=0;c<u;c++)l[c]=255-(l[c]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let u=0;u<o;u++)l[u]=255-(i[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,u){return new Ae(this.delegate.crop(i,o,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ae(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ae(this.delegate.rotateCounterClockwise45())}}class Se extends pe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Se.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return Se.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const u=new Uint8ClampedArray(o*l);for(let c=0,f=0,g=i.length;c<g;c+=4,f++){let w;if(i[c+3]===0)w=255;else{const I=i[c],S=i[c+1],R=i[c+2];w=306*I+601*S+117*R+512>>10}u[f]=w}return u}getRow(i,o){if(i<0||i>=this.getHeight())throw new x("Requested row is outside the image: "+i);const l=this.getWidth(),u=i*l;return o===null?o=this.buffer.slice(u,u+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(u,u+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,u){return super.crop(i,o,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),u=i*Se.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*f),w=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*f);return o.width=g,o.height=w,l.translate(g/2,w/2),l.rotate(u),l.drawImage(this.canvas,c/-2,f/-2),this.buffer=Se.makeBufferFromCanvasImageData(o),this}invert(){return new Ae(this)}}Se.DEGREE_TO_RADIANS=Math.PI/180;class ct{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ze=(globalThis||Tl||self||window||void 0)&&(globalThis||Tl||self||window||void 0).__awaiter||function(T,i,o,l){function u(c){return c instanceof o?c:new o(function(f){f(c)})}return new(o||(o=Promise))(function(c,f){function g(I){try{_(l.next(I))}catch(S){f(S)}}function w(I){try{_(l.throw(I))}catch(S){f(S)}}function _(I){I.done?c(I.value):u(I.value).then(g,w)}_((l=l.apply(T,i||[])).next())})};class wn{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ze(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const c=l.deviceId||l.id,f=l.label||`Video device ${o.length+1}`,g=l.groupId,w={deviceId:c,label:f,kind:u,groupId:g};o.push(w)}return o})}getVideoInputDevices(){return ze(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ct(o.deviceId,o.label))})}findDeviceById(i){return ze(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return ze(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return ze(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,o)})}decodeOnceFromConstraints(i,o){return ze(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return ze(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return ze(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return ze(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,o,l)})}decodeFromConstraints(i,o,l){return ze(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,o,l)})}decodeFromStream(i,o,l){return ze(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return ze(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ze(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new E(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new E(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new E("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new E("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new E("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new E("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new E("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new E("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new E("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new E("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,o);return l.src=i,u}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ze(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return ze(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const u=(c,f)=>{if(this._stopAsyncDecode){f(new J("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(i);c(g)}catch(g){const w=o&&g instanceof J,I=(g instanceof O||g instanceof P)&&l;if(w||I)return setTimeout(u,this._timeBetweenDecodingAttempts,c,f);f(g)}};return new Promise((c,f)=>u(c,f))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);o(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){o(null,u);const c=u instanceof O||u instanceof P,f=u instanceof J;(c||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new Se(o),u=new Te(l);return new v(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=u+"px",o.width=l,o.height=u,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class at{constructor(i,o,l=o==null?0:8*o.length,u,c,f=U.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=u,this.format=c,this.timestamp=f,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=u,this.format=c,this.resultMetadata=null,f==null?this.timestamp=U.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);U.arraycopy(o,0,l,0,o.length),U.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ur;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ur||(Ur={}));var xe=Ur,xr;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(xr||(xr={}));var Lt=xr;class ls{constructor(i,o,l,u,c=-1,f=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class io{exp(i){return this.expTable[i]}log(i){if(i===0)throw new x;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Rn{constructor(i,o){if(o.length===0)throw new x;this.field=i;const l=o.length;if(l>1&&o[0]===0){let u=1;for(;u<l&&o[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),U.arraycopy(o,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let f=0,g=o.length;f!==g;f++){const w=o[f];l=io.addOrSubtract(l,w)}return l}l=o[0];const u=o.length,c=this.field;for(let f=1;f<u;f++)l=io.addOrSubtract(c.multiply(i,l),o[f]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const f=o;o=l,l=f}let u=new Int32Array(l.length);const c=l.length-o.length;U.arraycopy(l,0,u,0,c);for(let f=c;f<l.length;f++)u[f]=io.addOrSubtract(o[f-c],l[f]);return new Rn(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,u=i.coefficients,c=u.length,f=new Int32Array(l+c-1),g=this.field;for(let w=0;w<l;w++){const _=o[w];for(let I=0;I<c;I++)f[w+I]=io.addOrSubtract(f[w+I],g.multiply(_,u[I]))}return new Rn(g,f)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,u=new Int32Array(o),c=this.coefficients;for(let f=0;f<o;f++)u[f]=l.multiply(c[f],i);return new Rn(l,u)}multiplyByMonomial(i,o){if(i<0)throw new x;if(o===0)return this.field.getZero();const l=this.coefficients,u=l.length,c=new Int32Array(u+i),f=this.field;for(let g=0;g<u;g++)c[g]=f.multiply(l[g],o);return new Rn(f,c)}divide(i){if(!this.field.equals(i.field))throw new x("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new x("Divide by 0");const o=this.field;let l=o.getZero(),u=this;const c=i.getCoefficient(i.getDegree()),f=o.inverse(c);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const g=u.getDegree()-i.getDegree(),w=o.multiply(u.getCoefficient(u.getDegree()),f),_=i.multiplyByMonomial(g,w),I=o.buildMonomial(g,w);l=l.addOrSubtract(I),u=u.addOrSubtract(_)}return[l,u]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const u=this.field.log(l);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class so extends m{}so.kind="ArithmeticException";class Qe extends io{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const u=new Int32Array(o);let c=1;for(let g=0;g<o;g++)u[g]=c,c*=2,c>=o&&(c^=i,c&=o-1);this.expTable=u;const f=new Int32Array(o);for(let g=0;g<o-1;g++)f[u[g]]=g;this.logTable=f,this.zero=new Rn(this,Int32Array.from([0])),this.one=new Rn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new x;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new Rn(this,l)}inverse(i){if(i===0)throw new so;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Qe.AZTEC_DATA_12=new Qe(4201,4096,1),Qe.AZTEC_DATA_10=new Qe(1033,1024,1),Qe.AZTEC_DATA_6=new Qe(67,64,1),Qe.AZTEC_PARAM=new Qe(19,16,1),Qe.QR_CODE_FIELD_256=new Qe(285,256,0),Qe.DATA_MATRIX_FIELD_256=new Qe(301,256,1),Qe.AZTEC_DATA_8=Qe.DATA_MATRIX_FIELD_256,Qe.MAXICODE_FIELD_64=Qe.AZTEC_DATA_6;class Pi extends m{}Pi.kind="ReedSolomonException";class Ar extends m{}Ar.kind="IllegalStateException";class Oi{constructor(i){this.field=i}decode(i,o){const l=this.field,u=new Rn(l,i),c=new Int32Array(o);let f=!0;for(let B=0;B<o;B++){const G=u.evaluateAt(l.exp(B+l.getGeneratorBase()));c[c.length-1-B]=G,G!==0&&(f=!1)}if(f)return;const g=new Rn(l,c),w=this.runEuclideanAlgorithm(l.buildMonomial(o,1),g,o),_=w[0],I=w[1],S=this.findErrorLocations(_),R=this.findErrorMagnitudes(I,S);for(let B=0;B<S.length;B++){const G=i.length-1-l.log(S[B]);if(G<0)throw new Pi("Bad error location");i[G]=Qe.addOrSubtract(i[G],R[B])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const B=i;i=o,o=B}const u=this.field;let c=i,f=o,g=u.getZero(),w=u.getOne();for(;f.getDegree()>=(l/2|0);){let B=c,G=g;if(c=f,g=w,c.isZero())throw new Pi("r_{i-1} was zero");f=B;let K=u.getZero();const Q=c.getCoefficient(c.getDegree()),te=u.inverse(Q);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const fe=f.getDegree()-c.getDegree(),de=u.multiply(f.getCoefficient(f.getDegree()),te);K=K.addOrSubtract(u.buildMonomial(fe,de)),f=f.addOrSubtract(c.multiplyByMonomial(fe,de))}if(w=K.multiply(g).addOrSubtract(G),f.getDegree()>=c.getDegree())throw new Ar("Division algorithm failed to reduce polynomial?")}const _=w.getCoefficient(0);if(_===0)throw new Pi("sigmaTilde(0) was zero");const I=u.inverse(_),S=w.multiplyScalar(I),R=f.multiplyScalar(I);return[S,R]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let u=0;const c=this.field;for(let f=1;f<c.getSize()&&u<o;f++)i.evaluateAt(f)===0&&(l[u]=c.inverse(f),u++);if(u!==o)throw new Pi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,u=new Int32Array(l),c=this.field;for(let f=0;f<l;f++){const g=c.inverse(o[f]);let w=1;for(let _=0;_<l;_++)if(f!==_){const I=c.multiply(o[_],g),S=I&1?I&-2:I|1;w=c.multiply(w,S)}u[f]=c.multiply(i.evaluateAt(g),c.inverse(w)),c.getGeneratorBase()!==0&&(u[f]=c.multiply(u[f],g))}return u}}var Ht;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(Ht||(Ht={}));class ht{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),u=this.correctBits(l),c=ht.convertBoolArrayToByteArray(u),f=ht.getEncodedData(u),g=new ls(c,f,null,null);return g.setNumBits(u.length),g}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=Ht.UPPER,u=Ht.UPPER,c="",f=0;for(;f<o;)if(u===Ht.BINARY){if(o-f<5)break;let g=ht.readCode(i,f,5);if(f+=5,g===0){if(o-f<11)break;g=ht.readCode(i,f,11)+31,f+=11}for(let w=0;w<g;w++){if(o-f<8){f=o;break}const _=ht.readCode(i,f,8);c+=X.castAsNonUtf8Char(_),f+=8}u=l}else{let g=u===Ht.DIGIT?4:5;if(o-f<g)break;let w=ht.readCode(i,f,g);f+=g;let _=ht.getCharacter(u,w);_.startsWith("CTRL_")?(l=u,u=ht.getTable(_.charAt(5)),_.charAt(6)==="L"&&(l=u)):(c+=_,u=l)}return c}static getTable(i){switch(i){case"L":return Ht.LOWER;case"P":return Ht.PUNCT;case"M":return Ht.MIXED;case"D":return Ht.DIGIT;case"B":return Ht.BINARY;case"U":default:return Ht.UPPER}}static getCharacter(i,o){switch(i){case Ht.UPPER:return ht.UPPER_TABLE[o];case Ht.LOWER:return ht.LOWER_TABLE[o];case Ht.MIXED:return ht.MIXED_TABLE[o];case Ht.PUNCT:return ht.PUNCT_TABLE[o];case Ht.DIGIT:return ht.DIGIT_TABLE[o];default:throw new Ar("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=Qe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=Qe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=Qe.AZTEC_DATA_10):(l=12,o=Qe.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=i.length/l;if(c<u)throw new P;let f=i.length%l,g=new Int32Array(c);for(let R=0;R<c;R++,f+=l)g[R]=ht.readCode(i,f,l);try{new Oi(o).decode(g,c-u)}catch(R){throw new P(R)}let w=(1<<l)-1,_=0;for(let R=0;R<u;R++){let B=g[R];if(B===0||B===w)throw new P;(B===1||B===w-1)&&_++}let I=new Array(u*l-_),S=0;for(let R=0;R<u;R++){let B=g[R];if(B===1||B===w-1)I.fill(B>1,S,S+l-1),S+=l-1;else for(let G=l-1;G>=0;--G)I[S++]=(B&1<<G)!==0}return I}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(o?11:14)+l*4,c=new Int32Array(u),f=new Array(this.totalBitsInLayer(l,o));if(o)for(let g=0;g<c.length;g++)c[g]=g;else{let g=u+1+2*N.truncDivision(N.truncDivision(u,2)-1,15),w=u/2,_=N.truncDivision(g,2);for(let I=0;I<w;I++){let S=I+N.truncDivision(I,15);c[w-I-1]=_-S-1,c[w+I]=_+S+1}}for(let g=0,w=0;g<l;g++){let _=(l-g)*4+(o?9:12),I=g*2,S=u-1-I;for(let R=0;R<_;R++){let B=R*2;for(let G=0;G<2;G++)f[w+B+G]=i.get(c[I+G],c[I+R]),f[w+2*_+B+G]=i.get(c[I+R],c[S-G]),f[w+4*_+B+G]=i.get(c[S-G],c[S-R]),f[w+6*_+B+G]=i.get(c[S-R],c[I+G])}w+=_*8}return f}static readCode(i,o,l){let u=0;for(let c=o;c<o+l;c++)u<<=1,i[c]&&(u|=1);return u}static readByte(i,o){let l=i.length-o;return l>=8?ht.readCode(i,o,8):ht.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=ht.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}ht.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ht.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ht.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ht.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ht.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class be{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,u){const c=i-l,f=o-u;return Math.sqrt(c*c+f*f)}static sum(i){let o=0;for(let l=0,u=i.length;l!==u;l++){const c=i[l];o+=c}return o}}class Kt{static floatToIntBits(i){return i}}Kt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ee){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Kt.floatToIntBits(this.x)+Kt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let c,f,g;if(l>=o&&l>=u?(f=i[0],c=i[1],g=i[2]):u>=l&&u>=o?(f=i[1],c=i[0],g=i[2]):(f=i[2],c=i[0],g=i[1]),this.crossProductZ(c,f,g)<0){const w=c;c=g,g=w}i[0]=c,i[1]=f,i[2]=g}static distance(i,o){return be.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const u=o.x,c=o.y;return(l.x-u)*(i.y-c)-(l.y-c)*(i.x-u)}}class Yo{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class cl extends Yo{constructor(i,o,l,u,c){super(i,o),this.compact=l,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class zr{constructor(i,o,l,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=zr.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const c=o/2|0;if(this.leftInit=l-c,this.rightInit=l+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new J}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,u=this.downInit,c=!1,f=!0,g=!1,w=!1,_=!1,I=!1,S=!1;const R=this.width,B=this.height;for(;f;){f=!1;let G=!0;for(;(G||!w)&&o<R;)G=this.containsBlackPoint(l,u,o,!1),G?(o++,f=!0,w=!0):w||o++;if(o>=R){c=!0;break}let K=!0;for(;(K||!_)&&u<B;)K=this.containsBlackPoint(i,o,u,!0),K?(u++,f=!0,_=!0):_||u++;if(u>=B){c=!0;break}let Q=!0;for(;(Q||!I)&&i>=0;)Q=this.containsBlackPoint(l,u,i,!1),Q?(i--,f=!0,I=!0):I||i--;if(i<0){c=!0;break}let te=!0;for(;(te||!S)&&l>=0;)te=this.containsBlackPoint(i,o,l,!0),te?(l--,f=!0,S=!0):S||l--;if(l<0){c=!0;break}f&&(g=!0)}if(!c&&g){const G=o-i;let K=null;for(let de=1;K===null&&de<G;de++)K=this.getBlackPointOnSegment(i,u-de,i+de,u);if(K==null)throw new J;let Q=null;for(let de=1;Q===null&&de<G;de++)Q=this.getBlackPointOnSegment(i,l+de,i+de,l);if(Q==null)throw new J;let te=null;for(let de=1;te===null&&de<G;de++)te=this.getBlackPointOnSegment(o,l+de,o-de,l);if(te==null)throw new J;let fe=null;for(let de=1;fe===null&&de<G;de++)fe=this.getBlackPointOnSegment(o,u-de,o-de,u);if(fe==null)throw new J;return this.centerEdges(fe,K,te,Q)}else throw new J}getBlackPointOnSegment(i,o,l,u){const c=be.round(be.distance(i,o,l,u)),f=(l-i)/c,g=(u-o)/c,w=this.image;for(let _=0;_<c;_++){const I=be.round(i+_*f),S=be.round(o+_*g);if(w.get(I,S))return new Ee(I,S)}return null}centerEdges(i,o,l,u){const c=i.getX(),f=i.getY(),g=o.getX(),w=o.getY(),_=l.getX(),I=l.getY(),S=u.getX(),R=u.getY(),B=zr.CORR;return c<this.width/2?[new Ee(S-B,R+B),new Ee(g+B,w+B),new Ee(_-B,I-B),new Ee(c+B,f-B)]:[new Ee(S+B,R+B),new Ee(g+B,w-B),new Ee(_-B,I+B),new Ee(c-B,f-B)]}containsBlackPoint(i,o,l,u){const c=this.image;if(u){for(let f=i;f<=o;f++)if(c.get(f,l))return!0}else for(let f=i;f<=o;f++)if(c.get(l,f))return!0;return!1}}zr.INIT_SIZE=10,zr.CORR=1;class Di{static checkAndNudgePoints(i,o){const l=i.getWidth(),u=i.getHeight();let c=!0;for(let f=0;f<o.length&&c;f+=2){const g=Math.floor(o[f]),w=Math.floor(o[f+1]);if(g<-1||g>l||w<-1||w>u)throw new J;c=!1,g===-1?(o[f]=0,c=!0):g===l&&(o[f]=l-1,c=!0),w===-1?(o[f+1]=0,c=!0):w===u&&(o[f+1]=u-1,c=!0)}c=!0;for(let f=o.length-2;f>=0&&c;f-=2){const g=Math.floor(o[f]),w=Math.floor(o[f+1]);if(g<-1||g>l||w<-1||w>u)throw new J;c=!1,g===-1?(o[f]=0,c=!0):g===l&&(o[f]=l-1,c=!0),w===-1?(o[f+1]=0,c=!0):w===u&&(o[f+1]=u-1,c=!0)}}}class Hn{constructor(i,o,l,u,c,f,g,w,_){this.a11=i,this.a21=o,this.a31=l,this.a12=u,this.a22=c,this.a32=f,this.a13=g,this.a23=w,this.a33=_}static quadrilateralToQuadrilateral(i,o,l,u,c,f,g,w,_,I,S,R,B,G,K,Q){const te=Hn.quadrilateralToSquare(i,o,l,u,c,f,g,w);return Hn.squareToQuadrilateral(_,I,S,R,B,G,K,Q).times(te)}transformPoints(i){const o=i.length,l=this.a11,u=this.a12,c=this.a13,f=this.a21,g=this.a22,w=this.a23,_=this.a31,I=this.a32,S=this.a33;for(let R=0;R<o;R+=2){const B=i[R],G=i[R+1],K=c*B+w*G+S;i[R]=(l*B+f*G+_)/K,i[R+1]=(u*B+g*G+I)/K}}transformPointsWithValues(i,o){const l=this.a11,u=this.a12,c=this.a13,f=this.a21,g=this.a22,w=this.a23,_=this.a31,I=this.a32,S=this.a33,R=i.length;for(let B=0;B<R;B++){const G=i[B],K=o[B],Q=c*G+w*K+S;i[B]=(l*G+f*K+_)/Q,o[B]=(u*G+g*K+I)/Q}}static squareToQuadrilateral(i,o,l,u,c,f,g,w){const _=i-l+c-g,I=o-u+f-w;if(_===0&&I===0)return new Hn(l-i,c-l,i,u-o,f-u,o,0,0,1);{const S=l-c,R=g-c,B=u-f,G=w-f,K=S*G-R*B,Q=(_*G-R*I)/K,te=(S*I-_*B)/K;return new Hn(l-i+Q*l,g-i+te*g,i,u-o+Q*u,w-o+te*w,o,Q,te,1)}}static quadrilateralToSquare(i,o,l,u,c,f,g,w){return Hn.squareToQuadrilateral(i,o,l,u,c,f,g,w).buildAdjoint()}buildAdjoint(){return new Hn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Hn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class hl extends Di{sampleGrid(i,o,l,u,c,f,g,w,_,I,S,R,B,G,K,Q,te,fe,de){const ue=Hn.quadrilateralToQuadrilateral(u,c,f,g,w,_,I,S,R,B,G,K,Q,te,fe,de);return this.sampleGridWithTransform(i,o,l,ue)}sampleGridWithTransform(i,o,l,u){if(o<=0||l<=0)throw new J;const c=new Le(o,l),f=new Float32Array(2*o);for(let g=0;g<l;g++){const w=f.length,_=g+.5;for(let I=0;I<w;I+=2)f[I]=I/2+.5,f[I+1]=_;u.transformPoints(f),Di.checkAndNudgePoints(i,f);try{for(let I=0;I<w;I+=2)i.get(Math.floor(f[I]),Math.floor(f[I+1]))&&c.set(I/2,g)}catch{throw new J}}return c}}class Ir{static setGridSampler(i){Ir.gridSampler=i}static getInstance(){return Ir.gridSampler}}Ir.gridSampler=new hl;class En{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new Ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ec{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),c=this.getMatrixCornerPoints(l);return new cl(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new J;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let u=0;for(let f=0;f<4;f++){let g=l[(this.shift+f)%4];this.compact?(u<<=7,u+=g>>1&127):(u<<=10,u+=(g>>2&992)+(g>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(i,o){let l=0;i.forEach((u,c,f)=>{let g=(u>>o-2<<1)+(u&1);l=(l<<3)+g}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(N.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new J}getCorrectedParameterData(i,o){let l,u;o?(l=7,u=2):(l=10,u=4);let c=l-u,f=new Int32Array(l);for(let w=l-1;w>=0;--w)f[w]=i&15,i>>=4;try{new Oi(Qe.AZTEC_PARAM).decode(f,c)}catch{throw new J}let g=0;for(let w=0;w<u;w++)g=(g<<4)+f[w];return g}getBullsEyeCorners(i){let o=i,l=i,u=i,c=i,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(o,f,1,-1),R=this.getFirstDifferent(l,f,1,1),B=this.getFirstDifferent(u,f,-1,1),G=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(G,S)*this.nbCenterLayers/(this.distancePoint(c,o)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(S,R,B,G))break}o=S,l=R,u=B,c=G,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new J;this.compact=this.nbCenterLayers===5;let g=new Ee(o.getX()+.5,o.getY()-.5),w=new Ee(l.getX()+.5,l.getY()+.5),_=new Ee(u.getX()-.5,u.getY()+.5),I=new Ee(c.getX()-.5,c.getY()-.5);return this.expandSquare([g,w,_,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,u;try{let g=new zr(this.image).detect();i=g[0],o=g[1],l=g[2],u=g[3]}catch{let w=this.image.getWidth()/2,_=this.image.getHeight()/2;i=this.getFirstDifferent(new En(w+7,_-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new En(w+7,_+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new En(w-7,_+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new En(w-7,_-7),!1,-1,-1).toResultPoint()}let c=be.round((i.getX()+u.getX()+o.getX()+l.getX())/4),f=be.round((i.getY()+u.getY()+o.getY()+l.getY())/4);try{let g=new zr(this.image,15,c,f).detect();i=g[0],o=g[1],l=g[2],u=g[3]}catch{i=this.getFirstDifferent(new En(c+7,f-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new En(c+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new En(c-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new En(c-7,f-7),!1,-1,-1).toResultPoint()}return c=be.round((i.getX()+u.getX()+o.getX()+l.getX())/4),f=be.round((i.getY()+u.getY()+o.getY()+l.getY())/4),new En(c,f)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,u,c){let f=Ir.getInstance(),g=this.getDimension(),w=g/2-this.nbCenterLayers,_=g/2+this.nbCenterLayers;return f.sampleGrid(i,g,g,w,w,_,w,_,_,w,_,o.getX(),o.getY(),l.getX(),l.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(i,o,l){let u=0,c=this.distanceResultPoint(i,o),f=c/l,g=i.getX(),w=i.getY(),_=f*(o.getX()-i.getX())/c,I=f*(o.getY()-i.getY())/c;for(let S=0;S<l;S++)this.image.get(be.round(g+S*_),be.round(w+S*I))&&(u|=1<<l-S-1);return u}isWhiteOrBlackRectangle(i,o,l,u){let c=3;i=new En(i.getX()-c,i.getY()+c),o=new En(o.getX()-c,o.getY()-c),l=new En(l.getX()+c,l.getY()-c),u=new En(u.getX()+c,u.getY()+c);let f=this.getColor(u,i);if(f===0)return!1;let g=this.getColor(i,o);return g!==f||(g=this.getColor(o,l),g!==f)?!1:(g=this.getColor(l,u),g===f)}getColor(i,o){let l=this.distancePoint(i,o),u=(o.getX()-i.getX())/l,c=(o.getY()-i.getY())/l,f=0,g=i.getX(),w=i.getY(),_=this.image.get(i.getX(),i.getY()),I=Math.ceil(l);for(let R=0;R<I;R++)g+=u,w+=c,this.image.get(be.round(g),be.round(w))!==_&&f++;let S=f/l;return S>.1&&S<.9?0:S<=.1===_?1:-1}getFirstDifferent(i,o,l,u){let c=i.getX()+l,f=i.getY()+u;for(;this.isValid(c,f)&&this.image.get(c,f)===o;)c+=l,f+=u;for(c-=l,f-=u;this.isValid(c,f)&&this.image.get(c,f)===o;)c+=l;for(c-=l;this.isValid(c,f)&&this.image.get(c,f)===o;)f+=u;return f-=u,new En(c,f)}expandSquare(i,o,l){let u=l/(2*o),c=i[0].getX()-i[2].getX(),f=i[0].getY()-i[2].getY(),g=(i[0].getX()+i[2].getX())/2,w=(i[0].getY()+i[2].getY())/2,_=new Ee(g+u*c,w+u*f),I=new Ee(g-u*c,w-u*f);c=i[1].getX()-i[3].getX(),f=i[1].getY()-i[3].getY(),g=(i[1].getX()+i[3].getX())/2,w=(i[1].getY()+i[3].getY())/2;let S=new Ee(g+u*c,w+u*f),R=new Ee(g-u*c,w-u*f);return[_,S,I,R]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=be.round(i.getX()),l=be.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return be.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return be.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class oo{decode(i,o=null){let l=null,u=new ec(i.getBlackMatrix()),c=null,f=null;try{let I=u.detectMirror(!1);c=I.getPoints(),this.reportFoundResultPoints(o,c),f=new ht().decode(I)}catch(I){l=I}if(f==null)try{let I=u.detectMirror(!0);c=I.getPoints(),this.reportFoundResultPoints(o,c),f=new ht().decode(I)}catch(I){throw l??I}let g=new at(f.getText(),f.getRawBytes(),f.getNumBits(),c,xe.AZTEC,U.currentTimeMillis()),w=f.getByteSegments();w!=null&&g.putMetadata(Lt.BYTE_SEGMENTS,w);let _=f.getECLevel();return _!=null&&g.putMetadata(Lt.ERROR_CORRECTION_LEVEL,_),g}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(re.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((u,c,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class tc extends wn{constructor(i=500){super(new oo,i)}}class mt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(re.TRY_HARDER)===!0&&i.isRotateSupported()){const c=i.rotateCounterClockwise(),f=this.doDecode(c,o),g=f.getResultMetadata();let w=270;g!==null&&g.get(Lt.ORIENTATION)===!0&&(w=w+g.get(Lt.ORIENTATION)%360),f.putMetadata(Lt.ORIENTATION,w);const _=f.getResultPoints();if(_!==null){const I=c.getHeight();for(let S=0;S<_.length;S++)_[S]=new Ee(I-_[S].getY()-1,_[S].getX())}return f}else throw new J}}reset(){}doDecode(i,o){const l=i.getWidth(),u=i.getHeight();let c=new q(l);const f=o&&o.get(re.TRY_HARDER)===!0,g=Math.max(1,u>>(f?8:5));let w;f?w=u:w=15;const _=Math.trunc(u/2);for(let I=0;I<w;I++){const S=Math.trunc((I+1)/2),R=(I&1)===0,B=_+g*(R?S:-S);if(B<0||B>=u)break;try{c=i.getBlackRow(B,c)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(c.reverse(),o&&o.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;o.forEach((Q,te)=>K.set(te,Q)),K.delete(re.NEED_RESULT_POINT_CALLBACK),o=K}try{const K=this.decodeRow(B,c,o);if(G===1){K.putMetadata(Lt.ORIENTATION,180);const Q=K.getResultPoints();Q!==null&&(Q[0]=new Ee(l-Q[0].getX()-1,Q[0].getY()),Q[1]=new Ee(l-Q[1].getX()-1,Q[1].getY()))}return K}catch{}}}throw new J}static recordPattern(i,o,l){const u=l.length;for(let _=0;_<u;_++)l[_]=0;const c=i.getSize();if(o>=c)throw new J;let f=!i.get(o),g=0,w=o;for(;w<c;){if(i.get(w)!==f)l[g]++;else{if(++g===u)break;l[g]=1,f=!f}w++}if(!(g===u||g===u-1&&w===c))throw new J}static recordPatternInReverse(i,o,l){let u=l.length,c=i.get(o);for(;o>0&&u>=0;)i.get(--o)!==c&&(u--,c=!c);if(u>=0)throw new J;mt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const u=i.length;let c=0,f=0;for(let _=0;_<u;_++)c+=i[_],f+=o[_];if(c<f)return Number.POSITIVE_INFINITY;const g=c/f;l*=g;let w=0;for(let _=0;_<u;_++){const I=i[_],S=o[_]*g,R=I>S?I-S:S-I;if(R>l)return Number.POSITIVE_INFINITY;w+=R}return w/c}}class ge extends mt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),f=l,g=!1;const w=6;for(let _=l;_<o;_++)if(i.get(_)!==g)c[u]++;else{if(u===w-1){let I=ge.MAX_AVG_VARIANCE,S=-1;for(let R=ge.CODE_START_A;R<=ge.CODE_START_C;R++){const B=mt.patternMatchVariance(c,ge.CODE_PATTERNS[R],ge.MAX_INDIVIDUAL_VARIANCE);B<I&&(I=B,S=R)}if(S>=0&&i.isRange(Math.max(0,f-(_-f)/2),f,!1))return Int32Array.from([f,_,S]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,g=!g}throw new J}static decodeCode(i,o,l){mt.recordPattern(i,l,o);let u=ge.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<ge.CODE_PATTERNS.length;f++){const g=ge.CODE_PATTERNS[f],w=this.patternMatchVariance(o,g,ge.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,c=f)}if(c>=0)return c;throw new J}decodeRow(i,o,l){const u=l&&l.get(re.ASSUME_GS1)===!0,c=ge.findStartPattern(o),f=c[2];let g=0;const w=new Uint8Array(20);w[g++]=f;let _;switch(f){case ge.CODE_START_A:_=ge.CODE_CODE_A;break;case ge.CODE_START_B:_=ge.CODE_CODE_B;break;case ge.CODE_START_C:_=ge.CODE_CODE_C;break;default:throw new P}let I=!1,S=!1,R="",B=c[0],G=c[1];const K=Int32Array.from([0,0,0,0,0,0]);let Q=0,te=0,fe=f,de=0,ue=!0,Xe=!1,Ue=!1;for(;!I;){const ca=S;switch(S=!1,Q=te,te=ge.decodeCode(o,K,G),w[g++]=te,te!==ge.CODE_STOP&&(ue=!0),te!==ge.CODE_STOP&&(de++,fe+=de*te),B=G,G+=K.reduce((fI,dI)=>fI+dI,0),te){case ge.CODE_START_A:case ge.CODE_START_B:case ge.CODE_START_C:throw new P}switch(_){case ge.CODE_CODE_A:if(te<64)Ue===Xe?R+=String.fromCharCode(32+te):R+=String.fromCharCode(32+te+128),Ue=!1;else if(te<96)Ue===Xe?R+=String.fromCharCode(te-64):R+=String.fromCharCode(te+64),Ue=!1;else switch(te!==ge.CODE_STOP&&(ue=!1),te){case ge.CODE_FNC_1:u&&(R.length===0?R+="]C1":R+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_A:!Xe&&Ue?(Xe=!0,Ue=!1):Xe&&Ue?(Xe=!1,Ue=!1):Ue=!0;break;case ge.CODE_SHIFT:S=!0,_=ge.CODE_CODE_B;break;case ge.CODE_CODE_B:_=ge.CODE_CODE_B;break;case ge.CODE_CODE_C:_=ge.CODE_CODE_C;break;case ge.CODE_STOP:I=!0;break}break;case ge.CODE_CODE_B:if(te<96)Ue===Xe?R+=String.fromCharCode(32+te):R+=String.fromCharCode(32+te+128),Ue=!1;else switch(te!==ge.CODE_STOP&&(ue=!1),te){case ge.CODE_FNC_1:u&&(R.length===0?R+="]C1":R+="");break;case ge.CODE_FNC_2:case ge.CODE_FNC_3:break;case ge.CODE_FNC_4_B:!Xe&&Ue?(Xe=!0,Ue=!1):Xe&&Ue?(Xe=!1,Ue=!1):Ue=!0;break;case ge.CODE_SHIFT:S=!0,_=ge.CODE_CODE_A;break;case ge.CODE_CODE_A:_=ge.CODE_CODE_A;break;case ge.CODE_CODE_C:_=ge.CODE_CODE_C;break;case ge.CODE_STOP:I=!0;break}break;case ge.CODE_CODE_C:if(te<100)te<10&&(R+="0"),R+=te;else switch(te!==ge.CODE_STOP&&(ue=!1),te){case ge.CODE_FNC_1:u&&(R.length===0?R+="]C1":R+="");break;case ge.CODE_CODE_A:_=ge.CODE_CODE_A;break;case ge.CODE_CODE_B:_=ge.CODE_CODE_B;break;case ge.CODE_STOP:I=!0;break}break}ca&&(_=_===ge.CODE_CODE_A?ge.CODE_CODE_B:ge.CODE_CODE_A)}const Kn=G-B;if(G=o.getNextUnset(G),!o.isRange(G,Math.min(o.getSize(),G+(G-B)/2),!1))throw new J;if(fe-=de*Q,fe%103!==Q)throw new O;const Wr=R.length;if(Wr===0)throw new J;Wr>0&&ue&&(_===ge.CODE_CODE_C?R=R.substring(0,Wr-2):R=R.substring(0,Wr-1));const qn=(c[1]+c[0])/2,pt=B+Kn/2,xn=w.length,hr=new Uint8Array(xn);for(let ca=0;ca<xn;ca++)hr[ca]=w[ca];const ua=[new Ee(qn,i),new Ee(pt,i)];return new at(R,hr,0,ua,xe.CODE_128,new Date().getTime())}}ge.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ge.MAX_AVG_VARIANCE=.25,ge.MAX_INDIVIDUAL_VARIANCE=.7,ge.CODE_SHIFT=98,ge.CODE_CODE_C=99,ge.CODE_CODE_B=100,ge.CODE_CODE_A=101,ge.CODE_FNC_1=102,ge.CODE_FNC_2=97,ge.CODE_FNC_3=96,ge.CODE_FNC_4_A=101,ge.CODE_FNC_4_B=100,ge.CODE_START_A=103,ge.CODE_START_B=104,ge.CODE_START_C=105,ge.CODE_STOP=106;class Rt extends mt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=Rt.findAsteriskPattern(o,u),f=o.getNextSet(c[1]),g=o.getSize(),w,_;do{Rt.recordPattern(o,f,u);let K=Rt.toNarrowWidePattern(u);if(K<0)throw new J;w=Rt.patternToChar(K),this.decodeRowResult+=w,_=f;for(let Q of u)f+=Q;f=o.getNextSet(f)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let K of u)I+=K;let S=f-_-I;if(f!==g&&S*2<I)throw new J;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,Q=0;for(let te=0;te<K;te++)Q+=Rt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(te));if(this.decodeRowResult.charAt(K)!==Rt.ALPHABET_STRING.charAt(Q%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new J;let R;this.extendedMode?R=Rt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let B=(c[1]+c[0])/2,G=_+I/2;return new at(R,null,0,[new Ee(B,i),new Ee(G,i)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),u=i.getNextSet(0),c=0,f=u,g=!1,w=o.length;for(let _=u;_<l;_++)if(i.get(_)!==g)o[c]++;else{if(c===w-1){if(this.toNarrowWidePattern(o)===Rt.ASTERISK_ENCODING&&i.isRange(Math.max(0,f-Math.floor((_-f)/2)),f,!1))return[f,_];f+=o[0]+o[1],o.copyWithin(0,2,2+c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,g=!g}throw new J}static toNarrowWidePattern(i){let o=i.length,l=0,u;do{let c=2147483647;for(let w of i)w<c&&w>l&&(c=w);l=c,u=0;let f=0,g=0;for(let w=0;w<o;w++){let _=i[w];_>l&&(g|=1<<o-1-w,u++,f+=_)}if(u===3){for(let w=0;w<o&&u>0;w++){let _=i[w];if(_>l&&(u--,_*2>=f))return-1}return g}}while(u>3);return-1}static patternToChar(i){for(let o=0;o<Rt.CHARACTER_ENCODINGS.length;o++)if(Rt.CHARACTER_ENCODINGS[o]===i)return Rt.ALPHABET_STRING.charAt(o);if(i===Rt.ASTERISK_ENCODING)return"*";throw new J}static decodeExtended(i){let o=i.length,l="";for(let u=0;u<o;u++){let c=i.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=i.charAt(u+1),g="\0";switch(c){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new P;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new P;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")g="\0";else if(f==="V")g="@";else if(f==="W")g="`";else if(f==="X"||f==="Y"||f==="Z")g="";else throw new P;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")g=":";else throw new P;break}l+=g,u++}else l+=c}return l}}Rt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Rt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Rt.ASTERISK_ENCODING=148;class $e extends mt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let u=this.decodeStart(o),c=this.decodeEnd(o),f=new z;$e.decodeMiddle(o,u[1],c[0],f);let g=f.toString(),w=null;l!=null&&(w=l.get(re.ALLOWED_LENGTHS)),w==null&&(w=$e.DEFAULT_ALLOWED_LENGTHS);let _=g.length,I=!1,S=0;for(let G of w){if(_===G){I=!0;break}G>S&&(S=G)}if(!I&&_>S&&(I=!0),!I)throw new P;const R=[new Ee(u[1],i),new Ee(c[0],i)];return new at(g,null,0,R,xe.ITF,new Date().getTime())}static decodeMiddle(i,o,l,u){let c=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(c.fill(0),f.fill(0),g.fill(0);o<l;){mt.recordPattern(i,o,c);for(let _=0;_<5;_++){let I=2*_;f[_]=c[I],g[_]=c[I+1]}let w=$e.decodeDigit(f);u.append(w.toString()),w=this.decodeDigit(g),u.append(w.toString()),c.forEach(function(_){o+=_})}}decodeStart(i){let o=$e.skipWhiteSpace(i),l=$e.findGuardPattern(i,o,$e.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let u=o-1;l>0&&u>=0&&!i.get(u);u--)l--;if(l!==0)throw new J}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new J;return l}decodeEnd(i){i.reverse();try{let o=$e.skipWhiteSpace(i),l;try{l=$e.findGuardPattern(i,o,$e.END_PATTERN_REVERSED[0])}catch(c){c instanceof J&&(l=$e.findGuardPattern(i,o,$e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let u=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-u,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let u=l.length,c=new Int32Array(u),f=i.getSize(),g=!1,w=0,_=o;c.fill(0);for(let I=o;I<f;I++)if(i.get(I)!==g)c[w]++;else{if(w===u-1){if(mt.patternMatchVariance(c,l,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE)return[_,I];_+=c[0]+c[1],U.arraycopy(c,2,c,0,w-1),c[w-1]=0,c[w]=0,w--}else w++;c[w]=1,g=!g}throw new J}static decodeDigit(i){let o=$e.MAX_AVG_VARIANCE,l=-1,u=$e.PATTERNS.length;for(let c=0;c<u;c++){let f=$e.PATTERNS[c],g=mt.patternMatchVariance(i,f,$e.MAX_INDIVIDUAL_VARIANCE);g<o?(o=g,l=c):g===o&&(l=-1)}if(l>=0)return l%10;throw new J}}$e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],$e.MAX_AVG_VARIANCE=.38,$e.MAX_INDIVIDUAL_VARIANCE=.5,$e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],$e.START_PATTERN=Int32Array.from([1,1,1,1]),$e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _t extends mt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,u=0,c=Int32Array.from([0,0,0]);for(;!o;){c=Int32Array.from([0,0,0]),l=_t.findGuardPattern(i,u,!1,this.START_END_PATTERN,c);let f=l[0];u=l[1];let g=f-(u-f);g>=0&&(o=i.isRange(g,f,!1))}return l}static checkChecksum(i){return _t.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return _t.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let u=o-1;u>=0;u-=2){let c=i.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new P;l+=c}l*=3;for(let u=o-2;u>=0;u-=2){let c=i.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new P;l+=c}return(1e3-l)%10}static decodeEnd(i,o){return _t.findGuardPattern(i,o,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,u){return this.findGuardPattern(i,o,l,u,new Int32Array(u.length))}static findGuardPattern(i,o,l,u,c){let f=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let g=0,w=o,_=u.length,I=l;for(let S=o;S<f;S++)if(i.get(S)!==I)c[g]++;else{if(g===_-1){if(mt.patternMatchVariance(c,u,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return Int32Array.from([w,S]);w+=c[0]+c[1];let R=c.slice(2,c.length-1);for(let B=0;B<g-1;B++)c[B]=R[B];c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,I=!I}throw new J}static decodeDigit(i,o,l,u){this.recordPattern(i,l,o);let c=this.MAX_AVG_VARIANCE,f=-1,g=u.length;for(let w=0;w<g;w++){let _=u[w],I=mt.patternMatchVariance(o,_,_t.MAX_INDIVIDUAL_VARIANCE);I<c&&(c=I,f=w)}if(f>=0)return f;throw new J}}_t.MAX_AVG_VARIANCE=.48,_t.MAX_INDIVIDUAL_VARIANCE=.7,_t.START_END_PATTERN=Int32Array.from([1,1,1]),_t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ni{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(o,l,u),f=u.toString(),g=ni.parseExtensionString(f),w=[new Ee((l[0]+l[1])/2,i),new Ee(c,i)],_=new at(f,null,0,w,xe.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&_.putAllMetadata(g),_}decodeMiddle(i,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=i.getSize(),f=o[1],g=0;for(let _=0;_<5&&f<c;_++){let I=_t.decodeDigit(i,u,f,_t.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let S of u)f+=S;I>=10&&(g|=1<<4-_),_!==4&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(l.length!==5)throw new J;let w=this.determineCheckDigit(g);if(ni.extensionChecksum(l.toString())!==w)throw new J;return f}static extensionChecksum(i){let o=i.length,l=0;for(let u=o-2;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;l*=3;for(let u=o-1;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new J}static parseExtensionString(i){if(i.length!==5)return null;let o=ni.parseExtension5String(i);return o==null?null:new Map([[Lt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),u=(l/100).toString(),c=l%100,f=c<10?"0"+c:c.toString();return o+u+"."+f}}class Qo{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(o,l,u),f=u.toString(),g=Qo.parseExtensionString(f),w=[new Ee((l[0]+l[1])/2,i),new Ee(c,i)],_=new at(f,null,0,w,xe.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&_.putAllMetadata(g),_}decodeMiddle(i,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=i.getSize(),f=o[1],g=0;for(let w=0;w<2&&f<c;w++){let _=_t.decodeDigit(i,u,f,_t.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let I of u)f+=I;_>=10&&(g|=1<<1-w),w!==1&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(l.length!==2)throw new J;if(parseInt(l.toString())%4!==g)throw new J;return f}static parseExtensionString(i){return i.length!==2?null:new Map([[Lt.ISSUE_NUMBER,parseInt(i)]])}}class us{static decodeRow(i,o,l){let u=_t.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ni().decodeRow(i,o,u)}catch{return new Qo().decodeRow(i,o,u)}}}us.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ze extends _t{constructor(){super(),this.decodeRowStringBuffer="",Ze.L_AND_G_PATTERNS=Ze.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=Ze.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let u=0;u<o.length;u++)l[u]=o[o.length-u-1];Ze.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let u=Ze.findStartGuardPattern(o),c=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ue=new Ee((u[0]+u[1])/2,i);c.foundPossibleResultPoint(ue)}let f=this.decodeMiddle(o,u,this.decodeRowStringBuffer),g=f.rowOffset,w=f.resultString;if(c!=null){const ue=new Ee(g,i);c.foundPossibleResultPoint(ue)}let _=this.decodeEnd(o,g);if(c!=null){const ue=new Ee((_[0]+_[1])/2,i);c.foundPossibleResultPoint(ue)}let I=_[1],S=I+(I-_[0]);if(S>=o.getSize()||!o.isRange(I,S,!1))throw new J;let R=w.toString();if(R.length<8)throw new P;if(!Ze.checkChecksum(R))throw new O;let B=(u[1]+u[0])/2,G=(_[1]+_[0])/2,K=this.getBarcodeFormat(),Q=[new Ee(B,i),new Ee(G,i)],te=new at(R,null,0,Q,K,new Date().getTime()),fe=0;try{let ue=us.decodeRow(i,o,_[1]);te.putMetadata(Lt.UPC_EAN_EXTENSION,ue.getText()),te.putAllMetadata(ue.getResultMetadata()),te.addResultPoints(ue.getResultPoints()),fe=ue.getText().length}catch{}let de=l==null?null:l.get(re.ALLOWED_EAN_EXTENSIONS);if(de!=null){let ue=!1;for(let Xe in de)if(fe.toString()===Xe){ue=!0;break}if(!ue)throw new J}return te}decodeEnd(i,o){return Ze.findGuardPattern(i,o,!1,Ze.START_END_PATTERN,new Int32Array(Ze.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Ze.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return Ze.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let u=o-1;u>=0;u-=2){let c=i.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new P;l+=c}l*=3;for(let u=o-2;u>=0;u-=2){let c=i.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new P;l+=c}return(1e3-l)%10}}class Nt extends Ze{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=i.getSize(),f=o[1],g=0;for(let _=0;_<6&&f<c;_++){let I=Ze.decodeDigit(i,u,f,Ze.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let S of u)f+=S;I>=10&&(g|=1<<5-_)}l=Nt.determineFirstDigit(l,g),f=Ze.findGuardPattern(i,f,!0,Ze.MIDDLE_PATTERN,new Int32Array(Ze.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&f<c;_++){let I=Ze.decodeDigit(i,u,f,Ze.L_PATTERNS);l+=String.fromCharCode(48+I);for(let S of u)f+=S}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new J}}Nt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class fl extends Ze{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=i.getSize(),f=o[1];for(let w=0;w<4&&f<c;w++){let _=Ze.decodeDigit(i,u,f,Ze.L_PATTERNS);l+=String.fromCharCode(48+_);for(let I of u)f+=I}f=Ze.findGuardPattern(i,f,!0,Ze.MIDDLE_PATTERN,new Int32Array(Ze.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&f<c;w++){let _=Ze.decodeDigit(i,u,f,Ze.L_PATTERNS);l+=String.fromCharCode(48+_);for(let I of u)f+=I}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return xe.EAN_8}}class cs extends Ze{constructor(){super(...arguments),this.ean13Reader=new Nt}getBarcodeFormat(){return xe.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new at(o.substring(1),null,null,i.getResultPoints(),xe.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new J}reset(){this.ean13Reader.reset()}}class _n extends Ze{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const u=this.decodeMiddleCounters.map(_=>_);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=i.getSize();let f=o[1],g=0;for(let _=0;_<6&&f<c;_++){const I=_n.decodeDigit(i,u,f,_n.L_AND_G_PATTERNS);l+=String.fromCharCode(48+I%10);for(let S of u)f+=S;I>=10&&(g|=1<<5-_)}let w=_n.determineNumSysAndCheckDigit(l,g);return{rowOffset:f,resultString:w}}decodeEnd(i,o){return _n.findGuardPatternWithoutCounters(i,o,!0,_n.MIDDLE_END_PATTERN)}checkChecksum(i){return Ze.checkChecksum(_n.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let c=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return c+i+f}throw J.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(c=>c.charCodeAt(0)),l=new z;l.append(i.charAt(0));let u=o[5];switch(u){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(u),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(u);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}_n.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_n.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class dl extends mt{constructor(i){super();let o=i==null?null:i.get(re.POSSIBLE_FORMATS),l=[];r(o)?(l.push(new Nt),l.push(new cs),l.push(new fl),l.push(new _n)):(o.indexOf(xe.EAN_13)>-1&&l.push(new Nt),o.indexOf(xe.UPC_A)>-1&&l.push(new cs),o.indexOf(xe.EAN_8)>-1&&l.push(new fl),o.indexOf(xe.UPC_E)>-1&&l.push(new _n)),this.readers=l}decodeRow(i,o,l){for(let u of this.readers)try{const c=u.decodeRow(i,o,l),f=c.getBarcodeFormat()===xe.EAN_13&&c.getText().charAt(0)==="0",g=l==null?null:l.get(re.POSSIBLE_FORMATS),w=g==null||g.includes(xe.UPC_A);if(f&&w){const _=c.getRawBytes(),I=new at(c.getText().substring(1),_,_?_.length:null,c.getResultPoints(),xe.UPC_A);return I.putAllMetadata(c.getResultMetadata()),I}return c}catch{}throw new J}reset(){for(let i of this.readers)i.reset()}}class cn extends mt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(mt.patternMatchVariance(i,o[l],cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return l;throw new J}static count(i){return be.sum(new Int32Array(i))}static increment(i,o){let l=0,u=o[0];for(let c=1;c<i.length;c++)o[c]>u&&(u=o[c],l=c);i[l]++}static decrement(i,o){let l=0,u=o[0];for(let c=1;c<i.length;c++)o[c]<u&&(u=o[c],l=c);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],u=o/l;if(u>=cn.MIN_FINDER_PATTERN_RATIO&&u<=cn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let g of i)g>f&&(f=g),g<c&&(c=g);return f<10*c}return!1}}cn.MAX_AVG_VARIANCE=.2,cn.MAX_INDIVIDUAL_VARIANCE=.45,cn.MIN_FINDER_PATTERN_RATIO=9.5/12,cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ir{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof ir))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class $o{constructor(i,o,l,u,c){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ee(l,c)),this.resultPoints.push(new Ee(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof $o))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Cr{constructor(){}static getRSSvalue(i,o,l){let u=0;for(let w of i)u+=w;let c=0,f=0,g=i.length;for(let w=0;w<g-1;w++){let _;for(_=1,f|=1<<w;_<i[w];_++,f&=~(1<<w)){let I=Cr.combins(u-_-1,g-w-2);if(l&&f===0&&u-_-(g-w-1)>=g-w-1&&(I-=Cr.combins(u-_-(g-w),g-w-2)),g-w-1>1){let S=0;for(let R=u-_-(g-w-2);R>o;R--)S+=Cr.combins(u-_-R-1,g-w-3);I-=S*(g-1-w)}else u-_>o&&I--;c+=I}u-=_}return c}static combins(i,o){let l,u;i-o>o?(u=o,l=i-o):(u=i-o,l=o);let c=1,f=1;for(let g=i;g>l;g--)c*=g,f<=u&&(c/=f,f++);for(;f<=u;)c/=f,f++;return c}}class Zo{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,u=new q(l),c=0,g=i[0].getRightChar().getValue();for(let w=11;w>=0;--w)g&1<<w&&u.set(c),c++;for(let w=1;w<i.length;++w){let _=i[w],I=_.getLeftChar().getValue();for(let S=11;S>=0;--S)I&1<<S&&u.set(c),c++;if(_.getRightChar()!=null){let S=_.getRightChar().getValue();for(let R=11;R>=0;--R)S&1<<R&&u.set(c),c++}}return u}}class ri{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Jo{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class hn extends Jo{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===hn.FNC1}}hn.FNC1="$";class sr extends Jo{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Wn extends Jo{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new P;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Wn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Wn.FNC1}isAnyFNC1(){return this.firstDigit===Wn.FNC1||this.secondDigit===Wn.FNC1}}Wn.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new J;let o=i.substring(0,2);for(let c of me.TWO_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,c[2],i):me.processFixedAI(2,c[1],i);if(i.length<3)throw new J;let l=i.substring(0,3);for(let c of me.THREE_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,c[2],i):me.processFixedAI(3,c[1],i);for(let c of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,c[2],i):me.processFixedAI(4,c[1],i);if(i.length<4)throw new J;let u=i.substring(0,4);for(let c of me.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,c[2],i):me.processFixedAI(4,c[1],i);throw new J}static processFixedAI(i,o,l){if(l.length<i)throw new J;let u=l.substring(0,i);if(l.length<i+o)throw new J;let c=l.substring(i,i+o),f=l.substring(i+o),g="("+u+")"+c,w=me.parseFieldsInGeneralPurpose(f);return w==null?g:g+w}static processVariableAI(i,o,l){let u=l.substring(0,i),c;l.length<i+o?c=l.length:c=i+o;let f=l.substring(i,c),g=l.substring(c),w="("+u+")"+f,_=me.parseFieldsInGeneralPurpose(g);return _==null?w:w+_}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class ki{constructor(i){this.buffer=new z,this.information=i}decodeAllCodes(i,o){let l=o,u=null;do{let c=this.decodeGeneralPurposeField(l,u),f=me.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&i.append(f),c.isRemaining()?u=""+c.getRemainingValue():u=null,l===c.getNewPosition())break;l=c.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(i,4);return c===0?new Wn(this.information.getSize(),Wn.FNC1,Wn.FNC1):new Wn(this.information.getSize(),c-1,Wn.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,u=(o-8)%11;return new Wn(i+7,l,u)}extractNumericValueFromBitArray(i,o){return ki.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let u=0;for(let c=0;c<l;++c)i.get(o+c)&&(u|=1<<l-c-1);return u}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new sr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new sr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new sr(this.current.getPosition(),this.buffer.toString()):o=new sr(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new ri(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new sr(this.current.getPosition(),this.buffer.toString());return new ri(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ri(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new sr(this.current.getPosition(),this.buffer.toString());return new ri(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ri(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new sr(this.current.getPosition(),this.buffer.toString());return new ri(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ri(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new hn(i+5,hn.FNC1);if(o>=5&&o<15)return new hn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new hn(i+7,""+(l+1));if(l>=90&&l<116)return new hn(i+7,""+(l+7));let u=this.extractNumericValueFromBitArray(i,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new P}return new hn(i+8,c)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new hn(i+5,hn.FNC1);if(o>=5&&o<15)return new hn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new hn(i+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Ar("Decoding invalid alphanumeric value: "+l)}return new hn(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class ea{constructor(i){this.information=i,this.generalDecoder=new ki(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class fn extends ea{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*u,10);c/100===0&&i.append("0"),c/10===0&&i.append("0"),i.append(c)}fn.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let u=0;u<13;u++){let c=i.charAt(u+o).charCodeAt(0)-48;l+=u&1?c:3*c}l=10-l%10,l===10&&(l=0),i.append(l)}}fn.GTIN_SIZE=40;class ii extends fn{constructor(i){super(i)}parseInformation(){let i=new z;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ii.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,ii.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,ii.HEADER_SIZE+44)}}ii.HEADER_SIZE=4;class ao extends ea{constructor(i){super(i)}parseInformation(){let i=new z;return this.getGeneralDecoder().decodeAllCodes(i,ao.HEADER_SIZE)}}ao.HEADER_SIZE=5;class ta extends fn{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,u);let c=this.checkWeight(u),f=1e5;for(let g=0;g<5;++g)c/f===0&&i.append("0"),f/=10;i.append(c)}}class or extends ta{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=or.HEADER_SIZE+ta.GTIN_SIZE+or.WEIGHT_SIZE)throw new J;let i=new z;return this.encodeCompressedGtin(i,or.HEADER_SIZE),this.encodeCompressedWeight(i,or.HEADER_SIZE+ta.GTIN_SIZE,or.WEIGHT_SIZE),i.toString()}}or.HEADER_SIZE=5,or.WEIGHT_SIZE=15;class $f extends or{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class na extends or{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ar extends fn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ar.HEADER_SIZE+fn.GTIN_SIZE)throw new J;let i=new z;this.encodeCompressedGtin(i,ar.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(ar.HEADER_SIZE+fn.GTIN_SIZE,ar.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(ar.HEADER_SIZE+fn.GTIN_SIZE+ar.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}ar.HEADER_SIZE=8,ar.LAST_DIGIT_SIZE=2;class tn extends fn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<tn.HEADER_SIZE+fn.GTIN_SIZE)throw new J;let i=new z;this.encodeCompressedGtin(i,tn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+fn.GTIN_SIZE,tn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+fn.GTIN_SIZE+tn.LAST_DIGIT_SIZE,tn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(tn.HEADER_SIZE+fn.GTIN_SIZE+tn.LAST_DIGIT_SIZE+tn.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}tn.HEADER_SIZE=8,tn.LAST_DIGIT_SIZE=2,tn.FIRST_THREE_DIGITS_SIZE=10;class lt extends ta{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=lt.HEADER_SIZE+lt.GTIN_SIZE+lt.WEIGHT_SIZE+lt.DATE_SIZE)throw new J;let i=new z;return this.encodeCompressedGtin(i,lt.HEADER_SIZE),this.encodeCompressedWeight(i,lt.HEADER_SIZE+lt.GTIN_SIZE,lt.WEIGHT_SIZE),this.encodeCompressedDate(i,lt.HEADER_SIZE+lt.GTIN_SIZE+lt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,lt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=l%32;l/=32;let c=l%12+1;l/=12;let f=l;f/10==0&&i.append("0"),i.append(f),c/10==0&&i.append("0"),i.append(c),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}lt.HEADER_SIZE=8,lt.WEIGHT_SIZE=20,lt.DATE_SIZE=16;function si(T){try{if(T.get(1))return new ii(T);if(!T.get(2))return new ao(T);switch(ki.extractNumericValueFromBitArray(T,1,4)){case 4:return new $f(T);case 5:return new na(T)}switch(ki.extractNumericValueFromBitArray(T,1,5)){case 12:return new ar(T);case 13:return new tn(T)}switch(ki.extractNumericValueFromBitArray(T,1,7)){case 56:return new lt(T,"310","11");case 57:return new lt(T,"320","11");case 58:return new lt(T,"310","13");case 59:return new lt(T,"320","13");case 60:return new lt(T,"310","15");case 61:return new lt(T,"320","15");case 62:return new lt(T,"310","17");case 63:return new lt(T,"320","17")}}catch(i){throw console.log(i),new Ar("unknown decoder: "+T)}}class vr{constructor(i,o,l,u){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof vr?vr.equalsOrNull(i.leftchar,o.leftchar)&&vr.equalsOrNull(i.rightchar,o.rightchar)&&vr.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:vr.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class gl{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof gl?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((u,c)=>{o.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class ae extends cn{constructor(i){super(...arguments),this.pairs=new Array(ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return ae.constructResult(this.decodeRow2pairs(i,o))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ae.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(c){if(c instanceof J){if(!this.pairs.length)throw new J;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new J}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of i)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(i);c.push(u);try{return this.checkRows(c,l+1)}catch(f){this.verbose&&console.log(f)}}throw new J}static isValidSequence(i){for(let o of ae.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=o[u]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,u=!1,c=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>i){c=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}c||u||ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new gl(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let u of l.getPairs())for(let c of i)if(vr.equals(u,c))break}}static isPartialRow(i,o){for(let l of o){let u=!0;for(let c of i){let f=!1;for(let g of l.getPairs())if(c.equals(g)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=Zo.buildBitArray(i),u=si(o).parseInformation(),c=i[0].getFinderPattern().getResultPoints(),f=i[i.length-1].getFinderPattern().getResultPoints(),g=[c[0],c[1],f[0],f[1]];return new at(u,null,null,g,xe.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),c=2;for(let g=1;g<this.pairs.size();++g){let w=this.pairs.get(g);u+=w.getLeftChar().getChecksumPortion(),c++;let _=w.getRightChar();_!=null&&(u+=_.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let u=o.length%2==0;this.startFromEven&&(u=!u);let c,f=!0,g=-1;do this.findNextPair(i,o,g),c=this.parseFoundFinderPattern(i,l,u),c==null?g=ae.getNextSecondBar(i,this.startEnd[0]):f=!1;while(f);let w=this.decodeDataCharacter(i,c,u,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new J;let _;try{_=this.decodeDataCharacter(i,c,u,!1)}catch(I){_=null,this.verbose&&console.log(I)}return new vr(w,_,c,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=i.getSize(),f;l>=0?f=l:this.isEmptyPair(o)?f=0:f=o[o.length-1].getFinderPattern().getStartEnd()[1];let g=o.length%2!=0;this.startFromEven&&(g=!g);let w=!1;for(;f<c&&(w=!i.get(f),!!w);)f++;let _=0,I=f;for(let S=f;S<c;S++)if(i.get(S)!=w)u[_]++;else{if(_==3){if(g&&ae.reverseCounters(u),ae.isFinderPattern(u)){this.startEnd[0]=I,this.startEnd[1]=S;return}g&&ae.reverseCounters(u),I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,_--}else _++;u[_]=1,w=!w}throw new J}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let u=i[l];i[l]=i[o-l-1],i[o-l-1]=u}}parseFoundFinderPattern(i,o,l){let u,c,f;if(l){let _=this.startEnd[0]-1;for(;_>=0&&!i.get(_);)_--;_++,u=this.startEnd[0]-_,c=_,f=this.startEnd[1]}else c=this.startEnd[0],f=i.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let g=this.getDecodeFinderCounters();U.arraycopy(g,0,g,1,g.length-1),g[0]=u;let w;try{w=this.parseFinderValue(g,ae.FINDER_PATTERNS)}catch{return null}return new $o(w,[c,f],c,f,o)}decodeDataCharacter(i,o,l,u){let c=this.getDataCharacterCounters();for(let pt=0;pt<c.length;pt++)c[pt]=0;if(u)ae.recordPatternInReverse(i,o.getStartEnd()[0],c);else{ae.recordPattern(i,o.getStartEnd()[1],c);for(let pt=0,xn=c.length-1;pt<xn;pt++,xn--){let hr=c[pt];c[pt]=c[xn],c[xn]=hr}}let f=17,g=be.sum(new Int32Array(c))/f,w=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(g-w)/w>.3)throw new J;let _=this.getOddCounts(),I=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let pt=0;pt<c.length;pt++){let xn=1*c[pt]/g,hr=xn+.5;if(hr<1){if(xn<.3)throw new J;hr=1}else if(hr>8){if(xn>8.7)throw new J;hr=8}let ua=pt/2;pt&1?(I[ua]=hr,R[ua]=xn-hr):(_[ua]=hr,S[ua]=xn-hr)}this.adjustOddEvenCounts(f);let B=4*o.getValue()+(l?0:2)+(u?0:1)-1,G=0,K=0;for(let pt=_.length-1;pt>=0;pt--){if(ae.isNotA1left(o,l,u)){let xn=ae.WEIGHTS[B][2*pt];K+=_[pt]*xn}G+=_[pt]}let Q=0;for(let pt=I.length-1;pt>=0;pt--)if(ae.isNotA1left(o,l,u)){let xn=ae.WEIGHTS[B][2*pt+1];Q+=I[pt]*xn}let te=K+Q;if(G&1||G>13||G<4)throw new J;let fe=(13-G)/2,de=ae.SYMBOL_WIDEST[fe],ue=9-de,Xe=Cr.getRSSvalue(_,de,!0),Ue=Cr.getRSSvalue(I,ue,!1),Kn=ae.EVEN_TOTAL_SUBSET[fe],Wr=ae.GSUM[fe],qn=Xe*Kn+Ue+Wr;return new ir(qn,te)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=be.sum(new Int32Array(this.getOddCounts())),l=be.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;o>13?c=!0:o<4&&(u=!0);let f=!1,g=!1;l>13?g=!0:l<4&&(f=!0);let w=o+l-i,_=(o&1)==1,I=(l&1)==0;if(w==1)if(_){if(I)throw new J;c=!0}else{if(!I)throw new J;g=!0}else if(w==-1)if(_){if(I)throw new J;u=!0}else{if(!I)throw new J;f=!0}else if(w==0){if(_){if(!I)throw new J;o<l?(u=!0,g=!0):(c=!0,f=!0)}else if(I)throw new J}else throw new J;if(u){if(c)throw new J;ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new J;ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ae.SYMBOL_WIDEST=[7,5,4,3,1],ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ae.GSUM=[0,348,1388,2948,3988],ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ae.FINDER_PAT_A=0,ae.FINDER_PAT_B=1,ae.FINDER_PAT_C=2,ae.FINDER_PAT_D=3,ae.FINDER_PAT_E=4,ae.FINDER_PAT_F=5,ae.FINDER_PATTERN_SEQUENCES=[[ae.FINDER_PAT_A,ae.FINDER_PAT_A],[ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B],[ae.FINDER_PAT_A,ae.FINDER_PAT_C,ae.FINDER_PAT_B,ae.FINDER_PAT_D],[ae.FINDER_PAT_A,ae.FINDER_PAT_E,ae.FINDER_PAT_B,ae.FINDER_PAT_D,ae.FINDER_PAT_C],[ae.FINDER_PAT_A,ae.FINDER_PAT_E,ae.FINDER_PAT_B,ae.FINDER_PAT_D,ae.FINDER_PAT_D,ae.FINDER_PAT_F],[ae.FINDER_PAT_A,ae.FINDER_PAT_E,ae.FINDER_PAT_B,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_F,ae.FINDER_PAT_F],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_D],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_E],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_F,ae.FINDER_PAT_F],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_E,ae.FINDER_PAT_F,ae.FINDER_PAT_F]],ae.MAX_PAIRS=11;class nc extends ir{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class xt extends cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const u=this.decodePair(o,!1,i,l);xt.addOrTally(this.possibleLeftPairs,u),o.reverse();let c=this.decodePair(o,!0,i,l);xt.addOrTally(this.possibleRightPairs,c),o.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&xt.checkChecksum(f,g))return xt.constructResult(f,g)}throw new J}static addOrTally(i,o){if(o==null)return;let l=!1;for(let u of i)if(u.getValue()===o.getValue()){u.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),u=new String(l).toString(),c=new z;for(let _=13-u.length;_>0;_--)c.append("0");c.append(u);let f=0;for(let _=0;_<13;_++){let I=c.charAt(_).charCodeAt(0)-48;f+=_&1?I:3*I}f=10-f%10,f===10&&(f=0),c.append(f.toString());let g=i.getFinderPattern().getResultPoints(),w=o.getFinderPattern().getResultPoints();return new at(c.toString(),null,0,[g[0],g[1],w[0],w[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(i,o,l,u){try{let c=this.findFinderPattern(i,o),f=this.parseFoundFinderPattern(i,l,o,c),g=u==null?null:u.get(re.NEED_RESULT_POINT_CALLBACK);if(g!=null){let I=(c[0]+c[1])/2;o&&(I=i.getSize()-1-I),g.foundPossibleResultPoint(new Ee(I,l))}let w=this.decodeDataCharacter(i,f,!0),_=this.decodeDataCharacter(i,f,!1);return new nc(1597*w.getValue()+_.getValue(),w.getChecksumPortion()+4*_.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(i,o,l){let u=this.getDataCharacterCounters();for(let Q=0;Q<u.length;Q++)u[Q]=0;if(l)mt.recordPatternInReverse(i,o.getStartEnd()[0],u);else{mt.recordPattern(i,o.getStartEnd()[1]+1,u);for(let Q=0,te=u.length-1;Q<te;Q++,te--){let fe=u[Q];u[Q]=u[te],u[te]=fe}}let c=l?16:15,f=be.sum(new Int32Array(u))/c,g=this.getOddCounts(),w=this.getEvenCounts(),_=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Q=0;Q<u.length;Q++){let te=u[Q]/f,fe=Math.floor(te+.5);fe<1?fe=1:fe>8&&(fe=8);let de=Math.floor(Q/2);Q&1?(w[de]=fe,I[de]=te-fe):(g[de]=fe,_[de]=te-fe)}this.adjustOddEvenCounts(l,c);let S=0,R=0;for(let Q=g.length-1;Q>=0;Q--)R*=9,R+=g[Q],S+=g[Q];let B=0,G=0;for(let Q=w.length-1;Q>=0;Q--)B*=9,B+=w[Q],G+=w[Q];let K=R+3*B;if(l){if(S&1||S>12||S<4)throw new J;let Q=(12-S)/2,te=xt.OUTSIDE_ODD_WIDEST[Q],fe=9-te,de=Cr.getRSSvalue(g,te,!1),ue=Cr.getRSSvalue(w,fe,!0),Xe=xt.OUTSIDE_EVEN_TOTAL_SUBSET[Q],Ue=xt.OUTSIDE_GSUM[Q];return new ir(de*Xe+ue+Ue,K)}else{if(G&1||G>10||G<4)throw new J;let Q=(10-G)/2,te=xt.INSIDE_ODD_WIDEST[Q],fe=9-te,de=Cr.getRSSvalue(g,te,!0),ue=Cr.getRSSvalue(w,fe,!1),Xe=xt.INSIDE_ODD_TOTAL_SUBSET[Q],Ue=xt.INSIDE_GSUM[Q];return new ir(ue*Xe+de+Ue,K)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),c=!1,f=0;for(;f<u&&(c=!i.get(f),o!==c);)f++;let g=0,w=f;for(let _=f;_<u;_++)if(i.get(_)!==c)l[g]++;else{if(g===3){if(cn.isFinderPattern(l))return[w,_];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,g--}else g++;l[g]=1,c=!c}throw new J}parseFoundFinderPattern(i,o,l,u){let c=i.get(u[0]),f=u[0]-1;for(;f>=0&&c!==i.get(f);)f--;f++;const g=u[0]-f,w=this.getDecodeFinderCounters(),_=new Int32Array(w.length);U.arraycopy(w,0,_,1,w.length-1),_[0]=g;const I=this.parseFinderValue(_,xt.FINDER_PATTERNS);let S=f,R=u[1];return l&&(S=i.getSize()-1-S,R=i.getSize()-1-R),new $o(I,[f,u[1]],S,R,o)}adjustOddEvenCounts(i,o){let l=be.sum(new Int32Array(this.getOddCounts())),u=be.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,g=!1,w=!1;i?(l>12?f=!0:l<4&&(c=!0),u>12?w=!0:u<4&&(g=!0)):(l>11?f=!0:l<5&&(c=!0),u>10?w=!0:u<4&&(g=!0));let _=l+u-o,I=(l&1)===(i?1:0),S=(u&1)===1;if(_===1)if(I){if(S)throw new J;f=!0}else{if(!S)throw new J;w=!0}else if(_===-1)if(I){if(S)throw new J;c=!0}else{if(!S)throw new J;g=!0}else if(_===0){if(I){if(!S)throw new J;l<u?(c=!0,w=!0):(f=!0,g=!0)}else if(S)throw new J}else throw new J;if(c){if(f)throw new J;cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(w)throw new J;cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}xt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],xt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],xt.OUTSIDE_GSUM=[0,161,961,2015,2715],xt.INSIDE_GSUM=[0,336,1036,1516],xt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],xt.INSIDE_ODD_WIDEST=[2,4,6,8],xt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class oi extends mt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(re.POSSIBLE_FORMATS):null,u=i&&i.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(xe.EAN_13)||l.includes(xe.UPC_A)||l.includes(xe.EAN_8)||l.includes(xe.UPC_E))&&this.readers.push(new dl(i)),l.includes(xe.CODE_39)&&this.readers.push(new Rt(u)),l.includes(xe.CODE_128)&&this.readers.push(new ge),l.includes(xe.ITF)&&this.readers.push(new $e),l.includes(xe.RSS_14)&&this.readers.push(new xt),l.includes(xe.RSS_EXPANDED)&&this.readers.push(new ae(this.verbose))):(this.readers.push(new dl(i)),this.readers.push(new Rt),this.readers.push(new dl(i)),this.readers.push(new ge),this.readers.push(new $e),this.readers.push(new xt),this.readers.push(new ae(this.verbose)))}decodeRow(i,o,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,o,l)}catch{}throw new J}reset(){this.readers.forEach(i=>i.reset())}}class pl extends wn{constructor(i=500,o){super(new oi(o),i,o)}}class nt{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Je{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class je{constructor(i,o,l,u,c,f){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=f;let g=0;const w=f.getECCodewords(),_=f.getECBlocks();for(let I of _)g+=I.getCount()*(I.getDataCodewords()+w);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if(i&1||o&1)throw new P;for(let l of je.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new je(1,10,10,8,8,new nt(5,new Je(1,3))),new je(2,12,12,10,10,new nt(7,new Je(1,5))),new je(3,14,14,12,12,new nt(10,new Je(1,8))),new je(4,16,16,14,14,new nt(12,new Je(1,12))),new je(5,18,18,16,16,new nt(14,new Je(1,18))),new je(6,20,20,18,18,new nt(18,new Je(1,22))),new je(7,22,22,20,20,new nt(20,new Je(1,30))),new je(8,24,24,22,22,new nt(24,new Je(1,36))),new je(9,26,26,24,24,new nt(28,new Je(1,44))),new je(10,32,32,14,14,new nt(36,new Je(1,62))),new je(11,36,36,16,16,new nt(42,new Je(1,86))),new je(12,40,40,18,18,new nt(48,new Je(1,114))),new je(13,44,44,20,20,new nt(56,new Je(1,144))),new je(14,48,48,22,22,new nt(68,new Je(1,174))),new je(15,52,52,24,24,new nt(42,new Je(2,102))),new je(16,64,64,14,14,new nt(56,new Je(2,140))),new je(17,72,72,16,16,new nt(36,new Je(4,92))),new je(18,80,80,18,18,new nt(48,new Je(4,114))),new je(19,88,88,20,20,new nt(56,new Je(4,144))),new je(20,96,96,22,22,new nt(68,new Je(4,174))),new je(21,104,104,24,24,new nt(56,new Je(6,136))),new je(22,120,120,18,18,new nt(68,new Je(6,175))),new je(23,132,132,20,20,new nt(62,new Je(8,163))),new je(24,144,144,22,22,new nt(62,new Je(8,156),new Je(2,155))),new je(25,8,18,6,16,new nt(7,new Je(1,5))),new je(26,8,32,6,14,new nt(11,new Je(1,10))),new je(27,12,26,10,24,new nt(14,new Je(1,16))),new je(28,12,36,10,16,new nt(18,new Je(1,22))),new je(29,16,36,14,16,new nt(24,new Je(1,32))),new je(30,16,48,14,22,new nt(28,new Je(1,49)))]}}je.VERSIONS=je.buildVersions();class ml{constructor(i){const o=i.getHeight();if(o<8||o>144||o&1)throw new P;this.version=ml.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return je.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,u=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let g=!1,w=!1,_=!1,I=!1;do if(l===c&&u===0&&!g)i[o++]=this.readCorner1(c,f)&255,l-=2,u+=2,g=!0;else if(l===c-2&&u===0&&f&3&&!w)i[o++]=this.readCorner2(c,f)&255,l-=2,u+=2,w=!0;else if(l===c+4&&u===2&&!(f&7)&&!_)i[o++]=this.readCorner3(c,f)&255,l-=2,u+=2,_=!0;else if(l===c-2&&u===0&&(f&7)===4&&!I)i[o++]=this.readCorner4(c,f)&255,l-=2,u+=2,I=!0;else{do l<c&&u>=0&&!this.readMappingMatrix.get(u,l)&&(i[o++]=this.readUtah(l,u,c,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(i[o++]=this.readUtah(l,u,c,f)&255),l+=2,u-=2;while(l<c&&u>=0);l+=3,u+=1}while(l<c||u<f);if(o!==this.version.getTotalCodewords())throw new P;return i}readModule(i,o,l,u){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,u){let c=0;return this.readModule(i-2,o-2,l,u)&&(c|=1),c<<=1,this.readModule(i-2,o-1,l,u)&&(c|=1),c<<=1,this.readModule(i-1,o-2,l,u)&&(c|=1),c<<=1,this.readModule(i-1,o-1,l,u)&&(c|=1),c<<=1,this.readModule(i-1,o,l,u)&&(c|=1),c<<=1,this.readModule(i,o-2,l,u)&&(c|=1),c<<=1,this.readModule(i,o-1,l,u)&&(c|=1),c<<=1,this.readModule(i,o,l,u)&&(c|=1),c}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new x("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=o/u|0,g=l/c|0,w=f*u,_=g*c,I=new Le(_,w);for(let S=0;S<f;++S){const R=S*u;for(let B=0;B<g;++B){const G=B*c;for(let K=0;K<u;++K){const Q=S*(u+2)+1+K,te=R+K;for(let fe=0;fe<c;++fe){const de=B*(c+2)+1+fe;if(i.get(de,Q)){const ue=G+fe;I.set(ue,te)}}}}}return I}}class Tr{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let u=0;const c=l.getECBlocks();for(let K of c)u+=K.getCount();const f=new Array(u);let g=0;for(let K of c)for(let Q=0;Q<K.getCount();Q++){const te=K.getDataCodewords(),fe=l.getECCodewords()+te;f[g++]=new Tr(te,new Uint8Array(fe))}const _=f[0].codewords.length-l.getECCodewords(),I=_-1;let S=0;for(let K=0;K<I;K++)for(let Q=0;Q<g;Q++)f[Q].codewords[K]=i[S++];const R=o.getVersionNumber()===24,B=R?8:g;for(let K=0;K<B;K++)f[K].codewords[_-1]=i[S++];const G=f[0].codewords.length;for(let K=_;K<G;K++)for(let Q=0;Q<g;Q++){const te=R?(Q+8)%g:Q,fe=R&&te>7?K-1:K;f[te].codewords[fe]=i[S++]}if(S!==i.length)throw new x;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Gn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new x(""+i);let o=0,l=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(l>0){const f=8-l,g=i<f?i:f,w=f-g,_=255>>8-g<<w;o=(c[u]&_)>>w,i-=g,l+=g,l===8&&(l=0,u++)}if(i>0){for(;i>=8;)o=o<<8|c[u]&255,u++,i-=8;if(i>0){const f=8-i,g=255>>f<<f;o=o<<i|(c[u]&g)>>f,l+=i}}return this.bitOffset=l,this.byteOffset=u,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var At;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(At||(At={}));class Xn{static decode(i){const o=new Gn(i),l=new z,u=new z,c=new Array;let f=At.ASCII_ENCODE;do if(f===At.ASCII_ENCODE)f=this.decodeAsciiSegment(o,l,u);else{switch(f){case At.C40_ENCODE:this.decodeC40Segment(o,l);break;case At.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case At.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case At.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case At.BASE256_ENCODE:this.decodeBase256Segment(o,l,c);break;default:throw new P}f=At.ASCII_ENCODE}while(f!==At.PAD_ENCODE&&o.available()>0);return u.length()>0&&l.append(u.toString()),new ls(i,l.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(i,o,l){let u=!1;do{let c=i.readBits(8);if(c===0)throw new P;if(c<=128)return u&&(c+=128),o.append(String.fromCharCode(c-1)),At.ASCII_ENCODE;if(c===129)return At.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&o.append("0"),o.append(""+f)}else switch(c){case 230:return At.C40_ENCODE;case 231:return At.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return At.ANSIX12_ENCODE;case 239:return At.TEXT_ENCODE;case 240:return At.EDIFACT_ENCODE;case 241:break;default:if(c!==254||i.available()!==0)throw new P;break}}while(i.available()>0);return At.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const u=[];let c=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),u);for(let g=0;g<3;g++){const w=u[g];switch(c){case 0:if(w<3)c=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[w];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else throw new P;break;case 1:l?(o.append(String.fromCharCode(w+128)),l=!1):o.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[w];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else switch(w){case 27:o.append("");break;case 30:l=!0;break;default:throw new P}c=0;break;case 3:l?(o.append(String.fromCharCode(w+224)),l=!1):o.append(String.fromCharCode(w+96)),c=0;break;default:throw new P}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,u=[],c=0;do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),u);for(let g=0;g<3;g++){const w=u[g];switch(c){case 0:if(w<3)c=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[w];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else throw new P;break;case 1:l?(o.append(String.fromCharCode(w+128)),l=!1):o.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[w];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_)}else switch(w){case 27:o.append("");break;case 30:l=!0;break;default:throw new P}c=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[w];l?(o.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):o.append(_),c=0}else throw new P;break;default:throw new P}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),l);for(let c=0;c<3;c++){const f=l[c];switch(f){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(f<14)o.append(String.fromCharCode(f+44));else if(f<40)o.append(String.fromCharCode(f+51));else throw new P;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let u=(i<<8)+o-1,c=Math.floor(u/1600);l[0]=c,u-=c*1600,c=Math.floor(u/40),l[1]=c,l[2]=u-c*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let u=i.readBits(6);if(u===31){const c=8-i.getBitOffset();c!==8&&i.readBits(c);return}u&32||(u|=64),o.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let u=1+i.getByteOffset();const c=this.unrandomize255State(i.readBits(8),u++);let f;if(c===0?f=i.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(i.readBits(8),u++),f<0)throw new P;const g=new Uint8Array(f);for(let w=0;w<f;w++){if(i.available()<8)throw new P;g[w]=this.unrandomize255State(i.readBits(8),u++)}l.push(g);try{o.append(W.decode(g,X.ISO88591))}catch(w){throw new Ar("Platform does not support required encoding: "+w.message)}}static unrandomize255State(i,o){const l=149*o%255+1,u=i-l;return u>=0?u:u+256}}Xn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Xn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Xn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Xn.TEXT_SHIFT2_SET_CHARS=Xn.C40_SHIFT2_SET_CHARS,Xn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class yl{constructor(){this.rsDecoder=new Oi(Qe.DATA_MATRIX_FIELD_256)}decode(i){const o=new ml(i),l=o.getVersion(),u=o.readCodewords(),c=Tr.getDataBlocks(u,l);let f=0;for(let _ of c)f+=_.getNumDataCodewords();const g=new Uint8Array(f),w=c.length;for(let _=0;_<w;_++){const I=c[_],S=I.getCodewords(),R=I.getNumDataCodewords();this.correctErrors(S,R);for(let B=0;B<R;B++)g[B*w+_]=S[B]}return Xn.decode(g)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new O}for(let u=0;u<o;u++)i[u]=l[u]}}class Oe{constructor(i){this.image=i,this.rectangleDetector=new zr(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new J;o=this.shiftToModuleCenter(o);const l=o[0],u=o[1],c=o[2],f=o[3];let g=this.transitionsBetween(l,f)+1,w=this.transitionsBetween(c,f)+1;(g&1)===1&&(g+=1),(w&1)===1&&(w+=1),4*g<7*w&&4*w<7*g&&(g=w=Math.max(g,w));let _=Oe.sampleGrid(this.image,l,u,c,f,g,w);return new Yo(_,[l,u,c,f])}static shiftPoint(i,o,l){let u=(o.getX()-i.getX())/(l+1),c=(o.getY()-i.getY())/(l+1);return new Ee(i.getX()+u,i.getY()+c)}static moveAway(i,o,l){let u=i.getX(),c=i.getY();return u<o?u-=1:u+=1,c<l?c-=1:c+=1,new Ee(u,c)}detectSolid1(i){let o=i[0],l=i[1],u=i[3],c=i[2],f=this.transitionsBetween(o,l),g=this.transitionsBetween(l,u),w=this.transitionsBetween(u,c),_=this.transitionsBetween(c,o),I=f,S=[c,o,l,u];return I>g&&(I=g,S[0]=o,S[1]=l,S[2]=u,S[3]=c),I>w&&(I=w,S[0]=l,S[1]=u,S[2]=c,S[3]=o),I>_&&(S[0]=u,S[1]=c,S[2]=o,S[3]=l),S}detectSolid2(i){let o=i[0],l=i[1],u=i[2],c=i[3],f=this.transitionsBetween(o,c),g=Oe.shiftPoint(l,u,(f+1)*4),w=Oe.shiftPoint(u,l,(f+1)*4),_=this.transitionsBetween(g,o),I=this.transitionsBetween(w,c);return _<I?(i[0]=o,i[1]=l,i[2]=u,i[3]=c):(i[0]=l,i[1]=u,i[2]=c,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],u=i[2],c=i[3],f=this.transitionsBetween(o,c),g=this.transitionsBetween(l,c),w=Oe.shiftPoint(o,l,(g+1)*4),_=Oe.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(w,c),g=this.transitionsBetween(_,c);let I=new Ee(c.getX()+(u.getX()-l.getX())/(f+1),c.getY()+(u.getY()-l.getY())/(f+1)),S=new Ee(c.getX()+(o.getX()-l.getX())/(g+1),c.getY()+(o.getY()-l.getY())/(g+1));if(!this.isValid(I))return this.isValid(S)?S:null;if(!this.isValid(S))return I;let R=this.transitionsBetween(w,I)+this.transitionsBetween(_,I),B=this.transitionsBetween(w,S)+this.transitionsBetween(_,S);return R>B?I:S}shiftToModuleCenter(i){let o=i[0],l=i[1],u=i[2],c=i[3],f=this.transitionsBetween(o,c)+1,g=this.transitionsBetween(u,c)+1,w=Oe.shiftPoint(o,l,g*4),_=Oe.shiftPoint(u,l,f*4);f=this.transitionsBetween(w,c)+1,g=this.transitionsBetween(_,c)+1,(f&1)===1&&(f+=1),(g&1)===1&&(g+=1);let I=(o.getX()+l.getX()+u.getX()+c.getX())/4,S=(o.getY()+l.getY()+u.getY()+c.getY())/4;o=Oe.moveAway(o,I,S),l=Oe.moveAway(l,I,S),u=Oe.moveAway(u,I,S),c=Oe.moveAway(c,I,S);let R,B;return w=Oe.shiftPoint(o,l,g*4),w=Oe.shiftPoint(w,c,f*4),R=Oe.shiftPoint(l,o,g*4),R=Oe.shiftPoint(R,u,f*4),_=Oe.shiftPoint(u,c,g*4),_=Oe.shiftPoint(_,l,f*4),B=Oe.shiftPoint(c,u,g*4),B=Oe.shiftPoint(B,o,f*4),[w,R,_,B]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,u,c,f,g){return Ir.getInstance().sampleGrid(i,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,o.getX(),o.getY(),c.getX(),c.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),c=Math.trunc(o.getX()),f=Math.trunc(o.getY()),g=Math.abs(f-u)>Math.abs(c-l);if(g){let K=l;l=u,u=K,K=c,c=f,f=K}let w=Math.abs(c-l),_=Math.abs(f-u),I=-w/2,S=u<f?1:-1,R=l<c?1:-1,B=0,G=this.image.get(g?u:l,g?l:u);for(let K=l,Q=u;K!==c;K+=R){let te=this.image.get(g?Q:K,g?K:Q);if(te!==G&&(B++,G=te),I+=_,I>0){if(Q===f)break;Q+=S,I-=w}}return B}}class lr{constructor(){this.decoder=new yl}decode(i,o=null){let l,u;if(o!=null&&o.has(re.PURE_BARCODE)){const _=lr.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(_),u=lr.NO_POINTS}else{const _=new Oe(i.getBlackMatrix()).detect();l=this.decoder.decode(_.getBits()),u=_.getPoints()}const c=l.getRawBytes(),f=new at(l.getText(),c,8*c.length,u,xe.DATA_MATRIX,U.currentTimeMillis()),g=l.getByteSegments();g!=null&&f.putMetadata(Lt.BYTE_SEGMENTS,g);const w=l.getECLevel();return w!=null&&f.putMetadata(Lt.ERROR_CORRECTION_LEVEL,w),f}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new J;const u=this.moduleSize(o,i);let c=o[1];const f=l[1];let g=o[0];const _=(l[0]-g+1)/u,I=(f-c+1)/u;if(_<=0||I<=0)throw new J;const S=u/2;c+=S,g+=S;const R=new Le(_,I);for(let B=0;B<I;B++){const G=c+B*u;for(let K=0;K<_;K++)i.get(g+K*u,G)&&R.set(K,B)}return R}static moduleSize(i,o){const l=o.getWidth();let u=i[0];const c=i[1];for(;u<l&&o.get(u,c);)u++;if(u===l)throw new J;const f=u-i[0];if(f===0)throw new J;return f}}lr.NO_POINTS=[];class lo extends wn{constructor(i=500){super(new lr,i)}}var Sr;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(Sr||(Sr={}));class dt{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,dt.FOR_BITS.set(l,this),dt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return dt.L;case"M":return dt.M;case"Q":return dt.Q;case"H":return dt.H;default:throw new E(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof dt))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=dt.FOR_BITS.size)throw new x;return dt.FOR_BITS.get(i)}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.L=new dt(Sr.L,"L",1),dt.M=new dt(Sr.M,"M",0),dt.Q=new dt(Sr.Q,"Q",3),dt.H=new dt(Sr.H,"H",2);class nn{constructor(i){this.errorCorrectionLevel=dt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return N.bitCount(i^o)}static decodeFormatInformation(i,o){const l=nn.doDecodeFormatInformation(i,o);return l!==null?l:nn.doDecodeFormatInformation(i^nn.FORMAT_INFO_MASK_QR,o^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,u=0;for(const c of nn.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===i||f===o)return new nn(c[1]);let g=nn.numBitsDiffering(i,f);g<l&&(u=c[1],l=g),i!==o&&(g=nn.numBitsDiffering(o,f),g<l&&(u=c[1],l=g))}return l<=3?new nn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof nn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ${constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class L{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ie{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let u=0;const c=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const g of f)u+=g.getCount()*(g.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new P;try{return this.getVersionForNumber((i-17)/4)}catch{throw new P}}static getVersionForNumber(i){if(i<1||i>40)throw new x;return Ie.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Ie.VERSION_DECODE_INFO.length;u++){const c=Ie.VERSION_DECODE_INFO[u];if(c===i)return Ie.getVersionForNumber(u+7);const f=nn.numBitsDiffering(i,c);f<o&&(l=u+7,o=f)}return o<=3?Ie.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new Le(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const c=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||o.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}Ie.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ie.VERSIONS=[new Ie(1,new Int32Array(0),new $(7,new L(1,19)),new $(10,new L(1,16)),new $(13,new L(1,13)),new $(17,new L(1,9))),new Ie(2,Int32Array.from([6,18]),new $(10,new L(1,34)),new $(16,new L(1,28)),new $(22,new L(1,22)),new $(28,new L(1,16))),new Ie(3,Int32Array.from([6,22]),new $(15,new L(1,55)),new $(26,new L(1,44)),new $(18,new L(2,17)),new $(22,new L(2,13))),new Ie(4,Int32Array.from([6,26]),new $(20,new L(1,80)),new $(18,new L(2,32)),new $(26,new L(2,24)),new $(16,new L(4,9))),new Ie(5,Int32Array.from([6,30]),new $(26,new L(1,108)),new $(24,new L(2,43)),new $(18,new L(2,15),new L(2,16)),new $(22,new L(2,11),new L(2,12))),new Ie(6,Int32Array.from([6,34]),new $(18,new L(2,68)),new $(16,new L(4,27)),new $(24,new L(4,19)),new $(28,new L(4,15))),new Ie(7,Int32Array.from([6,22,38]),new $(20,new L(2,78)),new $(18,new L(4,31)),new $(18,new L(2,14),new L(4,15)),new $(26,new L(4,13),new L(1,14))),new Ie(8,Int32Array.from([6,24,42]),new $(24,new L(2,97)),new $(22,new L(2,38),new L(2,39)),new $(22,new L(4,18),new L(2,19)),new $(26,new L(4,14),new L(2,15))),new Ie(9,Int32Array.from([6,26,46]),new $(30,new L(2,116)),new $(22,new L(3,36),new L(2,37)),new $(20,new L(4,16),new L(4,17)),new $(24,new L(4,12),new L(4,13))),new Ie(10,Int32Array.from([6,28,50]),new $(18,new L(2,68),new L(2,69)),new $(26,new L(4,43),new L(1,44)),new $(24,new L(6,19),new L(2,20)),new $(28,new L(6,15),new L(2,16))),new Ie(11,Int32Array.from([6,30,54]),new $(20,new L(4,81)),new $(30,new L(1,50),new L(4,51)),new $(28,new L(4,22),new L(4,23)),new $(24,new L(3,12),new L(8,13))),new Ie(12,Int32Array.from([6,32,58]),new $(24,new L(2,92),new L(2,93)),new $(22,new L(6,36),new L(2,37)),new $(26,new L(4,20),new L(6,21)),new $(28,new L(7,14),new L(4,15))),new Ie(13,Int32Array.from([6,34,62]),new $(26,new L(4,107)),new $(22,new L(8,37),new L(1,38)),new $(24,new L(8,20),new L(4,21)),new $(22,new L(12,11),new L(4,12))),new Ie(14,Int32Array.from([6,26,46,66]),new $(30,new L(3,115),new L(1,116)),new $(24,new L(4,40),new L(5,41)),new $(20,new L(11,16),new L(5,17)),new $(24,new L(11,12),new L(5,13))),new Ie(15,Int32Array.from([6,26,48,70]),new $(22,new L(5,87),new L(1,88)),new $(24,new L(5,41),new L(5,42)),new $(30,new L(5,24),new L(7,25)),new $(24,new L(11,12),new L(7,13))),new Ie(16,Int32Array.from([6,26,50,74]),new $(24,new L(5,98),new L(1,99)),new $(28,new L(7,45),new L(3,46)),new $(24,new L(15,19),new L(2,20)),new $(30,new L(3,15),new L(13,16))),new Ie(17,Int32Array.from([6,30,54,78]),new $(28,new L(1,107),new L(5,108)),new $(28,new L(10,46),new L(1,47)),new $(28,new L(1,22),new L(15,23)),new $(28,new L(2,14),new L(17,15))),new Ie(18,Int32Array.from([6,30,56,82]),new $(30,new L(5,120),new L(1,121)),new $(26,new L(9,43),new L(4,44)),new $(28,new L(17,22),new L(1,23)),new $(28,new L(2,14),new L(19,15))),new Ie(19,Int32Array.from([6,30,58,86]),new $(28,new L(3,113),new L(4,114)),new $(26,new L(3,44),new L(11,45)),new $(26,new L(17,21),new L(4,22)),new $(26,new L(9,13),new L(16,14))),new Ie(20,Int32Array.from([6,34,62,90]),new $(28,new L(3,107),new L(5,108)),new $(26,new L(3,41),new L(13,42)),new $(30,new L(15,24),new L(5,25)),new $(28,new L(15,15),new L(10,16))),new Ie(21,Int32Array.from([6,28,50,72,94]),new $(28,new L(4,116),new L(4,117)),new $(26,new L(17,42)),new $(28,new L(17,22),new L(6,23)),new $(30,new L(19,16),new L(6,17))),new Ie(22,Int32Array.from([6,26,50,74,98]),new $(28,new L(2,111),new L(7,112)),new $(28,new L(17,46)),new $(30,new L(7,24),new L(16,25)),new $(24,new L(34,13))),new Ie(23,Int32Array.from([6,30,54,78,102]),new $(30,new L(4,121),new L(5,122)),new $(28,new L(4,47),new L(14,48)),new $(30,new L(11,24),new L(14,25)),new $(30,new L(16,15),new L(14,16))),new Ie(24,Int32Array.from([6,28,54,80,106]),new $(30,new L(6,117),new L(4,118)),new $(28,new L(6,45),new L(14,46)),new $(30,new L(11,24),new L(16,25)),new $(30,new L(30,16),new L(2,17))),new Ie(25,Int32Array.from([6,32,58,84,110]),new $(26,new L(8,106),new L(4,107)),new $(28,new L(8,47),new L(13,48)),new $(30,new L(7,24),new L(22,25)),new $(30,new L(22,15),new L(13,16))),new Ie(26,Int32Array.from([6,30,58,86,114]),new $(28,new L(10,114),new L(2,115)),new $(28,new L(19,46),new L(4,47)),new $(28,new L(28,22),new L(6,23)),new $(30,new L(33,16),new L(4,17))),new Ie(27,Int32Array.from([6,34,62,90,118]),new $(30,new L(8,122),new L(4,123)),new $(28,new L(22,45),new L(3,46)),new $(30,new L(8,23),new L(26,24)),new $(30,new L(12,15),new L(28,16))),new Ie(28,Int32Array.from([6,26,50,74,98,122]),new $(30,new L(3,117),new L(10,118)),new $(28,new L(3,45),new L(23,46)),new $(30,new L(4,24),new L(31,25)),new $(30,new L(11,15),new L(31,16))),new Ie(29,Int32Array.from([6,30,54,78,102,126]),new $(30,new L(7,116),new L(7,117)),new $(28,new L(21,45),new L(7,46)),new $(30,new L(1,23),new L(37,24)),new $(30,new L(19,15),new L(26,16))),new Ie(30,Int32Array.from([6,26,52,78,104,130]),new $(30,new L(5,115),new L(10,116)),new $(28,new L(19,47),new L(10,48)),new $(30,new L(15,24),new L(25,25)),new $(30,new L(23,15),new L(25,16))),new Ie(31,Int32Array.from([6,30,56,82,108,134]),new $(30,new L(13,115),new L(3,116)),new $(28,new L(2,46),new L(29,47)),new $(30,new L(42,24),new L(1,25)),new $(30,new L(23,15),new L(28,16))),new Ie(32,Int32Array.from([6,34,60,86,112,138]),new $(30,new L(17,115)),new $(28,new L(10,46),new L(23,47)),new $(30,new L(10,24),new L(35,25)),new $(30,new L(19,15),new L(35,16))),new Ie(33,Int32Array.from([6,30,58,86,114,142]),new $(30,new L(17,115),new L(1,116)),new $(28,new L(14,46),new L(21,47)),new $(30,new L(29,24),new L(19,25)),new $(30,new L(11,15),new L(46,16))),new Ie(34,Int32Array.from([6,34,62,90,118,146]),new $(30,new L(13,115),new L(6,116)),new $(28,new L(14,46),new L(23,47)),new $(30,new L(44,24),new L(7,25)),new $(30,new L(59,16),new L(1,17))),new Ie(35,Int32Array.from([6,30,54,78,102,126,150]),new $(30,new L(12,121),new L(7,122)),new $(28,new L(12,47),new L(26,48)),new $(30,new L(39,24),new L(14,25)),new $(30,new L(22,15),new L(41,16))),new Ie(36,Int32Array.from([6,24,50,76,102,128,154]),new $(30,new L(6,121),new L(14,122)),new $(28,new L(6,47),new L(34,48)),new $(30,new L(46,24),new L(10,25)),new $(30,new L(2,15),new L(64,16))),new Ie(37,Int32Array.from([6,28,54,80,106,132,158]),new $(30,new L(17,122),new L(4,123)),new $(28,new L(29,46),new L(14,47)),new $(30,new L(49,24),new L(10,25)),new $(30,new L(24,15),new L(46,16))),new Ie(38,Int32Array.from([6,32,58,84,110,136,162]),new $(30,new L(4,122),new L(18,123)),new $(28,new L(13,46),new L(32,47)),new $(30,new L(48,24),new L(14,25)),new $(30,new L(42,15),new L(32,16))),new Ie(39,Int32Array.from([6,26,54,82,110,138,166]),new $(30,new L(20,117),new L(4,118)),new $(28,new L(40,47),new L(7,48)),new $(30,new L(43,24),new L(22,25)),new $(30,new L(10,15),new L(67,16))),new Ie(40,Int32Array.from([6,30,58,86,114,142,170]),new $(30,new L(19,118),new L(6,119)),new $(28,new L(18,47),new L(31,48)),new $(30,new L(34,24),new L(34,25)),new $(30,new L(20,15),new L(61,16)))];var qt;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(qt||(qt={}));class dn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let u=0;u<o;u++)this.isMasked(l,u)&&i.flip(u,l)}}dn.values=new Map([[qt.DATA_MASK_000,new dn(qt.DATA_MASK_000,(T,i)=>(T+i&1)===0)],[qt.DATA_MASK_001,new dn(qt.DATA_MASK_001,(T,i)=>(T&1)===0)],[qt.DATA_MASK_010,new dn(qt.DATA_MASK_010,(T,i)=>i%3===0)],[qt.DATA_MASK_011,new dn(qt.DATA_MASK_011,(T,i)=>(T+i)%3===0)],[qt.DATA_MASK_100,new dn(qt.DATA_MASK_100,(T,i)=>(Math.floor(T/2)+Math.floor(i/3)&1)===0)],[qt.DATA_MASK_101,new dn(qt.DATA_MASK_101,(T,i)=>T*i%6===0)],[qt.DATA_MASK_110,new dn(qt.DATA_MASK_110,(T,i)=>T*i%6<3)],[qt.DATA_MASK_111,new dn(qt.DATA_MASK_111,(T,i)=>(T+i+T*i%3&1)===0)]]);class Mi{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new P;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let c=0;c<6;c++)i=this.copyBit(c,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let c=5;c>=0;c--)i=this.copyBit(8,c,i);const o=this.bitMatrix.getHeight();let l=0;const u=o-7;for(let c=o-1;c>=u;c--)l=this.copyBit(8,c,l);for(let c=o-8;c<o;c++)l=this.copyBit(c,8,l);if(this.parsedFormatInfo=nn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return Ie.getVersionForNumber(o);let l=0;const u=i-11;for(let f=5;f>=0;f--)for(let g=i-9;g>=u;g--)l=this.copyBit(g,f,l);let c=Ie.decodeVersionInformation(l);if(c!==null&&c.getDimensionForVersion()===i)return this.parsedVersion=c,c;l=0;for(let f=5;f>=0;f--)for(let g=i-9;g>=u;g--)l=this.copyBit(f,g,l);if(c=Ie.decodeVersionInformation(l),c!==null&&c.getDimensionForVersion()===i)return this.parsedVersion=c,c;throw new P}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=dn.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const c=o.buildFunctionPattern();let f=!0;const g=new Uint8Array(o.getTotalCodewords());let w=0,_=0,I=0;for(let S=u-1;S>0;S-=2){S===6&&S--;for(let R=0;R<u;R++){const B=f?u-1-R:R;for(let G=0;G<2;G++)c.get(S-G,B)||(I++,_<<=1,this.bitMatrix.get(S-G,B)&&(_|=1),I===8&&(g[w++]=_,I=0,_=0))}f=!f}if(w!==o.getTotalCodewords())throw new P;return g}remask(){if(this.parsedFormatInfo===null)return;const i=dn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let u=o+1,c=i.getHeight();u<c;u++)i.get(o,u)!==i.get(u,o)&&(i.flip(u,o),i.flip(o,u))}}class ra{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new x;const u=o.getECBlocksForLevel(l);let c=0;const f=u.getECBlocks();for(const G of f)c+=G.getCount();const g=new Array(c);let w=0;for(const G of f)for(let K=0;K<G.getCount();K++){const Q=G.getDataCodewords(),te=u.getECCodewordsPerBlock()+Q;g[w++]=new ra(Q,new Uint8Array(te))}const _=g[0].codewords.length;let I=g.length-1;for(;I>=0&&g[I].codewords.length!==_;)I--;I++;const S=_-u.getECCodewordsPerBlock();let R=0;for(let G=0;G<S;G++)for(let K=0;K<w;K++)g[K].codewords[G]=i[R++];for(let G=I;G<w;G++)g[G].codewords[S]=i[R++];const B=g[0].codewords.length;for(let G=S;G<B;G++)for(let K=0;K<w;K++){const Q=K<I?G:G+1;g[K].codewords[Q]=i[R++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Fn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Fn||(Fn={}));class ve{constructor(i,o,l,u){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=u,ve.FOR_BITS.set(u,this),ve.FOR_VALUE.set(i,this)}static forBits(i){const o=ve.FOR_BITS.get(i);if(o===void 0)throw new x;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof ve))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}ve.FOR_BITS=new Map,ve.FOR_VALUE=new Map,ve.TERMINATOR=new ve(Fn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ve.NUMERIC=new ve(Fn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ve.ALPHANUMERIC=new ve(Fn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ve.STRUCTURED_APPEND=new ve(Fn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ve.BYTE=new ve(Fn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ve.ECI=new ve(Fn.ECI,"ECI",Int32Array.from([0,0,0]),7),ve.KANJI=new ve(Fn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ve.FNC1_FIRST_POSITION=new ve(Fn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ve.FNC1_SECOND_POSITION=new ve(Fn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ve.HANZI=new ve(Fn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class yt{static decode(i,o,l,u){const c=new Gn(i);let f=new z;const g=new Array;let w=-1,_=-1;try{let I=null,S=!1,R;do{if(c.available()<4)R=ve.TERMINATOR;else{const B=c.readBits(4);R=ve.forBits(B)}switch(R){case ve.TERMINATOR:break;case ve.FNC1_FIRST_POSITION:case ve.FNC1_SECOND_POSITION:S=!0;break;case ve.STRUCTURED_APPEND:if(c.available()<16)throw new P;w=c.readBits(8),_=c.readBits(8);break;case ve.ECI:const B=yt.parseECIValue(c);if(I=b.getCharacterSetECIByValue(B),I===null)throw new P;break;case ve.HANZI:const G=c.readBits(4),K=c.readBits(R.getCharacterCountBits(o));G===yt.GB2312_SUBSET&&yt.decodeHanziSegment(c,f,K);break;default:const Q=c.readBits(R.getCharacterCountBits(o));switch(R){case ve.NUMERIC:yt.decodeNumericSegment(c,f,Q);break;case ve.ALPHANUMERIC:yt.decodeAlphanumericSegment(c,f,Q,S);break;case ve.BYTE:yt.decodeByteSegment(c,f,Q,I,g,u);break;case ve.KANJI:yt.decodeKanjiSegment(c,f,Q);break;default:throw new P}break}}while(R!==ve.TERMINATOR)}catch{throw new P}return new ls(i,f.toString(),g.length===0?null:g,l===null?null:l.toString(),w,_)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new P;const u=new Uint8Array(2*l);let c=0;for(;l>0;){const f=i.readBits(13);let g=f/96<<8&4294967295|f%96;g<959?g+=41377:g+=42657,u[c]=g>>8&255,u[c+1]=g&255,c+=2,l--}try{o.append(W.decode(u,X.GB2312))}catch(f){throw new P(f)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new P;const u=new Uint8Array(2*l);let c=0;for(;l>0;){const f=i.readBits(13);let g=f/192<<8&4294967295|f%192;g<7936?g+=33088:g+=49472,u[c]=g>>8,u[c+1]=g,c+=2,l--}try{o.append(W.decode(u,X.SHIFT_JIS))}catch(f){throw new P(f)}}static decodeByteSegment(i,o,l,u,c,f){if(8*l>i.available())throw new P;const g=new Uint8Array(l);for(let _=0;_<l;_++)g[_]=i.readBits(8);let w;u===null?w=X.guessEncoding(g,f):w=u.getName();try{o.append(W.decode(g,w))}catch(_){throw new P(_)}c.push(g)}static toAlphaNumericChar(i){if(i>=yt.ALPHANUMERIC_CHARS.length)throw new P;return yt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,u){const c=o.length();for(;l>1;){if(i.available()<11)throw new P;const f=i.readBits(11);o.append(yt.toAlphaNumericChar(Math.floor(f/45))),o.append(yt.toAlphaNumericChar(f%45)),l-=2}if(l===1){if(i.available()<6)throw new P;o.append(yt.toAlphaNumericChar(i.readBits(6)))}if(u)for(let f=c;f<o.length();f++)o.charAt(f)==="%"&&(f<o.length()-1&&o.charAt(f+1)==="%"?o.deleteCharAt(f+1):o.setCharAt(f,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new P;const u=i.readBits(10);if(u>=1e3)throw new P;o.append(yt.toAlphaNumericChar(Math.floor(u/100))),o.append(yt.toAlphaNumericChar(Math.floor(u/10)%10)),o.append(yt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(i.available()<7)throw new P;const u=i.readBits(7);if(u>=100)throw new P;o.append(yt.toAlphaNumericChar(Math.floor(u/10))),o.append(yt.toAlphaNumericChar(u%10))}else if(l===1){if(i.available()<4)throw new P;const u=i.readBits(4);if(u>=10)throw new P;o.append(yt.toAlphaNumericChar(u))}}static parseECIValue(i){const o=i.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new P}}yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",yt.GB2312_SUBSET=1;class wl{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class hs{constructor(){this.rsDecoder=new Oi(Qe.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(Le.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new Mi(i);let u=null;try{return this.decodeBitMatrixParser(l,o)}catch(c){u=c}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const c=this.decodeBitMatrixParser(l,o);return c.setOther(new wl(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(i,o){const l=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),c=i.readCodewords(),f=ra.getDataBlocks(c,l,u);let g=0;for(const I of f)g+=I.getNumDataCodewords();const w=new Uint8Array(g);let _=0;for(const I of f){const S=I.getCodewords(),R=I.getNumDataCodewords();this.correctErrors(S,R);for(let B=0;B<R;B++)w[_++]=S[B]}return yt.decode(w,l,u,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new O}for(let u=0;u<o;u++)i[u]=l[u]}}class El extends Ee{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const u=(this.getX()+o)/2,c=(this.getY()+i)/2,f=(this.estimatedModuleSize+l)/2;return new El(u,c,f)}}class ia{constructor(i,o,l,u,c,f,g){this.image=i,this.startX=o,this.startY=l,this.width=u,this.height=c,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,u=i+l,c=this.startY+o/2,f=new Int32Array(3),g=this.image;for(let w=0;w<o;w++){const _=c+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));f[0]=0,f[1]=0,f[2]=0;let I=i;for(;I<u&&!g.get(I,_);)I++;let S=0;for(;I<u;){if(g.get(I,_))if(S===1)f[1]++;else if(S===2){if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,_,I);if(R!==null)return R}f[0]=f[2],f[1]=1,f[2]=0,S=1}else f[++S]++;else S===1&&S++,f[S]++;I++}if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,_,u);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new J}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let u=0;u<3;u++)if(Math.abs(o-i[u])>=l)return!1;return!0}crossCheckVertical(i,o,l,u){const c=this.image,f=c.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let w=i;for(;w>=0&&c.get(o,w)&&g[1]<=l;)g[1]++,w--;if(w<0||g[1]>l)return NaN;for(;w>=0&&!c.get(o,w)&&g[0]<=l;)g[0]++,w--;if(g[0]>l)return NaN;for(w=i+1;w<f&&c.get(o,w)&&g[1]<=l;)g[1]++,w++;if(w===f||g[1]>l)return NaN;for(;w<f&&!c.get(o,w)&&g[2]<=l;)g[2]++,w++;if(g[2]>l)return NaN;const _=g[0]+g[1]+g[2];return 5*Math.abs(_-u)>=2*u?NaN:this.foundPatternCross(g)?ia.centerFromEnd(g,w):NaN}handlePossibleCenter(i,o,l){const u=i[0]+i[1]+i[2],c=ia.centerFromEnd(i,l),f=this.crossCheckVertical(o,c,2*i[1],u);if(!isNaN(f)){const g=(i[0]+i[1]+i[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(g,f,c))return _.combineEstimate(f,c,g);const w=new El(c,f,g);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class _l extends Ee{constructor(i,o,l,u){super(i,o),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const u=this.count+1,c=(this.count*this.getX()+o)/u,f=(this.count*this.getY()+i)/u,g=(this.count*this.estimatedModuleSize+l)/u;return new _l(c,f,g,u)}}class ai{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(re.TRY_HARDER)!==void 0,l=i!=null&&i.get(re.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),f=u.getWidth();let g=Math.floor(3*c/(4*Yt.MAX_MODULES));(g<Yt.MIN_SKIP||o)&&(g=Yt.MIN_SKIP);let w=!1;const _=new Int32Array(5);for(let S=g-1;S<c&&!w;S+=g){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let R=0;for(let B=0;B<f;B++)if(u.get(B,S))(R&1)===1&&R++,_[R]++;else if(R&1)_[R]++;else if(R===4)if(Yt.foundPatternCross(_)){if(this.handlePossibleCenter(_,S,B,l)===!0)if(g=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>_[2]&&(S+=K-_[2]-g,B=f-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,R=3;continue}R=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,R=3;else _[++R]++;Yt.foundPatternCross(_)&&this.handlePossibleCenter(_,S,f,l)===!0&&(g=_[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Ee.orderBestPatterns(I),new ai(I)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let c=0;c<5;c++){const f=i[c];if(f===0)return!1;o+=f}if(o<7)return!1;const l=o/7,u=l/2;return Math.abs(l-i[0])<u&&Math.abs(l-i[1])<u&&Math.abs(3*l-i[2])<3*u&&Math.abs(l-i[3])<u&&Math.abs(l-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,u){const c=this.getCrossCheckStateCount();let f=0;const g=this.image;for(;i>=f&&o>=f&&g.get(o-f,i-f);)c[2]++,f++;if(i<f||o<f)return!1;for(;i>=f&&o>=f&&!g.get(o-f,i-f)&&c[1]<=l;)c[1]++,f++;if(i<f||o<f||c[1]>l)return!1;for(;i>=f&&o>=f&&g.get(o-f,i-f)&&c[0]<=l;)c[0]++,f++;if(c[0]>l)return!1;const w=g.getHeight(),_=g.getWidth();for(f=1;i+f<w&&o+f<_&&g.get(o+f,i+f);)c[2]++,f++;if(i+f>=w||o+f>=_)return!1;for(;i+f<w&&o+f<_&&!g.get(o+f,i+f)&&c[3]<l;)c[3]++,f++;if(i+f>=w||o+f>=_||c[3]>=l)return!1;for(;i+f<w&&o+f<_&&g.get(o+f,i+f)&&c[4]<l;)c[4]++,f++;if(c[4]>=l)return!1;const I=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(I-u)<2*u&&Yt.foundPatternCross(c)}crossCheckVertical(i,o,l,u){const c=this.image,f=c.getHeight(),g=this.getCrossCheckStateCount();let w=i;for(;w>=0&&c.get(o,w);)g[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(o,w)&&g[1]<=l;)g[1]++,w--;if(w<0||g[1]>l)return NaN;for(;w>=0&&c.get(o,w)&&g[0]<=l;)g[0]++,w--;if(g[0]>l)return NaN;for(w=i+1;w<f&&c.get(o,w);)g[2]++,w++;if(w===f)return NaN;for(;w<f&&!c.get(o,w)&&g[3]<l;)g[3]++,w++;if(w===f||g[3]>=l)return NaN;for(;w<f&&c.get(o,w)&&g[4]<l;)g[4]++,w++;if(g[4]>=l)return NaN;const _=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(_-u)>=2*u?NaN:Yt.foundPatternCross(g)?Yt.centerFromEnd(g,w):NaN}crossCheckHorizontal(i,o,l,u){const c=this.image,f=c.getWidth(),g=this.getCrossCheckStateCount();let w=i;for(;w>=0&&c.get(w,o);)g[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(w,o)&&g[1]<=l;)g[1]++,w--;if(w<0||g[1]>l)return NaN;for(;w>=0&&c.get(w,o)&&g[0]<=l;)g[0]++,w--;if(g[0]>l)return NaN;for(w=i+1;w<f&&c.get(w,o);)g[2]++,w++;if(w===f)return NaN;for(;w<f&&!c.get(w,o)&&g[3]<l;)g[3]++,w++;if(w===f||g[3]>=l)return NaN;for(;w<f&&c.get(w,o)&&g[4]<l;)g[4]++,w++;if(g[4]>=l)return NaN;const _=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(_-u)>=u?NaN:Yt.foundPatternCross(g)?Yt.centerFromEnd(g,w):NaN}handlePossibleCenter(i,o,l,u){const c=i[0]+i[1]+i[2]+i[3]+i[4];let f=Yt.centerFromEnd(i,l),g=this.crossCheckVertical(o,Math.floor(f),i[2],c);if(!isNaN(g)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),i[2],c),!isNaN(f)&&(!u||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),i[2],c)))){const w=c/7;let _=!1;const I=this.possibleCenters;for(let S=0,R=I.length;S<R;S++){const B=I[S];if(B.aboutEquals(w,g,f)){I[S]=B.combineEstimate(g,f,w),_=!0;break}}if(!_){const S=new _l(f,g,w);I.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Yt.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Yt.CENTER_QUORUM&&(i++,o+=f.getEstimatedModuleSize());if(i<3)return!1;const u=o/l;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-u);return c<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new J;const o=this.possibleCenters;let l;if(i>3){let u=0,c=0;for(const w of this.possibleCenters){const _=w.getEstimatedModuleSize();u+=_,c+=_*_}l=u/i;let f=Math.sqrt(c/i-l*l);o.sort((w,_)=>{const I=Math.abs(_.getEstimatedModuleSize()-l),S=Math.abs(w.getEstimatedModuleSize()-l);return I<S?-1:I>S?1:0});const g=Math.max(.2*l,f);for(let w=0;w<o.length&&o.length>3;w++){const _=o[w];Math.abs(_.getEstimatedModuleSize()-l)>g&&(o.splice(w,1),w--)}}if(o.length>3){let u=0;for(const c of o)u+=c.getEstimatedModuleSize();l=u/o.length,o.sort((c,f)=>{if(f.getCount()===c.getCount()){const g=Math.abs(f.getEstimatedModuleSize()-l),w=Math.abs(c.getEstimatedModuleSize()-l);return g<w?1:g>w?-1:0}else return f.getCount()-c.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class Li{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(re.NEED_RESULT_POINT_CALLBACK);const l=new Yt(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),u=i.getBottomLeft(),c=this.calculateModuleSize(o,l,u);if(c<1)throw new J("No pattern found in proccess finder.");const f=Li.computeDimension(o,l,u,c),g=Ie.getProvisionalVersionForDimension(f),w=g.getDimensionForVersion()-7;let _=null;if(g.getAlignmentPatternCenters().length>0){const B=l.getX()-o.getX()+u.getX(),G=l.getY()-o.getY()+u.getY(),K=1-3/w,Q=Math.floor(o.getX()+K*(B-o.getX())),te=Math.floor(o.getY()+K*(G-o.getY()));for(let fe=4;fe<=16;fe<<=1)try{_=this.findAlignmentInRegion(c,Q,te,fe);break}catch(de){if(!(de instanceof J))throw de}}const I=Li.createTransform(o,l,u,_,f),S=Li.sampleGrid(this.image,I,f);let R;return _===null?R=[u,o,l]:R=[u,o,l,_],new Yo(S,R)}static createTransform(i,o,l,u,c){const f=c-3.5;let g,w,_,I;return u!==null?(g=u.getX(),w=u.getY(),_=f-3,I=_):(g=o.getX()-i.getX()+l.getX(),w=o.getY()-i.getY()+l.getY(),_=f,I=f),Hn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,_,I,3.5,f,i.getX(),i.getY(),o.getX(),o.getY(),g,w,l.getX(),l.getY())}static sampleGrid(i,o,l){return Ir.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,u){const c=be.round(Ee.distance(i,o)/u),f=be.round(Ee.distance(i,l)/u);let g=Math.floor((c+f)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new J("Dimensions could be not found.")}return g}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,u){let c=this.sizeOfBlackWhiteBlackRun(i,o,l,u),f=1,g=i-(l-i);g<0?(f=i/(i-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-i)/(g-i),g=this.image.getWidth()-1);let w=Math.floor(o-(u-o)*f);return f=1,w<0?(f=o/(o-w),w=0):w>=this.image.getHeight()&&(f=(this.image.getHeight()-1-o)/(w-o),w=this.image.getHeight()-1),g=Math.floor(i+(g-i)*f),c+=this.sizeOfBlackWhiteBlackRun(i,o,g,w),c-1}sizeOfBlackWhiteBlackRun(i,o,l,u){const c=Math.abs(u-o)>Math.abs(l-i);if(c){let B=i;i=o,o=B,B=l,l=u,u=B}const f=Math.abs(l-i),g=Math.abs(u-o);let w=-f/2;const _=i<l?1:-1,I=o<u?1:-1;let S=0;const R=l+_;for(let B=i,G=o;B!==R;B+=_){const K=c?G:B,Q=c?B:G;if(S===1===this.image.get(K,Q)){if(S===2)return be.distance(B,G,i,o);S++}if(w+=g,w>0){if(G===u)break;G+=I,w-=f}}return S===2?be.distance(l+_,u,i,o):NaN}findAlignmentInRegion(i,o,l,u){const c=Math.floor(u*i),f=Math.max(0,o-c),g=Math.min(this.image.getWidth()-1,o+c);if(g-f<i*3)throw new J("Alignment top exceeds estimated module size.");const w=Math.max(0,l-c),_=Math.min(this.image.getHeight()-1,l+c);if(_-w<i*3)throw new J("Alignment bottom exceeds estimated module size.");return new ia(this.image,f,w,g-f,_-w,i,this.resultPointCallback).find()}}class ur{constructor(){this.decoder=new hs}getDecoder(){return this.decoder}decode(i,o){let l,u;if(o!=null&&o.get(re.PURE_BARCODE)!==void 0){const w=ur.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,o),u=ur.NO_POINTS}else{const w=new Li(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(w.getBits(),o),u=w.getPoints()}l.getOther()instanceof wl&&l.getOther().applyMirroredCorrection(u);const c=new at(l.getText(),l.getRawBytes(),void 0,u,xe.QR_CODE,void 0),f=l.getByteSegments();f!==null&&c.putMetadata(Lt.BYTE_SEGMENTS,f);const g=l.getECLevel();return g!==null&&c.putMetadata(Lt.ERROR_CORRECTION_LEVEL,g),l.hasStructuredAppend()&&(c.putMetadata(Lt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),c.putMetadata(Lt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),c}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new J;const u=this.moduleSize(o,i);let c=o[1],f=l[1],g=o[0],w=l[0];if(g>=w||c>=f)throw new J;if(f-c!==w-g&&(w=g+(f-c),w>=i.getWidth()))throw new J;const _=Math.round((w-g+1)/u),I=Math.round((f-c+1)/u);if(_<=0||I<=0)throw new J;if(I!==_)throw new J;const S=Math.floor(u/2);c+=S,g+=S;const R=g+Math.floor((_-1)*u)-w;if(R>0){if(R>S)throw new J;g-=R}const B=c+Math.floor((I-1)*u)-f;if(B>0){if(B>S)throw new J;c-=B}const G=new Le(_,I);for(let K=0;K<I;K++){const Q=c+Math.floor(K*u);for(let te=0;te<_;te++)i.get(g+Math.floor(te*u),Q)&&G.set(te,K)}return G}static moduleSize(i,o){const l=o.getHeight(),u=o.getWidth();let c=i[0],f=i[1],g=!0,w=0;for(;c<u&&f<l;){if(g!==o.get(c,f)){if(++w===5)break;g=!g}c++,f++}if(c===u||f===l)throw new J;return(c-i[0])/7}}ur.NO_POINTS=new Array;class Re{PDF417Common(){}static getBitCountSum(i){return be.sum(i)}static toIntArray(i){if(i==null||!i.length)return Re.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const u of i)o[l++]=u;return o}static getCodeword(i){const o=D.binarySearch(Re.SYMBOL_TABLE,i&262143);return o<0?-1:(Re.CODEWORD_TABLE[o]-1)%Re.NUMBER_OF_CODEWORDS}}Re.NUMBER_OF_CODEWORDS=929,Re.MAX_CODEWORDS_IN_BARCODE=Re.NUMBER_OF_CODEWORDS-1,Re.MIN_ROWS_IN_BARCODE=3,Re.MAX_ROWS_IN_BARCODE=90,Re.MODULES_IN_CODEWORD=17,Re.MODULES_IN_STOP_PATTERN=18,Re.BARS_IN_MODULE=8,Re.EMPTY_INT_ARRAY=new Int32Array([]),Re.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Re.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class uo{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ke{static detectMultiple(i,o,l){let u=i.getBlackMatrix(),c=ke.detect(l,u);return c.length||(u=u.clone(),u.rotate180(),c=ke.detect(l,u)),new uo(u,c)}static detect(i,o){const l=new Array;let u=0,c=0,f=!1;for(;u<o.getHeight();){const g=ke.findVertices(o,u,c);if(g[0]==null&&g[3]==null){if(!f)break;f=!1,c=0;for(const w of l)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=ke.ROW_STEP;continue}if(f=!0,l.push(g),!i)break;g[2]!=null?(c=Math.trunc(g[2].getX()),u=Math.trunc(g[2].getY())):(c=Math.trunc(g[4].getX()),u=Math.trunc(g[4].getY()))}return l}static findVertices(i,o,l){const u=i.getHeight(),c=i.getWidth(),f=new Array(8);return ke.copyToResult(f,ke.findRowsWithPattern(i,u,c,o,l,ke.START_PATTERN),ke.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY())),ke.copyToResult(f,ke.findRowsWithPattern(i,u,c,o,l,ke.STOP_PATTERN),ke.INDEXES_STOP_PATTERN),f}static copyToResult(i,o,l){for(let u=0;u<l.length;u++)i[l[u]]=o[u]}static findRowsWithPattern(i,o,l,u,c,f){const g=new Array(4);let w=!1;const _=new Int32Array(f.length);for(;u<o;u+=ke.ROW_STEP){let S=ke.findGuardPattern(i,c,u,l,!1,f,_);if(S!=null){for(;u>0;){const R=ke.findGuardPattern(i,c,--u,l,!1,f,_);if(R!=null)S=R;else{u++;break}}g[0]=new Ee(S[0],u),g[1]=new Ee(S[1],u),w=!0;break}}let I=u+1;if(w){let S=0,R=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;I<o;I++){const B=ke.findGuardPattern(i,R[0],I,l,!1,f,_);if(B!=null&&Math.abs(R[0]-B[0])<ke.MAX_PATTERN_DRIFT&&Math.abs(R[1]-B[1])<ke.MAX_PATTERN_DRIFT)R=B,S=0;else{if(S>ke.SKIPPED_ROW_COUNT_MAX)break;S++}}I-=S+1,g[2]=new Ee(R[0],I),g[3]=new Ee(R[1],I)}return I-u<ke.BARCODE_MIN_HEIGHT&&D.fill(g,null),g}static findGuardPattern(i,o,l,u,c,f,g){D.fillWithin(g,0,g.length,0);let w=o,_=0;for(;i.get(w,l)&&w>0&&_++<ke.MAX_PIXEL_DRIFT;)w--;let I=w,S=0,R=f.length;for(let B=c;I<u;I++)if(i.get(I,l)!==B)g[S]++;else{if(S===R-1){if(ke.patternMatchVariance(g,f,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return new Int32Array([w,I]);w+=g[0]+g[1],U.arraycopy(g,2,g,0,S-1),g[S-1]=0,g[S]=0,S--}else S++;g[S]=1,B=!B}return S===R-1&&ke.patternMatchVariance(g,f,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE?new Int32Array([w,I-1]):null}static patternMatchVariance(i,o,l){let u=i.length,c=0,f=0;for(let _=0;_<u;_++)c+=i[_],f+=o[_];if(c<f)return 1/0;let g=c/f;l*=g;let w=0;for(let _=0;_<u;_++){let I=i[_],S=o[_]*g,R=I>S?I-S:S-I;if(R>l)return 1/0;w+=R}return w/c}}ke.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ke.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ke.MAX_AVG_VARIANCE=.42,ke.MAX_INDIVIDUAL_VARIANCE=.8,ke.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ke.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ke.MAX_PIXEL_DRIFT=3,ke.MAX_PATTERN_DRIFT=5,ke.SKIPPED_ROW_COUNT_MAX=25,ke.ROW_STEP=5,ke.BARCODE_MIN_HEIGHT=10;class Qt{constructor(i,o){if(o.length===0)throw new x;this.field=i;let l=o.length;if(l>1&&o[0]===0){let u=1;for(;u<l&&o[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),U.arraycopy(o,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let o=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)o=this.field.add(this.field.multiply(i,o),this.coefficients[u]);return o}add(i){if(!this.field.equals(i.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let f=o;o=l,l=f}let u=new Int32Array(l.length),c=l.length-o.length;U.arraycopy(l,0,u,0,c);for(let f=c;f<l.length;f++)u[f]=this.field.add(o[f-c],l[f]);return new Qt(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new x("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Qt?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Qt(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,u=i.coefficients,c=u.length,f=new Int32Array(l+c-1);for(let g=0;g<l;g++){let w=o[g];for(let _=0;_<c;_++)f[g+_]=this.field.add(f[g+_],this.field.multiply(w,u[_]))}return new Qt(this.field,f)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new Qt(this.field,o)}multiplyScalar(i){if(i===0)return new Qt(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let u=0;u<o;u++)l[u]=this.field.multiply(this.coefficients[u],i);return new Qt(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new x;if(o===0)return new Qt(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+i);for(let c=0;c<l;c++)u[c]=this.field.multiply(this.coefficients[c],o);return new Qt(this.field,u)}toString(){let i=new z;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class xl{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new x;return this.logTable[i]}inverse(i){if(i===0)throw new so;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class wt extends xl{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let u=0;u<i;u++)this.expTable[u]=l,l=l*o%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Qt(this,new Int32Array([0])),this.one=new Qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new x;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new Qt(this,l)}}wt.PDF417_GF=new wt(Re.NUMBER_OF_CODEWORDS,3);class rc{constructor(){this.field=wt.PDF417_GF}decode(i,o,l){let u=new Qt(this.field,i),c=new Int32Array(o),f=!1;for(let G=o;G>0;G--){let K=u.evaluateAt(this.field.exp(G));c[o-G]=K,K!==0&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(l!=null)for(const G of l){let K=this.field.exp(i.length-1-G),Q=new Qt(this.field,new Int32Array([this.field.subtract(0,K),1]));g=g.multiply(Q)}let w=new Qt(this.field,c),_=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),w,o),I=_[0],S=_[1],R=this.findErrorLocations(I),B=this.findErrorMagnitudes(S,I,R);for(let G=0;G<R.length;G++){let K=i.length-1-this.field.log(R[G]);if(K<0)throw O.getChecksumInstance();i[K]=this.field.subtract(i[K],B[G])}return R.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let R=i;i=o,o=R}let u=i,c=o,f=this.field.getZero(),g=this.field.getOne();for(;c.getDegree()>=Math.round(l/2);){let R=u,B=f;if(u=c,f=g,u.isZero())throw O.getChecksumInstance();c=R;let G=this.field.getZero(),K=u.getCoefficient(u.getDegree()),Q=this.field.inverse(K);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let te=c.getDegree()-u.getDegree(),fe=this.field.multiply(c.getCoefficient(c.getDegree()),Q);G=G.add(this.field.buildMonomial(te,fe)),c=c.subtract(u.multiplyByMonomial(te,fe))}g=G.multiply(f).subtract(B).negative()}let w=g.getCoefficient(0);if(w===0)throw O.getChecksumInstance();let _=this.field.inverse(w),I=g.multiply(_),S=c.multiply(_);return[I,S]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),u=0;for(let c=1;c<this.field.getSize()&&u<o;c++)i.evaluateAt(c)===0&&(l[u]=this.field.inverse(c),u++);if(u!==o)throw O.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let u=o.getDegree(),c=new Int32Array(u);for(let _=1;_<=u;_++)c[u-_]=this.field.multiply(_,o.getCoefficient(_));let f=new Qt(this.field,c),g=l.length,w=new Int32Array(g);for(let _=0;_<g;_++){let I=this.field.inverse(l[_]),S=this.field.subtract(0,i.evaluateAt(I)),R=this.field.inverse(f.evaluateAt(I));w[_]=this.field.multiply(S,R)}return w}}class Fi{constructor(i,o,l,u,c){i instanceof Fi?this.constructor_2(i):this.constructor_1(i,o,l,u,c)}constructor_1(i,o,l,u,c){const f=o==null||l==null,g=u==null||c==null;if(f&&g)throw new J;f?(o=new Ee(0,u.getY()),l=new Ee(0,c.getY())):g&&(u=new Ee(i.getWidth()-1,o.getY()),c=new Ee(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(o.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),c.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Fi(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let u=this.topLeft,c=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(i>0){let w=l?this.topLeft:this.topRight,_=Math.trunc(w.getY()-i);_<0&&(_=0);let I=new Ee(w.getX(),_);l?u=I:f=I}if(o>0){let w=l?this.bottomLeft:this.bottomRight,_=Math.trunc(w.getY()+o);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let I=new Ee(w.getX(),_);l?c=I:g=I}return new Fi(this.image,u,c,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ic{constructor(i,o,l,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class fs{constructor(){this.buffer=""}static form(i,o){let l=-1;function u(f,g,w,_,I,S){if(f==="%%")return"%";if(o[++l]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let R=I?parseInt(I.substr(1)):void 0,B;switch(S){case"s":B=o[l];break;case"c":B=o[l][0];break;case"f":B=parseFloat(o[l]).toFixed(f);break;case"p":B=parseFloat(o[l]).toPrecision(f);break;case"e":B=parseFloat(o[l]).toExponential(f);break;case"x":B=parseInt(o[l]).toString(R||16);break;case"d":B=parseFloat(parseInt(o[l],R||10).toPrecision(f)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(R);let G=parseInt(w),K=w&&w[0]+""=="0"?"0":" ";for(;B.length<G;)B=g!==void 0?B+K:K+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(c,u)}format(i,...o){this.buffer+=fs.form(i,o)}toString(){return this.buffer}}class ds{constructor(i){this.boundingBox=new Fi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<ds.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(i)-l;if(u>=0&&(o=this.codewords[u],o!=null)||(u=this.imageRowToCodewordIndex(i)+l,u<this.codewords.length&&(o=this.codewords[u],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new fs;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}ds.MAX_NEARBY_DISTANCE=5;class li{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,u]of this.values.entries()){const c={getKey:()=>l,getValue:()=>u};c.getValue()>i?(i=c.getValue(),o=[],o.push(c.getKey())):c.getValue()===i&&o.push(c.getKey())}return Re.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class jr extends ds{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),c=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),w=-1,_=1,I=0;for(let S=f;S<g;S++){if(o[S]==null)continue;let R=o[S],B=R.getRowNumber()-w;if(B===0)I++;else if(B===1)_=Math.max(_,I),I=1,w=R.getRowNumber();else if(B<0||R.getRowNumber()>=i.getRowCount()||B>S)o[S]=null;else{let G;_>2?G=(_-2)*B:G=B;let K=G>=S;for(let Q=1;Q<=G&&!K;Q++)K=o[S-Q]!=null;K?o[S]=null:(w=R.getRowNumber(),I=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=o.length)continue;o[u]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=this.getCodewords(),w=-1;for(let _=c;_<f;_++){if(g[_]==null)continue;let I=g[_];I.setRowNumberAsRowIndicatorColumn();let S=I.getRowNumber()-w;S===0||(S===1?w=I.getRowNumber():I.getRowNumber()>=i.getRowCount()?g[_]=null:w=I.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new li,l=new li,u=new li,c=new li;for(let g of i){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let w=g.getValue()%30,_=g.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:l.setValue(w*3+1);break;case 1:c.setValue(w/3),u.setValue(w%3);break;case 2:o.setValue(w+1);break}}if(o.getValue().length===0||l.getValue().length===0||u.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Re.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Re.MAX_ROWS_IN_BARCODE)return null;let f=new ic(o.getValue()[0],l.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,f),f}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let u=i[l];if(i[l]==null)continue;let c=u.getValue()%30,f=u.getRowNumber();if(f>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(c/3)!==o.getErrorCorrectionLevel()||c%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:c+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class gs{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Re.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(o,u,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[l];c!=null&&(c.setRowNumber(i[l].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let u=o[l].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let g=this.detectionResultColumns[f].getCodewords()[l];g!=null&&(c=gs.adjustRowNumberIfValid(u,c,g),g.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let u=o[l].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let g=this.detectionResultColumns[f].getCodewords()[l];g!=null&&(c=gs.adjustRowNumberIfValid(u,c,g),g.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let u=l[o],c=this.detectionResultColumns[i-1].getCodewords(),f=c;this.detectionResultColumns[i+1]!=null&&(f=this.detectionResultColumns[i+1].getCodewords());let g=new Array(14);g[2]=c[o],g[3]=f[o],o>0&&(g[0]=l[o-1],g[4]=c[o-1],g[5]=f[o-1]),o>1&&(g[8]=l[o-2],g[10]=c[o-2],g[11]=f[o-2]),o<l.length-1&&(g[1]=l[o+1],g[6]=c[o+1],g[7]=f[o+1]),o<l.length-2&&(g[9]=l[o+2],g[12]=c[o+2],g[13]=f[o+2]);for(let w of g)if(gs.adjustRowNumber(u,w))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new fs;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){o.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[l];if(c==null){o.format("    |   ");continue}o.format(" %3d|%3d",c.getRowNumber(),c.getValue())}o.format("%n")}return o.toString()}}class co{constructor(i,o,l,u){this.rowNumber=co.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==co.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}co.BARCODE_ROW_UNKNOWN=-1;class $t{static initialize(){for(let i=0;i<Re.SYMBOL_TABLE.length;i++){let o=Re.SYMBOL_TABLE[i],l=o&1;for(let u=0;u<Re.BARS_IN_MODULE;u++){let c=0;for(;(o&1)===l;)c+=1,o>>=1;l=o&1,$t.RATIOS_TABLE[i]||($t.RATIOS_TABLE[i]=new Array(Re.BARS_IN_MODULE)),$t.RATIOS_TABLE[i][Re.BARS_IN_MODULE-u-1]=Math.fround(c/Re.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=$t.getDecodedCodewordValue($t.sampleBitCounts(i));return o!==-1?o:$t.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=be.sum(i),l=new Int32Array(Re.BARS_IN_MODULE),u=0,c=0;for(let f=0;f<Re.MODULES_IN_CODEWORD;f++){let g=o/(2*Re.MODULES_IN_CODEWORD)+f*o/Re.MODULES_IN_CODEWORD;c+i[u]<=g&&(c+=i[u],u++),l[u]++}return l}static getDecodedCodewordValue(i){let o=$t.getBitValue(i);return Re.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let u=0;u<i[l];u++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=be.sum(i),l=new Array(Re.BARS_IN_MODULE);if(o>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(i[f]/o);let u=Kt.MAX_VALUE,c=-1;this.bSymbolTableReady||$t.initialize();for(let f=0;f<$t.RATIOS_TABLE.length;f++){let g=0,w=$t.RATIOS_TABLE[f];for(let _=0;_<Re.BARS_IN_MODULE;_++){let I=Math.fround(w[_]-l[_]);if(g+=Math.fround(I*I),g>=u)break}g<u&&(u=g,c=Re.SYMBOL_TABLE[f])}return c}}$t.bSymbolTableReady=!1,$t.RATIOS_TABLE=new Array(Re.SYMBOL_TABLE.length).map(T=>new Array(Re.BARS_IN_MODULE));class Al{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class sa{static parseLong(i,o=void 0){return parseInt(i,o)}}class ho extends m{}ho.kind="NullPointerException";class sc{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new ho;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new H;if(l===0)return;for(let u=0;u<l;u++)this.write(i[o+u])}flush(){}close(){}}class oa extends m{}class Zf extends sc{constructor(i=32){if(super(),this.count=0,i<0)throw new x("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new oa;l=N.MAX_VALUE}this.buf=D.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new H;this.ensureCapacity(this.count+l),U.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return D.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var st;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(st||(st={}));function ps(){if(typeof window<"u")return window.BigInt||null;if(typeof Tl<"u")return Tl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fo;function Hr(T){if(typeof fo>"u"&&(fo=ps()),fo===null)throw new Error("BigInt is not supported!");return fo(T)}function Il(){let T=[];T[0]=Hr(1);let i=Hr(900);T[1]=i;for(let o=2;o<16;o++)T[o]=T[o-1]*i;return T}class Z{static decode(i,o){let l=new z(""),u=b.ISO8859_1;l.enableDecoding(u);let c=1,f=i[c++],g=new Al;for(;c<i[0];){switch(f){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(i,c,l);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(f,i,u,c,l);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(i,c,l);break;case Z.ECI_CHARSET:b.getCharacterSetECIByValue(i[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(i,c,g);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new P;default:c--,c=Z.textCompaction(i,c,l);break}if(c<i.length)f=i[c++];else throw P.getFormatInstance()}if(l.length()===0)throw P.getFormatInstance();let w=new ls(null,l.toString(),null,o);return w.setOther(g),w}static decodeMacroBlock(i,o,l){if(o+Z.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw P.getFormatInstance();let u=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<Z.NUMBER_OF_SEQUENCE_CODEWORDS;g++,o++)u[g]=i[o];l.setSegmentIndex(N.parseInt(Z.decodeBase900toBase10(u,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new z;o=Z.textCompaction(i,o,c),l.setFileId(c.toString());let f=-1;for(i[o]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=o+1);o<i[0];)switch(i[o]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new z;o=Z.textCompaction(i,o+1,g),l.setFileName(g.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new z;o=Z.textCompaction(i,o+1,w),l.setSender(w.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new z;o=Z.textCompaction(i,o+1,_),l.setAddressee(_.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new z;o=Z.numericCompaction(i,o+1,I),l.setSegmentCount(N.parseInt(I.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new z;o=Z.numericCompaction(i,o+1,S),l.setTimestamp(sa.parseLong(S.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new z;o=Z.numericCompaction(i,o+1,R),l.setChecksum(N.parseInt(R.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let B=new z;o=Z.numericCompaction(i,o+1,B),l.setFileSize(sa.parseLong(B.toString()));break;default:throw P.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(f!==-1){let g=o-f;l.isLastSegment()&&g--,l.setOptionalData(D.copyOfRange(i,f,f+g))}return o}static textCompaction(i,o,l){let u=new Int32Array((i[0]-o)*2),c=new Int32Array((i[0]-o)*2),f=0,g=!1;for(;o<i[0]&&!g;){let w=i[o++];if(w<Z.TEXT_COMPACTION_MODE_LATCH)u[f]=w/30,u[f+1]=w%30,f+=2;else switch(w){case Z.TEXT_COMPACTION_MODE_LATCH:u[f++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:o--,g=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=i[o++],c[f]=w,f++;break}}return Z.decodeTextCompaction(u,c,f,l),o}static decodeTextCompaction(i,o,l,u){let c=st.ALPHA,f=st.ALPHA,g=0;for(;g<l;){let w=i[g],_="";switch(c){case st.ALPHA:if(w<26)_=String.fromCharCode(65+w);else switch(w){case 26:_=" ";break;case Z.LL:c=st.LOWER;break;case Z.ML:c=st.MIXED;break;case Z.PS:f=c,c=st.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=st.ALPHA;break}break;case st.LOWER:if(w<26)_=String.fromCharCode(97+w);else switch(w){case 26:_=" ";break;case Z.AS:f=c,c=st.ALPHA_SHIFT;break;case Z.ML:c=st.MIXED;break;case Z.PS:f=c,c=st.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=st.ALPHA;break}break;case st.MIXED:if(w<Z.PL)_=Z.MIXED_CHARS[w];else switch(w){case Z.PL:c=st.PUNCT;break;case 26:_=" ";break;case Z.LL:c=st.LOWER;break;case Z.AL:c=st.ALPHA;break;case Z.PS:f=c,c=st.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=st.ALPHA;break}break;case st.PUNCT:if(w<Z.PAL)_=Z.PUNCT_CHARS[w];else switch(w){case Z.PAL:c=st.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=st.ALPHA;break}break;case st.ALPHA_SHIFT:if(c=f,w<26)_=String.fromCharCode(65+w);else switch(w){case 26:_=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=st.ALPHA;break}break;case st.PUNCT_SHIFT:if(c=f,w<Z.PAL)_=Z.PUNCT_CHARS[w];else switch(w){case Z.PAL:c=st.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=st.ALPHA;break}break}_!==""&&u.append(_),g++}}static byteCompaction(i,o,l,u,c){let f=new Zf,g=0,w=0,_=!1;switch(i){case Z.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),S=o[u++];for(;u<o[0]&&!_;)switch(I[g++]=S,w=900*w+S,S=o[u++],S){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,_=!0;break;default:if(g%5===0&&g>0){for(let R=0;R<6;++R)f.write(Number(Hr(w)>>Hr(8*(5-R))));w=0,g=0}break}u===o[0]&&S<Z.TEXT_COMPACTION_MODE_LATCH&&(I[g++]=S);for(let R=0;R<g;R++)f.write(I[R]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;u<o[0]&&!_;){let R=o[u++];if(R<Z.TEXT_COMPACTION_MODE_LATCH)g++,w=900*w+R;else switch(R){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:u--,_=!0;break}if(g%5===0&&g>0){for(let B=0;B<6;++B)f.write(Number(Hr(w)>>Hr(8*(5-B))));w=0,g=0}}break}return c.append(W.decode(f.toByteArray(),l)),u}static numericCompaction(i,o,l){let u=0,c=!1,f=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!c;){let g=i[o++];if(o===i[0]&&(c=!0),g<Z.TEXT_COMPACTION_MODE_LATCH)f[u]=g,u++;else switch(g){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:o--,c=!0;break}(u%Z.MAX_NUMERIC_CODEWORDS===0||g===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(l.append(Z.decodeBase900toBase10(f,u)),u=0)}return o}static decodeBase900toBase10(i,o){let l=Hr(0);for(let c=0;c<o;c++)l+=Z.EXP900[o-c-1]*Hr(i[c]);let u=l.toString();if(u.charAt(0)!=="1")throw new P;return u.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=ps()?Il():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ve{constructor(){}static decode(i,o,l,u,c,f,g){let w=new Fi(i,o,l,u,c),_=null,I=null,S;for(let G=!0;;G=!1){if(o!=null&&(_=Ve.getRowIndicatorColumn(i,w,o,!0,f,g)),u!=null&&(I=Ve.getRowIndicatorColumn(i,w,u,!1,f,g)),S=Ve.merge(_,I),S==null)throw J.getNotFoundInstance();let K=S.getBoundingBox();if(G&&K!=null&&(K.getMinY()<w.getMinY()||K.getMaxY()>w.getMaxY()))w=K;else break}S.setBoundingBox(w);let R=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,_),S.setDetectionResultColumn(R,I);let B=_!=null;for(let G=1;G<=R;G++){let K=B?G:R-G;if(S.getDetectionResultColumn(K)!==void 0)continue;let Q;K===0||K===R?Q=new jr(w,K===0):Q=new ds(w),S.setDetectionResultColumn(K,Q);let te=-1,fe=te;for(let de=w.getMinY();de<=w.getMaxY();de++){if(te=Ve.getStartColumn(S,K,de,B),te<0||te>w.getMaxX()){if(fe===-1)continue;te=fe}let ue=Ve.detectCodeword(i,w.getMinX(),w.getMaxX(),B,te,de,f,g);ue!=null&&(Q.setCodeword(de,ue),fe=te,f=Math.min(f,ue.getWidth()),g=Math.max(g,ue.getWidth()))}}return Ve.createDecoderResult(S)}static merge(i,o){if(i==null&&o==null)return null;let l=Ve.getBarcodeMetadata(i,o);if(l==null)return null;let u=Fi.merge(Ve.adjustBoundingBox(i),Ve.adjustBoundingBox(o));return new gs(l,u)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=Ve.getMax(o),u=0;for(let g of o)if(u+=l-g,g>0)break;let c=i.getCodewords();for(let g=0;u>0&&c[g]==null;g++)u--;let f=0;for(let g=o.length-1;g>=0&&(f+=l-o[g],!(o[g]>0));g--);for(let g=c.length-1;f>0&&c[g]==null;g--)f--;return i.getBoundingBox().addMissingRows(u,f,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let u;return o==null||(u=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,u,c,f){let g=new jr(o,u);for(let w=0;w<2;w++){let _=w===0?1:-1,I=Math.trunc(Math.trunc(l.getX()));for(let S=Math.trunc(Math.trunc(l.getY()));S<=o.getMaxY()&&S>=o.getMinY();S+=_){let R=Ve.detectCodeword(i,0,i.getWidth(),u,I,S,c,f);R!=null&&(g.setCodeword(S,R),u?I=R.getStartX():I=R.getEndX())}}return g}static adjustCodewordCount(i,o){let l=o[0][1],u=l.getValue(),c=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ve.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(c<1||c>Re.MAX_CODEWORDS_IN_BARCODE)throw J.getNotFoundInstance();l.setValue(c)}else u[0]!==c&&l.setValue(c)}static createDecoderResult(i){let o=Ve.createBarcodeMatrix(i);Ve.adjustCodewordCount(i,o);let l=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),c=[],f=new Array;for(let w=0;w<i.getBarcodeRowCount();w++)for(let _=0;_<i.getBarcodeColumnCount();_++){let I=o[w][_+1].getValue(),S=w*i.getBarcodeColumnCount()+_;I.length===0?l.push(S):I.length===1?u[S]=I[0]:(f.push(S),c.push(I))}let g=new Array(c.length);for(let w=0;w<g.length;w++)g[w]=c[w];return Ve.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,Re.toIntArray(l),Re.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(i,o,l,u,c){let f=new Int32Array(u.length),g=100;for(;g-- >0;){for(let w=0;w<f.length;w++)o[u[w]]=c[w][f[w]];try{return Ve.decodeCodewords(o,i,l)}catch(w){if(!(w instanceof O))throw w}if(f.length===0)throw O.getChecksumInstance();for(let w=0;w<f.length;w++)if(f[w]<c[w].length-1){f[w]++;break}else if(f[w]=0,w===f.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<o.length;u++)for(let c=0;c<o[u].length;c++)o[u][c]=new li;let l=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=o.length)continue;o[f][l].setValue(c.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,u){let c=u?1:-1,f=null;if(Ve.isValidBarcodeColumn(i,o-c)&&(f=i.getDetectionResultColumn(o-c).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=i.getDetectionResultColumn(o).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(Ve.isValidBarcodeColumn(i,o-c)&&(f=i.getDetectionResultColumn(o-c).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let g=0;for(;Ve.isValidBarcodeColumn(i,o-c);){o-=c;for(let w of i.getDetectionResultColumn(o).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+c*g*(w.getEndX()-w.getStartX());g++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,u,c,f,g,w){c=Ve.adjustCodewordStartColumn(i,o,l,u,c,f);let _=Ve.getModuleBitCount(i,o,l,u,c,f);if(_==null)return null;let I,S=be.sum(_);if(u)I=c+S;else{for(let G=0;G<_.length/2;G++){let K=_[G];_[G]=_[_.length-1-G],_[_.length-1-G]=K}I=c,c=I-S}if(!Ve.checkCodewordSkew(S,g,w))return null;let R=$t.getDecodedValue(_),B=Re.getCodeword(R);return B===-1?null:new co(c,I,Ve.getCodewordBucketNumber(R),B)}static getModuleBitCount(i,o,l,u,c,f){let g=c,w=new Int32Array(8),_=0,I=u?1:-1,S=u;for(;(u?g<l:g>=o)&&_<w.length;)i.get(g,f)===S?(w[_]++,g+=I):(_++,S=!S);return _===w.length||g===(u?l:o)&&_===w.length-1?w:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,u,c,f){let g=c,w=u?-1:1;for(let _=0;_<2;_++){for(;(u?g>=o:g<l)&&u===i.get(g,f);){if(Math.abs(c-g)>Ve.CODEWORD_SKEW_SIZE)return c;g+=w}w=-w,u=!u}return g}static checkCodewordSkew(i,o,l){return o-Ve.CODEWORD_SKEW_SIZE<=i&&i<=l+Ve.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw P.getFormatInstance();let u=1<<o+1,c=Ve.correctErrors(i,l,u);Ve.verifyCodewordCount(i,u);let f=Z.decode(i,""+o);return f.setErrorsCorrected(c),f.setErasures(l.length),f}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+Ve.MAX_ERRORS||l<0||l>Ve.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Ve.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw P.getFormatInstance();let l=i[0];if(l>i.length)throw P.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw P.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,u=o.length-1;for(;!((i&1)!==l&&(l=i&1,u--,u<0));)o[u]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ve.getCodewordBucketNumber(Ve.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new fs;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let u=0;u<i[l].length;u++){let c=i[l][u];c.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}o.format("%n")}return o.toString()}}Ve.CODEWORD_SKEW_SIZE=2,Ve.MAX_ERRORS=3,Ve.MAX_EC_CODEWORDS=512,Ve.errorCorrection=new rc;class Ft{decode(i,o=null){let l=Ft.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw J.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return Ft.decode(i,o,!0)}catch(l){throw l instanceof P||l instanceof O?J.getNotFoundInstance():l}}static decode(i,o,l){const u=new Array,c=ke.detectMultiple(i,o,l);for(const f of c.getPoints()){const g=Ve.decode(c.getBits(),f[4],f[5],f[6],f[7],Ft.getMinCodewordWidth(f),Ft.getMaxCodewordWidth(f)),w=new at(g.getText(),g.getRawBytes(),void 0,f,xe.PDF_417);w.putMetadata(Lt.ERROR_CORRECTION_LEVEL,g.getECLevel());const _=g.getOther();_!=null&&w.putMetadata(Lt.PDF417_EXTRA_METADATA,_),u.push(w)}return u.map(f=>f)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?N.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Ft.getMaxWidth(i[0],i[4]),Ft.getMaxWidth(i[6],i[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.max(Ft.getMaxWidth(i[1],i[5]),Ft.getMaxWidth(i[7],i[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Ft.getMinWidth(i[0],i[4]),Ft.getMinWidth(i[6],i[2])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN),Math.min(Ft.getMinWidth(i[1],i[5]),Ft.getMinWidth(i[7],i[3])*Re.MODULES_IN_CODEWORD/Re.MODULES_IN_STOP_PATTERN)))}reset(){}}class go extends m{}go.kind="ReaderException";class Cl{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!r(i)&&i.get(re.TRY_HARDER)===!0,l=r(i)?null:i.get(re.POSSIBLE_FORMATS),u=new Array;if(!r(l)){const c=l.some(f=>f===xe.UPC_A||f===xe.UPC_E||f===xe.EAN_13||f===xe.EAN_8||f===xe.CODABAR||f===xe.CODE_39||f===xe.CODE_93||f===xe.CODE_128||f===xe.ITF||f===xe.RSS_14||f===xe.RSS_EXPANDED);c&&!o&&u.push(new oi(i,this.verbose)),l.includes(xe.QR_CODE)&&u.push(new ur),l.includes(xe.DATA_MATRIX)&&u.push(new lr),l.includes(xe.AZTEC)&&u.push(new oo),l.includes(xe.PDF_417)&&u.push(new Ft),c&&o&&u.push(new oi(i,this.verbose))}u.length===0&&(o||u.push(new oi(i,this.verbose)),u.push(new ur),u.push(new lr),u.push(new oo),u.push(new Ft),o&&u.push(new oi(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new go("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof go)continue}throw new J("No MultiFormat Readers were able to detect the code.")}}class Bi extends wn{constructor(i=null,o=500){const l=new Cl;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class oc extends wn{constructor(i=500){super(new Ft,i)}}class ac extends wn{constructor(i=500){super(new ur,i)}}var aa;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(aa||(aa={}));var Bt=aa;class ms{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Rn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const u=this.field;for(let c=o.length;c<=i;c++){const f=l.multiply(new Rn(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));o.push(f),l=f}}return o[i]}encode(i,o){if(o===0)throw new x("No error correction bytes");const l=i.length-o;if(l<=0)throw new x("No data bytes provided");const u=this.buildGenerator(o),c=new Int32Array(l);U.arraycopy(i,0,c,0,l);let f=new Rn(this.field,c);f=f.multiplyByMonomial(o,1);const w=f.divide(u)[1].getCoefficients(),_=o-w.length;for(let I=0;I<_;I++)i[l+I]=0;U.arraycopy(w,0,i,l+_,w.length)}}class Ge{constructor(){}static applyMaskPenaltyRule1(i){return Ge.applyMaskPenaltyRule1Internal(i,!0)+Ge.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),u=i.getWidth(),c=i.getHeight();for(let f=0;f<c-1;f++){const g=l[f];for(let w=0;w<u-1;w++){const _=g[w];_===g[w+1]&&_===l[f+1][w]&&_===l[f+1][w+1]&&o++}}return Ge.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),u=i.getWidth(),c=i.getHeight();for(let f=0;f<c;f++)for(let g=0;g<u;g++){const w=l[f];g+6<u&&w[g]===1&&w[g+1]===0&&w[g+2]===1&&w[g+3]===1&&w[g+4]===1&&w[g+5]===0&&w[g+6]===1&&(Ge.isWhiteHorizontal(w,g-4,g)||Ge.isWhiteHorizontal(w,g+7,g+11))&&o++,f+6<c&&l[f][g]===1&&l[f+1][g]===0&&l[f+2][g]===1&&l[f+3][g]===1&&l[f+4][g]===1&&l[f+5][g]===0&&l[f+6][g]===1&&(Ge.isWhiteVertical(l,g,f-4,f)||Ge.isWhiteVertical(l,g,f+7,f+11))&&o++}return o*Ge.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let u=o;u<l;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,o,l,u){l=Math.max(l,0),u=Math.min(u,i.length);for(let c=l;c<u;c++)if(i[c][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),u=i.getWidth(),c=i.getHeight();for(let w=0;w<c;w++){const _=l[w];for(let I=0;I<u;I++)_[I]===1&&o++}const f=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-f)*10/f)*Ge.N4}static getDataMaskBit(i,o,l){let u,c;switch(i){case 0:u=l+o&1;break;case 1:u=l&1;break;case 2:u=o%3;break;case 3:u=(l+o)%3;break;case 4:u=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:c=l*o,u=(c&1)+c%3;break;case 6:c=l*o,u=(c&1)+c%3&1;break;case 7:c=l*o,u=c%3+(l+o&1)&1;break;default:throw new x("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const u=o?i.getHeight():i.getWidth(),c=o?i.getWidth():i.getHeight(),f=i.getArray();for(let g=0;g<u;g++){let w=0,_=-1;for(let I=0;I<c;I++){const S=o?f[g][I]:f[I][g];S===_?w++:(w>=5&&(l+=Ge.N1+(w-5)),w=1,_=S)}w>=5&&(l+=Ge.N1+(w-5))}return l}}Ge.N1=3,Ge.N2=3,Ge.N3=40,Ge.N4=10;class po{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let u=0;u!==o;u++)l[u]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)D.fill(o,i)}equals(i){if(!(i instanceof po))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,u=this.height;l<u;++l){const c=this.bytes[l],f=o.bytes[l];for(let g=0,w=this.width;g<w;++g)if(c[g]!==f[g])return!1}return!0}toString(){const i=new z;for(let o=0,l=this.height;o<l;++o){const u=this.bytes[o];for(let c=0,f=this.width;c<f;++c)switch(u[c]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new z;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class et extends m{}et.kind="WriterException";class d{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,u,c){d.clearMatrix(c),d.embedBasicPatterns(l,c),d.embedTypeInfo(o,u,c),d.maybeEmbedVersionInfo(l,c),d.embedDataBits(i,u,c)}static embedBasicPatterns(i,o){d.embedPositionDetectionPatternsAndSeparators(o),d.embedDarkDotAtLeftBottomCorner(o),d.maybeEmbedPositionAdjustmentPatterns(i,o),d.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const u=new q;d.makeTypeInfoBits(i,o,u);for(let c=0,f=u.getSize();c<f;++c){const g=u.get(u.getSize()-1-c),w=d.TYPE_INFO_COORDINATES[c],_=w[0],I=w[1];if(l.setBoolean(_,I,g),c<8){const S=l.getWidth()-c-1;l.setBoolean(S,8,g)}else{const R=l.getHeight()-7+(c-8);l.setBoolean(8,R,g)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new q;d.makeVersionInfoBits(i,l);let u=6*3-1;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const g=l.get(u);u--,o.setBoolean(c,o.getHeight()-11+f,g),o.setBoolean(o.getHeight()-11+f,c,g)}}static embedDataBits(i,o,l){let u=0,c=-1,f=l.getWidth()-1,g=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);g>=0&&g<l.getHeight();){for(let w=0;w<2;++w){const _=f-w;if(!d.isEmpty(l.get(_,g)))continue;let I;u<i.getSize()?(I=i.get(u),++u):I=!1,o!==255&&Ge.getDataMaskBit(o,_,g)&&(I=!I),l.setBoolean(_,g,I)}g+=c}c=-c,g+=c,f-=2}if(u!==i.getSize())throw new et("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-N.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new x("0 polynomial");const l=d.findMSBSet(o);for(i<<=l-1;d.findMSBSet(i)>=l;)i^=o<<d.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!ui.isValidMaskPattern(o))throw new et("Invalid mask pattern");const u=i.getBits()<<3|o;l.appendBits(u,5);const c=d.calculateBCHCode(u,d.TYPE_INFO_POLY);l.appendBits(c,10);const f=new q;if(f.appendBits(d.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new et("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=d.calculateBCHCode(i.getVersionNumber(),d.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new et("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;d.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),d.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new et;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let u=0;u<8;++u){if(!d.isEmpty(l.get(i+u,o)))throw new et;l.setNumber(i+u,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let u=0;u<7;++u){if(!d.isEmpty(l.get(i,o+u)))throw new et;l.setNumber(i,o+u,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let u=0;u<5;++u){const c=d.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(i+f,o+u,c[f])}}static embedPositionDetectionPattern(i,o,l){for(let u=0;u<7;++u){const c=d.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(i+f,o+u,c[f])}}static embedPositionDetectionPatternsAndSeparators(i){const o=d.POSITION_DETECTION_PATTERN[0].length;d.embedPositionDetectionPattern(0,0,i),d.embedPositionDetectionPattern(i.getWidth()-o,0,i),d.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;d.embedHorizontalSeparationPattern(0,l-1,i),d.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),d.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const u=7;d.embedVerticalSeparationPattern(u,0,i),d.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),d.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,u=d.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let c=0,f=u.length;c!==f;c++){const g=u[c];if(g>=0)for(let w=0;w!==f;w++){const _=u[w];_>=0&&d.isEmpty(o.get(_,g))&&d.embedPositionAdjustmentPattern(_-2,g-2,o)}}}}d.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),d.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),d.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),d.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),d.VERSION_INFO_POLY=7973,d.TYPE_INFO_POLY=1335,d.TYPE_INFO_MASK_PATTERN=21522;class A{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class C{constructor(){}static calculateMaskPenalty(i){return Ge.applyMaskPenaltyRule1(i)+Ge.applyMaskPenaltyRule2(i)+Ge.applyMaskPenaltyRule3(i)+Ge.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let u=C.DEFAULT_BYTE_MODE_ENCODING;const c=l!==null&&l.get(Bt.CHARACTER_SET)!==void 0;c&&(u=l.get(Bt.CHARACTER_SET).toString());const f=this.chooseMode(i,u),g=new q;if(f===ve.BYTE&&(c||C.DEFAULT_BYTE_MODE_ENCODING!==u)){const de=b.getCharacterSetECIByName(u);de!==void 0&&this.appendECI(de,g)}this.appendModeInfo(f,g);const w=new q;this.appendBytes(i,f,w,u);let _;if(l!==null&&l.get(Bt.QR_VERSION)!==void 0){const de=Number.parseInt(l.get(Bt.QR_VERSION).toString(),10);_=Ie.getVersionForNumber(de);const ue=this.calculateBitsNeeded(f,g,w,_);if(!this.willFit(ue,_,o))throw new et("Data too big for requested version")}else _=this.recommendVersion(o,f,g,w);const I=new q;I.appendBitArray(g);const S=f===ve.BYTE?w.getSizeInBytes():i.length;this.appendLengthInfo(S,_,f,I),I.appendBitArray(w);const R=_.getECBlocksForLevel(o),B=_.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(B,I);const G=this.interleaveWithECBytes(I,_.getTotalCodewords(),B,R.getNumBlocks()),K=new ui;K.setECLevel(o),K.setMode(f),K.setVersion(_);const Q=_.getDimensionForVersion(),te=new po(Q,Q),fe=this.chooseMaskPattern(G,o,_,te);return K.setMaskPattern(fe),d.buildMatrix(G,o,_,fe,te),K.setMatrix(te),K}static recommendVersion(i,o,l,u){const c=this.calculateBitsNeeded(o,l,u,Ie.getVersionForNumber(1)),f=this.chooseVersion(c,i),g=this.calculateBitsNeeded(o,l,u,f);return this.chooseVersion(g,i)}static calculateBitsNeeded(i,o,l,u){return o.getSize()+i.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(i){return i<C.ALPHANUMERIC_TABLE.length?C.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(b.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return ve.KANJI;let l=!1,u=!1;for(let c=0,f=i.length;c<f;++c){const g=i.charAt(c);if(C.isDigit(g))l=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)u=!0;else return ve.BYTE}return u?ve.ALPHANUMERIC:l?ve.NUMERIC:ve.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=W.encode(i,b.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const c=o[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(i,o,l,u){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<ui.NUM_MASK_PATTERNS;g++){d.buildMatrix(i,o,l,g,u);let w=this.calculateMaskPenalty(u);w<c&&(c=w,f=g)}return f}static chooseVersion(i,o){for(let l=1;l<=40;l++){const u=Ie.getVersionForNumber(l);if(C.willFit(i,u,o))return u}throw new et("Data too big")}static willFit(i,o,l){const u=o.getTotalCodewords(),f=o.getECBlocksForLevel(l).getTotalECCodewords(),g=u-f,w=(i+7)/8;return g>=w}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new et("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let f=0;f<4&&o.getSize()<l;++f)o.appendBit(!1);const u=o.getSize()&7;if(u>0)for(let f=u;f<8;f++)o.appendBit(!1);const c=i-o.getSizeInBytes();for(let f=0;f<c;++f)o.appendBits(f&1?17:236,8);if(o.getSize()!==l)throw new et("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,u,c,f){if(u>=l)throw new et("Block ID too large");const g=i%l,w=l-g,_=Math.floor(i/l),I=_+1,S=Math.floor(o/l),R=S+1,B=_-S,G=I-R;if(B!==G)throw new et("EC bytes mismatch");if(l!==w+g)throw new et("RS blocks mismatch");if(i!==(S+B)*w+(R+G)*g)throw new et("Total bytes mismatch");u<w?(c[0]=S,f[0]=B):(c[0]=R,f[0]=G)}static interleaveWithECBytes(i,o,l,u){if(i.getSizeInBytes()!==l)throw new et("Number of bits and data bytes does not match");let c=0,f=0,g=0;const w=new Array;for(let I=0;I<u;++I){const S=new Int32Array(1),R=new Int32Array(1);C.getNumDataBytesAndNumECBytesForBlockID(o,l,u,I,S,R);const B=S[0],G=new Uint8Array(B);i.toBytes(8*c,G,0,B);const K=C.generateECBytes(G,R[0]);w.push(new A(G,K)),f=Math.max(f,B),g=Math.max(g,K.length),c+=S[0]}if(l!==c)throw new et("Data bytes does not match offset");const _=new q;for(let I=0;I<f;++I)for(const S of w){const R=S.getDataBytes();I<R.length&&_.appendBits(R[I],8)}for(let I=0;I<g;++I)for(const S of w){const R=S.getErrorCorrectionBytes();I<R.length&&_.appendBits(R[I],8)}if(o!==_.getSizeInBytes())throw new et("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(i,o){const l=i.length,u=new Int32Array(l+o);for(let f=0;f<l;f++)u[f]=i[f]&255;new ms(Qe.QR_CODE_FIELD_256).encode(u,o);const c=new Uint8Array(o);for(let f=0;f<o;f++)c[f]=u[l+f];return c}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,u){const c=l.getCharacterCountBits(o);if(i>=1<<c)throw new et(i+" is bigger than "+((1<<c)-1));u.appendBits(i,c)}static appendBytes(i,o,l,u){switch(o){case ve.NUMERIC:C.appendNumericBytes(i,l);break;case ve.ALPHANUMERIC:C.appendAlphanumericBytes(i,l);break;case ve.BYTE:C.append8BitBytes(i,l,u);break;case ve.KANJI:C.appendKanjiBytes(i,l);break;default:throw new et("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=C.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let u=0;for(;u<l;){const c=C.getDigit(i.charAt(u));if(u+2<l){const f=C.getDigit(i.charAt(u+1)),g=C.getDigit(i.charAt(u+2));o.appendBits(c*100+f*10+g,10),u+=3}else if(u+1<l){const f=C.getDigit(i.charAt(u+1));o.appendBits(c*10+f,7),u+=2}else o.appendBits(c,4),u++}}static appendAlphanumericBytes(i,o){const l=i.length;let u=0;for(;u<l;){const c=C.getAlphanumericCode(i.charCodeAt(u));if(c===-1)throw new et;if(u+1<l){const f=C.getAlphanumericCode(i.charCodeAt(u+1));if(f===-1)throw new et;o.appendBits(c*45+f,11),u+=2}else o.appendBits(c,6),u++}}static append8BitBytes(i,o,l){let u;try{u=W.encode(i,l)}catch(c){throw new et(c)}for(let c=0,f=u.length;c!==f;c++){const g=u[c];o.appendBits(g,8)}}static appendKanjiBytes(i,o){let l;try{l=W.encode(i,b.SJIS)}catch(c){throw new et(c)}const u=l.length;for(let c=0;c<u;c+=2){const f=l[c]&255,g=l[c+1]&255,w=f<<8&4294967295|g;let _=-1;if(w>=33088&&w<=40956?_=w-33088:w>=57408&&w<=60351&&(_=w-49472),_===-1)throw new et("Invalid byte sequence");const I=(_>>8)*192+(_&255);o.appendBits(I,13)}}static appendECI(i,o){o.appendBits(ve.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}C.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),C.DEFAULT_BYTE_MODE_ENCODING=b.UTF8.getName();class M{write(i,o,l,u=null){if(i.length===0)throw new x("Found empty contents");if(o<0||l<0)throw new x("Requested dimensions are too small: "+o+"x"+l);let c=dt.L,f=M.QUIET_ZONE_SIZE;u!==null&&(u.get(Bt.ERROR_CORRECTION)!==void 0&&(c=dt.fromString(u.get(Bt.ERROR_CORRECTION).toString())),u.get(Bt.MARGIN)!==void 0&&(f=Number.parseInt(u.get(Bt.MARGIN).toString(),10)));const g=C.encode(i,c,u);return this.renderResult(g,o,l,f)}writeToDom(i,o,l,u,c=null){typeof i=="string"&&(i=document.querySelector(i));const f=this.write(o,l,u,c);i&&i.appendChild(f)}renderResult(i,o,l,u){const c=i.getMatrix();if(c===null)throw new Ar;const f=c.getWidth(),g=c.getHeight(),w=f+u*2,_=g+u*2,I=Math.max(o,w),S=Math.max(l,_),R=Math.min(Math.floor(I/w),Math.floor(S/_)),B=Math.floor((I-f*R)/2),G=Math.floor((S-g*R)/2),K=this.createSVGElement(I,S);for(let Q=0,te=G;Q<g;Q++,te+=R)for(let fe=0,de=B;fe<f;fe++,de+=R)if(c.get(fe,Q)===1){const ue=this.createSvgRectElement(de,te,R,R);K.appendChild(ue)}return K}createSVGElement(i,o){const l=document.createElementNS(M.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,u){const c=document.createElementNS(M.SVG_NS,"rect");return c.setAttributeNS(null,"x",i.toString()),c.setAttributeNS(null,"y",o.toString()),c.setAttributeNS(null,"height",l.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}M.QUIET_ZONE_SIZE=4,M.SVG_NS="http://www.w3.org/2000/svg";class Y{encode(i,o,l,u,c){if(i.length===0)throw new x("Found empty contents");if(o!==xe.QR_CODE)throw new x("Can only encode QR_CODE, but got "+o);if(l<0||u<0)throw new x(`Requested dimensions are too small: ${l}x${u}`);let f=dt.L,g=Y.QUIET_ZONE_SIZE;c!==null&&(c.get(Bt.ERROR_CORRECTION)!==void 0&&(f=dt.fromString(c.get(Bt.ERROR_CORRECTION).toString())),c.get(Bt.MARGIN)!==void 0&&(g=Number.parseInt(c.get(Bt.MARGIN).toString(),10)));const w=C.encode(i,f,c);return Y.renderResult(w,l,u,g)}static renderResult(i,o,l,u){const c=i.getMatrix();if(c===null)throw new Ar;const f=c.getWidth(),g=c.getHeight(),w=f+u*2,_=g+u*2,I=Math.max(o,w),S=Math.max(l,_),R=Math.min(Math.floor(I/w),Math.floor(S/_)),B=Math.floor((I-f*R)/2),G=Math.floor((S-g*R)/2),K=new Le(I,S);for(let Q=0,te=G;Q<g;Q++,te+=R)for(let fe=0,de=B;fe<f;fe++,de+=R)c.get(fe,Q)===1&&K.setRegion(de,te,R,R);return K}}Y.QUIET_ZONE_SIZE=4;class ee{encode(i,o,l,u,c){let f;switch(o){case xe.QR_CODE:f=new Y;break;default:throw new x("No encoder available for format "+o)}return f.encode(i,o,l,u,c)}}class he extends pe{constructor(i,o,l,u,c,f,g,w){if(super(f,g),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=u,this.top=c,u+f>o||c+g>l)throw new x("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(f,g)}getRow(i,o){if(i<0||i>=this.getHeight())throw new x("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return U.arraycopy(this.yuvData,u,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,u=new Uint8ClampedArray(l);let c=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return U.arraycopy(this.yuvData,c,u,0,l),u;for(let f=0;f<o;f++){const g=f*i;U.arraycopy(this.yuvData,c,u,g,i),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,o,l,u){return new he(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,u,!1)}renderThumbnail(){const i=this.getWidth()/he.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/he.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<o;f++){const g=f*i;for(let w=0;w<i;w++){const _=u[c+w*he.THUMBNAIL_SCALE_FACTOR]&255;l[g+w]=4278190080|_*65793}c+=this.dataWidth*he.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/he.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/he.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<o;u++,c+=this.dataWidth){const f=c+i/2;for(let g=c,w=c+i-1;g<f;g++,w--){const _=l[g];l[g]=l[w],l[w]=_}}}invert(){return new Ae(this)}}he.THUMBNAIL_SCALE_FACTOR=2;class Fe extends pe{constructor(i,o,l,u,c,f,g){if(super(o,l),this.dataWidth=u,this.dataHeight=c,this.left=f,this.top=g,i.BYTES_PER_ELEMENT===4){const w=o*l,_=new Uint8ClampedArray(w);for(let I=0;I<w;I++){const S=i[I],R=S>>16&255,B=S>>7&510,G=S&255;_[I]=(R+B+G)/4&255}this.luminances=_}else this.luminances=i;if(u===void 0&&(this.dataWidth=o),c===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new x("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new x("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return U.arraycopy(this.luminances,u,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,u=new Uint8ClampedArray(l);let c=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return U.arraycopy(this.luminances,c,u,0,l),u;for(let f=0;f<o;f++){const g=f*i;U.arraycopy(this.luminances,c,u,g,i),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,o,l,u){return new Fe(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new Ae(this)}}class Vt extends b{static forName(i){return this.getCharacterSetECIByName(i)}}class ot{}ot.ISO_8859_1=b.ISO8859_1;class Wt{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class cr{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class Vi{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Bn extends Vi{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Bn(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Bn(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+N.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Rr extends Bn{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new Rr(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function la(T,i,o){return new Rr(T,i,o)}function Ui(T,i,o){return new Bn(T,i,o)}const lI=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ys=0,lc=1,Nr=2,fp=3,ci=4,uI=new Bn(null,0,0),Jf=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function cI(T){for(let i of T)D.fill(i,-1);return T[ys][ci]=0,T[lc][ci]=0,T[lc][ys]=28,T[fp][ci]=0,T[Nr][ci]=0,T[Nr][ys]=15,T}const dp=cI(D.createInt32Array(6,6));class hi{constructor(i,o,l,u){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,u=this.token;if(i!==this.mode){let f=Jf[this.mode][i];u=Ui(u,f&65535,f>>16),l+=f>>16}let c=i===Nr?4:5;return u=Ui(u,o,c),new hi(u,i,0,l+c)}shiftAndAppend(i,o){let l=this.token,u=this.mode===Nr?4:5;return l=Ui(l,dp[this.mode][i],u),l=Ui(l,o,5),new hi(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,u=this.bitCount;if(this.mode===ci||this.mode===Nr){let g=Jf[l][ys];o=Ui(o,g&65535,g>>16),u+=g>>16,l=ys}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new hi(o,l,this.binaryShiftByteCount+1,u+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(i+1)),f}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=la(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new hi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(Jf[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=hi.calculateBinaryShiftCost(i)-hi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())o.unshift(u);let l=new q;for(const u of o)u.appendTo(l,i);return l}toString(){return X.format("%s bits=%d bytes=%d",lI[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}hi.INITIAL_STATE=new hi(uI,ys,0,0);function hI(T){const i=X.getCharCode(" "),o=X.getCharCode("."),l=X.getCharCode(",");T[ys][i]=1;const u=X.getCharCode("Z"),c=X.getCharCode("A");for(let R=c;R<=u;R++)T[ys][R]=R-c+2;T[lc][i]=1;const f=X.getCharCode("z"),g=X.getCharCode("a");for(let R=g;R<=f;R++)T[lc][R]=R-g+2;T[Nr][i]=1;const w=X.getCharCode("9"),_=X.getCharCode("0");for(let R=_;R<=w;R++)T[Nr][R]=R-_+2;T[Nr][l]=12,T[Nr][o]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<I.length;R++)T[fp][X.getCharCode(I[R])]=R;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<S.length;R++)X.getCharCode(S[R])>0&&(T[ci][X.getCharCode(S[R])]=R);return T}const ed=hI(D.createInt32Array(5,256));class vl{constructor(i){this.text=i}encode(){const i=X.getCharCode(" "),o=X.getCharCode(`
`);let l=cr.singletonList(hi.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case X.getCharCode("\r"):f=g===o?2:0;break;case X.getCharCode("."):f=g===i?3:0;break;case X.getCharCode(","):f=g===i?4:0;break;case X.getCharCode(":"):f=g===i?5:0;break;default:f=0}f>0?(l=vl.updateStateListForPair(l,c,f),c++):l=this.updateStateListForChar(l,c)}return cr.min(l,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let u of i)this.updateStateForChar(u,o,l);return vl.simplifyStates(l)}updateStateForChar(i,o,l){let u=this.text[o]&255,c=ed[i.getMode()][u]>0,f=null;for(let g=0;g<=ci;g++){let w=ed[g][u];if(w>0){if(f==null&&(f=i.endBinaryShift(o)),!c||g===i.getMode()||g===Nr){const _=f.latchAndAppend(g,w);l.push(_)}if(!c&&dp[i.getMode()][g]>=0){const _=f.shiftAndAppend(g,w);l.push(_)}}}if(i.getBinaryShiftByteCount()>0||ed[i.getMode()][u]===0){let g=i.addBinaryShiftChar(o);l.push(g)}}static updateStateListForPair(i,o,l){const u=[];for(let c of i)this.updateStateForPair(c,o,l,u);return this.simplifyStates(u)}static updateStateForPair(i,o,l,u){let c=i.endBinaryShift(o);if(u.push(c.latchAndAppend(ci,l)),i.getMode()!==ci&&u.push(c.shiftAndAppend(ci,l)),l===3||l===4){let f=c.latchAndAppend(Nr,16-l).latchAndAppend(Nr,1);u.push(f)}if(i.getBinaryShiftByteCount()>0){let f=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);u.push(f)}}static simplifyStates(i){let o=[];for(const l of i){let u=!0;for(const c of o){if(c.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(c)&&(o=o.filter(f=>f!==c))}u&&o.push(l)}return o}}class rt{constructor(){}static encodeBytes(i){return rt.encode(i,rt.DEFAULT_EC_PERCENT,rt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let u=new vl(i).encode(),c=N.truncDivision(u.getSize()*o,100)+11,f=u.getSize()+c,g,w,_,I,S;if(l!==rt.DEFAULT_AZTEC_LAYERS){if(g=l<0,w=Math.abs(l),w>(g?rt.MAX_NB_BITS_COMPACT:rt.MAX_NB_BITS))throw new x(X.format("Illegal value %s for layers",l));_=rt.totalBitsInLayer(w,g),I=rt.WORD_SIZE[w];let ue=_-_%I;if(S=rt.stuffBits(u,I),S.getSize()+c>ue)throw new x("Data to large for user specified layer");if(g&&S.getSize()>I*64)throw new x("Data to large for user specified layer")}else{I=0,S=null;for(let ue=0;;ue++){if(ue>rt.MAX_NB_BITS)throw new x("Data too large for an Aztec code");if(g=ue<=3,w=g?ue+1:ue,_=rt.totalBitsInLayer(w,g),f>_)continue;(S==null||I!==rt.WORD_SIZE[w])&&(I=rt.WORD_SIZE[w],S=rt.stuffBits(u,I));let Xe=_-_%I;if(!(g&&S.getSize()>I*64)&&S.getSize()+c<=Xe)break}}let R=rt.generateCheckWords(S,_,I),B=S.getSize()/I,G=rt.generateModeMessage(g,w,B),K=(g?11:14)+w*4,Q=new Int32Array(K),te;if(g){te=K;for(let ue=0;ue<Q.length;ue++)Q[ue]=ue}else{te=K+1+2*N.truncDivision(N.truncDivision(K,2)-1,15);let ue=N.truncDivision(K,2),Xe=N.truncDivision(te,2);for(let Ue=0;Ue<ue;Ue++){let Kn=Ue+N.truncDivision(Ue,15);Q[ue-Ue-1]=Xe-Kn-1,Q[ue+Ue]=Xe+Kn+1}}let fe=new Le(te);for(let ue=0,Xe=0;ue<w;ue++){let Ue=(w-ue)*4+(g?9:12);for(let Kn=0;Kn<Ue;Kn++){let Wr=Kn*2;for(let qn=0;qn<2;qn++)R.get(Xe+Wr+qn)&&fe.set(Q[ue*2+qn],Q[ue*2+Kn]),R.get(Xe+Ue*2+Wr+qn)&&fe.set(Q[ue*2+Kn],Q[K-1-ue*2-qn]),R.get(Xe+Ue*4+Wr+qn)&&fe.set(Q[K-1-ue*2-qn],Q[K-1-ue*2-Kn]),R.get(Xe+Ue*6+Wr+qn)&&fe.set(Q[K-1-ue*2-Kn],Q[ue*2+qn])}Xe+=Ue*8}if(rt.drawModeMessage(fe,g,te,G),g)rt.drawBullsEye(fe,N.truncDivision(te,2),5);else{rt.drawBullsEye(fe,N.truncDivision(te,2),7);for(let ue=0,Xe=0;ue<N.truncDivision(K,2)-1;ue+=15,Xe+=16)for(let Ue=N.truncDivision(te,2)&1;Ue<te;Ue+=2)fe.set(N.truncDivision(te,2)-Xe,Ue),fe.set(N.truncDivision(te,2)+Xe,Ue),fe.set(Ue,N.truncDivision(te,2)-Xe),fe.set(Ue,N.truncDivision(te,2)+Xe)}let de=new Wt;return de.setCompact(g),de.setSize(te),de.setLayers(w),de.setCodeWords(B),de.setMatrix(fe),de}static drawBullsEye(i,o,l){for(let u=0;u<l;u+=2)for(let c=o-u;c<=o+u;c++)i.set(c,o-u),i.set(c,o+u),i.set(o-u,c),i.set(o+u,c);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let u=new q;return i?(u.appendBits(o-1,2),u.appendBits(l-1,6),u=rt.generateCheckWords(u,28,4)):(u.appendBits(o-1,5),u.appendBits(l-1,11),u=rt.generateCheckWords(u,40,4)),u}static drawModeMessage(i,o,l,u){let c=N.truncDivision(l,2);if(o)for(let f=0;f<7;f++){let g=c-3+f;u.get(f)&&i.set(g,c-5),u.get(f+7)&&i.set(c+5,g),u.get(20-f)&&i.set(g,c+5),u.get(27-f)&&i.set(c-5,g)}else for(let f=0;f<10;f++){let g=c-5+f+N.truncDivision(f,5);u.get(f)&&i.set(g,c-7),u.get(f+10)&&i.set(c+7,g),u.get(29-f)&&i.set(g,c+7),u.get(39-f)&&i.set(c-7,g)}}static generateCheckWords(i,o,l){let u=i.getSize()/l,c=new ms(rt.getGF(l)),f=N.truncDivision(o,l),g=rt.bitsToWords(i,l,f);c.encode(g,f-u);let w=o%l,_=new q;_.appendBits(0,w);for(const I of Array.from(g))_.appendBits(I,l);return _}static bitsToWords(i,o,l){let u=new Int32Array(l),c,f;for(c=0,f=i.getSize()/o;c<f;c++){let g=0;for(let w=0;w<o;w++)g|=i.get(c*o+w)?1<<o-w-1:0;u[c]=g}return u}static getGF(i){switch(i){case 4:return Qe.AZTEC_PARAM;case 6:return Qe.AZTEC_DATA_6;case 8:return Qe.AZTEC_DATA_8;case 10:return Qe.AZTEC_DATA_10;case 12:return Qe.AZTEC_DATA_12;default:throw new x("Unsupported word size "+i)}}static stuffBits(i,o){let l=new q,u=i.getSize(),c=(1<<o)-2;for(let f=0;f<u;f+=o){let g=0;for(let w=0;w<o;w++)(f+w>=u||i.get(f+w))&&(g|=1<<o-1-w);(g&c)===c?(l.appendBits(g&c,o),f--):g&c?l.appendBits(g,o):(l.appendBits(g|1,o),f--)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}rt.DEFAULT_EC_PERCENT=33,rt.DEFAULT_AZTEC_LAYERS=0,rt.MAX_NB_BITS=32,rt.MAX_NB_BITS_COMPACT=4,rt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class uc{encode(i,o,l,u){return this.encodeWithHints(i,o,l,u,null)}encodeWithHints(i,o,l,u,c){let f=ot.ISO_8859_1,g=rt.DEFAULT_EC_PERCENT,w=rt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Bt.CHARACTER_SET)&&(f=Vt.forName(c.get(Bt.CHARACTER_SET).toString())),c.has(Bt.ERROR_CORRECTION)&&(g=N.parseInt(c.get(Bt.ERROR_CORRECTION).toString())),c.has(Bt.AZTEC_LAYERS)&&(w=N.parseInt(c.get(Bt.AZTEC_LAYERS).toString()))),uc.encodeLayers(i,o,l,u,f,g,w)}static encodeLayers(i,o,l,u,c,f,g){if(o!==xe.AZTEC)throw new x("Can only encode AZTEC, but got "+o);let w=rt.encode(X.getBytes(i,c),f,g);return uc.renderResult(w,l,u)}static renderResult(i,o,l){let u=i.getMatrix();if(u==null)throw new Ar;let c=u.getWidth(),f=u.getHeight(),g=Math.max(o,c),w=Math.max(l,f),_=Math.min(g/c,w/f),I=(g-c*_)/2,S=(w-f*_)/2,R=new Le(g,w);for(let B=0,G=S;B<f;B++,G+=_)for(let K=0,Q=I;K<c;K++,Q+=_)u.get(K,B)&&R.setRegion(Q,G,_,_);return R}}n.AbstractExpandedDecoder=ea,n.ArgumentException=E,n.ArithmeticException=so,n.AztecCode=Wt,n.AztecCodeReader=oo,n.AztecCodeWriter=uc,n.AztecDecoder=ht,n.AztecDetector=ec,n.AztecDetectorResult=cl,n.AztecEncoder=rt,n.AztecHighLevelEncoder=vl,n.AztecPoint=En,n.BarcodeFormat=xe,n.Binarizer=V,n.BinaryBitmap=v,n.BitArray=q,n.BitMatrix=Le,n.BitSource=Gn,n.BrowserAztecCodeReader=tc,n.BrowserBarcodeReader=pl,n.BrowserCodeReader=wn,n.BrowserDatamatrixCodeReader=lo,n.BrowserMultiFormatReader=Bi,n.BrowserPDF417Reader=oc,n.BrowserQRCodeReader=ac,n.BrowserQRCodeSvgWriter=M,n.CharacterSetECI=b,n.ChecksumException=O,n.Code128Reader=ge,n.Code39Reader=Rt,n.DataMatrixDecodedBitStreamParser=Xn,n.DataMatrixReader=lr,n.DecodeHintType=re,n.DecoderResult=ls,n.DefaultGridSampler=hl,n.DetectorResult=Yo,n.EAN13Reader=Nt,n.EncodeHintType=Bt,n.Exception=m,n.FormatException=P,n.GenericGF=Qe,n.GenericGFPoly=Rn,n.GlobalHistogramBinarizer=gt,n.GridSampler=Di,n.GridSamplerInstance=Ir,n.HTMLCanvasElementLuminanceSource=Se,n.HybridBinarizer=Te,n.ITFReader=$e,n.IllegalArgumentException=x,n.IllegalStateException=Ar,n.InvertedLuminanceSource=Ae,n.LuminanceSource=pe,n.MathUtils=be,n.MultiFormatOneDReader=oi,n.MultiFormatReader=Cl,n.MultiFormatWriter=ee,n.NotFoundException=J,n.OneDReader=mt,n.PDF417DecodedBitStreamParser=Z,n.PDF417DecoderErrorCorrection=rc,n.PDF417Reader=Ft,n.PDF417ResultMetadata=Al,n.PerspectiveTransform=Hn,n.PlanarYUVLuminanceSource=he,n.QRCodeByteMatrix=po,n.QRCodeDataMask=dn,n.QRCodeDecodedBitStreamParser=yt,n.QRCodeDecoderErrorCorrectionLevel=dt,n.QRCodeDecoderFormatInformation=nn,n.QRCodeEncoder=C,n.QRCodeEncoderQRCode=ui,n.QRCodeMaskUtil=Ge,n.QRCodeMatrixUtil=d,n.QRCodeMode=ve,n.QRCodeReader=ur,n.QRCodeVersion=Ie,n.QRCodeWriter=Y,n.RGBLuminanceSource=Fe,n.RSS14Reader=xt,n.RSSExpandedReader=ae,n.ReaderException=go,n.ReedSolomonDecoder=Oi,n.ReedSolomonEncoder=ms,n.ReedSolomonException=Pi,n.Result=at,n.ResultMetadataType=Lt,n.ResultPoint=Ee,n.StringUtils=X,n.UnsupportedOperationException=j,n.VideoInputDevice=ct,n.WhiteRectangleDetector=zr,n.WriterException=et,n.ZXingArrays=D,n.ZXingCharset=Vt,n.ZXingInteger=N,n.ZXingStandardCharsets=ot,n.ZXingStringBuilder=z,n.ZXingStringEncoding=W,n.ZXingSystem=U,n.createAbstractExpandedDecoder=si,Object.defineProperty(n,"__esModule",{value:!0})})})(p0,p0.exports);var Ct=p0.exports;const DO=Iy(Ct),kO=gI({__proto__:null,default:DO},[Ct]);var my=function(){function t(e,n,r){if(this.formatMap=new Map([[we.QR_CODE,Ct.BarcodeFormat.QR_CODE],[we.AZTEC,Ct.BarcodeFormat.AZTEC],[we.CODABAR,Ct.BarcodeFormat.CODABAR],[we.CODE_39,Ct.BarcodeFormat.CODE_39],[we.CODE_93,Ct.BarcodeFormat.CODE_93],[we.CODE_128,Ct.BarcodeFormat.CODE_128],[we.DATA_MATRIX,Ct.BarcodeFormat.DATA_MATRIX],[we.MAXICODE,Ct.BarcodeFormat.MAXICODE],[we.ITF,Ct.BarcodeFormat.ITF],[we.EAN_13,Ct.BarcodeFormat.EAN_13],[we.EAN_8,Ct.BarcodeFormat.EAN_8],[we.PDF_417,Ct.BarcodeFormat.PDF_417],[we.RSS_14,Ct.BarcodeFormat.RSS_14],[we.RSS_EXPANDED,Ct.BarcodeFormat.RSS_EXPANDED],[we.UPC_A,Ct.BarcodeFormat.UPC_A],[we.UPC_E,Ct.BarcodeFormat.UPC_E],[we.UPC_EAN_EXTENSION,Ct.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!kO)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),a=new Map;a.set(Ct.DecodeHintType.POSSIBLE_FORMATS,s),a.set(Ct.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(a){s(a)}})},t.prototype.decode=function(e){var n=new Ct.MultiFormatReader(this.verbose,this.hints),r=new Ct.HTMLCanvasElementLuminanceSource(e),s=new Ct.BinaryBitmap(new Ct.HybridBinarizer(r)),a=n.decode(s);return{text:a.text,format:sI.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var a=s[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),MO=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(h){h(a)})}return new(n||(n=Promise))(function(a,h){function y(E){try{m(r.next(E))}catch(x){h(x)}}function p(E){try{m(r.throw(E))}catch(x){h(x)}}function m(E){E.done?a(E.value):s(E.value).then(y,p)}m((r=r.apply(t,e||[])).next())})},LO=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(E){return p([m,E])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(a=m[0]&2?s.return:m[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,m[1])).done)return a;switch(s=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],s=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},yy=function(){function t(e,n,r){if(this.formatMap=new Map([[we.QR_CODE,"qr_code"],[we.AZTEC,"aztec"],[we.CODABAR,"codabar"],[we.CODE_39,"code_39"],[we.CODE_93,"code_93"],[we.CODE_128,"code_128"],[we.DATA_MATRIX,"data_matrix"],[we.ITF,"itf"],[we.EAN_13,"ean_13"],[we.EAN_8,"ean_8"],[we.PDF_417,"pdf417"],[we.UPC_A,"upc_a"],[we.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return MO(this,void 0,void 0,function(){var n,r;return LO(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:sI.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,a=e;s<a.length;s++){var h=a[s],y=h.boundingBox.width*h.boundingBox.height;y>r&&(r=y,n=h)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var a=s[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),wy=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(h){h(a)})}return new(n||(n=Promise))(function(a,h){function y(E){try{m(r.next(E))}catch(x){h(x)}}function p(E){try{m(r.throw(E))}catch(x){h(x)}}function m(E){E.done?a(E.value):s(E.value).then(y,p)}m((r=r.apply(t,e||[])).next())})},Ey=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(E){return p([m,E])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(a=m[0]&2?s.return:m[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,m[1])).done)return a;switch(s=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],s=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},FO=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&yy.isSupported()?(this.primaryDecoder=new yy(e,r,s),this.secondaryDecoder=new my(e,r,s)):this.primaryDecoder=new my(e,r,s)}return t.prototype.decodeAsync=function(e){return wy(this,void 0,void 0,function(){var n;return Ey(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return wy(this,void 0,void 0,function(){var n,r;return Ey(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),hp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rf=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(h){h(a)})}return new(n||(n=Promise))(function(a,h){function y(E){try{m(r.next(E))}catch(x){h(x)}}function p(E){try{m(r.throw(E))}catch(x){h(x)}}function m(E){E.done?a(E.value):s(E.value).then(y,p)}m((r=r.apply(t,e||[])).next())})},sf=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(E){return p([m,E])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(a=m[0]&2?s.return:m[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,m[1])).done)return a;switch(s=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],s=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},aI=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),BO=function(t){hp(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(aI),VO=function(t){hp(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(BO),UO=function(t){hp(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(aI),zO=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new VO(this.track)},t.prototype.torchFeature=function(){return new UO(this.track)},t}(),jO=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return rf(this,void 0,void 0,function(){var a,h;return sf(this,function(y){switch(y.label){case 0:return a=new t(e,n,s),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:y.sent(),y.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return rf(this,void 0,void 0,function(){return sf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),a=s.length,h=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++h,h>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new zO(this.getFirstTrackOrFail())},t}(),HO=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return rf(this,void 0,void 0,function(){return sf(this,function(s){return[2,jO.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return rf(this,void 0,void 0,function(){var n,r;return sf(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),_y=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(h){h(a)})}return new(n||(n=Promise))(function(a,h){function y(E){try{m(r.next(E))}catch(x){h(x)}}function p(E){try{m(r.throw(E))}catch(x){h(x)}}function m(E){E.done?a(E.value):s(E.value).then(y,p)}m((r=r.apply(t,e||[])).next())})},xy=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(E){return p([m,E])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(a=m[0]&2?s.return:m[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,m[1])).done)return a;switch(s=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],s=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},WO=function(){function t(){}return t.failIfNotSupported=function(){return _y(this,void 0,void 0,function(){return xy(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return _y(this,void 0,void 0,function(){return xy(this,function(n){return[2,HO.create(e)]})})},t}(),GO=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(h){h(a)})}return new(n||(n=Promise))(function(a,h){function y(E){try{m(r.next(E))}catch(x){h(x)}}function p(E){try{m(r.throw(E))}catch(x){h(x)}}function m(E){E.done?a(E.value):s(E.value).then(y,p)}m((r=r.apply(t,e||[])).next())})},XO=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(E){return p([m,E])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(n=0)),n;)try{if(r=1,s&&(a=m[0]&2?s.return:m[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,m[1])).done)return a;switch(s=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(E){m=[6,E],s=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},KO=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Na.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Na.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return GO(this,void 0,void 0,function(){var e,n,r,s,a,h,y;return XO(this,function(p){switch(p.label){case 0:return e=function(m){for(var E=m.getVideoTracks(),x=0,v=E;x<v.length;x++){var O=v[x];O.enabled=!1,O.stop(),m.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=p.sent(),s=[],a=0,h=r;a<h.length;a++)y=h[a],y.kind==="videoinput"&&s.push({id:y.deviceId,label:y.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var h=[],y=0,p=a;y<p.length;y++){var m=p[y];m.kind==="video"&&h.push({id:m.id,label:m.label})}e(h)},s=MediaStreamTrack;s.getSources(r)})},t}(),zt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(zt||(zt={}));var qO=function(){function t(){this.state=zt.NOT_STARTED,this.onGoingTransactionNewState=zt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===zt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=zt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===zt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=zt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==zt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case zt.UNKNOWN:throw"Transition from unknown is not allowed";case zt.NOT_STARTED:this.failIfNewStateIs(e,[zt.PAUSED]);break;case zt.SCANNING:break;case zt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var a=s[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),YO=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===zt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==zt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===zt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===zt.PAUSED},t}(),QO=function(){function t(){}return t.create=function(){return new YO(new qO)},t}(),$O=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fr=function(t){$O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(bO),ZO=function(){function t(e,n){this.logger=n,this.fps=fr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=fr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?oI.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!zi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),JO=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new OO(this.verbose),this.qrcode=new FO(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=QO.create()}return t.prototype.start=function(e,n,r,s){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;s?h=s:h=this.verbose?this.logger.log:function(){};var y=ZO.create(n,this.logger);this.clearElement();var p=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:fr.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var x=this,v=this.stateManagerProxy.startTransition(zt.SCANNING);return new Promise(function(O,V){var U=m?y.videoConstraints:x.createVideoConstraints(e);if(!U){v.cancel(),V("videoConstraints should be defined");return}var H={};(!m||y.aspectRatio)&&(H.aspectRatio=y.aspectRatio);var F={onRenderSurfaceReady:function(D,N){x.setupUi(D,N,y),x.isScanning=!0,x.foreverScan(y,r,h)}};WO.failIfNotSupported().then(function(D){D.create(U).then(function(N){return N.render(a.element,H,F).then(function(q){x.renderedCamera=q,v.execute(),O(null)}).catch(function(q){v.cancel(),V(q)})}).catch(function(N){v.cancel(),V(Na.errorGettingUserMedia(N))})}).catch(function(D){v.cancel(),V(Na.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(zt.PAUSED),this.showPausedState(),(zi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(zt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(zt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(fr.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(zi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var y=h.width,p=h.height,m=document.getElementById(r.elementId),E=m.clientWidth?m.clientWidth:fr.DEFAULT_WIDTH,x=Math.max(m.clientHeight?m.clientHeight:p,fr.FILE_SCAN_MIN_HEIGHT),v=r.computeCanvasDrawConfig(y,p,E,x);if(n){var O=r.createCanvasElement(E,x,"qr-canvas-visible");O.style.display="inline-block",m.appendChild(O);var V=O.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=E,V.canvas.height=x,V.drawImage(h,0,0,y,p,v.x,v.y,v.width,v.height)}var U=fr.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(h.width,v.width),F=Math.max(h.height,v.height),D=H+2*U,N=F+2*U,q=r.createCanvasElement(D,N);m.appendChild(q);var ie=q.getContext("2d");if(!ie)throw"Unable to get 2d context from canvas";ie.canvas.width=D,ie.canvas.height=N,ie.drawImage(h,0,0,y,p,U,U,H,F);try{r.qrcode.decodeRobustlyAsync(q).then(function(re){s(py.createFromQrcodeResult(re))}).catch(a)}catch(re){a("QR code parse error, error = ".concat(re))}},h.onerror=a,h.onabort=a,h.onstalled=a,h.onsuspend=a,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return KO.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!oI.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[we.QR_CODE,we.AZTEC,we.CODABAR,we.CODE_39,we.CODE_93,we.CODE_128,we.DATA_MATRIX,we.MAXICODE,we.ITF,we.EAN_13,we.EAN_8,we.PDF_417,we.RSS_14,we.RSS_EXPANDED,we.UPC_A,we.UPC_E,we.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,a=e.formatsToSupport;s<a.length;s++){var h=a[s];NO(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(zi(e))return!0;if(!zi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(zi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return zi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,a=r.qrbox;this.validateQrboxConfig(a);var h=this.toQrdimensions(e,n,a),y=function(m){if(m<fr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(fr.MIN_QR_BOX_SIZE,"px.")},p=function(m){return m>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};y(h.width),y(h.height),h.width=p(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=zi(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var a=this.toQrdimensions(e,n,s);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&a.height<=n,y={x:0,y:0,width:e,height:n},p=h?this.getShadedRegionBounds(e,n,a):y,m=this.createCanvasElement(p.width,p.height),E={willReadFrequently:!0},x=m.getContext("2d",E);x.canvas.width=p.width,x.canvas.height=p.height,this.element.append(m),h&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=x,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Na.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,py.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var a=Na.codeParseError(s);return n(a,PO.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),h=a.videoWidth/a.clientWidth,y=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*h,m=this.qrRegion.height*y,E=this.qrRegion.x*h,x=this.qrRegion.y*y;this.context.drawImage(a,E,x,p,m,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(O){!O&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){v()})):v()}).catch(function(O){s.logger.logError("Error happend while scanning context",O),v()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},a="exact",h=function(V){if(V in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(V,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var p=Object.keys(e)[0];if(p!==n&&p!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var m=e.facingMode;if(typeof m=="string"){if(h(m))return{facingMode:m}}else if(typeof m=="object")if(a in m){if(h(m["".concat(a)]))return{facingMode:{exact:m["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var E=typeof m;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var x=e.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(a in x)return{deviceId:{exact:x["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var v=typeof x;throw"Invalid type of 'deviceId' = ".concat(v)}}}var O=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var a=(r-e)/2,h=(s-n)/2;return{x:a,y:h,width:e,height:n}}else{var y=e,p=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(p)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?fr.BORDER_SHADER_MATCH_COLOR:fr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,a=n,h=document.createElement("canvas");return h.style.width="".concat(s,"px"),h.style.height="".concat(a,"px"),h.style.display="none",h.id=zi(r)?"qr-canvas":r,h},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var a=document.createElement("div");a.style.position="absolute";var h=(n-s.width)/2,y=(r-s.height)/2;if(a.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(fr.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var p=5,m=40;this.insertShaderBorders(a,m,p,-p,null,0,!0),this.insertShaderBorders(a,m,p,-p,null,0,!1),this.insertShaderBorders(a,m,p,null,-p,0,!0),this.insertShaderBorders(a,m,p,null,-p,0,!1),this.insertShaderBorders(a,p,m+p,-p,null,-p,!0),this.insertShaderBorders(a,p,m+p,null,-p,-p,!0),this.insertShaderBorders(a,p,m+p,-p,null,-p,!1),this.insertShaderBorders(a,p,m+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,s,a,h,y){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=fr.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(r,"px"),s!==null&&(p.style.top="".concat(s,"px")),a!==null&&(p.style.bottom="".concat(a,"px")),y?p.style.left="".concat(h,"px"):p.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Ay;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ay||(Ay={}));function eD({onScan:t}){ne.useRef(null);const[e,n]=ne.useState(!1);return ne.useEffect(()=>{if(!e)return;const r=new JO("reader");return r.start({facingMode:"environment"},{fps:10,qrbox:250},s=>{try{const a=JSON.parse(s);t(a),r.stop(),n(!1)}catch(a){console.error("QR Code 不是 JSON 格式",a)}},s=>{}).catch(s=>console.error(s)),()=>{r.stop().catch(()=>{})}},[e]),se.jsxs("div",{className:"flex flex-col items-center",children:[se.jsx("button",{onClick:()=>n(r=>!r),className:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition",children:e?"關閉掃描":"開啟相機掃描"}),se.jsx("div",{id:"reader",className:"mt-2 w-64 h-64"})]})}const tD=new Wi,Mc={zh:{loginBtn:"使用 Google 登入",logoutBtn:"登出",scores:"🏆 積分",name:"名字",title:"職稱",years:"年資",factory:"工廠",phone:"電話",birthday:"生日"},en:{loginBtn:"Sign in with Google",logoutBtn:"Logout",scores:"🏆 Scores",name:"Name",title:"Title",years:"Years",factory:"Factory",phone:"Phone",birthday:"Birthday"}};function nD({lang:t="zh"}){const[e,n]=ne.useState(null),[r,s]=ne.useState(null),[a,h]=ne.useState(null),[y,p]=ne.useState(!1),[m,E]=ne.useState(null);ne.useEffect(()=>{const U=rx(oh,async H=>{if(H){n(H);const F=ou(lu,"profiles",H.uid),D=await h0(F);D.exists()&&s(D.data())}else n(null),s(null)});return()=>U()},[]);const x=async()=>{try{const H=(await S8(oh,tD)).user;n(H);const F=ou(lu,"profiles",H.uid),D=await h0(F);if(D.exists())s(D.data());else{const N={name:H.displayName||"",title:"",years:0,factory:"",phone:"",birthday:"",email:H.email||"",photoURL:H.photoURL||"",createdAt:VP(),scores:0};await FP(F,N),s(N)}}catch(U){console.error("登入失敗",U)}},v=async()=>{try{await a8(oh),n(null),s(null)}catch(U){console.error("登出失敗",U)}},O=async(U,H)=>{if(!e)return;const F=ou(lu,"profiles",e.uid);let D=H;(U==="years"||U==="phone")&&(D=H.replace(/\D/g,"")),await zA(F,{[U]:D}),s(N=>({...N,[U]:D})),h(null)},V=(U,H,F="text")=>{const D=Mc[t][H]||H;return a===U?se.jsx("input",{type:F,value:(r==null?void 0:r[U])||"",onChange:N=>s(q=>({...q,[U]:N.target.value})),onBlur:N=>O(U,N.target.value),onKeyDown:N=>N.key==="Enter"&&O(U,N.target.value),autoFocus:!0,className:"field-input"}):se.jsx("p",{className:"field-text",onClick:()=>h(U),children:(r==null?void 0:r[U])||D})};return se.jsx("div",{className:"page-container",children:e?se.jsxs("div",{className:"card-container",children:[se.jsxs("div",{className:"profile-header",children:[se.jsx("img",{src:(r==null?void 0:r.photoURL)||e.photoURL,alt:"avatar",className:"avatar"}),se.jsxs("div",{className:"profile-info",children:[se.jsx("h2",{children:V("name","name")}),se.jsx("p",{className:"email",children:(r==null?void 0:r.email)||e.email}),V("title","title"),V("years","years"),V("factory","factory"),V("phone","phone"),V("birthday","birthday"),se.jsxs("p",{children:[Mc[t].scores,": ",(r==null?void 0:r.scores)||0]})]})]}),se.jsxs("div",{className:"card-buttons",children:[se.jsx("button",{onClick:()=>p(U=>!U),children:y?"隱藏 QR Code":"產生 QR Code"}),y&&se.jsx(RO,{profile:r}),se.jsx(eD,{onScan:E}),m&&se.jsx("pre",{className:"scan-result",children:JSON.stringify(m,null,2)}),se.jsx("button",{onClick:v,children:Mc[t].logoutBtn})]})]}):se.jsx("button",{className:"login-btn",onClick:x,children:Mc[t].loginBtn})})}const rD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAClCAYAAADvezeCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAACdhJREFUeF7t3XtwVFcBx/HvPpJAAuRBIAGa8ihICRSE2oLWqdJ2yihWq0il4uCgte2Io+PgqH+go305Y8vUsepotTroKDNW6Wgr09IK2GkZi7VTwIQaqS3hkRATkkAePJJd/zi7hZwl2YTs3nv37O/T+c225yzTzb2/DefuvbsbQbwyF9gOtAJvWHMiOe2jwCkgnsiDQHjAPURyUBj4DqbU5xO3ybwAlL1zT5EcUwo8zaXLncwRoDb5B0RyRS3wb0yJY4nbwXIG+KT5YyLB9wmgi/TFtvN9IIJIQEWABzBl7UvcjjS7gHJEAqYc8xLgaMqdzDHgGkQCYgFwiNSijiZngU8h4rPVQDcjX28PN5vRulx8EAG+hynhaJck6fIiMBERj1QAz2HK15+4zXaOA4sQybKFwFukFtCLnAM+jUiWrAF6yN56e7j5ARBFJEOiwMOYcnm1JEmXl4FKREapEnNRVBz/f3PbaQaWIHKZFgOHSS1WkHIeWIfICK3FXAQVtN/ag+VHQAEiaUSBRzGlCcp6e7j5OzAZkUFMwlzsZBcnl/I/4D2IWK7FvPnALkwu5jywHpGEdZiLm3JlvT3c/BSty/NaAfBDTBlcK3cye4EqJO9UYS5isgvhYlqBpUjeuA7zpgK7CC6nD7gLcd7ncHO9Pdz8AihEnFMI/ASzk/O13Mn8E5iCOKMac3GSvaPzOW3A+5CctwxzUZK9gxWzLr8XyVlfwJz0yPclSbr8CihCckYR8DNSd6QyeF4HpiGBNxV4hdQdqKRPO/B+JLBuAFpI3XHK8NMPbABCSGCEMAdLWm9nLr8BxiC+GwM8QeoOUkaf/UAN4psrgFdJ3TFK5tIBfADx3I2YkxX2DlEynxjwFbQu90QI+BLmJIXW295mKzAWyZqxwBZSN7ziXeqA6UjGXYk5GWFvcMX7dALLkYz5IOYkhL2hFf8SAzaidfmohDAHN7n28Q35lCeBYmTEioHfkrpBleDlIDATGbYZmIMZe0MqwU0XcAuS1s2YjWVvQCX4iQFfR+vySwoBX0OvbbuQp4AS5B0lmIMVe0MpuZtDwFUIszAHKfYGUnI/XcAKfObnV9Tdivmwy6n2hDihEPgM5jLml6w5p4WAb6L1dj7lT8A48sA4zEGIvQEU93MImIPDZgMNpP7gSv6kG/gwHvJqDf4hYCfmQ3gkfxVgvh4mhlmXxwdO554QsInUZ7KiPAOMJ4eNx/wQ9g+mKMn8F5hLDpqDefD2D6QodnqA28iSbKzBP4JZb0+yJ0QuoQC4Ewhz4UsJAikM3EfqM1RRhptngVICaALwHKkPWFFGmsPAPALkaqCR1AeqKJebXuB2MmC0a/DbgReACntCZBSiwBrM9Sy7MaX3VBh4iNRnnqJkOs8DZVymy3n3RRmwDX10gHjnCOZseJ09kU7YHkijFvM/UbnFSzWYL89aZU+kM5I1+CpG+deFyChEgTswn7iwC7N8yYgI8AipayNF8Ss7gXKGId0avBz4M/pqCwmeY5h1+QF74mJDrcEXYN4vqXJLEE3DfD78HfbExQZbg6/BnDadYE+IBEgEWI3p6U7MdeZDigCPkbrmUZSg50VgIpaL1+AVwHZg6UVjIrmkCfOWuNeTA8mCLwT2JQdFctxa4HdgliRrgKcx1+WKuGAViXV5CG9P3CzGHAxIftpA4jerR7qimK+K88ppe0DySg/e9m3I18FFcp4KLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHFa1B6QIYSgatYErlw4kZKKMUSiIfseGRfrj9PdcY6jdSdpeqODeDxu30WGoIIP06QZ47n5nvlUv6vUnvJMW2MXOx+v59jBdntKBqGCD8Os6yazcuMiCgoLWD5nFQun3UB58WSi4QL7rhnXH+un80wr9U172RHeyur7r2fHj/9F/a5j9l3lElTwNCqnj2flxkVUldXw+fd+m+oJ0+27ZN24olKmlV7FkprlbHnlQW7dAKdaejlad9K+q1h0kJnG8rvmES2Isn7ZJl/KfbGJJdWsX/YtCiJF3HR3LaFw9o8Bcp0KPoSKK0qYVlvOjbM/xtTSmfa0L8qLJ7Oidq15bPPK7WmxqOBDqFkwEYD5U5ZaM/6aX70MgJprKqwZsangQygpLwSgbOwka8ZfZWMrASgpL7JmxKaCDyEcMZsnEg7WsXg08XjCUe2+dLSFxGkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4zeuCxxK3+vyx/JTc/57xuuDdiVvPf1AJhC57INu8LnhH4rZvwKjki057INu8LngL5lmsguenN+2BbPO64HGgHojYE+K8c8ARezDbvC44wLPAGHtQnPc80G8PZpsfBX/KHpC88KQ94AU/Cr4POAz02hPirBjwjD3oBT8KHsc8m8faE+KkOPA3oM2e8IIfBQd4BPOa+Dl7QpwTAjbZg17xq+AngIcB8/Gt4qo45phrjz3hFb8KDrAZ87r4eXtCnBEDvmEPesnPgncBXwQK0Kl7V90H/Mce9JKfBQf4I2Yj+P04JPO2AQ/Yg14LQrG+iyl64MRi5qLH/liwrizoj5vzJfH+QP7FFwMOAOsS/+6rIBQ8BnwW2GVP+K27/SwAnb2+vMI1qM7eVuDC4wuQOOZ6k9u4cOWor4JQcDAbYwXwWOK/A3G9+LF6843CB0/8w5rxV32zeTxH6wL3jcc7gOsxJ/ICISgFB/NqypeBuzG/1X0veWvjaZobOtndsI0TpxvtaV909raxve7XdDT1BOWLYJPLkM3ASi5cEh0IQbyq7zXg98B0YC6m6L5942nL26eovWkqb7Ye4OqqaykuHG/fxTOdZ9rYsvch2rqb2P7oPjqaeuy7eCm5X14D7gR+nhgLlCAWHKAV2ArsBt4NTBkw66Hu9rO0H++mevEY9rz1FwiFKCkspTBSRCgUIp7lf/pifZzsaebVxr/yyz3309Z9nF1PHKThpWb7oXrtCHAP8FXg7YFTweHbb8YRCAELgY8Dq4HagdPeqJ5Tyi33LqByxjh7yjOdzb3sfLyOw/t8O+g9AvyBC2cnPb/8daRyoeC2mcASzPKlCijFo+vLQ5FQaPbSqsoZiyurx5UXFYcLwlk/hon1x+I97ed6Gve3tTS83NTS3xf36qW385i3mLUCDcB+oI4ALkOG8n8uq3EDMZcE5gAAAABJRU5ErkJggg==",iD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACVCAYAAAC3i3MLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAC3pJREFUeF7t3VtsFPcVx/GvbwJaau4LTbiYWk2NoUppaFGJEdSAwgsuyKFNWpQ+VKnSpFUieGmblqhKmqhCLg2xo9L2pSBHbbiYSoWYu6FEfQA5ESUJ4BgnLpes8YIdG3zdnT5MQcqZWe/M/nf2Ys5HOi9n7P3Pf/bnmZ3ZWW8e6TUBqASWAPOBB4BJQDEwBHQD14D3gbPAMeAdIMq9pwBYDCwHvgqUA9Oxt2EB9ra6AVwA3gNOAU3ALUaZscD3gSPAMGD5rE6gFvga94ZvAX8BbuLcFolqAPgnsA4oIscVAD/C3qPIiSZbb2H/JY5Gi4B/4ZxzstUGfI8cVQm8i3NSqahhoA6YyuhwP7ADiOGcayrqbeCb5Ihi4E2ckwiiuoAfkNt+iv2aRc4t1RUD/gyMIYuVAP/BufJB12+BfHJLIfBHnHMJut4GQmShCuA6zhVOV+0FxpMbJgFHcc4hXfUR9lld1lgLDOJc0XRXM/Ypbjabjn3aLdc93dUDLCULfB24jXMFM1VvYR8estEY4N841zlTdR2YSwZ9EbiMc8UyXVvJTjtxrmum6xz2iU/S8mTDo3HACeAbckEiJSUlrF69mpUrVzJ37lxCoRBTp05lYGCAjo4OwuEwzc3NNDY20tTURF9fn3wIL36MfdaRLX4BvCybiRQXF1NZWckjjzzCgw8+SCgUIhQKUVRUREdHB9evX+fDDz/k0KFDHDx4kCtXrsiH8OIAsAb7TC1ttuBM84i1YsUK6+TJk1YsFrO86u3ttWpqaqxQKOR4vAQ1CHyZ7LAIn9d45syZY23fvt0aGBiQm2REBw8etJYsWeJ4PA+1kTQqxb5kLlfCtaZPn24dOXJEztWXW7duWRs3bnQ8doLaR3bwfHU5Pz/feumll6zBwUG5CXzZt2+fNXHiRMfjj1A3SeOF2V04V8C1HnroIau9vV3OL2k7d+60xo4d6xhnhPo2mbUe5zq51oQJE6z9+/fLKSft4sWL1rx58xzjjFC1pEEFzoFdq6yszOru7pbzMtbQ0OAYa4R6F/s9uUwYA1zCuU6OKioqsk6ePCmnaiwcDlszZ850jBenhoB5BOwYzoEdVVxcbJ0/f17OJ2VeeOEFx5gj1HfJjJ/gXBfXqq2tlVNMmdOnT/vZa/8dn/ychT2AfREsobq6Op5++mnZTplYLMbChQs5e/asXOTmMPBD4EvADPzN2a8YcBVoBQ7h4RaUyspKjh49Ktsp9eKLL7J582bZdjOI/eZup1yQCi/jTKyjZs+ebfX398s/hJTbs2ePY+xcrFOnTsmppVx3d7c1efJkx9hx6mcE5B2cgznqtddek+sfiGg0apWVlTnGz6Vavny5nFZgfBz238IHr+9iT8PD7hhg7dq1shWI/Px8qqqqZDunpHP9fYy1jABu+1iFM6mOmj9/vgx+oI4dO+ZYh1yqc+fOySkFJhaLWdOmTXOsQ5zytLMA73ug+bLhpqKiQrYCtWTJEvLygnxNHJxJkyYxf76nzZoSeXl5PPzww7Idj+cV8xqgObLh5r777pOtQI0ZM4YpU6bIdk6YMWOGbAXOx5izZSMerwHydJ9NKJT+m90yMWYqZGK9fYz5BdmIx2uAPi8bboqLje4MSMrkyZNlKydkYr0nTpwoW/F8Tjbi8RqgXtlw09XVJVuBKyjI1DsVZvLzvW761Llx44ZsxeP5w4le797rlg03HR0dspU1ysrKKC8vD/RFt2VZnDlzhvb2drkoK/h4fnpkIx6vAWqTDTdJ3tCUFk8++SQbNwZ/28tzzz3Hq6++KttZ4dq1a7IVj6fnG7wfwt6TDTcnTpyQrayRrkNGYaHXv8n0isVinDp1SrbjeV824vG6Ve+8jTGilpYWLl26JNsqC5w+fZqbN2/Ktpte4LxsxuM1QDeB07LpZs+ePbKlskBDQ4NsxXMM+94gT7wGCOybrxOqqanh9u3bsq0yKBKJ8Prrr8t2PPtlYyR+AvRXPBzGwuEwdXV1sq0yaMuWLfT0eDqx6sPnTWV+AvQR0CibbjZv3kxzc7NsqwxoamqipqZGtuN5E4+XbO7wEyCAX+FhL9Tf38+6dev8XHdQAfj4449Zv349w8PDcpGbAeA3spmI3wA1Y/8vm4Ta29upqKjggw8+kItUGpw5c4aKigo6Oz3fnfoHfFz/ucNvgACexz5WJtTS0sLixYupr68nFkvrBx/vWdFolO3bt7N06VIuX74sF8fTQRKfnIXkAnQF+J1sxtPT08OGDRtYuHAhe/fu9bo7VT4NDQ1RX19PeXk5Tz31FP39/fJHRvJr4FPZ9KKQ5D6R+CdgBT7+RcjZs2eprq5mwoQJrFy5klWrVlFSUkIoFGLatGmMHTtW/oonPnbRWaWzszPpde/v7yccDn/ms/HHjx+nt9fTe97S3v9XMjnoBOftjKOytm7dKu/yDMSmTZscY4/iSuoQptRdGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGfF8A2+qPgE6PDzM0NAQ0WiUaDSKZVl3Kxlefy9d9yr7GSfZT4jk5eXdrYKCAgoLC+9WKkQiEdmKy/OIyV52D9ry5cs93cy/YMEC2QrEokWLZMtVdXU1u3fvlu2s4CfYeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBHP/x+otrZWtrJCNn9T9EhaW1uzdpv6Jf99/ais48ePf+YrCYKya9cux9ijuPQQpsxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlpBCok00fSoHVsimVlpayenXCH0tKQ0MDV69ele2sF+Q2aWxspLW1VbbdNAKefjAoj+K8Oumo6upqecE2ZZYtW+YYz62y7Up0kNukurraMV6cehRDeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSOmAeqXDTeDg4OypQI0MDAgW/H0yYZfpgG6LBtuIpGIbKkA+djenp6/kaQlQG1tbViWJdsqAJZl0dbWJtvxeHr+RmIaoAgedoPXrl2jpaVFtlUALl68yCeffCLbbvqAG7Lpl2mALKBJNt3U19fLlgrAG2+8IVvxHMd+/oyYBgjgb7LhZtu2bX6OzSoJkUiEbdu2yXY8np63RFIRoH8ACU+zurq6ePzxx4lGo3KRSoFoNMpjjz1GV1eXXORmAPt5M5aKAHUDu2XTzeHDh6mqqvI6SU/Gjx8vW66GhoZkKxBeT6GLi4tlK2ldXV2sWbOGI0eOyEXx7AY+lc1keP7e+ASeB6qBMXKBdODAAebNm8emTZt44oknCIVC8kd8KSkpkS1XGzZsYOrUqeTl5clFKROLxQiHw7Ltau7cubLlW0dHBzt27KCmpsbrC2ew9z7Py2ayUrk1XwF+LpuJLFiwgNLSUqZMmcK4cePk4oQuXLjg5y8va1RVVTFr1izZTqivr49IJEJrayvnzp2Ti714BfilbCYrlQEqBt4H7pcLVNa4DJQDPXJBslLxGuiOT4Eq4LZcoLLCbeA7pDA8QVmH84vNtDJbMWAtOeRZnJPQylw9Sw56FHu3KSejlb66TQq+1jKTFgFXcU5MK/i6ir39c94kYCswhHOSWqmvIeD32Nt9VPkKsA/7BZ2ctJZ5RbG37wOMcjOAZ4CTaJhMK4a9HZ/B3q5pl8oLickYB8wEZgOzAG9vbN3beoH/Au3YFwYT3o8VpP8BOx/K48GQwasAAAAASUVORK5CYII=",sD="/basecamp-app/assets/setting_icon-fnFuyX_C.png",oD={zh:[{title:"公司環境",path:"/explore"},{title:"交通資訊",path:"/info"},{title:"社交任務",path:"/social"},{title:"獎勵兌換",path:"/rewards"},{title:"個人資訊",path:"/settings"}],en:[{title:"Environment",path:"/explore"},{title:"Transport Info",path:"/info"},{title:"Social Tasks",path:"/social"},{title:"Rewards",path:"/rewards"},{title:"Profile",path:"/settings"}]};function aD({lang:t}){const e=oD[t],n=[{title:t==="zh"?"公司生活":"Company Life",items:e.slice(0,2),icons:[rD]},{title:t==="zh"?"社交獎勵":"Social & Rewards",items:e.slice(2,4),icons:[iD]},{title:t==="zh"?"設定":"Settings",items:e.slice(4,5),icons:[sD]}];return se.jsxs("div",{className:"home-container",children:[se.jsx("h1",{children:"BaseCamp"}),se.jsx("div",{className:"menu-container",children:n.map((r,s)=>se.jsxs("div",{className:"menu-row-wrapper",children:[se.jsxs("div",{className:"menu-row-title",children:[se.jsx("div",{className:"row-icons",children:r.icons.map((a,h)=>se.jsx("img",{src:a,alt:`icon-${h}`,className:"row-icon"},h))}),se.jsx("span",{className:"row-title-text",children:r.title})]}),se.jsx("div",{className:"menu-row",children:r.items.map((a,h)=>se.jsx(Cf,{to:a.path,className:"menu-button",children:a.title},h))})]},s))})]})}function lD(){const[t,e]=ne.useState("zh");return se.jsx(mO,{children:se.jsxs(e3,{children:[se.jsxs(PT,{children:[se.jsx(_s,{path:"/",element:se.jsx(aD,{lang:t})}),se.jsx(_s,{path:"/explore",element:se.jsx(p3,{lang:t})}),se.jsx(_s,{path:"/info",element:se.jsx(f3,{lang:t})}),se.jsx(_s,{path:"/social",element:se.jsx(m3,{lang:t})}),se.jsx(_s,{path:"/rewards",element:se.jsx(wO,{lang:t})}),se.jsx(_s,{path:"/settings",element:se.jsx(nD,{lang:t,setLang:e})}),se.jsx(_s,{path:"/mailbox",element:se.jsx(c3,{})})]}),se.jsxs("div",{className:"bottom-buttons",children:[se.jsx("button",{className:"lang-button",onClick:()=>e(t==="zh"?"en":"zh"),children:t==="zh"?"English":"中文"}),se.jsx(Cf,{to:"/",className:"home-button",children:t==="zh"?"首頁":"Home"})]})]})})}LE(document.getElementById("root")).render(se.jsx(ne.StrictMode,{children:se.jsx(lD,{})}));

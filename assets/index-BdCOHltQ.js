function _2(r,e){for(var t=0;t<e.length;t++){const o=e[t];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in r)){const f=Object.getOwnPropertyDescriptor(o,u);f&&Object.defineProperty(r,u,f.get?f:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function t(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=t(u);fetch(u.href,f)}})();var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x2(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gd={exports:{}},$l={},pd={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function L_(){if(ap)return Tt;ap=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),N=Symbol.iterator;function M(te){return te===null||typeof te!="object"?null:(te=N&&te[N]||te["@@iterator"],typeof te=="function"?te:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,Y={};function G(te,de,tt){this.props=te,this.context=de,this.refs=Y,this.updater=tt||W}G.prototype.isReactComponent={},G.prototype.setState=function(te,de){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,de,"setState")},G.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function Ie(){}Ie.prototype=G.prototype;function ge(te,de,tt){this.props=te,this.context=de,this.refs=Y,this.updater=tt||W}var ie=ge.prototype=new Ie;ie.constructor=ge,ee(ie,G.prototype),ie.isPureReactComponent=!0;var we=Array.isArray,Ke=Object.prototype.hasOwnProperty,Le={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function U(te,de,tt){var Ge,wt={},be=null,kt=null;if(de!=null)for(Ge in de.ref!==void 0&&(kt=de.ref),de.key!==void 0&&(be=""+de.key),de)Ke.call(de,Ge)&&!V.hasOwnProperty(Ge)&&(wt[Ge]=de[Ge]);var nt=arguments.length-2;if(nt===1)wt.children=tt;else if(1<nt){for(var Bt=Array(nt),bn=0;bn<nt;bn++)Bt[bn]=arguments[bn+2];wt.children=Bt}if(te&&te.defaultProps)for(Ge in nt=te.defaultProps,nt)wt[Ge]===void 0&&(wt[Ge]=nt[Ge]);return{$$typeof:r,type:te,key:be,ref:kt,props:wt,_owner:Le.current}}function B(te,de){return{$$typeof:r,type:te.type,key:de,ref:te.ref,props:te.props,_owner:te._owner}}function $(te){return typeof te=="object"&&te!==null&&te.$$typeof===r}function X(te){var de={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(tt){return de[tt]})}var q=/\/+/g;function j(te,de){return typeof te=="object"&&te!==null&&te.key!=null?X(""+te.key):de.toString(36)}function Je(te,de,tt,Ge,wt){var be=typeof te;(be==="undefined"||be==="boolean")&&(te=null);var kt=!1;if(te===null)kt=!0;else switch(be){case"string":case"number":kt=!0;break;case"object":switch(te.$$typeof){case r:case e:kt=!0}}if(kt)return kt=te,wt=wt(kt),te=Ge===""?"."+j(kt,0):Ge,we(wt)?(tt="",te!=null&&(tt=te.replace(q,"$&/")+"/"),Je(wt,de,tt,"",function(bn){return bn})):wt!=null&&($(wt)&&(wt=B(wt,tt+(!wt.key||kt&&kt.key===wt.key?"":(""+wt.key).replace(q,"$&/")+"/")+te)),de.push(wt)),1;if(kt=0,Ge=Ge===""?".":Ge+":",we(te))for(var nt=0;nt<te.length;nt++){be=te[nt];var Bt=Ge+j(be,nt);kt+=Je(be,de,tt,Bt,wt)}else if(Bt=M(te),typeof Bt=="function")for(te=Bt.call(te),nt=0;!(be=te.next()).done;)be=be.value,Bt=Ge+j(be,nt++),kt+=Je(be,de,tt,Bt,wt);else if(be==="object")throw de=String(te),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return kt}function le(te,de,tt){if(te==null)return te;var Ge=[],wt=0;return Je(te,Ge,"","",function(be){return de.call(tt,be,wt++)}),Ge}function Ct(te){if(te._status===-1){var de=te._result;de=de(),de.then(function(tt){(te._status===0||te._status===-1)&&(te._status=1,te._result=tt)},function(tt){(te._status===0||te._status===-1)&&(te._status=2,te._result=tt)}),te._status===-1&&(te._status=0,te._result=de)}if(te._status===1)return te._result.default;throw te._result}var Be={current:null},Pe={transition:null},ze={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:Pe,ReactCurrentOwner:Le};function ke(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:le,forEach:function(te,de,tt){le(te,function(){de.apply(this,arguments)},tt)},count:function(te){var de=0;return le(te,function(){de++}),de},toArray:function(te){return le(te,function(de){return de})||[]},only:function(te){if(!$(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Tt.Component=G,Tt.Fragment=t,Tt.Profiler=u,Tt.PureComponent=ge,Tt.StrictMode=o,Tt.Suspense=x,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ze,Tt.act=ke,Tt.cloneElement=function(te,de,tt){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Ge=ee({},te.props),wt=te.key,be=te.ref,kt=te._owner;if(de!=null){if(de.ref!==void 0&&(be=de.ref,kt=Le.current),de.key!==void 0&&(wt=""+de.key),te.type&&te.type.defaultProps)var nt=te.type.defaultProps;for(Bt in de)Ke.call(de,Bt)&&!V.hasOwnProperty(Bt)&&(Ge[Bt]=de[Bt]===void 0&&nt!==void 0?nt[Bt]:de[Bt])}var Bt=arguments.length-2;if(Bt===1)Ge.children=tt;else if(1<Bt){nt=Array(Bt);for(var bn=0;bn<Bt;bn++)nt[bn]=arguments[bn+2];Ge.children=nt}return{$$typeof:r,type:te.type,key:wt,ref:be,props:Ge,_owner:kt}},Tt.createContext=function(te){return te={$$typeof:y,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:f,_context:te},te.Consumer=te},Tt.createElement=U,Tt.createFactory=function(te){var de=U.bind(null,te);return de.type=te,de},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(te){return{$$typeof:A,render:te}},Tt.isValidElement=$,Tt.lazy=function(te){return{$$typeof:v,_payload:{_status:-1,_result:te},_init:Ct}},Tt.memo=function(te,de){return{$$typeof:_,type:te,compare:de===void 0?null:de}},Tt.startTransition=function(te){var de=Pe.transition;Pe.transition={};try{te()}finally{Pe.transition=de}},Tt.unstable_act=ke,Tt.useCallback=function(te,de){return Be.current.useCallback(te,de)},Tt.useContext=function(te){return Be.current.useContext(te)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(te){return Be.current.useDeferredValue(te)},Tt.useEffect=function(te,de){return Be.current.useEffect(te,de)},Tt.useId=function(){return Be.current.useId()},Tt.useImperativeHandle=function(te,de,tt){return Be.current.useImperativeHandle(te,de,tt)},Tt.useInsertionEffect=function(te,de){return Be.current.useInsertionEffect(te,de)},Tt.useLayoutEffect=function(te,de){return Be.current.useLayoutEffect(te,de)},Tt.useMemo=function(te,de){return Be.current.useMemo(te,de)},Tt.useReducer=function(te,de,tt){return Be.current.useReducer(te,de,tt)},Tt.useRef=function(te){return Be.current.useRef(te)},Tt.useState=function(te){return Be.current.useState(te)},Tt.useSyncExternalStore=function(te,de,tt){return Be.current.useSyncExternalStore(te,de,tt)},Tt.useTransition=function(){return Be.current.useTransition()},Tt.version="18.3.1",Tt}var lp;function p1(){return lp||(lp=1,pd.exports=L_()),pd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function B_(){if(up)return $l;up=1;var r=p1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function y(A,x,_){var v,N={},M=null,W=null;_!==void 0&&(M=""+_),x.key!==void 0&&(M=""+x.key),x.ref!==void 0&&(W=x.ref);for(v in x)o.call(x,v)&&!f.hasOwnProperty(v)&&(N[v]=x[v]);if(A&&A.defaultProps)for(v in x=A.defaultProps,x)N[v]===void 0&&(N[v]=x[v]);return{$$typeof:e,type:A,key:M,ref:W,props:N,_owner:u.current}}return $l.Fragment=t,$l.jsx=y,$l.jsxs=y,$l}var cp;function F_(){return cp||(cp=1,gd.exports=B_()),gd.exports}var me=F_(),Re=p1();const zn=x2(Re),V_=_2({__proto__:null,default:zn},[Re]);var bc={},md={exports:{}},ni={},yd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function U_(){return hp||(hp=1,(function(r){function e(Pe,ze){var ke=Pe.length;Pe.push(ze);e:for(;0<ke;){var te=ke-1>>>1,de=Pe[te];if(0<u(de,ze))Pe[te]=ze,Pe[ke]=de,ke=te;else break e}}function t(Pe){return Pe.length===0?null:Pe[0]}function o(Pe){if(Pe.length===0)return null;var ze=Pe[0],ke=Pe.pop();if(ke!==ze){Pe[0]=ke;e:for(var te=0,de=Pe.length,tt=de>>>1;te<tt;){var Ge=2*(te+1)-1,wt=Pe[Ge],be=Ge+1,kt=Pe[be];if(0>u(wt,ke))be<de&&0>u(kt,wt)?(Pe[te]=kt,Pe[be]=ke,te=be):(Pe[te]=wt,Pe[Ge]=ke,te=Ge);else if(be<de&&0>u(kt,ke))Pe[te]=kt,Pe[be]=ke,te=be;else break e}}return ze}function u(Pe,ze){var ke=Pe.sortIndex-ze.sortIndex;return ke!==0?ke:Pe.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var y=Date,A=y.now();r.unstable_now=function(){return y.now()-A}}var x=[],_=[],v=1,N=null,M=3,W=!1,ee=!1,Y=!1,G=typeof setTimeout=="function"?setTimeout:null,Ie=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(Pe){for(var ze=t(_);ze!==null;){if(ze.callback===null)o(_);else if(ze.startTime<=Pe)o(_),ze.sortIndex=ze.expirationTime,e(x,ze);else break;ze=t(_)}}function we(Pe){if(Y=!1,ie(Pe),!ee)if(t(x)!==null)ee=!0,Ct(Ke);else{var ze=t(_);ze!==null&&Be(we,ze.startTime-Pe)}}function Ke(Pe,ze){ee=!1,Y&&(Y=!1,Ie(U),U=-1),W=!0;var ke=M;try{for(ie(ze),N=t(x);N!==null&&(!(N.expirationTime>ze)||Pe&&!X());){var te=N.callback;if(typeof te=="function"){N.callback=null,M=N.priorityLevel;var de=te(N.expirationTime<=ze);ze=r.unstable_now(),typeof de=="function"?N.callback=de:N===t(x)&&o(x),ie(ze)}else o(x);N=t(x)}if(N!==null)var tt=!0;else{var Ge=t(_);Ge!==null&&Be(we,Ge.startTime-ze),tt=!1}return tt}finally{N=null,M=ke,W=!1}}var Le=!1,V=null,U=-1,B=5,$=-1;function X(){return!(r.unstable_now()-$<B)}function q(){if(V!==null){var Pe=r.unstable_now();$=Pe;var ze=!0;try{ze=V(!0,Pe)}finally{ze?j():(Le=!1,V=null)}}else Le=!1}var j;if(typeof ge=="function")j=function(){ge(q)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,le=Je.port2;Je.port1.onmessage=q,j=function(){le.postMessage(null)}}else j=function(){G(q,0)};function Ct(Pe){V=Pe,Le||(Le=!0,j())}function Be(Pe,ze){U=G(function(){Pe(r.unstable_now())},ze)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Pe){Pe.callback=null},r.unstable_continueExecution=function(){ee||W||(ee=!0,Ct(Ke))},r.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Pe?Math.floor(1e3/Pe):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_getFirstCallbackNode=function(){return t(x)},r.unstable_next=function(Pe){switch(M){case 1:case 2:case 3:var ze=3;break;default:ze=M}var ke=M;M=ze;try{return Pe()}finally{M=ke}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Pe,ze){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var ke=M;M=Pe;try{return ze()}finally{M=ke}},r.unstable_scheduleCallback=function(Pe,ze,ke){var te=r.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?te+ke:te):ke=te,Pe){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ke+de,Pe={id:v++,callback:ze,priorityLevel:Pe,startTime:ke,expirationTime:de,sortIndex:-1},ke>te?(Pe.sortIndex=ke,e(_,Pe),t(x)===null&&Pe===t(_)&&(Y?(Ie(U),U=-1):Y=!0,Be(we,ke-te))):(Pe.sortIndex=de,e(x,Pe),ee||W||(ee=!0,Ct(Ke))),Pe},r.unstable_shouldYield=X,r.unstable_wrapCallback=function(Pe){var ze=M;return function(){var ke=M;M=ze;try{return Pe.apply(this,arguments)}finally{M=ke}}}})(wd)),wd}var fp;function z_(){return fp||(fp=1,yd.exports=U_()),yd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function j_(){if(dp)return ni;dp=1;var r=p1(),e=z_();function t(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,g=1;g<arguments.length;g++)l+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function f(i,l){y(i,l),y(i+"Capture",l)}function y(i,l){for(u[i]=l,i=0;i<l.length;i++)o.add(l[i])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},N={};function M(i){return x.call(N,i)?!0:x.call(v,i)?!1:_.test(i)?N[i]=!0:(v[i]=!0,!1)}function W(i,l,g,w){if(g!==null&&g.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function ee(i,l,g,w){if(l===null||typeof l>"u"||W(i,l,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function Y(i,l,g,w,C,T,D){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=w,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=i,this.type=l,this.sanitizeURL=T,this.removeEmptyString=D}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){G[i]=new Y(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];G[l]=new Y(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){G[i]=new Y(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){G[i]=new Y(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){G[i]=new Y(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){G[i]=new Y(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){G[i]=new Y(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){G[i]=new Y(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){G[i]=new Y(i,5,!1,i.toLowerCase(),null,!1,!1)});var Ie=/[\-:]([a-z])/g;function ge(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(Ie,ge);G[l]=new Y(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(Ie,ge);G[l]=new Y(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(Ie,ge);G[l]=new Y(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){G[i]=new Y(i,1,!1,i.toLowerCase(),null,!1,!1)}),G.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){G[i]=new Y(i,1,!1,i.toLowerCase(),null,!0,!0)});function ie(i,l,g,w){var C=G.hasOwnProperty(l)?G[l]:null;(C!==null?C.type!==0:w||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(ee(l,g,C,w)&&(g=null),w||C===null?M(l)&&(g===null?i.removeAttribute(l):i.setAttribute(l,""+g)):C.mustUseProperty?i[C.propertyName]=g===null?C.type===3?!1:"":g:(l=C.attributeName,w=C.attributeNamespace,g===null?i.removeAttribute(l):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,w?i.setAttributeNS(w,l,g):i.setAttribute(l,g))))}var we=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ke=Symbol.for("react.element"),Le=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),X=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Je=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),Pe=Symbol.iterator;function ze(i){return i===null||typeof i!="object"?null:(i=Pe&&i[Pe]||i["@@iterator"],typeof i=="function"?i:null)}var ke=Object.assign,te;function de(i){if(te===void 0)try{throw Error()}catch(g){var l=g.stack.trim().match(/\n( *(at )?)/);te=l&&l[1]||""}return`
`+te+i}var tt=!1;function Ge(i,l){if(!i||tt)return"";tt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(he){var w=he}Reflect.construct(i,[],l)}else{try{l.call()}catch(he){w=he}i.call(l.prototype)}else{try{throw Error()}catch(he){w=he}i()}}catch(he){if(he&&w&&typeof he.stack=="string"){for(var C=he.stack.split(`
`),T=w.stack.split(`
`),D=C.length-1,H=T.length-1;1<=D&&0<=H&&C[D]!==T[H];)H--;for(;1<=D&&0<=H;D--,H--)if(C[D]!==T[H]){if(D!==1||H!==1)do if(D--,H--,0>H||C[D]!==T[H]){var Q=`
`+C[D].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=D&&0<=H);break}}}finally{tt=!1,Error.prepareStackTrace=g}return(i=i?i.displayName||i.name:"")?de(i):""}function wt(i){switch(i.tag){case 5:return de(i.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return i=Ge(i.type,!1),i;case 11:return i=Ge(i.type.render,!1),i;case 1:return i=Ge(i.type,!0),i;default:return""}}function be(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case Le:return"Portal";case B:return"Profiler";case U:return"StrictMode";case j:return"Suspense";case Je:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case X:return(i.displayName||"Context")+".Consumer";case $:return(i._context.displayName||"Context")+".Provider";case q:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case le:return l=i.displayName||null,l!==null?l:be(i.type)||"Memo";case Ct:l=i._payload,i=i._init;try{return be(i(l))}catch{}}return null}function kt(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(l);case 8:return l===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function nt(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Bt(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function bn(i){var l=Bt(i)?"checked":"value",g=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),w=""+i[l];if(!i.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,T=g.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return C.call(this)},set:function(D){w=""+D,T.call(this,D)}}),Object.defineProperty(i,l,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(D){w=""+D},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function On(i){i._valueTracker||(i._valueTracker=bn(i))}function ns(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var g=l.getValue(),w="";return i&&(w=Bt(i)?i.checked?"true":"false":i.value),i=w,i!==g?(l.setValue(i),!0):!1}function Et(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ai(i,l){var g=l.checked;return ke({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??i._wrapperState.initialChecked})}function Mr(i,l){var g=l.defaultValue==null?"":l.defaultValue,w=l.checked!=null?l.checked:l.defaultChecked;g=nt(l.value!=null?l.value:g),i._wrapperState={initialChecked:w,initialValue:g,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Ei(i,l){l=l.checked,l!=null&&ie(i,"checked",l,!1)}function nn(i,l){Ei(i,l);var g=nt(l.value),w=l.type;if(g!=null)w==="number"?(g===0&&i.value===""||i.value!=g)&&(i.value=""+g):i.value!==""+g&&(i.value=""+g);else if(w==="submit"||w==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Ze(i,l.type,g):l.hasOwnProperty("defaultValue")&&Ze(i,l.type,nt(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function Ut(i,l,g){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type;if(!(w!=="submit"&&w!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,g||l===i.value||(i.value=l),i.defaultValue=l}g=i.name,g!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,g!==""&&(i.name=g)}function Ze(i,l,g){(l!=="number"||Et(i.ownerDocument)!==i)&&(g==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+g&&(i.defaultValue=""+g))}var Jt=Array.isArray;function Me(i,l,g,w){if(i=i.options,l){l={};for(var C=0;C<g.length;C++)l["$"+g[C]]=!0;for(g=0;g<i.length;g++)C=l.hasOwnProperty("$"+i[g].value),i[g].selected!==C&&(i[g].selected=C),C&&w&&(i[g].defaultSelected=!0)}else{for(g=""+nt(g),l=null,C=0;C<i.length;C++){if(i[C].value===g){i[C].selected=!0,w&&(i[C].defaultSelected=!0);return}l!==null||i[C].disabled||(l=i[C])}l!==null&&(l.selected=!0)}}function rs(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ke({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function oo(i,l){var g=l.value;if(g==null){if(g=l.children,l=l.defaultValue,g!=null){if(l!=null)throw Error(t(92));if(Jt(g)){if(1<g.length)throw Error(t(93));g=g[0]}l=g}l==null&&(l=""),g=l}i._wrapperState={initialValue:nt(g)}}function Wr(i,l){var g=nt(l.value),w=nt(l.defaultValue);g!=null&&(g=""+g,g!==i.value&&(i.value=g),l.defaultValue==null&&i.defaultValue!==g&&(i.defaultValue=g)),w!=null&&(i.defaultValue=""+w)}function _i(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function ur(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ps(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?ur(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var cr,Ln=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,g,w,C){MSApp.execUnsafeLocalFunction(function(){return i(l,g,w,C)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(cr=cr||document.createElement("div"),cr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=cr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function is(i,l){if(l){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=l;return}}i.textContent=l}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ua=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(i){Ua.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),li[l]=li[i]})});function Yt(i,l,g){return l==null||typeof l=="boolean"||l===""?"":g||typeof l!="number"||l===0||li.hasOwnProperty(i)&&li[i]?(""+l).trim():l+"px"}function Oe(i,l){i=i.style;for(var g in l)if(l.hasOwnProperty(g)){var w=g.indexOf("--")===0,C=Yt(g,l[g],w);g==="float"&&(g="cssFloat"),w?i.setProperty(g,C):i[g]=C}}var rn=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function At(i,l){if(l){if(rn[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Qt(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function ss(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xi=null,yt=null,Xt=null;function ao(i){if(i=Bl(i)){if(typeof xi!="function")throw Error(t(280));var l=i.stateNode;l&&(l=Wu(l),xi(i.stateNode,i.type,l))}}function Fi(i){yt?Xt?Xt.push(i):Xt=[i]:yt=i}function Bn(){if(yt){var i=yt,l=Xt;if(Xt=yt=null,ao(i),l)for(i=0;i<l.length;i++)ao(l[i])}}function lo(i,l){return i(l)}function Pn(){}var hr=!1;function Ds(i,l,g){if(hr)return i(l,g);hr=!0;try{return lo(i,l,g)}finally{hr=!1,(yt!==null||Xt!==null)&&(Pn(),Bn())}}function Jn(i,l){var g=i.stateNode;if(g===null)return null;var w=Wu(g);if(w===null)return null;g=w[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(i=i.type,w=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!w;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(t(231,l,typeof g));return g}var os=!1;if(A)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){os=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{os=!1}function uo(i,l,g,w,C,T,D,H,Q){var he=Array.prototype.slice.call(arguments,3);try{l.apply(g,he)}catch(Ae){this.onError(Ae)}}var hn=!1,er=null,Wn=!1,De=null,Vi={onError:function(i){hn=!0,er=i}};function co(i,l,g,w,C,T,D,H,Q){hn=!1,er=null,uo.apply(Vi,arguments)}function Fn(i,l,g,w,C,T,D,H,Q){if(co.apply(this,arguments),hn){if(hn){var he=er;hn=!1,er=null}else throw Error(t(198));Wn||(Wn=!0,De=he)}}function tr(i){var l=i,g=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(g=l.return),i=l.return;while(i)}return l.tag===3?g:null}function as(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function ks(i){if(tr(i)!==i)throw Error(t(188))}function Lr(i){var l=i.alternate;if(!l){if(l=tr(i),l===null)throw Error(t(188));return l!==i?null:i}for(var g=i,w=l;;){var C=g.return;if(C===null)break;var T=C.alternate;if(T===null){if(w=C.return,w!==null){g=w;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===g)return ks(C),i;if(T===w)return ks(C),l;T=T.sibling}throw Error(t(188))}if(g.return!==w.return)g=C,w=T;else{for(var D=!1,H=C.child;H;){if(H===g){D=!0,g=C,w=T;break}if(H===w){D=!0,w=C,g=T;break}H=H.sibling}if(!D){for(H=T.child;H;){if(H===g){D=!0,g=T,w=C;break}if(H===w){D=!0,w=T,g=C;break}H=H.sibling}if(!D)throw Error(t(189))}}if(g.alternate!==w)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?i:l}function za(i){return i=Lr(i),i!==null?Ms(i):null}function Ms(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Ms(i);if(l!==null)return l;i=i.sibling}return null}var Ar=e.unstable_scheduleCallback,In=e.unstable_cancelCallback,zt=e.unstable_shouldYield,Ai=e.unstable_requestPaint,Mt=e.unstable_now,na=e.unstable_getCurrentPriorityLevel,pe=e.unstable_ImmediatePriority,ra=e.unstable_UserBlockingPriority,qt=e.unstable_NormalPriority,Ii=e.unstable_LowPriority,ho=e.unstable_IdlePriority,vt=null,gt=null;function _t(i){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(vt,i,void 0,(i.current.flags&128)===128)}catch{}}var fr=Math.clz32?Math.clz32:$t,Xr=Math.log,Ir=Math.LN2;function $t(i){return i>>>=0,i===0?32:31-(Xr(i)/Ir|0)|0}var Gn=64,ls=4194304;function et(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function nr(i,l){var g=i.pendingLanes;if(g===0)return 0;var w=0,C=i.suspendedLanes,T=i.pingedLanes,D=g&268435455;if(D!==0){var H=D&~C;H!==0?w=et(H):(T&=D,T!==0&&(w=et(T)))}else D=g&~C,D!==0?w=et(D):T!==0&&(w=et(T));if(w===0)return 0;if(l!==0&&l!==w&&(l&C)===0&&(C=w&-w,T=l&-l,C>=T||C===16&&(T&4194240)!==0))return l;if((w&4)!==0&&(w|=g&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=w;0<l;)g=31-fr(l),C=1<<g,w|=i[g],l&=~C;return w}function Ls(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qr(i,l){for(var g=i.suspendedLanes,w=i.pingedLanes,C=i.expirationTimes,T=i.pendingLanes;0<T;){var D=31-fr(T),H=1<<D,Q=C[D];Q===-1?((H&g)===0||(H&w)!==0)&&(C[D]=Ls(H,l)):Q<=l&&(i.expiredLanes|=H),T&=~H}}function jt(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Cn(){var i=Gn;return Gn<<=1,(Gn&4194240)===0&&(Gn=64),i}function se(i){for(var l=[],g=0;31>g;g++)l.push(i);return l}function F(i,l,g){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-fr(l),i[l]=g}function Xe(i,l){var g=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var w=i.eventTimes;for(i=i.expirationTimes;0<g;){var C=31-fr(g),T=1<<C;l[C]=0,w[C]=-1,i[C]=-1,g&=~T}}function fn(i,l){var g=i.entangledLanes|=l;for(i=i.entanglements;g;){var w=31-fr(g),C=1<<w;C&l|i[w]&l&&(i[w]|=l),g&=~C}}var lt=0;function Ci(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Bs,Xn,Ye,Zt,fo,vi=!1,us=[],Br=null,Kr=null,qn=null,en=new Map,Fr=new Map,vn=[],$e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cs(i,l){switch(i){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":en.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(l.pointerId)}}function rt(i,l,g,w,C,T){return i===null||i.nativeEvent!==T?(i={blockedOn:l,domEventName:g,eventSystemFlags:w,nativeEvent:T,targetContainers:[C]},l!==null&&(l=Bl(l),l!==null&&Xn(l)),i):(i.eventSystemFlags|=w,l=i.targetContainers,C!==null&&l.indexOf(C)===-1&&l.push(C),i)}function Tn(i,l,g,w,C){switch(l){case"focusin":return Br=rt(Br,i,l,g,w,C),!0;case"dragenter":return Kr=rt(Kr,i,l,g,w,C),!0;case"mouseover":return qn=rt(qn,i,l,g,w,C),!0;case"pointerover":var T=C.pointerId;return en.set(T,rt(en.get(T)||null,i,l,g,w,C)),!0;case"gotpointercapture":return T=C.pointerId,Fr.set(T,rt(Fr.get(T)||null,i,l,g,w,C)),!0}return!1}function go(i){var l=la(i.target);if(l!==null){var g=tr(l);if(g!==null){if(l=g.tag,l===13){if(l=as(g),l!==null){i.blockedOn=l,fo(i.priority,function(){Ye(g)});return}}else if(l===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Wt(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var g=Fs(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(g===null){g=i.nativeEvent;var w=new g.constructor(g.type,g);Gr=w,g.target.dispatchEvent(w),Gr=null}else return l=Bl(g),l!==null&&Xn(l),i.blockedOn=g,!1;l.shift()}return!0}function ia(i,l,g){Wt(i)&&g.delete(l)}function Ui(){vi=!1,Br!==null&&Wt(Br)&&(Br=null),Kr!==null&&Wt(Kr)&&(Kr=null),qn!==null&&Wt(qn)&&(qn=null),en.forEach(ia),Fr.forEach(ia)}function hs(i,l){i.blockedOn===l&&(i.blockedOn=null,vi||(vi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ui)))}function Yr(i){function l(C){return hs(C,i)}if(0<us.length){hs(us[0],i);for(var g=1;g<us.length;g++){var w=us[g];w.blockedOn===i&&(w.blockedOn=null)}}for(Br!==null&&hs(Br,i),Kr!==null&&hs(Kr,i),qn!==null&&hs(qn,i),en.forEach(l),Fr.forEach(l),g=0;g<vn.length;g++)w=vn[g],w.blockedOn===i&&(w.blockedOn=null);for(;0<vn.length&&(g=vn[0],g.blockedOn===null);)go(g),g.blockedOn===null&&vn.shift()}var Vr=we.ReactCurrentBatchConfig,Ur=!0;function ui(i,l,g,w){var C=lt,T=Vr.transition;Vr.transition=null;try{lt=1,zi(i,l,g,w)}finally{lt=C,Vr.transition=T}}function fs(i,l,g,w){var C=lt,T=Vr.transition;Vr.transition=null;try{lt=4,zi(i,l,g,w)}finally{lt=C,Vr.transition=T}}function zi(i,l,g,w){if(Ur){var C=Fs(i,l,g,w);if(C===null)rf(i,l,w,sn,g),cs(i,w);else if(Tn(C,i,l,g,w))w.stopPropagation();else if(cs(i,w),l&4&&-1<$e.indexOf(i)){for(;C!==null;){var T=Bl(C);if(T!==null&&Bs(T),T=Fs(i,l,g,w),T===null&&rf(i,l,w,sn,g),T===C)break;C=T}C!==null&&w.stopPropagation()}else rf(i,l,w,null,g)}}var sn=null;function Fs(i,l,g,w){if(sn=null,i=ss(w),i=la(i),i!==null)if(l=tr(i),l===null)i=null;else if(g=l.tag,g===13){if(i=as(l),i!==null)return i;i=null}else if(g===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return sn=i,null}function Vs(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(na()){case pe:return 1;case ra:return 4;case qt:case Ii:return 16;case ho:return 536870912;default:return 16}default:return 16}}var Cr=null,po=null,ji=null;function ja(){if(ji)return ji;var i,l=po,g=l.length,w,C="value"in Cr?Cr.value:Cr.textContent,T=C.length;for(i=0;i<g&&l[i]===C[i];i++);var D=g-i;for(w=1;w<=D&&l[g-w]===C[T-w];w++);return ji=C.slice(i,1<w?1-w:void 0)}function Rt(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function ci(){return!0}function ds(){return!1}function on(i){function l(g,w,C,T,D){this._reactName=g,this._targetInst=C,this.type=w,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(g=i[H],this[H]=g?g(T):T[H]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ci:ds,this.isPropagationStopped=ds,this}return ke(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),l}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ue=on(Ti),ut=ke({},Ti,{view:0,detail:0}),dn=on(ut),Hi,Us,zr,zs=ke({},ut,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ct,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zr&&(zr&&i.type==="mousemove"?(Hi=i.screenX-zr.screenX,Us=i.screenY-zr.screenY):Us=Hi=0,zr=i),Hi)},movementY:function(i){return"movementY"in i?i.movementY:Us}}),sa=on(zs),mo=ke({},zs,{dataTransfer:0}),gn=on(mo),gs=ke({},ut,{relatedTarget:0}),xt=on(gs),js=ke({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=on(js),Nt=ke({},Ti,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),p=on(Nt),S=ke({},Ti,{data:0}),b=on(S),L={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},re={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Te(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=fe[i])?!!l[i]:!1}function ct(){return Te}var pn=ke({},ut,{key:function(i){if(i.key){var l=L[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Rt(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?re[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ct,charCode:function(i){return i.type==="keypress"?Rt(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Rt(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ft=on(pn),yn=ke({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vr=on(yn),Wi=ke({},ut,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ct}),dr=on(Wi),Qr=ke({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),yo=on(Qr),Gi=ke({},zs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$h=on(Gi),ps=[9,13,27,32],wo=A&&"CompositionEvent"in window,rr=null;A&&"documentMode"in document&&(rr=document.documentMode);var Lu=A&&"TextEvent"in window&&!rr,hi=A&&(!wo||rr&&8<rr&&11>=rr),Bu=" ",Ha=!1;function Fu(i,l){switch(i){case"keyup":return ps.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var gr=!1;function Jh(i,l){switch(i){case"compositionend":return bl(l);case"keypress":return l.which!==32?null:(Ha=!0,Bu);case"textInput":return i=l.data,i===Bu&&Ha?null:i;default:return null}}function Ol(i,l){if(gr)return i==="compositionend"||!wo&&Fu(i,l)?(i=ja(),ji=po=Cr=null,gr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return hi&&l.locale!=="ko"?null:l.data;default:return null}}var oa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bt(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!oa[i.type]:l==="textarea"}function aa(i,l,g,w){Fi(w),l=zu(l,"onChange"),0<l.length&&(g=new ue("onChange","change",null,g,w),i.push({event:g,listeners:l}))}var O=null,n=null;function s(i){I0(i,0)}function a(i){var l=Xa(i);if(ns(l))return i}function c(i,l){if(i==="change")return l}var h=!1;if(A){var d;if(A){var m="oninput"in document;if(!m){var E=document.createElement("div");E.setAttribute("oninput","return;"),m=typeof E.oninput=="function"}d=m}else d=!1;h=d&&(!document.documentMode||9<document.documentMode)}function I(){O&&(O.detachEvent("onpropertychange",R),n=O=null)}function R(i){if(i.propertyName==="value"&&a(n)){var l=[];aa(l,n,i,ss(i)),Ds(s,l)}}function P(i,l,g){i==="focusin"?(I(),O=l,n=g,O.attachEvent("onpropertychange",R)):i==="focusout"&&I()}function k(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return a(n)}function z(i,l){if(i==="click")return a(l)}function K(i,l){if(i==="input"||i==="change")return a(l)}function Z(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var ne=typeof Object.is=="function"?Object.is:Z;function ce(i,l){if(ne(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var g=Object.keys(i),w=Object.keys(l);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var C=g[w];if(!x.call(l,C)||!ne(i[C],l[C]))return!1}return!0}function ve(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Se(i,l){var g=ve(i);i=0;for(var w;g;){if(g.nodeType===3){if(w=i+g.textContent.length,i<=l&&w>=l)return{node:g,offset:l-i};i=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=ve(g)}}function _e(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?_e(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function It(){for(var i=window,l=Et();l instanceof i.HTMLIFrameElement;){try{var g=typeof l.contentWindow.location.href=="string"}catch{g=!1}if(g)i=l.contentWindow;else break;l=Et(i.document)}return l}function dt(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function Tr(i){var l=It(),g=i.focusedElem,w=i.selectionRange;if(l!==g&&g&&g.ownerDocument&&_e(g.ownerDocument.documentElement,g)){if(w!==null&&dt(g)){if(l=w.start,i=w.end,i===void 0&&(i=l),"selectionStart"in g)g.selectionStart=l,g.selectionEnd=Math.min(i,g.value.length);else if(i=(l=g.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var C=g.textContent.length,T=Math.min(w.start,C);w=w.end===void 0?T:Math.min(w.end,C),!i.extend&&T>w&&(C=w,w=T,T=C),C=Se(g,T);var D=Se(g,w);C&&D&&(i.rangeCount!==1||i.anchorNode!==C.node||i.anchorOffset!==C.offset||i.focusNode!==D.node||i.focusOffset!==D.offset)&&(l=l.createRange(),l.setStart(C.node,C.offset),i.removeAllRanges(),T>w?(i.addRange(l),i.extend(D.node,D.offset)):(l.setEnd(D.node,D.offset),i.addRange(l)))}}for(l=[],i=g;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<l.length;g++)i=l[g],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var fi=A&&"documentMode"in document&&11>=document.documentMode,Dn=null,Gt=null,wn=null,pr=!1;function Hs(i,l,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;pr||Dn==null||Dn!==Et(w)||(w=Dn,"selectionStart"in w&&dt(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),wn&&ce(wn,w)||(wn=w,w=zu(Gt,"onSelect"),0<w.length&&(l=new ue("onSelect","select",null,l,g),i.push({event:l,listeners:w}),l.target=Dn)))}function Xi(i,l){var g={};return g[i.toLowerCase()]=l.toLowerCase(),g["Webkit"+i]="webkit"+l,g["Moz"+i]="moz"+l,g}var Eo={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionend:Xi("Transition","TransitionEnd")},Pl={},p0={};A&&(p0=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Vu(i){if(Pl[i])return Pl[i];if(!Eo[i])return i;var l=Eo[i],g;for(g in l)if(l.hasOwnProperty(g)&&g in p0)return Pl[i]=l[g];return i}var m0=Vu("animationend"),y0=Vu("animationiteration"),w0=Vu("animationstart"),E0=Vu("transitionend"),_0=new Map,x0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(i,l){_0.set(i,l),f(l,[i])}for(var ef=0;ef<x0.length;ef++){var tf=x0[ef],GE=tf.toLowerCase(),XE=tf[0].toUpperCase()+tf.slice(1);_o(GE,"on"+XE)}_o(m0,"onAnimationEnd"),_o(y0,"onAnimationIteration"),_o(w0,"onAnimationStart"),_o("dblclick","onDoubleClick"),_o("focusin","onFocus"),_o("focusout","onBlur"),_o(E0,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function A0(i,l,g){var w=i.type||"unknown-event";i.currentTarget=g,Fn(w,l,void 0,i),i.currentTarget=null}function I0(i,l){l=(l&4)!==0;for(var g=0;g<i.length;g++){var w=i[g],C=w.event;w=w.listeners;e:{var T=void 0;if(l)for(var D=w.length-1;0<=D;D--){var H=w[D],Q=H.instance,he=H.currentTarget;if(H=H.listener,Q!==T&&C.isPropagationStopped())break e;A0(C,H,he),T=Q}else for(D=0;D<w.length;D++){if(H=w[D],Q=H.instance,he=H.currentTarget,H=H.listener,Q!==T&&C.isPropagationStopped())break e;A0(C,H,he),T=Q}}}if(Wn)throw i=De,Wn=!1,De=null,i}function an(i,l){var g=l[cf];g===void 0&&(g=l[cf]=new Set);var w=i+"__bubble";g.has(w)||(C0(l,i,2,!1),g.add(w))}function nf(i,l,g){var w=0;l&&(w|=4),C0(g,i,w,l)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function kl(i){if(!i[Uu]){i[Uu]=!0,o.forEach(function(g){g!=="selectionchange"&&(qE.has(g)||nf(g,!1,i),nf(g,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Uu]||(l[Uu]=!0,nf("selectionchange",!1,l))}}function C0(i,l,g,w){switch(Vs(l)){case 1:var C=ui;break;case 4:C=fs;break;default:C=zi}g=C.bind(null,l,g,i),C=void 0,!os||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(C=!0),w?C!==void 0?i.addEventListener(l,g,{capture:!0,passive:C}):i.addEventListener(l,g,!0):C!==void 0?i.addEventListener(l,g,{passive:C}):i.addEventListener(l,g,!1)}function rf(i,l,g,w,C){var T=w;if((l&1)===0&&(l&2)===0&&w!==null)e:for(;;){if(w===null)return;var D=w.tag;if(D===3||D===4){var H=w.stateNode.containerInfo;if(H===C||H.nodeType===8&&H.parentNode===C)break;if(D===4)for(D=w.return;D!==null;){var Q=D.tag;if((Q===3||Q===4)&&(Q=D.stateNode.containerInfo,Q===C||Q.nodeType===8&&Q.parentNode===C))return;D=D.return}for(;H!==null;){if(D=la(H),D===null)return;if(Q=D.tag,Q===5||Q===6){w=T=D;continue e}H=H.parentNode}}w=w.return}Ds(function(){var he=T,Ae=ss(g),Ce=[];e:{var Ee=_0.get(i);if(Ee!==void 0){var Fe=ue,He=i;switch(i){case"keypress":if(Rt(g)===0)break e;case"keydown":case"keyup":Fe=Ft;break;case"focusin":He="focus",Fe=xt;break;case"focusout":He="blur",Fe=xt;break;case"beforeblur":case"afterblur":Fe=xt;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=dr;break;case m0:case y0:case w0:Fe=Si;break;case E0:Fe=yo;break;case"scroll":Fe=dn;break;case"wheel":Fe=$h;break;case"copy":case"cut":case"paste":Fe=p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=vr}var We=(l&4)!==0,kn=!We&&i==="scroll",oe=We?Ee!==null?Ee+"Capture":null:Ee;We=[];for(var J=he,ae;J!==null;){ae=J;var Ne=ae.stateNode;if(ae.tag===5&&Ne!==null&&(ae=Ne,oe!==null&&(Ne=Jn(J,oe),Ne!=null&&We.push(Ml(J,Ne,ae)))),kn)break;J=J.return}0<We.length&&(Ee=new Fe(Ee,He,null,g,Ae),Ce.push({event:Ee,listeners:We}))}}if((l&7)===0){e:{if(Ee=i==="mouseover"||i==="pointerover",Fe=i==="mouseout"||i==="pointerout",Ee&&g!==Gr&&(He=g.relatedTarget||g.fromElement)&&(la(He)||He[Ws]))break e;if((Fe||Ee)&&(Ee=Ae.window===Ae?Ae:(Ee=Ae.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Fe?(He=g.relatedTarget||g.toElement,Fe=he,He=He?la(He):null,He!==null&&(kn=tr(He),He!==kn||He.tag!==5&&He.tag!==6)&&(He=null)):(Fe=null,He=he),Fe!==He)){if(We=sa,Ne="onMouseLeave",oe="onMouseEnter",J="mouse",(i==="pointerout"||i==="pointerover")&&(We=vr,Ne="onPointerLeave",oe="onPointerEnter",J="pointer"),kn=Fe==null?Ee:Xa(Fe),ae=He==null?Ee:Xa(He),Ee=new We(Ne,J+"leave",Fe,g,Ae),Ee.target=kn,Ee.relatedTarget=ae,Ne=null,la(Ae)===he&&(We=new We(oe,J+"enter",He,g,Ae),We.target=ae,We.relatedTarget=kn,Ne=We),kn=Ne,Fe&&He)t:{for(We=Fe,oe=He,J=0,ae=We;ae;ae=Wa(ae))J++;for(ae=0,Ne=oe;Ne;Ne=Wa(Ne))ae++;for(;0<J-ae;)We=Wa(We),J--;for(;0<ae-J;)oe=Wa(oe),ae--;for(;J--;){if(We===oe||oe!==null&&We===oe.alternate)break t;We=Wa(We),oe=Wa(oe)}We=null}else We=null;Fe!==null&&v0(Ce,Ee,Fe,We,!1),He!==null&&kn!==null&&v0(Ce,kn,He,We,!0)}}e:{if(Ee=he?Xa(he):window,Fe=Ee.nodeName&&Ee.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&Ee.type==="file")var qe=c;else if(bt(Ee))if(h)qe=K;else{qe=k;var it=P}else(Fe=Ee.nodeName)&&Fe.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(qe=z);if(qe&&(qe=qe(i,he))){aa(Ce,qe,g,Ae);break e}it&&it(i,Ee,he),i==="focusout"&&(it=Ee._wrapperState)&&it.controlled&&Ee.type==="number"&&Ze(Ee,"number",Ee.value)}switch(it=he?Xa(he):window,i){case"focusin":(bt(it)||it.contentEditable==="true")&&(Dn=it,Gt=he,wn=null);break;case"focusout":wn=Gt=Dn=null;break;case"mousedown":pr=!0;break;case"contextmenu":case"mouseup":case"dragend":pr=!1,Hs(Ce,g,Ae);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":Hs(Ce,g,Ae)}var st;if(wo)e:{switch(i){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else gr?Fu(i,g)&&(ht="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(ht="onCompositionStart");ht&&(hi&&g.locale!=="ko"&&(gr||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&gr&&(st=ja()):(Cr=Ae,po="value"in Cr?Cr.value:Cr.textContent,gr=!0)),it=zu(he,ht),0<it.length&&(ht=new b(ht,i,null,g,Ae),Ce.push({event:ht,listeners:it}),st?ht.data=st:(st=bl(g),st!==null&&(ht.data=st)))),(st=Lu?Jh(i,g):Ol(i,g))&&(he=zu(he,"onBeforeInput"),0<he.length&&(Ae=new b("onBeforeInput","beforeinput",null,g,Ae),Ce.push({event:Ae,listeners:he}),Ae.data=st))}I0(Ce,l)})}function Ml(i,l,g){return{instance:i,listener:l,currentTarget:g}}function zu(i,l){for(var g=l+"Capture",w=[];i!==null;){var C=i,T=C.stateNode;C.tag===5&&T!==null&&(C=T,T=Jn(i,g),T!=null&&w.unshift(Ml(i,T,C)),T=Jn(i,l),T!=null&&w.push(Ml(i,T,C))),i=i.return}return w}function Wa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function v0(i,l,g,w,C){for(var T=l._reactName,D=[];g!==null&&g!==w;){var H=g,Q=H.alternate,he=H.stateNode;if(Q!==null&&Q===w)break;H.tag===5&&he!==null&&(H=he,C?(Q=Jn(g,T),Q!=null&&D.unshift(Ml(g,Q,H))):C||(Q=Jn(g,T),Q!=null&&D.push(Ml(g,Q,H)))),g=g.return}D.length!==0&&i.push({event:l,listeners:D})}var KE=/\r\n?/g,YE=/\u0000|\uFFFD/g;function T0(i){return(typeof i=="string"?i:""+i).replace(KE,`
`).replace(YE,"")}function ju(i,l,g){if(l=T0(l),T0(i)!==l&&g)throw Error(t(425))}function Hu(){}var sf=null,of=null;function af(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,QE=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof S0<"u"?function(i){return S0.resolve(null).then(i).catch($E)}:lf;function $E(i){setTimeout(function(){throw i})}function uf(i,l){var g=l,w=0;do{var C=g.nextSibling;if(i.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(w===0){i.removeChild(C),Yr(l);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=C}while(g);Yr(l)}function xo(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function R0(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"){if(l===0)return i;l--}else g==="/$"&&l++}i=i.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),ms="__reactFiber$"+Ga,Ll="__reactProps$"+Ga,Ws="__reactContainer$"+Ga,cf="__reactEvents$"+Ga,JE="__reactListeners$"+Ga,e_="__reactHandles$"+Ga;function la(i){var l=i[ms];if(l)return l;for(var g=i.parentNode;g;){if(l=g[Ws]||g[ms]){if(g=l.alternate,l.child!==null||g!==null&&g.child!==null)for(i=R0(i);i!==null;){if(g=i[ms])return g;i=R0(i)}return l}i=g,g=i.parentNode}return null}function Bl(i){return i=i[ms]||i[Ws],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Xa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Wu(i){return i[Ll]||null}var hf=[],qa=-1;function Ao(i){return{current:i}}function ln(i){0>qa||(i.current=hf[qa],hf[qa]=null,qa--)}function tn(i,l){qa++,hf[qa]=i.current,i.current=l}var Io={},Sr=Ao(Io),Zr=Ao(!1),ua=Io;function Ka(i,l){var g=i.type.contextTypes;if(!g)return Io;var w=i.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var C={},T;for(T in g)C[T]=l[T];return w&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=C),C}function $r(i){return i=i.childContextTypes,i!=null}function Gu(){ln(Zr),ln(Sr)}function N0(i,l,g){if(Sr.current!==Io)throw Error(t(168));tn(Sr,l),tn(Zr,g)}function b0(i,l,g){var w=i.stateNode;if(l=l.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var C in w)if(!(C in l))throw Error(t(108,kt(i)||"Unknown",C));return ke({},g,w)}function Xu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Io,ua=Sr.current,tn(Sr,i),tn(Zr,Zr.current),!0}function O0(i,l,g){var w=i.stateNode;if(!w)throw Error(t(169));g?(i=b0(i,l,ua),w.__reactInternalMemoizedMergedChildContext=i,ln(Zr),ln(Sr),tn(Sr,i)):ln(Zr),tn(Zr,g)}var Gs=null,qu=!1,ff=!1;function P0(i){Gs===null?Gs=[i]:Gs.push(i)}function t_(i){qu=!0,P0(i)}function Co(){if(!ff&&Gs!==null){ff=!0;var i=0,l=lt;try{var g=Gs;for(lt=1;i<g.length;i++){var w=g[i];do w=w(!0);while(w!==null)}Gs=null,qu=!1}catch(C){throw Gs!==null&&(Gs=Gs.slice(i+1)),Ar(pe,Co),C}finally{lt=l,ff=!1}}return null}var Ya=[],Qa=0,Ku=null,Yu=0,Ri=[],Ni=0,ca=null,Xs=1,qs="";function ha(i,l){Ya[Qa++]=Yu,Ya[Qa++]=Ku,Ku=i,Yu=l}function D0(i,l,g){Ri[Ni++]=Xs,Ri[Ni++]=qs,Ri[Ni++]=ca,ca=i;var w=Xs;i=qs;var C=32-fr(w)-1;w&=~(1<<C),g+=1;var T=32-fr(l)+C;if(30<T){var D=C-C%5;T=(w&(1<<D)-1).toString(32),w>>=D,C-=D,Xs=1<<32-fr(l)+C|g<<C|w,qs=T+i}else Xs=1<<T|g<<C|w,qs=i}function df(i){i.return!==null&&(ha(i,1),D0(i,1,0))}function gf(i){for(;i===Ku;)Ku=Ya[--Qa],Ya[Qa]=null,Yu=Ya[--Qa],Ya[Qa]=null;for(;i===ca;)ca=Ri[--Ni],Ri[Ni]=null,qs=Ri[--Ni],Ri[Ni]=null,Xs=Ri[--Ni],Ri[Ni]=null}var di=null,gi=null,mn=!1,qi=null;function k0(i,l){var g=Di(5,null,null,0);g.elementType="DELETED",g.stateNode=l,g.return=i,l=i.deletions,l===null?(i.deletions=[g],i.flags|=16):l.push(g)}function M0(i,l){switch(i.tag){case 5:var g=i.type;return l=l.nodeType!==1||g.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,di=i,gi=xo(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,di=i,gi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(g=ca!==null?{id:Xs,overflow:qs}:null,i.memoizedState={dehydrated:l,treeContext:g,retryLane:1073741824},g=Di(18,null,null,0),g.stateNode=l,g.return=i,i.child=g,di=i,gi=null,!0):!1;default:return!1}}function pf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function mf(i){if(mn){var l=gi;if(l){var g=l;if(!M0(i,l)){if(pf(i))throw Error(t(418));l=xo(g.nextSibling);var w=di;l&&M0(i,l)?k0(w,g):(i.flags=i.flags&-4097|2,mn=!1,di=i)}}else{if(pf(i))throw Error(t(418));i.flags=i.flags&-4097|2,mn=!1,di=i}}}function L0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;di=i}function Qu(i){if(i!==di)return!1;if(!mn)return L0(i),mn=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!af(i.type,i.memoizedProps)),l&&(l=gi)){if(pf(i))throw B0(),Error(t(418));for(;l;)k0(i,l),l=xo(l.nextSibling)}if(L0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"){if(l===0){gi=xo(i.nextSibling);break e}l--}else g!=="$"&&g!=="$!"&&g!=="$?"||l++}i=i.nextSibling}gi=null}}else gi=di?xo(i.stateNode.nextSibling):null;return!0}function B0(){for(var i=gi;i;)i=xo(i.nextSibling)}function Za(){gi=di=null,mn=!1}function yf(i){qi===null?qi=[i]:qi.push(i)}var n_=we.ReactCurrentBatchConfig;function Fl(i,l,g){if(i=g.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var w=g.stateNode}if(!w)throw Error(t(147,i));var C=w,T=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(D){var H=C.refs;D===null?delete H[T]:H[T]=D},l._stringRef=T,l)}if(typeof i!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,i))}return i}function Zu(i,l){throw i=Object.prototype.toString.call(l),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function F0(i){var l=i._init;return l(i._payload)}function V0(i){function l(oe,J){if(i){var ae=oe.deletions;ae===null?(oe.deletions=[J],oe.flags|=16):ae.push(J)}}function g(oe,J){if(!i)return null;for(;J!==null;)l(oe,J),J=J.sibling;return null}function w(oe,J){for(oe=new Map;J!==null;)J.key!==null?oe.set(J.key,J):oe.set(J.index,J),J=J.sibling;return oe}function C(oe,J){return oe=Po(oe,J),oe.index=0,oe.sibling=null,oe}function T(oe,J,ae){return oe.index=ae,i?(ae=oe.alternate,ae!==null?(ae=ae.index,ae<J?(oe.flags|=2,J):ae):(oe.flags|=2,J)):(oe.flags|=1048576,J)}function D(oe){return i&&oe.alternate===null&&(oe.flags|=2),oe}function H(oe,J,ae,Ne){return J===null||J.tag!==6?(J=ld(ae,oe.mode,Ne),J.return=oe,J):(J=C(J,ae),J.return=oe,J)}function Q(oe,J,ae,Ne){var qe=ae.type;return qe===V?Ae(oe,J,ae.props.children,Ne,ae.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Ct&&F0(qe)===J.type)?(Ne=C(J,ae.props),Ne.ref=Fl(oe,J,ae),Ne.return=oe,Ne):(Ne=xc(ae.type,ae.key,ae.props,null,oe.mode,Ne),Ne.ref=Fl(oe,J,ae),Ne.return=oe,Ne)}function he(oe,J,ae,Ne){return J===null||J.tag!==4||J.stateNode.containerInfo!==ae.containerInfo||J.stateNode.implementation!==ae.implementation?(J=ud(ae,oe.mode,Ne),J.return=oe,J):(J=C(J,ae.children||[]),J.return=oe,J)}function Ae(oe,J,ae,Ne,qe){return J===null||J.tag!==7?(J=Ea(ae,oe.mode,Ne,qe),J.return=oe,J):(J=C(J,ae),J.return=oe,J)}function Ce(oe,J,ae){if(typeof J=="string"&&J!==""||typeof J=="number")return J=ld(""+J,oe.mode,ae),J.return=oe,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Ke:return ae=xc(J.type,J.key,J.props,null,oe.mode,ae),ae.ref=Fl(oe,null,J),ae.return=oe,ae;case Le:return J=ud(J,oe.mode,ae),J.return=oe,J;case Ct:var Ne=J._init;return Ce(oe,Ne(J._payload),ae)}if(Jt(J)||ze(J))return J=Ea(J,oe.mode,ae,null),J.return=oe,J;Zu(oe,J)}return null}function Ee(oe,J,ae,Ne){var qe=J!==null?J.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return qe!==null?null:H(oe,J,""+ae,Ne);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Ke:return ae.key===qe?Q(oe,J,ae,Ne):null;case Le:return ae.key===qe?he(oe,J,ae,Ne):null;case Ct:return qe=ae._init,Ee(oe,J,qe(ae._payload),Ne)}if(Jt(ae)||ze(ae))return qe!==null?null:Ae(oe,J,ae,Ne,null);Zu(oe,ae)}return null}function Fe(oe,J,ae,Ne,qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return oe=oe.get(ae)||null,H(J,oe,""+Ne,qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Ke:return oe=oe.get(Ne.key===null?ae:Ne.key)||null,Q(J,oe,Ne,qe);case Le:return oe=oe.get(Ne.key===null?ae:Ne.key)||null,he(J,oe,Ne,qe);case Ct:var it=Ne._init;return Fe(oe,J,ae,it(Ne._payload),qe)}if(Jt(Ne)||ze(Ne))return oe=oe.get(ae)||null,Ae(J,oe,Ne,qe,null);Zu(J,Ne)}return null}function He(oe,J,ae,Ne){for(var qe=null,it=null,st=J,ht=J=0,or=null;st!==null&&ht<ae.length;ht++){st.index>ht?(or=st,st=null):or=st.sibling;var Ht=Ee(oe,st,ae[ht],Ne);if(Ht===null){st===null&&(st=or);break}i&&st&&Ht.alternate===null&&l(oe,st),J=T(Ht,J,ht),it===null?qe=Ht:it.sibling=Ht,it=Ht,st=or}if(ht===ae.length)return g(oe,st),mn&&ha(oe,ht),qe;if(st===null){for(;ht<ae.length;ht++)st=Ce(oe,ae[ht],Ne),st!==null&&(J=T(st,J,ht),it===null?qe=st:it.sibling=st,it=st);return mn&&ha(oe,ht),qe}for(st=w(oe,st);ht<ae.length;ht++)or=Fe(st,oe,ht,ae[ht],Ne),or!==null&&(i&&or.alternate!==null&&st.delete(or.key===null?ht:or.key),J=T(or,J,ht),it===null?qe=or:it.sibling=or,it=or);return i&&st.forEach(function(Do){return l(oe,Do)}),mn&&ha(oe,ht),qe}function We(oe,J,ae,Ne){var qe=ze(ae);if(typeof qe!="function")throw Error(t(150));if(ae=qe.call(ae),ae==null)throw Error(t(151));for(var it=qe=null,st=J,ht=J=0,or=null,Ht=ae.next();st!==null&&!Ht.done;ht++,Ht=ae.next()){st.index>ht?(or=st,st=null):or=st.sibling;var Do=Ee(oe,st,Ht.value,Ne);if(Do===null){st===null&&(st=or);break}i&&st&&Do.alternate===null&&l(oe,st),J=T(Do,J,ht),it===null?qe=Do:it.sibling=Do,it=Do,st=or}if(Ht.done)return g(oe,st),mn&&ha(oe,ht),qe;if(st===null){for(;!Ht.done;ht++,Ht=ae.next())Ht=Ce(oe,Ht.value,Ne),Ht!==null&&(J=T(Ht,J,ht),it===null?qe=Ht:it.sibling=Ht,it=Ht);return mn&&ha(oe,ht),qe}for(st=w(oe,st);!Ht.done;ht++,Ht=ae.next())Ht=Fe(st,oe,ht,Ht.value,Ne),Ht!==null&&(i&&Ht.alternate!==null&&st.delete(Ht.key===null?ht:Ht.key),J=T(Ht,J,ht),it===null?qe=Ht:it.sibling=Ht,it=Ht);return i&&st.forEach(function(M_){return l(oe,M_)}),mn&&ha(oe,ht),qe}function kn(oe,J,ae,Ne){if(typeof ae=="object"&&ae!==null&&ae.type===V&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Ke:e:{for(var qe=ae.key,it=J;it!==null;){if(it.key===qe){if(qe=ae.type,qe===V){if(it.tag===7){g(oe,it.sibling),J=C(it,ae.props.children),J.return=oe,oe=J;break e}}else if(it.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Ct&&F0(qe)===it.type){g(oe,it.sibling),J=C(it,ae.props),J.ref=Fl(oe,it,ae),J.return=oe,oe=J;break e}g(oe,it);break}else l(oe,it);it=it.sibling}ae.type===V?(J=Ea(ae.props.children,oe.mode,Ne,ae.key),J.return=oe,oe=J):(Ne=xc(ae.type,ae.key,ae.props,null,oe.mode,Ne),Ne.ref=Fl(oe,J,ae),Ne.return=oe,oe=Ne)}return D(oe);case Le:e:{for(it=ae.key;J!==null;){if(J.key===it)if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){g(oe,J.sibling),J=C(J,ae.children||[]),J.return=oe,oe=J;break e}else{g(oe,J);break}else l(oe,J);J=J.sibling}J=ud(ae,oe.mode,Ne),J.return=oe,oe=J}return D(oe);case Ct:return it=ae._init,kn(oe,J,it(ae._payload),Ne)}if(Jt(ae))return He(oe,J,ae,Ne);if(ze(ae))return We(oe,J,ae,Ne);Zu(oe,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,J!==null&&J.tag===6?(g(oe,J.sibling),J=C(J,ae),J.return=oe,oe=J):(g(oe,J),J=ld(ae,oe.mode,Ne),J.return=oe,oe=J),D(oe)):g(oe,J)}return kn}var $a=V0(!0),U0=V0(!1),$u=Ao(null),Ju=null,Ja=null,wf=null;function Ef(){wf=Ja=Ju=null}function _f(i){var l=$u.current;ln($u),i._currentValue=l}function xf(i,l,g){for(;i!==null;){var w=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,w!==null&&(w.childLanes|=l)):w!==null&&(w.childLanes&l)!==l&&(w.childLanes|=l),i===g)break;i=i.return}}function el(i,l){Ju=i,wf=Ja=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Jr=!0),i.firstContext=null)}function bi(i){var l=i._currentValue;if(wf!==i)if(i={context:i,memoizedValue:l,next:null},Ja===null){if(Ju===null)throw Error(t(308));Ja=i,Ju.dependencies={lanes:0,firstContext:i}}else Ja=Ja.next=i;return l}var fa=null;function Af(i){fa===null?fa=[i]:fa.push(i)}function z0(i,l,g,w){var C=l.interleaved;return C===null?(g.next=g,Af(l)):(g.next=C.next,C.next=g),l.interleaved=g,Ks(i,w)}function Ks(i,l){i.lanes|=l;var g=i.alternate;for(g!==null&&(g.lanes|=l),g=i,i=i.return;i!==null;)i.childLanes|=l,g=i.alternate,g!==null&&(g.childLanes|=l),g=i,i=i.return;return g.tag===3?g.stateNode:null}var vo=!1;function If(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j0(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ys(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function To(i,l,g){var w=i.updateQueue;if(w===null)return null;if(w=w.shared,(Vt&2)!==0){var C=w.pending;return C===null?l.next=l:(l.next=C.next,C.next=l),w.pending=l,Ks(i,g)}return C=w.interleaved,C===null?(l.next=l,Af(w)):(l.next=C.next,C.next=l),w.interleaved=l,Ks(i,g)}function ec(i,l,g){if(l=l.updateQueue,l!==null&&(l=l.shared,(g&4194240)!==0)){var w=l.lanes;w&=i.pendingLanes,g|=w,l.lanes=g,fn(i,g)}}function H0(i,l){var g=i.updateQueue,w=i.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var C=null,T=null;if(g=g.firstBaseUpdate,g!==null){do{var D={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};T===null?C=T=D:T=T.next=D,g=g.next}while(g!==null);T===null?C=T=l:T=T.next=l}else C=T=l;g={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:w.shared,effects:w.effects},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=l:i.next=l,g.lastBaseUpdate=l}function tc(i,l,g,w){var C=i.updateQueue;vo=!1;var T=C.firstBaseUpdate,D=C.lastBaseUpdate,H=C.shared.pending;if(H!==null){C.shared.pending=null;var Q=H,he=Q.next;Q.next=null,D===null?T=he:D.next=he,D=Q;var Ae=i.alternate;Ae!==null&&(Ae=Ae.updateQueue,H=Ae.lastBaseUpdate,H!==D&&(H===null?Ae.firstBaseUpdate=he:H.next=he,Ae.lastBaseUpdate=Q))}if(T!==null){var Ce=C.baseState;D=0,Ae=he=Q=null,H=T;do{var Ee=H.lane,Fe=H.eventTime;if((w&Ee)===Ee){Ae!==null&&(Ae=Ae.next={eventTime:Fe,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var He=i,We=H;switch(Ee=l,Fe=g,We.tag){case 1:if(He=We.payload,typeof He=="function"){Ce=He.call(Fe,Ce,Ee);break e}Ce=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=We.payload,Ee=typeof He=="function"?He.call(Fe,Ce,Ee):He,Ee==null)break e;Ce=ke({},Ce,Ee);break e;case 2:vo=!0}}H.callback!==null&&H.lane!==0&&(i.flags|=64,Ee=C.effects,Ee===null?C.effects=[H]:Ee.push(H))}else Fe={eventTime:Fe,lane:Ee,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Ae===null?(he=Ae=Fe,Q=Ce):Ae=Ae.next=Fe,D|=Ee;if(H=H.next,H===null){if(H=C.shared.pending,H===null)break;Ee=H,H=Ee.next,Ee.next=null,C.lastBaseUpdate=Ee,C.shared.pending=null}}while(!0);if(Ae===null&&(Q=Ce),C.baseState=Q,C.firstBaseUpdate=he,C.lastBaseUpdate=Ae,l=C.shared.interleaved,l!==null){C=l;do D|=C.lane,C=C.next;while(C!==l)}else T===null&&(C.shared.lanes=0);pa|=D,i.lanes=D,i.memoizedState=Ce}}function W0(i,l,g){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var w=i[l],C=w.callback;if(C!==null){if(w.callback=null,w=g,typeof C!="function")throw Error(t(191,C));C.call(w)}}}var Vl={},ys=Ao(Vl),Ul=Ao(Vl),zl=Ao(Vl);function da(i){if(i===Vl)throw Error(t(174));return i}function Cf(i,l){switch(tn(zl,l),tn(Ul,i),tn(ys,Vl),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ps(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=Ps(l,i)}ln(ys),tn(ys,l)}function tl(){ln(ys),ln(Ul),ln(zl)}function G0(i){da(zl.current);var l=da(ys.current),g=Ps(l,i.type);l!==g&&(tn(Ul,i),tn(ys,g))}function vf(i){Ul.current===i&&(ln(ys),ln(Ul))}var En=Ao(0);function nc(i){for(var l=i;l!==null;){if(l.tag===13){var g=l.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Tf=[];function Sf(){for(var i=0;i<Tf.length;i++)Tf[i]._workInProgressVersionPrimary=null;Tf.length=0}var rc=we.ReactCurrentDispatcher,Rf=we.ReactCurrentBatchConfig,ga=0,_n=null,Kn=null,ir=null,ic=!1,jl=!1,Hl=0,r_=0;function Rr(){throw Error(t(321))}function Nf(i,l){if(l===null)return!1;for(var g=0;g<l.length&&g<i.length;g++)if(!ne(i[g],l[g]))return!1;return!0}function bf(i,l,g,w,C,T){if(ga=T,_n=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,rc.current=i===null||i.memoizedState===null?a_:l_,i=g(w,C),jl){T=0;do{if(jl=!1,Hl=0,25<=T)throw Error(t(301));T+=1,ir=Kn=null,l.updateQueue=null,rc.current=u_,i=g(w,C)}while(jl)}if(rc.current=ac,l=Kn!==null&&Kn.next!==null,ga=0,ir=Kn=_n=null,ic=!1,l)throw Error(t(300));return i}function Of(){var i=Hl!==0;return Hl=0,i}function ws(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?_n.memoizedState=ir=i:ir=ir.next=i,ir}function Oi(){if(Kn===null){var i=_n.alternate;i=i!==null?i.memoizedState:null}else i=Kn.next;var l=ir===null?_n.memoizedState:ir.next;if(l!==null)ir=l,Kn=i;else{if(i===null)throw Error(t(310));Kn=i,i={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},ir===null?_n.memoizedState=ir=i:ir=ir.next=i}return ir}function Wl(i,l){return typeof l=="function"?l(i):l}function Pf(i){var l=Oi(),g=l.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=i;var w=Kn,C=w.baseQueue,T=g.pending;if(T!==null){if(C!==null){var D=C.next;C.next=T.next,T.next=D}w.baseQueue=C=T,g.pending=null}if(C!==null){T=C.next,w=w.baseState;var H=D=null,Q=null,he=T;do{var Ae=he.lane;if((ga&Ae)===Ae)Q!==null&&(Q=Q.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),w=he.hasEagerState?he.eagerState:i(w,he.action);else{var Ce={lane:Ae,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};Q===null?(H=Q=Ce,D=w):Q=Q.next=Ce,_n.lanes|=Ae,pa|=Ae}he=he.next}while(he!==null&&he!==T);Q===null?D=w:Q.next=H,ne(w,l.memoizedState)||(Jr=!0),l.memoizedState=w,l.baseState=D,l.baseQueue=Q,g.lastRenderedState=w}if(i=g.interleaved,i!==null){C=i;do T=C.lane,_n.lanes|=T,pa|=T,C=C.next;while(C!==i)}else C===null&&(g.lanes=0);return[l.memoizedState,g.dispatch]}function Df(i){var l=Oi(),g=l.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=i;var w=g.dispatch,C=g.pending,T=l.memoizedState;if(C!==null){g.pending=null;var D=C=C.next;do T=i(T,D.action),D=D.next;while(D!==C);ne(T,l.memoizedState)||(Jr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),g.lastRenderedState=T}return[T,w]}function X0(){}function q0(i,l){var g=_n,w=Oi(),C=l(),T=!ne(w.memoizedState,C);if(T&&(w.memoizedState=C,Jr=!0),w=w.queue,kf(Q0.bind(null,g,w,i),[i]),w.getSnapshot!==l||T||ir!==null&&ir.memoizedState.tag&1){if(g.flags|=2048,Gl(9,Y0.bind(null,g,w,C,l),void 0,null),sr===null)throw Error(t(349));(ga&30)!==0||K0(g,l,C)}return C}function K0(i,l,g){i.flags|=16384,i={getSnapshot:l,value:g},l=_n.updateQueue,l===null?(l={lastEffect:null,stores:null},_n.updateQueue=l,l.stores=[i]):(g=l.stores,g===null?l.stores=[i]:g.push(i))}function Y0(i,l,g,w){l.value=g,l.getSnapshot=w,Z0(l)&&$0(i)}function Q0(i,l,g){return g(function(){Z0(l)&&$0(i)})}function Z0(i){var l=i.getSnapshot;i=i.value;try{var g=l();return!ne(i,g)}catch{return!0}}function $0(i){var l=Ks(i,1);l!==null&&Zi(l,i,1,-1)}function J0(i){var l=ws();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:i},l.queue=i,i=i.dispatch=o_.bind(null,_n,i),[l.memoizedState,i]}function Gl(i,l,g,w){return i={tag:i,create:l,destroy:g,deps:w,next:null},l=_n.updateQueue,l===null?(l={lastEffect:null,stores:null},_n.updateQueue=l,l.lastEffect=i.next=i):(g=l.lastEffect,g===null?l.lastEffect=i.next=i:(w=g.next,g.next=i,i.next=w,l.lastEffect=i)),i}function eg(){return Oi().memoizedState}function sc(i,l,g,w){var C=ws();_n.flags|=i,C.memoizedState=Gl(1|l,g,void 0,w===void 0?null:w)}function oc(i,l,g,w){var C=Oi();w=w===void 0?null:w;var T=void 0;if(Kn!==null){var D=Kn.memoizedState;if(T=D.destroy,w!==null&&Nf(w,D.deps)){C.memoizedState=Gl(l,g,T,w);return}}_n.flags|=i,C.memoizedState=Gl(1|l,g,T,w)}function tg(i,l){return sc(8390656,8,i,l)}function kf(i,l){return oc(2048,8,i,l)}function ng(i,l){return oc(4,2,i,l)}function rg(i,l){return oc(4,4,i,l)}function ig(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function sg(i,l,g){return g=g!=null?g.concat([i]):null,oc(4,4,ig.bind(null,l,i),g)}function Mf(){}function og(i,l){var g=Oi();l=l===void 0?null:l;var w=g.memoizedState;return w!==null&&l!==null&&Nf(l,w[1])?w[0]:(g.memoizedState=[i,l],i)}function ag(i,l){var g=Oi();l=l===void 0?null:l;var w=g.memoizedState;return w!==null&&l!==null&&Nf(l,w[1])?w[0]:(i=i(),g.memoizedState=[i,l],i)}function lg(i,l,g){return(ga&21)===0?(i.baseState&&(i.baseState=!1,Jr=!0),i.memoizedState=g):(ne(g,l)||(g=Cn(),_n.lanes|=g,pa|=g,i.baseState=!0),l)}function i_(i,l){var g=lt;lt=g!==0&&4>g?g:4,i(!0);var w=Rf.transition;Rf.transition={};try{i(!1),l()}finally{lt=g,Rf.transition=w}}function ug(){return Oi().memoizedState}function s_(i,l,g){var w=bo(i);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},cg(i))hg(l,g);else if(g=z0(i,l,g,w),g!==null){var C=Hr();Zi(g,i,w,C),fg(g,l,w)}}function o_(i,l,g){var w=bo(i),C={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(cg(i))hg(l,C);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var D=l.lastRenderedState,H=T(D,g);if(C.hasEagerState=!0,C.eagerState=H,ne(H,D)){var Q=l.interleaved;Q===null?(C.next=C,Af(l)):(C.next=Q.next,Q.next=C),l.interleaved=C;return}}catch{}finally{}g=z0(i,l,C,w),g!==null&&(C=Hr(),Zi(g,i,w,C),fg(g,l,w))}}function cg(i){var l=i.alternate;return i===_n||l!==null&&l===_n}function hg(i,l){jl=ic=!0;var g=i.pending;g===null?l.next=l:(l.next=g.next,g.next=l),i.pending=l}function fg(i,l,g){if((g&4194240)!==0){var w=l.lanes;w&=i.pendingLanes,g|=w,l.lanes=g,fn(i,g)}}var ac={readContext:bi,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},a_={readContext:bi,useCallback:function(i,l){return ws().memoizedState=[i,l===void 0?null:l],i},useContext:bi,useEffect:tg,useImperativeHandle:function(i,l,g){return g=g!=null?g.concat([i]):null,sc(4194308,4,ig.bind(null,l,i),g)},useLayoutEffect:function(i,l){return sc(4194308,4,i,l)},useInsertionEffect:function(i,l){return sc(4,2,i,l)},useMemo:function(i,l){var g=ws();return l=l===void 0?null:l,i=i(),g.memoizedState=[i,l],i},useReducer:function(i,l,g){var w=ws();return l=g!==void 0?g(l):l,w.memoizedState=w.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},w.queue=i,i=i.dispatch=s_.bind(null,_n,i),[w.memoizedState,i]},useRef:function(i){var l=ws();return i={current:i},l.memoizedState=i},useState:J0,useDebugValue:Mf,useDeferredValue:function(i){return ws().memoizedState=i},useTransition:function(){var i=J0(!1),l=i[0];return i=i_.bind(null,i[1]),ws().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,g){var w=_n,C=ws();if(mn){if(g===void 0)throw Error(t(407));g=g()}else{if(g=l(),sr===null)throw Error(t(349));(ga&30)!==0||K0(w,l,g)}C.memoizedState=g;var T={value:g,getSnapshot:l};return C.queue=T,tg(Q0.bind(null,w,T,i),[i]),w.flags|=2048,Gl(9,Y0.bind(null,w,T,g,l),void 0,null),g},useId:function(){var i=ws(),l=sr.identifierPrefix;if(mn){var g=qs,w=Xs;g=(w&~(1<<32-fr(w)-1)).toString(32)+g,l=":"+l+"R"+g,g=Hl++,0<g&&(l+="H"+g.toString(32)),l+=":"}else g=r_++,l=":"+l+"r"+g.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},l_={readContext:bi,useCallback:og,useContext:bi,useEffect:kf,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:rg,useMemo:ag,useReducer:Pf,useRef:eg,useState:function(){return Pf(Wl)},useDebugValue:Mf,useDeferredValue:function(i){var l=Oi();return lg(l,Kn.memoizedState,i)},useTransition:function(){var i=Pf(Wl)[0],l=Oi().memoizedState;return[i,l]},useMutableSource:X0,useSyncExternalStore:q0,useId:ug,unstable_isNewReconciler:!1},u_={readContext:bi,useCallback:og,useContext:bi,useEffect:kf,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:rg,useMemo:ag,useReducer:Df,useRef:eg,useState:function(){return Df(Wl)},useDebugValue:Mf,useDeferredValue:function(i){var l=Oi();return Kn===null?l.memoizedState=i:lg(l,Kn.memoizedState,i)},useTransition:function(){var i=Df(Wl)[0],l=Oi().memoizedState;return[i,l]},useMutableSource:X0,useSyncExternalStore:q0,useId:ug,unstable_isNewReconciler:!1};function Ki(i,l){if(i&&i.defaultProps){l=ke({},l),i=i.defaultProps;for(var g in i)l[g]===void 0&&(l[g]=i[g]);return l}return l}function Lf(i,l,g,w){l=i.memoizedState,g=g(w,l),g=g==null?l:ke({},l,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var lc={isMounted:function(i){return(i=i._reactInternals)?tr(i)===i:!1},enqueueSetState:function(i,l,g){i=i._reactInternals;var w=Hr(),C=bo(i),T=Ys(w,C);T.payload=l,g!=null&&(T.callback=g),l=To(i,T,C),l!==null&&(Zi(l,i,C,w),ec(l,i,C))},enqueueReplaceState:function(i,l,g){i=i._reactInternals;var w=Hr(),C=bo(i),T=Ys(w,C);T.tag=1,T.payload=l,g!=null&&(T.callback=g),l=To(i,T,C),l!==null&&(Zi(l,i,C,w),ec(l,i,C))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var g=Hr(),w=bo(i),C=Ys(g,w);C.tag=2,l!=null&&(C.callback=l),l=To(i,C,w),l!==null&&(Zi(l,i,w,g),ec(l,i,w))}};function dg(i,l,g,w,C,T,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(w,T,D):l.prototype&&l.prototype.isPureReactComponent?!ce(g,w)||!ce(C,T):!0}function gg(i,l,g){var w=!1,C=Io,T=l.contextType;return typeof T=="object"&&T!==null?T=bi(T):(C=$r(l)?ua:Sr.current,w=l.contextTypes,T=(w=w!=null)?Ka(i,C):Io),l=new l(g,T),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=lc,i.stateNode=l,l._reactInternals=i,w&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=C,i.__reactInternalMemoizedMaskedChildContext=T),l}function pg(i,l,g,w){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(g,w),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(g,w),l.state!==i&&lc.enqueueReplaceState(l,l.state,null)}function Bf(i,l,g,w){var C=i.stateNode;C.props=g,C.state=i.memoizedState,C.refs={},If(i);var T=l.contextType;typeof T=="object"&&T!==null?C.context=bi(T):(T=$r(l)?ua:Sr.current,C.context=Ka(i,T)),C.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Lf(i,l,T,g),C.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(l=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),l!==C.state&&lc.enqueueReplaceState(C,C.state,null),tc(i,g,C,w),C.state=i.memoizedState),typeof C.componentDidMount=="function"&&(i.flags|=4194308)}function nl(i,l){try{var g="",w=l;do g+=wt(w),w=w.return;while(w);var C=g}catch(T){C=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:l,stack:C,digest:null}}function Ff(i,l,g){return{value:i,source:null,stack:g??null,digest:l??null}}function Vf(i,l){try{console.error(l.value)}catch(g){setTimeout(function(){throw g})}}var c_=typeof WeakMap=="function"?WeakMap:Map;function mg(i,l,g){g=Ys(-1,g),g.tag=3,g.payload={element:null};var w=l.value;return g.callback=function(){pc||(pc=!0,ed=w),Vf(i,l)},g}function yg(i,l,g){g=Ys(-1,g),g.tag=3;var w=i.type.getDerivedStateFromError;if(typeof w=="function"){var C=l.value;g.payload=function(){return w(C)},g.callback=function(){Vf(i,l)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(g.callback=function(){Vf(i,l),typeof w!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var D=l.stack;this.componentDidCatch(l.value,{componentStack:D!==null?D:""})}),g}function wg(i,l,g){var w=i.pingCache;if(w===null){w=i.pingCache=new c_;var C=new Set;w.set(l,C)}else C=w.get(l),C===void 0&&(C=new Set,w.set(l,C));C.has(g)||(C.add(g),i=C_.bind(null,i,l,g),l.then(i,i))}function Eg(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function _g(i,l,g,w,C){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(l=Ys(-1,1),l.tag=2,To(g,l,1))),g.lanes|=1),i):(i.flags|=65536,i.lanes=C,i)}var h_=we.ReactCurrentOwner,Jr=!1;function jr(i,l,g,w){l.child=i===null?U0(l,null,g,w):$a(l,i.child,g,w)}function xg(i,l,g,w,C){g=g.render;var T=l.ref;return el(l,C),w=bf(i,l,g,w,T,C),g=Of(),i!==null&&!Jr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~C,Qs(i,l,C)):(mn&&g&&df(l),l.flags|=1,jr(i,l,w,C),l.child)}function Ag(i,l,g,w,C){if(i===null){var T=g.type;return typeof T=="function"&&!ad(T)&&T.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(l.tag=15,l.type=T,Ig(i,l,T,w,C)):(i=xc(g.type,null,w,l,l.mode,C),i.ref=l.ref,i.return=l,l.child=i)}if(T=i.child,(i.lanes&C)===0){var D=T.memoizedProps;if(g=g.compare,g=g!==null?g:ce,g(D,w)&&i.ref===l.ref)return Qs(i,l,C)}return l.flags|=1,i=Po(T,w),i.ref=l.ref,i.return=l,l.child=i}function Ig(i,l,g,w,C){if(i!==null){var T=i.memoizedProps;if(ce(T,w)&&i.ref===l.ref)if(Jr=!1,l.pendingProps=w=T,(i.lanes&C)!==0)(i.flags&131072)!==0&&(Jr=!0);else return l.lanes=i.lanes,Qs(i,l,C)}return Uf(i,l,g,w,C)}function Cg(i,l,g){var w=l.pendingProps,C=w.children,T=i!==null?i.memoizedState:null;if(w.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},tn(il,pi),pi|=g;else{if((g&1073741824)===0)return i=T!==null?T.baseLanes|g:g,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,tn(il,pi),pi|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=T!==null?T.baseLanes:g,tn(il,pi),pi|=w}else T!==null?(w=T.baseLanes|g,l.memoizedState=null):w=g,tn(il,pi),pi|=w;return jr(i,l,C,g),l.child}function vg(i,l){var g=l.ref;(i===null&&g!==null||i!==null&&i.ref!==g)&&(l.flags|=512,l.flags|=2097152)}function Uf(i,l,g,w,C){var T=$r(g)?ua:Sr.current;return T=Ka(l,T),el(l,C),g=bf(i,l,g,w,T,C),w=Of(),i!==null&&!Jr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~C,Qs(i,l,C)):(mn&&w&&df(l),l.flags|=1,jr(i,l,g,C),l.child)}function Tg(i,l,g,w,C){if($r(g)){var T=!0;Xu(l)}else T=!1;if(el(l,C),l.stateNode===null)cc(i,l),gg(l,g,w),Bf(l,g,w,C),w=!0;else if(i===null){var D=l.stateNode,H=l.memoizedProps;D.props=H;var Q=D.context,he=g.contextType;typeof he=="object"&&he!==null?he=bi(he):(he=$r(g)?ua:Sr.current,he=Ka(l,he));var Ae=g.getDerivedStateFromProps,Ce=typeof Ae=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ce||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==w||Q!==he)&&pg(l,D,w,he),vo=!1;var Ee=l.memoizedState;D.state=Ee,tc(l,w,D,C),Q=l.memoizedState,H!==w||Ee!==Q||Zr.current||vo?(typeof Ae=="function"&&(Lf(l,g,Ae,w),Q=l.memoizedState),(H=vo||dg(l,g,H,w,Ee,Q,he))?(Ce||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=w,l.memoizedState=Q),D.props=w,D.state=Q,D.context=he,w=H):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),w=!1)}else{D=l.stateNode,j0(i,l),H=l.memoizedProps,he=l.type===l.elementType?H:Ki(l.type,H),D.props=he,Ce=l.pendingProps,Ee=D.context,Q=g.contextType,typeof Q=="object"&&Q!==null?Q=bi(Q):(Q=$r(g)?ua:Sr.current,Q=Ka(l,Q));var Fe=g.getDerivedStateFromProps;(Ae=typeof Fe=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==Ce||Ee!==Q)&&pg(l,D,w,Q),vo=!1,Ee=l.memoizedState,D.state=Ee,tc(l,w,D,C);var He=l.memoizedState;H!==Ce||Ee!==He||Zr.current||vo?(typeof Fe=="function"&&(Lf(l,g,Fe,w),He=l.memoizedState),(he=vo||dg(l,g,he,w,Ee,He,Q)||!1)?(Ae||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,He,Q),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,He,Q)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||H===i.memoizedProps&&Ee===i.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===i.memoizedProps&&Ee===i.memoizedState||(l.flags|=1024),l.memoizedProps=w,l.memoizedState=He),D.props=w,D.state=He,D.context=Q,w=he):(typeof D.componentDidUpdate!="function"||H===i.memoizedProps&&Ee===i.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===i.memoizedProps&&Ee===i.memoizedState||(l.flags|=1024),w=!1)}return zf(i,l,g,w,T,C)}function zf(i,l,g,w,C,T){vg(i,l);var D=(l.flags&128)!==0;if(!w&&!D)return C&&O0(l,g,!1),Qs(i,l,T);w=l.stateNode,h_.current=l;var H=D&&typeof g.getDerivedStateFromError!="function"?null:w.render();return l.flags|=1,i!==null&&D?(l.child=$a(l,i.child,null,T),l.child=$a(l,null,H,T)):jr(i,l,H,T),l.memoizedState=w.state,C&&O0(l,g,!0),l.child}function Sg(i){var l=i.stateNode;l.pendingContext?N0(i,l.pendingContext,l.pendingContext!==l.context):l.context&&N0(i,l.context,!1),Cf(i,l.containerInfo)}function Rg(i,l,g,w,C){return Za(),yf(C),l.flags|=256,jr(i,l,g,w),l.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function Hf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ng(i,l,g){var w=l.pendingProps,C=En.current,T=!1,D=(l.flags&128)!==0,H;if((H=D)||(H=i!==null&&i.memoizedState===null?!1:(C&2)!==0),H?(T=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(C|=1),tn(En,C&1),i===null)return mf(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(D=w.children,i=w.fallback,T?(w=l.mode,T=l.child,D={mode:"hidden",children:D},(w&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=D):T=Ac(D,w,0,null),i=Ea(i,w,g,null),T.return=l,i.return=l,T.sibling=i,l.child=T,l.child.memoizedState=Hf(g),l.memoizedState=jf,i):Wf(l,D));if(C=i.memoizedState,C!==null&&(H=C.dehydrated,H!==null))return f_(i,l,D,w,H,C,g);if(T){T=w.fallback,D=l.mode,C=i.child,H=C.sibling;var Q={mode:"hidden",children:w.children};return(D&1)===0&&l.child!==C?(w=l.child,w.childLanes=0,w.pendingProps=Q,l.deletions=null):(w=Po(C,Q),w.subtreeFlags=C.subtreeFlags&14680064),H!==null?T=Po(H,T):(T=Ea(T,D,g,null),T.flags|=2),T.return=l,w.return=l,w.sibling=T,l.child=w,w=T,T=l.child,D=i.child.memoizedState,D=D===null?Hf(g):{baseLanes:D.baseLanes|g,cachePool:null,transitions:D.transitions},T.memoizedState=D,T.childLanes=i.childLanes&~g,l.memoizedState=jf,w}return T=i.child,i=T.sibling,w=Po(T,{mode:"visible",children:w.children}),(l.mode&1)===0&&(w.lanes=g),w.return=l,w.sibling=null,i!==null&&(g=l.deletions,g===null?(l.deletions=[i],l.flags|=16):g.push(i)),l.child=w,l.memoizedState=null,w}function Wf(i,l){return l=Ac({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function uc(i,l,g,w){return w!==null&&yf(w),$a(l,i.child,null,g),i=Wf(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function f_(i,l,g,w,C,T,D){if(g)return l.flags&256?(l.flags&=-257,w=Ff(Error(t(422))),uc(i,l,D,w)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(T=w.fallback,C=l.mode,w=Ac({mode:"visible",children:w.children},C,0,null),T=Ea(T,C,D,null),T.flags|=2,w.return=l,T.return=l,w.sibling=T,l.child=w,(l.mode&1)!==0&&$a(l,i.child,null,D),l.child.memoizedState=Hf(D),l.memoizedState=jf,T);if((l.mode&1)===0)return uc(i,l,D,null);if(C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var H=w.dgst;return w=H,T=Error(t(419)),w=Ff(T,w,void 0),uc(i,l,D,w)}if(H=(D&i.childLanes)!==0,Jr||H){if(w=sr,w!==null){switch(D&-D){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(w.suspendedLanes|D))!==0?0:C,C!==0&&C!==T.retryLane&&(T.retryLane=C,Ks(i,C),Zi(w,i,C,-1))}return od(),w=Ff(Error(t(421))),uc(i,l,D,w)}return C.data==="$?"?(l.flags|=128,l.child=i.child,l=v_.bind(null,i),C._reactRetry=l,null):(i=T.treeContext,gi=xo(C.nextSibling),di=l,mn=!0,qi=null,i!==null&&(Ri[Ni++]=Xs,Ri[Ni++]=qs,Ri[Ni++]=ca,Xs=i.id,qs=i.overflow,ca=l),l=Wf(l,w.children),l.flags|=4096,l)}function bg(i,l,g){i.lanes|=l;var w=i.alternate;w!==null&&(w.lanes|=l),xf(i.return,l,g)}function Gf(i,l,g,w,C){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:C}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=w,T.tail=g,T.tailMode=C)}function Og(i,l,g){var w=l.pendingProps,C=w.revealOrder,T=w.tail;if(jr(i,l,w.children,g),w=En.current,(w&2)!==0)w=w&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&bg(i,g,l);else if(i.tag===19)bg(i,g,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}w&=1}if(tn(En,w),(l.mode&1)===0)l.memoizedState=null;else switch(C){case"forwards":for(g=l.child,C=null;g!==null;)i=g.alternate,i!==null&&nc(i)===null&&(C=g),g=g.sibling;g=C,g===null?(C=l.child,l.child=null):(C=g.sibling,g.sibling=null),Gf(l,!1,C,g,T);break;case"backwards":for(g=null,C=l.child,l.child=null;C!==null;){if(i=C.alternate,i!==null&&nc(i)===null){l.child=C;break}i=C.sibling,C.sibling=g,g=C,C=i}Gf(l,!0,g,null,T);break;case"together":Gf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function cc(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function Qs(i,l,g){if(i!==null&&(l.dependencies=i.dependencies),pa|=l.lanes,(g&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(t(153));if(l.child!==null){for(i=l.child,g=Po(i,i.pendingProps),l.child=g,g.return=l;i.sibling!==null;)i=i.sibling,g=g.sibling=Po(i,i.pendingProps),g.return=l;g.sibling=null}return l.child}function d_(i,l,g){switch(l.tag){case 3:Sg(l),Za();break;case 5:G0(l);break;case 1:$r(l.type)&&Xu(l);break;case 4:Cf(l,l.stateNode.containerInfo);break;case 10:var w=l.type._context,C=l.memoizedProps.value;tn($u,w._currentValue),w._currentValue=C;break;case 13:if(w=l.memoizedState,w!==null)return w.dehydrated!==null?(tn(En,En.current&1),l.flags|=128,null):(g&l.child.childLanes)!==0?Ng(i,l,g):(tn(En,En.current&1),i=Qs(i,l,g),i!==null?i.sibling:null);tn(En,En.current&1);break;case 19:if(w=(g&l.childLanes)!==0,(i.flags&128)!==0){if(w)return Og(i,l,g);l.flags|=128}if(C=l.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),tn(En,En.current),w)break;return null;case 22:case 23:return l.lanes=0,Cg(i,l,g)}return Qs(i,l,g)}var Pg,Xf,Dg,kg;Pg=function(i,l){for(var g=l.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Xf=function(){},Dg=function(i,l,g,w){var C=i.memoizedProps;if(C!==w){i=l.stateNode,da(ys.current);var T=null;switch(g){case"input":C=ai(i,C),w=ai(i,w),T=[];break;case"select":C=ke({},C,{value:void 0}),w=ke({},w,{value:void 0}),T=[];break;case"textarea":C=rs(i,C),w=rs(i,w),T=[];break;default:typeof C.onClick!="function"&&typeof w.onClick=="function"&&(i.onclick=Hu)}At(g,w);var D;g=null;for(he in C)if(!w.hasOwnProperty(he)&&C.hasOwnProperty(he)&&C[he]!=null)if(he==="style"){var H=C[he];for(D in H)H.hasOwnProperty(D)&&(g||(g={}),g[D]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(u.hasOwnProperty(he)?T||(T=[]):(T=T||[]).push(he,null));for(he in w){var Q=w[he];if(H=C?.[he],w.hasOwnProperty(he)&&Q!==H&&(Q!=null||H!=null))if(he==="style")if(H){for(D in H)!H.hasOwnProperty(D)||Q&&Q.hasOwnProperty(D)||(g||(g={}),g[D]="");for(D in Q)Q.hasOwnProperty(D)&&H[D]!==Q[D]&&(g||(g={}),g[D]=Q[D])}else g||(T||(T=[]),T.push(he,g)),g=Q;else he==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,H=H?H.__html:void 0,Q!=null&&H!==Q&&(T=T||[]).push(he,Q)):he==="children"?typeof Q!="string"&&typeof Q!="number"||(T=T||[]).push(he,""+Q):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(u.hasOwnProperty(he)?(Q!=null&&he==="onScroll"&&an("scroll",i),T||H===Q||(T=[])):(T=T||[]).push(he,Q))}g&&(T=T||[]).push("style",g);var he=T;(l.updateQueue=he)&&(l.flags|=4)}},kg=function(i,l,g,w){g!==w&&(l.flags|=4)};function Xl(i,l){if(!mn)switch(i.tailMode){case"hidden":l=i.tail;for(var g=null;l!==null;)l.alternate!==null&&(g=l),l=l.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:w.sibling=null}}function Nr(i){var l=i.alternate!==null&&i.alternate.child===i.child,g=0,w=0;if(l)for(var C=i.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=w,i.childLanes=g,l}function g_(i,l,g){var w=l.pendingProps;switch(gf(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(l),null;case 1:return $r(l.type)&&Gu(),Nr(l),null;case 3:return w=l.stateNode,tl(),ln(Zr),ln(Sr),Sf(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(i===null||i.child===null)&&(Qu(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,qi!==null&&(rd(qi),qi=null))),Xf(i,l),Nr(l),null;case 5:vf(l);var C=da(zl.current);if(g=l.type,i!==null&&l.stateNode!=null)Dg(i,l,g,w,C),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!w){if(l.stateNode===null)throw Error(t(166));return Nr(l),null}if(i=da(ys.current),Qu(l)){w=l.stateNode,g=l.type;var T=l.memoizedProps;switch(w[ms]=l,w[Ll]=T,i=(l.mode&1)!==0,g){case"dialog":an("cancel",w),an("close",w);break;case"iframe":case"object":case"embed":an("load",w);break;case"video":case"audio":for(C=0;C<Dl.length;C++)an(Dl[C],w);break;case"source":an("error",w);break;case"img":case"image":case"link":an("error",w),an("load",w);break;case"details":an("toggle",w);break;case"input":Mr(w,T),an("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!T.multiple},an("invalid",w);break;case"textarea":oo(w,T),an("invalid",w)}At(g,T),C=null;for(var D in T)if(T.hasOwnProperty(D)){var H=T[D];D==="children"?typeof H=="string"?w.textContent!==H&&(T.suppressHydrationWarning!==!0&&ju(w.textContent,H,i),C=["children",H]):typeof H=="number"&&w.textContent!==""+H&&(T.suppressHydrationWarning!==!0&&ju(w.textContent,H,i),C=["children",""+H]):u.hasOwnProperty(D)&&H!=null&&D==="onScroll"&&an("scroll",w)}switch(g){case"input":On(w),Ut(w,T,!0);break;case"textarea":On(w),_i(w);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(w.onclick=Hu)}w=C,l.updateQueue=w,w!==null&&(l.flags|=4)}else{D=C.nodeType===9?C:C.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ur(g)),i==="http://www.w3.org/1999/xhtml"?g==="script"?(i=D.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof w.is=="string"?i=D.createElement(g,{is:w.is}):(i=D.createElement(g),g==="select"&&(D=i,w.multiple?D.multiple=!0:w.size&&(D.size=w.size))):i=D.createElementNS(i,g),i[ms]=l,i[Ll]=w,Pg(i,l,!1,!1),l.stateNode=i;e:{switch(D=Qt(g,w),g){case"dialog":an("cancel",i),an("close",i),C=w;break;case"iframe":case"object":case"embed":an("load",i),C=w;break;case"video":case"audio":for(C=0;C<Dl.length;C++)an(Dl[C],i);C=w;break;case"source":an("error",i),C=w;break;case"img":case"image":case"link":an("error",i),an("load",i),C=w;break;case"details":an("toggle",i),C=w;break;case"input":Mr(i,w),C=ai(i,w),an("invalid",i);break;case"option":C=w;break;case"select":i._wrapperState={wasMultiple:!!w.multiple},C=ke({},w,{value:void 0}),an("invalid",i);break;case"textarea":oo(i,w),C=rs(i,w),an("invalid",i);break;default:C=w}At(g,C),H=C;for(T in H)if(H.hasOwnProperty(T)){var Q=H[T];T==="style"?Oe(i,Q):T==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&Ln(i,Q)):T==="children"?typeof Q=="string"?(g!=="textarea"||Q!=="")&&is(i,Q):typeof Q=="number"&&is(i,""+Q):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(u.hasOwnProperty(T)?Q!=null&&T==="onScroll"&&an("scroll",i):Q!=null&&ie(i,T,Q,D))}switch(g){case"input":On(i),Ut(i,w,!1);break;case"textarea":On(i),_i(i);break;case"option":w.value!=null&&i.setAttribute("value",""+nt(w.value));break;case"select":i.multiple=!!w.multiple,T=w.value,T!=null?Me(i,!!w.multiple,T,!1):w.defaultValue!=null&&Me(i,!!w.multiple,w.defaultValue,!0);break;default:typeof C.onClick=="function"&&(i.onclick=Hu)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Nr(l),null;case 6:if(i&&l.stateNode!=null)kg(i,l,i.memoizedProps,w);else{if(typeof w!="string"&&l.stateNode===null)throw Error(t(166));if(g=da(zl.current),da(ys.current),Qu(l)){if(w=l.stateNode,g=l.memoizedProps,w[ms]=l,(T=w.nodeValue!==g)&&(i=di,i!==null))switch(i.tag){case 3:ju(w.nodeValue,g,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ju(w.nodeValue,g,(i.mode&1)!==0)}T&&(l.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[ms]=l,l.stateNode=w}return Nr(l),null;case 13:if(ln(En),w=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(mn&&gi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)B0(),Za(),l.flags|=98560,T=!1;else if(T=Qu(l),w!==null&&w.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[ms]=l}else Za(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Nr(l),T=!1}else qi!==null&&(rd(qi),qi=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=g,l):(w=w!==null,w!==(i!==null&&i.memoizedState!==null)&&w&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(En.current&1)!==0?Yn===0&&(Yn=3):od())),l.updateQueue!==null&&(l.flags|=4),Nr(l),null);case 4:return tl(),Xf(i,l),i===null&&kl(l.stateNode.containerInfo),Nr(l),null;case 10:return _f(l.type._context),Nr(l),null;case 17:return $r(l.type)&&Gu(),Nr(l),null;case 19:if(ln(En),T=l.memoizedState,T===null)return Nr(l),null;if(w=(l.flags&128)!==0,D=T.rendering,D===null)if(w)Xl(T,!1);else{if(Yn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(D=nc(i),D!==null){for(l.flags|=128,Xl(T,!1),w=D.updateQueue,w!==null&&(l.updateQueue=w,l.flags|=4),l.subtreeFlags=0,w=g,g=l.child;g!==null;)T=g,i=w,T.flags&=14680066,D=T.alternate,D===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=D.childLanes,T.lanes=D.lanes,T.child=D.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=D.memoizedProps,T.memoizedState=D.memoizedState,T.updateQueue=D.updateQueue,T.type=D.type,i=D.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),g=g.sibling;return tn(En,En.current&1|2),l.child}i=i.sibling}T.tail!==null&&Mt()>sl&&(l.flags|=128,w=!0,Xl(T,!1),l.lanes=4194304)}else{if(!w)if(i=nc(D),i!==null){if(l.flags|=128,w=!0,g=i.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),Xl(T,!0),T.tail===null&&T.tailMode==="hidden"&&!D.alternate&&!mn)return Nr(l),null}else 2*Mt()-T.renderingStartTime>sl&&g!==1073741824&&(l.flags|=128,w=!0,Xl(T,!1),l.lanes=4194304);T.isBackwards?(D.sibling=l.child,l.child=D):(g=T.last,g!==null?g.sibling=D:l.child=D,T.last=D)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=Mt(),l.sibling=null,g=En.current,tn(En,w?g&1|2:g&1),l):(Nr(l),null);case 22:case 23:return sd(),w=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==w&&(l.flags|=8192),w&&(l.mode&1)!==0?(pi&1073741824)!==0&&(Nr(l),l.subtreeFlags&6&&(l.flags|=8192)):Nr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function p_(i,l){switch(gf(l),l.tag){case 1:return $r(l.type)&&Gu(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return tl(),ln(Zr),ln(Sr),Sf(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return vf(l),null;case 13:if(ln(En),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Za()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return ln(En),null;case 4:return tl(),null;case 10:return _f(l.type._context),null;case 22:case 23:return sd(),null;case 24:return null;default:return null}}var hc=!1,br=!1,m_=typeof WeakSet=="function"?WeakSet:Set,je=null;function rl(i,l){var g=i.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){Sn(i,l,w)}else g.current=null}function qf(i,l,g){try{g()}catch(w){Sn(i,l,w)}}var Mg=!1;function y_(i,l){if(sf=Ur,i=It(),dt(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var C=w.anchorOffset,T=w.focusNode;w=w.focusOffset;try{g.nodeType,T.nodeType}catch{g=null;break e}var D=0,H=-1,Q=-1,he=0,Ae=0,Ce=i,Ee=null;t:for(;;){for(var Fe;Ce!==g||C!==0&&Ce.nodeType!==3||(H=D+C),Ce!==T||w!==0&&Ce.nodeType!==3||(Q=D+w),Ce.nodeType===3&&(D+=Ce.nodeValue.length),(Fe=Ce.firstChild)!==null;)Ee=Ce,Ce=Fe;for(;;){if(Ce===i)break t;if(Ee===g&&++he===C&&(H=D),Ee===T&&++Ae===w&&(Q=D),(Fe=Ce.nextSibling)!==null)break;Ce=Ee,Ee=Ce.parentNode}Ce=Fe}g=H===-1||Q===-1?null:{start:H,end:Q}}else g=null}g=g||{start:0,end:0}}else g=null;for(of={focusedElem:i,selectionRange:g},Ur=!1,je=l;je!==null;)if(l=je,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,je=i;else for(;je!==null;){l=je;try{var He=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var We=He.memoizedProps,kn=He.memoizedState,oe=l.stateNode,J=oe.getSnapshotBeforeUpdate(l.elementType===l.type?We:Ki(l.type,We),kn);oe.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var ae=l.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ne){Sn(l,l.return,Ne)}if(i=l.sibling,i!==null){i.return=l.return,je=i;break}je=l.return}return He=Mg,Mg=!1,He}function ql(i,l,g){var w=l.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&i)===i){var T=C.destroy;C.destroy=void 0,T!==void 0&&qf(l,g,T)}C=C.next}while(C!==w)}}function fc(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var g=l=l.next;do{if((g.tag&i)===i){var w=g.create;g.destroy=w()}g=g.next}while(g!==l)}}function Kf(i){var l=i.ref;if(l!==null){var g=i.stateNode;switch(i.tag){case 5:i=g;break;default:i=g}typeof l=="function"?l(i):l.current=i}}function Lg(i){var l=i.alternate;l!==null&&(i.alternate=null,Lg(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[ms],delete l[Ll],delete l[cf],delete l[JE],delete l[e_])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Bg(i){return i.tag===5||i.tag===3||i.tag===4}function Fg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Bg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yf(i,l,g){var w=i.tag;if(w===5||w===6)i=i.stateNode,l?g.nodeType===8?g.parentNode.insertBefore(i,l):g.insertBefore(i,l):(g.nodeType===8?(l=g.parentNode,l.insertBefore(i,g)):(l=g,l.appendChild(i)),g=g._reactRootContainer,g!=null||l.onclick!==null||(l.onclick=Hu));else if(w!==4&&(i=i.child,i!==null))for(Yf(i,l,g),i=i.sibling;i!==null;)Yf(i,l,g),i=i.sibling}function Qf(i,l,g){var w=i.tag;if(w===5||w===6)i=i.stateNode,l?g.insertBefore(i,l):g.appendChild(i);else if(w!==4&&(i=i.child,i!==null))for(Qf(i,l,g),i=i.sibling;i!==null;)Qf(i,l,g),i=i.sibling}var mr=null,Yi=!1;function So(i,l,g){for(g=g.child;g!==null;)Vg(i,l,g),g=g.sibling}function Vg(i,l,g){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(vt,g)}catch{}switch(g.tag){case 5:br||rl(g,l);case 6:var w=mr,C=Yi;mr=null,So(i,l,g),mr=w,Yi=C,mr!==null&&(Yi?(i=mr,g=g.stateNode,i.nodeType===8?i.parentNode.removeChild(g):i.removeChild(g)):mr.removeChild(g.stateNode));break;case 18:mr!==null&&(Yi?(i=mr,g=g.stateNode,i.nodeType===8?uf(i.parentNode,g):i.nodeType===1&&uf(i,g),Yr(i)):uf(mr,g.stateNode));break;case 4:w=mr,C=Yi,mr=g.stateNode.containerInfo,Yi=!0,So(i,l,g),mr=w,Yi=C;break;case 0:case 11:case 14:case 15:if(!br&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){C=w=w.next;do{var T=C,D=T.destroy;T=T.tag,D!==void 0&&((T&2)!==0||(T&4)!==0)&&qf(g,l,D),C=C.next}while(C!==w)}So(i,l,g);break;case 1:if(!br&&(rl(g,l),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(H){Sn(g,l,H)}So(i,l,g);break;case 21:So(i,l,g);break;case 22:g.mode&1?(br=(w=br)||g.memoizedState!==null,So(i,l,g),br=w):So(i,l,g);break;default:So(i,l,g)}}function Ug(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var g=i.stateNode;g===null&&(g=i.stateNode=new m_),l.forEach(function(w){var C=T_.bind(null,i,w);g.has(w)||(g.add(w),w.then(C,C))})}}function Qi(i,l){var g=l.deletions;if(g!==null)for(var w=0;w<g.length;w++){var C=g[w];try{var T=i,D=l,H=D;e:for(;H!==null;){switch(H.tag){case 5:mr=H.stateNode,Yi=!1;break e;case 3:mr=H.stateNode.containerInfo,Yi=!0;break e;case 4:mr=H.stateNode.containerInfo,Yi=!0;break e}H=H.return}if(mr===null)throw Error(t(160));Vg(T,D,C),mr=null,Yi=!1;var Q=C.alternate;Q!==null&&(Q.return=null),C.return=null}catch(he){Sn(C,l,he)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)zg(l,i),l=l.sibling}function zg(i,l){var g=i.alternate,w=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Qi(l,i),Es(i),w&4){try{ql(3,i,i.return),fc(3,i)}catch(We){Sn(i,i.return,We)}try{ql(5,i,i.return)}catch(We){Sn(i,i.return,We)}}break;case 1:Qi(l,i),Es(i),w&512&&g!==null&&rl(g,g.return);break;case 5:if(Qi(l,i),Es(i),w&512&&g!==null&&rl(g,g.return),i.flags&32){var C=i.stateNode;try{is(C,"")}catch(We){Sn(i,i.return,We)}}if(w&4&&(C=i.stateNode,C!=null)){var T=i.memoizedProps,D=g!==null?g.memoizedProps:T,H=i.type,Q=i.updateQueue;if(i.updateQueue=null,Q!==null)try{H==="input"&&T.type==="radio"&&T.name!=null&&Ei(C,T),Qt(H,D);var he=Qt(H,T);for(D=0;D<Q.length;D+=2){var Ae=Q[D],Ce=Q[D+1];Ae==="style"?Oe(C,Ce):Ae==="dangerouslySetInnerHTML"?Ln(C,Ce):Ae==="children"?is(C,Ce):ie(C,Ae,Ce,he)}switch(H){case"input":nn(C,T);break;case"textarea":Wr(C,T);break;case"select":var Ee=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!T.multiple;var Fe=T.value;Fe!=null?Me(C,!!T.multiple,Fe,!1):Ee!==!!T.multiple&&(T.defaultValue!=null?Me(C,!!T.multiple,T.defaultValue,!0):Me(C,!!T.multiple,T.multiple?[]:"",!1))}C[Ll]=T}catch(We){Sn(i,i.return,We)}}break;case 6:if(Qi(l,i),Es(i),w&4){if(i.stateNode===null)throw Error(t(162));C=i.stateNode,T=i.memoizedProps;try{C.nodeValue=T}catch(We){Sn(i,i.return,We)}}break;case 3:if(Qi(l,i),Es(i),w&4&&g!==null&&g.memoizedState.isDehydrated)try{Yr(l.containerInfo)}catch(We){Sn(i,i.return,We)}break;case 4:Qi(l,i),Es(i);break;case 13:Qi(l,i),Es(i),C=i.child,C.flags&8192&&(T=C.memoizedState!==null,C.stateNode.isHidden=T,!T||C.alternate!==null&&C.alternate.memoizedState!==null||(Jf=Mt())),w&4&&Ug(i);break;case 22:if(Ae=g!==null&&g.memoizedState!==null,i.mode&1?(br=(he=br)||Ae,Qi(l,i),br=he):Qi(l,i),Es(i),w&8192){if(he=i.memoizedState!==null,(i.stateNode.isHidden=he)&&!Ae&&(i.mode&1)!==0)for(je=i,Ae=i.child;Ae!==null;){for(Ce=je=Ae;je!==null;){switch(Ee=je,Fe=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:ql(4,Ee,Ee.return);break;case 1:rl(Ee,Ee.return);var He=Ee.stateNode;if(typeof He.componentWillUnmount=="function"){w=Ee,g=Ee.return;try{l=w,He.props=l.memoizedProps,He.state=l.memoizedState,He.componentWillUnmount()}catch(We){Sn(w,g,We)}}break;case 5:rl(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Wg(Ce);continue}}Fe!==null?(Fe.return=Ee,je=Fe):Wg(Ce)}Ae=Ae.sibling}e:for(Ae=null,Ce=i;;){if(Ce.tag===5){if(Ae===null){Ae=Ce;try{C=Ce.stateNode,he?(T=C.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(H=Ce.stateNode,Q=Ce.memoizedProps.style,D=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,H.style.display=Yt("display",D))}catch(We){Sn(i,i.return,We)}}}else if(Ce.tag===6){if(Ae===null)try{Ce.stateNode.nodeValue=he?"":Ce.memoizedProps}catch(We){Sn(i,i.return,We)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===i)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===i)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===i)break e;Ae===Ce&&(Ae=null),Ce=Ce.return}Ae===Ce&&(Ae=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:Qi(l,i),Es(i),w&4&&Ug(i);break;case 21:break;default:Qi(l,i),Es(i)}}function Es(i){var l=i.flags;if(l&2){try{e:{for(var g=i.return;g!==null;){if(Bg(g)){var w=g;break e}g=g.return}throw Error(t(160))}switch(w.tag){case 5:var C=w.stateNode;w.flags&32&&(is(C,""),w.flags&=-33);var T=Fg(i);Qf(i,T,C);break;case 3:case 4:var D=w.stateNode.containerInfo,H=Fg(i);Yf(i,H,D);break;default:throw Error(t(161))}}catch(Q){Sn(i,i.return,Q)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function w_(i,l,g){je=i,jg(i)}function jg(i,l,g){for(var w=(i.mode&1)!==0;je!==null;){var C=je,T=C.child;if(C.tag===22&&w){var D=C.memoizedState!==null||hc;if(!D){var H=C.alternate,Q=H!==null&&H.memoizedState!==null||br;H=hc;var he=br;if(hc=D,(br=Q)&&!he)for(je=C;je!==null;)D=je,Q=D.child,D.tag===22&&D.memoizedState!==null?Gg(C):Q!==null?(Q.return=D,je=Q):Gg(C);for(;T!==null;)je=T,jg(T),T=T.sibling;je=C,hc=H,br=he}Hg(i)}else(C.subtreeFlags&8772)!==0&&T!==null?(T.return=C,je=T):Hg(i)}}function Hg(i){for(;je!==null;){var l=je;if((l.flags&8772)!==0){var g=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:br||fc(5,l);break;case 1:var w=l.stateNode;if(l.flags&4&&!br)if(g===null)w.componentDidMount();else{var C=l.elementType===l.type?g.memoizedProps:Ki(l.type,g.memoizedProps);w.componentDidUpdate(C,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&W0(l,T,w);break;case 3:var D=l.updateQueue;if(D!==null){if(g=null,l.child!==null)switch(l.child.tag){case 5:g=l.child.stateNode;break;case 1:g=l.child.stateNode}W0(l,D,g)}break;case 5:var H=l.stateNode;if(g===null&&l.flags&4){g=H;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&g.focus();break;case"img":Q.src&&(g.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var he=l.alternate;if(he!==null){var Ae=he.memoizedState;if(Ae!==null){var Ce=Ae.dehydrated;Ce!==null&&Yr(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}br||l.flags&512&&Kf(l)}catch(Ee){Sn(l,l.return,Ee)}}if(l===i){je=null;break}if(g=l.sibling,g!==null){g.return=l.return,je=g;break}je=l.return}}function Wg(i){for(;je!==null;){var l=je;if(l===i){je=null;break}var g=l.sibling;if(g!==null){g.return=l.return,je=g;break}je=l.return}}function Gg(i){for(;je!==null;){var l=je;try{switch(l.tag){case 0:case 11:case 15:var g=l.return;try{fc(4,l)}catch(Q){Sn(l,g,Q)}break;case 1:var w=l.stateNode;if(typeof w.componentDidMount=="function"){var C=l.return;try{w.componentDidMount()}catch(Q){Sn(l,C,Q)}}var T=l.return;try{Kf(l)}catch(Q){Sn(l,T,Q)}break;case 5:var D=l.return;try{Kf(l)}catch(Q){Sn(l,D,Q)}}}catch(Q){Sn(l,l.return,Q)}if(l===i){je=null;break}var H=l.sibling;if(H!==null){H.return=l.return,je=H;break}je=l.return}}var E_=Math.ceil,dc=we.ReactCurrentDispatcher,Zf=we.ReactCurrentOwner,Pi=we.ReactCurrentBatchConfig,Vt=0,sr=null,Vn=null,yr=0,pi=0,il=Ao(0),Yn=0,Kl=null,pa=0,gc=0,$f=0,Yl=null,ei=null,Jf=0,sl=1/0,Zs=null,pc=!1,ed=null,Ro=null,mc=!1,No=null,yc=0,Ql=0,td=null,wc=-1,Ec=0;function Hr(){return(Vt&6)!==0?Mt():wc!==-1?wc:wc=Mt()}function bo(i){return(i.mode&1)===0?1:(Vt&2)!==0&&yr!==0?yr&-yr:n_.transition!==null?(Ec===0&&(Ec=Cn()),Ec):(i=lt,i!==0||(i=window.event,i=i===void 0?16:Vs(i.type)),i)}function Zi(i,l,g,w){if(50<Ql)throw Ql=0,td=null,Error(t(185));F(i,g,w),((Vt&2)===0||i!==sr)&&(i===sr&&((Vt&2)===0&&(gc|=g),Yn===4&&Oo(i,yr)),ti(i,w),g===1&&Vt===0&&(l.mode&1)===0&&(sl=Mt()+500,qu&&Co()))}function ti(i,l){var g=i.callbackNode;qr(i,l);var w=nr(i,i===sr?yr:0);if(w===0)g!==null&&In(g),i.callbackNode=null,i.callbackPriority=0;else if(l=w&-w,i.callbackPriority!==l){if(g!=null&&In(g),l===1)i.tag===0?t_(qg.bind(null,i)):P0(qg.bind(null,i)),ZE(function(){(Vt&6)===0&&Co()}),g=null;else{switch(Ci(w)){case 1:g=pe;break;case 4:g=ra;break;case 16:g=qt;break;case 536870912:g=ho;break;default:g=qt}g=tp(g,Xg.bind(null,i))}i.callbackPriority=l,i.callbackNode=g}}function Xg(i,l){if(wc=-1,Ec=0,(Vt&6)!==0)throw Error(t(327));var g=i.callbackNode;if(ol()&&i.callbackNode!==g)return null;var w=nr(i,i===sr?yr:0);if(w===0)return null;if((w&30)!==0||(w&i.expiredLanes)!==0||l)l=_c(i,w);else{l=w;var C=Vt;Vt|=2;var T=Yg();(sr!==i||yr!==l)&&(Zs=null,sl=Mt()+500,ya(i,l));do try{A_();break}catch(H){Kg(i,H)}while(!0);Ef(),dc.current=T,Vt=C,Vn!==null?l=0:(sr=null,yr=0,l=Yn)}if(l!==0){if(l===2&&(C=jt(i),C!==0&&(w=C,l=nd(i,C))),l===1)throw g=Kl,ya(i,0),Oo(i,w),ti(i,Mt()),g;if(l===6)Oo(i,w);else{if(C=i.current.alternate,(w&30)===0&&!__(C)&&(l=_c(i,w),l===2&&(T=jt(i),T!==0&&(w=T,l=nd(i,T))),l===1))throw g=Kl,ya(i,0),Oo(i,w),ti(i,Mt()),g;switch(i.finishedWork=C,i.finishedLanes=w,l){case 0:case 1:throw Error(t(345));case 2:wa(i,ei,Zs);break;case 3:if(Oo(i,w),(w&130023424)===w&&(l=Jf+500-Mt(),10<l)){if(nr(i,0)!==0)break;if(C=i.suspendedLanes,(C&w)!==w){Hr(),i.pingedLanes|=i.suspendedLanes&C;break}i.timeoutHandle=lf(wa.bind(null,i,ei,Zs),l);break}wa(i,ei,Zs);break;case 4:if(Oo(i,w),(w&4194240)===w)break;for(l=i.eventTimes,C=-1;0<w;){var D=31-fr(w);T=1<<D,D=l[D],D>C&&(C=D),w&=~T}if(w=C,w=Mt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*E_(w/1960))-w,10<w){i.timeoutHandle=lf(wa.bind(null,i,ei,Zs),w);break}wa(i,ei,Zs);break;case 5:wa(i,ei,Zs);break;default:throw Error(t(329))}}}return ti(i,Mt()),i.callbackNode===g?Xg.bind(null,i):null}function nd(i,l){var g=Yl;return i.current.memoizedState.isDehydrated&&(ya(i,l).flags|=256),i=_c(i,l),i!==2&&(l=ei,ei=g,l!==null&&rd(l)),i}function rd(i){ei===null?ei=i:ei.push.apply(ei,i)}function __(i){for(var l=i;;){if(l.flags&16384){var g=l.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var C=g[w],T=C.getSnapshot;C=C.value;try{if(!ne(T(),C))return!1}catch{return!1}}}if(g=l.child,l.subtreeFlags&16384&&g!==null)g.return=l,l=g;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Oo(i,l){for(l&=~$f,l&=~gc,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var g=31-fr(l),w=1<<g;i[g]=-1,l&=~w}}function qg(i){if((Vt&6)!==0)throw Error(t(327));ol();var l=nr(i,0);if((l&1)===0)return ti(i,Mt()),null;var g=_c(i,l);if(i.tag!==0&&g===2){var w=jt(i);w!==0&&(l=w,g=nd(i,w))}if(g===1)throw g=Kl,ya(i,0),Oo(i,l),ti(i,Mt()),g;if(g===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,wa(i,ei,Zs),ti(i,Mt()),null}function id(i,l){var g=Vt;Vt|=1;try{return i(l)}finally{Vt=g,Vt===0&&(sl=Mt()+500,qu&&Co())}}function ma(i){No!==null&&No.tag===0&&(Vt&6)===0&&ol();var l=Vt;Vt|=1;var g=Pi.transition,w=lt;try{if(Pi.transition=null,lt=1,i)return i()}finally{lt=w,Pi.transition=g,Vt=l,(Vt&6)===0&&Co()}}function sd(){pi=il.current,ln(il)}function ya(i,l){i.finishedWork=null,i.finishedLanes=0;var g=i.timeoutHandle;if(g!==-1&&(i.timeoutHandle=-1,QE(g)),Vn!==null)for(g=Vn.return;g!==null;){var w=g;switch(gf(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Gu();break;case 3:tl(),ln(Zr),ln(Sr),Sf();break;case 5:vf(w);break;case 4:tl();break;case 13:ln(En);break;case 19:ln(En);break;case 10:_f(w.type._context);break;case 22:case 23:sd()}g=g.return}if(sr=i,Vn=i=Po(i.current,null),yr=pi=l,Yn=0,Kl=null,$f=gc=pa=0,ei=Yl=null,fa!==null){for(l=0;l<fa.length;l++)if(g=fa[l],w=g.interleaved,w!==null){g.interleaved=null;var C=w.next,T=g.pending;if(T!==null){var D=T.next;T.next=C,w.next=D}g.pending=w}fa=null}return i}function Kg(i,l){do{var g=Vn;try{if(Ef(),rc.current=ac,ic){for(var w=_n.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}ic=!1}if(ga=0,ir=Kn=_n=null,jl=!1,Hl=0,Zf.current=null,g===null||g.return===null){Yn=1,Kl=l,Vn=null;break}e:{var T=i,D=g.return,H=g,Q=l;if(l=yr,H.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var he=Q,Ae=H,Ce=Ae.tag;if((Ae.mode&1)===0&&(Ce===0||Ce===11||Ce===15)){var Ee=Ae.alternate;Ee?(Ae.updateQueue=Ee.updateQueue,Ae.memoizedState=Ee.memoizedState,Ae.lanes=Ee.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Fe=Eg(D);if(Fe!==null){Fe.flags&=-257,_g(Fe,D,H,T,l),Fe.mode&1&&wg(T,he,l),l=Fe,Q=he;var He=l.updateQueue;if(He===null){var We=new Set;We.add(Q),l.updateQueue=We}else He.add(Q);break e}else{if((l&1)===0){wg(T,he,l),od();break e}Q=Error(t(426))}}else if(mn&&H.mode&1){var kn=Eg(D);if(kn!==null){(kn.flags&65536)===0&&(kn.flags|=256),_g(kn,D,H,T,l),yf(nl(Q,H));break e}}T=Q=nl(Q,H),Yn!==4&&(Yn=2),Yl===null?Yl=[T]:Yl.push(T),T=D;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var oe=mg(T,Q,l);H0(T,oe);break e;case 1:H=Q;var J=T.type,ae=T.stateNode;if((T.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Ro===null||!Ro.has(ae)))){T.flags|=65536,l&=-l,T.lanes|=l;var Ne=yg(T,H,l);H0(T,Ne);break e}}T=T.return}while(T!==null)}Zg(g)}catch(qe){l=qe,Vn===g&&g!==null&&(Vn=g=g.return);continue}break}while(!0)}function Yg(){var i=dc.current;return dc.current=ac,i===null?ac:i}function od(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),sr===null||(pa&268435455)===0&&(gc&268435455)===0||Oo(sr,yr)}function _c(i,l){var g=Vt;Vt|=2;var w=Yg();(sr!==i||yr!==l)&&(Zs=null,ya(i,l));do try{x_();break}catch(C){Kg(i,C)}while(!0);if(Ef(),Vt=g,dc.current=w,Vn!==null)throw Error(t(261));return sr=null,yr=0,Yn}function x_(){for(;Vn!==null;)Qg(Vn)}function A_(){for(;Vn!==null&&!zt();)Qg(Vn)}function Qg(i){var l=ep(i.alternate,i,pi);i.memoizedProps=i.pendingProps,l===null?Zg(i):Vn=l,Zf.current=null}function Zg(i){var l=i;do{var g=l.alternate;if(i=l.return,(l.flags&32768)===0){if(g=g_(g,l,pi),g!==null){Vn=g;return}}else{if(g=p_(g,l),g!==null){g.flags&=32767,Vn=g;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Yn=6,Vn=null;return}}if(l=l.sibling,l!==null){Vn=l;return}Vn=l=i}while(l!==null);Yn===0&&(Yn=5)}function wa(i,l,g){var w=lt,C=Pi.transition;try{Pi.transition=null,lt=1,I_(i,l,g,w)}finally{Pi.transition=C,lt=w}return null}function I_(i,l,g,w){do ol();while(No!==null);if((Vt&6)!==0)throw Error(t(327));g=i.finishedWork;var C=i.finishedLanes;if(g===null)return null;if(i.finishedWork=null,i.finishedLanes=0,g===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=g.lanes|g.childLanes;if(Xe(i,T),i===sr&&(Vn=sr=null,yr=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||mc||(mc=!0,tp(qt,function(){return ol(),null})),T=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||T){T=Pi.transition,Pi.transition=null;var D=lt;lt=1;var H=Vt;Vt|=4,Zf.current=null,y_(i,g),zg(g,i),Tr(of),Ur=!!sf,of=sf=null,i.current=g,w_(g),Ai(),Vt=H,lt=D,Pi.transition=T}else i.current=g;if(mc&&(mc=!1,No=i,yc=C),T=i.pendingLanes,T===0&&(Ro=null),_t(g.stateNode),ti(i,Mt()),l!==null)for(w=i.onRecoverableError,g=0;g<l.length;g++)C=l[g],w(C.value,{componentStack:C.stack,digest:C.digest});if(pc)throw pc=!1,i=ed,ed=null,i;return(yc&1)!==0&&i.tag!==0&&ol(),T=i.pendingLanes,(T&1)!==0?i===td?Ql++:(Ql=0,td=i):Ql=0,Co(),null}function ol(){if(No!==null){var i=Ci(yc),l=Pi.transition,g=lt;try{if(Pi.transition=null,lt=16>i?16:i,No===null)var w=!1;else{if(i=No,No=null,yc=0,(Vt&6)!==0)throw Error(t(331));var C=Vt;for(Vt|=4,je=i.current;je!==null;){var T=je,D=T.child;if((je.flags&16)!==0){var H=T.deletions;if(H!==null){for(var Q=0;Q<H.length;Q++){var he=H[Q];for(je=he;je!==null;){var Ae=je;switch(Ae.tag){case 0:case 11:case 15:ql(8,Ae,T)}var Ce=Ae.child;if(Ce!==null)Ce.return=Ae,je=Ce;else for(;je!==null;){Ae=je;var Ee=Ae.sibling,Fe=Ae.return;if(Lg(Ae),Ae===he){je=null;break}if(Ee!==null){Ee.return=Fe,je=Ee;break}je=Fe}}}var He=T.alternate;if(He!==null){var We=He.child;if(We!==null){He.child=null;do{var kn=We.sibling;We.sibling=null,We=kn}while(We!==null)}}je=T}}if((T.subtreeFlags&2064)!==0&&D!==null)D.return=T,je=D;else e:for(;je!==null;){if(T=je,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:ql(9,T,T.return)}var oe=T.sibling;if(oe!==null){oe.return=T.return,je=oe;break e}je=T.return}}var J=i.current;for(je=J;je!==null;){D=je;var ae=D.child;if((D.subtreeFlags&2064)!==0&&ae!==null)ae.return=D,je=ae;else e:for(D=J;je!==null;){if(H=je,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:fc(9,H)}}catch(qe){Sn(H,H.return,qe)}if(H===D){je=null;break e}var Ne=H.sibling;if(Ne!==null){Ne.return=H.return,je=Ne;break e}je=H.return}}if(Vt=C,Co(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(vt,i)}catch{}w=!0}return w}finally{lt=g,Pi.transition=l}}return!1}function $g(i,l,g){l=nl(g,l),l=mg(i,l,1),i=To(i,l,1),l=Hr(),i!==null&&(F(i,1,l),ti(i,l))}function Sn(i,l,g){if(i.tag===3)$g(i,i,g);else for(;l!==null;){if(l.tag===3){$g(l,i,g);break}else if(l.tag===1){var w=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Ro===null||!Ro.has(w))){i=nl(g,i),i=yg(l,i,1),l=To(l,i,1),i=Hr(),l!==null&&(F(l,1,i),ti(l,i));break}}l=l.return}}function C_(i,l,g){var w=i.pingCache;w!==null&&w.delete(l),l=Hr(),i.pingedLanes|=i.suspendedLanes&g,sr===i&&(yr&g)===g&&(Yn===4||Yn===3&&(yr&130023424)===yr&&500>Mt()-Jf?ya(i,0):$f|=g),ti(i,l)}function Jg(i,l){l===0&&((i.mode&1)===0?l=1:(l=ls,ls<<=1,(ls&130023424)===0&&(ls=4194304)));var g=Hr();i=Ks(i,l),i!==null&&(F(i,l,g),ti(i,g))}function v_(i){var l=i.memoizedState,g=0;l!==null&&(g=l.retryLane),Jg(i,g)}function T_(i,l){var g=0;switch(i.tag){case 13:var w=i.stateNode,C=i.memoizedState;C!==null&&(g=C.retryLane);break;case 19:w=i.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(l),Jg(i,g)}var ep;ep=function(i,l,g){if(i!==null)if(i.memoizedProps!==l.pendingProps||Zr.current)Jr=!0;else{if((i.lanes&g)===0&&(l.flags&128)===0)return Jr=!1,d_(i,l,g);Jr=(i.flags&131072)!==0}else Jr=!1,mn&&(l.flags&1048576)!==0&&D0(l,Yu,l.index);switch(l.lanes=0,l.tag){case 2:var w=l.type;cc(i,l),i=l.pendingProps;var C=Ka(l,Sr.current);el(l,g),C=bf(null,l,w,i,C,g);var T=Of();return l.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,$r(w)?(T=!0,Xu(l)):T=!1,l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,If(l),C.updater=lc,l.stateNode=C,C._reactInternals=l,Bf(l,w,i,g),l=zf(null,l,w,!0,T,g)):(l.tag=0,mn&&T&&df(l),jr(null,l,C,g),l=l.child),l;case 16:w=l.elementType;e:{switch(cc(i,l),i=l.pendingProps,C=w._init,w=C(w._payload),l.type=w,C=l.tag=R_(w),i=Ki(w,i),C){case 0:l=Uf(null,l,w,i,g);break e;case 1:l=Tg(null,l,w,i,g);break e;case 11:l=xg(null,l,w,i,g);break e;case 14:l=Ag(null,l,w,Ki(w.type,i),g);break e}throw Error(t(306,w,""))}return l;case 0:return w=l.type,C=l.pendingProps,C=l.elementType===w?C:Ki(w,C),Uf(i,l,w,C,g);case 1:return w=l.type,C=l.pendingProps,C=l.elementType===w?C:Ki(w,C),Tg(i,l,w,C,g);case 3:e:{if(Sg(l),i===null)throw Error(t(387));w=l.pendingProps,T=l.memoizedState,C=T.element,j0(i,l),tc(l,w,null,g);var D=l.memoizedState;if(w=D.element,T.isDehydrated)if(T={element:w,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){C=nl(Error(t(423)),l),l=Rg(i,l,w,g,C);break e}else if(w!==C){C=nl(Error(t(424)),l),l=Rg(i,l,w,g,C);break e}else for(gi=xo(l.stateNode.containerInfo.firstChild),di=l,mn=!0,qi=null,g=U0(l,null,w,g),l.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Za(),w===C){l=Qs(i,l,g);break e}jr(i,l,w,g)}l=l.child}return l;case 5:return G0(l),i===null&&mf(l),w=l.type,C=l.pendingProps,T=i!==null?i.memoizedProps:null,D=C.children,af(w,C)?D=null:T!==null&&af(w,T)&&(l.flags|=32),vg(i,l),jr(i,l,D,g),l.child;case 6:return i===null&&mf(l),null;case 13:return Ng(i,l,g);case 4:return Cf(l,l.stateNode.containerInfo),w=l.pendingProps,i===null?l.child=$a(l,null,w,g):jr(i,l,w,g),l.child;case 11:return w=l.type,C=l.pendingProps,C=l.elementType===w?C:Ki(w,C),xg(i,l,w,C,g);case 7:return jr(i,l,l.pendingProps,g),l.child;case 8:return jr(i,l,l.pendingProps.children,g),l.child;case 12:return jr(i,l,l.pendingProps.children,g),l.child;case 10:e:{if(w=l.type._context,C=l.pendingProps,T=l.memoizedProps,D=C.value,tn($u,w._currentValue),w._currentValue=D,T!==null)if(ne(T.value,D)){if(T.children===C.children&&!Zr.current){l=Qs(i,l,g);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var H=T.dependencies;if(H!==null){D=T.child;for(var Q=H.firstContext;Q!==null;){if(Q.context===w){if(T.tag===1){Q=Ys(-1,g&-g),Q.tag=2;var he=T.updateQueue;if(he!==null){he=he.shared;var Ae=he.pending;Ae===null?Q.next=Q:(Q.next=Ae.next,Ae.next=Q),he.pending=Q}}T.lanes|=g,Q=T.alternate,Q!==null&&(Q.lanes|=g),xf(T.return,g,l),H.lanes|=g;break}Q=Q.next}}else if(T.tag===10)D=T.type===l.type?null:T.child;else if(T.tag===18){if(D=T.return,D===null)throw Error(t(341));D.lanes|=g,H=D.alternate,H!==null&&(H.lanes|=g),xf(D,g,l),D=T.sibling}else D=T.child;if(D!==null)D.return=T;else for(D=T;D!==null;){if(D===l){D=null;break}if(T=D.sibling,T!==null){T.return=D.return,D=T;break}D=D.return}T=D}jr(i,l,C.children,g),l=l.child}return l;case 9:return C=l.type,w=l.pendingProps.children,el(l,g),C=bi(C),w=w(C),l.flags|=1,jr(i,l,w,g),l.child;case 14:return w=l.type,C=Ki(w,l.pendingProps),C=Ki(w.type,C),Ag(i,l,w,C,g);case 15:return Ig(i,l,l.type,l.pendingProps,g);case 17:return w=l.type,C=l.pendingProps,C=l.elementType===w?C:Ki(w,C),cc(i,l),l.tag=1,$r(w)?(i=!0,Xu(l)):i=!1,el(l,g),gg(l,w,C),Bf(l,w,C,g),zf(null,l,w,!0,i,g);case 19:return Og(i,l,g);case 22:return Cg(i,l,g)}throw Error(t(156,l.tag))};function tp(i,l){return Ar(i,l)}function S_(i,l,g,w){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(i,l,g,w){return new S_(i,l,g,w)}function ad(i){return i=i.prototype,!(!i||!i.isReactComponent)}function R_(i){if(typeof i=="function")return ad(i)?1:0;if(i!=null){if(i=i.$$typeof,i===q)return 11;if(i===le)return 14}return 2}function Po(i,l){var g=i.alternate;return g===null?(g=Di(i.tag,l,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=l,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&14680064,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,l=i.dependencies,g.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g}function xc(i,l,g,w,C,T){var D=2;if(w=i,typeof i=="function")ad(i)&&(D=1);else if(typeof i=="string")D=5;else e:switch(i){case V:return Ea(g.children,C,T,l);case U:D=8,C|=8;break;case B:return i=Di(12,g,l,C|2),i.elementType=B,i.lanes=T,i;case j:return i=Di(13,g,l,C),i.elementType=j,i.lanes=T,i;case Je:return i=Di(19,g,l,C),i.elementType=Je,i.lanes=T,i;case Be:return Ac(g,C,T,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:D=10;break e;case X:D=9;break e;case q:D=11;break e;case le:D=14;break e;case Ct:D=16,w=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return l=Di(D,g,l,C),l.elementType=i,l.type=w,l.lanes=T,l}function Ea(i,l,g,w){return i=Di(7,i,w,l),i.lanes=g,i}function Ac(i,l,g,w){return i=Di(22,i,w,l),i.elementType=Be,i.lanes=g,i.stateNode={isHidden:!1},i}function ld(i,l,g){return i=Di(6,i,null,l),i.lanes=g,i}function ud(i,l,g){return l=Di(4,i.children!==null?i.children:[],i.key,l),l.lanes=g,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function N_(i,l,g,w,C){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=se(0),this.expirationTimes=se(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=se(0),this.identifierPrefix=w,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function cd(i,l,g,w,C,T,D,H,Q){return i=new N_(i,l,g,H,Q),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Di(3,null,null,l),i.current=T,T.stateNode=i,T.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},If(T),i}function b_(i,l,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:w==null?null:""+w,children:i,containerInfo:l,implementation:g}}function np(i){if(!i)return Io;i=i._reactInternals;e:{if(tr(i)!==i||i.tag!==1)throw Error(t(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if($r(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(i.tag===1){var g=i.type;if($r(g))return b0(i,g,l)}return l}function rp(i,l,g,w,C,T,D,H,Q){return i=cd(g,w,!0,i,C,T,D,H,Q),i.context=np(null),g=i.current,w=Hr(),C=bo(g),T=Ys(w,C),T.callback=l??null,To(g,T,C),i.current.lanes=C,F(i,C,w),ti(i,w),i}function Ic(i,l,g,w){var C=l.current,T=Hr(),D=bo(C);return g=np(g),l.context===null?l.context=g:l.pendingContext=g,l=Ys(T,D),l.payload={element:i},w=w===void 0?null:w,w!==null&&(l.callback=w),i=To(C,l,D),i!==null&&(Zi(i,C,D,T),ec(i,C,D)),D}function Cc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ip(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<l?g:l}}function hd(i,l){ip(i,l),(i=i.alternate)&&ip(i,l)}function O_(){return null}var sp=typeof reportError=="function"?reportError:function(i){console.error(i)};function fd(i){this._internalRoot=i}vc.prototype.render=fd.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(t(409));Ic(i,l,null,null)},vc.prototype.unmount=fd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;ma(function(){Ic(null,i,null,null)}),l[Ws]=null}};function vc(i){this._internalRoot=i}vc.prototype.unstable_scheduleHydration=function(i){if(i){var l=Zt();i={blockedOn:null,target:i,priority:l};for(var g=0;g<vn.length&&l!==0&&l<vn[g].priority;g++);vn.splice(g,0,i),g===0&&go(i)}};function dd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Tc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function op(){}function P_(i,l,g,w,C){if(C){if(typeof w=="function"){var T=w;w=function(){var he=Cc(D);T.call(he)}}var D=rp(l,w,i,0,null,!1,!1,"",op);return i._reactRootContainer=D,i[Ws]=D.current,kl(i.nodeType===8?i.parentNode:i),ma(),D}for(;C=i.lastChild;)i.removeChild(C);if(typeof w=="function"){var H=w;w=function(){var he=Cc(Q);H.call(he)}}var Q=cd(i,0,!1,null,null,!1,!1,"",op);return i._reactRootContainer=Q,i[Ws]=Q.current,kl(i.nodeType===8?i.parentNode:i),ma(function(){Ic(l,Q,g,w)}),Q}function Sc(i,l,g,w,C){var T=g._reactRootContainer;if(T){var D=T;if(typeof C=="function"){var H=C;C=function(){var Q=Cc(D);H.call(Q)}}Ic(l,D,i,C)}else D=P_(g,l,i,C,w);return Cc(D)}Bs=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var g=et(l.pendingLanes);g!==0&&(fn(l,g|1),ti(l,Mt()),(Vt&6)===0&&(sl=Mt()+500,Co()))}break;case 13:ma(function(){var w=Ks(i,1);if(w!==null){var C=Hr();Zi(w,i,1,C)}}),hd(i,1)}},Xn=function(i){if(i.tag===13){var l=Ks(i,134217728);if(l!==null){var g=Hr();Zi(l,i,134217728,g)}hd(i,134217728)}},Ye=function(i){if(i.tag===13){var l=bo(i),g=Ks(i,l);if(g!==null){var w=Hr();Zi(g,i,l,w)}hd(i,l)}},Zt=function(){return lt},fo=function(i,l){var g=lt;try{return lt=i,l()}finally{lt=g}},xi=function(i,l,g){switch(l){case"input":if(nn(i,g),l=g.name,g.type==="radio"&&l!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<g.length;l++){var w=g[l];if(w!==i&&w.form===i.form){var C=Wu(w);if(!C)throw Error(t(90));ns(w),nn(w,C)}}}break;case"textarea":Wr(i,g);break;case"select":l=g.value,l!=null&&Me(i,!!g.multiple,l,!1)}},lo=id,Pn=ma;var D_={usingClientEntryPoint:!1,Events:[Bl,Xa,Wu,Fi,Bn,id]},Zl={findFiberByHostInstance:la,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k_={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=za(i),i===null?null:i.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||O_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{vt=Rc.inject(k_),gt=Rc}catch{}}return ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D_,ni.createPortal=function(i,l){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dd(l))throw Error(t(200));return b_(i,l,null,g)},ni.createRoot=function(i,l){if(!dd(i))throw Error(t(299));var g=!1,w="",C=sp;return l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=cd(i,1,!1,null,null,g,!1,w,C),i[Ws]=l.current,kl(i.nodeType===8?i.parentNode:i),new fd(l)},ni.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=za(l),i=i===null?null:i.stateNode,i},ni.flushSync=function(i){return ma(i)},ni.hydrate=function(i,l,g){if(!Tc(l))throw Error(t(200));return Sc(null,i,l,!0,g)},ni.hydrateRoot=function(i,l,g){if(!dd(i))throw Error(t(405));var w=g!=null&&g.hydratedSources||null,C=!1,T="",D=sp;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&(D=g.onRecoverableError)),l=rp(l,null,i,1,g??null,C,!1,T,D),i[Ws]=l.current,kl(i),w)for(i=0;i<w.length;i++)g=w[i],C=g._getVersion,C=C(g._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[g,C]:l.mutableSourceEagerHydrationData.push(g,C);return new vc(l)},ni.render=function(i,l,g){if(!Tc(l))throw Error(t(200));return Sc(null,i,l,!1,g)},ni.unmountComponentAtNode=function(i){if(!Tc(i))throw Error(t(40));return i._reactRootContainer?(ma(function(){Sc(null,null,i,!1,function(){i._reactRootContainer=null,i[Ws]=null})}),!0):!1},ni.unstable_batchedUpdates=id,ni.unstable_renderSubtreeIntoContainer=function(i,l,g,w){if(!Tc(g))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Sc(i,l,g,!1,w)},ni.version="18.3.1-next-f1338f8080-20240426",ni}var gp;function A2(){if(gp)return md.exports;gp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),md.exports=j_(),md.exports}var pp;function H_(){if(pp)return bc;pp=1;var r=A2();return bc.createRoot=r.createRoot,bc.hydrateRoot=r.hydrateRoot,bc}var W_=H_();A2();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gu(){return gu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},gu.apply(this,arguments)}var Vo;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Vo||(Vo={}));const mp="popstate";function G_(r){r===void 0&&(r={});function e(o,u){let{pathname:f,search:y,hash:A}=o.location;return Ld("",{pathname:f,search:y,hash:A},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){return typeof u=="string"?u:Qc(u)}return q_(e,t,null,r)}function Hn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function I2(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X_(){return Math.random().toString(36).substr(2,8)}function yp(r,e){return{usr:r.state,key:r.key,idx:e}}function Ld(r,e,t,o){return t===void 0&&(t=null),gu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Cl(e):e,{state:t,key:e&&e.key||o||X_()})}function Qc(r){let{pathname:e="/",search:t="",hash:o=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function Cl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let o=r.indexOf("?");o>=0&&(e.search=r.substr(o),r=r.substr(0,o)),r&&(e.pathname=r)}return e}function q_(r,e,t,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:f=!1}=o,y=u.history,A=Vo.Pop,x=null,_=v();_==null&&(_=0,y.replaceState(gu({},y.state,{idx:_}),""));function v(){return(y.state||{idx:null}).idx}function N(){A=Vo.Pop;let G=v(),Ie=G==null?null:G-_;_=G,x&&x({action:A,location:Y.location,delta:Ie})}function M(G,Ie){A=Vo.Push;let ge=Ld(Y.location,G,Ie);_=v()+1;let ie=yp(ge,_),we=Y.createHref(ge);try{y.pushState(ie,"",we)}catch(Ke){if(Ke instanceof DOMException&&Ke.name==="DataCloneError")throw Ke;u.location.assign(we)}f&&x&&x({action:A,location:Y.location,delta:1})}function W(G,Ie){A=Vo.Replace;let ge=Ld(Y.location,G,Ie);_=v();let ie=yp(ge,_),we=Y.createHref(ge);y.replaceState(ie,"",we),f&&x&&x({action:A,location:Y.location,delta:0})}function ee(G){let Ie=u.location.origin!=="null"?u.location.origin:u.location.href,ge=typeof G=="string"?G:Qc(G);return ge=ge.replace(/ $/,"%20"),Hn(Ie,"No window.location.(origin|href) available to create URL for href: "+ge),new URL(ge,Ie)}let Y={get action(){return A},get location(){return r(u,y)},listen(G){if(x)throw new Error("A history only accepts one active listener");return u.addEventListener(mp,N),x=G,()=>{u.removeEventListener(mp,N),x=null}},createHref(G){return e(u,G)},createURL:ee,encodeLocation(G){let Ie=ee(G);return{pathname:Ie.pathname,search:Ie.search,hash:Ie.hash}},push:M,replace:W,go(G){return y.go(G)}};return Y}var wp;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(wp||(wp={}));function K_(r,e,t){return t===void 0&&(t="/"),Y_(r,e,t)}function Y_(r,e,t,o){let u=typeof e=="string"?Cl(e):e,f=m1(u.pathname||"/",t);if(f==null)return null;let y=C2(r);Q_(y);let A=null;for(let x=0;A==null&&x<y.length;++x){let _=lx(f);A=sx(y[x],_)}return A}function C2(r,e,t,o){e===void 0&&(e=[]),t===void 0&&(t=[]),o===void 0&&(o="");let u=(f,y,A)=>{let x={relativePath:A===void 0?f.path||"":A,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};x.relativePath.startsWith("/")&&(Hn(x.relativePath.startsWith(o),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(o.length));let _=zo([o,x.relativePath]),v=t.concat(x);f.children&&f.children.length>0&&(Hn(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),C2(f.children,e,v,_)),!(f.path==null&&!f.index)&&e.push({path:_,score:rx(_,f.index),routesMeta:v})};return r.forEach((f,y)=>{var A;if(f.path===""||!((A=f.path)!=null&&A.includes("?")))u(f,y);else for(let x of v2(f.path))u(f,y,x)}),e}function v2(r){let e=r.split("/");if(e.length===0)return[];let[t,...o]=e,u=t.endsWith("?"),f=t.replace(/\?$/,"");if(o.length===0)return u?[f,""]:[f];let y=v2(o.join("/")),A=[];return A.push(...y.map(x=>x===""?f:[f,x].join("/"))),u&&A.push(...y),A.map(x=>r.startsWith("/")&&x===""?"/":x)}function Q_(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:ix(e.routesMeta.map(o=>o.childrenIndex),t.routesMeta.map(o=>o.childrenIndex)))}const Z_=/^:[\w-]+$/,$_=3,J_=2,ex=1,tx=10,nx=-2,Ep=r=>r==="*";function rx(r,e){let t=r.split("/"),o=t.length;return t.some(Ep)&&(o+=nx),e&&(o+=J_),t.filter(u=>!Ep(u)).reduce((u,f)=>u+(Z_.test(f)?$_:f===""?ex:tx),o)}function ix(r,e){return r.length===e.length&&r.slice(0,-1).every((o,u)=>o===e[u])?r[r.length-1]-e[e.length-1]:0}function sx(r,e,t){let{routesMeta:o}=r,u={},f="/",y=[];for(let A=0;A<o.length;++A){let x=o[A],_=A===o.length-1,v=f==="/"?e:e.slice(f.length)||"/",N=ox({path:x.relativePath,caseSensitive:x.caseSensitive,end:_},v),M=x.route;if(!N)return null;Object.assign(u,N.params),y.push({params:u,pathname:zo([f,N.pathname]),pathnameBase:fx(zo([f,N.pathnameBase])),route:M}),N.pathnameBase!=="/"&&(f=zo([f,N.pathnameBase]))}return y}function ox(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,o]=ax(r.path,r.caseSensitive,r.end),u=e.match(t);if(!u)return null;let f=u[0],y=f.replace(/(.)\/+$/,"$1"),A=u.slice(1);return{params:o.reduce((_,v,N)=>{let{paramName:M,isOptional:W}=v;if(M==="*"){let Y=A[N]||"";y=f.slice(0,f.length-Y.length).replace(/(.)\/+$/,"$1")}const ee=A[N];return W&&!ee?_[M]=void 0:_[M]=(ee||"").replace(/%2F/g,"/"),_},{}),pathname:f,pathnameBase:y,pattern:r}}function ax(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),I2(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let o=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,A,x)=>(o.push({paramName:A,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(o.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function lx(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return I2(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function m1(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,o=r.charAt(t);return o&&o!=="/"?null:r.slice(t)||"/"}function ux(r,e){e===void 0&&(e="/");let{pathname:t,search:o="",hash:u=""}=typeof r=="string"?Cl(r):r;return{pathname:t?t.startsWith("/")?t:cx(t,e):e,search:dx(o),hash:gx(u)}}function cx(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?t.length>1&&t.pop():u!=="."&&t.push(u)}),t.length>1?t.join("/"):"/"}function Ed(r,e,t,o){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hx(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function T2(r,e){let t=hx(r);return e?t.map((o,u)=>u===t.length-1?o.pathname:o.pathnameBase):t.map(o=>o.pathnameBase)}function S2(r,e,t,o){o===void 0&&(o=!1);let u;typeof r=="string"?u=Cl(r):(u=gu({},r),Hn(!u.pathname||!u.pathname.includes("?"),Ed("?","pathname","search",u)),Hn(!u.pathname||!u.pathname.includes("#"),Ed("#","pathname","hash",u)),Hn(!u.search||!u.search.includes("#"),Ed("#","search","hash",u)));let f=r===""||u.pathname==="",y=f?"/":u.pathname,A;if(y==null)A=t;else{let N=e.length-1;if(!o&&y.startsWith("..")){let M=y.split("/");for(;M[0]==="..";)M.shift(),N-=1;u.pathname=M.join("/")}A=N>=0?e[N]:"/"}let x=ux(u,A),_=y&&y!=="/"&&y.endsWith("/"),v=(f||y===".")&&t.endsWith("/");return!x.pathname.endsWith("/")&&(_||v)&&(x.pathname+="/"),x}const zo=r=>r.join("/").replace(/\/\/+/g,"/"),fx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),dx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,gx=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function px(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const R2=["post","put","patch","delete"];new Set(R2);const mx=["get",...R2];new Set(mx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pu(){return pu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},pu.apply(this,arguments)}const y1=Re.createContext(null),yx=Re.createContext(null),Da=Re.createContext(null),Ch=Re.createContext(null),ka=Re.createContext({outlet:null,matches:[],isDataRoute:!1}),N2=Re.createContext(null);function wx(r,e){let{relative:t}=e===void 0?{}:e;Tu()||Hn(!1);let{basename:o,navigator:u}=Re.useContext(Da),{hash:f,pathname:y,search:A}=O2(r,{relative:t}),x=y;return o!=="/"&&(x=y==="/"?o:zo([o,y])),u.createHref({pathname:x,search:A,hash:f})}function Tu(){return Re.useContext(Ch)!=null}function vh(){return Tu()||Hn(!1),Re.useContext(Ch).location}function b2(r){Re.useContext(Da).static||Re.useLayoutEffect(r)}function Ex(){let{isDataRoute:r}=Re.useContext(ka);return r?Px():_x()}function _x(){Tu()||Hn(!1);let r=Re.useContext(y1),{basename:e,future:t,navigator:o}=Re.useContext(Da),{matches:u}=Re.useContext(ka),{pathname:f}=vh(),y=JSON.stringify(T2(u,t.v7_relativeSplatPath)),A=Re.useRef(!1);return b2(()=>{A.current=!0}),Re.useCallback(function(_,v){if(v===void 0&&(v={}),!A.current)return;if(typeof _=="number"){o.go(_);return}let N=S2(_,JSON.parse(y),f,v.relative==="path");r==null&&e!=="/"&&(N.pathname=N.pathname==="/"?e:zo([e,N.pathname])),(v.replace?o.replace:o.push)(N,v.state,v)},[e,o,y,f,r])}function O2(r,e){let{relative:t}=e===void 0?{}:e,{future:o}=Re.useContext(Da),{matches:u}=Re.useContext(ka),{pathname:f}=vh(),y=JSON.stringify(T2(u,o.v7_relativeSplatPath));return Re.useMemo(()=>S2(r,JSON.parse(y),f,t==="path"),[r,y,f,t])}function xx(r,e){return Ax(r,e)}function Ax(r,e,t,o){Tu()||Hn(!1);let{navigator:u}=Re.useContext(Da),{matches:f}=Re.useContext(ka),y=f[f.length-1],A=y?y.params:{};y&&y.pathname;let x=y?y.pathnameBase:"/";y&&y.route;let _=vh(),v;if(e){var N;let G=typeof e=="string"?Cl(e):e;x==="/"||(N=G.pathname)!=null&&N.startsWith(x)||Hn(!1),v=G}else v=_;let M=v.pathname||"/",W=M;if(x!=="/"){let G=x.replace(/^\//,"").split("/");W="/"+M.replace(/^\//,"").split("/").slice(G.length).join("/")}let ee=K_(r,{pathname:W}),Y=Sx(ee&&ee.map(G=>Object.assign({},G,{params:Object.assign({},A,G.params),pathname:zo([x,u.encodeLocation?u.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?x:zo([x,u.encodeLocation?u.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),f,t,o);return e&&Y?Re.createElement(Ch.Provider,{value:{location:pu({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Vo.Pop}},Y):Y}function Ix(){let r=Ox(),e=px(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Re.createElement(Re.Fragment,null,Re.createElement("h2",null,"Unexpected Application Error!"),Re.createElement("h3",{style:{fontStyle:"italic"}},e),t?Re.createElement("pre",{style:u},t):null,null)}const Cx=Re.createElement(Ix,null);class vx extends Re.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Re.createElement(ka.Provider,{value:this.props.routeContext},Re.createElement(N2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tx(r){let{routeContext:e,match:t,children:o}=r,u=Re.useContext(y1);return u&&u.static&&u.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=t.route.id),Re.createElement(ka.Provider,{value:e},o)}function Sx(r,e,t,o){var u;if(e===void 0&&(e=[]),t===void 0&&(t=null),o===void 0&&(o=null),r==null){var f;if(!t)return null;if(t.errors)r=t.matches;else if((f=o)!=null&&f.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let y=r,A=(u=t)==null?void 0:u.errors;if(A!=null){let v=y.findIndex(N=>N.route.id&&A?.[N.route.id]!==void 0);v>=0||Hn(!1),y=y.slice(0,Math.min(y.length,v+1))}let x=!1,_=-1;if(t&&o&&o.v7_partialHydration)for(let v=0;v<y.length;v++){let N=y[v];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(_=v),N.route.id){let{loaderData:M,errors:W}=t,ee=N.route.loader&&M[N.route.id]===void 0&&(!W||W[N.route.id]===void 0);if(N.route.lazy||ee){x=!0,_>=0?y=y.slice(0,_+1):y=[y[0]];break}}}return y.reduceRight((v,N,M)=>{let W,ee=!1,Y=null,G=null;t&&(W=A&&N.route.id?A[N.route.id]:void 0,Y=N.route.errorElement||Cx,x&&(_<0&&M===0?(Dx("route-fallback"),ee=!0,G=null):_===M&&(ee=!0,G=N.route.hydrateFallbackElement||null)));let Ie=e.concat(y.slice(0,M+1)),ge=()=>{let ie;return W?ie=Y:ee?ie=G:N.route.Component?ie=Re.createElement(N.route.Component,null):N.route.element?ie=N.route.element:ie=v,Re.createElement(Tx,{match:N,routeContext:{outlet:v,matches:Ie,isDataRoute:t!=null},children:ie})};return t&&(N.route.ErrorBoundary||N.route.errorElement||M===0)?Re.createElement(vx,{location:t.location,revalidation:t.revalidation,component:Y,error:W,children:ge(),routeContext:{outlet:null,matches:Ie,isDataRoute:!0}}):ge()},null)}var P2=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(P2||{}),D2=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(D2||{});function Rx(r){let e=Re.useContext(y1);return e||Hn(!1),e}function Nx(r){let e=Re.useContext(yx);return e||Hn(!1),e}function bx(r){let e=Re.useContext(ka);return e||Hn(!1),e}function k2(r){let e=bx(),t=e.matches[e.matches.length-1];return t.route.id||Hn(!1),t.route.id}function Ox(){var r;let e=Re.useContext(N2),t=Nx(),o=k2();return e!==void 0?e:(r=t.errors)==null?void 0:r[o]}function Px(){let{router:r}=Rx(P2.UseNavigateStable),e=k2(D2.UseNavigateStable),t=Re.useRef(!1);return b2(()=>{t.current=!0}),Re.useCallback(function(u,f){f===void 0&&(f={}),t.current&&(typeof u=="number"?r.navigate(u):r.navigate(u,pu({fromRouteId:e},f)))},[r,e])}const _p={};function Dx(r,e,t){_p[r]||(_p[r]=!0)}function kx(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function Mo(r){Hn(!1)}function Mx(r){let{basename:e="/",children:t=null,location:o,navigationType:u=Vo.Pop,navigator:f,static:y=!1,future:A}=r;Tu()&&Hn(!1);let x=e.replace(/^\/*/,"/"),_=Re.useMemo(()=>({basename:x,navigator:f,static:y,future:pu({v7_relativeSplatPath:!1},A)}),[x,A,f,y]);typeof o=="string"&&(o=Cl(o));let{pathname:v="/",search:N="",hash:M="",state:W=null,key:ee="default"}=o,Y=Re.useMemo(()=>{let G=m1(v,x);return G==null?null:{location:{pathname:G,search:N,hash:M,state:W,key:ee},navigationType:u}},[x,v,N,M,W,ee,u]);return Y==null?null:Re.createElement(Da.Provider,{value:_},Re.createElement(Ch.Provider,{children:t,value:Y}))}function Lx(r){let{children:e,location:t}=r;return xx(Bd(e),t)}new Promise(()=>{});function Bd(r,e){e===void 0&&(e=[]);let t=[];return Re.Children.forEach(r,(o,u)=>{if(!Re.isValidElement(o))return;let f=[...e,u];if(o.type===Re.Fragment){t.push.apply(t,Bd(o.props.children,f));return}o.type!==Mo&&Hn(!1),!o.props.index||!o.props.children||Hn(!1);let y={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=Bd(o.props.children,f)),t.push(y)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Fd.apply(this,arguments)}function Bx(r,e){if(r==null)return{};var t={},o=Object.keys(r),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(t[u]=r[u]);return t}function Fx(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Vx(r,e){return r.button===0&&(!e||e==="_self")&&!Fx(r)}const Ux=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zx="6";try{window.__reactRouterVersion=zx}catch{}const jx="startTransition",xp=V_[jx];function Hx(r){let{basename:e,children:t,future:o,window:u}=r,f=Re.useRef();f.current==null&&(f.current=G_({window:u,v5Compat:!0}));let y=f.current,[A,x]=Re.useState({action:y.action,location:y.location}),{v7_startTransition:_}=o||{},v=Re.useCallback(N=>{_&&xp?xp(()=>x(N)):x(N)},[x,_]);return Re.useLayoutEffect(()=>y.listen(v),[y,v]),Re.useEffect(()=>kx(o),[o]),Re.createElement(Mx,{basename:e,children:t,location:A.location,navigationType:A.action,navigator:y,future:o})}const Wx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M2=Re.forwardRef(function(e,t){let{onClick:o,relative:u,reloadDocument:f,replace:y,state:A,target:x,to:_,preventScrollReset:v,viewTransition:N}=e,M=Bx(e,Ux),{basename:W}=Re.useContext(Da),ee,Y=!1;if(typeof _=="string"&&Gx.test(_)&&(ee=_,Wx))try{let ie=new URL(window.location.href),we=_.startsWith("//")?new URL(ie.protocol+_):new URL(_),Ke=m1(we.pathname,W);we.origin===ie.origin&&Ke!=null?_=Ke+we.search+we.hash:Y=!0}catch{}let G=wx(_,{relative:u}),Ie=Xx(_,{replace:y,state:A,target:x,preventScrollReset:v,relative:u,viewTransition:N});function ge(ie){o&&o(ie),ie.defaultPrevented||Ie(ie)}return Re.createElement("a",Fd({},M,{href:ee||G,onClick:Y||f?o:ge,ref:t,target:x}))});var Ap;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Ap||(Ap={}));var Ip;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ip||(Ip={}));function Xx(r,e){let{target:t,replace:o,state:u,preventScrollReset:f,relative:y,viewTransition:A}=e===void 0?{}:e,x=Ex(),_=vh(),v=O2(r,{relative:y});return Re.useCallback(N=>{if(Vx(N,t)){N.preventDefault();let M=o!==void 0?o:Qc(_)===Qc(v);x(r,{replace:M,state:u,preventScrollReset:f,relative:y,viewTransition:A})}},[_,x,v,o,u,t,r,f,y,A])}function qx(){const[r,e]=Re.useState(""),[t,o]=Re.useState(""),[u,f]=Re.useState(""),y=async()=>{(await fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:t})})).ok?f("登入成功！"):f("登入失敗！")};return me.jsxs("div",{className:"page-container",children:[me.jsx("h2",{children:"信箱 Mailbox"}),me.jsx("input",{value:r,onChange:A=>e(A.target.value),placeholder:"帳號"}),me.jsx("input",{value:t,onChange:A=>o(A.target.value),type:"password",placeholder:"密碼"}),me.jsx("button",{onClick:y,children:"登入"}),me.jsx("p",{children:u})]})}const Kx=[{route:"紅線",start:"火車站",end:"科學園區",time:"06:00 - 22:00",interval:"10 分鐘",description:"途經市中心、科學園區，停靠 10 個站點"},{route:"藍線",start:"東門",end:"光復路",time:"06:30 - 21:30",interval:"15 分鐘",description:"途經東區、光復路，停靠 8 個站點"},{route:"綠線",start:"市政府",end:"高鐵站",time:"07:00 - 20:00",interval:"12 分鐘",description:"連接市政府與高鐵站，途經科學園區"},{route:"黃線",start:"北區",end:"南區",time:"06:15 - 22:15",interval:"20 分鐘",description:"貫穿北區與南區，途經主要商圈"},{route:"橘線",start:"中央公園",end:"東湖",time:"06:45 - 21:45",interval:"15 分鐘",description:"環狀路線，途經學校與住宅區"},{route:"紫線",start:"新竹站",end:"香山",time:"07:00 - 20:30",interval:"30 分鐘",description:"跨區路線，連接新竹市與香山"},{route:"粉紅線",start:"科學園區",end:"新竹市政府",time:"06:30 - 22:00",interval:"10 分鐘",description:"主要接駁園區與政府機關"},{route:"灰線",start:"南門",end:"北門",time:"06:00 - 21:00",interval:"25 分鐘",description:"連接南北區，停靠住宅與商業區"}];function Yx(){const[r,e]=Re.useState([]);return Re.useEffect(()=>{e(Kx)},[]),me.jsx("div",{className:"page-container",children:me.jsxs("section",{className:"info-section",children:[me.jsx("h1",{children:"園區公車資訊"}),me.jsx("div",{className:"bus-cards-container",children:r.map((t,o)=>me.jsxs("div",{className:"bus-card",children:[me.jsxs("h2",{children:[t.route,"（",t.start," → ",t.end,"）"]}),me.jsxs("p",{children:[me.jsx("strong",{children:"營運時間："}),t.time]}),me.jsxs("p",{children:[me.jsx("strong",{children:"發車間隔："}),t.interval]}),me.jsxs("p",{children:[me.jsx("strong",{children:"路線描述："}),t.description]})]},o))})]})})}const Qx={office:[{title_zh:"辦公室",title_en:"Office Room",desc_zh:"辦公人員使用",desc_en:"For office staff",phone:"1234-5678",time:"9:00-18:00"},{title_zh:"會議室",title_en:"Conference Room",desc_zh:"會議與討論空間",desc_en:"Meeting and discussion space",phone:"2345-6789",time:"9:00-18:00"},{title_zh:"無塵室",title_en:"Clean Room",desc_zh:"特殊環境",desc_en:"Special environment",phone:"3456-7890",time:"9:00-18:00"}],sport:[{title_zh:"健身房",title_en:"Gym",desc_zh:"運動健身",desc_en:"Fitness exercise",phone:"4567-8901",time:"6:00-22:00"},{title_zh:"游泳池",title_en:"Swimming Pool",desc_zh:"游泳休閒",desc_en:"Swimming leisure",phone:"5678-9012",time:"6:00-22:00"},{title_zh:"綜合球場",title_en:"Comprehensive Court",desc_zh:"多功能球場",desc_en:"Multi-purpose court",phone:"6789-0123",time:"6:00-22:00"}],leisure:[{title_zh:"圖書館",title_en:"Library",desc_zh:"閱讀書籍",desc_en:"Read books",phone:"7890-1234",time:"9:00-20:00"},{title_zh:"書店",title_en:"Book Store",desc_zh:"買書看書",desc_en:"Buy and read books",phone:"8901-2345",time:"9:00-20:00"},{title_zh:"展演廳",title_en:"Exhibition Hall",desc_zh:"展演活動",desc_en:"Exhibitions and performances",phone:"9012-3456",time:"9:00-20:00"}],food:[{title_zh:"麵包店",title_en:"Bread Store",desc_zh:"各式麵包",desc_en:"Various breads",phone:"0123-4567",time:"8:00-20:00"},{title_zh:"超商",title_en:"Convenience Store",desc_zh:"便利商店",desc_en:"Convenience store",phone:"1234-5670",time:"0:00-24:00"},{title_zh:"咖啡廳",title_en:"Coffee Shop",desc_zh:"飲品咖啡",desc_en:"Drinks and coffee",phone:"2345-6780",time:"8:00-20:00"}]};function Zx({category:r,title:e,desc:t,phone:o,time:u}){return me.jsxs("div",{className:`card ${r}`,children:[me.jsx("h3",{children:e}),me.jsx("p",{children:t}),me.jsxs("p",{children:["📞 ",o]}),me.jsxs("p",{children:["🕒 ",u]})]})}function $x({lang:r}){const[e,t]=Re.useState("office"),o=[{key:"office",label_zh:"辦公場所",label_en:"Office"},{key:"sport",label_zh:"運動設施",label_en:"Sports"},{key:"leisure",label_zh:"休閒場所",label_en:"Leisure"},{key:"food",label_zh:"美食街",label_en:"Food Court"}];return me.jsxs("div",{className:"explore-page",children:[me.jsx("h1",{children:r==="zh"?"探索環境":"Explore Environment"}),me.jsx("div",{className:"category-buttons",children:o.map(u=>me.jsx("button",{className:`category-btn ${e===u.key?"active":""}`,onClick:()=>t(u.key),children:r==="zh"?u.label_zh:u.label_en},u.key))}),me.jsx("div",{className:"cards-container",children:Qx[e].map((u,f)=>me.jsx(Zx,{category:e,title:r==="zh"?u.title_zh:u.title_en,desc:r==="zh"?u.desc_zh:u.desc_en,phone:u.phone,time:u.time},f))})]})}function Cp({tasks:r=[],completedIds:e=[],onComplete:t,lang:o="zh"}){const u={zh:{point:"分",complete:"完成",done:"已完成"},en:{point:"pt",complete:"Complete",done:"Done"}};return me.jsx("ul",{style:{listStyle:"none",padding:0,width:"100%"},children:r.map(f=>{const y=e.includes(f.id);return me.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",border:"1px solid #eee",borderRadius:8,marginBottom:8,background:y?"#f6fff6":"#fff"},children:[me.jsxs("div",{style:{textAlign:"left"},children:[me.jsx("div",{style:{fontWeight:600},children:f.text}),me.jsxs("div",{style:{fontSize:12,color:"#666"},children:[f.point," ",u[o].point]})]}),me.jsx("button",{onClick:()=>t&&t(f),disabled:y,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:y?"#9e9e9e":"#4caf50",color:"#fff",cursor:y?"not-allowed":"pointer"},children:y?f.doneLabel||u[o].done:f.completeLabel||u[o].complete})]},f.id)})})}function Jx({lang:r}){const o=r==="zh"?[{id:1,text:"找同事喝咖啡(掃描QRCODE以完成任務)",point:10},{id:2,text:"和同事吃午餐(掃描QRCODE以完成任務)",point:10},{id:3,text:"共用辦公設備",point:10},{id:4,text:"一起參加公司活動",point:20},{id:5,text:"認識實習生(掃描QRCODE以完成任務)連結gmail",point:20},{id:6,text:"分享工作經驗",point:15},{id:7,text:"參與團隊會議並提出建議",point:15},{id:8,text:"組織團隊建設活動",point:25},{id:9,text:"參加公司志願者活動",point:30},{id:10,text:"推薦優秀人才加入公司",point:50},{id:11,text:"與同事合作完成專案",point:40},{id:12,text:"參加跨部門合作",point:35},{id:13,text:"完成編輯個人檔案",point:15}]:[{id:1,text:"Have coffee with colleagues",point:10},{id:2,text:"Have lunch together",point:10},{id:3,text:"Share office equipment",point:10},{id:4,text:"Participate in company events",point:20},{id:5,text:"Get to know interns",point:20},{id:6,text:"Share work experience",point:15},{id:7,text:"Attend team meetings and provide suggestions",point:15},{id:8,text:"Organize team-building activities",point:25},{id:9,text:"Join company volunteer activities",point:30},{id:10,text:"Refer talented individuals to join the company",point:50},{id:11,text:"Collaborate with colleagues to complete projects",point:40},{id:12,text:"Participate in cross-departmental collaboration",point:35},{id:13,text:"Complete and edit personal profile",point:15}],[u,f]=Re.useState(()=>parseInt(localStorage.getItem("score"))||0),[y,A]=Re.useState(()=>{const N=localStorage.getItem("completedIds");return N?JSON.parse(N):[]}),[x,_]=Re.useState("tasks");Re.useEffect(()=>{localStorage.setItem("score",u),localStorage.setItem("completedIds",JSON.stringify(y))},[u,y]);const v=N=>{y.includes(N.id)||(f(M=>M+N.point),A(M=>[...M,N.id]))};return me.jsxs("div",{className:"page-container",style:{textAlign:"center"},children:[me.jsx("h2",{children:r==="zh"?"社交任務":"Social Tasks"}),me.jsx("p",{children:r==="zh"?"完成與同梯互動的任務":"Complete social tasks with colleagues"}),me.jsxs("div",{style:{marginBottom:"20px"},children:[me.jsx("button",{onClick:()=>_("tasks"),style:{marginRight:"10px",backgroundColor:x==="tasks"?"#4caf50":"#eee",color:x==="tasks"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:r==="zh"?"任務列表":"Task List"}),me.jsx("button",{onClick:()=>_("completed"),style:{backgroundColor:x==="completed"?"#4caf50":"#eee",color:x==="completed"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:r==="zh"?"已完成任務":"Completed Tasks"})]}),x==="completed"&&me.jsx(Cp,{tasks:o,completedIds:y,onComplete:v,lang:r}),x==="tasks"&&me.jsx(Cp,{tasks:o,completedIds:y,onComplete:v,lang:r})]})}const eA=()=>{};var vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let u=r.charCodeAt(o);u<128?e[t++]=u:u<2048?(e[t++]=u>>6|192,e[t++]=u&63|128):(u&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=u>>18|240,e[t++]=u>>12&63|128,e[t++]=u>>6&63|128,e[t++]=u&63|128):(e[t++]=u>>12|224,e[t++]=u>>6&63|128,e[t++]=u&63|128)}return e},tA=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const u=r[t++];if(u<128)e[o++]=String.fromCharCode(u);else if(u>191&&u<224){const f=r[t++];e[o++]=String.fromCharCode((u&31)<<6|f&63)}else if(u>239&&u<365){const f=r[t++],y=r[t++],A=r[t++],x=((u&7)<<18|(f&63)<<12|(y&63)<<6|A&63)-65536;e[o++]=String.fromCharCode(55296+(x>>10)),e[o++]=String.fromCharCode(56320+(x&1023))}else{const f=r[t++],y=r[t++];e[o++]=String.fromCharCode((u&15)<<12|(f&63)<<6|y&63)}}return e.join("")},B2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<r.length;u+=3){const f=r[u],y=u+1<r.length,A=y?r[u+1]:0,x=u+2<r.length,_=x?r[u+2]:0,v=f>>2,N=(f&3)<<4|A>>4;let M=(A&15)<<2|_>>6,W=_&63;x||(W=64,y||(M=64)),o.push(t[v],t[N],t[M],t[W])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(L2(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):tA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<r.length;){const f=t[r.charAt(u++)],A=u<r.length?t[r.charAt(u)]:0;++u;const _=u<r.length?t[r.charAt(u)]:64;++u;const N=u<r.length?t[r.charAt(u)]:64;if(++u,f==null||A==null||_==null||N==null)throw new nA;const M=f<<2|A>>4;if(o.push(M),_!==64){const W=A<<4&240|_>>2;if(o.push(W),N!==64){const ee=_<<6&192|N;o.push(ee)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rA=function(r){const e=L2(r);return B2.encodeByteArray(e,!0)},Zc=function(r){return rA(r).replace(/\./g,"")},F2=function(r){try{return B2.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=()=>iA().__FIREBASE_DEFAULTS__,oA=()=>{if(typeof process>"u"||typeof vp>"u")return;const r=vp.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&F2(r[1]);return e&&JSON.parse(e)},Th=()=>{try{return eA()||sA()||oA()||aA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},V2=r=>Th()?.emulatorHosts?.[r],U2=r=>{const e=V2(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},z2=()=>Th()?.config,j2=r=>Th()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w1(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",u=r.iat||0,f=r.sub||r.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Zc(JSON.stringify(t)),Zc(JSON.stringify(y)),""].join(".")}const iu={};function uA(){const r={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?r.emulator.push(e):r.prod.push(e);return r}function cA(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Tp=!1;function E1(r,e){if(typeof window>"u"||typeof document>"u"||!Ma(window.location.host)||iu[r]===e||iu[r]||Tp)return;iu[r]=e;function t(M){return`__firebase__banner__${M}`}const o="__firebase__banner",f=uA().prod.length>0;function y(){const M=document.getElementById(o);M&&M.remove()}function A(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function x(M,W){M.setAttribute("width","24"),M.setAttribute("id",W),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function _(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Tp=!0,y()},M}function v(M,W){M.setAttribute("id",W),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function N(){const M=cA(o),W=t("text"),ee=document.getElementById(W)||document.createElement("span"),Y=t("learnmore"),G=document.getElementById(Y)||document.createElement("a"),Ie=t("preprendIcon"),ge=document.getElementById(Ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ie=M.element;A(ie),v(G,Y);const we=_();x(ge,Ie),ie.append(ge,ee,G,we),document.body.appendChild(ie)}f?(ee.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",W)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function fA(){const r=Th()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function gA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pA(){const r=kr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function mA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G2(){try{return typeof indexedDB=="object"}catch{return!1}}function X2(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},u.onupgradeneeded=()=>{t=!1},u.onerror=()=>{e(u.error?.message||"")}}catch(t){e(t)}})}function yA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="FirebaseError";class Bi extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=wA,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,La.prototype.create)}}class La{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},u=`${this.service}/${e}`,f=this.errors[e],y=f?EA(f,o):"Error",A=`${this.serviceName}: ${y} (${u}).`;return new Bi(u,A,o)}}function EA(r,e){return r.replace(_A,(t,o)=>{const u=e[o];return u!=null?String(u):`<${o}?>`})}const _A=/\{\$([^}]+)}/g;function xA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Xo(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const u of t){if(!o.includes(u))return!1;const f=r[u],y=e[u];if(Sp(f)&&Sp(y)){if(!Xo(f,y))return!1}else if(f!==y)return!1}for(const u of o)if(!t.includes(u))return!1;return!0}function Sp(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r){const e=[];for(const[t,o]of Object.entries(r))Array.isArray(o)?o.forEach(u=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function AA(r,e){const t=new IA(r,e);return t.subscribe.bind(t)}class IA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let u;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");CA(e,["next","error","complete"])?u=e:u={next:e,error:t,complete:o},u.next===void 0&&(u.next=_d),u.error===void 0&&(u.error=_d),u.complete===void 0&&(u.complete=_d);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CA(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function _d(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=1e3,TA=2,SA=14400*1e3,RA=.5;function Rp(r,e=vA,t=TA){const o=e*Math.pow(t,r),u=Math.round(RA*o*(Math.random()-.5)*2);return Math.min(SA,o+u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(r){return r&&r._delegate?r._delegate:r}class Li{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new lA;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:t});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OA(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:u});o.resolve(f)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[f,y]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(f);o===A&&y.resolve(u)}return u}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),u=this.onInitCallbacks.get(o)??new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const u of o)try{u(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:bA(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bA(r){return r===_a?void 0:r}function OA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const DA={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},kA=Ot.INFO,MA={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},LA=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),u=MA[e];if(u)console[u](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sh{constructor(e){this.name=e,this._logLevel=kA,this._logHandler=LA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...e),this._logHandler(this,Ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...e),this._logHandler(this,Ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...e),this._logHandler(this,Ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...e),this._logHandler(this,Ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...e),this._logHandler(this,Ot.ERROR,...e)}}const BA=(r,e)=>e.some(t=>r instanceof t);let Np,bp;function FA(){return Np||(Np=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VA(){return bp||(bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q2=new WeakMap,Vd=new WeakMap,K2=new WeakMap,xd=new WeakMap,_1=new WeakMap;function UA(r){const e=new Promise((t,o)=>{const u=()=>{r.removeEventListener("success",f),r.removeEventListener("error",y)},f=()=>{t(jo(r.result)),u()},y=()=>{o(r.error),u()};r.addEventListener("success",f),r.addEventListener("error",y)});return e.then(t=>{t instanceof IDBCursor&&q2.set(t,r)}).catch(()=>{}),_1.set(e,r),e}function zA(r){if(Vd.has(r))return;const e=new Promise((t,o)=>{const u=()=>{r.removeEventListener("complete",f),r.removeEventListener("error",y),r.removeEventListener("abort",y)},f=()=>{t(),u()},y=()=>{o(r.error||new DOMException("AbortError","AbortError")),u()};r.addEventListener("complete",f),r.addEventListener("error",y),r.addEventListener("abort",y)});Vd.set(r,e)}let Ud={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Vd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||K2.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function jA(r){Ud=r(Ud)}function HA(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call(Ad(this),e,...t);return K2.set(o,e.sort?e.sort():[e]),jo(o)}:VA().includes(r)?function(...e){return r.apply(Ad(this),e),jo(q2.get(this))}:function(...e){return jo(r.apply(Ad(this),e))}}function WA(r){return typeof r=="function"?HA(r):(r instanceof IDBTransaction&&zA(r),BA(r,FA())?new Proxy(r,Ud):r)}function jo(r){if(r instanceof IDBRequest)return UA(r);if(xd.has(r))return xd.get(r);const e=WA(r);return e!==r&&(xd.set(r,e),_1.set(e,r)),e}const Ad=r=>_1.get(r);function Y2(r,e,{blocked:t,upgrade:o,blocking:u,terminated:f}={}){const y=indexedDB.open(r,e),A=jo(y);return o&&y.addEventListener("upgradeneeded",x=>{o(jo(y.result),x.oldVersion,x.newVersion,jo(y.transaction),x)}),t&&y.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),A.then(x=>{f&&x.addEventListener("close",()=>f()),u&&x.addEventListener("versionchange",_=>u(_.oldVersion,_.newVersion,_))}).catch(()=>{}),A}const GA=["get","getKey","getAll","getAllKeys","count"],XA=["put","add","delete","clear"],Id=new Map;function Op(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Id.get(e))return Id.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,u=XA.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(u||GA.includes(t)))return;const f=async function(y,...A){const x=this.transaction(y,u?"readwrite":"readonly");let _=x.store;return o&&(_=_.index(A.shift())),(await Promise.all([_[t](...A),u&&x.done]))[0]};return Id.set(e,f),f}jA(r=>({...r,get:(e,t,o)=>Op(e,t)||r.get(e,t,o),has:(e,t)=>!!Op(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(KA(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function KA(r){return r.getComponent()?.type==="VERSION"}const zd="@firebase/app",Pp="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Sh("@firebase/app"),YA="@firebase/app-compat",QA="@firebase/analytics-compat",ZA="@firebase/analytics",$A="@firebase/app-check-compat",JA="@firebase/app-check",eI="@firebase/auth",tI="@firebase/auth-compat",nI="@firebase/database",rI="@firebase/data-connect",iI="@firebase/database-compat",sI="@firebase/functions",oI="@firebase/functions-compat",aI="@firebase/installations",lI="@firebase/installations-compat",uI="@firebase/messaging",cI="@firebase/messaging-compat",hI="@firebase/performance",fI="@firebase/performance-compat",dI="@firebase/remote-config",gI="@firebase/remote-config-compat",pI="@firebase/storage",mI="@firebase/storage-compat",yI="@firebase/firestore",wI="@firebase/ai",EI="@firebase/firestore-compat",_I="firebase",xI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]",AI={[zd]:"fire-core",[YA]:"fire-core-compat",[ZA]:"fire-analytics",[QA]:"fire-analytics-compat",[JA]:"fire-app-check",[$A]:"fire-app-check-compat",[eI]:"fire-auth",[tI]:"fire-auth-compat",[nI]:"fire-rtdb",[rI]:"fire-data-connect",[iI]:"fire-rtdb-compat",[sI]:"fire-fn",[oI]:"fire-fn-compat",[aI]:"fire-iid",[lI]:"fire-iid-compat",[uI]:"fire-fcm",[cI]:"fire-fcm-compat",[hI]:"fire-perf",[fI]:"fire-perf-compat",[dI]:"fire-rc",[gI]:"fire-rc-compat",[pI]:"fire-gcs",[mI]:"fire-gcs-compat",[yI]:"fire-fst",[EI]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[_I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Map,II=new Map,Hd=new Map;function Dp(r,e){try{r.container.addComponent(e)}catch(t){no.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ts(r){const e=r.name;if(Hd.has(e))return no.debug(`There were multiple attempts to register component ${e}.`),!1;Hd.set(e,r);for(const t of $c.values())Dp(t,r);for(const t of II.values())Dp(t,r);return!0}function Jo(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ki(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ho=new La("app","Firebase",CI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=xI;function Q2(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o={name:jd,automaticDataCollectionEnabled:!0,...e},u=o.name;if(typeof u!="string"||!u)throw Ho.create("bad-app-name",{appName:String(u)});if(t||(t=z2()),!t)throw Ho.create("no-options");const f=$c.get(u);if(f){if(Xo(t,f.options)&&Xo(o,f.config))return f;throw Ho.create("duplicate-app",{appName:u})}const y=new PA(u);for(const x of Hd.values())y.addComponent(x);const A=new vI(t,o,y);return $c.set(u,A),A}function Rh(r=jd){const e=$c.get(r);if(!e&&r===jd&&z2())return Q2();if(!e)throw Ho.create("no-app",{appName:r});return e}function si(r,e,t){let o=AI[r]??r;t&&(o+=`-${t}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const y=[`Unable to register library "${o}" with version "${e}":`];u&&y.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&y.push("and"),f&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),no.warn(y.join(" "));return}ts(new Li(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebase-heartbeat-database",SI=1,mu="firebase-heartbeat-store";let Cd=null;function Z2(){return Cd||(Cd=Y2(TI,SI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ho.create("idb-open",{originalErrorMessage:r.message})})),Cd}async function RI(r){try{const t=(await Z2()).transaction(mu),o=await t.objectStore(mu).get($2(r));return await t.done,o}catch(e){if(e instanceof Bi)no.warn(e.message);else{const t=Ho.create("idb-get",{originalErrorMessage:e?.message});no.warn(t.message)}}}async function kp(r,e){try{const o=(await Z2()).transaction(mu,"readwrite");await o.objectStore(mu).put(e,$2(r)),await o.done}catch(t){if(t instanceof Bi)no.warn(t.message);else{const o=Ho.create("idb-set",{originalErrorMessage:t?.message});no.warn(o.message)}}}function $2(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1024,bI=30;class OI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DI(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:t}),this._heartbeatsCache.heartbeats.length>bI){const u=kI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){no.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mp(),{heartbeatsToSend:t,unsentEntries:o}=PI(this._heartbeatsCache.heartbeats),u=Zc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return no.warn(e),""}}}function Mp(){return new Date().toISOString().substring(0,10)}function PI(r,e=NI){const t=[];let o=r.slice();for(const u of r){const f=t.find(y=>y.agent===u.agent);if(f){if(f.dates.push(u.date),Lp(t)>e){f.dates.pop();break}}else if(t.push({agent:u.agent,dates:[u.date]}),Lp(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class DI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G2()?X2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return kp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return kp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Lp(r){return Zc(JSON.stringify({version:2,heartbeats:r})).length}function kI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(r){ts(new Li("platform-logger",e=>new qA(e),"PRIVATE")),ts(new Li("heartbeat",e=>new OI(e),"PRIVATE")),si(zd,Pp,r),si(zd,Pp,"esm2020"),si("fire-js","")}MI("");var LI="firebase",BI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(LI,BI,"app");const J2="@firebase/installations",x1="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=1e4,ty=`w:${x1}`,ny="FIS_v2",FI="https://firebaseinstallations.googleapis.com/v1",VI=3600*1e3,UI="installations",zI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ta=new La(UI,zI,jI);function ry(r){return r instanceof Bi&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy({projectId:r}){return`${FI}/projects/${r}/installations`}function sy(r){return{token:r.token,requestStatus:2,expiresIn:WI(r.expiresIn),creationTime:Date.now()}}async function oy(r,e){const o=(await e.json()).error;return Ta.create("request-failed",{requestName:r,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function ay({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function HI(r,{refreshToken:e}){const t=ay(r);return t.append("Authorization",GI(e)),t}async function ly(r){const e=await r();return e.status>=500&&e.status<600?r():e}function WI(r){return Number(r.replace("s","000"))}function GI(r){return`${ny} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const o=iy(r),u=ay(r),f=e.getImmediate({optional:!0});if(f){const _=await f.getHeartbeatsHeader();_&&u.append("x-firebase-client",_)}const y={fid:t,authVersion:ny,appId:r.appId,sdkVersion:ty},A={method:"POST",headers:u,body:JSON.stringify(y)},x=await ly(()=>fetch(o,A));if(x.ok){const _=await x.json();return{fid:_.fid||t,registrationStatus:2,refreshToken:_.refreshToken,authToken:sy(_.authToken)}}else throw await oy("Create Installation",x)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=/^[cdef][\w-]{21}$/,Wd="";function YI(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=QI(r);return KI.test(t)?t:Wd}catch{return Wd}}function QI(r){return qI(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;function hy(r,e){const t=Nh(r);fy(t,e),ZI(t,e)}function fy(r,e){const t=cy.get(r);if(t)for(const o of t)o(e)}function ZI(r,e){const t=$I();t&&t.postMessage({key:r,fid:e}),JI()}let xa=null;function $I(){return!xa&&"BroadcastChannel"in self&&(xa=new BroadcastChannel("[Firebase] FID Change"),xa.onmessage=r=>{fy(r.data.key,r.data.fid)}),xa}function JI(){cy.size===0&&xa&&(xa.close(),xa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebase-installations-database",tC=1,Sa="firebase-installations-store";let vd=null;function A1(){return vd||(vd=Y2(eC,tC,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Sa)}}})),vd}async function Jc(r,e){const t=Nh(r),u=(await A1()).transaction(Sa,"readwrite"),f=u.objectStore(Sa),y=await f.get(t);return await f.put(e,t),await u.done,(!y||y.fid!==e.fid)&&hy(r,e.fid),e}async function dy(r){const e=Nh(r),o=(await A1()).transaction(Sa,"readwrite");await o.objectStore(Sa).delete(e),await o.done}async function bh(r,e){const t=Nh(r),u=(await A1()).transaction(Sa,"readwrite"),f=u.objectStore(Sa),y=await f.get(t),A=e(y);return A===void 0?await f.delete(t):await f.put(A,t),await u.done,A&&(!y||y.fid!==A.fid)&&hy(r,A.fid),A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(r){let e;const t=await bh(r.appConfig,o=>{const u=nC(o),f=rC(r,u);return e=f.registrationPromise,f.installationEntry});return t.fid===Wd?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function nC(r){const e=r||{fid:YI(),registrationStatus:0};return gy(e)}function rC(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const u=Promise.reject(Ta.create("app-offline"));return{installationEntry:e,registrationPromise:u}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=iC(r,t);return{installationEntry:t,registrationPromise:o}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sC(r)}:{installationEntry:e}}async function iC(r,e){try{const t=await XI(r,e);return Jc(r.appConfig,t)}catch(t){throw ry(t)&&t.customData.serverCode===409?await dy(r.appConfig):await Jc(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function sC(r){let e=await Bp(r.appConfig);for(;e.registrationStatus===1;)await uy(100),e=await Bp(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:o}=await I1(r);return o||t}return e}function Bp(r){return bh(r,e=>{if(!e)throw Ta.create("installation-not-found");return gy(e)})}function gy(r){return oC(r)?{fid:r.fid,registrationStatus:0}:r}function oC(r){return r.registrationStatus===1&&r.registrationTime+ey<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC({appConfig:r,heartbeatServiceProvider:e},t){const o=lC(r,t),u=HI(r,t),f=e.getImmediate({optional:!0});if(f){const _=await f.getHeartbeatsHeader();_&&u.append("x-firebase-client",_)}const y={installation:{sdkVersion:ty,appId:r.appId}},A={method:"POST",headers:u,body:JSON.stringify(y)},x=await ly(()=>fetch(o,A));if(x.ok){const _=await x.json();return sy(_)}else throw await oy("Generate Auth Token",x)}function lC(r,{fid:e}){return`${iy(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(r,e=!1){let t;const o=await bh(r.appConfig,f=>{if(!py(f))throw Ta.create("not-registered");const y=f.authToken;if(!e&&hC(y))return f;if(y.requestStatus===1)return t=uC(r,e),f;{if(!navigator.onLine)throw Ta.create("app-offline");const A=dC(f);return t=cC(r,A),A}});return t?await t:o.authToken}async function uC(r,e){let t=await Fp(r.appConfig);for(;t.authToken.requestStatus===1;)await uy(100),t=await Fp(r.appConfig);const o=t.authToken;return o.requestStatus===0?C1(r,e):o}function Fp(r){return bh(r,e=>{if(!py(e))throw Ta.create("not-registered");const t=e.authToken;return gC(t)?{...e,authToken:{requestStatus:0}}:e})}async function cC(r,e){try{const t=await aC(r,e),o={...e,authToken:t};return await Jc(r.appConfig,o),t}catch(t){if(ry(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await dy(r.appConfig);else{const o={...e,authToken:{requestStatus:0}};await Jc(r.appConfig,o)}throw t}}function py(r){return r!==void 0&&r.registrationStatus===2}function hC(r){return r.requestStatus===2&&!fC(r)}function fC(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+VI}function dC(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function gC(r){return r.requestStatus===1&&r.requestTime+ey<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(r){const e=r,{installationEntry:t,registrationPromise:o}=await I1(e);return o?o.catch(console.error):C1(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e=!1){const t=r;return await yC(t),(await C1(t,e)).token}async function yC(r){const{registrationPromise:e}=await I1(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(r){if(!r||!r.options)throw Td("App Configuration");if(!r.name)throw Td("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Td(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Td(r){return Ta.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="installations",EC="installations-internal",_C=r=>{const e=r.getProvider("app").getImmediate(),t=wC(e),o=Jo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:o,_delete:()=>Promise.resolve()}},xC=r=>{const e=r.getProvider("app").getImmediate(),t=Jo(e,my).getImmediate();return{getId:()=>pC(t),getToken:u=>mC(t,u)}};function AC(){ts(new Li(my,_C,"PUBLIC")),ts(new Li(EC,xC,"PRIVATE"))}AC();si(J2,x1);si(J2,x1,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="analytics",IC="firebase_id",CC="origin",vC=60*1e3,TC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",v1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new Sh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},wi=new La("analytics","Analytics",SC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r){if(!r.startsWith(v1)){const e=wi.create("invalid-gtag-resource",{gtagURL:r});return oi.warn(e.message),""}return r}function yy(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function NC(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function bC(r,e){const t=NC("firebase-js-sdk-policy",{createScriptURL:RC}),o=document.createElement("script"),u=`${v1}?l=${r}&id=${e}`;o.src=t?t?.createScriptURL(u):u,o.async=!0,document.head.appendChild(o)}function OC(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function PC(r,e,t,o,u,f){const y=o[u];try{if(y)await e[y];else{const x=(await yy(t)).find(_=>_.measurementId===u);x&&await e[x.appId]}}catch(A){oi.error(A)}r("config",u,f)}async function DC(r,e,t,o,u){try{let f=[];if(u&&u.send_to){let y=u.send_to;Array.isArray(y)||(y=[y]);const A=await yy(t);for(const x of y){const _=A.find(N=>N.measurementId===x),v=_&&e[_.appId];if(v)f.push(v);else{f=[];break}}}f.length===0&&(f=Object.values(e)),await Promise.all(f),r("event",o,u||{})}catch(f){oi.error(f)}}function kC(r,e,t,o){async function u(f,...y){try{if(f==="event"){const[A,x]=y;await DC(r,e,t,A,x)}else if(f==="config"){const[A,x]=y;await PC(r,e,t,o,A,x)}else if(f==="consent"){const[A,x]=y;r("consent",A,x)}else if(f==="get"){const[A,x,_]=y;r("get",A,x,_)}else if(f==="set"){const[A]=y;r("set",A)}else r(f,...y)}catch(A){oi.error(A)}}return u}function MC(r,e,t,o,u){let f=function(...y){window[o].push(arguments)};return window[u]&&typeof window[u]=="function"&&(f=window[u]),window[u]=kC(f,r,e,t),{gtagCore:f,wrappedGtag:window[u]}}function LC(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(v1)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=30,FC=1e3;class VC{constructor(e={},t=FC){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wy=new VC;function UC(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function zC(r){const{appId:e,apiKey:t}=r,o={method:"GET",headers:UC(t)},u=TC.replace("{app-id}",e),f=await fetch(u,o);if(f.status!==200&&f.status!==304){let y="";try{const A=await f.json();A.error?.message&&(y=A.error.message)}catch{}throw wi.create("config-fetch-failed",{httpStatus:f.status,responseMessage:y})}return f.json()}async function jC(r,e=wy,t){const{appId:o,apiKey:u,measurementId:f}=r.options;if(!o)throw wi.create("no-app-id");if(!u){if(f)return{measurementId:f,appId:o};throw wi.create("no-api-key")}const y=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},A=new GC;return setTimeout(async()=>{A.abort()},vC),Ey({appId:o,apiKey:u,measurementId:f},y,A,e)}async function Ey(r,{throttleEndTimeMillis:e,backoffCount:t},o,u=wy){const{appId:f,measurementId:y}=r;try{await HC(o,e)}catch(A){if(y)return oi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${y} provided in the "measurementId" field in the local Firebase config. [${A?.message}]`),{appId:f,measurementId:y};throw A}try{const A=await zC(r);return u.deleteThrottleMetadata(f),A}catch(A){const x=A;if(!WC(x)){if(u.deleteThrottleMetadata(f),y)return oi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${y} provided in the "measurementId" field in the local Firebase config. [${x?.message}]`),{appId:f,measurementId:y};throw A}const _=Number(x?.customData?.httpStatus)===503?Rp(t,u.intervalMillis,BC):Rp(t,u.intervalMillis),v={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return u.setThrottleMetadata(f,v),oi.debug(`Calling attemptFetch again in ${_} millis`),Ey(r,v,o,u)}}function HC(r,e){return new Promise((t,o)=>{const u=Math.max(e-Date.now(),0),f=setTimeout(t,u);r.addEventListener(()=>{clearTimeout(f),o(wi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function WC(r){if(!(r instanceof Bi)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class GC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function XC(r,e,t,o,u){if(u&&u.global){r("event",t,o);return}else{const f=await e,y={...o,send_to:f};r("event",t,y)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(){if(G2())try{await X2()}catch(r){return oi.warn(wi.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return oi.warn(wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function KC(r,e,t,o,u,f,y){const A=jC(r);A.then(M=>{t[M.measurementId]=M.appId,r.options.measurementId&&M.measurementId!==r.options.measurementId&&oi.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${M.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(M=>oi.error(M)),e.push(A);const x=qC().then(M=>{if(M)return o.getId()}),[_,v]=await Promise.all([A,x]);LC(f)||bC(f,_.measurementId),u("js",new Date);const N=y?.config??{};return N[CC]="firebase",N.update=!0,v!=null&&(N[IC]=v),u("config",_.measurementId,N),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.app=e}_delete(){return delete su[this.app.options.appId],Promise.resolve()}}let su={},Vp=[];const Up={};let Sd="dataLayer",QC="gtag",zp,_y,jp=!1;function ZC(){const r=[];if(W2()&&r.push("This is a browser extension environment."),yA()||r.push("Cookies are not available."),r.length>0){const e=r.map((o,u)=>`(${u+1}) ${o}`).join(" "),t=wi.create("invalid-analytics-context",{errorInfo:e});oi.warn(t.message)}}function $C(r,e,t){ZC();const o=r.options.appId;if(!o)throw wi.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)oi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw wi.create("no-api-key");if(su[o]!=null)throw wi.create("already-exists",{id:o});if(!jp){OC(Sd);const{wrappedGtag:f,gtagCore:y}=MC(su,Vp,Up,Sd,QC);_y=f,zp=y,jp=!0}return su[o]=KC(r,Vp,Up,e,zp,Sd,t),new YC(r)}function JC(r=Rh()){r=lr(r);const e=Jo(r,eh);return e.isInitialized()?e.getImmediate():ev(r)}function ev(r,e={}){const t=Jo(r,eh);if(t.isInitialized()){const u=t.getImmediate();if(Xo(e,t.getOptions()))return u;throw wi.create("already-initialized")}return t.initialize({options:e})}function tv(r,e,t,o){r=lr(r),XC(_y,su[r.app.options.appId],e,t,o).catch(u=>oi.error(u))}const Hp="@firebase/analytics",Wp="0.10.18";function nv(){ts(new Li(eh,(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),u=e.getProvider("installations-internal").getImmediate();return $C(o,u,t)},"PUBLIC")),ts(new Li("analytics-internal",r,"PRIVATE")),si(Hp,Wp),si(Hp,Wp,"esm2020");function r(e){try{const t=e.getProvider(eh).getImmediate();return{logEvent:(o,u,f)=>tv(t,o,u,f)}}catch(t){throw wi.create("interop-component-reg-failed",{reason:t})}}}nv();function xy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rv=xy,Ay=new La("auth","Firebase",xy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Sh("@firebase/auth");function iv(r,...e){th.logLevel<=Ot.WARN&&th.warn(`Auth (${Ba}): ${r}`,...e)}function Vc(r,...e){th.logLevel<=Ot.ERROR&&th.error(`Auth (${Ba}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(r,...e){throw S1(r,...e)}function es(r,...e){return S1(r,...e)}function T1(r,e,t){const o={...rv(),[e]:t};return new La("auth","Firebase",o).create(e,{appName:r.name})}function Ca(r){return T1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sv(r,e,t){const o=t;if(!(e instanceof o))throw o.name!==e.constructor.name&&Ss(r,"argument-error"),T1(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S1(r,...e){if(typeof r!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(t,...o)}return Ay.create(r,...e)}function ft(r,e,...t){if(!r)throw S1(e,...t)}function eo(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Vc(e),new Error(e)}function ro(r,e){r||eo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(){return typeof self<"u"&&self.location?.href||""}function ov(){return Gp()==="http:"||Gp()==="https:"}function Gp(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ov()||W2()||"connection"in navigator)?navigator.onLine:!0}function lv(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,ro(t>e,"Short delay should be less than long delay!"),this.isMobile=hA()||gA()}get(){return av()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(r,e){ro(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hv=new Ru(3e4,6e4);function N1(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function vl(r,e,t,o,u={}){return Cy(r,u,async()=>{let f={},y={};o&&(e==="GET"?y=o:f={body:JSON.stringify(o)});const A=Su({key:r.config.apiKey,...y}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:x,...f};return dA()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Ma(r.emulatorConfig.host)&&(_.credentials="include"),Iy.fetch()(await vy(r,r.config.apiHost,t,A),_)})}async function Cy(r,e,t){r._canInitEmulator=!1;const o={...uv,...e};try{const u=new dv(r),f=await Promise.race([t(),u.promise]);u.clearNetworkTimeout();const y=await f.json();if("needConfirmation"in y)throw Oc(r,"account-exists-with-different-credential",y);if(f.ok&&!("errorMessage"in y))return y;{const A=f.ok?y.errorMessage:y.error.message,[x,_]=A.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oc(r,"credential-already-in-use",y);if(x==="EMAIL_EXISTS")throw Oc(r,"email-already-in-use",y);if(x==="USER_DISABLED")throw Oc(r,"user-disabled",y);const v=o[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw T1(r,v,_);Ss(r,v)}}catch(u){if(u instanceof Bi)throw u;Ss(r,"network-request-failed",{message:String(u)})}}async function fv(r,e,t,o,u={}){const f=await vl(r,e,t,o,u);return"mfaPendingCredential"in f&&Ss(r,"multi-factor-auth-required",{_serverResponse:f}),f}async function vy(r,e,t,o){const u=`${e}${t}?${o}`,f=r,y=f.config.emulator?R1(r.config,u):`${r.config.apiScheme}://${u}`;return cv.includes(t)&&(await f._persistenceManagerAvailable,f._getPersistenceType()==="COOKIE")?f._getPersistence()._getFinalTarget(y).toString():y}class dv{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(es(this.auth,"network-request-failed")),hv.get())})}}function Oc(r,e,t){const o={appName:r.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const u=es(r,e,o);return u.customData._tokenResponse=t,u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gv(r,e){return vl(r,"POST","/v1/accounts:delete",e)}async function nh(r,e){return vl(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pv(r,e=!1){const t=lr(r),o=await t.getIdToken(e),u=b1(o);ft(u&&u.exp&&u.auth_time&&u.iat,t.auth,"internal-error");const f=typeof u.firebase=="object"?u.firebase:void 0,y=f?.sign_in_provider;return{claims:u,token:o,authTime:ou(Rd(u.auth_time)),issuedAtTime:ou(Rd(u.iat)),expirationTime:ou(Rd(u.exp)),signInProvider:y||null,signInSecondFactor:f?.sign_in_second_factor||null}}function Rd(r){return Number(r)*1e3}function b1(r){const[e,t,o]=r.split(".");if(e===void 0||t===void 0||o===void 0)return Vc("JWT malformed, contained fewer than 3 sections"),null;try{const u=F2(t);return u?JSON.parse(u):(Vc("Failed to decode base64 JWT payload"),null)}catch(u){return Vc("Caught error parsing JWT payload as JSON",u?.toString()),null}}function Xp(r){const e=b1(r);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(r,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof Bi&&mv(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function mv({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(r){const e=r.auth,t=await r.getIdToken(),o=await yu(r,nh(e,{idToken:t}));ft(o?.users.length,e,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=u.providerUserInfo?.length?Ty(u.providerUserInfo):[],y=Ev(r.providerData,f),A=r.isAnonymous,x=!(r.email&&u.passwordHash)&&!y?.length,_=A?x:!1,v={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:y,metadata:new Xd(u.createdAt,u.lastLoginAt),isAnonymous:_};Object.assign(r,v)}async function wv(r){const e=lr(r);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ev(r,e){return[...r.filter(o=>!e.some(u=>u.providerId===o.providerId)),...e]}function Ty(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(r,e){const t=await Cy(r,{},async()=>{const o=Su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:u,apiKey:f}=r.config,y=await vy(r,u,"/v1/token",`key=${f}`),A=await r._getAdditionalHeaders();A["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:A,body:o};return r.emulatorConfig&&Ma(r.emulatorConfig.host)&&(x.credentials="include"),Iy.fetch()(y,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xv(r,e){return vl(r,"POST","/v2/accounts:revokeToken",N1(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const t=Xp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:u,expiresIn:f}=await _v(e,t);this.updateTokensAndExpiration(o,u,Number(f))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:u,expirationTime:f}=t,y=new dl;return o&&(ft(typeof o=="string","internal-error",{appName:e}),y.refreshToken=o),u&&(ft(typeof u=="string","internal-error",{appName:e}),y.accessToken=u),f&&(ft(typeof f=="number","internal-error",{appName:e}),y.expirationTime=f),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(r,e){ft(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $i{constructor({uid:e,auth:t,stsTokenManager:o,...u}){this.providerId="firebase",this.proactiveRefresh=new yv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Xd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await yu(this,this.stsTokenManager.getToken(this.auth,e));return ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pv(this,e)}reload(){return wv(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await rh(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ki(this.auth.app))return Promise.reject(Ca(this.auth));const e=await this.getIdToken();return await yu(this,gv(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,u=t.email??void 0,f=t.phoneNumber??void 0,y=t.photoURL??void 0,A=t.tenantId??void 0,x=t._redirectEventId??void 0,_=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:N,emailVerified:M,isAnonymous:W,providerData:ee,stsTokenManager:Y}=t;ft(N&&Y,e,"internal-error");const G=dl.fromJSON(this.name,Y);ft(typeof N=="string",e,"internal-error"),ko(o,e.name),ko(u,e.name),ft(typeof M=="boolean",e,"internal-error"),ft(typeof W=="boolean",e,"internal-error"),ko(f,e.name),ko(y,e.name),ko(A,e.name),ko(x,e.name),ko(_,e.name),ko(v,e.name);const Ie=new $i({uid:N,auth:e,email:u,emailVerified:M,displayName:o,isAnonymous:W,photoURL:y,phoneNumber:f,tenantId:A,stsTokenManager:G,createdAt:_,lastLoginAt:v});return ee&&Array.isArray(ee)&&(Ie.providerData=ee.map(ge=>({...ge}))),x&&(Ie._redirectEventId=x),Ie}static async _fromIdTokenResponse(e,t,o=!1){const u=new dl;u.updateFromServerResponse(t);const f=new $i({uid:t.localId,auth:e,stsTokenManager:u,isAnonymous:o});return await rh(f),f}static async _fromGetAccountInfoResponse(e,t,o){const u=t.users[0];ft(u.localId!==void 0,"internal-error");const f=u.providerUserInfo!==void 0?Ty(u.providerUserInfo):[],y=!(u.email&&u.passwordHash)&&!f?.length,A=new dl;A.updateFromIdToken(o);const x=new $i({uid:u.localId,auth:e,stsTokenManager:A,isAnonymous:y}),_={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:f,metadata:new Xd(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!f?.length};return Object.assign(x,_),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=new Map;function to(r){ro(r instanceof Function,"Expected a class definition");let e=qp.get(r);return e?(ro(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,qp.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sy.type="NONE";const Kp=Sy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(r,e,t){return`firebase:${r}:${e}:${t}`}class gl{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:u,name:f}=this.auth;this.fullUserKey=Uc(this.userKey,u.apiKey,f),this.fullPersistenceKey=Uc("persistence",u.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nh(this.auth,{idToken:e}).catch(()=>{});return t?$i._fromGetAccountInfoResponse(this.auth,t,e):null}return $i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new gl(to(Kp),e,o);const u=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let f=u[0]||to(Kp);const y=Uc(o,e.config.apiKey,e.name);let A=null;for(const _ of t)try{const v=await _._get(y);if(v){let N;if(typeof v=="string"){const M=await nh(e,{idToken:v}).catch(()=>{});if(!M)break;N=await $i._fromGetAccountInfoResponse(e,M,v)}else N=$i._fromJSON(e,v);_!==f&&(A=N),f=_;break}}catch{}const x=u.filter(_=>_._shouldAllowMigration);return!f._shouldAllowMigration||!x.length?new gl(f,e,o):(f=x[0],A&&await f._set(y,A.toJSON()),await Promise.all(t.map(async _=>{if(_!==f)try{await _._remove(y)}catch{}})),new gl(f,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Oy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ry(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dy(e))return"Blackberry";if(ky(e))return"Webos";if(Ny(e))return"Safari";if((e.includes("chrome/")||by(e))&&!e.includes("edge/"))return"Chrome";if(Py(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(t);if(o?.length===2)return o[1]}return"Other"}function Ry(r=kr()){return/firefox\//i.test(r)}function Ny(r=kr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function by(r=kr()){return/crios\//i.test(r)}function Oy(r=kr()){return/iemobile/i.test(r)}function Py(r=kr()){return/android/i.test(r)}function Dy(r=kr()){return/blackberry/i.test(r)}function ky(r=kr()){return/webos/i.test(r)}function O1(r=kr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Av(r=kr()){return O1(r)&&!!window.navigator?.standalone}function Iv(){return pA()&&document.documentMode===10}function My(r=kr()){return O1(r)||Py(r)||ky(r)||Dy(r)||/windows phone/i.test(r)||Oy(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(r,e=[]){let t;switch(r){case"Browser":t=Yp(kr());break;case"Worker":t=`${Yp(kr())}-${r}`;break;default:t=r}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=f=>new Promise((y,A)=>{try{const x=e(f);y(x)}catch(x){A(x)}});o.onAbort=t,this.queue.push(o);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const u of t)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(r,e={}){return vl(r,"GET","/v2/passwordPolicy",N1(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=6;class Sv{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Tv,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),u&&(t.meetsMaxPasswordLength=e.length<=u)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let u=0;u<e.length;u++)o=e.charAt(u),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,u,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t,o,u){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qp(this),this.idTokenSubscription=new Qp(this),this.beforeStateQueue=new Cv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ay,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=u.sdkClientVersion,this._persistenceManagerAvailable=new Promise(f=>this._resolvePersistenceManagerAvailable=f)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=to(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nh(this,{idToken:e}),o=await $i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ki(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(y,y))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=this.redirectUser?._redirectEventId,y=o?._redirectEventId,A=await this.tryRedirectSignIn(e);(!f||f===y)&&A?.user&&(o=A.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lv()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ki(this.app))return Promise.reject(Ca(this));const t=e?lr(e):null;return t&&ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ki(this.app)?Promise.reject(Ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ki(this.app)?Promise.reject(Ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(to(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vv(this),t=new Sv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new La("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await xv(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&to(e)||this._popupRedirectResolver;ft(t,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[to(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,u){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let y=!1;const A=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(A,this,"internal-error"),A.then(()=>{y||f(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,o,u);return()=>{y=!0,x()}}else{const x=e.addObserver(t);return()=>{y=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ly(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&iv(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Oh(r){return lr(r)}class Qp{constructor(e){this.auth=e,this.observer=null,this.addObserver=AA(t=>this.observer=t)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nv(r){P1=r}function bv(r){return P1.loadJS(r)}function Ov(){return P1.gapiScript}function Pv(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(r,e){const t=Jo(r,"auth");if(t.isInitialized()){const u=t.getImmediate(),f=t.getOptions();if(Xo(f,e??{}))return u;Ss(u,"already-initialized")}return t.initialize({options:e})}function kv(r,e){const t=e?.persistence||[],o=(Array.isArray(t)?t:[t]).map(to);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(o,e?.popupRedirectResolver)}function Mv(r,e,t){const o=Oh(r);ft(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const u=!1,f=By(e),{host:y,port:A}=Lv(e),x=A===null?"":`:${A}`,_={url:`${f}//${y}${x}/`},v=Object.freeze({host:y,port:A,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:u})});if(!o._canInitEmulator){ft(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),ft(Xo(_,o.config.emulator)&&Xo(v,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=_,o.emulatorConfig=v,o.settings.appVerificationDisabledForTesting=!0,Ma(y)?(w1(`${f}//${y}${x}`),E1("Auth",!0)):Bv()}function By(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Lv(r){const e=By(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(o);if(u){const f=u[1];return{host:f,port:Zp(o.substr(f.length+1))}}else{const[f,y]=o.split(":");return{host:f,port:Zp(y)}}}function Zp(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Bv(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return eo("not implemented")}_getIdTokenResponse(e){return eo("not implemented")}_linkToIdToken(e,t){return eo("not implemented")}_getReauthenticationResolver(e){return eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(r,e){return fv(r,"POST","/v1/accounts:signInWithIdp",N1(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="http://localhost";class Ra extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ss("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:u,...f}=t;if(!o||!u)return null;const y=new Ra(o,u);return y.idToken=f.idToken||void 0,y.accessToken=f.accessToken||void 0,y.secret=f.secret,y.nonce=f.nonce,y.pendingToken=f.pendingToken||null,y}_getIdTokenResponse(e){const t=this.buildRequest();return pl(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,pl(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pl(e,t)}buildRequest(){const e={requestUri:Fv,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Su(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends D1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Nu{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lo.credential(e.oauthAccessToken)}catch{return null}}}Lo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return Js.credential(t,o)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Nu{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.GITHUB_SIGN_IN_METHOD="github.com";Bo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Nu{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return Fo.credential(t,o)}catch{return null}}}Fo.TWITTER_SIGN_IN_METHOD="twitter.com";Fo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,u=!1){const f=await $i._fromIdTokenResponse(e,o,u),y=$p(o);return new yl({user:f,providerId:y,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const u=$p(o);return new yl({user:e,providerId:u,_tokenResponse:o,operationType:t})}}function $p(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Bi{constructor(e,t,o,u){super(t.code,t.message),this.operationType=o,this.user=u,Object.setPrototypeOf(this,ih.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,u){return new ih(e,t,o,u)}}function Vy(r,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?ih._fromErrorAndOperation(r,f,e,o):f})}async function Vv(r,e,t=!1){const o=await yu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return yl._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uv(r,e,t=!1){const{auth:o}=r;if(ki(o.app))return Promise.reject(Ca(o));const u="reauthenticate";try{const f=await yu(r,Vy(o,u,e,r),t);ft(f.idToken,o,"internal-error");const y=b1(f.idToken);ft(y,o,"internal-error");const{sub:A}=y;return ft(r.uid===A,o,"user-mismatch"),yl._forOperation(r,u,f)}catch(f){throw f?.code==="auth/user-not-found"&&Ss(o,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(r,e,t=!1){if(ki(r.app))return Promise.reject(Ca(r));const o="signIn",u=await Vy(r,o,e),f=await yl._fromIdTokenResponse(r,o,u);return t||await r._updateCurrentUser(f.user),f}function jv(r,e,t,o){return lr(r).onIdTokenChanged(e,t,o)}function Hv(r,e,t){return lr(r).beforeAuthStateChanged(e,t)}function Uy(r,e,t,o){return lr(r).onAuthStateChanged(e,t,o)}function Wv(r){return lr(r).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=1e3,Xv=10;class jy extends zy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=My(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),u=this.localCache[t];o!==u&&e(t,u,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((y,A,x)=>{this.notifyListeners(y,x)});return}const o=e.key;t?this.detachListener():this.stopPolling();const u=()=>{const y=this.storage.getItem(o);!t&&this.localCache[o]===y||this.notifyListeners(o,y)},f=this.storage.getItem(o);Iv()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(u,Xv):u()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const u of Array.from(o))u(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},Gv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jy.type="LOCAL";const qv=jy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends zy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hy.type="SESSION";const Wy=Hy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(u=>u.isListeningto(e));if(t)return t;const o=new Ph(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:u,data:f}=t.data,y=this.handlersMap[u];if(!y?.size)return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:u});const A=Array.from(y).map(async _=>_(t.origin,f)),x=await Kv(A);t.ports[0].postMessage({status:"done",eventId:o,eventType:u,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(r="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let f,y;return new Promise((A,x)=>{const _=k1("",20);u.port1.start();const v=setTimeout(()=>{x(new Error("unsupported_event"))},o);y={messageChannel:u,onMessage(N){const M=N;if(M.data.eventId===_)switch(M.data.status){case"ack":clearTimeout(v),f=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),A(M.data.response);break;default:clearTimeout(v),clearTimeout(f),x(new Error("invalid_response"));break}}},this.handlers.add(y),u.port1.addEventListener("message",y.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[u.port2])}).finally(()=>{y&&this.removeMessageHandler(y)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function Qv(r){xs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function Zv(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $v(){return navigator?.serviceWorker?.controller||null}function Jv(){return Gy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="firebaseLocalStorageDb",eT=1,oh="firebaseLocalStorage",qy="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dh(r,e){return r.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function tT(){const r=indexedDB.deleteDatabase(Xy);return new bu(r).toPromise()}function qd(){const r=indexedDB.open(Xy,eT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(oh,{keyPath:qy})}catch(u){t(u)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(oh)?e(o):(o.close(),await tT(),e(await qd()))})})}async function Jp(r,e,t){const o=Dh(r,!0).put({[qy]:e,value:t});return new bu(o).toPromise()}async function nT(r,e){const t=Dh(r,!1).get(e),o=await new bu(t).toPromise();return o===void 0?null:o.value}function em(r,e){const t=Dh(r,!0).delete(e);return new bu(t).toPromise()}const rT=800,iT=3;class Ky{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>iT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(Jv()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Zv(),!this.activeServiceWorker)return;this.sender=new Yv(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$v()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qd();return await Jp(e,sh,"1"),await em(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>Jp(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>nT(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>em(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(u=>{const f=Dh(u,!1).getAll();return new bu(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:u,value:f}of e)o.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(f)&&(this.notifyListeners(u,f),t.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!o.has(u)&&(this.notifyListeners(u,null),t.push(u));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const u of Array.from(o))u(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ky.type="LOCAL";const sT=Ky;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(r,e){return e?to(e):(ft(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oT(r){return zv(r.auth,new M1(r),r.bypassAuthState)}function aT(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Uv(t,new M1(r),r.bypassAuthState)}async function lT(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Vv(t,new M1(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,t,o,u,f=!1){this.auth=e,this.resolver=o,this.user=u,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:u,tenantId:f,error:y,type:A}=e;if(y){this.reject(y);return}const x={auth:this.auth,requestUri:t,sessionId:o,tenantId:f||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(A)(x))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oT;case"linkViaPopup":case"linkViaRedirect":return lT;case"reauthViaPopup":case"reauthViaRedirect":return aT;default:Ss(this.auth,"internal-error")}}resolve(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=new Ru(2e3,1e4);async function cT(r,e,t){if(ki(r.app))return Promise.reject(es(r,"operation-not-supported-in-this-environment"));const o=Oh(r);sv(r,e,D1);const u=Yy(o,t);return new Aa(o,"signInViaPopup",e,u).executeNotNull()}class Aa extends Qy{constructor(e,t,o,u,f){super(e,t,u,f),this.provider=o,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){ro(this.filter.length===1,"Popup operations only handle one event");const e=k1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uT.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="pendingRedirect",zc=new Map;class fT extends Qy{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=zc.get(this.auth._key());if(!e){try{const o=await dT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}zc.set(this.auth._key(),e)}return this.bypassAuthState||zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dT(r,e){const t=mT(e),o=pT(r);if(!await o._isAvailable())return!1;const u=await o._get(t)==="true";return await o._remove(t),u}function gT(r,e){zc.set(r._key(),e)}function pT(r){return to(r._redirectPersistence)}function mT(r){return Uc(hT,r.config.apiKey,r.name)}async function yT(r,e,t=!1){if(ki(r.app))return Promise.reject(Ca(r));const o=Oh(r),u=Yy(o,e),y=await new fT(o,u,t).execute();return y&&!t&&(delete y.user._redirectEventId,await o._persistUserIfCurrent(y.user),await o._setRedirectUser(null,e)),y}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=600*1e3;class ET{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_T(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zy(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";t.onError(es(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wT&&this.cachedEventUids.clear(),this.cachedEventUids.has(tm(e))}saveEventToCache(e){this.cachedEventUids.add(tm(e)),this.lastProcessedEventTime=Date.now()}}function tm(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Zy({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function _T(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zy(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(r,e={}){return vl(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IT=/^https?/;async function CT(r){if(r.config.emulator)return;const{authorizedDomains:e}=await xT(r);for(const t of e)try{if(vT(t))return}catch{}Ss(r,"unauthorized-domain")}function vT(r){const e=Gd(),{protocol:t,hostname:o}=new URL(e);if(r.startsWith("chrome-extension://")){const y=new URL(r);return y.hostname===""&&o===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&y.hostname===o}if(!IT.test(t))return!1;if(AT.test(r))return o===r;const u=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new Ru(3e4,6e4);function nm(){const r=xs().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function ST(r){return new Promise((e,t)=>{function o(){nm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nm(),t(es(r,"network-request-failed"))},timeout:TT.get()})}if(xs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xs().gapi?.load)o();else{const u=Pv("iframefcb");return xs()[u]=()=>{gapi.load?o():t(es(r,"network-request-failed"))},bv(`${Ov()}?onload=${u}`).catch(f=>t(f))}}).catch(e=>{throw jc=null,e})}let jc=null;function RT(r){return jc=jc||ST(r),jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Ru(5e3,15e3),bT="__/auth/iframe",OT="emulator/auth/iframe",PT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kT(r){const e=r.config;ft(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?R1(e,OT):`https://${r.config.authDomain}/${bT}`,o={apiKey:e.apiKey,appName:r.name,v:Ba},u=DT.get(r.config.apiHost);u&&(o.eid=u);const f=r._getFrameworks();return f.length&&(o.fw=f.join(",")),`${t}?${Su(o).slice(1)}`}async function MT(r){const e=await RT(r),t=xs().gapi;return ft(t,r,"internal-error"),e.open({where:document.body,url:kT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PT,dontclear:!0},o=>new Promise(async(u,f)=>{await o.restyle({setHideOnLeave:!1});const y=es(r,"network-request-failed"),A=xs().setTimeout(()=>{f(y)},NT.get());function x(){xs().clearTimeout(A),u(o)}o.ping(x).then(x,()=>{f(y)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BT=500,FT=600,VT="_blank",UT="http://localhost";class rm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zT(r,e,t,o=BT,u=FT){const f=Math.max((window.screen.availHeight-u)/2,0).toString(),y=Math.max((window.screen.availWidth-o)/2,0).toString();let A="";const x={...LT,width:o.toString(),height:u.toString(),top:f,left:y},_=kr().toLowerCase();t&&(A=by(_)?VT:t),Ry(_)&&(e=e||UT,x.scrollbars="yes");const v=Object.entries(x).reduce((M,[W,ee])=>`${M}${W}=${ee},`,"");if(Av(_)&&A!=="_self")return jT(e||"",A),new rm(null);const N=window.open(e||"",A,v);ft(N,r,"popup-blocked");try{N.focus()}catch{}return new rm(N)}function jT(r,e){const t=document.createElement("a");t.href=r,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="__/auth/handler",WT="emulator/auth/handler",GT=encodeURIComponent("fac");async function im(r,e,t,o,u,f){ft(r.config.authDomain,r,"auth-domain-config-required"),ft(r.config.apiKey,r,"invalid-api-key");const y={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:o,v:Ba,eventId:u};if(e instanceof D1){e.setDefaultLanguage(r.languageCode),y.providerId=e.providerId||"",xA(e.getCustomParameters())||(y.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,N]of Object.entries({}))y[v]=N}if(e instanceof Nu){const v=e.getScopes().filter(N=>N!=="");v.length>0&&(y.scopes=v.join(","))}r.tenantId&&(y.tid=r.tenantId);const A=y;for(const v of Object.keys(A))A[v]===void 0&&delete A[v];const x=await r._getAppCheckToken(),_=x?`#${GT}=${encodeURIComponent(x)}`:"";return`${XT(r)}?${Su(A).slice(1)}${_}`}function XT({config:r}){return r.emulator?R1(r,WT):`https://${r.authDomain}/${HT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class qT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wy,this._completeRedirectFn=yT,this._overrideRedirectResult=gT}async _openPopup(e,t,o,u){ro(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const f=await im(e,t,o,Gd(),u);return zT(e,f,k1())}async _openRedirect(e,t,o,u){await this._originValidation(e);const f=await im(e,t,o,Gd(),u);return Qv(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:u,promise:f}=this.eventManagers[t];return u?Promise.resolve(u):(ro(f,"If manager is not set, promise should be"),f)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await MT(e),o=new ET(e);return t.register("authEvent",u=>(ft(u?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nd,{type:Nd},u=>{const f=u?.[0]?.[Nd];f!==void 0&&t(!!f),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return My()||Ny()||O1()}}const KT=qT;var sm="@firebase/auth",om="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZT(r){ts(new Li("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),u=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:y,authDomain:A}=o.options;ft(y&&!y.includes(":"),"invalid-api-key",{appName:o.name});const x={apiKey:y,authDomain:A,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ly(r)},_=new Rv(o,u,f,x);return kv(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),ts(new Li("auth-internal",e=>{const t=Oh(e.getProvider("auth").getImmediate());return(o=>new YT(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(sm,om,QT(r)),si(sm,om,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=300,JT=j2("authIdTokenMaxAge")||$T;let am=null;const e3=r=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>JT)return;const u=t?.token;am!==u&&(am=u,await fetch(r,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function t3(r=Rh()){const e=Jo(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Dv(r,{popupRedirectResolver:KT,persistence:[sT,qv,Wy]}),o=j2("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(o,location.origin);if(location.origin===f.origin){const y=e3(f.toString());Hv(t,y,()=>y(t.currentUser)),jv(t,A=>y(A))}}const u=V2("auth");return u&&Mv(t,`http://${u}`),t}function n3(){return document.getElementsByTagName("head")?.[0]??document}Nv({loadJS(r){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=e,o.onerror=u=>{const f=es("internal-error");f.customData=u,t(f)},o.type="text/javascript",o.charset="UTF-8",n3().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZT("Browser");var lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wo,$y;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,U){function B(){}B.prototype=U.prototype,V.F=U.prototype,V.prototype=new B,V.prototype.constructor=V,V.D=function($,X,q){for(var j=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)j[Je-2]=arguments[Je];return U.prototype[X].apply($,j)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(V,U,B){B||(B=0);const $=Array(16);if(typeof U=="string")for(var X=0;X<16;++X)$[X]=U.charCodeAt(B++)|U.charCodeAt(B++)<<8|U.charCodeAt(B++)<<16|U.charCodeAt(B++)<<24;else for(X=0;X<16;++X)$[X]=U[B++]|U[B++]<<8|U[B++]<<16|U[B++]<<24;U=V.g[0],B=V.g[1],X=V.g[2];let q=V.g[3],j;j=U+(q^B&(X^q))+$[0]+3614090360&4294967295,U=B+(j<<7&4294967295|j>>>25),j=q+(X^U&(B^X))+$[1]+3905402710&4294967295,q=U+(j<<12&4294967295|j>>>20),j=X+(B^q&(U^B))+$[2]+606105819&4294967295,X=q+(j<<17&4294967295|j>>>15),j=B+(U^X&(q^U))+$[3]+3250441966&4294967295,B=X+(j<<22&4294967295|j>>>10),j=U+(q^B&(X^q))+$[4]+4118548399&4294967295,U=B+(j<<7&4294967295|j>>>25),j=q+(X^U&(B^X))+$[5]+1200080426&4294967295,q=U+(j<<12&4294967295|j>>>20),j=X+(B^q&(U^B))+$[6]+2821735955&4294967295,X=q+(j<<17&4294967295|j>>>15),j=B+(U^X&(q^U))+$[7]+4249261313&4294967295,B=X+(j<<22&4294967295|j>>>10),j=U+(q^B&(X^q))+$[8]+1770035416&4294967295,U=B+(j<<7&4294967295|j>>>25),j=q+(X^U&(B^X))+$[9]+2336552879&4294967295,q=U+(j<<12&4294967295|j>>>20),j=X+(B^q&(U^B))+$[10]+4294925233&4294967295,X=q+(j<<17&4294967295|j>>>15),j=B+(U^X&(q^U))+$[11]+2304563134&4294967295,B=X+(j<<22&4294967295|j>>>10),j=U+(q^B&(X^q))+$[12]+1804603682&4294967295,U=B+(j<<7&4294967295|j>>>25),j=q+(X^U&(B^X))+$[13]+4254626195&4294967295,q=U+(j<<12&4294967295|j>>>20),j=X+(B^q&(U^B))+$[14]+2792965006&4294967295,X=q+(j<<17&4294967295|j>>>15),j=B+(U^X&(q^U))+$[15]+1236535329&4294967295,B=X+(j<<22&4294967295|j>>>10),j=U+(X^q&(B^X))+$[1]+4129170786&4294967295,U=B+(j<<5&4294967295|j>>>27),j=q+(B^X&(U^B))+$[6]+3225465664&4294967295,q=U+(j<<9&4294967295|j>>>23),j=X+(U^B&(q^U))+$[11]+643717713&4294967295,X=q+(j<<14&4294967295|j>>>18),j=B+(q^U&(X^q))+$[0]+3921069994&4294967295,B=X+(j<<20&4294967295|j>>>12),j=U+(X^q&(B^X))+$[5]+3593408605&4294967295,U=B+(j<<5&4294967295|j>>>27),j=q+(B^X&(U^B))+$[10]+38016083&4294967295,q=U+(j<<9&4294967295|j>>>23),j=X+(U^B&(q^U))+$[15]+3634488961&4294967295,X=q+(j<<14&4294967295|j>>>18),j=B+(q^U&(X^q))+$[4]+3889429448&4294967295,B=X+(j<<20&4294967295|j>>>12),j=U+(X^q&(B^X))+$[9]+568446438&4294967295,U=B+(j<<5&4294967295|j>>>27),j=q+(B^X&(U^B))+$[14]+3275163606&4294967295,q=U+(j<<9&4294967295|j>>>23),j=X+(U^B&(q^U))+$[3]+4107603335&4294967295,X=q+(j<<14&4294967295|j>>>18),j=B+(q^U&(X^q))+$[8]+1163531501&4294967295,B=X+(j<<20&4294967295|j>>>12),j=U+(X^q&(B^X))+$[13]+2850285829&4294967295,U=B+(j<<5&4294967295|j>>>27),j=q+(B^X&(U^B))+$[2]+4243563512&4294967295,q=U+(j<<9&4294967295|j>>>23),j=X+(U^B&(q^U))+$[7]+1735328473&4294967295,X=q+(j<<14&4294967295|j>>>18),j=B+(q^U&(X^q))+$[12]+2368359562&4294967295,B=X+(j<<20&4294967295|j>>>12),j=U+(B^X^q)+$[5]+4294588738&4294967295,U=B+(j<<4&4294967295|j>>>28),j=q+(U^B^X)+$[8]+2272392833&4294967295,q=U+(j<<11&4294967295|j>>>21),j=X+(q^U^B)+$[11]+1839030562&4294967295,X=q+(j<<16&4294967295|j>>>16),j=B+(X^q^U)+$[14]+4259657740&4294967295,B=X+(j<<23&4294967295|j>>>9),j=U+(B^X^q)+$[1]+2763975236&4294967295,U=B+(j<<4&4294967295|j>>>28),j=q+(U^B^X)+$[4]+1272893353&4294967295,q=U+(j<<11&4294967295|j>>>21),j=X+(q^U^B)+$[7]+4139469664&4294967295,X=q+(j<<16&4294967295|j>>>16),j=B+(X^q^U)+$[10]+3200236656&4294967295,B=X+(j<<23&4294967295|j>>>9),j=U+(B^X^q)+$[13]+681279174&4294967295,U=B+(j<<4&4294967295|j>>>28),j=q+(U^B^X)+$[0]+3936430074&4294967295,q=U+(j<<11&4294967295|j>>>21),j=X+(q^U^B)+$[3]+3572445317&4294967295,X=q+(j<<16&4294967295|j>>>16),j=B+(X^q^U)+$[6]+76029189&4294967295,B=X+(j<<23&4294967295|j>>>9),j=U+(B^X^q)+$[9]+3654602809&4294967295,U=B+(j<<4&4294967295|j>>>28),j=q+(U^B^X)+$[12]+3873151461&4294967295,q=U+(j<<11&4294967295|j>>>21),j=X+(q^U^B)+$[15]+530742520&4294967295,X=q+(j<<16&4294967295|j>>>16),j=B+(X^q^U)+$[2]+3299628645&4294967295,B=X+(j<<23&4294967295|j>>>9),j=U+(X^(B|~q))+$[0]+4096336452&4294967295,U=B+(j<<6&4294967295|j>>>26),j=q+(B^(U|~X))+$[7]+1126891415&4294967295,q=U+(j<<10&4294967295|j>>>22),j=X+(U^(q|~B))+$[14]+2878612391&4294967295,X=q+(j<<15&4294967295|j>>>17),j=B+(q^(X|~U))+$[5]+4237533241&4294967295,B=X+(j<<21&4294967295|j>>>11),j=U+(X^(B|~q))+$[12]+1700485571&4294967295,U=B+(j<<6&4294967295|j>>>26),j=q+(B^(U|~X))+$[3]+2399980690&4294967295,q=U+(j<<10&4294967295|j>>>22),j=X+(U^(q|~B))+$[10]+4293915773&4294967295,X=q+(j<<15&4294967295|j>>>17),j=B+(q^(X|~U))+$[1]+2240044497&4294967295,B=X+(j<<21&4294967295|j>>>11),j=U+(X^(B|~q))+$[8]+1873313359&4294967295,U=B+(j<<6&4294967295|j>>>26),j=q+(B^(U|~X))+$[15]+4264355552&4294967295,q=U+(j<<10&4294967295|j>>>22),j=X+(U^(q|~B))+$[6]+2734768916&4294967295,X=q+(j<<15&4294967295|j>>>17),j=B+(q^(X|~U))+$[13]+1309151649&4294967295,B=X+(j<<21&4294967295|j>>>11),j=U+(X^(B|~q))+$[4]+4149444226&4294967295,U=B+(j<<6&4294967295|j>>>26),j=q+(B^(U|~X))+$[11]+3174756917&4294967295,q=U+(j<<10&4294967295|j>>>22),j=X+(U^(q|~B))+$[2]+718787259&4294967295,X=q+(j<<15&4294967295|j>>>17),j=B+(q^(X|~U))+$[9]+3951481745&4294967295,V.g[0]=V.g[0]+U&4294967295,V.g[1]=V.g[1]+(X+(j<<21&4294967295|j>>>11))&4294967295,V.g[2]=V.g[2]+X&4294967295,V.g[3]=V.g[3]+q&4294967295}o.prototype.v=function(V,U){U===void 0&&(U=V.length);const B=U-this.blockSize,$=this.C;let X=this.h,q=0;for(;q<U;){if(X==0)for(;q<=B;)u(this,V,q),q+=this.blockSize;if(typeof V=="string"){for(;q<U;)if($[X++]=V.charCodeAt(q++),X==this.blockSize){u(this,$),X=0;break}}else for(;q<U;)if($[X++]=V[q++],X==this.blockSize){u(this,$),X=0;break}}this.h=X,this.o+=U},o.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var U=1;U<V.length-8;++U)V[U]=0;U=this.o*8;for(var B=V.length-8;B<V.length;++B)V[B]=U&255,U/=256;for(this.v(V),V=Array(16),U=0,B=0;B<4;++B)for(let $=0;$<32;$+=8)V[U++]=this.g[B]>>>$&255;return V};function f(V,U){var B=A;return Object.prototype.hasOwnProperty.call(B,V)?B[V]:B[V]=U(V)}function y(V,U){this.h=U;const B=[];let $=!0;for(let X=V.length-1;X>=0;X--){const q=V[X]|0;$&&q==U||(B[X]=q,$=!1)}this.g=B}var A={};function x(V){return-128<=V&&V<128?f(V,function(U){return new y([U|0],U<0?-1:0)}):new y([V|0],V<0?-1:0)}function _(V){if(isNaN(V)||!isFinite(V))return N;if(V<0)return G(_(-V));const U=[];let B=1;for(let $=0;V>=B;$++)U[$]=V/B|0,B*=4294967296;return new y(U,0)}function v(V,U){if(V.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(V.charAt(0)=="-")return G(v(V.substring(1),U));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=_(Math.pow(U,8));let $=N;for(let q=0;q<V.length;q+=8){var X=Math.min(8,V.length-q);const j=parseInt(V.substring(q,q+X),U);X<8?(X=_(Math.pow(U,X)),$=$.j(X).add(_(j))):($=$.j(B),$=$.add(_(j)))}return $}var N=x(0),M=x(1),W=x(16777216);r=y.prototype,r.m=function(){if(Y(this))return-G(this).m();let V=0,U=1;for(let B=0;B<this.g.length;B++){const $=this.i(B);V+=($>=0?$:4294967296+$)*U,U*=4294967296}return V},r.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(ee(this))return"0";if(Y(this))return"-"+G(this).toString(V);const U=_(Math.pow(V,6));var B=this;let $="";for(;;){const X=we(B,U).g;B=Ie(B,X.j(U));let q=((B.g.length>0?B.g[0]:B.h)>>>0).toString(V);if(B=X,ee(B))return q+$;for(;q.length<6;)q="0"+q;$=q+$}},r.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function ee(V){if(V.h!=0)return!1;for(let U=0;U<V.g.length;U++)if(V.g[U]!=0)return!1;return!0}function Y(V){return V.h==-1}r.l=function(V){return V=Ie(this,V),Y(V)?-1:ee(V)?0:1};function G(V){const U=V.g.length,B=[];for(let $=0;$<U;$++)B[$]=~V.g[$];return new y(B,~V.h).add(M)}r.abs=function(){return Y(this)?G(this):this},r.add=function(V){const U=Math.max(this.g.length,V.g.length),B=[];let $=0;for(let X=0;X<=U;X++){let q=$+(this.i(X)&65535)+(V.i(X)&65535),j=(q>>>16)+(this.i(X)>>>16)+(V.i(X)>>>16);$=j>>>16,q&=65535,j&=65535,B[X]=j<<16|q}return new y(B,B[B.length-1]&-2147483648?-1:0)};function Ie(V,U){return V.add(G(U))}r.j=function(V){if(ee(this)||ee(V))return N;if(Y(this))return Y(V)?G(this).j(G(V)):G(G(this).j(V));if(Y(V))return G(this.j(G(V)));if(this.l(W)<0&&V.l(W)<0)return _(this.m()*V.m());const U=this.g.length+V.g.length,B=[];for(var $=0;$<2*U;$++)B[$]=0;for($=0;$<this.g.length;$++)for(let X=0;X<V.g.length;X++){const q=this.i($)>>>16,j=this.i($)&65535,Je=V.i(X)>>>16,le=V.i(X)&65535;B[2*$+2*X]+=j*le,ge(B,2*$+2*X),B[2*$+2*X+1]+=q*le,ge(B,2*$+2*X+1),B[2*$+2*X+1]+=j*Je,ge(B,2*$+2*X+1),B[2*$+2*X+2]+=q*Je,ge(B,2*$+2*X+2)}for(V=0;V<U;V++)B[V]=B[2*V+1]<<16|B[2*V];for(V=U;V<2*U;V++)B[V]=0;return new y(B,0)};function ge(V,U){for(;(V[U]&65535)!=V[U];)V[U+1]+=V[U]>>>16,V[U]&=65535,U++}function ie(V,U){this.g=V,this.h=U}function we(V,U){if(ee(U))throw Error("division by zero");if(ee(V))return new ie(N,N);if(Y(V))return U=we(G(V),U),new ie(G(U.g),G(U.h));if(Y(U))return U=we(V,G(U)),new ie(G(U.g),U.h);if(V.g.length>30){if(Y(V)||Y(U))throw Error("slowDivide_ only works with positive integers.");for(var B=M,$=U;$.l(V)<=0;)B=Ke(B),$=Ke($);var X=Le(B,1),q=Le($,1);for($=Le($,2),B=Le(B,2);!ee($);){var j=q.add($);j.l(V)<=0&&(X=X.add(B),q=j),$=Le($,1),B=Le(B,1)}return U=Ie(V,X.j(U)),new ie(X,U)}for(X=N;V.l(U)>=0;){for(B=Math.max(1,Math.floor(V.m()/U.m())),$=Math.ceil(Math.log(B)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),q=_(B),j=q.j(U);Y(j)||j.l(V)>0;)B-=$,q=_(B),j=q.j(U);ee(q)&&(q=M),X=X.add(q),V=Ie(V,j)}return new ie(X,V)}r.B=function(V){return we(this,V).h},r.and=function(V){const U=Math.max(this.g.length,V.g.length),B=[];for(let $=0;$<U;$++)B[$]=this.i($)&V.i($);return new y(B,this.h&V.h)},r.or=function(V){const U=Math.max(this.g.length,V.g.length),B=[];for(let $=0;$<U;$++)B[$]=this.i($)|V.i($);return new y(B,this.h|V.h)},r.xor=function(V){const U=Math.max(this.g.length,V.g.length),B=[];for(let $=0;$<U;$++)B[$]=this.i($)^V.i($);return new y(B,this.h^V.h)};function Ke(V){const U=V.g.length+1,B=[];for(let $=0;$<U;$++)B[$]=V.i($)<<1|V.i($-1)>>>31;return new y(B,V.h)}function Le(V,U){const B=U>>5;U%=32;const $=V.g.length-B,X=[];for(let q=0;q<$;q++)X[q]=U>0?V.i(q+B)>>>U|V.i(q+B+1)<<32-U:V.i(q+B);return new y(X,V.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,$y=o,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.B,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=_,y.fromString=v,Wo=y}).apply(typeof lm<"u"?lm:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jy,Jl,ew,Hc,Kd,tw,nw,rw;(function(){var r,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var S=0;S<p.length;++S){var b=p[S];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var o=t(this);function u(p,S){if(S)e:{var b=o;p=p.split(".");for(var L=0;L<p.length-1;L++){var re=p[L];if(!(re in b))break e;b=b[re]}p=p[p.length-1],L=b[p],S=S(L),S!=L&&S!=null&&e(b,p,{configurable:!0,writable:!0,value:S})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(S){var b=[],L;for(L in S)Object.prototype.hasOwnProperty.call(S,L)&&b.push([L,S[L]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},y=this||self;function A(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function x(p,S,b){return p.call.apply(p.bind,arguments)}function _(p,S,b){return _=x,_.apply(null,arguments)}function v(p,S){var b=Array.prototype.slice.call(arguments,1);return function(){var L=b.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function N(p,S){function b(){}b.prototype=S.prototype,p.Z=S.prototype,p.prototype=new b,p.prototype.constructor=p,p.Ob=function(L,re,fe){for(var Te=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Te[ct-2]=arguments[ct];return S.prototype[re].apply(L,Te)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function W(p){const S=p.length;if(S>0){const b=Array(S);for(let L=0;L<S;L++)b[L]=p[L];return b}return[]}function ee(p,S){for(let L=1;L<arguments.length;L++){const re=arguments[L];var b=typeof re;if(b=b!="object"?b:re?Array.isArray(re)?"array":b:"null",b=="array"||b=="object"&&typeof re.length=="number"){b=p.length||0;const fe=re.length||0;p.length=b+fe;for(let Te=0;Te<fe;Te++)p[b+Te]=re[Te]}else p.push(re)}}class Y{constructor(S,b){this.i=S,this.j=b,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function G(p){y.setTimeout(()=>{throw p},0)}function Ie(){var p=V;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class ge{constructor(){this.h=this.g=null}add(S,b){const L=ie.get();L.set(S,b),this.h?this.h.next=L:this.g=L,this.h=L}}var ie=new Y(()=>new we,p=>p.reset());class we{constructor(){this.next=this.g=this.h=null}set(S,b){this.h=S,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,Le=!1,V=new ge,U=()=>{const p=Promise.resolve(void 0);Ke=()=>{p.then(B)}};function B(){for(var p;p=Ie();){try{p.h.call(p.g)}catch(b){G(b)}var S=ie;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}Le=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const b=()=>{};y.addEventListener("test",b,S),y.removeEventListener("test",b,S)}catch{}return p})();function j(p){return/^[\s\xa0]*$/.test(p)}function Je(p,S){X.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}N(Je,X),Je.prototype.init=function(p,S){const b=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(b=="mouseover"?S=p.fromElement:b=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),Ct=0;function Be(p,S,b,L,re){this.listener=p,this.proxy=null,this.src=S,this.type=b,this.capture=!!L,this.ha=re,this.key=++Ct,this.da=this.fa=!1}function Pe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ze(p,S,b){for(const L in p)S.call(b,p[L],L,p)}function ke(p,S){for(const b in p)S.call(void 0,p[b],b,p)}function te(p){const S={};for(const b in p)S[b]=p[b];return S}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(p,S){let b,L;for(let re=1;re<arguments.length;re++){L=arguments[re];for(b in L)p[b]=L[b];for(let fe=0;fe<de.length;fe++)b=de[fe],Object.prototype.hasOwnProperty.call(L,b)&&(p[b]=L[b])}}function Ge(p){this.src=p,this.g={},this.h=0}Ge.prototype.add=function(p,S,b,L,re){const fe=p.toString();p=this.g[fe],p||(p=this.g[fe]=[],this.h++);const Te=be(p,S,L,re);return Te>-1?(S=p[Te],b||(S.fa=!1)):(S=new Be(S,this.src,fe,!!L,re),S.fa=b,p.push(S)),S};function wt(p,S){const b=S.type;if(b in p.g){var L=p.g[b],re=Array.prototype.indexOf.call(L,S,void 0),fe;(fe=re>=0)&&Array.prototype.splice.call(L,re,1),fe&&(Pe(S),p.g[b].length==0&&(delete p.g[b],p.h--))}}function be(p,S,b,L){for(let re=0;re<p.length;++re){const fe=p[re];if(!fe.da&&fe.listener==S&&fe.capture==!!b&&fe.ha==L)return re}return-1}var kt="closure_lm_"+(Math.random()*1e6|0),nt={};function Bt(p,S,b,L,re){if(Array.isArray(S)){for(let fe=0;fe<S.length;fe++)Bt(p,S[fe],b,L,re);return null}return b=Ut(b),p&&p[le]?p.J(S,b,A(L)?!!L.capture:!1,re):bn(p,S,b,!1,L,re)}function bn(p,S,b,L,re,fe){if(!S)throw Error("Invalid event type");const Te=A(re)?!!re.capture:!!re;let ct=Ei(p);if(ct||(p[kt]=ct=new Ge(p)),b=ct.add(S,b,L,Te,fe),b.proxy)return b;if(L=On(),b.proxy=L,L.src=p,L.listener=b,p.addEventListener)q||(re=Te),re===void 0&&(re=!1),p.addEventListener(S.toString(),L,re);else if(p.attachEvent)p.attachEvent(ai(S.toString()),L);else if(p.addListener&&p.removeListener)p.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return b}function On(){function p(b){return S.call(p.src,p.listener,b)}const S=Mr;return p}function ns(p,S,b,L,re){if(Array.isArray(S))for(var fe=0;fe<S.length;fe++)ns(p,S[fe],b,L,re);else L=A(L)?!!L.capture:!!L,b=Ut(b),p&&p[le]?(p=p.i,fe=String(S).toString(),fe in p.g&&(S=p.g[fe],b=be(S,b,L,re),b>-1&&(Pe(S[b]),Array.prototype.splice.call(S,b,1),S.length==0&&(delete p.g[fe],p.h--)))):p&&(p=Ei(p))&&(S=p.g[S.toString()],p=-1,S&&(p=be(S,b,L,re)),(b=p>-1?S[p]:null)&&Et(b))}function Et(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[le])wt(S.i,p);else{var b=p.type,L=p.proxy;S.removeEventListener?S.removeEventListener(b,L,p.capture):S.detachEvent?S.detachEvent(ai(b),L):S.addListener&&S.removeListener&&S.removeListener(L),(b=Ei(S))?(wt(b,p),b.h==0&&(b.src=null,S[kt]=null)):Pe(p)}}}function ai(p){return p in nt?nt[p]:nt[p]="on"+p}function Mr(p,S){if(p.da)p=!0;else{S=new Je(S,this);const b=p.listener,L=p.ha||p.src;p.fa&&Et(p),p=b.call(L,S)}return p}function Ei(p){return p=p[kt],p instanceof Ge?p:null}var nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ut(p){return typeof p=="function"?p:(p[nn]||(p[nn]=function(S){return p.handleEvent(S)}),p[nn])}function Ze(){$.call(this),this.i=new Ge(this),this.M=this,this.G=null}N(Ze,$),Ze.prototype[le]=!0,Ze.prototype.removeEventListener=function(p,S,b,L){ns(this,p,S,b,L)};function Jt(p,S){var b,L=p.G;if(L)for(b=[];L;L=L.G)b.push(L);if(p=p.M,L=S.type||S,typeof S=="string")S=new X(S,p);else if(S instanceof X)S.target=S.target||p;else{var re=S;S=new X(L,p),tt(S,re)}re=!0;let fe,Te;if(b)for(Te=b.length-1;Te>=0;Te--)fe=S.g=b[Te],re=Me(fe,L,!0,S)&&re;if(fe=S.g=p,re=Me(fe,L,!0,S)&&re,re=Me(fe,L,!1,S)&&re,b)for(Te=0;Te<b.length;Te++)fe=S.g=b[Te],re=Me(fe,L,!1,S)&&re}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const b=p.g[S];for(let L=0;L<b.length;L++)Pe(b[L]);delete p.g[S],p.h--}}this.G=null},Ze.prototype.J=function(p,S,b,L){return this.i.add(String(p),S,!1,b,L)},Ze.prototype.K=function(p,S,b,L){return this.i.add(String(p),S,!0,b,L)};function Me(p,S,b,L){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let re=!0;for(let fe=0;fe<S.length;++fe){const Te=S[fe];if(Te&&!Te.da&&Te.capture==b){const ct=Te.listener,pn=Te.ha||Te.src;Te.fa&&wt(p.i,Te),re=ct.call(pn,L)!==!1&&re}}return re&&!L.defaultPrevented}function rs(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:y.setTimeout(p,S||0)}function oo(p){p.g=rs(()=>{p.g=null,p.i&&(p.i=!1,oo(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class Wr extends ${constructor(S,b){super(),this.m=S,this.l=b,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:oo(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(p){$.call(this),this.h=p,this.g={}}N(_i,$);var ur=[];function Ps(p){ze(p.g,function(S,b){this.g.hasOwnProperty(b)&&Et(S)},p),p.g={}}_i.prototype.N=function(){_i.Z.N.call(this),Ps(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=y.JSON.stringify,Ln=y.JSON.parse,is=class{stringify(p){return y.JSON.stringify(p,void 0)}parse(p){return y.JSON.parse(p,void 0)}};function li(){}function Ua(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oe(){X.call(this,"d")}N(Oe,X);function rn(){X.call(this,"c")}N(rn,X);var At={},Qt=null;function Gr(){return Qt=Qt||new Ze}At.Ia="serverreachability";function ss(p){X.call(this,At.Ia,p)}N(ss,X);function xi(p){const S=Gr();Jt(S,new ss(S))}At.STAT_EVENT="statevent";function yt(p,S){X.call(this,At.STAT_EVENT,p),this.stat=S}N(yt,X);function Xt(p){const S=Gr();Jt(S,new yt(S,p))}At.Ja="timingevent";function ao(p,S){X.call(this,At.Ja,p),this.size=S}N(ao,X);function Fi(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){p()},S)}function Bn(){this.g=!0}Bn.prototype.ua=function(){this.g=!1};function lo(p,S,b,L,re,fe){p.info(function(){if(p.g)if(fe){var Te="",ct=fe.split("&");for(let Ft=0;Ft<ct.length;Ft++){var pn=ct[Ft].split("=");if(pn.length>1){const yn=pn[0];pn=pn[1];const vr=yn.split("_");Te=vr.length>=2&&vr[1]=="type"?Te+(yn+"="+pn+"&"):Te+(yn+"=redacted&")}}}else Te=null;else Te=fe;return"XMLHTTP REQ ("+L+") [attempt "+re+"]: "+S+`
`+b+`
`+Te})}function Pn(p,S,b,L,re,fe,Te){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+re+"]: "+S+`
`+b+`
`+fe+" "+Te})}function hr(p,S,b,L){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+Jn(p,b)+(L?" "+L:"")})}function Ds(p,S){p.info(function(){return"TIMEOUT: "+S})}Bn.prototype.info=function(){};function Jn(p,S){if(!p.g)return S;if(!S)return null;try{const fe=JSON.parse(S);if(fe){for(p=0;p<fe.length;p++)if(Array.isArray(fe[p])){var b=fe[p];if(!(b.length<2)){var L=b[1];if(Array.isArray(L)&&!(L.length<1)){var re=L[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Te=1;Te<L.length;Te++)L[Te]=""}}}}return cr(fe)}catch{return S}}var os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},uo;function hn(){}N(hn,li),hn.prototype.g=function(){return new XMLHttpRequest},uo=new hn;function er(p){return encodeURIComponent(String(p))}function Wn(p){var S=1;p=p.split(":");const b=[];for(;S>0&&p.length;)b.push(p.shift()),S--;return p.length&&b.push(p.join(":")),b}function De(p,S,b,L){this.j=p,this.i=S,this.l=b,this.S=L||1,this.V=new _i(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vi}function Vi(){this.i=null,this.g="",this.h=!1}var co={},Fn={};function tr(p,S,b){p.M=1,p.A=nr(Ir(S)),p.u=b,p.R=!0,as(p,null)}function as(p,S){p.F=Date.now(),Ms(p),p.B=Ir(p.A);var b=p.B,L=p.S;Array.isArray(L)||(L=[String(L)]),Zt(b.i,"t",L),p.C=0,b=p.j.L,p.h=new Vi,p.g=mo(p.j,b?S:null,!p.u),p.P>0&&(p.O=new Wr(_(p.Y,p,p.g),p.P)),S=p.V,b=p.g,L=p.ba;var re="readystatechange";Array.isArray(re)||(re&&(ur[0]=re.toString()),re=ur);for(let fe=0;fe<re.length;fe++){const Te=Bt(b,re[fe],L||S.handleEvent,!1,S.h||S);if(!Te)break;S.g[Te.key]=Te}S=p.J?te(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),xi(),lo(p.i,p.v,p.B,p.l,p.S,p.u)}De.prototype.ba=function(p){p=p.target;const S=this.O;S&&ui(p)==3?S.j():this.Y(p)},De.prototype.Y=function(p){try{if(p==this.g)e:{const ct=ui(this.g),pn=this.g.ya(),Ft=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||fs(this.g)))){this.K||ct!=4||pn==7||(pn==8||Ft<=0?xi(3):xi(2)),In(this);var S=this.g.ca();this.X=S;var b=ks(this);if(this.o=S==200,Pn(this.i,this.v,this.B,this.l,this.S,ct,S),this.o){if(this.U&&!this.L){t:{if(this.g){var L,re=this.g;if((L=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(L)){var fe=L;break t}}fe=null}if(p=fe)hr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mt(this,p);else{this.o=!1,this.m=3,Xt(12),Ai(this),zt(this);break e}}if(this.R){p=!0;let yn;for(;!this.K&&this.C<b.length;)if(yn=za(this,b),yn==Fn){ct==4&&(this.m=4,Xt(14),p=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==co){this.m=4,Xt(15),hr(this.i,this.l,b,"[Invalid Chunk]"),p=!1;break}else hr(this.i,this.l,yn,null),Mt(this,yn);if(Lr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||b.length!=0||this.h.h||(this.m=1,Xt(16),p=!1),this.o=this.o&&p,!p)hr(this.i,this.l,b,"[Invalid Chunked Response]"),Ai(this),zt(this);else if(b.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ue(Te),Te.P=!0,Xt(11))}}else hr(this.i,this.l,b,null),Mt(this,b);ct==4&&Ai(this),this.o&&!this.K&&(ct==4?Hi(this.j,this):(this.o=!1,Ms(this)))}else zi(this.g),S==400&&b.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),Ai(this),zt(this)}}}catch{}finally{}};function ks(p){if(!Lr(p))return p.g.la();const S=fs(p.g);if(S==="")return"";let b="";const L=S.length,re=ui(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Ai(p),zt(p),"";p.h.i=new y.TextDecoder}for(let fe=0;fe<L;fe++)p.h.h=!0,b+=p.h.i.decode(S[fe],{stream:!(re&&fe==L-1)});return S.length=0,p.h.g+=b,p.C=0,p.h.g}function Lr(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function za(p,S){var b=p.C,L=S.indexOf(`
`,b);return L==-1?Fn:(b=Number(S.substring(b,L)),isNaN(b)?co:(L+=1,L+b>S.length?Fn:(S=S.slice(L,L+b),p.C=L+b,S)))}De.prototype.cancel=function(){this.K=!0,Ai(this)};function Ms(p){p.T=Date.now()+p.H,Ar(p,p.H)}function Ar(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=Fi(_(p.aa,p),S)}function In(p){p.D&&(y.clearTimeout(p.D),p.D=null)}De.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(xi(),Xt(17)),Ai(this),this.m=2,zt(this)):Ar(this,this.T-p)};function zt(p){p.j.I==0||p.K||Hi(p.j,p)}function Ai(p){In(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,Ps(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function Mt(p,S){try{var b=p.j;if(b.I!=0&&(b.g==p||Ii(b.h,p))){if(!p.L&&Ii(b.h,p)&&b.I==3){try{var L=b.Ba.g.parse(S)}catch{L=null}if(Array.isArray(L)&&L.length==3){var re=L;if(re[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<p.F)dn(b),Cr(b);else break e;Ti(b),Xt(18)}}else b.xa=re[1],0<b.xa-b.K&&re[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Fi(_(b.Va,b),6e3));qt(b.h)<=1&&b.ta&&(b.ta=void 0)}else zr(b,11)}else if((p.L||b.g==p)&&dn(b),!j(S))for(re=b.Ba.g.parse(S),S=0;S<re.length;S++){let Ft=re[S];const yn=Ft[0];if(!(yn<=b.K))if(b.K=yn,Ft=Ft[1],b.I==2)if(Ft[0]=="c"){b.M=Ft[1],b.ba=Ft[2];const vr=Ft[3];vr!=null&&(b.ka=vr,b.j.info("VER="+b.ka));const Wi=Ft[4];Wi!=null&&(b.za=Wi,b.j.info("SVER="+b.za));const dr=Ft[5];dr!=null&&typeof dr=="number"&&dr>0&&(L=1.5*dr,b.O=L,b.j.info("backChannelRequestTimeoutMs_="+L)),L=b;const Qr=p.g;if(Qr){const yo=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var fe=L.h;fe.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(ho(fe,fe.h),fe.h=null))}if(L.G){const Gi=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gi&&(L.wa=Gi,et(L.J,L.G,Gi))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-p.F,b.j.info("Handshake RTT: "+b.T+"ms")),L=b;var Te=p;if(L.na=sa(L,L.L?L.ba:null,L.W),Te.L){vt(L.h,Te);var ct=Te,pn=L.O;pn&&(ct.H=pn),ct.D&&(In(ct),Ms(ct)),L.g=Te}else on(L);b.i.length>0&&ji(b)}else Ft[0]!="stop"&&Ft[0]!="close"||zr(b,7);else b.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?zr(b,7):Vs(b):Ft[0]!="noop"&&b.l&&b.l.qa(Ft),b.A=0)}}xi(4)}catch{}}var na=class{constructor(p,S){this.g=p,this.map=S}};function pe(p){this.l=p||10,y.PerformanceNavigationTiming?(p=y.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ra(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function qt(p){return p.h?1:p.g?p.g.size:0}function Ii(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function ho(p,S){p.g?p.g.add(S):p.h=S}function vt(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}pe.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function gt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const b of p.g.values())S=S.concat(b.G);return S}return W(p.i)}var _t=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fr(p,S){if(p){p=p.split("&");for(let b=0;b<p.length;b++){const L=p[b].indexOf("=");let re,fe=null;L>=0?(re=p[b].substring(0,L),fe=p[b].substring(L+1)):re=p[b],S(re,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function Xr(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Xr?(this.l=p.l,$t(this,p.j),this.o=p.o,this.g=p.g,Gn(this,p.u),this.h=p.h,ls(this,fo(p.i)),this.m=p.m):p&&(S=String(p).match(_t))?(this.l=!1,$t(this,S[1]||"",!0),this.o=Ls(S[2]||""),this.g=Ls(S[3]||"",!0),Gn(this,S[4]),this.h=Ls(S[5]||"",!0),ls(this,S[6]||"",!0),this.m=Ls(S[7]||"")):(this.l=!1,this.i=new lt(null,this.l))}Xr.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(qr(S,Cn,!0),":");var b=this.g;return(b||S=="file")&&(p.push("//"),(S=this.o)&&p.push(qr(S,Cn,!0),"@"),p.push(er(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&p.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&p.push("/"),p.push(qr(b,b.charAt(0)=="/"?F:se,!0))),(b=this.i.toString())&&p.push("?",b),(b=this.m)&&p.push("#",qr(b,fn)),p.join("")},Xr.prototype.resolve=function(p){const S=Ir(this);let b=!!p.j;b?$t(S,p.j):b=!!p.o,b?S.o=p.o:b=!!p.g,b?S.g=p.g:b=p.u!=null;var L=p.h;if(b)Gn(S,p.u);else if(b=!!p.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var re=S.h.lastIndexOf("/");re!=-1&&(L=S.h.slice(0,re+1)+L)}if(re=L,re==".."||re==".")L="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){L=re.lastIndexOf("/",0)==0,re=re.split("/");const fe=[];for(let Te=0;Te<re.length;){const ct=re[Te++];ct=="."?L&&Te==re.length&&fe.push(""):ct==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),L&&Te==re.length&&fe.push("")):(fe.push(ct),L=!0)}L=fe.join("/")}else L=re}return b?S.h=L:b=p.i.toString()!=="",b?ls(S,fo(p.i)):b=!!p.m,b&&(S.m=p.m),S};function Ir(p){return new Xr(p)}function $t(p,S,b){p.j=b?Ls(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function Gn(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function ls(p,S,b){S instanceof lt?(p.i=S,us(p.i,p.l)):(b||(S=qr(S,Xe)),p.i=new lt(S,p.l))}function et(p,S,b){p.i.set(S,b)}function nr(p){return et(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Ls(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function qr(p,S,b){return typeof p=="string"?(p=encodeURI(p).replace(S,jt),b&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function jt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Cn=/[#\/\?@]/g,se=/[#\?:]/g,F=/[#\?]/g,Xe=/[#\?@]/g,fn=/#/g;function lt(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Ci(p){p.g||(p.g=new Map,p.h=0,p.i&&fr(p.i,function(S,b){p.add(decodeURIComponent(S.replace(/\+/g," ")),b)}))}r=lt.prototype,r.add=function(p,S){Ci(this),this.i=null,p=vi(this,p);let b=this.g.get(p);return b||this.g.set(p,b=[]),b.push(S),this.h+=1,this};function Bs(p,S){Ci(p),S=vi(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Xn(p,S){return Ci(p),S=vi(p,S),p.g.has(S)}r.forEach=function(p,S){Ci(this),this.g.forEach(function(b,L){b.forEach(function(re){p.call(S,re,L,this)},this)},this)};function Ye(p,S){Ci(p);let b=[];if(typeof S=="string")Xn(p,S)&&(b=b.concat(p.g.get(vi(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)b=b.concat(p[S]);return b}r.set=function(p,S){return Ci(this),this.i=null,p=vi(this,p),Xn(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},r.get=function(p,S){return p?(p=Ye(this,p),p.length>0?String(p[0]):S):S};function Zt(p,S,b){Bs(p,S),b.length>0&&(p.i=null,p.g.set(vi(p,S),W(b)),p.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let L=0;L<S.length;L++){var b=S[L];const re=er(b);b=Ye(this,b);for(let fe=0;fe<b.length;fe++){let Te=re;b[fe]!==""&&(Te+="="+er(b[fe])),p.push(Te)}}return this.i=p.join("&")};function fo(p){const S=new lt;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function vi(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function us(p,S){S&&!p.j&&(Ci(p),p.i=null,p.g.forEach(function(b,L){const re=L.toLowerCase();L!=re&&(Bs(this,L),Zt(this,re,b))},p)),p.j=S}function Br(p,S){const b=new Bn;if(y.Image){const L=new Image;L.onload=v(qn,b,"TestLoadImage: loaded",!0,S,L),L.onerror=v(qn,b,"TestLoadImage: error",!1,S,L),L.onabort=v(qn,b,"TestLoadImage: abort",!1,S,L),L.ontimeout=v(qn,b,"TestLoadImage: timeout",!1,S,L),y.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else S(!1)}function Kr(p,S){const b=new Bn,L=new AbortController,re=setTimeout(()=>{L.abort(),qn(b,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:L.signal}).then(fe=>{clearTimeout(re),fe.ok?qn(b,"TestPingServer: ok",!0,S):qn(b,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),qn(b,"TestPingServer: error",!1,S)})}function qn(p,S,b,L,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),L(b)}catch{}}function en(){this.g=new is}function Fr(p){this.i=p.Sb||null,this.h=p.ab||!1}N(Fr,li),Fr.prototype.g=function(){return new vn(this.i,this.h)};function vn(p,S){Ze.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}N(vn,Ze),r=vn.prototype,r.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,rt(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||y).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,rt(this)),this.g&&(this.readyState=3,rt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$e(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function $e(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?cs(this):rt(this),this.readyState==3&&$e(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,cs(this))},r.Na=function(p){this.g&&(this.response=p,cs(this))},r.ga=function(){this.g&&cs(this)};function cs(p){p.readyState=4,p.l=null,p.j=null,p.B=null,rt(p)}r.setRequestHeader=function(p,S){this.A.append(p,S)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var b=S.next();!b.done;)b=b.value,p.push(b[0]+": "+b[1]),b=S.next();return p.join(`\r
`)};function rt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(vn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Tn(p){let S="";return ze(p,function(b,L){S+=L,S+=":",S+=b,S+=`\r
`}),S}function go(p,S,b){e:{for(L in b){var L=!1;break e}L=!0}L||(b=Tn(b),typeof p=="string"?b!=null&&er(b):et(p,S,b))}function Wt(p){Ze.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}N(Wt,Ze);var ia=/^https?$/i,Ui=["POST","PUT"];r=Wt.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,S,b,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():uo.g(),this.g.onreadystatechange=M(_(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(fe){hs(this,fe);return}if(p=b||"",b=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var re in L)b.set(re,L[re]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const fe of L.keys())b.set(fe,L.get(fe));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(b.keys()).find(fe=>fe.toLowerCase()=="content-type"),re=y.FormData&&p instanceof y.FormData,!(Array.prototype.indexOf.call(Ui,S,void 0)>=0)||L||re||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Te]of b)this.g.setRequestHeader(fe,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(fe){hs(this,fe)}};function hs(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,Yr(p),Ur(p)}function Yr(p){p.A||(p.A=!0,Jt(p,"complete"),Jt(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Jt(this,"complete"),Jt(this,"abort"),Ur(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Wt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Vr(this):this.Xa())},r.Xa=function(){Vr(this)};function Vr(p){if(p.h&&typeof f<"u"){if(p.v&&ui(p)==4)setTimeout(p.Ca.bind(p),0);else if(Jt(p,"readystatechange"),ui(p)==4){p.h=!1;try{const fe=p.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var b;if(!(b=S)){var L;if(L=fe===0){let Te=String(p.D).match(_t)[1]||null;!Te&&y.self&&y.self.location&&(Te=y.self.location.protocol.slice(0,-1)),L=!ia.test(Te?Te.toLowerCase():"")}b=L}if(b)Jt(p,"complete"),Jt(p,"success");else{p.o=6;try{var re=ui(p)>2?p.g.statusText:""}catch{re=""}p.l=re+" ["+p.ca()+"]",Yr(p)}}finally{Ur(p)}}}}function Ur(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const b=p.g;p.g=null,S||Jt(p,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ui(p){return p.g?p.g.readyState:0}r.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),Ln(S)}};function fs(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(p){const S={};p=(p.g&&ui(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<p.length;L++){if(j(p[L]))continue;var b=Wn(p[L]);const re=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const fe=S[re]||[];S[re]=fe,fe.push(b)}ke(S,function(L){return L.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function sn(p,S,b){return b&&b.internalChannelParams&&b.internalChannelParams[p]||S}function Fs(p){this.za=0,this.i=[],this.j=new Bn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=sn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=sn("baseRetryDelayMs",5e3,p),this.Za=sn("retryDelaySeedMs",1e4,p),this.Ta=sn("forwardChannelMaxRetries",2,p),this.va=sn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new pe(p&&p.concurrentRequestLimit),this.Ba=new en,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fs.prototype,r.ka=8,r.I=1,r.connect=function(p,S,b,L){Xt(0),this.W=p,this.H=S||{},b&&L!==void 0&&(this.H.OSID=b,this.H.OAID=L),this.F=this.X,this.J=sa(this,null,this.W),ji(this)};function Vs(p){if(po(p),p.I==3){var S=p.V++,b=Ir(p.J);if(et(b,"SID",p.M),et(b,"RID",S),et(b,"TYPE","terminate"),ci(p,b),S=new De(p,p.j,S),S.M=2,S.A=nr(Ir(b)),b=!1,y.navigator&&y.navigator.sendBeacon)try{b=y.navigator.sendBeacon(S.A.toString(),"")}catch{}!b&&y.Image&&(new Image().src=S.A,b=!0),b||(S.g=mo(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ms(S)}zs(p)}function Cr(p){p.g&&(ue(p),p.g.cancel(),p.g=null)}function po(p){Cr(p),p.v&&(y.clearTimeout(p.v),p.v=null),dn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&y.clearTimeout(p.m),p.m=null)}function ji(p){if(!ra(p.h)&&!p.m){p.m=!0;var S=p.Ea;Ke||U(),Le||(Ke(),Le=!0),V.add(S,p),p.D=0}}function ja(p,S){return qt(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=Fi(_(p.Ea,p,S),Us(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const re=new De(this,this.j,p);let fe=this.o;if(this.U&&(fe?(fe=te(fe),tt(fe,this.U)):fe=this.U),this.u!==null||this.R||(re.J=fe,fe=null),this.S)e:{for(var S=0,b=0;b<this.i.length;b++){t:{var L=this.i[b];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(S+=L,S>4096){S=b;break e}if(S===4096||b===this.i.length-1){S=b+1;break e}}S=1e3}else S=1e3;S=ds(this,re,S),b=Ir(this.J),et(b,"RID",p),et(b,"CVER",22),this.G&&et(b,"X-HTTP-Session-Id",this.G),ci(this,b),fe&&(this.R?S="headers="+er(Tn(fe))+"&"+S:this.u&&go(b,this.u,fe)),ho(this.h,re),this.Ra&&et(b,"TYPE","init"),this.S?(et(b,"$req",S),et(b,"SID","null"),re.U=!0,tr(re,b,null)):tr(re,b,S),this.I=2}}else this.I==3&&(p?Rt(this,p):this.i.length==0||ra(this.h)||Rt(this))};function Rt(p,S){var b;S?b=S.l:b=p.V++;const L=Ir(p.J);et(L,"SID",p.M),et(L,"RID",b),et(L,"AID",p.K),ci(p,L),p.u&&p.o&&go(L,p.u,p.o),b=new De(p,p.j,b,p.D+1),p.u===null&&(b.J=p.o),S&&(p.i=S.G.concat(p.i)),S=ds(p,b,1e3),b.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),ho(p.h,b),tr(b,L,S)}function ci(p,S){p.H&&ze(p.H,function(b,L){et(S,L,b)}),p.l&&ze({},function(b,L){et(S,L,b)})}function ds(p,S,b){b=Math.min(p.i.length,b);const L=p.l?_(p.l.Ka,p.l,p):null;e:{var re=p.i;let ct=-1;for(;;){const pn=["count="+b];ct==-1?b>0?(ct=re[0].g,pn.push("ofs="+ct)):ct=0:pn.push("ofs="+ct);let Ft=!0;for(let yn=0;yn<b;yn++){var fe=re[yn].g;const vr=re[yn].map;if(fe-=ct,fe<0)ct=Math.max(0,re[yn].g-100),Ft=!1;else try{fe="req"+fe+"_"||"";try{var Te=vr instanceof Map?vr:Object.entries(vr);for(const[Wi,dr]of Te){let Qr=dr;A(dr)&&(Qr=cr(dr)),pn.push(fe+Wi+"="+encodeURIComponent(Qr))}}catch(Wi){throw pn.push(fe+"type="+encodeURIComponent("_badmap")),Wi}}catch{L&&L(vr)}}if(Ft){Te=pn.join("&");break e}}Te=void 0}return p=p.i.splice(0,b),S.G=p,Te}function on(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;Ke||U(),Le||(Ke(),Le=!0),V.add(S,p),p.A=0}}function Ti(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=Fi(_(p.Da,p),Us(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,ut(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=Fi(_(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),Cr(this),ut(this))};function ue(p){p.B!=null&&(y.clearTimeout(p.B),p.B=null)}function ut(p){p.g=new De(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Ir(p.na);et(S,"RID","rpc"),et(S,"SID",p.M),et(S,"AID",p.K),et(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&et(S,"TO",p.ia),et(S,"TYPE","xmlhttp"),ci(p,S),p.u&&p.o&&go(S,p.u,p.o),p.O&&(p.g.H=p.O);var b=p.g;p=p.ba,b.M=1,b.A=nr(Ir(S)),b.u=null,b.R=!0,as(b,p)}r.Va=function(){this.C!=null&&(this.C=null,Cr(this),Ti(this),Xt(19))};function dn(p){p.C!=null&&(y.clearTimeout(p.C),p.C=null)}function Hi(p,S){var b=null;if(p.g==S){dn(p),ue(p),p.g=null;var L=2}else if(Ii(p.h,S))b=S.G,vt(p.h,S),L=1;else return;if(p.I!=0){if(S.o)if(L==1){b=S.u?S.u.length:0,S=Date.now()-S.F;var re=p.D;L=Gr(),Jt(L,new ao(L,b)),ji(p)}else on(p);else if(re=S.m,re==3||re==0&&S.X>0||!(L==1&&ja(p,S)||L==2&&Ti(p)))switch(b&&b.length>0&&(S=p.h,S.i=S.i.concat(b)),re){case 1:zr(p,5);break;case 4:zr(p,10);break;case 3:zr(p,6);break;default:zr(p,2)}}}function Us(p,S){let b=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(b*=2),b*S}function zr(p,S){if(p.j.info("Error code "+S),S==2){var b=_(p.bb,p),L=p.Ua;const re=!L;L=new Xr(L||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||$t(L,"https"),nr(L),re?Br(L.toString(),b):Kr(L.toString(),b)}else Xt(2);p.I=0,p.l&&p.l.pa(S),zs(p),po(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function zs(p){if(p.I=0,p.ja=[],p.l){const S=gt(p.h);(S.length!=0||p.i.length!=0)&&(ee(p.ja,S),ee(p.ja,p.i),p.h.i.length=0,W(p.i),p.i.length=0),p.l.oa()}}function sa(p,S,b){var L=b instanceof Xr?Ir(b):new Xr(b);if(L.g!="")S&&(L.g=S+"."+L.g),Gn(L,L.u);else{var re=y.location;L=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;const fe=new Xr(null);L&&$t(fe,L),S&&(fe.g=S),re&&Gn(fe,re),b&&(fe.h=b),L=fe}return b=p.G,S=p.wa,b&&S&&et(L,b,S),et(L,"VER",p.ka),ci(p,L),L}function mo(p,S,b){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new Wt(new Fr({ab:b})):new Wt(p.ma),S.Fa(p.L),S}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gn(){}r=gn.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function gs(){}gs.prototype.g=function(p,S){return new xt(p,S)};function xt(p,S){Ze.call(this),this.g=new Fs(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!j(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!j(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Nt(this)}N(xt,Ze),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Vs(this.g)},xt.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var b={};b.__data__=p,p=b}else this.v&&(b={},b.__data__=cr(p),p=b);S.i.push(new na(S.Ya++,p)),S.I==3&&ji(S)},xt.prototype.N=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,xt.Z.N.call(this)};function js(p){Oe.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const b in S){p=b;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}N(js,Oe);function Si(){rn.call(this),this.status=1}N(Si,rn);function Nt(p){this.g=p}N(Nt,gn),Nt.prototype.ra=function(){Jt(this.g,"a")},Nt.prototype.qa=function(p){Jt(this.g,new js(p))},Nt.prototype.pa=function(p){Jt(this.g,new Si)},Nt.prototype.oa=function(){Jt(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,rw=function(){return new gs},nw=function(){return Gr()},tw=At,Kd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,Hc=os,xr.COMPLETE="complete",ew=xr,Ua.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Jl=Ua,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Jy=Wt}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const um="@firebase/firestore",cm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new Sh("@firebase/firestore");function al(){return Na.logLevel}function Ve(r,...e){if(Na.logLevel<=Ot.DEBUG){const t=e.map(L1);Na.debug(`Firestore (${Tl}): ${r}`,...t)}}function io(r,...e){if(Na.logLevel<=Ot.ERROR){const t=e.map(L1);Na.error(`Firestore (${Tl}): ${r}`,...t)}}function wl(r,...e){if(Na.logLevel<=Ot.WARN){const t=e.map(L1);Na.warn(`Firestore (${Tl}): ${r}`,...t)}}function L1(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(r,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,iw(r,o,t)}function iw(r,e,t){let o=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw io(o),new Error(o)}function Kt(r,e,t,o){let u="Unexpected state";typeof t=="string"?u=t:o=t,r||iw(e,u,o)}function mt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends Bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pr.UNAUTHENTICATED)))}shutdown(){}}class i3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class s3{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Kt(this.o===void 0,42304);let o=this.i;const u=x=>this.i!==o?(o=this.i,t(x)):Promise.resolve();let f=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Go,e.enqueueRetryable((()=>u(this.currentUser)))};const y=()=>{const x=f;e.enqueueRetryable((async()=>{await x.promise,await u(this.currentUser)}))},A=x=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit((x=>A(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?A(x):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Go)}}),0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Kt(typeof o.accessToken=="string",31837,{l:o}),new sw(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kt(e===null||typeof e=="string",2055,{h:e}),new Pr(e)}}class o3{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a3{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new o3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Kt(this.o===void 0,3512);const o=f=>{f.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const y=f.token!==this.m;return this.m=f.token,Ve("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable((()=>o(f)))};const u=f=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((f=>u(f))),setTimeout((()=>{if(!this.appCheck){const f=this.V.getImmediate({optional:!0});f?u(f):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Kt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hm(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=u3(40);for(let f=0;f<u.length;++f)o.length<20&&u[f]<t&&(o+=e.charAt(u[f]%62))}return o}}function Pt(r,e){return r<e?-1:r>e?1:0}function Yd(r,e){const t=Math.min(r.length,e.length);for(let o=0;o<t;o++){const u=r.charAt(o),f=e.charAt(o);if(u!==f)return bd(u)===bd(f)?Pt(u,f):bd(u)?1:-1}return Pt(r.length,e.length)}const c3=55296,h3=57343;function bd(r){const e=r.charCodeAt(0);return e>=c3&&e<=h3}function El(r,e,t){return r.length===e.length&&r.every(((o,u)=>t(o,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="__name__";class _s{constructor(e,t,o){t===void 0?t=0:t>e.length&&at(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&at(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return _s.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const f=_s.compareSegments(e.get(u),t.get(u));if(f!==0)return f}return Pt(e.length,t.length)}static compareSegments(e,t){const o=_s.isNumericId(e),u=_s.isNumericId(t);return o&&!u?-1:!o&&u?1:o&&u?_s.extractNumericId(e).compare(_s.extractNumericId(t)):Yd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wo.fromString(e.substring(4,e.length-2))}}class xn extends _s{construct(e,t,o){return new xn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Qe(xe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((u=>u.length>0)))}return new xn(t)}static emptyPath(){return new xn([])}}const f3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends _s{construct(e,t,o){return new Er(e,t,o)}static isValidIdentifier(e){return f3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fm}static keyField(){return new Er([fm])}static fromServerFormat(e){const t=[];let o="",u=0;const f=()=>{if(o.length===0)throw new Qe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let y=!1;for(;u<e.length;){const A=e[u];if(A==="\\"){if(u+1===e.length)throw new Qe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[u+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new Qe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,u+=2}else A==="`"?(y=!y,u++):A!=="."||y?(o+=A,u++):(f(),u++)}if(f(),y)throw new Qe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(t)}static emptyPath(){return new Er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(xn.fromString(e))}static fromName(e){return new ot(xn.fromString(e).popFirst(5))}static empty(){return new ot(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new xn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(r,e,t){if(!t)throw new Qe(xe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function g3(r,e,t,o){if(e===!0&&o===!0)throw new Qe(xe.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function dm(r){if(!ot.isDocumentKey(r))throw new Qe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ow(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function F1(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":at(12329,{type:typeof r})}function ba(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Qe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=F1(r);throw new Qe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ou(r,e){if(!ow(r))throw new Qe(xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const u=e[o].typeString,f="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){t=`JSON missing required field: '${o}'`;break}const y=r[o];if(u&&typeof y!==u){t=`JSON field '${o}' must be a ${u}.`;break}if(f!==void 0&&y!==f.value){t=`Expected '${o}' field to equal '${f.value}'`;break}}if(t)throw new Qe(xe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=-62135596800,pm=1e6;class cn{static now(){return cn.fromMillis(Date.now())}static fromDate(e){return cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*pm);return new cn(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gm)throw new Qe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pm}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:cn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,cn._jsonSchema))return new cn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}cn._jsonSchemaVersion="firestore/timestamp/1.0",cn._jsonSchema={type:jn("string",cn._jsonSchemaVersion),seconds:jn("number"),nanoseconds:jn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static fromTimestamp(e){return new pt(e)}static min(){return new pt(new cn(0,0))}static max(){return new pt(new cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function p3(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,u=pt.fromTimestamp(o===1e9?new cn(t+1,0):new cn(t,o));return new qo(u,ot.empty(),e)}function m3(r){return new qo(r.readTime,r.key,wu)}class qo{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new qo(pt.min(),ot.empty(),wu)}static max(){return new qo(pt.max(),ot.empty(),wu)}}function y3(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(r.documentKey,e.documentKey),t!==0?t:Pt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(r){if(r.code!==xe.FAILED_PRECONDITION||r.message!==w3)throw r;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye(((o,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(o,u)},this.catchCallback=f=>{this.wrapFailure(t,f).next(o,u)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.reject(t)}static resolve(e){return new ye(((t,o)=>{t(e)}))}static reject(e){return new ye(((t,o)=>{o(e)}))}static waitFor(e){return new ye(((t,o)=>{let u=0,f=0,y=!1;e.forEach((A=>{++u,A.next((()=>{++f,y&&f===u&&t()}),(x=>o(x)))})),y=!0,f===u&&t()}))}static or(e){let t=ye.resolve(!1);for(const o of e)t=t.next((u=>u?ye.resolve(u):o()));return t}static forEach(e,t){const o=[];return e.forEach(((u,f)=>{o.push(t.call(this,u,f))})),this.waitFor(o)}static mapArray(e,t){return new ye(((o,u)=>{const f=e.length,y=new Array(f);let A=0;for(let x=0;x<f;x++){const _=x;t(e[_]).next((v=>{y[_]=v,++A,A===f&&o(y)}),(v=>u(v)))}}))}static doWhile(e,t){return new ye(((o,u)=>{const f=()=>{e()===!0?t().next((()=>{f()}),u):o()};f()}))}}function _3(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Rl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=-1;function Mh(r){return r==null}function ah(r){return r===0&&1/r==-1/0}function x3(r){return typeof r=="number"&&Number.isInteger(r)&&!ah(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="";function A3(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=mm(e)),e=I3(r.get(t),e);return mm(e)}function I3(r,e){let t=e;const o=r.length;for(let u=0;u<o;u++){const f=r.charAt(u);switch(f){case"\0":t+="";break;case aw:t+="";break;default:t+=f}}return t}function mm(r){return r+aw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ea(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function lw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.comparator=e,this.root=t||wr.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(u===0)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?o(e.key,t):1,t&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wr{constructor(e,t,o,u,f){this.key=e,this.value=t,this.color=o??wr.RED,this.left=u??wr.EMPTY,this.right=f??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,f){return new wr(e??this.key,t??this.value,o??this.color,u??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const f=o(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,t,o),null):f===0?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),t(e,u.key)===0){if(u.right.isEmpty())return wr.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1;wr.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,t,o,u,f){return this}insert(e,t,o){return new wr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wm(this.data.getIterator())}getIteratorFrom(e){return new wm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=o.getNext().key;if(this.comparator(u,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class wm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new yi([])}unionWith(e){let t=new $n(Er.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(u){try{return atob(u)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new uw("Invalid base64 string: "+f):f}})(e);return new _r(t)}static fromUint8Array(e){const t=(function(u){let f="";for(let y=0;y<u.length;++y)f+=String.fromCharCode(u[y]);return f})(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let u=0;u<t.length;u++)o[u]=t.charCodeAt(u);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const C3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(r){if(Kt(!!r,39018),typeof r=="string"){let e=0;const t=C3.exec(r);if(Kt(!!t,46558,{timestamp:r}),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Mn(r.seconds),nanos:Mn(r.nanos)}}function Mn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Yo(r){return typeof r=="string"?_r.fromBase64String(r):_r.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="server_timestamp",hw="__type__",fw="__previous_value__",dw="__local_write_time__";function U1(r){return(r?.mapValue?.fields||{})[hw]?.stringValue===cw}function Lh(r){const e=r.mapValue.fields[fw];return U1(e)?Lh(e):e}function Eu(r){const e=Ko(r.mapValue.fields[dw].timestampValue);return new cn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,t,o,u,f,y,A,x,_,v){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=f,this.forceLongPolling=y,this.autoDetectLongPolling=A,this.longPollingOptions=x,this.useFetchStreams=_,this.isUsingEmulator=v}}const lh="(default)";class _u{constructor(e,t){this.projectId=e,this.database=t||lh}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="__type__",T3="__max__",kc={mapValue:{}},pw="__vector__",uh="value";function Qo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?U1(r)?4:R3(r)?9007199254740991:S3(r)?10:11:at(28295,{value:r})}function Rs(r,e){if(r===e)return!0;const t=Qo(r);if(t!==Qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Eu(r).isEqual(Eu(e));case 3:return(function(u,f){if(typeof u.timestampValue=="string"&&typeof f.timestampValue=="string"&&u.timestampValue.length===f.timestampValue.length)return u.timestampValue===f.timestampValue;const y=Ko(u.timestampValue),A=Ko(f.timestampValue);return y.seconds===A.seconds&&y.nanos===A.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(u,f){return Yo(u.bytesValue).isEqual(Yo(f.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(u,f){return Mn(u.geoPointValue.latitude)===Mn(f.geoPointValue.latitude)&&Mn(u.geoPointValue.longitude)===Mn(f.geoPointValue.longitude)})(r,e);case 2:return(function(u,f){if("integerValue"in u&&"integerValue"in f)return Mn(u.integerValue)===Mn(f.integerValue);if("doubleValue"in u&&"doubleValue"in f){const y=Mn(u.doubleValue),A=Mn(f.doubleValue);return y===A?ah(y)===ah(A):isNaN(y)&&isNaN(A)}return!1})(r,e);case 9:return El(r.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return(function(u,f){const y=u.mapValue.fields||{},A=f.mapValue.fields||{};if(ym(y)!==ym(A))return!1;for(const x in y)if(y.hasOwnProperty(x)&&(A[x]===void 0||!Rs(y[x],A[x])))return!1;return!0})(r,e);default:return at(52216,{left:r})}}function xu(r,e){return(r.values||[]).find((t=>Rs(t,e)))!==void 0}function _l(r,e){if(r===e)return 0;const t=Qo(r),o=Qo(e);if(t!==o)return Pt(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(r.booleanValue,e.booleanValue);case 2:return(function(f,y){const A=Mn(f.integerValue||f.doubleValue),x=Mn(y.integerValue||y.doubleValue);return A<x?-1:A>x?1:A===x?0:isNaN(A)?isNaN(x)?0:-1:1})(r,e);case 3:return Em(r.timestampValue,e.timestampValue);case 4:return Em(Eu(r),Eu(e));case 5:return Yd(r.stringValue,e.stringValue);case 6:return(function(f,y){const A=Yo(f),x=Yo(y);return A.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(f,y){const A=f.split("/"),x=y.split("/");for(let _=0;_<A.length&&_<x.length;_++){const v=Pt(A[_],x[_]);if(v!==0)return v}return Pt(A.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(f,y){const A=Pt(Mn(f.latitude),Mn(y.latitude));return A!==0?A:Pt(Mn(f.longitude),Mn(y.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return _m(r.arrayValue,e.arrayValue);case 10:return(function(f,y){const A=f.fields||{},x=y.fields||{},_=A[uh]?.arrayValue,v=x[uh]?.arrayValue,N=Pt(_?.values?.length||0,v?.values?.length||0);return N!==0?N:_m(_,v)})(r.mapValue,e.mapValue);case 11:return(function(f,y){if(f===kc.mapValue&&y===kc.mapValue)return 0;if(f===kc.mapValue)return 1;if(y===kc.mapValue)return-1;const A=f.fields||{},x=Object.keys(A),_=y.fields||{},v=Object.keys(_);x.sort(),v.sort();for(let N=0;N<x.length&&N<v.length;++N){const M=Yd(x[N],v[N]);if(M!==0)return M;const W=_l(A[x[N]],_[v[N]]);if(W!==0)return W}return Pt(x.length,v.length)})(r.mapValue,e.mapValue);default:throw at(23264,{he:t})}}function Em(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pt(r,e);const t=Ko(r),o=Ko(e),u=Pt(t.seconds,o.seconds);return u!==0?u:Pt(t.nanos,o.nanos)}function _m(r,e){const t=r.values||[],o=e.values||[];for(let u=0;u<t.length&&u<o.length;++u){const f=_l(t[u],o[u]);if(f)return f}return Pt(t.length,o.length)}function xl(r){return Qd(r)}function Qd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const o=Ko(t);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Yo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ot.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let o="[",u=!0;for(const f of t.values||[])u?u=!1:o+=",",o+=Qd(f);return o+"]"})(r.arrayValue):"mapValue"in r?(function(t){const o=Object.keys(t.fields||{}).sort();let u="{",f=!0;for(const y of o)f?f=!1:u+=",",u+=`${y}:${Qd(t.fields[y])}`;return u+"}"})(r.mapValue):at(61005,{value:r})}function Wc(r){switch(Qo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lh(r);return e?16+Wc(e):16;case 5:return 2*r.stringValue.length;case 6:return Yo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((u,f)=>u+Wc(f)),0)})(r.arrayValue);case 10:case 11:return(function(o){let u=0;return ea(o.fields,((f,y)=>{u+=f.length+Wc(y)})),u})(r.mapValue);default:throw at(13486,{value:r})}}function Zd(r){return!!r&&"integerValue"in r}function z1(r){return!!r&&"arrayValue"in r}function xm(r){return!!r&&"nullValue"in r}function Am(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Gc(r){return!!r&&"mapValue"in r}function S3(r){return(r?.mapValue?.fields||{})[gw]?.stringValue===pw}function au(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ea(r.mapValue.fields,((t,o)=>e.mapValue.fields[t]=au(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(r.arrayValue.values[t]);return e}return{...r}}function R3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===T3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=Er.emptyPath(),o={},u=[];e.forEach(((y,A)=>{if(!t.isImmediateParentOf(A)){const x=this.getFieldsMap(t);this.applyChanges(x,o,u),o={},u=[],t=A.popLast()}y?o[A.lastSegment()]=au(y):u.push(A.lastSegment())}));const f=this.getFieldsMap(t);this.applyChanges(f,o,u)}delete(e){const t=this.field(e.popLast());Gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];Gc(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){ea(t,((u,f)=>e[u]=f));for(const u of o)delete e[u]}clone(){return new ii(au(this.value))}}function mw(r){const e=[];return ea(r.fields,((t,o)=>{const u=new Er([t]);if(Gc(o)){const f=mw(o.mapValue).fields;if(f.length===0)e.push(u);else for(const y of f)e.push(u.child(y))}else e.push(u)})),new yi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t,o,u,f,y,A){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.createTime=f,this.data=y,this.documentState=A}static newInvalidDocument(e){return new Dr(e,0,pt.min(),pt.min(),pt.min(),ii.empty(),0)}static newFoundDocument(e,t,o,u){return new Dr(e,1,t,pt.min(),o,u,0)}static newNoDocument(e,t){return new Dr(e,2,t,pt.min(),pt.min(),ii.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,pt.min(),pt.min(),ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t){this.position=e,this.inclusive=t}}function Im(r,e,t){let o=0;for(let u=0;u<r.position.length;u++){const f=e[u],y=r.position[u];if(f.field.isKeyField()?o=ot.comparator(ot.fromName(y.referenceValue),t.key):o=_l(y,t.data.field(f.field)),f.dir==="desc"&&(o*=-1),o!==0)break}return o}function Cm(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Rs(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function N3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{}class Qn extends yw{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new O3(e,t,o):t==="array-contains"?new k3(e,o):t==="in"?new M3(e,o):t==="not-in"?new L3(e,o):t==="array-contains-any"?new B3(e,o):new Qn(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new P3(e,o):new D3(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_l(t,this.value)):t!==null&&Qo(this.value)===Qo(t)&&this.matchesComparison(_l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ns extends yw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ns(e,t)}matches(e){return ww(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ww(r){return r.op==="and"}function Ew(r){return b3(r)&&ww(r)}function b3(r){for(const e of r.filters)if(e instanceof Ns)return!1;return!0}function $d(r){if(r instanceof Qn)return r.field.canonicalString()+r.op.toString()+xl(r.value);if(Ew(r))return r.filters.map((e=>$d(e))).join(",");{const e=r.filters.map((t=>$d(t))).join(",");return`${r.op}(${e})`}}function _w(r,e){return r instanceof Qn?(function(o,u){return u instanceof Qn&&o.op===u.op&&o.field.isEqual(u.field)&&Rs(o.value,u.value)})(r,e):r instanceof Ns?(function(o,u){return u instanceof Ns&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce(((f,y,A)=>f&&_w(y,u.filters[A])),!0):!1})(r,e):void at(19439)}function xw(r){return r instanceof Qn?(function(t){return`${t.field.canonicalString()} ${t.op} ${xl(t.value)}`})(r):r instanceof Ns?(function(t){return t.op.toString()+" {"+t.getFilters().map(xw).join(" ,")+"}"})(r):"Filter"}class O3 extends Qn{constructor(e,t,o){super(e,t,o),this.key=ot.fromName(o.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class P3 extends Qn{constructor(e,t){super(e,"in",t),this.keys=Aw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class D3 extends Qn{constructor(e,t){super(e,"not-in",t),this.keys=Aw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Aw(r,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class k3 extends Qn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return z1(t)&&xu(t.arrayValue,this.value)}}class M3 extends Qn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class L3 extends Qn{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class B3 extends Qn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!z1(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>xu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t=null,o=[],u=[],f=null,y=null,A=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=f,this.startAt=y,this.endAt=A,this.Te=null}}function vm(r,e=null,t=[],o=[],u=null,f=null,y=null){return new F3(r,e,t,o,u,f,y)}function j1(r){const e=mt(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>$d(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(f){return f.field.canonicalString()+f.dir})(o))).join(","),Mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>xl(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>xl(o))).join(",")),e.Te=t}return e.Te}function H1(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!N3(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!_w(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Cm(r.startAt,e.startAt)&&Cm(r.endAt,e.endAt)}function Jd(r){return ot.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t=null,o=[],u=[],f=null,y="F",A=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=f,this.limitType=y,this.startAt=A,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V3(r,e,t,o,u,f,y,A){return new Bh(r,e,t,o,u,f,y,A)}function W1(r){return new Bh(r)}function Tm(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function U3(r){return r.collectionGroup!==null}function lu(r){const e=mt(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const f of e.explicitOrderBy)e.Ie.push(f),t.add(f.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let A=new $n(Er.comparator);return y.filters.forEach((x=>{x.getFlattenedFilters().forEach((_=>{_.isInequality()&&(A=A.add(_.field))}))})),A})(e).forEach((f=>{t.has(f.canonicalString())||f.isKeyField()||e.Ie.push(new hh(f,o))})),t.has(Er.keyField().canonicalString())||e.Ie.push(new hh(Er.keyField(),o))}return e.Ie}function As(r){const e=mt(r);return e.Ee||(e.Ee=z3(e,lu(r))),e.Ee}function z3(r,e){if(r.limitType==="F")return vm(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((u=>{const f=u.dir==="desc"?"asc":"desc";return new hh(u.field,f)}));const t=r.endAt?new ch(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new ch(r.startAt.position,r.startAt.inclusive):null;return vm(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function e1(r,e,t){return new Bh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Fh(r,e){return H1(As(r),As(e))&&r.limitType===e.limitType}function Iw(r){return`${j1(As(r))}|lt:${r.limitType}`}function ll(r){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((u=>xw(u))).join(", ")}]`),Mh(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((u=>(function(y){return`${y.field.canonicalString()} (${y.dir})`})(u))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((u=>xl(u))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((u=>xl(u))).join(",")),`Target(${o})`})(As(r))}; limitType=${r.limitType})`}function Vh(r,e){return e.isFoundDocument()&&(function(o,u){const f=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(f):ot.isDocumentKey(o.path)?o.path.isEqual(f):o.path.isImmediateParentOf(f)})(r,e)&&(function(o,u){for(const f of lu(o))if(!f.field.isKeyField()&&u.data.field(f.field)===null)return!1;return!0})(r,e)&&(function(o,u){for(const f of o.filters)if(!f.matches(u))return!1;return!0})(r,e)&&(function(o,u){return!(o.startAt&&!(function(y,A,x){const _=Im(y,A,x);return y.inclusive?_<=0:_<0})(o.startAt,lu(o),u)||o.endAt&&!(function(y,A,x){const _=Im(y,A,x);return y.inclusive?_>=0:_>0})(o.endAt,lu(o),u))})(r,e)}function j3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Cw(r){return(e,t)=>{let o=!1;for(const u of lu(r)){const f=H3(u,e,t);if(f!==0)return f;o=o||u.field.isKeyField()}return 0}}function H3(r,e,t){const o=r.field.isKeyField()?ot.comparator(e.key,t.key):(function(f,y,A){const x=y.data.field(f),_=A.data.field(f);return x!==null&&_!==null?_l(x,_):at(42886)})(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return at(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[u,f]of o)if(this.equalsFn(u,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(u===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return o.length===1?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ea(this.inner,((t,o)=>{for(const[u,f]of o)e(u,f)}))}isEmpty(){return lw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new An(ot.comparator);function so(){return W3}const vw=new An(ot.comparator);function eu(...r){let e=vw;for(const t of r)e=e.insert(t.key,t);return e}function Tw(r){let e=vw;return r.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Ia(){return uu()}function Sw(){return uu()}function uu(){return new Fa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const G3=new An(ot.comparator),X3=new $n(ot.comparator);function Dt(...r){let e=X3;for(const t of r)e=e.add(t);return e}const q3=new $n(Pt);function K3(){return q3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function Rw(r){return{integerValue:""+r}}function Y3(r,e){return x3(e)?Rw(e):G1(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function Q3(r,e,t){return r instanceof Au?(function(u,f){const y={fields:{[hw]:{stringValue:cw},[dw]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return f&&U1(f)&&(f=Lh(f)),f&&(y.fields[fw]=f),{mapValue:y}})(t,e):r instanceof Iu?bw(r,e):r instanceof Cu?Ow(r,e):(function(u,f){const y=Nw(u,f),A=Sm(y)+Sm(u.Ae);return Zd(y)&&Zd(u.Ae)?Rw(A):G1(u.serializer,A)})(r,e)}function Z3(r,e,t){return r instanceof Iu?bw(r,e):r instanceof Cu?Ow(r,e):t}function Nw(r,e){return r instanceof fh?(function(o){return Zd(o)||(function(f){return!!f&&"doubleValue"in f})(o)})(e)?e:{integerValue:0}:null}class Au extends Uh{}class Iu extends Uh{constructor(e){super(),this.elements=e}}function bw(r,e){const t=Pw(e);for(const o of r.elements)t.some((u=>Rs(u,o)))||t.push(o);return{arrayValue:{values:t}}}class Cu extends Uh{constructor(e){super(),this.elements=e}}function Ow(r,e){let t=Pw(e);for(const o of r.elements)t=t.filter((u=>!Rs(u,o)));return{arrayValue:{values:t}}}class fh extends Uh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sm(r){return Mn(r.integerValue||r.doubleValue)}function Pw(r){return z1(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t){this.field=e,this.transform=t}}function J3(r,e){return r.field.isEqual(e.field)&&(function(o,u){return o instanceof Iu&&u instanceof Iu||o instanceof Cu&&u instanceof Cu?El(o.elements,u.elements,Rs):o instanceof fh&&u instanceof fh?Rs(o.Ae,u.Ae):o instanceof Au&&u instanceof Au})(r.transform,e.transform)}class eS{constructor(e,t){this.version=e,this.transformResults=t}}class Is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Is}static exists(e){return new Is(void 0,e)}static updateTime(e){return new Is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zh{}function Dw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Mw(r.key,Is.none()):new Pu(r.key,r.data,Is.none());{const t=r.data,o=ii.empty();let u=new $n(Er.comparator);for(let f of e.fields)if(!u.has(f)){let y=t.field(f);y===null&&f.length>1&&(f=f.popLast(),y=t.field(f)),y===null?o.delete(f):o.set(f,y),u=u.add(f)}return new ta(r.key,o,new yi(u.toArray()),Is.none())}}function tS(r,e,t){r instanceof Pu?(function(u,f,y){const A=u.value.clone(),x=Nm(u.fieldTransforms,f,y.transformResults);A.setAll(x),f.convertToFoundDocument(y.version,A).setHasCommittedMutations()})(r,e,t):r instanceof ta?(function(u,f,y){if(!Xc(u.precondition,f))return void f.convertToUnknownDocument(y.version);const A=Nm(u.fieldTransforms,f,y.transformResults),x=f.data;x.setAll(kw(u)),x.setAll(A),f.convertToFoundDocument(y.version,x).setHasCommittedMutations()})(r,e,t):(function(u,f,y){f.convertToNoDocument(y.version).setHasCommittedMutations()})(0,e,t)}function cu(r,e,t,o){return r instanceof Pu?(function(f,y,A,x){if(!Xc(f.precondition,y))return A;const _=f.value.clone(),v=bm(f.fieldTransforms,x,y);return _.setAll(v),y.convertToFoundDocument(y.version,_).setHasLocalMutations(),null})(r,e,t,o):r instanceof ta?(function(f,y,A,x){if(!Xc(f.precondition,y))return A;const _=bm(f.fieldTransforms,x,y),v=y.data;return v.setAll(kw(f)),v.setAll(_),y.convertToFoundDocument(y.version,v).setHasLocalMutations(),A===null?null:A.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map((N=>N.field)))})(r,e,t,o):(function(f,y,A){return Xc(f.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):A})(r,e,t)}function nS(r,e){let t=null;for(const o of r.fieldTransforms){const u=e.data.field(o.field),f=Nw(o.transform,u||null);f!=null&&(t===null&&(t=ii.empty()),t.set(o.field,f))}return t||null}function Rm(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&El(o,u,((f,y)=>J3(f,y)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pu extends zh{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class ta extends zh{constructor(e,t,o,u,f=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function kw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}})),e}function Nm(r,e,t){const o=new Map;Kt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let u=0;u<t.length;u++){const f=r[u],y=f.transform,A=e.data.field(f.field);o.set(f.field,Z3(y,A,t[u]))}return o}function bm(r,e,t){const o=new Map;for(const u of r){const f=u.transform,y=t.data.field(u.field);o.set(u.field,Q3(f,y,e))}return o}class Mw extends zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rS extends zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&tS(f,e,o[u])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=cu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=cu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Sw();return this.mutations.forEach((u=>{const f=e.get(u.key),y=f.overlayedDocument;let A=this.applyToLocalView(y,f.mutatedFields);A=t.has(u.key)?null:A;const x=Dw(y,A);x!==null&&o.set(u.key,x),y.isValidDocument()||y.convertToNoDocument(pt.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Dt())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((t,o)=>Rm(t,o)))&&El(this.baseMutations,e.baseMutations,((t,o)=>Rm(t,o)))}}class X1{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){Kt(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let u=(function(){return G3})();const f=e.mutations;for(let y=0;y<f.length;y++)u=u.insert(f[y].key,o[y].version);return new X1(e,t,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un,Lt;function aS(r){switch(r){case xe.OK:return at(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return at(15467,{code:r})}}function Lw(r){if(r===void 0)return io("GRPC error has no .code"),xe.UNKNOWN;switch(r){case Un.OK:return xe.OK;case Un.CANCELLED:return xe.CANCELLED;case Un.UNKNOWN:return xe.UNKNOWN;case Un.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Un.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Un.INTERNAL:return xe.INTERNAL;case Un.UNAVAILABLE:return xe.UNAVAILABLE;case Un.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Un.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Un.NOT_FOUND:return xe.NOT_FOUND;case Un.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Un.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Un.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Un.ABORTED:return xe.ABORTED;case Un.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Un.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Un.DATA_LOSS:return xe.DATA_LOSS;default:return at(39323,{code:r})}}(Lt=Un||(Un={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=new Wo([4294967295,4294967295],0);function Om(r){const e=lS().encode(r),t=new $y;return t.update(e),new Uint8Array(t.digest())}function Pm(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new Wo([t,o],0),new Wo([u,f],0)]}class q1{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new tu(`Invalid padding: ${t}`);if(o<0)throw new tu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Wo.fromNumber(this.ge)}ye(e,t,o){let u=e.add(t.multiply(Wo.fromNumber(o)));return u.compare(uS)===1&&(u=new Wo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Om(e),[o,u]=Pm(t);for(let f=0;f<this.hashCount;f++){const y=this.ye(o,u,f);if(!this.we(y))return!1}return!0}static create(e,t,o){const u=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),y=new q1(f,u,t);return o.forEach((A=>y.insert(A))),y}insert(e){if(this.ge===0)return;const t=Om(e),[o,u]=Pm(t);for(let f=0;f<this.hashCount;f++){const y=this.ye(o,u,f);this.Se(y)}}Se(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,o,u,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const u=new Map;return u.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new jh(pt.min(),u,new An(Pt),so(),Dt())}}class Du{constructor(e,t,o,u,f){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Du(o,t,Dt(),Dt(),Dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,o,u){this.be=e,this.removedTargetIds=t,this.key=o,this.De=u}}class Bw{constructor(e,t){this.targetId=e,this.Ce=t}}class Fw{constructor(e,t,o=_r.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Dm{constructor(){this.ve=0,this.Fe=km(),this.Me=_r.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Dt(),t=Dt(),o=Dt();return this.Fe.forEach(((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:at(38017,{changeType:f})}})),new Du(this.Me,this.xe,e,t,o)}qe(){this.Oe=!1,this.Fe=km()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cS{constructor(e){this.Ge=e,this.ze=new Map,this.je=so(),this.Je=Mc(),this.He=Mc(),this.Ye=new An(Pt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,u)=>{this.rt(u)&&t(u)}))}st(e){const t=e.targetId,o=e.Ce.count,u=this.ot(t);if(u){const f=u.target;if(Jd(f))if(o===0){const y=new ot(f.path);this.et(t,y,Dr.newNoDocument(y,pt.min()))}else Kt(o===1,20013,{expectedCount:o});else{const y=this._t(t);if(y!==o){const A=this.ut(e),x=A?this.ct(A,e,y):1;if(x!==0){this.it(t);const _=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:f=0}=t;let y,A;try{y=Yo(o).toUint8Array()}catch(x){if(x instanceof uw)return wl("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{A=new q1(y,u,f)}catch(x){return wl(x instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return A.ge===0?null:A}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let u=0;return o.forEach((f=>{const y=this.Ge.ht(),A=`projects/${y.projectId}/databases/${y.database}/documents/${f.path.canonicalString()}`;e.mightContain(A)||(this.et(t,f,null),u++)})),u}Tt(e){const t=new Map;this.ze.forEach(((f,y)=>{const A=this.ot(y);if(A){if(f.current&&Jd(A.target)){const x=new ot(A.target.path);this.It(x).has(y)||this.Et(y,x)||this.et(y,x,Dr.newNoDocument(x,e))}f.Be&&(t.set(y,f.ke()),f.qe())}}));let o=Dt();this.He.forEach(((f,y)=>{let A=!0;y.forEachWhile((x=>{const _=this.ot(x);return!_||_.purpose==="TargetPurposeLimboResolution"||(A=!1,!1)})),A&&(o=o.add(f))})),this.je.forEach(((f,y)=>y.setReadTime(e)));const u=new jh(e,t,this.Ye,this.je,o);return this.je=so(),this.Je=Mc(),this.He=Mc(),this.Ye=new An(Pt),u}Xe(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,o),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,t)?u.Qe(t,1):u.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Dm,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new $n(Pt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new $n(Pt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dm),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mc(){return new An(ot.comparator)}function km(){return new An(ot.comparator)}const hS={asc:"ASCENDING",desc:"DESCENDING"},fS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dS={and:"AND",or:"OR"};class gS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function t1(r,e){return r.useProto3Json||Mh(e)?e:{value:e}}function dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function pS(r,e){return dh(r,e.toTimestamp())}function Cs(r){return Kt(!!r,49232),pt.fromTimestamp((function(t){const o=Ko(t);return new cn(o.seconds,o.nanos)})(r))}function K1(r,e){return n1(r,e).canonicalString()}function n1(r,e){const t=(function(u){return new xn(["projects",u.projectId,"databases",u.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Uw(r){const e=xn.fromString(r);return Kt(Gw(e),10190,{key:e.toString()}),e}function r1(r,e){return K1(r.databaseId,e.path)}function Od(r,e){const t=Uw(e);if(t.get(1)!==r.databaseId.projectId)throw new Qe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Qe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ot(jw(t))}function zw(r,e){return K1(r.databaseId,e)}function mS(r){const e=Uw(r);return e.length===4?xn.emptyPath():jw(e)}function i1(r){return new xn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jw(r){return Kt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Mm(r,e,t){return{name:r1(r,e),fields:t.value.mapValue.fields}}function yS(r,e){let t;if("targetChange"in e){e.targetChange;const o=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:at(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],f=(function(_,v){return _.useProto3Json?(Kt(v===void 0||typeof v=="string",58123),_r.fromBase64String(v||"")):(Kt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),_r.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),y=e.targetChange.cause,A=y&&(function(_){const v=_.code===void 0?xe.UNKNOWN:Lw(_.code);return new Qe(v,_.message||"")})(y);t=new Fw(o,u,f,A||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const u=Od(r,o.document.name),f=Cs(o.document.updateTime),y=o.document.createTime?Cs(o.document.createTime):pt.min(),A=new ii({mapValue:{fields:o.document.fields}}),x=Dr.newFoundDocument(u,f,y,A),_=o.targetIds||[],v=o.removedTargetIds||[];t=new qc(_,v,x.key,x)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const u=Od(r,o.document),f=o.readTime?Cs(o.readTime):pt.min(),y=Dr.newNoDocument(u,f),A=o.removedTargetIds||[];t=new qc([],A,y.key,y)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const u=Od(r,o.document),f=o.removedTargetIds||[];t=new qc([],f,u,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:u=0,unchangedNames:f}=o,y=new oS(u,f),A=o.targetId;t=new Bw(A,y)}}return t}function wS(r,e){let t;if(e instanceof Pu)t={update:Mm(r,e.key,e.value)};else if(e instanceof Mw)t={delete:r1(r,e.key)};else if(e instanceof ta)t={update:Mm(r,e.key,e.data),updateMask:SS(e.fieldMask)};else{if(!(e instanceof rS))return at(16599,{Vt:e.type});t={verify:r1(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(f,y){const A=y.transform;if(A instanceof Au)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Iu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof Cu)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof fh)return{fieldPath:y.field.canonicalString(),increment:A.Ae};throw at(20930,{transform:y.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(u,f){return f.updateTime!==void 0?{updateTime:pS(u,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:at(27497)})(r,e.precondition)),t}function ES(r,e){return r&&r.length>0?(Kt(e!==void 0,14353),r.map((t=>(function(u,f){let y=u.updateTime?Cs(u.updateTime):Cs(f);return y.isEqual(pt.min())&&(y=Cs(f)),new eS(y,u.transformResults||[])})(t,e)))):[]}function _S(r,e){return{documents:[zw(r,e.path)]}}function xS(r,e){const t={structuredQuery:{}},o=e.path;let u;e.collectionGroup!==null?(u=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=zw(r,u);const f=(function(_){if(_.length!==0)return Ww(Ns.create(_,"and"))})(e.filters);f&&(t.structuredQuery.where=f);const y=(function(_){if(_.length!==0)return _.map((v=>(function(M){return{field:ul(M.field),direction:CS(M.dir)}})(v)))})(e.orderBy);y&&(t.structuredQuery.orderBy=y);const A=t1(r,e.limit);return A!==null&&(t.structuredQuery.limit=A),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:u}}function AS(r){let e=mS(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){Kt(o===1,65062);const v=t.from[0];v.allDescendants?u=v.collectionId:e=e.child(v.collectionId)}let f=[];t.where&&(f=(function(N){const M=Hw(N);return M instanceof Ns&&Ew(M)?M.getFilters():[M]})(t.where));let y=[];t.orderBy&&(y=(function(N){return N.map((M=>(function(ee){return new hh(cl(ee.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(M)))})(t.orderBy));let A=null;t.limit&&(A=(function(N){let M;return M=typeof N=="object"?N.value:N,Mh(M)?null:M})(t.limit));let x=null;t.startAt&&(x=(function(N){const M=!!N.before,W=N.values||[];return new ch(W,M)})(t.startAt));let _=null;return t.endAt&&(_=(function(N){const M=!N.before,W=N.values||[];return new ch(W,M)})(t.endAt)),V3(e,u,y,f,A,"F",x,_)}function IS(r,e){const t=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:u})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=cl(t.unaryFilter.field);return Qn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=cl(t.unaryFilter.field);return Qn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=cl(t.unaryFilter.field);return Qn.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=cl(t.unaryFilter.field);return Qn.create(y,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Qn.create(cl(t.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ns.create(t.compositeFilter.filters.map((o=>Hw(o))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(t.compositeFilter.op))})(r):at(30097,{filter:r})}function CS(r){return hS[r]}function vS(r){return fS[r]}function TS(r){return dS[r]}function ul(r){return{fieldPath:r.canonicalString()}}function cl(r){return Er.fromServerFormat(r.fieldPath)}function Ww(r){return r instanceof Qn?(function(t){if(t.op==="=="){if(Am(t.value))return{unaryFilter:{field:ul(t.field),op:"IS_NAN"}};if(xm(t.value))return{unaryFilter:{field:ul(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Am(t.value))return{unaryFilter:{field:ul(t.field),op:"IS_NOT_NAN"}};if(xm(t.value))return{unaryFilter:{field:ul(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(t.field),op:vS(t.op),value:t.value}}})(r):r instanceof Ns?(function(t){const o=t.getFilters().map((u=>Ww(u)));return o.length===1?o[0]:{compositeFilter:{op:TS(t.op),filters:o}}})(r):at(54877,{filter:r})}function SS(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Gw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t,o,u,f=pt.min(),y=pt.min(),A=_r.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=A,this.expectedCount=x}withSequenceNumber(e){return new Uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.yt=e}}function NS(r){const e=AS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?e1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.Cn=new OS}addToCollectionParentIndex(e,t){return this.Cn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(qo.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(qo.min())}updateCollectionGroup(e,t,o){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class OS{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new $n(xn.comparator),f=!u.has(o);return this.index[t]=u.add(o),f}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new $n(xn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xw=41943040;class ri{static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(Xw,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LruGarbageCollector",PS=1048576;function Fm([r,e],[t,o]){const u=Pt(r,t);return u===0?Pt(e,o):u}class DS{constructor(e){this.Ir=e,this.buffer=new $n(Fm),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Fm(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kS{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ve(Bm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rl(t)?Ve(Bm,"Ignoring IndexedDB error during garbage collection: ",t):await Sl(t)}await this.Vr(3e5)}))}}class MS{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(kh.ce);const o=new DS(t);return this.mr.forEachTarget(e,(u=>o.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>o.Ar(u))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.mr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Lm)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lm):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let o,u,f,y,A,x,_;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((N=>(N>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),u=this.params.maximumSequenceNumbersToCollect):u=N,y=Date.now(),this.nthSequenceNumber(e,u)))).next((N=>(o=N,A=Date.now(),this.removeTargets(e,o,t)))).next((N=>(f=N,x=Date.now(),this.removeOrphanedDocuments(e,o)))).next((N=>(_=Date.now(),al()<=Ot.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-v}ms
	Determined least recently used ${u} in `+(A-y)+`ms
	Removed ${f} targets in `+(x-A)+`ms
	Removed ${N} documents in `+(_-x)+`ms
Total Duration: ${_-v}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:N}))))}}function LS(r,e){return new MS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.changes=new Fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ye.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t,o,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((u=>(o=u,this.remoteDocumentCache.getEntry(e,t)))).next((u=>(o!==null&&cu(o.mutation,u,yi.empty(),cn.now()),u)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Dt()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Dt()){const u=Ia();return this.populateOverlays(e,u,t).next((()=>this.computeViews(e,t,u,o).next((f=>{let y=eu();return f.forEach(((A,x)=>{y=y.insert(A,x.overlayedDocument)})),y}))))}getOverlayedDocuments(e,t){const o=Ia();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Dt())))}populateOverlays(e,t,o){const u=[];return o.forEach((f=>{t.has(f)||u.push(f)})),this.documentOverlayCache.getOverlays(e,u).next((f=>{f.forEach(((y,A)=>{t.set(y,A)}))}))}computeViews(e,t,o,u){let f=so();const y=uu(),A=(function(){return uu()})();return t.forEach(((x,_)=>{const v=o.get(_.key);u.has(_.key)&&(v===void 0||v.mutation instanceof ta)?f=f.insert(_.key,_):v!==void 0?(y.set(_.key,v.mutation.getFieldMask()),cu(v.mutation,_,v.mutation.getFieldMask(),cn.now())):y.set(_.key,yi.empty())})),this.recalculateAndSaveOverlays(e,f).next((x=>(x.forEach(((_,v)=>y.set(_,v))),t.forEach(((_,v)=>A.set(_,new FS(v,y.get(_)??null)))),A)))}recalculateAndSaveOverlays(e,t){const o=uu();let u=new An(((y,A)=>y-A)),f=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((y=>{for(const A of y)A.keys().forEach((x=>{const _=t.get(x);if(_===null)return;let v=o.get(x)||yi.empty();v=A.applyToLocalView(_,v),o.set(x,v);const N=(u.get(A.batchId)||Dt()).add(x);u=u.insert(A.batchId,N)}))})).next((()=>{const y=[],A=u.getReverseIterator();for(;A.hasNext();){const x=A.getNext(),_=x.key,v=x.value,N=Sw();v.forEach((M=>{if(!f.has(M)){const W=Dw(t.get(M),o.get(M));W!==null&&N.set(M,W),f=f.add(M)}})),y.push(this.documentOverlayCache.saveOverlays(e,_,N))}return ye.waitFor(y)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,u){return(function(y){return ot.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,u):this.getDocumentsMatchingCollectionQuery(e,t,o,u)}getNextDocuments(e,t,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,u).next((f=>{const y=u-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,u-f.size):ye.resolve(Ia());let A=wu,x=f;return y.next((_=>ye.forEach(_,((v,N)=>(A<N.largestBatchId&&(A=N.largestBatchId),f.get(v)?ye.resolve():this.remoteDocumentCache.getEntry(e,v).next((M=>{x=x.insert(v,M)}))))).next((()=>this.populateOverlays(e,_,f))).next((()=>this.computeViews(e,x,_,Dt()))).next((v=>({batchId:A,changes:Tw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((o=>{let u=eu();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,u){const f=t.collectionGroup;let y=eu();return this.indexManager.getCollectionParents(e,f).next((A=>ye.forEach(A,(x=>{const _=(function(N,M){return new Bh(M,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(t,x.child(f));return this.getDocumentsMatchingCollectionQuery(e,_,o,u).next((v=>{v.forEach(((N,M)=>{y=y.insert(N,M)}))}))})).next((()=>y))))}getDocumentsMatchingCollectionQuery(e,t,o,u){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((y=>(f=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,f,u)))).next((y=>{f.forEach(((x,_)=>{const v=_.getKey();y.get(v)===null&&(y=y.insert(v,Dr.newInvalidDocument(v)))}));let A=eu();return y.forEach(((x,_)=>{const v=f.get(x);v!==void 0&&cu(v.mutation,_,yi.empty(),cn.now()),Vh(t,_)&&(A=A.insert(x,_))})),A}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ye.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(u){return{id:u.id,version:u.version,createTime:Cs(u.createTime)}})(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(u){return{name:u.name,query:NS(u.bundledQuery),readTime:Cs(u.readTime)}})(t)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.overlays=new An(ot.comparator),this.qr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ia();return ye.forEach(t,(u=>this.getOverlay(e,u).next((f=>{f!==null&&o.set(u,f)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((u,f)=>{this.St(e,t,f)})),ye.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.qr.get(o);return u!==void 0&&(u.forEach((f=>this.overlays=this.overlays.remove(f))),this.qr.delete(o)),ye.resolve()}getOverlaysForCollection(e,t,o){const u=Ia(),f=t.length+1,y=new ot(t.child("")),A=this.overlays.getIteratorFrom(y);for(;A.hasNext();){const x=A.getNext().value,_=x.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===f&&x.largestBatchId>o&&u.set(x.getKey(),x)}return ye.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let f=new An(((_,v)=>_-v));const y=this.overlays.getIterator();for(;y.hasNext();){const _=y.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>o){let v=f.get(_.largestBatchId);v===null&&(v=Ia(),f=f.insert(_.largestBatchId,v)),v.set(_.getKey(),_)}}const A=Ia(),x=f.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((_,v)=>A.set(_,v))),!(A.size()>=u)););return ye.resolve(A)}St(e,t,o){const u=this.overlays.get(o.key);if(u!==null){const y=this.qr.get(u.largestBatchId).delete(o.key);this.qr.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new sS(t,o));let f=this.qr.get(t);f===void 0&&(f=Dt(),this.qr.set(t,f)),this.qr.set(t,f.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.sessionToken=_r.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.Qr=new $n(ar.$r),this.Ur=new $n(ar.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const o=new ar(e,t);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Gr(new ar(e,t))}zr(e,t){e.forEach((o=>this.removeReference(o,t)))}jr(e){const t=new ot(new xn([])),o=new ar(t,e),u=new ar(t,e+1),f=[];return this.Ur.forEachInRange([o,u],(y=>{this.Gr(y),f.push(y.key)})),f}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new xn([])),o=new ar(t,e),u=new ar(t,e+1);let f=Dt();return this.Ur.forEachInRange([o,u],(y=>{f=f.add(y.key)})),f}containsKey(e){const t=new ar(e,0),o=this.Qr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class ar{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||Pt(e.Yr,t.Yr)}static Kr(e,t){return Pt(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new $n(ar.$r)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,u){const f=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new iS(f,t,o,u);this.mutationQueue.push(y);for(const A of u)this.Zr=this.Zr.add(new ar(A.key,f)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return ye.resolve(y)}lookupMutationBatch(e,t){return ye.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=this.ei(o),f=u<0?0:u;return ye.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?V1:this.tr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new ar(t,0),u=new ar(t,Number.POSITIVE_INFINITY),f=[];return this.Zr.forEachInRange([o,u],(y=>{const A=this.Xr(y.Yr);f.push(A)})),ye.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new $n(Pt);return t.forEach((u=>{const f=new ar(u,0),y=new ar(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([f,y],(A=>{o=o.add(A.Yr)}))})),ye.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let f=o;ot.isDocumentKey(f)||(f=f.child(""));const y=new ar(new ot(f),0);let A=new $n(Pt);return this.Zr.forEachWhile((x=>{const _=x.key.path;return!!o.isPrefixOf(_)&&(_.length===u&&(A=A.add(x.Yr)),!0)}),y),ye.resolve(this.ti(A))}ti(e){const t=[];return e.forEach((o=>{const u=this.Xr(o);u!==null&&t.push(u)})),t}removeMutationBatch(e,t){Kt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return ye.forEach(t.mutations,(u=>{const f=new ar(u.key,t.batchId);return o=o.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,t){const o=new ar(t,0),u=this.Zr.firstAfterOrEqual(o);return ye.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.ri=e,this.docs=(function(){return new An(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),f=u?u.size:0,y=this.ri(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:y}),this.size+=y-f,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ye.resolve(o?o.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let o=so();return t.forEach((u=>{const f=this.docs.get(u);o=o.insert(u,f?f.document.mutableCopy():Dr.newInvalidDocument(u))})),ye.resolve(o)}getDocumentsMatchingQuery(e,t,o,u){let f=so();const y=t.path,A=new ot(y.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(A);for(;x.hasNext();){const{key:_,value:{document:v}}=x.getNext();if(!y.isPrefixOf(_.path))break;_.path.length>y.length+1||y3(m3(v),o)<=0||(u.has(v.key)||Vh(t,v))&&(f=f.insert(v.key,v.mutableCopy()))}return ye.resolve(f)}getAllFromCollectionGroup(e,t,o,u){at(9500)}ii(e,t){return ye.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new GS(this)}getSize(e){return ye.resolve(this.size)}}class GS extends BS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,u)=>{u.isValidDocument()?t.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(o)})),ye.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.persistence=e,this.si=new Fa((t=>j1(t)),H1),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.oi=0,this._i=new Y1,this.targetCount=0,this.ai=Al.ur()}forEachTarget(e,t){return this.si.forEach(((o,u)=>t(u))),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.oi&&(this.oi=t),ye.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Pr(t),ye.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,o){let u=0;const f=[];return this.si.forEach(((y,A)=>{A.sequenceNumber<=t&&o.get(A.targetId)===null&&(this.si.delete(y),f.push(this.removeMatchingKeysForTargetId(e,A.targetId)),u++)})),ye.waitFor(f).next((()=>u))}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const o=this.si.get(t)||null;return ye.resolve(o)}addMatchingKeys(e,t,o){return this._i.Wr(t,o),ye.resolve()}removeMatchingKeys(e,t,o){this._i.zr(t,o);const u=this.persistence.referenceDelegate,f=[];return u&&t.forEach((y=>{f.push(u.markPotentiallyOrphaned(e,y))})),ye.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const o=this._i.Hr(t);return ye.resolve(o)}containsKey(e,t){return ye.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.ui={},this.overlays={},this.ci=new kh(0),this.li=!1,this.li=!0,this.hi=new jS,this.referenceDelegate=e(this),this.Pi=new XS(this),this.indexManager=new bS,this.remoteDocumentCache=(function(u){return new WS(u)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new RS(t),this.Ii=new US(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.ui[e.toKey()];return o||(o=new HS(t,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,o){Ve("MemoryPersistence","Starting transaction:",e);const u=new qS(this.ci.next());return this.referenceDelegate.Ei(),o(u).next((f=>this.referenceDelegate.di(u).next((()=>f)))).toPromise().then((f=>(u.raiseOnCommittedEvent(),f)))}Ai(e,t){return ye.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,t))))}}class qS extends E3{constructor(e){super(),this.currentSequenceNumber=e}}class Q1{constructor(e){this.persistence=e,this.Ri=new Y1,this.Vi=null}static mi(e){return new Q1(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.fi.delete(o.toString()),ye.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.fi.add(o.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((u=>this.fi.add(u.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((u=>{u.forEach((f=>this.fi.add(f.toString())))})).next((()=>o.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.fi,(o=>{const u=ot.fromPath(o);return this.gi(e,u).next((f=>{f||t.removeEntry(u,pt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((o=>{o?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gh{constructor(e,t){this.persistence=e,this.pi=new Fa((o=>A3(o.path)),((o,u)=>o.isEqual(u))),this.garbageCollector=LS(this,t)}static mi(e,t){return new gh(e,t)}Ei(){}di(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((u=>o+u))))}wr(e){let t=0;return this.pr(e,(o=>{t++})).next((()=>t))}pr(e,t){return ye.forEach(this.pi,((o,u)=>this.br(e,o,u).next((f=>f?ye.resolve():t(u)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const u=this.persistence.getRemoteDocumentCache(),f=u.newChangeBuffer();return u.ii(e,(y=>this.br(e,y,t).next((A=>{A||(o++,f.removeEntry(y,pt.min()))})))).next((()=>f.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.pi.set(o,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,o){return this.pi.set(o,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ye.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wc(e.data.value)),t}br(e,t,o){return ye.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const u=this.pi.get(t);return ye.resolve(u!==void 0&&u>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Es=o,this.ds=u}static As(e,t){let o=Dt(),u=Dt();for(const f of t.docChanges)switch(f.type){case 0:o=o.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new Z1(e,t.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mA()?8:_3(kr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,u){const f={result:null};return this.ys(e,t).next((y=>{f.result=y})).next((()=>{if(!f.result)return this.ws(e,t,u,o).next((y=>{f.result=y}))})).next((()=>{if(f.result)return;const y=new KS;return this.Ss(e,t,y).next((A=>{if(f.result=A,this.Vs)return this.bs(e,t,y,A.size)}))})).next((()=>f.result))}bs(e,t,o,u){return o.documentReadCount<this.fs?(al()<=Ot.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",ll(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ye.resolve()):(al()<=Ot.DEBUG&&Ve("QueryEngine","Query:",ll(t),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.gs*u?(al()<=Ot.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",ll(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,As(t))):ye.resolve())}ys(e,t){if(Tm(t))return ye.resolve(null);let o=As(t);return this.indexManager.getIndexType(e,o).next((u=>u===0?null:(t.limit!==null&&u===1&&(t=e1(t,null,"F"),o=As(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((f=>{const y=Dt(...f);return this.ps.getDocuments(e,y).next((A=>this.indexManager.getMinOffset(e,o).next((x=>{const _=this.Ds(t,A);return this.Cs(t,_,y,x.readTime)?this.ys(e,e1(t,null,"F")):this.vs(e,_,t,x)}))))})))))}ws(e,t,o,u){return Tm(t)||u.isEqual(pt.min())?ye.resolve(null):this.ps.getDocuments(e,o).next((f=>{const y=this.Ds(t,f);return this.Cs(t,y,o,u)?ye.resolve(null):(al()<=Ot.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),ll(t)),this.vs(e,y,t,p3(u,wu)).next((A=>A)))}))}Ds(e,t){let o=new $n(Cw(e));return t.forEach(((u,f)=>{Vh(e,f)&&(o=o.add(f))})),o}Cs(e,t,o,u){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}Ss(e,t,o){return al()<=Ot.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",ll(t)),this.ps.getDocumentsMatchingQuery(e,t,qo.min(),o)}vs(e,t,o,u){return this.ps.getDocumentsMatchingQuery(e,o,u).next((f=>(t.forEach((y=>{f=f.insert(y.key,y)})),f)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="LocalStore",QS=3e8;class ZS{constructor(e,t,o,u){this.persistence=e,this.Fs=t,this.serializer=u,this.Ms=new An(Pt),this.xs=new Fa((f=>j1(f)),H1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $S(r,e,t,o){return new ZS(r,e,t,o)}async function Kw(r,e){const t=mt(r);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let u;return t.mutationQueue.getAllMutationBatches(o).next((f=>(u=f,t.Bs(e),t.mutationQueue.getAllMutationBatches(o)))).next((f=>{const y=[],A=[];let x=Dt();for(const _ of u){y.push(_.batchId);for(const v of _.mutations)x=x.add(v.key)}for(const _ of f){A.push(_.batchId);for(const v of _.mutations)x=x.add(v.key)}return t.localDocuments.getDocuments(o,x).next((_=>({Ls:_,removedBatchIds:y,addedBatchIds:A})))}))}))}function JS(r,e){const t=mt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const u=e.batch.keys(),f=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(A,x,_,v){const N=_.batch,M=N.keys();let W=ye.resolve();return M.forEach((ee=>{W=W.next((()=>v.getEntry(x,ee))).next((Y=>{const G=_.docVersions.get(ee);Kt(G!==null,48541),Y.version.compareTo(G)<0&&(N.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),v.addEntry(Y)))}))})),W.next((()=>A.mutationQueue.removeMutationBatch(x,N)))})(t,o,e,f).next((()=>f.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(A){let x=Dt();for(let _=0;_<A.mutationResults.length;++_)A.mutationResults[_].transformResults.length>0&&(x=x.add(A.batch.mutations[_].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(o,u)))}))}function Yw(r){const e=mt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function e4(r,e){const t=mt(r),o=e.snapshotVersion;let u=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(f=>{const y=t.Ns.newChangeBuffer({trackRemovals:!0});u=t.Ms;const A=[];e.targetChanges.forEach(((v,N)=>{const M=u.get(N);if(!M)return;A.push(t.Pi.removeMatchingKeys(f,v.removedDocuments,N).next((()=>t.Pi.addMatchingKeys(f,v.addedDocuments,N))));let W=M.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(N)!==null?W=W.withResumeToken(_r.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):v.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(v.resumeToken,o)),u=u.insert(N,W),(function(Y,G,Ie){return Y.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=QS?!0:Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0})(M,W,v)&&A.push(t.Pi.updateTargetData(f,W))}));let x=so(),_=Dt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&A.push(t.persistence.referenceDelegate.updateLimboDocument(f,v))})),A.push(t4(f,y,e.documentUpdates).next((v=>{x=v.ks,_=v.qs}))),!o.isEqual(pt.min())){const v=t.Pi.getLastRemoteSnapshotVersion(f).next((N=>t.Pi.setTargetsMetadata(f,f.currentSequenceNumber,o)));A.push(v)}return ye.waitFor(A).next((()=>y.apply(f))).next((()=>t.localDocuments.getLocalViewOfDocuments(f,x,_))).next((()=>x))})).then((f=>(t.Ms=u,f)))}function t4(r,e,t){let o=Dt(),u=Dt();return t.forEach((f=>o=o.add(f))),e.getEntries(r,o).next((f=>{let y=so();return t.forEach(((A,x)=>{const _=f.get(A);x.isFoundDocument()!==_.isFoundDocument()&&(u=u.add(A)),x.isNoDocument()&&x.version.isEqual(pt.min())?(e.removeEntry(A,x.readTime),y=y.insert(A,x)):!_.isValidDocument()||x.version.compareTo(_.version)>0||x.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(x),y=y.insert(A,x)):Ve($1,"Ignoring outdated watch update for ",A,". Current version:",_.version," Watch version:",x.version)})),{ks:y,qs:u}}))}function n4(r,e){const t=mt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=V1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function r4(r,e){const t=mt(r);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let u;return t.Pi.getTargetData(o,e).next((f=>f?(u=f,ye.resolve(u)):t.Pi.allocateTargetId(o).next((y=>(u=new Uo(e,y,"TargetPurposeListen",o.currentSequenceNumber),t.Pi.addTargetData(o,u).next((()=>u)))))))})).then((o=>{const u=t.Ms.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(o.targetId,o),t.xs.set(e,o.targetId)),o}))}async function s1(r,e,t){const o=mt(r),u=o.Ms.get(e),f=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",f,(y=>o.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!Rl(y))throw y;Ve($1,`Failed to update sequence numbers for target ${e}: ${y}`)}o.Ms=o.Ms.remove(e),o.xs.delete(u.target)}function Vm(r,e,t){const o=mt(r);let u=pt.min(),f=Dt();return o.persistence.runTransaction("Execute query","readwrite",(y=>(function(x,_,v){const N=mt(x),M=N.xs.get(v);return M!==void 0?ye.resolve(N.Ms.get(M)):N.Pi.getTargetData(_,v)})(o,y,As(e)).next((A=>{if(A)return u=A.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(y,A.targetId).next((x=>{f=x}))})).next((()=>o.Fs.getDocumentsMatchingQuery(y,e,t?u:pt.min(),t?f:Dt()))).next((A=>(i4(o,j3(e),A),{documents:A,Qs:f})))))}function i4(r,e,t){let o=r.Os.get(e)||pt.min();t.forEach(((u,f)=>{f.readTime.compareTo(o)>0&&(o=f.readTime)})),r.Os.set(e,o)}class Um{constructor(){this.activeTargetIds=K3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s4{constructor(){this.Mo=new Um,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,o){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Um,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="ConnectivityMonitor";class jm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ve(zm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ve(zm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function o1(){return Lc===null?Lc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="RestConnection",a4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${o}/databases/${u}`,this.Wo=this.databaseId.database===lh?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Go(e,t,o,u,f){const y=o1(),A=this.zo(e,t.toUriEncodedString());Ve(Pd,`Sending RPC '${e}' ${y}:`,A,o);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,u,f);const{host:_}=new URL(A),v=Ma(_);return this.Jo(e,A,x,o,v).then((N=>(Ve(Pd,`Received RPC '${e}' ${y}: `,N),N)),(N=>{throw wl(Pd,`RPC '${e}' ${y} failed with error: `,N,"url: ",A,"request:",o),N}))}Ho(e,t,o,u,f,y){return this.Go(e,t,o,u,f)}jo(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((u,f)=>e[f]=u)),o&&o.headers.forEach(((u,f)=>e[f]=u))}zo(e,t){const o=a4[e];return`${this.Uo}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="WebChannelConnection";class c4 extends l4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,o,u,f){const y=o1();return new Promise(((A,x)=>{const _=new Jy;_.setWithCredentials(!0),_.listenOnce(ew.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Hc.NO_ERROR:const N=_.getResponseJson();Ve(Or,`XHR for RPC '${e}' ${y} received:`,JSON.stringify(N)),A(N);break;case Hc.TIMEOUT:Ve(Or,`RPC '${e}' ${y} timed out`),x(new Qe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const M=_.getStatus();if(Ve(Or,`RPC '${e}' ${y} failed with status:`,M,"response text:",_.getResponseText()),M>0){let W=_.getResponseJson();Array.isArray(W)&&(W=W[0]);const ee=W?.error;if(ee&&ee.status&&ee.message){const Y=(function(Ie){const ge=Ie.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(ge)>=0?ge:xe.UNKNOWN})(ee.status);x(new Qe(Y,ee.message))}else x(new Qe(xe.UNKNOWN,"Server responded with status "+_.getStatus()))}else x(new Qe(xe.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:y,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Ve(Or,`RPC '${e}' ${y} completed.`)}}));const v=JSON.stringify(u);Ve(Or,`RPC '${e}' ${y} sending request:`,u),_.send(t,"POST",v,o,15)}))}T_(e,t,o){const u=o1(),f=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=rw(),A=nw(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(x.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,t,o),x.encodeInitMessageHeaders=!0;const v=f.join("");Ve(Or,`Creating RPC '${e}' stream ${u}: ${v}`,x);const N=y.createWebChannel(v,x);this.I_(N);let M=!1,W=!1;const ee=new u4({Yo:G=>{W?Ve(Or,`Not sending because RPC '${e}' stream ${u} is closed:`,G):(M||(Ve(Or,`Opening RPC '${e}' stream ${u} transport.`),N.open(),M=!0),Ve(Or,`RPC '${e}' stream ${u} sending:`,G),N.send(G))},Zo:()=>N.close()}),Y=(G,Ie,ge)=>{G.listen(Ie,(ie=>{try{ge(ie)}catch(we){setTimeout((()=>{throw we}),0)}}))};return Y(N,Jl.EventType.OPEN,(()=>{W||(Ve(Or,`RPC '${e}' stream ${u} transport opened.`),ee.o_())})),Y(N,Jl.EventType.CLOSE,(()=>{W||(W=!0,Ve(Or,`RPC '${e}' stream ${u} transport closed`),ee.a_(),this.E_(N))})),Y(N,Jl.EventType.ERROR,(G=>{W||(W=!0,wl(Or,`RPC '${e}' stream ${u} transport errored. Name:`,G.name,"Message:",G.message),ee.a_(new Qe(xe.UNAVAILABLE,"The operation could not be completed")))})),Y(N,Jl.EventType.MESSAGE,(G=>{if(!W){const Ie=G.data[0];Kt(!!Ie,16349);const ge=Ie,ie=ge?.error||ge[0]?.error;if(ie){Ve(Or,`RPC '${e}' stream ${u} received error:`,ie);const we=ie.status;let Ke=(function(U){const B=Un[U];if(B!==void 0)return Lw(B)})(we),Le=ie.message;Ke===void 0&&(Ke=xe.INTERNAL,Le="Unknown error status: "+we+" with message "+ie.message),W=!0,ee.a_(new Qe(Ke,Le)),N.close()}else Ve(Or,`RPC '${e}' stream ${u} received:`,Ie),ee.u_(Ie)}})),Y(A,tw.STAT_EVENT,(G=>{G.stat===Kd.PROXY?Ve(Or,`RPC '${e}' stream ${u} detected buffering proxy`):G.stat===Kd.NOPROXY&&Ve(Or,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r){return new gS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,o=1e3,u=1.5,f=6e4){this.Mi=e,this.timerId=t,this.d_=o,this.A_=u,this.R_=f,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,t-o);u>0&&Ve("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="PersistentStream";class Zw{constructor(e,t,o,u,f,y,A,x){this.Mi=e,this.S_=o,this.b_=u,this.connection=f,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=A,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Qw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,u])=>{this.D_===t&&this.G_(o,u)}),(o=>{e((()=>{const u=new Qe(xe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(u)}))}))}G_(e,t){const o=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{o((()=>this.z_(u)))})),this.stream.onMessage((u=>{o((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ve(Hm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ve(Hm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h4 extends Zw{constructor(e,t,o,u,f,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,y),this.serializer=f}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yS(this.serializer,e),o=(function(f){if(!("targetChange"in f))return pt.min();const y=f.targetChange;return y.targetIds&&y.targetIds.length?pt.min():y.readTime?Cs(y.readTime):pt.min()})(e);return this.listener.H_(t,o)}Y_(e){const t={};t.database=i1(this.serializer),t.addTarget=(function(f,y){let A;const x=y.target;if(A=Jd(x)?{documents:_S(f,x)}:{query:xS(f,x).ft},A.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){A.resumeToken=Vw(f,y.resumeToken);const _=t1(f,y.expectedCount);_!==null&&(A.expectedCount=_)}else if(y.snapshotVersion.compareTo(pt.min())>0){A.readTime=dh(f,y.snapshotVersion.toTimestamp());const _=t1(f,y.expectedCount);_!==null&&(A.expectedCount=_)}return A})(this.serializer,e);const o=IS(this.serializer,e);o&&(t.labels=o),this.q_(t)}Z_(e){const t={};t.database=i1(this.serializer),t.removeTarget=e,this.q_(t)}}class f4 extends Zw{constructor(e,t,o,u,f,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,y),this.serializer=f}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ES(e.writeResults,e.commitTime),o=Cs(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=i1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>wS(this.serializer,o)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{}class g4 extends d4{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new Qe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,y])=>this.connection.Go(e,n1(t,o),u,f,y))).catch((f=>{throw f.name==="FirebaseError"?(f.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Qe(xe.UNKNOWN,f.toString())}))}Ho(e,t,o,u,f){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([y,A])=>this.connection.Ho(e,n1(t,o),u,y,A,f))).catch((y=>{throw y.name==="FirebaseError"?(y.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new Qe(xe.UNKNOWN,y.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class p4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(t),this.aa=!1):Ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class m4{constructor(e,t,o,u,f){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=f,this.Aa.Oo((y=>{o.enqueueAndForget((async()=>{Va(this)&&(Ve(Oa,"Restarting streams for network reachability change."),await(async function(x){const _=mt(x);_.Ea.add(4),await ku(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Wh(_)})(this))}))})),this.Ra=new p4(o,u)}}async function Wh(r){if(Va(r))for(const e of r.da)await e(!0)}async function ku(r){for(const e of r.da)await e(!1)}function $w(r,e){const t=mt(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),n0(t)?t0(t):Nl(t).O_()&&e0(t,e))}function J1(r,e){const t=mt(r),o=Nl(t);t.Ia.delete(e),o.O_()&&Jw(t,e),t.Ia.size===0&&(o.O_()?o.L_():Va(t)&&t.Ra.set("Unknown"))}function e0(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nl(r).Y_(e)}function Jw(r,e){r.Va.Ue(e),Nl(r).Z_(e)}function t0(r){r.Va=new cS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Nl(r).start(),r.Ra.ua()}function n0(r){return Va(r)&&!Nl(r).x_()&&r.Ia.size>0}function Va(r){return mt(r).Ea.size===0}function eE(r){r.Va=void 0}async function y4(r){r.Ra.set("Online")}async function w4(r){r.Ia.forEach(((e,t)=>{e0(r,e)}))}async function E4(r,e){eE(r),n0(r)?(r.Ra.ha(e),t0(r)):r.Ra.set("Unknown")}async function _4(r,e,t){if(r.Ra.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await(async function(u,f){const y=f.cause;for(const A of f.targetIds)u.Ia.has(A)&&(await u.remoteSyncer.rejectListen(A,y),u.Ia.delete(A),u.Va.removeTarget(A))})(r,e)}catch(o){Ve(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await ph(r,o)}else if(e instanceof qc?r.Va.Ze(e):e instanceof Bw?r.Va.st(e):r.Va.tt(e),!t.isEqual(pt.min()))try{const o=await Yw(r.localStore);t.compareTo(o)>=0&&await(function(f,y){const A=f.Va.Tt(y);return A.targetChanges.forEach(((x,_)=>{if(x.resumeToken.approximateByteSize()>0){const v=f.Ia.get(_);v&&f.Ia.set(_,v.withResumeToken(x.resumeToken,y))}})),A.targetMismatches.forEach(((x,_)=>{const v=f.Ia.get(x);if(!v)return;f.Ia.set(x,v.withResumeToken(_r.EMPTY_BYTE_STRING,v.snapshotVersion)),Jw(f,x);const N=new Uo(v.target,x,_,v.sequenceNumber);e0(f,N)})),f.remoteSyncer.applyRemoteEvent(A)})(r,t)}catch(o){Ve(Oa,"Failed to raise snapshot:",o),await ph(r,o)}}async function ph(r,e,t){if(!Rl(e))throw e;r.Ea.add(1),await ku(r),r.Ra.set("Offline"),t||(t=()=>Yw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ve(Oa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Wh(r)}))}function tE(r,e){return e().catch((t=>ph(r,t,e)))}async function Gh(r){const e=mt(r),t=Zo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:V1;for(;x4(e);)try{const u=await n4(e.localStore,o);if(u===null){e.Ta.length===0&&t.L_();break}o=u.batchId,A4(e,u)}catch(u){await ph(e,u)}nE(e)&&rE(e)}function x4(r){return Va(r)&&r.Ta.length<10}function A4(r,e){r.Ta.push(e);const t=Zo(r);t.O_()&&t.X_&&t.ea(e.mutations)}function nE(r){return Va(r)&&!Zo(r).x_()&&r.Ta.length>0}function rE(r){Zo(r).start()}async function I4(r){Zo(r).ra()}async function C4(r){const e=Zo(r);for(const t of r.Ta)e.ea(t.mutations)}async function v4(r,e,t){const o=r.Ta.shift(),u=X1.from(o,e,t);await tE(r,(()=>r.remoteSyncer.applySuccessfulWrite(u))),await Gh(r)}async function T4(r,e){e&&Zo(r).X_&&await(async function(o,u){if((function(y){return aS(y)&&y!==xe.ABORTED})(u.code)){const f=o.Ta.shift();Zo(o).B_(),await tE(o,(()=>o.remoteSyncer.rejectFailedWrite(f.batchId,u))),await Gh(o)}})(r,e),nE(r)&&rE(r)}async function Wm(r,e){const t=mt(r);t.asyncQueue.verifyOperationInProgress(),Ve(Oa,"RemoteStore received new credentials");const o=Va(t);t.Ea.add(3),await ku(t),o&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wh(t)}async function S4(r,e){const t=mt(r);e?(t.Ea.delete(2),await Wh(t)):e||(t.Ea.add(2),await ku(t),t.Ra.set("Unknown"))}function Nl(r){return r.ma||(r.ma=(function(t,o,u){const f=mt(t);return f.sa(),new h4(o,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)})(r.datastore,r.asyncQueue,{Xo:y4.bind(null,r),t_:w4.bind(null,r),r_:E4.bind(null,r),H_:_4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),n0(r)?t0(r):r.Ra.set("Unknown")):(await r.ma.stop(),eE(r))}))),r.ma}function Zo(r){return r.fa||(r.fa=(function(t,o,u){const f=mt(t);return f.sa(),new f4(o,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:I4.bind(null,r),r_:T4.bind(null,r),ta:C4.bind(null,r),na:v4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Gh(r)):(await r.fa.stop(),r.Ta.length>0&&(Ve(Oa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t,o,u,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=f,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((y=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,u,f){const y=Date.now()+o,A=new r0(e,t,y,u,f);return A.start(o),A}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i0(r,e){if(io("AsyncQueue",`${e}: ${r}`),Rl(r))return new Qe(xe.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||ot.comparator(t.key,o.key):(t,o)=>ot.comparator(t.key,o.key),this.keyedMap=eu(),this.sortedSet=new An(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=o.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new ml;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.ga=new An(ot.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Il{constructor(e,t,o,u,f,y,A,x,_){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=f,this.fromCache=y,this.syncStateChanged=A,this.excludesMetadataChanges=x,this.hasCachedResults=_}static fromInitialDocuments(e,t,o,u,f){const y=[];return t.forEach((A=>{y.push({type:0,doc:A})})),new Il(e,t,ml.emptySet(t),y,o,u,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class N4{constructor(){this.queries=Xm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const u=mt(t),f=u.queries;u.queries=Xm(),f.forEach(((y,A)=>{for(const x of A.Sa)x.onError(o)}))})(this,new Qe(xe.ABORTED,"Firestore shutting down"))}}function Xm(){return new Fa((r=>Iw(r)),Fh)}async function b4(r,e){const t=mt(r);let o=3;const u=e.query;let f=t.queries.get(u);f?!f.ba()&&e.Da()&&(o=2):(f=new R4,o=e.Da()?0:1);try{switch(o){case 0:f.wa=await t.onListen(u,!0);break;case 1:f.wa=await t.onListen(u,!1);break;case 2:await t.onFirstRemoteStoreListen(u)}}catch(y){const A=i0(y,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(A)}t.queries.set(u,f),f.Sa.push(e),e.va(t.onlineState),f.wa&&e.Fa(f.wa)&&s0(t)}async function O4(r,e){const t=mt(r),o=e.query;let u=3;const f=t.queries.get(o);if(f){const y=f.Sa.indexOf(e);y>=0&&(f.Sa.splice(y,1),f.Sa.length===0?u=e.Da()?0:1:!f.ba()&&e.Da()&&(u=2))}switch(u){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function P4(r,e){const t=mt(r);let o=!1;for(const u of e){const f=u.query,y=t.queries.get(f);if(y){for(const A of y.Sa)A.Fa(u)&&(o=!0);y.wa=u}}o&&s0(t)}function D4(r,e,t){const o=mt(r),u=o.queries.get(e);if(u)for(const f of u.Sa)f.onError(t);o.queries.delete(e)}function s0(r){r.Ca.forEach((e=>{e.next()}))}var a1,qm;(qm=a1||(a1={})).Ma="default",qm.Cache="cache";class k4{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)u.type!==3&&o.push(u);e=new Il(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==a1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.key=e}}class sE{constructor(e){this.key=e}}class M4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dt(),this.mutatedKeys=Dt(),this.eu=Cw(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,t){const o=t?t.iu:new Gm,u=t?t.tu:this.tu;let f=t?t.mutatedKeys:this.mutatedKeys,y=u,A=!1;const x=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,_=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((v,N)=>{const M=u.get(v),W=Vh(this.query,N)?N:null,ee=!!M&&this.mutatedKeys.has(M.key),Y=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let G=!1;M&&W?M.data.isEqual(W.data)?ee!==Y&&(o.track({type:3,doc:W}),G=!0):this.su(M,W)||(o.track({type:2,doc:W}),G=!0,(x&&this.eu(W,x)>0||_&&this.eu(W,_)<0)&&(A=!0)):!M&&W?(o.track({type:0,doc:W}),G=!0):M&&!W&&(o.track({type:1,doc:M}),G=!0,(x||_)&&(A=!0)),G&&(W?(y=y.add(W),f=Y?f.add(v):f.delete(v)):(y=y.delete(v),f=f.delete(v)))})),this.query.limit!==null)for(;y.size>this.query.limit;){const v=this.query.limitType==="F"?y.last():y.first();y=y.delete(v.key),f=f.delete(v.key),o.track({type:1,doc:v})}return{tu:y,iu:o,Cs:A,mutatedKeys:f}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,u){const f=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const y=e.iu.ya();y.sort(((v,N)=>(function(W,ee){const Y=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:G})}};return Y(W)-Y(ee)})(v.type,N.type)||this.eu(v.doc,N.doc))),this.ou(o),u=u??!1;const A=t&&!u?this._u():[],x=this.Xa.size===0&&this.current&&!u?1:0,_=x!==this.Za;return this.Za=x,y.length!==0||_?{snapshot:new Il(this.query,e.tu,f,y,e.mutatedKeys,x===0,_,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:A}:{au:A}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Dt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const t=[];return e.forEach((o=>{this.Xa.has(o)||t.push(new sE(o))})),this.Xa.forEach((o=>{e.has(o)||t.push(new iE(o))})),t}cu(e){this.Ya=e.Qs,this.Xa=Dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o0="SyncEngine";class L4{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class B4{constructor(e){this.key=e,this.hu=!1}}class F4{constructor(e,t,o,u,f,y){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=y,this.Pu={},this.Tu=new Fa((A=>Iw(A)),Fh),this.Iu=new Map,this.Eu=new Set,this.du=new An(ot.comparator),this.Au=new Map,this.Ru=new Y1,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V4(r,e,t=!0){const o=hE(r);let u;const f=o.Tu.get(e);return f?(o.sharedClientState.addLocalQueryTarget(f.targetId),u=f.view.lu()):u=await oE(o,e,t,!0),u}async function U4(r,e){const t=hE(r);await oE(t,e,!0,!1)}async function oE(r,e,t,o){const u=await r4(r.localStore,As(e)),f=u.targetId,y=r.sharedClientState.addLocalQueryTarget(f,t);let A;return o&&(A=await z4(r,e,f,y==="current",u.resumeToken)),r.isPrimaryClient&&t&&$w(r.remoteStore,u),A}async function z4(r,e,t,o,u){r.pu=(N,M,W)=>(async function(Y,G,Ie,ge){let ie=G.view.ru(Ie);ie.Cs&&(ie=await Vm(Y.localStore,G.query,!1).then((({documents:V})=>G.view.ru(V,ie))));const we=ge&&ge.targetChanges.get(G.targetId),Ke=ge&&ge.targetMismatches.get(G.targetId)!=null,Le=G.view.applyChanges(ie,Y.isPrimaryClient,we,Ke);return Ym(Y,G.targetId,Le.au),Le.snapshot})(r,N,M,W);const f=await Vm(r.localStore,e,!0),y=new M4(e,f.Qs),A=y.ru(f.documents),x=Du.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",u),_=y.applyChanges(A,r.isPrimaryClient,x);Ym(r,t,_.au);const v=new L4(e,t,y);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function j4(r,e,t){const o=mt(r),u=o.Tu.get(e),f=o.Iu.get(u.targetId);if(f.length>1)return o.Iu.set(u.targetId,f.filter((y=>!Fh(y,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await s1(o.localStore,u.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(u.targetId),t&&J1(o.remoteStore,u.targetId),l1(o,u.targetId)})).catch(Sl)):(l1(o,u.targetId),await s1(o.localStore,u.targetId,!0))}async function H4(r,e){const t=mt(r),o=t.Tu.get(e),u=t.Iu.get(o.targetId);t.isPrimaryClient&&u.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),J1(t.remoteStore,o.targetId))}async function W4(r,e,t){const o=Z4(r);try{const u=await(function(y,A){const x=mt(y),_=cn.now(),v=A.reduce(((W,ee)=>W.add(ee.key)),Dt());let N,M;return x.persistence.runTransaction("Locally write mutations","readwrite",(W=>{let ee=so(),Y=Dt();return x.Ns.getEntries(W,v).next((G=>{ee=G,ee.forEach(((Ie,ge)=>{ge.isValidDocument()||(Y=Y.add(Ie))}))})).next((()=>x.localDocuments.getOverlayedDocuments(W,ee))).next((G=>{N=G;const Ie=[];for(const ge of A){const ie=nS(ge,N.get(ge.key).overlayedDocument);ie!=null&&Ie.push(new ta(ge.key,ie,mw(ie.value.mapValue),Is.exists(!0)))}return x.mutationQueue.addMutationBatch(W,_,Ie,A)})).next((G=>{M=G;const Ie=G.applyToLocalDocumentSet(N,Y);return x.documentOverlayCache.saveOverlays(W,G.batchId,Ie)}))})).then((()=>({batchId:M.batchId,changes:Tw(N)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),(function(y,A,x){let _=y.Vu[y.currentUser.toKey()];_||(_=new An(Pt)),_=_.insert(A,x),y.Vu[y.currentUser.toKey()]=_})(o,u.batchId,t),await Mu(o,u.changes),await Gh(o.remoteStore)}catch(u){const f=i0(u,"Failed to persist write");t.reject(f)}}async function aE(r,e){const t=mt(r);try{const o=await e4(t.localStore,e);e.targetChanges.forEach(((u,f)=>{const y=t.Au.get(f);y&&(Kt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?y.hu=!0:u.modifiedDocuments.size>0?Kt(y.hu,14607):u.removedDocuments.size>0&&(Kt(y.hu,42227),y.hu=!1))})),await Mu(t,o,e)}catch(o){await Sl(o)}}function Km(r,e,t){const o=mt(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const u=[];o.Tu.forEach(((f,y)=>{const A=y.view.va(e);A.snapshot&&u.push(A.snapshot)})),(function(y,A){const x=mt(y);x.onlineState=A;let _=!1;x.queries.forEach(((v,N)=>{for(const M of N.Sa)M.va(A)&&(_=!0)})),_&&s0(x)})(o.eventManager,e),u.length&&o.Pu.H_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function G4(r,e,t){const o=mt(r);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.Au.get(e),f=u&&u.key;if(f){let y=new An(ot.comparator);y=y.insert(f,Dr.newNoDocument(f,pt.min()));const A=Dt().add(f),x=new jh(pt.min(),new Map,new An(Pt),y,A);await aE(o,x),o.du=o.du.remove(f),o.Au.delete(e),a0(o)}else await s1(o.localStore,e,!1).then((()=>l1(o,e,t))).catch(Sl)}async function X4(r,e){const t=mt(r),o=e.batch.batchId;try{const u=await JS(t.localStore,e);uE(t,o,null),lE(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Mu(t,u)}catch(u){await Sl(u)}}async function q4(r,e,t){const o=mt(r);try{const u=await(function(y,A){const x=mt(y);return x.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let v;return x.mutationQueue.lookupMutationBatch(_,A).next((N=>(Kt(N!==null,37113),v=N.keys(),x.mutationQueue.removeMutationBatch(_,N)))).next((()=>x.mutationQueue.performConsistencyCheck(_))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(_,v,A))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,v))).next((()=>x.localDocuments.getDocuments(_,v)))}))})(o.localStore,e);uE(o,e,t),lE(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Mu(o,u)}catch(u){await Sl(u)}}function lE(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function uE(r,e,t){const o=mt(r);let u=o.Vu[o.currentUser.toKey()];if(u){const f=u.get(e);f&&(t?f.reject(t):f.resolve(),u=u.remove(e)),o.Vu[o.currentUser.toKey()]=u}}function l1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),t&&r.Pu.yu(o,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((o=>{r.Ru.containsKey(o)||cE(r,o)}))}function cE(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(J1(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),a0(r))}function Ym(r,e,t){for(const o of t)o instanceof iE?(r.Ru.addReference(o.key,e),K4(r,o)):o instanceof sE?(Ve(o0,"Document no longer in limbo: "+o.key),r.Ru.removeReference(o.key,e),r.Ru.containsKey(o.key)||cE(r,o.key)):at(19791,{wu:o})}function K4(r,e){const t=e.key,o=t.path.canonicalString();r.du.get(t)||r.Eu.has(o)||(Ve(o0,"New document in limbo: "+t),r.Eu.add(o),a0(r))}function a0(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ot(xn.fromString(e)),o=r.fu.next();r.Au.set(o,new B4(t)),r.du=r.du.insert(t,o),$w(r.remoteStore,new Uo(As(W1(t.path)),o,"TargetPurposeLimboResolution",kh.ce))}}async function Mu(r,e,t){const o=mt(r),u=[],f=[],y=[];o.Tu.isEmpty()||(o.Tu.forEach(((A,x)=>{y.push(o.pu(x,e,t).then((_=>{if((_||t)&&o.isPrimaryClient){const v=_?!_.fromCache:t?.targetChanges.get(x.targetId)?.current;o.sharedClientState.updateQueryState(x.targetId,v?"current":"not-current")}if(_){u.push(_);const v=Z1.As(x.targetId,_);f.push(v)}})))})),await Promise.all(y),o.Pu.H_(u),await(async function(x,_){const v=mt(x);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>ye.forEach(_,(M=>ye.forEach(M.Es,(W=>v.persistence.referenceDelegate.addReference(N,M.targetId,W))).next((()=>ye.forEach(M.ds,(W=>v.persistence.referenceDelegate.removeReference(N,M.targetId,W)))))))))}catch(N){if(!Rl(N))throw N;Ve($1,"Failed to update sequence numbers: "+N)}for(const N of _){const M=N.targetId;if(!N.fromCache){const W=v.Ms.get(M),ee=W.snapshotVersion,Y=W.withLastLimboFreeSnapshotVersion(ee);v.Ms=v.Ms.insert(M,Y)}}})(o.localStore,f))}async function Y4(r,e){const t=mt(r);if(!t.currentUser.isEqual(e)){Ve(o0,"User change. New user:",e.toKey());const o=await Kw(t.localStore,e);t.currentUser=e,(function(f,y){f.mu.forEach((A=>{A.forEach((x=>{x.reject(new Qe(xe.CANCELLED,y))}))})),f.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Mu(t,o.Ls)}}function Q4(r,e){const t=mt(r),o=t.Au.get(e);if(o&&o.hu)return Dt().add(o.key);{let u=Dt();const f=t.Iu.get(e);if(!f)return u;for(const y of f){const A=t.Tu.get(y);u=u.unionWith(A.view.nu)}return u}}function hE(r){const e=mt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=aE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G4.bind(null,e),e.Pu.H_=P4.bind(null,e.eventManager),e.Pu.yu=D4.bind(null,e.eventManager),e}function Z4(r){const e=mt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q4.bind(null,e),e}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $S(this.persistence,new YS,e.initialUser,this.serializer)}Cu(e){return new qw(Q1.mi,this.serializer)}Du(e){return new s4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class $4 extends mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Kt(this.persistence.referenceDelegate instanceof gh,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new kS(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new qw((o=>gh.mi(o,t)),this.serializer)}}class u1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Km(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y4.bind(null,this.syncEngine),await S4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N4})()}createDatastore(e){const t=Hh(e.databaseInfo.databaseId),o=(function(f){return new c4(f)})(e.databaseInfo);return(function(f,y,A,x){return new g4(f,y,A,x)})(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,u,f,y,A){return new m4(o,u,f,y,A)})(this.localStore,this.datastore,e.asyncQueue,(t=>Km(this.syncEngine,t,0)),(function(){return jm.v()?new jm:new o4})())}createSyncEngine(e,t){return(function(u,f,y,A,x,_,v){const N=new F4(u,f,y,A,x,_);return v&&(N.gu=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const o=mt(t);Ve(Oa,"RemoteStore shutting down."),o.Ea.add(5),await ku(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}u1.provider={build:()=>new u1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="FirestoreClient";class eR{constructor(e,t,o,u,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Pr.UNAUTHENTICATED,this.clientId=B1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(o,(async y=>{Ve($o,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y})),this.appCheckCredentials.start(o,(y=>(Ve($o,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=i0(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function kd(r,e){r.asyncQueue.verifyOperationInProgress(),Ve($o,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener((async u=>{o.isEqual(u)||(await Kw(e.localStore,u),o=u)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Qm(r,e){r.asyncQueue.verifyOperationInProgress();const t=await tR(r);Ve($o,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((o=>Wm(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,u)=>Wm(e.remoteStore,u))),r._onlineComponents=e}async function tR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ve($o,"Using user provided OfflineComponentProvider");try{await kd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(u){return u.name==="FirebaseError"?u.code===xe.FAILED_PRECONDITION||u.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(t))throw t;wl("Error using user provided cache. Falling back to memory cache: "+t),await kd(r,new mh)}}else Ve($o,"Using default OfflineComponentProvider"),await kd(r,new $4(void 0));return r._offlineComponents}async function fE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ve($o,"Using user provided OnlineComponentProvider"),await Qm(r,r._uninitializedComponentsProvider._online)):(Ve($o,"Using default OnlineComponentProvider"),await Qm(r,new u1))),r._onlineComponents}function nR(r){return fE(r).then((e=>e.syncEngine))}async function rR(r){const e=await fE(r),t=e.eventManager;return t.onListen=V4.bind(null,e.syncEngine),t.onUnlisten=j4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H4.bind(null,e.syncEngine),t}function iR(r,e,t={}){const o=new Go;return r.asyncQueue.enqueueAndForget((async()=>(function(f,y,A,x,_){const v=new J4({next:M=>{v.Nu(),y.enqueueAndForget((()=>O4(f,N)));const W=M.docs.has(A);!W&&M.fromCache?_.reject(new Qe(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&M.fromCache&&x&&x.source==="server"?_.reject(new Qe(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),N=new k4(W1(A.path),v,{includeMetadataChanges:!0,qa:!0});return b4(f,N)})(await rR(r),r.asyncQueue,e,t,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firestore.googleapis.com",$m=!0;class Jm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gE,this.ssl=$m}else this.host=e.host,this.ssl=e.ssl??$m;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PS)throw new Qe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dE(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,u){return o.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l0{constructor(e,t,o,u){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new r3;switch(o.type){case"firstParty":return new a3(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Qe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=Zm.get(t);o&&(Ve("ComponentProvider","Removing Datastore"),Zm.delete(t),o.terminate())})(this),Promise.resolve()}}function sR(r,e,t,o={}){r=ba(r,l0);const u=Ma(e),f=r._getSettings(),y={...f,emulatorOptions:r._getEmulatorOptions()},A=`${e}:${t}`;u&&(w1(`https://${A}`),E1("Firestore",!0)),f.host!==gE&&f.host!==A&&wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...f,host:A,ssl:u,emulatorOptions:o};if(!Xo(x,y)&&(r._setSettings(x),o.mockUserToken)){let _,v;if(typeof o.mockUserToken=="string")_=o.mockUserToken,v=Pr.MOCK_USER;else{_=H2(o.mockUserToken,r._app?.options.projectId);const N=o.mockUserToken.sub||o.mockUserToken.user_id;if(!N)throw new Qe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Pr(N)}r._authCredentials=new i3(new sw(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new u0(this.firestore,e,this._query)}}class Zn{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}toJSON(){return{type:Zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Ou(t,Zn._jsonSchema))return new Zn(e,o||null,new ot(xn.fromString(t.referencePath)))}}Zn._jsonSchemaVersion="firestore/documentReference/1.0",Zn._jsonSchema={type:jn("string",Zn._jsonSchemaVersion),referencePath:jn("string")};class vu extends u0{constructor(e,t,o){super(e,t,W1(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new ot(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function hu(r,e,...t){if(r=lr(r),arguments.length===1&&(e=B1.newId()),d3("doc","path",e),r instanceof l0){const o=xn.fromString(e,...t);return dm(o),new Zn(r,null,new ot(o))}{if(!(r instanceof Zn||r instanceof vu))throw new Qe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(xn.fromString(e,...t));return dm(o),new Zn(r.firestore,r instanceof vu?r.converter:null,new ot(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="AsyncQueue";class t2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Qw(this,"async_queue_retry"),this._c=()=>{const o=Dd();o&&Ve(e2,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Dd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Go;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Rl(e))throw e;Ve(e2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",n2(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const u=r0.createAndSchedule(this,e,t,o,(f=>this.hc(f)));return this.tc.push(u),u}uc(){this.nc&&at(47125,{Pc:n2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function n2(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Xh extends l0{constructor(e,t,o,u){super(e,t,o,u),this.type="firestore",this._queue=new t2,this._persistenceKey=u?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t2(e),this._firestoreClient=void 0,await e}}}function oR(r,e){const t=typeof r=="object"?r:Rh(),o=typeof r=="string"?r:lh,u=Jo(t,"firestore").getImmediate({identifier:o});if(!u._initialized){const f=U2("firestore");f&&sR(u,...f)}return u}function pE(r){if(r._terminated)throw new Qe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||aR(r),r._firestoreClient}function aR(r){const e=r._freezeSettings(),t=(function(u,f,y,A){return new v3(u,f,y,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,dE(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new eR(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const f=u?._online.build();return{_offline:u?._offline.build(f),_online:f}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(_r.fromBase64String(e))}catch(t){throw new Qe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mi(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,Mi._jsonSchema))return Mi.fromBase64String(e.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:jn("string",Mi._jsonSchemaVersion),bytes:jn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Qe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,vs._jsonSchema))return new vs(e.latitude,e.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:jn("string",vs._jsonSchemaVersion),latitude:jn("number"),longitude:jn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,u){if(o.length!==u.length)return!1;for(let f=0;f<o.length;++f)if(o[f]!==u[f])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ts(e.vectorValues);throw new Qe(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:jn("string",Ts._jsonSchemaVersion),vectorValues:jn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=/^__.*__$/;class uR{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class mE{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:r})}}class c0{constructor(e,t,o,u,f,y){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=u,f===void 0&&this.Rc(),this.fieldTransforms=f||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new c0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),o=this.Vc({path:t,fc:!1});return o.gc(e),o}yc(e){const t=this.path?.child(e),o=this.Vc({path:t,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yE(this.Ac)&&lR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cR{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Hh(e)}Cc(e,t,o,u=!1){return new c0({Ac:e,methodName:t,Dc:o,path:Er.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wE(r){const e=r._freezeSettings(),t=Hh(r._databaseId);return new cR(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hR(r,e,t,o,u,f={}){const y=r.Cc(f.merge||f.mergeFields?2:0,e,t,u);f0("Data must be an object, but it was:",y,o);const A=EE(o,y);let x,_;if(f.merge)x=new yi(y.fieldMask),_=y.fieldTransforms;else if(f.mergeFields){const v=[];for(const N of f.mergeFields){const M=c1(e,N,t);if(!y.contains(M))throw new Qe(xe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);xE(v,M)||v.push(M)}x=new yi(v),_=y.fieldTransforms.filter((N=>x.covers(N.field)))}else x=null,_=y.fieldTransforms;return new uR(new ii(A),x,_)}class Yh extends Kh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}class h0 extends Kh{_toFieldTransform(e){return new $3(e.path,new Au)}isEqual(e){return e instanceof h0}}function fR(r,e,t,o){const u=r.Cc(1,e,t);f0("Data must be an object, but it was:",u,o);const f=[],y=ii.empty();ea(o,((x,_)=>{const v=d0(e,x,t);_=lr(_);const N=u.yc(v);if(_ instanceof Yh)f.push(v);else{const M=Qh(_,N);M!=null&&(f.push(v),y.set(v,M))}}));const A=new yi(f);return new mE(y,A,u.fieldTransforms)}function dR(r,e,t,o,u,f){const y=r.Cc(1,e,t),A=[c1(e,o,t)],x=[u];if(f.length%2!=0)throw new Qe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<f.length;M+=2)A.push(c1(e,f[M])),x.push(f[M+1]);const _=[],v=ii.empty();for(let M=A.length-1;M>=0;--M)if(!xE(_,A[M])){const W=A[M];let ee=x[M];ee=lr(ee);const Y=y.yc(W);if(ee instanceof Yh)_.push(W);else{const G=Qh(ee,Y);G!=null&&(_.push(W),v.set(W,G))}}const N=new yi(_);return new mE(v,N,y.fieldTransforms)}function Qh(r,e){if(_E(r=lr(r)))return f0("Unsupported field value:",e,r),EE(r,e);if(r instanceof Kh)return(function(o,u){if(!yE(u.Ac))throw u.Sc(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${o._methodName}() is not currently supported inside arrays`);const f=o._toFieldTransform(u);f&&u.fieldTransforms.push(f)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,u){const f=[];let y=0;for(const A of o){let x=Qh(A,u.wc(y));x==null&&(x={nullValue:"NULL_VALUE"}),f.push(x),y++}return{arrayValue:{values:f}}})(r,e)}return(function(o,u){if((o=lr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return Y3(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const f=cn.fromDate(o);return{timestampValue:dh(u.serializer,f)}}if(o instanceof cn){const f=new cn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:dh(u.serializer,f)}}if(o instanceof vs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Mi)return{bytesValue:Vw(u.serializer,o._byteString)};if(o instanceof Zn){const f=u.databaseId,y=o.firestore._databaseId;if(!y.isEqual(f))throw u.Sc(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:K1(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof Ts)return(function(y,A){return{mapValue:{fields:{[gw]:{stringValue:pw},[uh]:{arrayValue:{values:y.toArray().map((_=>{if(typeof _!="number")throw A.Sc("VectorValues must only contain numeric values.");return G1(A.serializer,_)}))}}}}}})(o,u);throw u.Sc(`Unsupported field value: ${F1(o)}`)})(r,e)}function EE(r,e){const t={};return lw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ea(r,((o,u)=>{const f=Qh(u,e.mc(o));f!=null&&(t[o]=f)})),{mapValue:{fields:t}}}function _E(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof cn||r instanceof vs||r instanceof Mi||r instanceof Zn||r instanceof Kh||r instanceof Ts)}function f0(r,e,t){if(!_E(t)||!ow(t)){const o=F1(t);throw o==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+o)}}function c1(r,e,t){if((e=lr(e))instanceof qh)return e._internalPath;if(typeof e=="string")return d0(r,e);throw yh("Field path arguments must be of type string or ",r,!1,void 0,t)}const gR=new RegExp("[~\\*/\\[\\]]");function d0(r,e,t){if(e.search(gR)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qh(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function yh(r,e,t,o,u){const f=o&&!o.isEmpty(),y=u!==void 0;let A=`Function ${e}() called with invalid data`;t&&(A+=" (via `toFirestore()`)"),A+=". ";let x="";return(f||y)&&(x+=" (found",f&&(x+=` in field ${o}`),y&&(x+=` in document ${u}`),x+=")"),new Qe(xe.INVALID_ARGUMENT,A+r+x)}function xE(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t,o,u,f){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pR extends AE{data(){return super.data()}}function IE(r,e){return typeof e=="string"?d0(r,e):e instanceof qh?e._internalPath:e._delegate._internalPath}class mR{convertValue(e,t="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return ea(e,((u,f)=>{o[u]=this.convertValue(f,t)})),o}convertVectorValue(e){const t=e.fields?.[uh].arrayValue?.values?.map((o=>Mn(o.doubleValue)));return new Ts(t)}convertGeoPoint(e){return new vs(Mn(e.latitude),Mn(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Lh(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const t=Ko(e);return new cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=xn.fromString(e);Kt(Gw(o),9688,{name:e});const u=new _u(o.get(1),o.get(3)),f=new ot(o.popFirst(5));return u.isEqual(t)||io(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(r,e,t){let o;return o=r?r.toFirestore(e):e,o}class nu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class va extends AE{constructor(e,t,o,u,f,y){super(e,t,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(IE("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=va._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}va._jsonSchemaVersion="firestore/documentSnapshot/1.0",va._jsonSchema={type:jn("string",va._jsonSchemaVersion),bundleSource:jn("string","DocumentSnapshot"),bundleName:jn("string"),bundle:jn("string")};class Kc extends va{data(e={}){return super.data(e)}}class fu{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new nu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Kc(this._firestore,this._userDataWriter,o.key,o,new nu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(u,f){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map((A=>{const x=new Kc(u._firestore,u._userDataWriter,A.doc.key,A.doc,new nu(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);return A.doc,{type:"added",doc:x,oldIndex:-1,newIndex:y++}}))}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((A=>f||A.type!==3)).map((A=>{const x=new Kc(u._firestore,u._userDataWriter,A.doc.key,A.doc,new nu(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);let _=-1,v=-1;return A.type!==0&&(_=y.indexOf(A.doc.key),y=y.delete(A.doc.key)),A.type!==1&&(y=y.add(A.doc),v=y.indexOf(A.doc.key)),{type:wR(A.type),doc:x,oldIndex:_,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],u=[];return this.docs.forEach((f=>{f._document!==null&&(t.push(f._document),o.push(this._userDataWriter.convertObjectMap(f._document.data.value.mapValue.fields,"previous")),u.push(f.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(r){r=ba(r,Zn);const e=ba(r.firestore,Xh);return iR(pE(e),r._key).then((t=>xR(e,r,t)))}fu._jsonSchemaVersion="firestore/querySnapshot/1.0",fu._jsonSchema={type:jn("string",fu._jsonSchemaVersion),bundleSource:jn("string","QuerySnapshot"),bundleName:jn("string"),bundle:jn("string")};class ER extends mR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function _R(r,e,t){r=ba(r,Zn);const o=ba(r.firestore,Xh),u=yR(r.converter,e);return vE(o,[hR(wE(o),"setDoc",r._key,u,r.converter!==null,t).toMutation(r._key,Is.none())])}function CE(r,e,t,...o){r=ba(r,Zn);const u=ba(r.firestore,Xh),f=wE(u);let y;return y=typeof(e=lr(e))=="string"||e instanceof qh?dR(f,"updateDoc",r._key,e,t,o):fR(f,"updateDoc",r._key,e),vE(u,[y.toMutation(r._key,Is.exists(!0))])}function vE(r,e){return(function(o,u){const f=new Go;return o.asyncQueue.enqueueAndForget((async()=>W4(await nR(o),u,f))),f.promise})(pE(r),e)}function xR(r,e,t){const o=t.docs.get(e._key),u=new ER(r);return new va(r,u,e._key,o,new nu(t.hasPendingWrites,t.fromCache),e.converter)}function AR(){return new h0("serverTimestamp")}(function(e,t=!0){(function(u){Tl=u})(Ba),ts(new Li("firestore",((o,{instanceIdentifier:u,options:f})=>{const y=o.getProvider("app").getImmediate(),A=new Xh(new s3(o.getProvider("auth-internal")),new l3(y,o.getProvider("app-check-internal")),(function(_,v){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Qe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(_.options.projectId,v)})(y,u),y);return f={useFetchStreams:t,...f},A._setSettings(f),A}),"PUBLIC").setMultipleInstances(!0)),si(um,cm,e),si(um,cm,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="firebasestorage.googleapis.com",IR="storageBucket",CR=120*1e3,vR=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Bi{constructor(e,t,o=0){super(Md(e),`Firebase Storage: ${t} (${Md(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Os.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Md(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bs;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bs||(bs={}));function Md(r){return"storage/"+r}function TR(){const r="An unknown error occurred, please check the error payload for server response.";return new Os(bs.UNKNOWN,r)}function SR(){return new Os(bs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RR(){return new Os(bs.CANCELED,"User canceled the upload/download.")}function NR(r){return new Os(bs.INVALID_URL,"Invalid URL '"+r+"'.")}function bR(r){return new Os(bs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function r2(r){return new Os(bs.INVALID_ARGUMENT,r)}function SE(){return new Os(bs.APP_DELETED,"The Firebase app was deleted.")}function OR(r){return new Os(bs.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let o;try{o=Ji.makeFromUrl(e,t)}catch{return new Ji(e,"")}if(o.path==="")return o;throw bR(e)}static makeFromUrl(e,t){let o=null;const u="([A-Za-z0-9.\\-_]+)";function f(we){we.path.charAt(we.path.length-1)==="/"&&(we.path_=we.path_.slice(0,-1))}const y="(/(.*))?$",A=new RegExp("^gs://"+u+y,"i"),x={bucket:1,path:3};function _(we){we.path_=decodeURIComponent(we.path)}const v="v[A-Za-z0-9_]+",N=t.replace(/[.]/g,"\\."),M="(/([^?#]*).*)?$",W=new RegExp(`^https?://${N}/${v}/b/${u}/o${M}`,"i"),ee={bucket:1,path:3},Y=t===TE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,G="([^?#]*)",Ie=new RegExp(`^https?://${Y}/${u}/${G}`,"i"),ie=[{regex:A,indices:x,postModify:f},{regex:W,indices:ee,postModify:_},{regex:Ie,indices:{bucket:1,path:2},postModify:_}];for(let we=0;we<ie.length;we++){const Ke=ie[we],Le=Ke.regex.exec(e);if(Le){const V=Le[Ke.indices.bucket];let U=Le[Ke.indices.path];U||(U=""),o=new Ji(V,U),Ke.postModify(o);break}}if(o==null)throw NR(e);return o}}class PR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(r,e,t){let o=1,u=null,f=null,y=!1,A=0;function x(){return A===2}let _=!1;function v(...G){_||(_=!0,e.apply(null,G))}function N(G){u=setTimeout(()=>{u=null,r(W,x())},G)}function M(){f&&clearTimeout(f)}function W(G,...Ie){if(_){M();return}if(G){M(),v.call(null,G,...Ie);return}if(x()||y){M(),v.call(null,G,...Ie);return}o<64&&(o*=2);let ie;A===1?(A=2,ie=0):ie=(o+Math.random())*1e3,N(ie)}let ee=!1;function Y(G){ee||(ee=!0,M(),!_&&(u!==null?(G||(A=2),clearTimeout(u),N(0)):G||(A=1)))}return N(0),f=setTimeout(()=>{y=!0,Y(!0)},t),Y}function kR(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(r){return r!==void 0}function i2(r,e,t,o){if(o<e)throw r2(`Invalid value for '${r}'. Expected ${e} or greater.`);if(o>t)throw r2(`Invalid value for '${r}'. Expected ${t} or less.`)}function LR(r){const e=encodeURIComponent;let t="?";for(const o in r)if(r.hasOwnProperty(o)){const u=e(o)+"="+e(r[o]);t=t+u+"&"}return t=t.slice(0,-1),t}var wh;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(wh||(wh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r,e){const t=r>=500&&r<600,u=[408,429].indexOf(r)!==-1,f=e.indexOf(r)!==-1;return t||u||f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t,o,u,f,y,A,x,_,v,N,M=!0,W=!1){this.url_=e,this.method_=t,this.headers_=o,this.body_=u,this.successCodes_=f,this.additionalRetryCodes_=y,this.callback_=A,this.errorCallback_=x,this.timeout_=_,this.progressCallback_=v,this.connectionFactory_=N,this.retry=M,this.isUsingEmulator=W,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ee,Y)=>{this.resolve_=ee,this.reject_=Y,this.start_()})}start_(){const e=(o,u)=>{if(u){o(!1,new Bc(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const y=A=>{const x=A.loaded,_=A.lengthComputable?A.total:-1;this.progressCallback_!==null&&this.progressCallback_(x,_)};this.progressCallback_!==null&&f.addUploadProgressListener(y),f.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(y),this.pendingConnection_=null;const A=f.getErrorCode()===wh.NO_ERROR,x=f.getStatus();if(!A||BR(x,this.additionalRetryCodes_)&&this.retry){const v=f.getErrorCode()===wh.ABORT;o(!1,new Bc(!1,null,v));return}const _=this.successCodes_.indexOf(x)!==-1;o(!0,new Bc(_,f))})},t=(o,u)=>{const f=this.resolve_,y=this.reject_,A=u.connection;if(u.wasSuccessCode)try{const x=this.callback_(A,A.getResponse());MR(x)?f(x):f()}catch(x){y(x)}else if(A!==null){const x=TR();x.serverResponse=A.getErrorText(),this.errorCallback_?y(this.errorCallback_(A,x)):y(x)}else if(u.canceled){const x=this.appDelete_?SE():RR();y(x)}else{const x=SR();y(x)}};this.canceled_?t(!1,new Bc(!1,null,!0)):this.backoffId_=DR(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bc{constructor(e,t,o){this.wasSuccessCode=e,this.connection=t,this.canceled=!!o}}function VR(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function UR(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zR(r,e){e&&(r["X-Firebase-GMPID"]=e)}function jR(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function HR(r,e,t,o,u,f,y=!0,A=!1){const x=LR(r.urlParams),_=r.url+x,v=Object.assign({},r.headers);return zR(v,e),VR(v,t),UR(v,f),jR(v,o),new FR(_,r.method,v,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,u,y,A)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function GR(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this._service=e,t instanceof Ji?this._location=t:this._location=Ji.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Eh(e,t)}get root(){const e=new Ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GR(this._location.path)}get storage(){return this._service}get parent(){const e=WR(this._location.path);if(e===null)return null;const t=new Ji(this._location.bucket,e);return new Eh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw OR(e)}}function s2(r,e){const t=e?.[IR];return t==null?null:Ji.makeFromBucketSpec(t,r)}function XR(r,e,t,o={}){r.host=`${e}:${t}`;const u=Ma(e);u&&(w1(`https://${r.host}/b`),E1("Storage",!0)),r._isUsingEmulator=!0,r._protocol=u?"https":"http";const{mockUserToken:f}=o;f&&(r._overrideAuthToken=typeof f=="string"?f:H2(f,r.app.options.projectId))}class qR{constructor(e,t,o,u,f,y=!1){this.app=e,this._authProvider=t,this._appCheckProvider=o,this._url=u,this._firebaseVersion=f,this._isUsingEmulator=y,this._bucket=null,this._host=TE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CR,this._maxUploadRetryTime=vR,this._requests=new Set,u!=null?this._bucket=Ji.makeFromBucketSpec(u,this._host):this._bucket=s2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ji.makeFromBucketSpec(this._url,e):this._bucket=s2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eh(this,e)}_makeRequest(e,t,o,u,f=!0){if(this._deleted)return new PR(SE());{const y=HR(e,this._appId,o,u,t,this._firebaseVersion,f,this._isUsingEmulator);return this._requests.add(y),y.getPromise().then(()=>this._requests.delete(y),()=>this._requests.delete(y)),y}}async makeRequestWithTokens(e,t){const[o,u]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,o,u).getPromise()}}const o2="@firebase/storage",a2="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="storage";function KR(r=Rh(),e){r=lr(r);const o=Jo(r,RE).getImmediate({identifier:e}),u=U2("storage");return u&&YR(o,...u),o}function YR(r,e,t,o={}){XR(r,e,t,o)}function QR(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),u=r.getProvider("app-check-internal");return new qR(t,o,u,e,Ba)}function ZR(){ts(new Li(RE,QR,"PUBLIC").setMultipleInstances(!0)),si(o2,a2,""),si(o2,a2,"esm2020")}ZR();const $R={apiKey:"AIzaSyCLL-yZ9m6vgZ04Yj0x-wDjtxkJOzCiEMc",authDomain:"basecamp-app-e6386.firebaseapp.com",projectId:"basecamp-app-e6386",storageBucket:"basecamp-app-e6386.firebasestorage.app",messagingSenderId:"929651436196",appId:"1:929651436196:web:790b5001a09d8db991d431",measurementId:"G-L0L3JE5SCM"},Zh=Q2($R);JC(Zh);const Yc=t3(Zh),du=oR(Zh);KR(Zh);const NE=Re.createContext(),JR=({children:r})=>{const[e,t]=Re.useState(null),[o,u]=Re.useState(null);return Re.useEffect(()=>{const f=Uy(Yc,async y=>{if(y){t(y);const A=hu(du,"profiles",y.uid),x=await h1(A);x.exists()?u(x.data()):u(null)}else t(null),u(null)});return()=>f()},[]),me.jsx(NE.Provider,{value:{user:e,setUser:t,profile:o,setProfile:u},children:r})},e8=()=>Re.useContext(NE);function t8({lang:r}){const e=[{id:1,text_zh:"咖啡券",text_en:"Coffee Coupon",points:30},{id:2,text_zh:"小點心",text_en:"Snack",points:50},{id:3,text_zh:"電影票",text_en:"Movie Ticket",points:200},{id:4,text_zh:"購物禮券",text_en:"Shopping Voucher",points:100},{id:5,text_zh:"電子產品折扣",text_en:"Electronics Discount",points:300}],{user:t,profile:o,setProfile:u}=e8(),[f,y]=Re.useState(()=>{const v=localStorage.getItem("redeemedIds");return v?JSON.parse(v):[]}),[A,x]=Re.useState("progress");Re.useEffect(()=>{localStorage.setItem("redeemedIds",JSON.stringify(f))},[f]);const _=async v=>{if(!(!o||!t)&&o.scores>=v.points&&!f.includes(v.id)){const N=o.scores-v.points,M=hu(du,"profiles",t.uid);await CE(M,{scores:N}),u({...o,scores:N}),y(W=>[...W,v.id]),alert(r==="zh"?"🎉 兌換成功！":"🎉 Redeemed!")}};return me.jsxs("div",{className:"page-container",style:{maxWidth:500,margin:"0 auto",textAlign:"center"},children:[me.jsx("h2",{children:r==="zh"?"獎勵頁面":"Rewards Page"}),me.jsxs("div",{style:{marginBottom:20},children:[me.jsx("button",{onClick:()=>x("progress"),style:{marginRight:10,backgroundColor:A==="progress"?"#4caf50":"#eee",color:A==="progress"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:r==="zh"?"分數進度":"Progress"}),me.jsx("button",{onClick:()=>x("list"),style:{backgroundColor:A==="list"?"#4caf50":"#eee",color:A==="list"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:r==="zh"?"可兌換獎勵":"Reward List"})]}),A==="progress"&&me.jsxs("div",{children:[me.jsxs("p",{children:[r==="zh"?"你的分數: ":"Your Score: "," ",o?.scores||0]}),me.jsx("div",{style:{height:25,width:"100%",backgroundColor:"#eee",borderRadius:12,overflow:"hidden",marginBottom:10},children:me.jsx("div",{style:{width:`${Math.min((o?.scores||0)%30/30,1)*100}%`,height:"100%",backgroundColor:"#4caf50",transition:"width 0.3s"}})})]}),A==="list"&&me.jsx("ul",{style:{listStyle:"none",padding:0},children:e.map(v=>{const N=f.includes(v.id);return me.jsxs("li",{style:{marginBottom:10,padding:10,border:"1px solid #ccc",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:N?"#f6fff6":"#fff"},children:[me.jsxs("span",{children:[r==="zh"?v.text_zh:v.text_en," - ",v.points," ",r==="zh"?"分":"pts"]}),me.jsx("button",{onClick:()=>_(v),disabled:N||(o?.scores||0)<v.points,style:{padding:"5px 10px",border:"none",borderRadius:6,backgroundColor:N?"#9e9e9e":"#4caf50",color:"#fff",cursor:N||(o?.scores||0)<v.points?"not-allowed":"pointer"},children:N?r==="zh"?"已兌換":"Redeemed":r==="zh"?"兌換":"Redeem"})]},v.id)})})]})}var n8=Object.defineProperty,_h=Object.getOwnPropertySymbols,bE=Object.prototype.hasOwnProperty,OE=Object.prototype.propertyIsEnumerable,l2=(r,e,t)=>e in r?n8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,f1=(r,e)=>{for(var t in e||(e={}))bE.call(e,t)&&l2(r,t,e[t]);if(_h)for(var t of _h(e))OE.call(e,t)&&l2(r,t,e[t]);return r},d1=(r,e)=>{var t={};for(var o in r)bE.call(r,o)&&e.indexOf(o)<0&&(t[o]=r[o]);if(r!=null&&_h)for(var o of _h(r))e.indexOf(o)<0&&OE.call(r,o)&&(t[o]=r[o]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Pa;(r=>{const e=class St{constructor(x,_,v,N){if(this.version=x,this.errorCorrectionLevel=_,this.modules=[],this.isFunction=[],x<St.MIN_VERSION||x>St.MAX_VERSION)throw new RangeError("Version value out of range");if(N<-1||N>7)throw new RangeError("Mask value out of range");this.size=x*4+17;let M=[];for(let ee=0;ee<this.size;ee++)M.push(!1);for(let ee=0;ee<this.size;ee++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const W=this.addEccAndInterleave(v);if(this.drawCodewords(W),N==-1){let ee=1e9;for(let Y=0;Y<8;Y++){this.applyMask(Y),this.drawFormatBits(Y);const G=this.getPenaltyScore();G<ee&&(N=Y,ee=G),this.applyMask(Y)}}u(0<=N&&N<=7),this.mask=N,this.applyMask(N),this.drawFormatBits(N),this.isFunction=[]}static encodeText(x,_){const v=r.QrSegment.makeSegments(x);return St.encodeSegments(v,_)}static encodeBinary(x,_){const v=r.QrSegment.makeBytes(x);return St.encodeSegments([v],_)}static encodeSegments(x,_,v=1,N=40,M=-1,W=!0){if(!(St.MIN_VERSION<=v&&v<=N&&N<=St.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let ee,Y;for(ee=v;;ee++){const ie=St.getNumDataCodewords(ee,_)*8,we=y.getTotalBits(x,ee);if(we<=ie){Y=we;break}if(ee>=N)throw new RangeError("Data too long")}for(const ie of[St.Ecc.MEDIUM,St.Ecc.QUARTILE,St.Ecc.HIGH])W&&Y<=St.getNumDataCodewords(ee,ie)*8&&(_=ie);let G=[];for(const ie of x){t(ie.mode.modeBits,4,G),t(ie.numChars,ie.mode.numCharCountBits(ee),G);for(const we of ie.getData())G.push(we)}u(G.length==Y);const Ie=St.getNumDataCodewords(ee,_)*8;u(G.length<=Ie),t(0,Math.min(4,Ie-G.length),G),t(0,(8-G.length%8)%8,G),u(G.length%8==0);for(let ie=236;G.length<Ie;ie^=253)t(ie,8,G);let ge=[];for(;ge.length*8<G.length;)ge.push(0);return G.forEach((ie,we)=>ge[we>>>3]|=ie<<7-(we&7)),new St(ee,_,ge,M)}getModule(x,_){return 0<=x&&x<this.size&&0<=_&&_<this.size&&this.modules[_][x]}getModules(){return this.modules}drawFunctionPatterns(){for(let v=0;v<this.size;v++)this.setFunctionModule(6,v,v%2==0),this.setFunctionModule(v,6,v%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const x=this.getAlignmentPatternPositions(),_=x.length;for(let v=0;v<_;v++)for(let N=0;N<_;N++)v==0&&N==0||v==0&&N==_-1||v==_-1&&N==0||this.drawAlignmentPattern(x[v],x[N]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(x){const _=this.errorCorrectionLevel.formatBits<<3|x;let v=_;for(let M=0;M<10;M++)v=v<<1^(v>>>9)*1335;const N=(_<<10|v)^21522;u(N>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,o(N,M));this.setFunctionModule(8,7,o(N,6)),this.setFunctionModule(8,8,o(N,7)),this.setFunctionModule(7,8,o(N,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,o(N,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,o(N,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,o(N,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let x=this.version;for(let v=0;v<12;v++)x=x<<1^(x>>>11)*7973;const _=this.version<<12|x;u(_>>>18==0);for(let v=0;v<18;v++){const N=o(_,v),M=this.size-11+v%3,W=Math.floor(v/3);this.setFunctionModule(M,W,N),this.setFunctionModule(W,M,N)}}drawFinderPattern(x,_){for(let v=-4;v<=4;v++)for(let N=-4;N<=4;N++){const M=Math.max(Math.abs(N),Math.abs(v)),W=x+N,ee=_+v;0<=W&&W<this.size&&0<=ee&&ee<this.size&&this.setFunctionModule(W,ee,M!=2&&M!=4)}}drawAlignmentPattern(x,_){for(let v=-2;v<=2;v++)for(let N=-2;N<=2;N++)this.setFunctionModule(x+N,_+v,Math.max(Math.abs(N),Math.abs(v))!=1)}setFunctionModule(x,_,v){this.modules[_][x]=v,this.isFunction[_][x]=!0}addEccAndInterleave(x){const _=this.version,v=this.errorCorrectionLevel;if(x.length!=St.getNumDataCodewords(_,v))throw new RangeError("Invalid argument");const N=St.NUM_ERROR_CORRECTION_BLOCKS[v.ordinal][_],M=St.ECC_CODEWORDS_PER_BLOCK[v.ordinal][_],W=Math.floor(St.getNumRawDataModules(_)/8),ee=N-W%N,Y=Math.floor(W/N);let G=[];const Ie=St.reedSolomonComputeDivisor(M);for(let ie=0,we=0;ie<N;ie++){let Ke=x.slice(we,we+Y-M+(ie<ee?0:1));we+=Ke.length;const Le=St.reedSolomonComputeRemainder(Ke,Ie);ie<ee&&Ke.push(0),G.push(Ke.concat(Le))}let ge=[];for(let ie=0;ie<G[0].length;ie++)G.forEach((we,Ke)=>{(ie!=Y-M||Ke>=ee)&&ge.push(we[ie])});return u(ge.length==W),ge}drawCodewords(x){if(x.length!=Math.floor(St.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let _=0;for(let v=this.size-1;v>=1;v-=2){v==6&&(v=5);for(let N=0;N<this.size;N++)for(let M=0;M<2;M++){const W=v-M,Y=(v+1&2)==0?this.size-1-N:N;!this.isFunction[Y][W]&&_<x.length*8&&(this.modules[Y][W]=o(x[_>>>3],7-(_&7)),_++)}}u(_==x.length*8)}applyMask(x){if(x<0||x>7)throw new RangeError("Mask value out of range");for(let _=0;_<this.size;_++)for(let v=0;v<this.size;v++){let N;switch(x){case 0:N=(v+_)%2==0;break;case 1:N=_%2==0;break;case 2:N=v%3==0;break;case 3:N=(v+_)%3==0;break;case 4:N=(Math.floor(v/3)+Math.floor(_/2))%2==0;break;case 5:N=v*_%2+v*_%3==0;break;case 6:N=(v*_%2+v*_%3)%2==0;break;case 7:N=((v+_)%2+v*_%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[_][v]&&N&&(this.modules[_][v]=!this.modules[_][v])}}getPenaltyScore(){let x=0;for(let M=0;M<this.size;M++){let W=!1,ee=0,Y=[0,0,0,0,0,0,0];for(let G=0;G<this.size;G++)this.modules[M][G]==W?(ee++,ee==5?x+=St.PENALTY_N1:ee>5&&x++):(this.finderPenaltyAddHistory(ee,Y),W||(x+=this.finderPenaltyCountPatterns(Y)*St.PENALTY_N3),W=this.modules[M][G],ee=1);x+=this.finderPenaltyTerminateAndCount(W,ee,Y)*St.PENALTY_N3}for(let M=0;M<this.size;M++){let W=!1,ee=0,Y=[0,0,0,0,0,0,0];for(let G=0;G<this.size;G++)this.modules[G][M]==W?(ee++,ee==5?x+=St.PENALTY_N1:ee>5&&x++):(this.finderPenaltyAddHistory(ee,Y),W||(x+=this.finderPenaltyCountPatterns(Y)*St.PENALTY_N3),W=this.modules[G][M],ee=1);x+=this.finderPenaltyTerminateAndCount(W,ee,Y)*St.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let W=0;W<this.size-1;W++){const ee=this.modules[M][W];ee==this.modules[M][W+1]&&ee==this.modules[M+1][W]&&ee==this.modules[M+1][W+1]&&(x+=St.PENALTY_N2)}let _=0;for(const M of this.modules)_=M.reduce((W,ee)=>W+(ee?1:0),_);const v=this.size*this.size,N=Math.ceil(Math.abs(_*20-v*10)/v)-1;return u(0<=N&&N<=9),x+=N*St.PENALTY_N4,u(0<=x&&x<=2568888),x}getAlignmentPatternPositions(){if(this.version==1)return[];{const x=Math.floor(this.version/7)+2,_=this.version==32?26:Math.ceil((this.version*4+4)/(x*2-2))*2;let v=[6];for(let N=this.size-7;v.length<x;N-=_)v.splice(1,0,N);return v}}static getNumRawDataModules(x){if(x<St.MIN_VERSION||x>St.MAX_VERSION)throw new RangeError("Version number out of range");let _=(16*x+128)*x+64;if(x>=2){const v=Math.floor(x/7)+2;_-=(25*v-10)*v-55,x>=7&&(_-=36)}return u(208<=_&&_<=29648),_}static getNumDataCodewords(x,_){return Math.floor(St.getNumRawDataModules(x)/8)-St.ECC_CODEWORDS_PER_BLOCK[_.ordinal][x]*St.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][x]}static reedSolomonComputeDivisor(x){if(x<1||x>255)throw new RangeError("Degree out of range");let _=[];for(let N=0;N<x-1;N++)_.push(0);_.push(1);let v=1;for(let N=0;N<x;N++){for(let M=0;M<_.length;M++)_[M]=St.reedSolomonMultiply(_[M],v),M+1<_.length&&(_[M]^=_[M+1]);v=St.reedSolomonMultiply(v,2)}return _}static reedSolomonComputeRemainder(x,_){let v=_.map(N=>0);for(const N of x){const M=N^v.shift();v.push(0),_.forEach((W,ee)=>v[ee]^=St.reedSolomonMultiply(W,M))}return v}static reedSolomonMultiply(x,_){if(x>>>8||_>>>8)throw new RangeError("Byte out of range");let v=0;for(let N=7;N>=0;N--)v=v<<1^(v>>>7)*285,v^=(_>>>N&1)*x;return u(v>>>8==0),v}finderPenaltyCountPatterns(x){const _=x[1];u(_<=this.size*3);const v=_>0&&x[2]==_&&x[3]==_*3&&x[4]==_&&x[5]==_;return(v&&x[0]>=_*4&&x[6]>=_?1:0)+(v&&x[6]>=_*4&&x[0]>=_?1:0)}finderPenaltyTerminateAndCount(x,_,v){return x&&(this.finderPenaltyAddHistory(_,v),_=0),_+=this.size,this.finderPenaltyAddHistory(_,v),this.finderPenaltyCountPatterns(v)}finderPenaltyAddHistory(x,_){_[0]==0&&(x+=this.size),_.pop(),_.unshift(x)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=e;function t(A,x,_){if(x<0||x>31||A>>>x)throw new RangeError("Value out of range");for(let v=x-1;v>=0;v--)_.push(A>>>v&1)}function o(A,x){return(A>>>x&1)!=0}function u(A){if(!A)throw new Error("Assertion error")}const f=class Rn{constructor(x,_,v){if(this.mode=x,this.numChars=_,this.bitData=v,_<0)throw new RangeError("Invalid argument");this.bitData=v.slice()}static makeBytes(x){let _=[];for(const v of x)t(v,8,_);return new Rn(Rn.Mode.BYTE,x.length,_)}static makeNumeric(x){if(!Rn.isNumeric(x))throw new RangeError("String contains non-numeric characters");let _=[];for(let v=0;v<x.length;){const N=Math.min(x.length-v,3);t(parseInt(x.substring(v,v+N),10),N*3+1,_),v+=N}return new Rn(Rn.Mode.NUMERIC,x.length,_)}static makeAlphanumeric(x){if(!Rn.isAlphanumeric(x))throw new RangeError("String contains unencodable characters in alphanumeric mode");let _=[],v;for(v=0;v+2<=x.length;v+=2){let N=Rn.ALPHANUMERIC_CHARSET.indexOf(x.charAt(v))*45;N+=Rn.ALPHANUMERIC_CHARSET.indexOf(x.charAt(v+1)),t(N,11,_)}return v<x.length&&t(Rn.ALPHANUMERIC_CHARSET.indexOf(x.charAt(v)),6,_),new Rn(Rn.Mode.ALPHANUMERIC,x.length,_)}static makeSegments(x){return x==""?[]:Rn.isNumeric(x)?[Rn.makeNumeric(x)]:Rn.isAlphanumeric(x)?[Rn.makeAlphanumeric(x)]:[Rn.makeBytes(Rn.toUtf8ByteArray(x))]}static makeEci(x){let _=[];if(x<0)throw new RangeError("ECI assignment value out of range");if(x<128)t(x,8,_);else if(x<16384)t(2,2,_),t(x,14,_);else if(x<1e6)t(6,3,_),t(x,21,_);else throw new RangeError("ECI assignment value out of range");return new Rn(Rn.Mode.ECI,0,_)}static isNumeric(x){return Rn.NUMERIC_REGEX.test(x)}static isAlphanumeric(x){return Rn.ALPHANUMERIC_REGEX.test(x)}getData(){return this.bitData.slice()}static getTotalBits(x,_){let v=0;for(const N of x){const M=N.mode.numCharCountBits(_);if(N.numChars>=1<<M)return 1/0;v+=4+M+N.bitData.length}return v}static toUtf8ByteArray(x){x=encodeURI(x);let _=[];for(let v=0;v<x.length;v++)x.charAt(v)!="%"?_.push(x.charCodeAt(v)):(_.push(parseInt(x.substring(v+1,v+3),16)),v+=2);return _}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=f;r.QrSegment=f})(Pa||(Pa={}));(r=>{(e=>{const t=class{constructor(u,f){this.ordinal=u,this.formatBits=f}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(r.QrCode||(r.QrCode={}))})(Pa||(Pa={}));(r=>{(e=>{const t=class{constructor(u,f){this.modeBits=u,this.numBitsCharCount=f}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(r.QrSegment||(r.QrSegment={}))})(Pa||(Pa={}));var hl=Pa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var r8={L:hl.QrCode.Ecc.LOW,M:hl.QrCode.Ecc.MEDIUM,Q:hl.QrCode.Ecc.QUARTILE,H:hl.QrCode.Ecc.HIGH},PE=128,DE="L",kE="#FFFFFF",ME="#000000",LE=!1,BE=1,i8=4,s8=0,o8=.1;function FE(r,e=0){const t=[];return r.forEach(function(o,u){let f=null;o.forEach(function(y,A){if(!y&&f!==null){t.push(`M${f+e} ${u+e}h${A-f}v1H${f+e}z`),f=null;return}if(A===o.length-1){if(!y)return;f===null?t.push(`M${A+e},${u+e} h1v1H${A+e}z`):t.push(`M${f+e},${u+e} h${A+1-f}v1H${f+e}z`);return}y&&f===null&&(f=A)})}),t.join("")}function VE(r,e){return r.slice().map((t,o)=>o<e.y||o>=e.y+e.h?t:t.map((u,f)=>f<e.x||f>=e.x+e.w?u:!1))}function a8(r,e,t,o){if(o==null)return null;const u=r.length+t*2,f=Math.floor(e*o8),y=u/e,A=(o.width||f)*y,x=(o.height||f)*y,_=o.x==null?r.length/2-A/2:o.x*y,v=o.y==null?r.length/2-x/2:o.y*y,N=o.opacity==null?1:o.opacity;let M=null;if(o.excavate){let ee=Math.floor(_),Y=Math.floor(v),G=Math.ceil(A+_-ee),Ie=Math.ceil(x+v-Y);M={x:ee,y:Y,w:G,h:Ie}}const W=o.crossOrigin;return{x:_,y:v,h:x,w:A,excavation:M,opacity:N,crossOrigin:W}}function l8(r,e){return e!=null?Math.max(Math.floor(e),0):r?i8:s8}function UE({value:r,level:e,minVersion:t,includeMargin:o,marginSize:u,imageSettings:f,size:y,boostLevel:A}){let x=zn.useMemo(()=>{const ee=(Array.isArray(r)?r:[r]).reduce((Y,G)=>(Y.push(...hl.QrSegment.makeSegments(G)),Y),[]);return hl.QrCode.encodeSegments(ee,r8[e],t,void 0,void 0,A)},[r,e,t,A]);const{cells:_,margin:v,numCells:N,calculatedImageSettings:M}=zn.useMemo(()=>{let W=x.getModules();const ee=l8(o,u),Y=W.length+ee*2,G=a8(W,y,ee,f);return{cells:W,margin:ee,numCells:Y,calculatedImageSettings:G}},[x,y,f,o,u]);return{qrcode:x,margin:v,cells:_,numCells:N,calculatedImageSettings:M}}var u8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),zE=zn.forwardRef(function(e,t){const o=e,{value:u,size:f=PE,level:y=DE,bgColor:A=kE,fgColor:x=ME,includeMargin:_=LE,minVersion:v=BE,boostLevel:N,marginSize:M,imageSettings:W}=o,Y=d1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:G}=Y,Ie=d1(Y,["style"]),ge=W?.src,ie=zn.useRef(null),we=zn.useRef(null),Ke=zn.useCallback(Je=>{ie.current=Je,typeof t=="function"?t(Je):t&&(t.current=Je)},[t]),[Le,V]=zn.useState(!1),{margin:U,cells:B,numCells:$,calculatedImageSettings:X}=UE({value:u,level:y,minVersion:v,boostLevel:N,includeMargin:_,marginSize:M,imageSettings:W,size:f});zn.useEffect(()=>{if(ie.current!=null){const Je=ie.current,le=Je.getContext("2d");if(!le)return;let Ct=B;const Be=we.current,Pe=X!=null&&Be!==null&&Be.complete&&Be.naturalHeight!==0&&Be.naturalWidth!==0;Pe&&X.excavation!=null&&(Ct=VE(B,X.excavation));const ze=window.devicePixelRatio||1;Je.height=Je.width=f*ze;const ke=f/$*ze;le.scale(ke,ke),le.fillStyle=A,le.fillRect(0,0,$,$),le.fillStyle=x,u8?le.fill(new Path2D(FE(Ct,U))):B.forEach(function(te,de){te.forEach(function(tt,Ge){tt&&le.fillRect(Ge+U,de+U,1,1)})}),X&&(le.globalAlpha=X.opacity),Pe&&le.drawImage(Be,X.x+U,X.y+U,X.w,X.h)}}),zn.useEffect(()=>{V(!1)},[ge]);const q=f1({height:f,width:f},G);let j=null;return ge!=null&&(j=zn.createElement("img",{src:ge,key:ge,style:{display:"none"},onLoad:()=>{V(!0)},ref:we,crossOrigin:X?.crossOrigin})),zn.createElement(zn.Fragment,null,zn.createElement("canvas",f1({style:q,height:f,width:f,ref:Ke,role:"img"},Ie)),j)});zE.displayName="QRCodeCanvas";var c8=zn.forwardRef(function(e,t){const o=e,{value:u,size:f=PE,level:y=DE,bgColor:A=kE,fgColor:x=ME,includeMargin:_=LE,minVersion:v=BE,boostLevel:N,title:M,marginSize:W,imageSettings:ee}=o,Y=d1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:G,cells:Ie,numCells:ge,calculatedImageSettings:ie}=UE({value:u,level:y,minVersion:v,boostLevel:N,includeMargin:_,marginSize:W,imageSettings:ee,size:f});let we=Ie,Ke=null;ee!=null&&ie!=null&&(ie.excavation!=null&&(we=VE(Ie,ie.excavation)),Ke=zn.createElement("image",{href:ee.src,height:ie.h,width:ie.w,x:ie.x+G,y:ie.y+G,preserveAspectRatio:"none",opacity:ie.opacity,crossOrigin:ie.crossOrigin}));const Le=FE(we,G);return zn.createElement("svg",f1({height:f,width:f,viewBox:`0 0 ${ge} ${ge}`,ref:t,role:"img"},Y),!!M&&zn.createElement("title",null,M),zn.createElement("path",{fill:A,d:`M0,0 h${ge}v${ge}H0z`,shapeRendering:"crispEdges"}),zn.createElement("path",{fill:x,d:Le,shapeRendering:"crispEdges"}),Ke)});c8.displayName="QRCodeSVG";function h8({profile:r}){if(!r)return null;const e={name:r.name,title:r.title,years:r.years,factory:r.factory,phone:r.phone,birthday:r.birthday,email:r.email};return me.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[me.jsx("h3",{className:"font-semibold text-sm",children:"我的 QR Code"}),me.jsx(zE,{value:JSON.stringify(e),size:180,bgColor:"#ffffff",fgColor:"#000000",level:"Q",includeMargin:!0})]})}var Ue;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ue||(Ue={}));var u2=new Map([[Ue.QR_CODE,"QR_CODE"],[Ue.AZTEC,"AZTEC"],[Ue.CODABAR,"CODABAR"],[Ue.CODE_39,"CODE_39"],[Ue.CODE_93,"CODE_93"],[Ue.CODE_128,"CODE_128"],[Ue.DATA_MATRIX,"DATA_MATRIX"],[Ue.MAXICODE,"MAXICODE"],[Ue.ITF,"ITF"],[Ue.EAN_13,"EAN_13"],[Ue.EAN_8,"EAN_8"],[Ue.PDF_417,"PDF_417"],[Ue.RSS_14,"RSS_14"],[Ue.RSS_EXPANDED,"RSS_EXPANDED"],[Ue.UPC_A,"UPC_A"],[Ue.UPC_E,"UPC_E"],[Ue.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),c2;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(c2||(c2={}));function f8(r){return Object.values(Ue).includes(r)}var xh;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xh||(xh={}));var d8=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[xh.SCAN_TYPE_CAMERA,xh.SCAN_TYPE_FILE],r})(),jE=(function(){function r(e,t){this.format=e,this.formatName=t}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!u2.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,u2.get(e))},r})(),h2=(function(){function r(){}return r.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),g1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(g1||(g1={}));var g8=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:g1.UNKWOWN_ERROR}},r})(),p8=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function $s(r){return typeof r>"u"||r===null}var fl=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),HE=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var o=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(u),y=Object.keys(e),A=0,x=y;A<x.length;A++){var _=x[A];if(f.has(_))return t.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},r})(),ru={exports:{}},m8=ru.exports,f2;function y8(){return f2||(f2=1,(function(r,e){(function(t,o){o(e)})(m8,(function(t){function o(O){return O==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,n){O.__proto__=n}||function(O,n){for(var s in n)n.hasOwnProperty(s)&&(O[s]=n[s])};function f(O,n){u(O,n);function s(){this.constructor=O}O.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function y(O,n){var s=Object.setPrototypeOf;s?s(O,n):O.__proto__=n}function A(O,n){n===void 0&&(n=O.constructor);var s=Error.captureStackTrace;s&&s(O,n)}var x=(function(O){f(n,O);function n(s){var a=this.constructor,c=O.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),y(c,a.prototype),A(c),c}return n})(Error);class _ extends x{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}_.kind="Exception";class v extends _{}v.kind="ArgumentException";class N extends _{}N.kind="IllegalArgumentException";class M{constructor(n){if(this.binarizer=n,n===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,s){return this.binarizer.getBlackRow(n,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,s,a,c){const h=this.binarizer.getLuminanceSource().crop(n,s,a,c);return new M(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class W extends _{static getChecksumInstance(){return new W}}W.kind="ChecksumException";class ee{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Y{static arraycopy(n,s,a,c,h){for(;h--;)a[c++]=n[s++]}static currentTimeMillis(){return Date.now()}}class G extends _{}G.kind="IndexOutOfBoundsException";class Ie extends G{constructor(n=void 0,s=void 0){super(s),this.index=n,this.message=s}}Ie.kind="ArrayIndexOutOfBoundsException";class ge{static fill(n,s){for(let a=0,c=n.length;a<c;a++)n[a]=s}static fillWithin(n,s,a,c){ge.rangeCheck(n.length,s,a);for(let h=s;h<a;h++)n[h]=c}static rangeCheck(n,s,a){if(s>a)throw new N("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new Ie(s);if(a>n)throw new Ie(a)}static asList(...n){return n}static create(n,s,a){return Array.from({length:n}).map(h=>Array.from({length:s}).fill(a))}static createInt32Array(n,s,a){return Array.from({length:n}).map(h=>Int32Array.from({length:s}).fill(a))}static equals(n,s){if(!n||!s||!n.length||!s.length||n.length!==s.length)return!1;for(let a=0,c=n.length;a<c;a++)if(n[a]!==s[a])return!1;return!0}static hashCode(n){if(n===null)return 0;let s=1;for(const a of n)s=31*s+a;return s}static fillUint8Array(n,s){for(let a=0;a!==n.length;a++)n[a]=s}static copyOf(n,s){return n.slice(0,s)}static copyOfUint8Array(n,s){if(n.length<=s){const a=new Uint8Array(s);return a.set(n),a}return n.slice(0,s)}static copyOfRange(n,s,a){const c=a-s,h=new Int32Array(c);return Y.arraycopy(n,s,h,0,c),h}static binarySearch(n,s,a){a===void 0&&(a=ge.numberComparator);let c=0,h=n.length-1;for(;c<=h;){const d=h+c>>1,m=a(s,n[d]);if(m>0)c=d+1;else if(m<0)h=d-1;else return d}return-c-1}static numberComparator(n,s){return n-s}}class ie{static numberOfTrailingZeros(n){let s;if(n===0)return 32;let a=31;return s=n<<16,s!==0&&(a-=16,n=s),s=n<<8,s!==0&&(a-=8,n=s),s=n<<4,s!==0&&(a-=4,n=s),s=n<<2,s!==0&&(a-=2,n=s),a-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let s=1;return n>>>16||(s+=16,n<<=16),n>>>24||(s+=8,n<<=8),n>>>28||(s+=4,n<<=4),n>>>30||(s+=2,n<<=2),s-=n>>>31,s}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,s){return Math.trunc(n/s)}static parseInt(n,s=void 0){return parseInt(n,s)}}ie.MIN_VALUE_32_BITS=-2147483648,ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class we{constructor(n,s){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,s==null?this.bits=we.makeArray(n):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const s=we.makeArray(n);Y.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const s=this.size;if(n>=s)return s;const a=this.bits;let c=Math.floor(n/32),h=a[c];h&=~((1<<(n&31))-1);const d=a.length;for(;h===0;){if(++c===d)return s;h=a[c]}const m=c*32+ie.numberOfTrailingZeros(h);return m>s?s:m}getNextUnset(n){const s=this.size;if(n>=s)return s;const a=this.bits;let c=Math.floor(n/32),h=~a[c];h&=~((1<<(n&31))-1);const d=a.length;for(;h===0;){if(++c===d)return s;h=~a[c]}const m=c*32+ie.numberOfTrailingZeros(h);return m>s?s:m}setBulk(n,s){this.bits[Math.floor(n/32)]=s}setRange(n,s){if(s<n||n<0||s>this.size)throw new N;if(s===n)return;s--;const a=Math.floor(n/32),c=Math.floor(s/32),h=this.bits;for(let d=a;d<=c;d++){const m=d>a?0:n&31,I=(2<<(d<c?31:s&31))-(1<<m);h[d]|=I}}clear(){const n=this.bits.length,s=this.bits;for(let a=0;a<n;a++)s[a]=0}isRange(n,s,a){if(s<n||n<0||s>this.size)throw new N;if(s===n)return!0;s--;const c=Math.floor(n/32),h=Math.floor(s/32),d=this.bits;for(let m=c;m<=h;m++){const E=m>c?0:n&31,R=(2<<(m<h?31:s&31))-(1<<E)&4294967295;if((d[m]&R)!==(a?R:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,s){if(s<0||s>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((n>>a-1&1)===1)}appendBitArray(n){const s=n.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(n.get(a))}xor(n){if(this.size!==n.size)throw new N("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=n.bits[a]}toBytes(n,s,a,c){for(let h=0;h<c;h++){let d=0;for(let m=0;m<8;m++)this.get(n)&&(d|=1<<7-m),n++;s[a+h]=d}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let h=0;h<a;h++){let d=c[h];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,n[s-h]=d}if(this.size!==a*32){const h=a*32-this.size;let d=n[0]>>>h;for(let m=1;m<a;m++){const E=n[m];d|=E<<32-h,n[m-1]=d,d=E>>>h}n[a-1]=d}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof we))return!1;const s=n;return this.size===s.size&&ge.equals(this.bits,s.bits)}hashCode(){return 31*this.size+ge.hashCode(this.bits)}toString(){let n="";for(let s=0,a=this.size;s<a;s++)(s&7)===0&&(n+=" "),n+=this.get(s)?"X":".";return n}clone(){return new we(this.size,this.bits.slice())}}var Ke;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ke||(Ke={}));var Le=Ke;class V extends _{static getFormatInstance(){return new V}}V.kind="FormatException";var U;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(U||(U={}));class B{constructor(n,s,a,...c){this.valueIdentifier=n,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,B.VALUE_IDENTIFIER_TO_ECI.set(n,this),B.NAME_TO_ECI.set(a,this);const h=this.values;for(let d=0,m=h.length;d!==m;d++){const E=h[d];B.VALUES_TO_ECI.set(E,this)}for(const d of c)B.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new V("incorect value");const s=B.VALUES_TO_ECI.get(n);if(s===void 0)throw new V("incorect value");return s}static getCharacterSetECIByName(n){const s=B.NAME_TO_ECI.get(n);if(s===void 0)throw new V("incorect value");return s}equals(n){if(!(n instanceof B))return!1;const s=n;return this.getName()===s.getName()}}B.VALUE_IDENTIFIER_TO_ECI=new Map,B.VALUES_TO_ECI=new Map,B.NAME_TO_ECI=new Map,B.Cp437=new B(U.Cp437,Int32Array.from([0,2]),"Cp437"),B.ISO8859_1=new B(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),B.ISO8859_2=new B(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),B.ISO8859_3=new B(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),B.ISO8859_4=new B(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),B.ISO8859_5=new B(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),B.ISO8859_6=new B(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),B.ISO8859_7=new B(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),B.ISO8859_8=new B(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),B.ISO8859_9=new B(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),B.ISO8859_10=new B(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),B.ISO8859_11=new B(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),B.ISO8859_13=new B(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),B.ISO8859_14=new B(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),B.ISO8859_15=new B(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),B.ISO8859_16=new B(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),B.SJIS=new B(U.SJIS,20,"SJIS","Shift_JIS"),B.Cp1250=new B(U.Cp1250,21,"Cp1250","windows-1250"),B.Cp1251=new B(U.Cp1251,22,"Cp1251","windows-1251"),B.Cp1252=new B(U.Cp1252,23,"Cp1252","windows-1252"),B.Cp1256=new B(U.Cp1256,24,"Cp1256","windows-1256"),B.UnicodeBigUnmarked=new B(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),B.UTF8=new B(U.UTF8,26,"UTF8","UTF-8"),B.ASCII=new B(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),B.Big5=new B(U.Big5,28,"Big5"),B.GB18030=new B(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),B.EUC_KR=new B(U.EUC_KR,30,"EUC_KR","EUC-KR");class $ extends _{}$.kind="UnsupportedOperationException";class X{static decode(n,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(n,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(n,a):new TextDecoder(a).decode(n)}static shouldDecodeOnFallback(n){return!X.isBrowser()&&n==="ISO-8859-1"}static encode(n,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(n,a):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof B?n:B.getCharacterSetECIByName(n)}static decodeFallback(n,s){const a=this.encodingCharacterSet(s);if(X.isDecodeFallbackSupported(a)){let c="";for(let h=0,d=n.length;h<d;h++){let m=n[h].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(a.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new $(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(B.UTF8)||n.equals(B.ISO8859_1)||n.equals(B.ASCII)}static encodeFallback(n){const a=btoa(unescape(encodeURIComponent(n))).split(""),c=[];for(let h=0;h<a.length;h++)c.push(a[h].charCodeAt(0));return new Uint8Array(c)}}class q{static castAsNonUtf8Char(n,s=null){const a=s?s.getName():this.ISO88591;return X.decode(new Uint8Array([n]),a)}static guessEncoding(n,s){if(s!=null&&s.get(Le.CHARACTER_SET)!==void 0)return s.get(Le.CHARACTER_SET).toString();const a=n.length;let c=!0,h=!0,d=!0,m=0,E=0,I=0,R=0,P=0,k=0,z=0,K=0,Z=0,ne=0,ce=0;const ve=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Se=0;Se<a&&(c||h||d);Se++){const _e=n[Se]&255;d&&(m>0?(_e&128)===0?d=!1:m--:(_e&128)!==0&&((_e&64)===0?d=!1:(m++,(_e&32)===0?E++:(m++,(_e&16)===0?I++:(m++,(_e&8)===0?R++:d=!1))))),c&&(_e>127&&_e<160?c=!1:_e>159&&(_e<192||_e===215||_e===247)&&ce++),h&&(P>0?_e<64||_e===127||_e>252?h=!1:P--:_e===128||_e===160||_e>239?h=!1:_e>160&&_e<224?(k++,K=0,z++,z>Z&&(Z=z)):_e>127?(P++,z=0,K++,K>ne&&(ne=K)):(z=0,K=0))}return d&&m>0&&(d=!1),h&&P>0&&(h=!1),d&&(ve||E+I+R>0)?q.UTF8:h&&(q.ASSUME_SHIFT_JIS||Z>=3||ne>=3)?q.SHIFT_JIS:c&&h?Z===2&&k===2||ce*10>=a?q.SHIFT_JIS:q.ISO88591:c?q.ISO88591:h?q.SHIFT_JIS:d?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(n,...s){let a=-1;function c(d,m,E,I,R,P){if(d==="%%")return"%";if(s[++a]===void 0)return;d=I?parseInt(I.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,z;switch(P){case"s":z=s[a];break;case"c":z=s[a][0];break;case"f":z=parseFloat(s[a]).toFixed(d);break;case"p":z=parseFloat(s[a]).toPrecision(d);break;case"e":z=parseFloat(s[a]).toExponential(d);break;case"x":z=parseInt(s[a]).toString(k||16);break;case"d":z=parseFloat(parseInt(s[a],k||10).toPrecision(d)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(k);let K=parseInt(E),Z=E&&E[0]+""=="0"?"0":" ";for(;z.length<K;)z=m!==void 0?z+Z:Z+z;return z}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,c)}static getBytes(n,s){return X.encode(n,s)}static getCharCode(n,s=0){return n.charCodeAt(s)}static getCharAt(n){return String.fromCharCode(n)}}q.SHIFT_JIS=B.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=B.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=B.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class j{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=q.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,s,a){for(let c=s;s<s+a;c++)this.append(n[c]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+1)}substring(n,s){return this.value.substring(n,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+s.length)}}class Je{constructor(n,s,a,c){if(this.width=n,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=n),this.height=s,n<1||s<1)throw new N("Both dimensions must be greater than 0");a==null&&(a=Math.floor((n+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const s=n.length,a=n[0].length,c=new Je(a,s);for(let h=0;h<s;h++){const d=n[h];for(let m=0;m<a;m++)d[m]&&c.set(m,h)}return c}static parseFromString(n,s,a){if(n===null)throw new N("stringRepresentation cannot be null");const c=new Array(n.length);let h=0,d=0,m=-1,E=0,I=0;for(;I<n.length;)if(n.charAt(I)===`
`||n.charAt(I)==="\r"){if(h>d){if(m===-1)m=h-d;else if(h-d!==m)throw new N("row lengths do not match");d=h,E++}I++}else if(n.substring(I,I+s.length)===s)I+=s.length,c[h]=!0,h++;else if(n.substring(I,I+a.length)===a)I+=a.length,c[h]=!1,h++;else throw new N("illegal character encountered: "+n.substring(I));if(h>d){if(m===-1)m=h-d;else if(h-d!==m)throw new N("row lengths do not match");E++}const R=new Je(m,E);for(let P=0;P<h;P++)c[P]&&R.set(Math.floor(P%m),Math.floor(P/m));return R}get(n,s){const a=s*this.rowSize+Math.floor(n/32);return(this.bits[a]>>>(n&31)&1)!==0}set(n,s){const a=s*this.rowSize+Math.floor(n/32);this.bits[a]|=1<<(n&31)&4294967295}unset(n,s){const a=s*this.rowSize+Math.floor(n/32);this.bits[a]&=~(1<<(n&31)&4294967295)}flip(n,s){const a=s*this.rowSize+Math.floor(n/32);this.bits[a]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new N("input matrix dimensions do not match");const s=new we(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let h=0,d=this.height;h<d;h++){const m=h*a,E=n.getRow(h,s).getBitArray();for(let I=0;I<a;I++)c[m+I]^=E[I]}}clear(){const n=this.bits,s=n.length;for(let a=0;a<s;a++)n[a]=0}setRegion(n,s,a,c){if(s<0||n<0)throw new N("Left and top must be nonnegative");if(c<1||a<1)throw new N("Height and width must be at least 1");const h=n+a,d=s+c;if(d>this.height||h>this.width)throw new N("The region must fit inside the matrix");const m=this.rowSize,E=this.bits;for(let I=s;I<d;I++){const R=I*m;for(let P=n;P<h;P++)E[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(n,s){s==null||s.getSize()<this.width?s=new we(this.width):s.clear();const a=this.rowSize,c=this.bits,h=n*a;for(let d=0;d<a;d++)s.setBulk(d*32,c[h+d]);return s}setRow(n,s){Y.arraycopy(s.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),s=this.getHeight();let a=new we(n),c=new we(n);for(let h=0,d=Math.floor((s+1)/2);h<d;h++)a=this.getRow(h,a),c=this.getRow(s-1-h,c),a.reverse(),c.reverse(),this.setRow(h,c),this.setRow(s-1-h,a)}getEnclosingRectangle(){const n=this.width,s=this.height,a=this.rowSize,c=this.bits;let h=n,d=s,m=-1,E=-1;for(let I=0;I<s;I++)for(let R=0;R<a;R++){const P=c[I*a+R];if(P!==0){if(I<d&&(d=I),I>E&&(E=I),R*32<h){let k=0;for(;(P<<31-k&4294967295)===0;)k++;R*32+k<h&&(h=R*32+k)}if(R*32+31>m){let k=31;for(;!(P>>>k);)k--;R*32+k>m&&(m=R*32+k)}}}return m<h||E<d?null:Int32Array.from([h,d,m-h+1,E-d+1])}getTopLeftOnBit(){const n=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/n;let h=a%n*32;const d=s[a];let m=0;for(;(d<<31-m&4294967295)===0;)m++;return h+=m,Int32Array.from([h,c])}getBottomRightOnBit(){const n=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/n);let h=Math.floor(a%n)*32;const d=s[a];let m=31;for(;!(d>>>m);)m--;return h+=m,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Je))return!1;const s=n;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&ge.equals(this.bits,s.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+ge.hashCode(this.bits),n}toString(n="X ",s="  ",a=`
`){return this.buildToString(n,s,a)}buildToString(n,s,a){let c=new j;for(let h=0,d=this.height;h<d;h++){for(let m=0,E=this.width;m<E;m++)c.append(this.get(m,h)?n:s);c.append(a)}return c.toString()}clone(){return new Je(this.width,this.height,this.rowSize,this.bits.slice())}}class le extends _{static getNotFoundInstance(){return new le}}le.kind="NotFoundException";class Ct extends ee{constructor(n){super(n),this.luminances=Ct.EMPTY,this.buckets=new Int32Array(Ct.LUMINANCE_BUCKETS)}getBlackRow(n,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new we(c):s.clear(),this.initArrays(c);const h=a.getRow(n,this.luminances),d=this.buckets;for(let E=0;E<c;E++)d[(h[E]&255)>>Ct.LUMINANCE_SHIFT]++;const m=Ct.estimateBlackPoint(d);if(c<3)for(let E=0;E<c;E++)(h[E]&255)<m&&s.set(E);else{let E=h[0]&255,I=h[1]&255;for(let R=1;R<c-1;R++){const P=h[R+1]&255;(I*4-E-P)/2<m&&s.set(R),E=I,I=P}}return s}getBlackMatrix(){const n=this.getLuminanceSource(),s=n.getWidth(),a=n.getHeight(),c=new Je(s,a);this.initArrays(s);const h=this.buckets;for(let E=1;E<5;E++){const I=Math.floor(a*E/5),R=n.getRow(I,this.luminances),P=Math.floor(s*4/5);for(let k=Math.floor(s/5);k<P;k++){const z=R[k]&255;h[z>>Ct.LUMINANCE_SHIFT]++}}const d=Ct.estimateBlackPoint(h),m=n.getMatrix();for(let E=0;E<a;E++){const I=E*s;for(let R=0;R<s;R++)(m[I+R]&255)<d&&c.set(R,E)}return c}createBinarizer(n){return new Ct(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const s=this.buckets;for(let a=0;a<Ct.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(n){const s=n.length;let a=0,c=0,h=0;for(let R=0;R<s;R++)n[R]>h&&(c=R,h=n[R]),n[R]>a&&(a=n[R]);let d=0,m=0;for(let R=0;R<s;R++){const P=R-c,k=n[R]*P*P;k>m&&(d=R,m=k)}if(c>d){const R=c;c=d,d=R}if(d-c<=s/16)throw new le;let E=d-1,I=-1;for(let R=d-1;R>c;R--){const P=R-c,k=P*P*(d-R)*(a-n[R]);k>I&&(E=R,I=k)}return E<<Ct.LUMINANCE_SHIFT}}Ct.LUMINANCE_BITS=5,Ct.LUMINANCE_SHIFT=8-Ct.LUMINANCE_BITS,Ct.LUMINANCE_BUCKETS=1<<Ct.LUMINANCE_BITS,Ct.EMPTY=Uint8ClampedArray.from([0]);class Be extends Ct{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),s=n.getWidth(),a=n.getHeight();if(s>=Be.MINIMUM_DIMENSION&&a>=Be.MINIMUM_DIMENSION){const c=n.getMatrix();let h=s>>Be.BLOCK_SIZE_POWER;(s&Be.BLOCK_SIZE_MASK)!==0&&h++;let d=a>>Be.BLOCK_SIZE_POWER;(a&Be.BLOCK_SIZE_MASK)!==0&&d++;const m=Be.calculateBlackPoints(c,h,d,s,a),E=new Je(s,a);Be.calculateThresholdForBlock(c,h,d,s,a,m,E),this.matrix=E}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new Be(n)}static calculateThresholdForBlock(n,s,a,c,h,d,m){const E=h-Be.BLOCK_SIZE,I=c-Be.BLOCK_SIZE;for(let R=0;R<a;R++){let P=R<<Be.BLOCK_SIZE_POWER;P>E&&(P=E);const k=Be.cap(R,2,a-3);for(let z=0;z<s;z++){let K=z<<Be.BLOCK_SIZE_POWER;K>I&&(K=I);const Z=Be.cap(z,2,s-3);let ne=0;for(let ve=-2;ve<=2;ve++){const Se=d[k+ve];ne+=Se[Z-2]+Se[Z-1]+Se[Z]+Se[Z+1]+Se[Z+2]}const ce=ne/25;Be.thresholdBlock(n,K,P,ce,c,m)}}}static cap(n,s,a){return n<s?s:n>a?a:n}static thresholdBlock(n,s,a,c,h,d){for(let m=0,E=a*h+s;m<Be.BLOCK_SIZE;m++,E+=h)for(let I=0;I<Be.BLOCK_SIZE;I++)(n[E+I]&255)<=c&&d.set(s+I,a+m)}static calculateBlackPoints(n,s,a,c,h){const d=h-Be.BLOCK_SIZE,m=c-Be.BLOCK_SIZE,E=new Array(a);for(let I=0;I<a;I++){E[I]=new Int32Array(s);let R=I<<Be.BLOCK_SIZE_POWER;R>d&&(R=d);for(let P=0;P<s;P++){let k=P<<Be.BLOCK_SIZE_POWER;k>m&&(k=m);let z=0,K=255,Z=0;for(let ce=0,ve=R*c+k;ce<Be.BLOCK_SIZE;ce++,ve+=c){for(let Se=0;Se<Be.BLOCK_SIZE;Se++){const _e=n[ve+Se]&255;z+=_e,_e<K&&(K=_e),_e>Z&&(Z=_e)}if(Z-K>Be.MIN_DYNAMIC_RANGE)for(ce++,ve+=c;ce<Be.BLOCK_SIZE;ce++,ve+=c)for(let Se=0;Se<Be.BLOCK_SIZE;Se++)z+=n[ve+Se]&255}let ne=z>>Be.BLOCK_SIZE_POWER*2;if(Z-K<=Be.MIN_DYNAMIC_RANGE&&(ne=K/2,I>0&&P>0)){const ce=(E[I-1][P]+2*E[I][P-1]+E[I-1][P-1])/4;K<ce&&(ne=ce)}E[I][P]=ne}}return E}}Be.BLOCK_SIZE_POWER=3,Be.BLOCK_SIZE=1<<Be.BLOCK_SIZE_POWER,Be.BLOCK_SIZE_MASK=Be.BLOCK_SIZE-1,Be.MINIMUM_DIMENSION=Be.BLOCK_SIZE*5,Be.MIN_DYNAMIC_RANGE=24;class Pe{constructor(n,s){this.width=n,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,s,a,c){throw new $("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new $("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new $("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let s=new j;for(let a=0;a<this.height;a++){const c=this.getRow(a,n);for(let h=0;h<this.width;h++){const d=c[h]&255;let m;d<64?m="#":d<128?m="+":d<192?m=".":m=" ",s.append(m)}s.append(`
`)}return s.toString()}}class ze extends Pe{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,s){const a=this.delegate.getRow(n,s),c=this.getWidth();for(let h=0;h<c;h++)a[h]=255-(a[h]&255);return a}getMatrix(){const n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(n[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(n,s,a,c){return new ze(this.delegate.crop(n,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ze(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ze(this.delegate.rotateCounterClockwise45())}}class ke extends Pe{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=ke.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const s=n.getContext("2d").getImageData(0,0,n.width,n.height);return ke.toGrayscaleBuffer(s.data,n.width,n.height)}static toGrayscaleBuffer(n,s,a){const c=new Uint8ClampedArray(s*a);for(let h=0,d=0,m=n.length;h<m;h+=4,d++){let E;if(n[h+3]===0)E=255;else{const R=n[h],P=n[h+1],k=n[h+2];E=306*R+601*P+117*k+512>>10}c[d]=E}return c}getRow(n,s){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const a=this.getWidth(),c=n*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,s,a,c){return super.crop(n,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=n*ke.DEGREE_TO_RADIANS,h=this.canvas.width,d=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*d),E=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*d);return s.width=m,s.height=E,a.translate(m/2,E/2),a.rotate(c),a.drawImage(this.canvas,h/-2,d/-2),this.buffer=ke.makeBufferFromCanvasImageData(s),this}invert(){return new ze(this)}}ke.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(n,s,a){this.deviceId=n,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var de=(globalThis||Nc||self||window||void 0)&&(globalThis||Nc||self||window||void 0).__awaiter||function(O,n,s,a){function c(h){return h instanceof s?h:new s(function(d){d(h)})}return new(s||(s=Promise))(function(h,d){function m(R){try{I(a.next(R))}catch(P){d(P)}}function E(R){try{I(a.throw(R))}catch(P){d(P)}}function I(R){R.done?h(R.value):c(R.value).then(m,E)}I((a=a.apply(O,n||[])).next())})};class tt{constructor(n,s=500,a){this.reader=n,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return de(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of n){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const h=a.deviceId||a.id,d=a.label||`Video device ${s.length+1}`,m=a.groupId,E={deviceId:h,label:d,kind:c,groupId:m};s.push(E)}return s})}getVideoInputDevices(){return de(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new te(s.deviceId,s.label))})}findDeviceById(n){return de(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===n):null})}decodeFromInputVideoDevice(n,s){return de(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,s)})}decodeOnceFromVideoDevice(n,s){return de(this,void 0,void 0,function*(){this.reset();let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(n,s){return de(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(n,s){return de(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(n,s,a){return de(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,s,a)})}decodeFromVideoDevice(n,s,a){return de(this,void 0,void 0,function*(){let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,s,a)})}decodeFromConstraints(n,s,a){return de(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(n,s,a){return de(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,s){return de(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,n),this.videoElement=a,this.stream=n,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(n){return new Promise((s,a)=>this.playVideoOnLoad(n,()=>s()))}playVideoOnLoad(n,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",s),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return de(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,s){const a=document.getElementById(n);if(!a)throw new v(`element with id '${n}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new v(`element with id '${n}' must be an ${s} element`);return a}decodeFromImage(n,s){if(!n&&!s)throw new v("either imageElement with a src set or an url must be provided");return s&&!n?this.decodeFromImageUrl(s):this.decodeFromImageElement(n)}decodeFromVideo(n,s){if(!n&&!s)throw new v("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,s,a){if(n===void 0&&s===void 0)throw new v("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(n,a)}decodeFromImageElement(n){if(!n)throw new v("An image element must be provided.");this.reset();const s=this.prepareImageElement(n);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(n){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(n,s){const a=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(n){if(!n)throw new v("A video element must be provided.");this.reset();const s=this.prepareVideoElement(n);return this.videoElement=s,s}decodeFromImageUrl(n){if(!n)throw new v("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=n,a}decodeFromVideoUrl(n){if(!n)throw new v("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=n,a}decodeFromVideoUrlContinuously(n,s){if(!n)throw new v("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=n,c}_decodeOnLoadImage(n){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(s,a),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return de(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,s){return de(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,s)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let s;return typeof n>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(s=n),s}prepareVideoElement(n){let s;return!n&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(s=n),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(n,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(h,d)=>{if(this._stopAsyncDecode){d(new le("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(n);h(m)}catch(m){const E=s&&m instanceof le,R=(m instanceof W||m instanceof V)&&a;if(E||R)return setTimeout(c,this._timeBetweenDecodingAttempts,h,d);d(m)}};return new Promise((h,d)=>c(h,d))}decodeContinuously(n,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(n);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const h=c instanceof W||c instanceof V,d=c instanceof le;(h||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(n){const s=this.createBinaryBitmap(n);return this.decodeBitmap(s)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,s,a){s||(s={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(n,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const s=this.getCaptureCanvas(n),a=new ke(s),c=new Be(a);return new M(c)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const s=this.createCaptureCanvas(n);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof n<"u"&&(n instanceof HTMLVideoElement?(a=n.videoWidth,c=n.videoHeight):n instanceof HTMLImageElement&&(a=n.naturalWidth||n.width,c=n.naturalHeight||n.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,s){try{n.srcObject=s}catch{n.src=URL.createObjectURL(s)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Ge{constructor(n,s,a=s==null?0:8*s.length,c,h,d=Y.currentTimeMillis()){this.text=n,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=h,this.timestamp=d,this.text=n,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=h,this.resultMetadata=null,d==null?this.timestamp=Y.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,s)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const s=this.resultPoints;if(s===null)this.resultPoints=n;else if(n!==null&&n.length>0){const a=new Array(s.length+n.length);Y.arraycopy(s,0,a,0,s.length),Y.arraycopy(n,0,a,s.length,n.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var wt;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(wt||(wt={}));var be=wt,kt;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(kt||(kt={}));var nt=kt;class Bt{constructor(n,s,a,c,h=-1,d=-1){this.rawBytes=n,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=d,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class bn{exp(n){return this.expTable[n]}log(n){if(n===0)throw new N;return this.logTable[n]}static addOrSubtract(n,s){return n^s}}class On{constructor(n,s){if(s.length===0)throw new N;this.field=n;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),Y.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(n===1){a=0;for(let d=0,m=s.length;d!==m;d++){const E=s[d];a=bn.addOrSubtract(a,E)}return a}a=s[0];const c=s.length,h=this.field;for(let d=1;d<c;d++)a=bn.addOrSubtract(h.multiply(n,a),s[d]);return a}addOrSubtract(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,a=n.coefficients;if(s.length>a.length){const d=s;s=a,a=d}let c=new Int32Array(a.length);const h=a.length-s.length;Y.arraycopy(a,0,c,0,h);for(let d=h;d<a.length;d++)c[d]=bn.addOrSubtract(s[d-h],a[d]);return new On(this.field,c)}multiply(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=n.coefficients,h=c.length,d=new Int32Array(a+h-1),m=this.field;for(let E=0;E<a;E++){const I=s[E];for(let R=0;R<h;R++)d[E+R]=bn.addOrSubtract(d[E+R],m.multiply(I,c[R]))}return new On(m,d)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),h=this.coefficients;for(let d=0;d<s;d++)c[d]=a.multiply(h[d],n);return new On(a,c)}multiplyByMonomial(n,s){if(n<0)throw new N;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,h=new Int32Array(c+n),d=this.field;for(let m=0;m<c;m++)h[m]=d.multiply(a[m],s);return new On(d,h)}divide(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new N("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const h=n.getCoefficient(n.getDegree()),d=s.inverse(h);for(;c.getDegree()>=n.getDegree()&&!c.isZero();){const m=c.getDegree()-n.getDegree(),E=s.multiply(c.getCoefficient(c.getDegree()),d),I=n.multiplyByMonomial(m,E),R=s.buildMonomial(m,E);a=a.addOrSubtract(R),c=c.addOrSubtract(I)}return[a,c]}toString(){let n="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(n+=" - ",a=-a):n.length>0&&(n+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?n+="1":c===1?n+="a":(n+="a^",n+=c)}s!==0&&(s===1?n+="x":(n+="x^",n+=s))}}return n}}class ns extends _{}ns.kind="ArithmeticException";class Et extends bn{constructor(n,s,a){super(),this.primitive=n,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let h=1;for(let m=0;m<s;m++)c[m]=h,h*=2,h>=s&&(h^=n,h&=s-1);this.expTable=c;const d=new Int32Array(s);for(let m=0;m<s-1;m++)d[c[m]]=m;this.logTable=d,this.zero=new On(this,Int32Array.from([0])),this.one=new On(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new N;if(s===0)return this.zero;const a=new Int32Array(n+1);return a[0]=s,new On(this,a)}inverse(n){if(n===0)throw new ns;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ie.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Et.AZTEC_DATA_12=new Et(4201,4096,1),Et.AZTEC_DATA_10=new Et(1033,1024,1),Et.AZTEC_DATA_6=new Et(67,64,1),Et.AZTEC_PARAM=new Et(19,16,1),Et.QR_CODE_FIELD_256=new Et(285,256,0),Et.DATA_MATRIX_FIELD_256=new Et(301,256,1),Et.AZTEC_DATA_8=Et.DATA_MATRIX_FIELD_256,Et.MAXICODE_FIELD_64=Et.AZTEC_DATA_6;class ai extends _{}ai.kind="ReedSolomonException";class Mr extends _{}Mr.kind="IllegalStateException";class Ei{constructor(n){this.field=n}decode(n,s){const a=this.field,c=new On(a,n),h=new Int32Array(s);let d=!0;for(let z=0;z<s;z++){const K=c.evaluateAt(a.exp(z+a.getGeneratorBase()));h[h.length-1-z]=K,K!==0&&(d=!1)}if(d)return;const m=new On(a,h),E=this.runEuclideanAlgorithm(a.buildMonomial(s,1),m,s),I=E[0],R=E[1],P=this.findErrorLocations(I),k=this.findErrorMagnitudes(R,P);for(let z=0;z<P.length;z++){const K=n.length-1-a.log(P[z]);if(K<0)throw new ai("Bad error location");n[K]=Et.addOrSubtract(n[K],k[z])}}runEuclideanAlgorithm(n,s,a){if(n.getDegree()<s.getDegree()){const z=n;n=s,s=z}const c=this.field;let h=n,d=s,m=c.getZero(),E=c.getOne();for(;d.getDegree()>=(a/2|0);){let z=h,K=m;if(h=d,m=E,h.isZero())throw new ai("r_{i-1} was zero");d=z;let Z=c.getZero();const ne=h.getCoefficient(h.getDegree()),ce=c.inverse(ne);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){const ve=d.getDegree()-h.getDegree(),Se=c.multiply(d.getCoefficient(d.getDegree()),ce);Z=Z.addOrSubtract(c.buildMonomial(ve,Se)),d=d.addOrSubtract(h.multiplyByMonomial(ve,Se))}if(E=Z.multiply(m).addOrSubtract(K),d.getDegree()>=h.getDegree())throw new Mr("Division algorithm failed to reduce polynomial?")}const I=E.getCoefficient(0);if(I===0)throw new ai("sigmaTilde(0) was zero");const R=c.inverse(I),P=E.multiplyScalar(R),k=d.multiplyScalar(R);return[P,k]}findErrorLocations(n){const s=n.getDegree();if(s===1)return Int32Array.from([n.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const h=this.field;for(let d=1;d<h.getSize()&&c<s;d++)n.evaluateAt(d)===0&&(a[c]=h.inverse(d),c++);if(c!==s)throw new ai("Error locator degree does not match number of roots");return a}findErrorMagnitudes(n,s){const a=s.length,c=new Int32Array(a),h=this.field;for(let d=0;d<a;d++){const m=h.inverse(s[d]);let E=1;for(let I=0;I<a;I++)if(d!==I){const R=h.multiply(s[I],m),P=(R&1)===0?R|1:R&-2;E=h.multiply(E,P)}c[d]=h.multiply(n.evaluateAt(m),h.inverse(E)),h.getGeneratorBase()!==0&&(c[d]=h.multiply(c[d],m))}return c}}var nn;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(nn||(nn={}));class Ut{decode(n){this.ddata=n;let s=n.getBits(),a=this.extractBits(s),c=this.correctBits(a),h=Ut.convertBoolArrayToByteArray(c),d=Ut.getEncodedData(c),m=new Bt(h,d,null,null);return m.setNumBits(c.length),m}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let s=n.length,a=nn.UPPER,c=nn.UPPER,h="",d=0;for(;d<s;)if(c===nn.BINARY){if(s-d<5)break;let m=Ut.readCode(n,d,5);if(d+=5,m===0){if(s-d<11)break;m=Ut.readCode(n,d,11)+31,d+=11}for(let E=0;E<m;E++){if(s-d<8){d=s;break}const I=Ut.readCode(n,d,8);h+=q.castAsNonUtf8Char(I),d+=8}c=a}else{let m=c===nn.DIGIT?4:5;if(s-d<m)break;let E=Ut.readCode(n,d,m);d+=m;let I=Ut.getCharacter(c,E);I.startsWith("CTRL_")?(a=c,c=Ut.getTable(I.charAt(5)),I.charAt(6)==="L"&&(a=c)):(h+=I,c=a)}return h}static getTable(n){switch(n){case"L":return nn.LOWER;case"P":return nn.PUNCT;case"M":return nn.MIXED;case"D":return nn.DIGIT;case"B":return nn.BINARY;case"U":default:return nn.UPPER}}static getCharacter(n,s){switch(n){case nn.UPPER:return Ut.UPPER_TABLE[s];case nn.LOWER:return Ut.LOWER_TABLE[s];case nn.MIXED:return Ut.MIXED_TABLE[s];case nn.PUNCT:return Ut.PUNCT_TABLE[s];case nn.DIGIT:return Ut.DIGIT_TABLE[s];default:throw new Mr("Bad table")}}correctBits(n){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Et.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Et.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Et.AZTEC_DATA_10):(a=12,s=Et.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=n.length/a;if(h<c)throw new V;let d=n.length%a,m=new Int32Array(h);for(let k=0;k<h;k++,d+=a)m[k]=Ut.readCode(n,d,a);try{new Ei(s).decode(m,h-c)}catch(k){throw new V(k)}let E=(1<<a)-1,I=0;for(let k=0;k<c;k++){let z=m[k];if(z===0||z===E)throw new V;(z===1||z===E-1)&&I++}let R=new Array(c*a-I),P=0;for(let k=0;k<c;k++){let z=m[k];if(z===1||z===E-1)R.fill(z>1,P,P+a-1),P+=a-1;else for(let K=a-1;K>=0;--K)R[P++]=(z&1<<K)!==0}return R}extractBits(n){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,h=new Int32Array(c),d=new Array(this.totalBitsInLayer(a,s));if(s)for(let m=0;m<h.length;m++)h[m]=m;else{let m=c+1+2*ie.truncDivision(ie.truncDivision(c,2)-1,15),E=c/2,I=ie.truncDivision(m,2);for(let R=0;R<E;R++){let P=R+ie.truncDivision(R,15);h[E-R-1]=I-P-1,h[E+R]=I+P+1}}for(let m=0,E=0;m<a;m++){let I=(a-m)*4+(s?9:12),R=m*2,P=c-1-R;for(let k=0;k<I;k++){let z=k*2;for(let K=0;K<2;K++)d[E+z+K]=n.get(h[R+K],h[R+k]),d[E+2*I+z+K]=n.get(h[R+k],h[P-K]),d[E+4*I+z+K]=n.get(h[P-K],h[P-k]),d[E+6*I+z+K]=n.get(h[P-k],h[R+K])}E+=I*8}return d}static readCode(n,s,a){let c=0;for(let h=s;h<s+a;h++)c<<=1,n[h]&&(c|=1);return c}static readByte(n,s){let a=n.length-s;return a>=8?Ut.readCode(n,s,8):Ut.readCode(n,s,a)<<8-a}static convertBoolArrayToByteArray(n){let s=new Uint8Array((n.length+7)/8);for(let a=0;a<s.length;a++)s[a]=Ut.readByte(n,8*a);return s}totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}Ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,s,a,c){const h=n-a,d=s-c;return Math.sqrt(h*h+d*d)}static sum(n){let s=0;for(let a=0,c=n.length;a!==c;a++){const h=n[a];s+=h}return s}}class Jt{static floatToIntBits(n){return n}}Jt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(n,s){this.x=n,this.y=s}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof Me){const s=n;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Jt.floatToIntBits(this.x)+Jt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const s=this.distance(n[0],n[1]),a=this.distance(n[1],n[2]),c=this.distance(n[0],n[2]);let h,d,m;if(a>=s&&a>=c?(d=n[0],h=n[1],m=n[2]):c>=a&&c>=s?(d=n[1],h=n[0],m=n[2]):(d=n[2],h=n[0],m=n[1]),this.crossProductZ(h,d,m)<0){const E=h;h=m,m=E}n[0]=h,n[1]=d,n[2]=m}static distance(n,s){return Ze.distance(n.x,n.y,s.x,s.y)}static crossProductZ(n,s,a){const c=s.x,h=s.y;return(a.x-c)*(n.y-h)-(a.y-h)*(n.x-c)}}class rs{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class oo extends rs{constructor(n,s,a,c,h){super(n,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Wr{constructor(n,s,a,c){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),s==null&&(s=Wr.INIT_SIZE),a==null&&(a=n.getWidth()/2|0),c==null&&(c=n.getHeight()/2|0);const h=s/2|0;if(this.leftInit=a-h,this.rightInit=a+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new le}detect(){let n=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,h=!1,d=!0,m=!1,E=!1,I=!1,R=!1,P=!1;const k=this.width,z=this.height;for(;d;){d=!1;let K=!0;for(;(K||!E)&&s<k;)K=this.containsBlackPoint(a,c,s,!1),K?(s++,d=!0,E=!0):E||s++;if(s>=k){h=!0;break}let Z=!0;for(;(Z||!I)&&c<z;)Z=this.containsBlackPoint(n,s,c,!0),Z?(c++,d=!0,I=!0):I||c++;if(c>=z){h=!0;break}let ne=!0;for(;(ne||!R)&&n>=0;)ne=this.containsBlackPoint(a,c,n,!1),ne?(n--,d=!0,R=!0):R||n--;if(n<0){h=!0;break}let ce=!0;for(;(ce||!P)&&a>=0;)ce=this.containsBlackPoint(n,s,a,!0),ce?(a--,d=!0,P=!0):P||a--;if(a<0){h=!0;break}d&&(m=!0)}if(!h&&m){const K=s-n;let Z=null;for(let Se=1;Z===null&&Se<K;Se++)Z=this.getBlackPointOnSegment(n,c-Se,n+Se,c);if(Z==null)throw new le;let ne=null;for(let Se=1;ne===null&&Se<K;Se++)ne=this.getBlackPointOnSegment(n,a+Se,n+Se,a);if(ne==null)throw new le;let ce=null;for(let Se=1;ce===null&&Se<K;Se++)ce=this.getBlackPointOnSegment(s,a+Se,s-Se,a);if(ce==null)throw new le;let ve=null;for(let Se=1;ve===null&&Se<K;Se++)ve=this.getBlackPointOnSegment(s,c-Se,s-Se,c);if(ve==null)throw new le;return this.centerEdges(ve,Z,ce,ne)}else throw new le}getBlackPointOnSegment(n,s,a,c){const h=Ze.round(Ze.distance(n,s,a,c)),d=(a-n)/h,m=(c-s)/h,E=this.image;for(let I=0;I<h;I++){const R=Ze.round(n+I*d),P=Ze.round(s+I*m);if(E.get(R,P))return new Me(R,P)}return null}centerEdges(n,s,a,c){const h=n.getX(),d=n.getY(),m=s.getX(),E=s.getY(),I=a.getX(),R=a.getY(),P=c.getX(),k=c.getY(),z=Wr.CORR;return h<this.width/2?[new Me(P-z,k+z),new Me(m+z,E+z),new Me(I-z,R-z),new Me(h+z,d-z)]:[new Me(P+z,k+z),new Me(m+z,E-z),new Me(I-z,R+z),new Me(h-z,d-z)]}containsBlackPoint(n,s,a,c){const h=this.image;if(c){for(let d=n;d<=s;d++)if(h.get(d,a))return!0}else for(let d=n;d<=s;d++)if(h.get(a,d))return!0;return!1}}Wr.INIT_SIZE=10,Wr.CORR=1;class _i{static checkAndNudgePoints(n,s){const a=n.getWidth(),c=n.getHeight();let h=!0;for(let d=0;d<s.length&&h;d+=2){const m=Math.floor(s[d]),E=Math.floor(s[d+1]);if(m<-1||m>a||E<-1||E>c)throw new le;h=!1,m===-1?(s[d]=0,h=!0):m===a&&(s[d]=a-1,h=!0),E===-1?(s[d+1]=0,h=!0):E===c&&(s[d+1]=c-1,h=!0)}h=!0;for(let d=s.length-2;d>=0&&h;d-=2){const m=Math.floor(s[d]),E=Math.floor(s[d+1]);if(m<-1||m>a||E<-1||E>c)throw new le;h=!1,m===-1?(s[d]=0,h=!0):m===a&&(s[d]=a-1,h=!0),E===-1?(s[d+1]=0,h=!0):E===c&&(s[d+1]=c-1,h=!0)}}}class ur{constructor(n,s,a,c,h,d,m,E,I){this.a11=n,this.a21=s,this.a31=a,this.a12=c,this.a22=h,this.a32=d,this.a13=m,this.a23=E,this.a33=I}static quadrilateralToQuadrilateral(n,s,a,c,h,d,m,E,I,R,P,k,z,K,Z,ne){const ce=ur.quadrilateralToSquare(n,s,a,c,h,d,m,E);return ur.squareToQuadrilateral(I,R,P,k,z,K,Z,ne).times(ce)}transformPoints(n){const s=n.length,a=this.a11,c=this.a12,h=this.a13,d=this.a21,m=this.a22,E=this.a23,I=this.a31,R=this.a32,P=this.a33;for(let k=0;k<s;k+=2){const z=n[k],K=n[k+1],Z=h*z+E*K+P;n[k]=(a*z+d*K+I)/Z,n[k+1]=(c*z+m*K+R)/Z}}transformPointsWithValues(n,s){const a=this.a11,c=this.a12,h=this.a13,d=this.a21,m=this.a22,E=this.a23,I=this.a31,R=this.a32,P=this.a33,k=n.length;for(let z=0;z<k;z++){const K=n[z],Z=s[z],ne=h*K+E*Z+P;n[z]=(a*K+d*Z+I)/ne,s[z]=(c*K+m*Z+R)/ne}}static squareToQuadrilateral(n,s,a,c,h,d,m,E){const I=n-a+h-m,R=s-c+d-E;if(I===0&&R===0)return new ur(a-n,h-a,n,c-s,d-c,s,0,0,1);{const P=a-h,k=m-h,z=c-d,K=E-d,Z=P*K-k*z,ne=(I*K-k*R)/Z,ce=(P*R-I*z)/Z;return new ur(a-n+ne*a,m-n+ce*m,n,c-s+ne*c,E-s+ce*E,s,ne,ce,1)}}static quadrilateralToSquare(n,s,a,c,h,d,m,E){return ur.squareToQuadrilateral(n,s,a,c,h,d,m,E).buildAdjoint()}buildAdjoint(){return new ur(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new ur(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Ps extends _i{sampleGrid(n,s,a,c,h,d,m,E,I,R,P,k,z,K,Z,ne,ce,ve,Se){const _e=ur.quadrilateralToQuadrilateral(c,h,d,m,E,I,R,P,k,z,K,Z,ne,ce,ve,Se);return this.sampleGridWithTransform(n,s,a,_e)}sampleGridWithTransform(n,s,a,c){if(s<=0||a<=0)throw new le;const h=new Je(s,a),d=new Float32Array(2*s);for(let m=0;m<a;m++){const E=d.length,I=m+.5;for(let R=0;R<E;R+=2)d[R]=R/2+.5,d[R+1]=I;c.transformPoints(d),_i.checkAndNudgePoints(n,d);try{for(let R=0;R<E;R+=2)n.get(Math.floor(d[R]),Math.floor(d[R+1]))&&h.set(R/2,m)}catch{throw new le}}return h}}class cr{static setGridSampler(n){cr.gridSampler=n}static getInstance(){return cr.gridSampler}}cr.gridSampler=new Ps;class Ln{constructor(n,s){this.x=n,this.y=s}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class is{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(n){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),h=this.getMatrixCornerPoints(a);return new oo(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new le;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(n[0],n[1],s),this.sampleLine(n[1],n[2],s),this.sampleLine(n[2],n[3],s),this.sampleLine(n[3],n[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let d=0;d<4;d++){let m=a[(this.shift+d)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(n,s){let a=0;n.forEach((c,h,d)=>{let m=(c>>s-2<<1)+(c&1);a=(a<<3)+m}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(ie.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new le}getCorrectedParameterData(n,s){let a,c;s?(a=7,c=2):(a=10,c=4);let h=a-c,d=new Int32Array(a);for(let E=a-1;E>=0;--E)d[E]=n&15,n>>=4;try{new Ei(Et.AZTEC_PARAM).decode(d,h)}catch{throw new le}let m=0;for(let E=0;E<c;E++)m=(m<<4)+d[E];return m}getBullsEyeCorners(n){let s=n,a=n,c=n,h=n,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(s,d,1,-1),k=this.getFirstDifferent(a,d,1,1),z=this.getFirstDifferent(c,d,-1,1),K=this.getFirstDifferent(h,d,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(K,P)*this.nbCenterLayers/(this.distancePoint(h,s)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(P,k,z,K))break}s=P,a=k,c=z,h=K,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new le;this.compact=this.nbCenterLayers===5;let m=new Me(s.getX()+.5,s.getY()-.5),E=new Me(a.getX()+.5,a.getY()+.5),I=new Me(c.getX()-.5,c.getY()+.5),R=new Me(h.getX()-.5,h.getY()-.5);return this.expandSquare([m,E,I,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,s,a,c;try{let m=new Wr(this.image).detect();n=m[0],s=m[1],a=m[2],c=m[3]}catch{let E=this.image.getWidth()/2,I=this.image.getHeight()/2;n=this.getFirstDifferent(new Ln(E+7,I-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ln(E+7,I+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ln(E-7,I+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ln(E-7,I-7),!1,-1,-1).toResultPoint()}let h=Ze.round((n.getX()+c.getX()+s.getX()+a.getX())/4),d=Ze.round((n.getY()+c.getY()+s.getY()+a.getY())/4);try{let m=new Wr(this.image,15,h,d).detect();n=m[0],s=m[1],a=m[2],c=m[3]}catch{n=this.getFirstDifferent(new Ln(h+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ln(h+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ln(h-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ln(h-7,d-7),!1,-1,-1).toResultPoint()}return h=Ze.round((n.getX()+c.getX()+s.getX()+a.getX())/4),d=Ze.round((n.getY()+c.getY()+s.getY()+a.getY())/4),new Ln(h,d)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,s,a,c,h){let d=cr.getInstance(),m=this.getDimension(),E=m/2-this.nbCenterLayers,I=m/2+this.nbCenterLayers;return d.sampleGrid(n,m,m,E,E,I,E,I,I,E,I,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(n,s,a){let c=0,h=this.distanceResultPoint(n,s),d=h/a,m=n.getX(),E=n.getY(),I=d*(s.getX()-n.getX())/h,R=d*(s.getY()-n.getY())/h;for(let P=0;P<a;P++)this.image.get(Ze.round(m+P*I),Ze.round(E+P*R))&&(c|=1<<a-P-1);return c}isWhiteOrBlackRectangle(n,s,a,c){let h=3;n=new Ln(n.getX()-h,n.getY()+h),s=new Ln(s.getX()-h,s.getY()-h),a=new Ln(a.getX()+h,a.getY()-h),c=new Ln(c.getX()+h,c.getY()+h);let d=this.getColor(c,n);if(d===0)return!1;let m=this.getColor(n,s);return m!==d||(m=this.getColor(s,a),m!==d)?!1:(m=this.getColor(a,c),m===d)}getColor(n,s){let a=this.distancePoint(n,s),c=(s.getX()-n.getX())/a,h=(s.getY()-n.getY())/a,d=0,m=n.getX(),E=n.getY(),I=this.image.get(n.getX(),n.getY()),R=Math.ceil(a);for(let k=0;k<R;k++)m+=c,E+=h,this.image.get(Ze.round(m),Ze.round(E))!==I&&d++;let P=d/a;return P>.1&&P<.9?0:P<=.1===I?1:-1}getFirstDifferent(n,s,a,c){let h=n.getX()+a,d=n.getY()+c;for(;this.isValid(h,d)&&this.image.get(h,d)===s;)h+=a,d+=c;for(h-=a,d-=c;this.isValid(h,d)&&this.image.get(h,d)===s;)h+=a;for(h-=a;this.isValid(h,d)&&this.image.get(h,d)===s;)d+=c;return d-=c,new Ln(h,d)}expandSquare(n,s,a){let c=a/(2*s),h=n[0].getX()-n[2].getX(),d=n[0].getY()-n[2].getY(),m=(n[0].getX()+n[2].getX())/2,E=(n[0].getY()+n[2].getY())/2,I=new Me(m+c*h,E+c*d),R=new Me(m-c*h,E-c*d);h=n[1].getX()-n[3].getX(),d=n[1].getY()-n[3].getY(),m=(n[1].getX()+n[3].getX())/2,E=(n[1].getY()+n[3].getY())/2;let P=new Me(m+c*h,E+c*d),k=new Me(m-c*h,E-c*d);return[I,P,R,k]}isValid(n,s){return n>=0&&n<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(n){let s=Ze.round(n.getX()),a=Ze.round(n.getY());return this.isValid(s,a)}distancePoint(n,s){return Ze.distance(n.getX(),n.getY(),s.getX(),s.getY())}distanceResultPoint(n,s){return Ze.distance(n.getX(),n.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ie.truncDivision(this.nbLayers-4,8)+1)+15}}class li{decode(n,s=null){let a=null,c=new is(n.getBlackMatrix()),h=null,d=null;try{let R=c.detectMirror(!1);h=R.getPoints(),this.reportFoundResultPoints(s,h),d=new Ut().decode(R)}catch(R){a=R}if(d==null)try{let R=c.detectMirror(!0);h=R.getPoints(),this.reportFoundResultPoints(s,h),d=new Ut().decode(R)}catch(R){throw a??R}let m=new Ge(d.getText(),d.getRawBytes(),d.getNumBits(),h,be.AZTEC,Y.currentTimeMillis()),E=d.getByteSegments();E!=null&&m.putMetadata(nt.BYTE_SEGMENTS,E);let I=d.getECLevel();return I!=null&&m.putMetadata(nt.ERROR_CORRECTION_LEVEL,I),m}reportFoundResultPoints(n,s){if(n!=null){let a=n.get(Le.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,h,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Ua extends tt{constructor(n=500){super(new li,n)}}class Yt{decode(n,s){try{return this.doDecode(n,s)}catch{if(s&&s.get(Le.TRY_HARDER)===!0&&n.isRotateSupported()){const h=n.rotateCounterClockwise(),d=this.doDecode(h,s),m=d.getResultMetadata();let E=270;m!==null&&m.get(nt.ORIENTATION)===!0&&(E=E+m.get(nt.ORIENTATION)%360),d.putMetadata(nt.ORIENTATION,E);const I=d.getResultPoints();if(I!==null){const R=h.getHeight();for(let P=0;P<I.length;P++)I[P]=new Me(R-I[P].getY()-1,I[P].getX())}return d}else throw new le}}reset(){}doDecode(n,s){const a=n.getWidth(),c=n.getHeight();let h=new we(a);const d=s&&s.get(Le.TRY_HARDER)===!0,m=Math.max(1,c>>(d?8:5));let E;d?E=c:E=15;const I=Math.trunc(c/2);for(let R=0;R<E;R++){const P=Math.trunc((R+1)/2),k=(R&1)===0,z=I+m*(k?P:-P);if(z<0||z>=c)break;try{h=n.getBlackRow(z,h)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(h.reverse(),s&&s.get(Le.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;s.forEach((ne,ce)=>Z.set(ce,ne)),Z.delete(Le.NEED_RESULT_POINT_CALLBACK),s=Z}try{const Z=this.decodeRow(z,h,s);if(K===1){Z.putMetadata(nt.ORIENTATION,180);const ne=Z.getResultPoints();ne!==null&&(ne[0]=new Me(a-ne[0].getX()-1,ne[0].getY()),ne[1]=new Me(a-ne[1].getX()-1,ne[1].getY()))}return Z}catch{}}}throw new le}static recordPattern(n,s,a){const c=a.length;for(let I=0;I<c;I++)a[I]=0;const h=n.getSize();if(s>=h)throw new le;let d=!n.get(s),m=0,E=s;for(;E<h;){if(n.get(E)!==d)a[m]++;else{if(++m===c)break;a[m]=1,d=!d}E++}if(!(m===c||m===c-1&&E===h))throw new le}static recordPatternInReverse(n,s,a){let c=a.length,h=n.get(s);for(;s>0&&c>=0;)n.get(--s)!==h&&(c--,h=!h);if(c>=0)throw new le;Yt.recordPattern(n,s+1,a)}static patternMatchVariance(n,s,a){const c=n.length;let h=0,d=0;for(let I=0;I<c;I++)h+=n[I],d+=s[I];if(h<d)return Number.POSITIVE_INFINITY;const m=h/d;a*=m;let E=0;for(let I=0;I<c;I++){const R=n[I],P=s[I]*m,k=R>P?R-P:P-R;if(k>a)return Number.POSITIVE_INFINITY;E+=k}return E/h}}class Oe extends Yt{static findStartPattern(n){const s=n.getSize(),a=n.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),d=a,m=!1;const E=6;for(let I=a;I<s;I++)if(n.get(I)!==m)h[c]++;else{if(c===E-1){let R=Oe.MAX_AVG_VARIANCE,P=-1;for(let k=Oe.CODE_START_A;k<=Oe.CODE_START_C;k++){const z=Yt.patternMatchVariance(h,Oe.CODE_PATTERNS[k],Oe.MAX_INDIVIDUAL_VARIANCE);z<R&&(R=z,P=k)}if(P>=0&&n.isRange(Math.max(0,d-(I-d)/2),d,!1))return Int32Array.from([d,I,P]);d+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,m=!m}throw new le}static decodeCode(n,s,a){Yt.recordPattern(n,a,s);let c=Oe.MAX_AVG_VARIANCE,h=-1;for(let d=0;d<Oe.CODE_PATTERNS.length;d++){const m=Oe.CODE_PATTERNS[d],E=this.patternMatchVariance(s,m,Oe.MAX_INDIVIDUAL_VARIANCE);E<c&&(c=E,h=d)}if(h>=0)return h;throw new le}decodeRow(n,s,a){const c=a&&a.get(Le.ASSUME_GS1)===!0,h=Oe.findStartPattern(s),d=h[2];let m=0;const E=new Uint8Array(20);E[m++]=d;let I;switch(d){case Oe.CODE_START_A:I=Oe.CODE_CODE_A;break;case Oe.CODE_START_B:I=Oe.CODE_CODE_B;break;case Oe.CODE_START_C:I=Oe.CODE_CODE_C;break;default:throw new V}let R=!1,P=!1,k="",z=h[0],K=h[1];const Z=Int32Array.from([0,0,0,0,0,0]);let ne=0,ce=0,ve=d,Se=0,_e=!0,It=!1,dt=!1;for(;!R;){const Xi=P;switch(P=!1,ne=ce,ce=Oe.decodeCode(s,Z,K),E[m++]=ce,ce!==Oe.CODE_STOP&&(_e=!0),ce!==Oe.CODE_STOP&&(Se++,ve+=Se*ce),z=K,K+=Z.reduce((Eo,Pl)=>Eo+Pl,0),ce){case Oe.CODE_START_A:case Oe.CODE_START_B:case Oe.CODE_START_C:throw new V}switch(I){case Oe.CODE_CODE_A:if(ce<64)dt===It?k+=String.fromCharCode(32+ce):k+=String.fromCharCode(32+ce+128),dt=!1;else if(ce<96)dt===It?k+=String.fromCharCode(ce-64):k+=String.fromCharCode(ce+64),dt=!1;else switch(ce!==Oe.CODE_STOP&&(_e=!1),ce){case Oe.CODE_FNC_1:c&&(k.length===0?k+="]C1":k+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_A:!It&&dt?(It=!0,dt=!1):It&&dt?(It=!1,dt=!1):dt=!0;break;case Oe.CODE_SHIFT:P=!0,I=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_B:I=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_C:I=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:R=!0;break}break;case Oe.CODE_CODE_B:if(ce<96)dt===It?k+=String.fromCharCode(32+ce):k+=String.fromCharCode(32+ce+128),dt=!1;else switch(ce!==Oe.CODE_STOP&&(_e=!1),ce){case Oe.CODE_FNC_1:c&&(k.length===0?k+="]C1":k+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_B:!It&&dt?(It=!0,dt=!1):It&&dt?(It=!1,dt=!1):dt=!0;break;case Oe.CODE_SHIFT:P=!0,I=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_A:I=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_C:I=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:R=!0;break}break;case Oe.CODE_CODE_C:if(ce<100)ce<10&&(k+="0"),k+=ce;else switch(ce!==Oe.CODE_STOP&&(_e=!1),ce){case Oe.CODE_FNC_1:c&&(k.length===0?k+="]C1":k+="");break;case Oe.CODE_CODE_A:I=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_B:I=Oe.CODE_CODE_B;break;case Oe.CODE_STOP:R=!0;break}break}Xi&&(I=I===Oe.CODE_CODE_A?Oe.CODE_CODE_B:Oe.CODE_CODE_A)}const Tr=K-z;if(K=s.getNextUnset(K),!s.isRange(K,Math.min(s.getSize(),K+(K-z)/2),!1))throw new le;if(ve-=Se*ne,ve%103!==ne)throw new W;const fi=k.length;if(fi===0)throw new le;fi>0&&_e&&(I===Oe.CODE_CODE_C?k=k.substring(0,fi-2):k=k.substring(0,fi-1));const Dn=(h[1]+h[0])/2,Gt=z+Tr/2,wn=E.length,pr=new Uint8Array(wn);for(let Xi=0;Xi<wn;Xi++)pr[Xi]=E[Xi];const Hs=[new Me(Dn,n),new Me(Gt,n)];return new Ge(k,pr,0,Hs,be.CODE_128,new Date().getTime())}}Oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Oe.MAX_AVG_VARIANCE=.25,Oe.MAX_INDIVIDUAL_VARIANCE=.7,Oe.CODE_SHIFT=98,Oe.CODE_CODE_C=99,Oe.CODE_CODE_B=100,Oe.CODE_CODE_A=101,Oe.CODE_FNC_1=102,Oe.CODE_FNC_2=97,Oe.CODE_FNC_3=96,Oe.CODE_FNC_4_A=101,Oe.CODE_FNC_4_B=100,Oe.CODE_START_A=103,Oe.CODE_START_B=104,Oe.CODE_START_C=105,Oe.CODE_STOP=106;class rn extends Yt{constructor(n=!1,s=!1){super(),this.usingCheckDigit=n,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=rn.findAsteriskPattern(s,c),d=s.getNextSet(h[1]),m=s.getSize(),E,I;do{rn.recordPattern(s,d,c);let Z=rn.toNarrowWidePattern(c);if(Z<0)throw new le;E=rn.patternToChar(Z),this.decodeRowResult+=E,I=d;for(let ne of c)d+=ne;d=s.getNextSet(d)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let Z of c)R+=Z;let P=d-I-R;if(d!==m&&P*2<R)throw new le;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,ne=0;for(let ce=0;ce<Z;ce++)ne+=rn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ce));if(this.decodeRowResult.charAt(Z)!==rn.ALPHABET_STRING.charAt(ne%43))throw new W;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new le;let k;this.extendedMode?k=rn.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let z=(h[1]+h[0])/2,K=I+R/2;return new Ge(k,null,0,[new Me(z,n),new Me(K,n)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(n,s){let a=n.getSize(),c=n.getNextSet(0),h=0,d=c,m=!1,E=s.length;for(let I=c;I<a;I++)if(n.get(I)!==m)s[h]++;else{if(h===E-1){if(this.toNarrowWidePattern(s)===rn.ASTERISK_ENCODING&&n.isRange(Math.max(0,d-Math.floor((I-d)/2)),d,!1))return[d,I];d+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,m=!m}throw new le}static toNarrowWidePattern(n){let s=n.length,a=0,c;do{let h=2147483647;for(let E of n)E<h&&E>a&&(h=E);a=h,c=0;let d=0,m=0;for(let E=0;E<s;E++){let I=n[E];I>a&&(m|=1<<s-1-E,c++,d+=I)}if(c===3){for(let E=0;E<s&&c>0;E++){let I=n[E];if(I>a&&(c--,I*2>=d))return-1}return m}}while(c>3);return-1}static patternToChar(n){for(let s=0;s<rn.CHARACTER_ENCODINGS.length;s++)if(rn.CHARACTER_ENCODINGS[s]===n)return rn.ALPHABET_STRING.charAt(s);if(n===rn.ASTERISK_ENCODING)return"*";throw new le}static decodeExtended(n){let s=n.length,a="";for(let c=0;c<s;c++){let h=n.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let d=n.charAt(c+1),m="\0";switch(h){case"+":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)+32);else throw new V;break;case"$":if(d>="A"&&d<="Z")m=String.fromCharCode(d.charCodeAt(0)-64);else throw new V;break;case"%":if(d>="A"&&d<="E")m=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")m=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")m=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")m="\0";else if(d==="V")m="@";else if(d==="W")m="`";else if(d==="X"||d==="Y"||d==="Z")m="";else throw new V;break;case"/":if(d>="A"&&d<="O")m=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")m=":";else throw new V;break}a+=m,c++}else a+=h}return a}}rn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",rn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],rn.ASTERISK_ENCODING=148;class At extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,s,a){let c=this.decodeStart(s),h=this.decodeEnd(s),d=new j;At.decodeMiddle(s,c[1],h[0],d);let m=d.toString(),E=null;a!=null&&(E=a.get(Le.ALLOWED_LENGTHS)),E==null&&(E=At.DEFAULT_ALLOWED_LENGTHS);let I=m.length,R=!1,P=0;for(let K of E){if(I===K){R=!0;break}K>P&&(P=K)}if(!R&&I>P&&(R=!0),!R)throw new V;const k=[new Me(c[1],n),new Me(h[0],n)];return new Ge(m,null,0,k,be.ITF,new Date().getTime())}static decodeMiddle(n,s,a,c){let h=new Int32Array(10),d=new Int32Array(5),m=new Int32Array(5);for(h.fill(0),d.fill(0),m.fill(0);s<a;){Yt.recordPattern(n,s,h);for(let I=0;I<5;I++){let R=2*I;d[I]=h[R],m[I]=h[R+1]}let E=At.decodeDigit(d);c.append(E.toString()),E=this.decodeDigit(m),c.append(E.toString()),h.forEach(function(I){s+=I})}}decodeStart(n){let s=At.skipWhiteSpace(n),a=At.findGuardPattern(n,s,At.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(n,a[0]),a}validateQuietZone(n,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!n.get(c);c--)a--;if(a!==0)throw new le}static skipWhiteSpace(n){const s=n.getSize(),a=n.getNextSet(0);if(a===s)throw new le;return a}decodeEnd(n){n.reverse();try{let s=At.skipWhiteSpace(n),a;try{a=At.findGuardPattern(n,s,At.END_PATTERN_REVERSED[0])}catch(h){h instanceof le&&(a=At.findGuardPattern(n,s,At.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,a[0]);let c=a[0];return a[0]=n.getSize()-a[1],a[1]=n.getSize()-c,a}finally{n.reverse()}}static findGuardPattern(n,s,a){let c=a.length,h=new Int32Array(c),d=n.getSize(),m=!1,E=0,I=s;h.fill(0);for(let R=s;R<d;R++)if(n.get(R)!==m)h[E]++;else{if(E===c-1){if(Yt.patternMatchVariance(h,a,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return[I,R];I+=h[0]+h[1],Y.arraycopy(h,2,h,0,E-1),h[E-1]=0,h[E]=0,E--}else E++;h[E]=1,m=!m}throw new le}static decodeDigit(n){let s=At.MAX_AVG_VARIANCE,a=-1,c=At.PATTERNS.length;for(let h=0;h<c;h++){let d=At.PATTERNS[h],m=Yt.patternMatchVariance(n,d,At.MAX_INDIVIDUAL_VARIANCE);m<s?(s=m,a=h):m===s&&(a=-1)}if(a>=0)return a%10;throw new le}}At.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],At.MAX_AVG_VARIANCE=.38,At.MAX_INDIVIDUAL_VARIANCE=.5,At.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],At.START_PATTERN=Int32Array.from([1,1,1,1]),At.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qt extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let s=!1,a,c=0,h=Int32Array.from([0,0,0]);for(;!s;){h=Int32Array.from([0,0,0]),a=Qt.findGuardPattern(n,c,!1,this.START_END_PATTERN,h);let d=a[0];c=a[1];let m=d-(c-d);m>=0&&(s=n.isRange(m,d,!1))}return a}static checkChecksum(n){return Qt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let a=parseInt(n.charAt(s-1),10);return Qt.getStandardUPCEANChecksum(n.substring(0,s-1))===a}static getStandardUPCEANChecksum(n){let s=n.length,a=0;for(let c=s-1;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}a*=3;for(let c=s-2;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}return(1e3-a)%10}static decodeEnd(n,s){return Qt.findGuardPattern(n,s,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,s,a,c){return this.findGuardPattern(n,s,a,c,new Int32Array(c.length))}static findGuardPattern(n,s,a,c,h){let d=n.getSize();s=a?n.getNextUnset(s):n.getNextSet(s);let m=0,E=s,I=c.length,R=a;for(let P=s;P<d;P++)if(n.get(P)!==R)h[m]++;else{if(m===I-1){if(Yt.patternMatchVariance(h,c,Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return Int32Array.from([E,P]);E+=h[0]+h[1];let k=h.slice(2,h.length-1);for(let z=0;z<m-1;z++)h[z]=k[z];h[m-1]=0,h[m]=0,m--}else m++;h[m]=1,R=!R}throw new le}static decodeDigit(n,s,a,c){this.recordPattern(n,a,s);let h=this.MAX_AVG_VARIANCE,d=-1,m=c.length;for(let E=0;E<m;E++){let I=c[E],R=Yt.patternMatchVariance(s,I,Qt.MAX_INDIVIDUAL_VARIANCE);R<h&&(h=R,d=E)}if(d>=0)return d;throw new le}}Qt.MAX_AVG_VARIANCE=.48,Qt.MAX_INDIVIDUAL_VARIANCE=.7,Qt.START_END_PATTERN=Int32Array.from([1,1,1]),Qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Gr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,c),d=c.toString(),m=Gr.parseExtensionString(d),E=[new Me((a[0]+a[1])/2,n),new Me(h,n)],I=new Ge(d,null,0,E,be.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&I.putAllMetadata(m),I}decodeMiddle(n,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),d=s[1],m=0;for(let I=0;I<5&&d<h;I++){let R=Qt.decodeDigit(n,c,d,Qt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+R%10);for(let P of c)d+=P;R>=10&&(m|=1<<4-I),I!==4&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(a.length!==5)throw new le;let E=this.determineCheckDigit(m);if(Gr.extensionChecksum(a.toString())!==E)throw new le;return d}static extensionChecksum(n){let s=n.length,a=0;for(let c=s-2;c>=0;c-=2)a+=n.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=n.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(n){for(let s=0;s<10;s++)if(n===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new le}static parseExtensionString(n){if(n.length!==5)return null;let s=Gr.parseExtension5String(n);return s==null?null:new Map([[nt.SUGGESTED_PRICE,s]])}static parseExtension5String(n){let s;switch(n.charAt(0)){case"0":s="£";break;case"5":s="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(n.substring(1)),c=(a/100).toString(),h=a%100,d=h<10?"0"+h:h.toString();return s+c+"."+d}}class ss{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,a){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,c),d=c.toString(),m=ss.parseExtensionString(d),E=[new Me((a[0]+a[1])/2,n),new Me(h,n)],I=new Ge(d,null,0,E,be.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&I.putAllMetadata(m),I}decodeMiddle(n,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),d=s[1],m=0;for(let E=0;E<2&&d<h;E++){let I=Qt.decodeDigit(n,c,d,Qt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+I%10);for(let R of c)d+=R;I>=10&&(m|=1<<1-E),E!==1&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(a.length!==2)throw new le;if(parseInt(a.toString())%4!==m)throw new le;return d}static parseExtensionString(n){return n.length!==2?null:new Map([[nt.ISSUE_NUMBER,parseInt(n)]])}}class xi{static decodeRow(n,s,a){let c=Qt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Gr().decodeRow(n,s,c)}catch{return new ss().decodeRow(n,s,c)}}}xi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class yt extends Qt{constructor(){super(),this.decodeRowStringBuffer="",yt.L_AND_G_PATTERNS=yt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let s=yt.L_PATTERNS[n-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];yt.L_AND_G_PATTERNS[n]=a}}decodeRow(n,s,a){let c=yt.findStartGuardPattern(s),h=a==null?null:a.get(Le.NEED_RESULT_POINT_CALLBACK);if(h!=null){const _e=new Me((c[0]+c[1])/2,n);h.foundPossibleResultPoint(_e)}let d=this.decodeMiddle(s,c,this.decodeRowStringBuffer),m=d.rowOffset,E=d.resultString;if(h!=null){const _e=new Me(m,n);h.foundPossibleResultPoint(_e)}let I=this.decodeEnd(s,m);if(h!=null){const _e=new Me((I[0]+I[1])/2,n);h.foundPossibleResultPoint(_e)}let R=I[1],P=R+(R-I[0]);if(P>=s.getSize()||!s.isRange(R,P,!1))throw new le;let k=E.toString();if(k.length<8)throw new V;if(!yt.checkChecksum(k))throw new W;let z=(c[1]+c[0])/2,K=(I[1]+I[0])/2,Z=this.getBarcodeFormat(),ne=[new Me(z,n),new Me(K,n)],ce=new Ge(k,null,0,ne,Z,new Date().getTime()),ve=0;try{let _e=xi.decodeRow(n,s,I[1]);ce.putMetadata(nt.UPC_EAN_EXTENSION,_e.getText()),ce.putAllMetadata(_e.getResultMetadata()),ce.addResultPoints(_e.getResultPoints()),ve=_e.getText().length}catch{}let Se=a==null?null:a.get(Le.ALLOWED_EAN_EXTENSIONS);if(Se!=null){let _e=!1;for(let It in Se)if(ve.toString()===It){_e=!0;break}if(!_e)throw new le}return ce}decodeEnd(n,s){return yt.findGuardPattern(n,s,!1,yt.START_END_PATTERN,new Int32Array(yt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return yt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let a=parseInt(n.charAt(s-1),10);return yt.getStandardUPCEANChecksum(n.substring(0,s-1))===a}static getStandardUPCEANChecksum(n){let s=n.length,a=0;for(let c=s-1;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}a*=3;for(let c=s-2;c>=0;c-=2){let h=n.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}return(1e3-a)%10}}class Xt extends yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),d=s[1],m=0;for(let I=0;I<6&&d<h;I++){let R=yt.decodeDigit(n,c,d,yt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+R%10);for(let P of c)d+=P;R>=10&&(m|=1<<5-I)}a=Xt.determineFirstDigit(a,m),d=yt.findGuardPattern(n,d,!0,yt.MIDDLE_PATTERN,new Int32Array(yt.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&d<h;I++){let R=yt.decodeDigit(n,c,d,yt.L_PATTERNS);a+=String.fromCharCode(48+R);for(let P of c)d+=P}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(n,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return n=String.fromCharCode(48+a)+n,n;throw new le}}Xt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ao extends yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),d=s[1];for(let E=0;E<4&&d<h;E++){let I=yt.decodeDigit(n,c,d,yt.L_PATTERNS);a+=String.fromCharCode(48+I);for(let R of c)d+=R}d=yt.findGuardPattern(n,d,!0,yt.MIDDLE_PATTERN,new Int32Array(yt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<4&&d<h;E++){let I=yt.decodeDigit(n,c,d,yt.L_PATTERNS);a+=String.fromCharCode(48+I);for(let R of c)d+=R}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return be.EAN_8}}class Fi extends yt{constructor(){super(...arguments),this.ean13Reader=new Xt}getBarcodeFormat(){return be.UPC_A}decode(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,a))}decodeMiddle(n,s,a){return this.ean13Reader.decodeMiddle(n,s,a)}maybeReturnResult(n){let s=n.getText();if(s.charAt(0)==="0"){let a=new Ge(s.substring(1),null,null,n.getResultPoints(),be.UPC_A);return n.getResultMetadata()!=null&&a.putAllMetadata(n.getResultMetadata()),a}else throw new le}reset(){this.ean13Reader.reset()}}class Bn extends yt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,s,a){const c=this.decodeMiddleCounters.map(I=>I);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=n.getSize();let d=s[1],m=0;for(let I=0;I<6&&d<h;I++){const R=Bn.decodeDigit(n,c,d,Bn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+R%10);for(let P of c)d+=P;R>=10&&(m|=1<<5-I)}let E=Bn.determineNumSysAndCheckDigit(a,m);return{rowOffset:d,resultString:E}}decodeEnd(n,s){return Bn.findGuardPatternWithoutCounters(n,s,!0,Bn.MIDDLE_END_PATTERN)}checkChecksum(n){return yt.checkChecksum(Bn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let h=String.fromCharCode(48+a),d=String.fromCharCode(48+c);return h+n+d}throw le.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(n){const s=n.slice(1,7).split("").map(h=>h.charCodeAt(0)),a=new j;a.append(n.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return n.length>=8&&a.append(n.charAt(7)),a.toString()}}Bn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class lo extends Yt{constructor(n){super();let s=n==null?null:n.get(Le.POSSIBLE_FORMATS),a=[];o(s)?(a.push(new Xt),a.push(new Fi),a.push(new ao),a.push(new Bn)):(s.indexOf(be.EAN_13)>-1&&a.push(new Xt),s.indexOf(be.UPC_A)>-1&&a.push(new Fi),s.indexOf(be.EAN_8)>-1&&a.push(new ao),s.indexOf(be.UPC_E)>-1&&a.push(new Bn)),this.readers=a}decodeRow(n,s,a){for(let c of this.readers)try{const h=c.decodeRow(n,s,a),d=h.getBarcodeFormat()===be.EAN_13&&h.getText().charAt(0)==="0",m=a==null?null:a.get(Le.POSSIBLE_FORMATS),E=m==null||m.includes(be.UPC_A);if(d&&E){const I=h.getRawBytes(),R=new Ge(h.getText().substring(1),I,I?I.length:null,h.getResultPoints(),be.UPC_A);return R.putAllMetadata(h.getResultMetadata()),R}return h}catch{}throw new le}reset(){for(let n of this.readers)n.reset()}}class Pn extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,s){for(let a=0;a<s.length;a++)if(Yt.patternMatchVariance(n,s[a],Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return a;throw new le}static count(n){return Ze.sum(new Int32Array(n))}static increment(n,s){let a=0,c=s[0];for(let h=1;h<n.length;h++)s[h]>c&&(c=s[h],a=h);n[a]++}static decrement(n,s){let a=0,c=s[0];for(let h=1;h<n.length;h++)s[h]<c&&(c=s[h],a=h);n[a]--}static isFinderPattern(n){let s=n[0]+n[1],a=s+n[2]+n[3],c=s/a;if(c>=Pn.MIN_FINDER_PATTERN_RATIO&&c<=Pn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let m of n)m>d&&(d=m),m<h&&(h=m);return d<10*h}return!1}}Pn.MAX_AVG_VARIANCE=.2,Pn.MAX_INDIVIDUAL_VARIANCE=.45,Pn.MIN_FINDER_PATTERN_RATIO=9.5/12,Pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class hr{constructor(n,s){this.value=n,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof hr))return!1;const s=n;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ds{constructor(n,s,a,c,h){this.value=n,this.startEnd=s,this.value=n,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Me(a,h)),this.resultPoints.push(new Me(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ds))return!1;const s=n;return this.value===s.value}hashCode(){return this.value}}class Jn{constructor(){}static getRSSvalue(n,s,a){let c=0;for(let E of n)c+=E;let h=0,d=0,m=n.length;for(let E=0;E<m-1;E++){let I;for(I=1,d|=1<<E;I<n[E];I++,d&=~(1<<E)){let R=Jn.combins(c-I-1,m-E-2);if(a&&d===0&&c-I-(m-E-1)>=m-E-1&&(R-=Jn.combins(c-I-(m-E),m-E-2)),m-E-1>1){let P=0;for(let k=c-I-(m-E-2);k>s;k--)P+=Jn.combins(c-I-k-1,m-E-3);R-=P*(m-1-E)}else c-I>s&&R--;h+=R}c-=I}return h}static combins(n,s){let a,c;n-s>s?(c=s,a=n-s):(c=n-s,a=s);let h=1,d=1;for(let m=n;m>a;m--)h*=m,d<=c&&(h/=d,d++);for(;d<=c;)h/=d,d++;return h}}class os{static buildBitArray(n){let s=n.length*2-1;n[n.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new we(a),h=0,m=n[0].getRightChar().getValue();for(let E=11;E>=0;--E)(m&1<<E)!=0&&c.set(h),h++;for(let E=1;E<n.length;++E){let I=n[E],R=I.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&c.set(h),h++;if(I.getRightChar()!=null){let P=I.getRightChar().getValue();for(let k=11;k>=0;--k)(P&1<<k)!=0&&c.set(h),h++}}return c}}class xr{constructor(n,s){s?this.decodedInformation=null:(this.finished=n,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class uo{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class hn extends uo{constructor(n,s){super(n),this.value=s}getValue(){return this.value}isFNC1(){return this.value===hn.FNC1}}hn.FNC1="$";class er extends uo{constructor(n,s,a){super(n),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Wn extends uo{constructor(n,s,a){if(super(n),s<0||s>10||a<0||a>10)throw new V;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Wn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Wn.FNC1}isAnyFNC1(){return this.firstDigit===Wn.FNC1||this.secondDigit===Wn.FNC1}}Wn.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new le;let s=n.substring(0,2);for(let h of De.TWO_DIGIT_DATA_LENGTH)if(h[0]===s)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,h[2],n):De.processFixedAI(2,h[1],n);if(n.length<3)throw new le;let a=n.substring(0,3);for(let h of De.THREE_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,h[2],n):De.processFixedAI(3,h[1],n);for(let h of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,h[2],n):De.processFixedAI(4,h[1],n);if(n.length<4)throw new le;let c=n.substring(0,4);for(let h of De.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,h[2],n):De.processFixedAI(4,h[1],n);throw new le}static processFixedAI(n,s,a){if(a.length<n)throw new le;let c=a.substring(0,n);if(a.length<n+s)throw new le;let h=a.substring(n,n+s),d=a.substring(n+s),m="("+c+")"+h,E=De.parseFieldsInGeneralPurpose(d);return E==null?m:m+E}static processVariableAI(n,s,a){let c=a.substring(0,n),h;a.length<n+s?h=a.length:h=n+s;let d=a.substring(n,h),m=a.substring(h),E="("+c+")"+d,I=De.parseFieldsInGeneralPurpose(m);return I==null?E:E+I}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class Vi{constructor(n){this.buffer=new j,this.information=n}decodeAllCodes(n,s){let a=s,c=null;do{let h=this.decodeGeneralPurposeField(a,c),d=De.parseFieldsInGeneralPurpose(h.getNewString());if(d!=null&&n.append(d),h.isRemaining()?c=""+h.getRemainingValue():c=null,a===h.getNewPosition())break;a=h.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let s=n;s<n+3;++s)if(this.information.get(s))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(n,4);return h===0?new Wn(this.information.getSize(),Wn.FNC1,Wn.FNC1):new Wn(this.information.getSize(),h-1,Wn.FNC1)}let s=this.extractNumericValueFromBitArray(n,7),a=(s-8)/11,c=(s-8)%11;return new Wn(n+7,a,c)}extractNumericValueFromBitArray(n,s){return Vi.extractNumericValueFromBitArray(this.information,n,s)}static extractNumericValueFromBitArray(n,s,a){let c=0;for(let h=0;h<a;++h)n.get(s+h)&&(c|=1<<a-h-1);return c}decodeGeneralPurposeField(n,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(n);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new er(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new er(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),n=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),n=s.isFinished()):(s=this.parseNumericBlock(),n=s.isFinished()),!(a!==this.current.getPosition())&&!n)break}while(!n);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let s;return n.isSecondDigitFNC1()?s=new er(this.current.getPosition(),this.buffer.toString()):s=new er(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new xr(!0,s)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let s=new er(this.current.getPosition(),this.buffer.toString());return new xr(!0,s)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new er(this.current.getPosition(),this.buffer.toString());return new xr(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new er(this.current.getPosition(),this.buffer.toString());return new xr(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,7);if(a>=64&&a<116)return!0;if(n+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,8);return c>=232&&c<253}decodeIsoIec646(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new hn(n+5,hn.FNC1);if(s>=5&&s<15)return new hn(n+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(n,7);if(a>=64&&a<90)return new hn(n+7,""+(a+1));if(a>=90&&a<116)return new hn(n+7,""+(a+7));let c=this.extractNumericValueFromBitArray(n,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new V}return new hn(n+8,h)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,6);return a>=16&&a<63}decodeAlphanumeric(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new hn(n+5,hn.FNC1);if(s>=5&&s<15)return new hn(n+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(n,6);if(a>=32&&a<58)return new hn(n+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Mr("Decoding invalid alphanumeric value: "+a)}return new hn(n+6,c)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<5&&s+n<this.information.getSize();++s)if(s===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+s))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let s=n;s<n+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<4&&s+n<this.information.getSize();++s)if(this.information.get(n+s))return!1;return!0}}class co{constructor(n){this.information=n,this.generalDecoder=new Vi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Fn extends co{constructor(n){super(n)}encodeCompressedGtin(n,s){n.append("(01)");let a=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,a)}encodeCompressedGtinWithoutAI(n,s,a){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);h/100===0&&n.append("0"),h/10===0&&n.append("0"),n.append(h)}Fn.appendCheckDigit(n,a)}static appendCheckDigit(n,s){let a=0;for(let c=0;c<13;c++){let h=n.charAt(c+s).charCodeAt(0)-48;a+=(c&1)===0?3*h:h}a=10-a%10,a===10&&(a=0),n.append(a)}}Fn.GTIN_SIZE=40;class tr extends Fn{constructor(n){super(n)}parseInformation(){let n=new j;n.append("(01)");let s=n.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE,4);return n.append(a),this.encodeCompressedGtinWithoutAI(n,tr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,tr.HEADER_SIZE+44)}}tr.HEADER_SIZE=4;class as extends co{constructor(n){super(n)}parseInformation(){let n=new j;return this.getGeneralDecoder().decodeAllCodes(n,as.HEADER_SIZE)}}as.HEADER_SIZE=5;class ks extends Fn{constructor(n){super(n)}encodeCompressedWeight(n,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(n,c);let h=this.checkWeight(c),d=1e5;for(let m=0;m<5;++m)h/d===0&&n.append("0"),d/=10;n.append(h)}}class Lr extends ks{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Lr.HEADER_SIZE+ks.GTIN_SIZE+Lr.WEIGHT_SIZE)throw new le;let n=new j;return this.encodeCompressedGtin(n,Lr.HEADER_SIZE),this.encodeCompressedWeight(n,Lr.HEADER_SIZE+ks.GTIN_SIZE,Lr.WEIGHT_SIZE),n.toString()}}Lr.HEADER_SIZE=5,Lr.WEIGHT_SIZE=15;class za extends Lr{constructor(n){super(n)}addWeightCode(n,s){n.append("(3103)")}checkWeight(n){return n}}class Ms extends Lr{constructor(n){super(n)}addWeightCode(n,s){s<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class Ar extends Fn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Ar.HEADER_SIZE+Fn.GTIN_SIZE)throw new le;let n=new j;this.encodeCompressedGtin(n,Ar.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Fn.GTIN_SIZE,Ar.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Ar.HEADER_SIZE+Fn.GTIN_SIZE+Ar.LAST_DIGIT_SIZE,null);return n.append(a.getNewString()),n.toString()}}Ar.HEADER_SIZE=8,Ar.LAST_DIGIT_SIZE=2;class In extends Fn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<In.HEADER_SIZE+Fn.GTIN_SIZE)throw new le;let n=new j;this.encodeCompressedGtin(n,In.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+Fn.GTIN_SIZE,In.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+Fn.GTIN_SIZE+In.LAST_DIGIT_SIZE,In.FIRST_THREE_DIGITS_SIZE);a/100==0&&n.append("0"),a/10==0&&n.append("0"),n.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(In.HEADER_SIZE+Fn.GTIN_SIZE+In.LAST_DIGIT_SIZE+In.FIRST_THREE_DIGITS_SIZE,null);return n.append(c.getNewString()),n.toString()}}In.HEADER_SIZE=8,In.LAST_DIGIT_SIZE=2,In.FIRST_THREE_DIGITS_SIZE=10;class zt extends ks{constructor(n,s,a){super(n),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=zt.HEADER_SIZE+zt.GTIN_SIZE+zt.WEIGHT_SIZE+zt.DATE_SIZE)throw new le;let n=new j;return this.encodeCompressedGtin(n,zt.HEADER_SIZE),this.encodeCompressedWeight(n,zt.HEADER_SIZE+zt.GTIN_SIZE,zt.WEIGHT_SIZE),this.encodeCompressedDate(n,zt.HEADER_SIZE+zt.GTIN_SIZE+zt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,zt.DATE_SIZE);if(a==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let c=a%32;a/=32;let h=a%12+1;a/=12;let d=a;d/10==0&&n.append("0"),n.append(d),h/10==0&&n.append("0"),n.append(h),c/10==0&&n.append("0"),n.append(c)}addWeightCode(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")}checkWeight(n){return n%1e5}}zt.HEADER_SIZE=8,zt.WEIGHT_SIZE=20,zt.DATE_SIZE=16;function Ai(O){try{if(O.get(1))return new tr(O);if(!O.get(2))return new as(O);switch(Vi.extractNumericValueFromBitArray(O,1,4)){case 4:return new za(O);case 5:return new Ms(O)}switch(Vi.extractNumericValueFromBitArray(O,1,5)){case 12:return new Ar(O);case 13:return new In(O)}switch(Vi.extractNumericValueFromBitArray(O,1,7)){case 56:return new zt(O,"310","11");case 57:return new zt(O,"320","11");case 58:return new zt(O,"310","13");case 59:return new zt(O,"320","13");case 60:return new zt(O,"310","15");case 61:return new zt(O,"320","15");case 62:return new zt(O,"310","17");case 63:return new zt(O,"320","17")}}catch(n){throw console.log(n),new Mr("unknown decoder: "+O)}}class Mt{constructor(n,s,a,c){this.leftchar=n,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,s){return n instanceof Mt?Mt.equalsOrNull(n.leftchar,s.leftchar)&&Mt.equalsOrNull(n.rightchar,s.rightchar)&&Mt.equalsOrNull(n.finderpattern,s.finderpattern):!1}static equalsOrNull(n,s){return n===null?s===null:Mt.equals(n,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class na{constructor(n,s,a){this.pairs=n,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,s){return n instanceof na?this.checkEqualitity(n,s)&&n.wasReversed===s.wasReversed:!1}checkEqualitity(n,s){if(!n||!s)return;let a;return n.forEach((c,h)=>{s.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class pe extends Pn{constructor(n){super(...arguments),this.pairs=new Array(pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,s,a){this.pairs.length=0,this.startFromEven=!1;try{return pe.constructResult(this.decodeRow2pairs(n,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,pe.constructResult(this.decodeRow2pairs(n,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(h){if(h instanceof le){if(!this.pairs.length)throw new le;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(n,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new le}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return n&&(this.rows=this.rows.reverse()),s}checkRows(n,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of n)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(n);h.push(c);try{return this.checkRows(h,a+1)}catch(d){this.verbose&&console.log(d)}}throw new le}static isValidSequence(n){for(let s of pe.FINDER_PATTERN_SEQUENCES){if(n.length>s.length)continue;let a=!0;for(let c=0;c<n.length;c++)if(n[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(n,s){let a=0,c=!1,h=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>n){h=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}h||c||pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new na(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,s){for(let a of s)if(a.getPairs().length!==n.length){for(let c of a.getPairs())for(let h of n)if(Mt.equals(c,h))break}}static isPartialRow(n,s){for(let a of s){let c=!0;for(let h of n){let d=!1;for(let m of a.getPairs())if(h.equals(m)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(n){let s=os.buildBitArray(n),c=Ai(s).parseInformation(),h=n[0].getFinderPattern().getResultPoints(),d=n[n.length-1].getFinderPattern().getResultPoints(),m=[h[0],h[1],d[0],d[1]];return new Ge(c,null,null,m,be.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),s=n.getLeftChar(),a=n.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),h=2;for(let m=1;m<this.pairs.size();++m){let E=this.pairs.get(m);c+=E.getLeftChar().getChecksumPortion(),h++;let I=E.getRightChar();I!=null&&(c+=I.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==s.getValue()}static getNextSecondBar(n,s){let a;return n.get(s)?(a=n.getNextUnset(s),a=n.getNextSet(a)):(a=n.getNextSet(s),a=n.getNextUnset(a)),a}retrieveNextPair(n,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let h,d=!0,m=-1;do this.findNextPair(n,s,m),h=this.parseFoundFinderPattern(n,a,c),h==null?m=pe.getNextSecondBar(n,this.startEnd[0]):d=!1;while(d);let E=this.decodeDataCharacter(n,h,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new le;let I;try{I=this.decodeDataCharacter(n,h,c,!1)}catch(R){I=null,this.verbose&&console.log(R)}return new Mt(E,I,h,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=n.getSize(),d;a>=0?d=a:this.isEmptyPair(s)?d=0:d=s[s.length-1].getFinderPattern().getStartEnd()[1];let m=s.length%2!=0;this.startFromEven&&(m=!m);let E=!1;for(;d<h&&(E=!n.get(d),!!E);)d++;let I=0,R=d;for(let P=d;P<h;P++)if(n.get(P)!=E)c[I]++;else{if(I==3){if(m&&pe.reverseCounters(c),pe.isFinderPattern(c)){this.startEnd[0]=R,this.startEnd[1]=P;return}m&&pe.reverseCounters(c),R+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,I--}else I++;c[I]=1,E=!E}throw new le}static reverseCounters(n){let s=n.length;for(let a=0;a<s/2;++a){let c=n[a];n[a]=n[s-a-1],n[s-a-1]=c}}parseFoundFinderPattern(n,s,a){let c,h,d;if(a){let I=this.startEnd[0]-1;for(;I>=0&&!n.get(I);)I--;I++,c=this.startEnd[0]-I,h=I,d=this.startEnd[1]}else h=this.startEnd[0],d=n.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let m=this.getDecodeFinderCounters();Y.arraycopy(m,0,m,1,m.length-1),m[0]=c;let E;try{E=this.parseFinderValue(m,pe.FINDER_PATTERNS)}catch{return null}return new Ds(E,[h,d],h,d,s)}decodeDataCharacter(n,s,a,c){let h=this.getDataCharacterCounters();for(let Gt=0;Gt<h.length;Gt++)h[Gt]=0;if(c)pe.recordPatternInReverse(n,s.getStartEnd()[0],h);else{pe.recordPattern(n,s.getStartEnd()[1],h);for(let Gt=0,wn=h.length-1;Gt<wn;Gt++,wn--){let pr=h[Gt];h[Gt]=h[wn],h[wn]=pr}}let d=17,m=Ze.sum(new Int32Array(h))/d,E=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(m-E)/E>.3)throw new le;let I=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let Gt=0;Gt<h.length;Gt++){let wn=1*h[Gt]/m,pr=wn+.5;if(pr<1){if(wn<.3)throw new le;pr=1}else if(pr>8){if(wn>8.7)throw new le;pr=8}let Hs=Gt/2;(Gt&1)==0?(I[Hs]=pr,P[Hs]=wn-pr):(R[Hs]=pr,k[Hs]=wn-pr)}this.adjustOddEvenCounts(d);let z=4*s.getValue()+(a?0:2)+(c?0:1)-1,K=0,Z=0;for(let Gt=I.length-1;Gt>=0;Gt--){if(pe.isNotA1left(s,a,c)){let wn=pe.WEIGHTS[z][2*Gt];Z+=I[Gt]*wn}K+=I[Gt]}let ne=0;for(let Gt=R.length-1;Gt>=0;Gt--)if(pe.isNotA1left(s,a,c)){let wn=pe.WEIGHTS[z][2*Gt+1];ne+=R[Gt]*wn}let ce=Z+ne;if((K&1)!=0||K>13||K<4)throw new le;let ve=(13-K)/2,Se=pe.SYMBOL_WIDEST[ve],_e=9-Se,It=Jn.getRSSvalue(I,Se,!0),dt=Jn.getRSSvalue(R,_e,!1),Tr=pe.EVEN_TOTAL_SUBSET[ve],fi=pe.GSUM[ve],Dn=It*Tr+dt+fi;return new hr(Dn,ce)}static isNotA1left(n,s,a){return!(n.getValue()==0&&s&&a)}adjustOddEvenCounts(n){let s=Ze.sum(new Int32Array(this.getOddCounts())),a=Ze.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;s>13?h=!0:s<4&&(c=!0);let d=!1,m=!1;a>13?m=!0:a<4&&(d=!0);let E=s+a-n,I=(s&1)==1,R=(a&1)==0;if(E==1)if(I){if(R)throw new le;h=!0}else{if(!R)throw new le;m=!0}else if(E==-1)if(I){if(R)throw new le;c=!0}else{if(!R)throw new le;d=!0}else if(E==0){if(I){if(!R)throw new le;s<a?(c=!0,m=!0):(h=!0,d=!0)}else if(R)throw new le}else throw new le;if(c){if(h)throw new le;pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(m)throw new le;pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.SYMBOL_WIDEST=[7,5,4,3,1],pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pe.GSUM=[0,348,1388,2948,3988],pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pe.FINDER_PAT_A=0,pe.FINDER_PAT_B=1,pe.FINDER_PAT_C=2,pe.FINDER_PAT_D=3,pe.FINDER_PAT_E=4,pe.FINDER_PAT_F=5,pe.FINDER_PATTERN_SEQUENCES=[[pe.FINDER_PAT_A,pe.FINDER_PAT_A],[pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B],[pe.FINDER_PAT_A,pe.FINDER_PAT_C,pe.FINDER_PAT_B,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_C],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F]],pe.MAX_PAIRS=11;class ra extends hr{constructor(n,s,a){super(n,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class qt extends Pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,s,a){const c=this.decodePair(s,!1,n,a);qt.addOrTally(this.possibleLeftPairs,c),s.reverse();let h=this.decodePair(s,!0,n,a);qt.addOrTally(this.possibleRightPairs,h),s.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&qt.checkChecksum(d,m))return qt.constructResult(d,m)}throw new le}static addOrTally(n,s){if(s==null)return;let a=!1;for(let c of n)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||n.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,s){let a=4537077*n.getValue()+s.getValue(),c=new String(a).toString(),h=new j;for(let I=13-c.length;I>0;I--)h.append("0");h.append(c);let d=0;for(let I=0;I<13;I++){let R=h.charAt(I).charCodeAt(0)-48;d+=(I&1)===0?3*R:R}d=10-d%10,d===10&&(d=0),h.append(d.toString());let m=n.getFinderPattern().getResultPoints(),E=s.getFinderPattern().getResultPoints();return new Ge(h.toString(),null,0,[m[0],m[1],E[0],E[1]],be.RSS_14,new Date().getTime())}static checkChecksum(n,s){let a=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(n,s,a,c){try{let h=this.findFinderPattern(n,s),d=this.parseFoundFinderPattern(n,a,s,h),m=c==null?null:c.get(Le.NEED_RESULT_POINT_CALLBACK);if(m!=null){let R=(h[0]+h[1])/2;s&&(R=n.getSize()-1-R),m.foundPossibleResultPoint(new Me(R,a))}let E=this.decodeDataCharacter(n,d,!0),I=this.decodeDataCharacter(n,d,!1);return new ra(1597*E.getValue()+I.getValue(),E.getChecksumPortion()+4*I.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(n,s,a){let c=this.getDataCharacterCounters();for(let ne=0;ne<c.length;ne++)c[ne]=0;if(a)Yt.recordPatternInReverse(n,s.getStartEnd()[0],c);else{Yt.recordPattern(n,s.getStartEnd()[1]+1,c);for(let ne=0,ce=c.length-1;ne<ce;ne++,ce--){let ve=c[ne];c[ne]=c[ce],c[ce]=ve}}let h=a?16:15,d=Ze.sum(new Int32Array(c))/h,m=this.getOddCounts(),E=this.getEvenCounts(),I=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ne=0;ne<c.length;ne++){let ce=c[ne]/d,ve=Math.floor(ce+.5);ve<1?ve=1:ve>8&&(ve=8);let Se=Math.floor(ne/2);(ne&1)===0?(m[Se]=ve,I[Se]=ce-ve):(E[Se]=ve,R[Se]=ce-ve)}this.adjustOddEvenCounts(a,h);let P=0,k=0;for(let ne=m.length-1;ne>=0;ne--)k*=9,k+=m[ne],P+=m[ne];let z=0,K=0;for(let ne=E.length-1;ne>=0;ne--)z*=9,z+=E[ne],K+=E[ne];let Z=k+3*z;if(a){if((P&1)!==0||P>12||P<4)throw new le;let ne=(12-P)/2,ce=qt.OUTSIDE_ODD_WIDEST[ne],ve=9-ce,Se=Jn.getRSSvalue(m,ce,!1),_e=Jn.getRSSvalue(E,ve,!0),It=qt.OUTSIDE_EVEN_TOTAL_SUBSET[ne],dt=qt.OUTSIDE_GSUM[ne];return new hr(Se*It+_e+dt,Z)}else{if((K&1)!==0||K>10||K<4)throw new le;let ne=(10-K)/2,ce=qt.INSIDE_ODD_WIDEST[ne],ve=9-ce,Se=Jn.getRSSvalue(m,ce,!0),_e=Jn.getRSSvalue(E,ve,!1),It=qt.INSIDE_ODD_TOTAL_SUBSET[ne],dt=qt.INSIDE_GSUM[ne];return new hr(_e*It+Se+dt,Z)}}findFinderPattern(n,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=n.getSize(),h=!1,d=0;for(;d<c&&(h=!n.get(d),s!==h);)d++;let m=0,E=d;for(let I=d;I<c;I++)if(n.get(I)!==h)a[m]++;else{if(m===3){if(Pn.isFinderPattern(a))return[E,I];E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,h=!h}throw new le}parseFoundFinderPattern(n,s,a,c){let h=n.get(c[0]),d=c[0]-1;for(;d>=0&&h!==n.get(d);)d--;d++;const m=c[0]-d,E=this.getDecodeFinderCounters(),I=new Int32Array(E.length);Y.arraycopy(E,0,I,1,E.length-1),I[0]=m;const R=this.parseFinderValue(I,qt.FINDER_PATTERNS);let P=d,k=c[1];return a&&(P=n.getSize()-1-P,k=n.getSize()-1-k),new Ds(R,[d,c[1]],P,k,s)}adjustOddEvenCounts(n,s){let a=Ze.sum(new Int32Array(this.getOddCounts())),c=Ze.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1,m=!1,E=!1;n?(a>12?d=!0:a<4&&(h=!0),c>12?E=!0:c<4&&(m=!0)):(a>11?d=!0:a<5&&(h=!0),c>10?E=!0:c<4&&(m=!0));let I=a+c-s,R=(a&1)===(n?1:0),P=(c&1)===1;if(I===1)if(R){if(P)throw new le;d=!0}else{if(!P)throw new le;E=!0}else if(I===-1)if(R){if(P)throw new le;h=!0}else{if(!P)throw new le;m=!0}else if(I===0){if(R){if(!P)throw new le;a<c?(h=!0,E=!0):(d=!0,m=!0)}else if(P)throw new le}else throw new le;if(h){if(d)throw new le;Pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(E)throw new le;Pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&Pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}qt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],qt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],qt.OUTSIDE_GSUM=[0,161,961,2015,2715],qt.INSIDE_GSUM=[0,336,1036,1516],qt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],qt.INSIDE_ODD_WIDEST=[2,4,6,8],qt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ii extends Yt{constructor(n,s){super(),this.readers=[],this.verbose=s===!0;const a=n?n.get(Le.POSSIBLE_FORMATS):null,c=n&&n.get(Le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(be.EAN_13)||a.includes(be.UPC_A)||a.includes(be.EAN_8)||a.includes(be.UPC_E))&&this.readers.push(new lo(n)),a.includes(be.CODE_39)&&this.readers.push(new rn(c)),a.includes(be.CODE_128)&&this.readers.push(new Oe),a.includes(be.ITF)&&this.readers.push(new At),a.includes(be.RSS_14)&&this.readers.push(new qt),a.includes(be.RSS_EXPANDED)&&this.readers.push(new pe(this.verbose))):(this.readers.push(new lo(n)),this.readers.push(new rn),this.readers.push(new lo(n)),this.readers.push(new Oe),this.readers.push(new At),this.readers.push(new qt),this.readers.push(new pe(this.verbose)))}decodeRow(n,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(n,s,a)}catch{}throw new le}reset(){this.readers.forEach(n=>n.reset())}}class ho extends tt{constructor(n=500,s){super(new Ii(s),n,s)}}class vt{constructor(n,s,a){this.ecCodewords=n,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class gt{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(n,s,a,c,h,d){this.versionNumber=n,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=d;let m=0;const E=d.getECCodewords(),I=d.getECBlocks();for(let R of I)m+=R.getCount()*(R.getDataCodewords()+E);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,s){if((n&1)!==0||(s&1)!==0)throw new V;for(let a of _t.VERSIONS)if(a.symbolSizeRows===n&&a.symbolSizeColumns===s)return a;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new vt(5,new gt(1,3))),new _t(2,12,12,10,10,new vt(7,new gt(1,5))),new _t(3,14,14,12,12,new vt(10,new gt(1,8))),new _t(4,16,16,14,14,new vt(12,new gt(1,12))),new _t(5,18,18,16,16,new vt(14,new gt(1,18))),new _t(6,20,20,18,18,new vt(18,new gt(1,22))),new _t(7,22,22,20,20,new vt(20,new gt(1,30))),new _t(8,24,24,22,22,new vt(24,new gt(1,36))),new _t(9,26,26,24,24,new vt(28,new gt(1,44))),new _t(10,32,32,14,14,new vt(36,new gt(1,62))),new _t(11,36,36,16,16,new vt(42,new gt(1,86))),new _t(12,40,40,18,18,new vt(48,new gt(1,114))),new _t(13,44,44,20,20,new vt(56,new gt(1,144))),new _t(14,48,48,22,22,new vt(68,new gt(1,174))),new _t(15,52,52,24,24,new vt(42,new gt(2,102))),new _t(16,64,64,14,14,new vt(56,new gt(2,140))),new _t(17,72,72,16,16,new vt(36,new gt(4,92))),new _t(18,80,80,18,18,new vt(48,new gt(4,114))),new _t(19,88,88,20,20,new vt(56,new gt(4,144))),new _t(20,96,96,22,22,new vt(68,new gt(4,174))),new _t(21,104,104,24,24,new vt(56,new gt(6,136))),new _t(22,120,120,18,18,new vt(68,new gt(6,175))),new _t(23,132,132,20,20,new vt(62,new gt(8,163))),new _t(24,144,144,22,22,new vt(62,new gt(8,156),new gt(2,155))),new _t(25,8,18,6,16,new vt(7,new gt(1,5))),new _t(26,8,32,6,14,new vt(11,new gt(1,10))),new _t(27,12,26,10,24,new vt(14,new gt(1,16))),new _t(28,12,36,10,16,new vt(18,new gt(1,22))),new _t(29,16,36,14,16,new vt(24,new gt(1,32))),new _t(30,16,48,14,22,new vt(28,new gt(1,49)))]}}_t.VERSIONS=_t.buildVersions();class fr{constructor(n){const s=n.getHeight();if(s<8||s>144||(s&1)!==0)throw new V;this.version=fr.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const s=n.getHeight(),a=n.getWidth();return _t.getVersionForDimensions(s,a)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const h=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let m=!1,E=!1,I=!1,R=!1;do if(a===h&&c===0&&!m)n[s++]=this.readCorner1(h,d)&255,a-=2,c+=2,m=!0;else if(a===h-2&&c===0&&(d&3)!==0&&!E)n[s++]=this.readCorner2(h,d)&255,a-=2,c+=2,E=!0;else if(a===h+4&&c===2&&(d&7)===0&&!I)n[s++]=this.readCorner3(h,d)&255,a-=2,c+=2,I=!0;else if(a===h-2&&c===0&&(d&7)===4&&!R)n[s++]=this.readCorner4(h,d)&255,a-=2,c+=2,R=!0;else{do a<h&&c>=0&&!this.readMappingMatrix.get(c,a)&&(n[s++]=this.readUtah(a,c,h,d)&255),a-=2,c+=2;while(a>=0&&c<d);a+=1,c+=3;do a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(n[s++]=this.readUtah(a,c,h,d)&255),a+=2,c-=2;while(a<h&&c>=0);a+=3,c+=1}while(a<h||c<d);if(s!==this.version.getTotalCodewords())throw new V;return n}readModule(n,s,a,c){return n<0&&(n+=a,s+=4-(a+4&7)),s<0&&(s+=c,n+=4-(c+4&7)),this.readMappingMatrix.set(s,n),this.mappingBitMatrix.get(s,n)}readUtah(n,s,a,c){let h=0;return this.readModule(n-2,s-2,a,c)&&(h|=1),h<<=1,this.readModule(n-2,s-1,a,c)&&(h|=1),h<<=1,this.readModule(n-1,s-2,a,c)&&(h|=1),h<<=1,this.readModule(n-1,s-1,a,c)&&(h|=1),h<<=1,this.readModule(n-1,s,a,c)&&(h|=1),h<<=1,this.readModule(n,s-2,a,c)&&(h|=1),h<<=1,this.readModule(n,s-1,a,c)&&(h|=1),h<<=1,this.readModule(n,s,a,c)&&(h|=1),h}readCorner1(n,s){let a=0;return this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,1,n,s)&&(a|=1),a<<=1,this.readModule(n-1,2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a<<=1,this.readModule(2,s-1,n,s)&&(a|=1),a<<=1,this.readModule(3,s-1,n,s)&&(a|=1),a}readCorner2(n,s){let a=0;return this.readModule(n-3,0,n,s)&&(a|=1),a<<=1,this.readModule(n-2,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(0,s-4,n,s)&&(a|=1),a<<=1,this.readModule(0,s-3,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a}readCorner3(n,s){let a=0;return this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,s-1,n,s)&&(a|=1),a<<=1,this.readModule(0,s-3,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-3,n,s)&&(a|=1),a<<=1,this.readModule(1,s-2,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a}readCorner4(n,s){let a=0;return this.readModule(n-3,0,n,s)&&(a|=1),a<<=1,this.readModule(n-2,0,n,s)&&(a|=1),a<<=1,this.readModule(n-1,0,n,s)&&(a|=1),a<<=1,this.readModule(0,s-2,n,s)&&(a|=1),a<<=1,this.readModule(0,s-1,n,s)&&(a|=1),a<<=1,this.readModule(1,s-1,n,s)&&(a|=1),a<<=1,this.readModule(2,s-1,n,s)&&(a|=1),a<<=1,this.readModule(3,s-1,n,s)&&(a|=1),a}extractDataRegion(n){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(n.getHeight()!==s)throw new N("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),d=s/c|0,m=a/h|0,E=d*c,I=m*h,R=new Je(I,E);for(let P=0;P<d;++P){const k=P*c;for(let z=0;z<m;++z){const K=z*h;for(let Z=0;Z<c;++Z){const ne=P*(c+2)+1+Z,ce=k+Z;for(let ve=0;ve<h;++ve){const Se=z*(h+2)+1+ve;if(n.get(Se,ne)){const _e=K+ve;R.set(_e,ce)}}}}}return R}}class Xr{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s){const a=s.getECBlocks();let c=0;const h=a.getECBlocks();for(let Z of h)c+=Z.getCount();const d=new Array(c);let m=0;for(let Z of h)for(let ne=0;ne<Z.getCount();ne++){const ce=Z.getDataCodewords(),ve=a.getECCodewords()+ce;d[m++]=new Xr(ce,new Uint8Array(ve))}const I=d[0].codewords.length-a.getECCodewords(),R=I-1;let P=0;for(let Z=0;Z<R;Z++)for(let ne=0;ne<m;ne++)d[ne].codewords[Z]=n[P++];const k=s.getVersionNumber()===24,z=k?8:m;for(let Z=0;Z<z;Z++)d[Z].codewords[I-1]=n[P++];const K=d[0].codewords.length;for(let Z=I;Z<K;Z++)for(let ne=0;ne<m;ne++){const ce=k?(ne+8)%m:ne,ve=k&&ce>7?Z-1:Z;d[ce].codewords[ve]=n[P++]}if(P!==n.length)throw new N;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ir{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new N(""+n);let s=0,a=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(a>0){const d=8-a,m=n<d?n:d,E=d-m,I=255>>8-m<<E;s=(h[c]&I)>>E,n-=m,a+=m,a===8&&(a=0,c++)}if(n>0){for(;n>=8;)s=s<<8|h[c]&255,c++,n-=8;if(n>0){const d=8-n,m=255>>d<<d;s=s<<n|(h[c]&m)>>d,a+=n}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var $t;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})($t||($t={}));class Gn{static decode(n){const s=new Ir(n),a=new j,c=new j,h=new Array;let d=$t.ASCII_ENCODE;do if(d===$t.ASCII_ENCODE)d=this.decodeAsciiSegment(s,a,c);else{switch(d){case $t.C40_ENCODE:this.decodeC40Segment(s,a);break;case $t.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case $t.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case $t.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case $t.BASE256_ENCODE:this.decodeBase256Segment(s,a,h);break;default:throw new V}d=$t.ASCII_ENCODE}while(d!==$t.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Bt(n,a.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(n,s,a){let c=!1;do{let h=n.readBits(8);if(h===0)throw new V;if(h<=128)return c&&(h+=128),s.append(String.fromCharCode(h-1)),$t.ASCII_ENCODE;if(h===129)return $t.PAD_ENCODE;if(h<=229){const d=h-130;d<10&&s.append("0"),s.append(""+d)}else switch(h){case 230:return $t.C40_ENCODE;case 231:return $t.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return $t.ANSIX12_ENCODE;case 239:return $t.TEXT_ENCODE;case 240:return $t.EDIFACT_ENCODE;case 241:break;default:if(h!==254||n.available()!==0)throw new V;break}}while(n.available()>0);return $t.ASCII_ENCODE}static decodeC40Segment(n,s){let a=!1;const c=[];let h=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),c);for(let m=0;m<3;m++){const E=c[m];switch(h){case 0:if(E<3)h=E+1;else if(E<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[E];a?(s.append(String.fromCharCode(I.charCodeAt(0)+128)),a=!1):s.append(I)}else throw new V;break;case 1:a?(s.append(String.fromCharCode(E+128)),a=!1):s.append(String.fromCharCode(E)),h=0;break;case 2:if(E<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[E];a?(s.append(String.fromCharCode(I.charCodeAt(0)+128)),a=!1):s.append(I)}else switch(E){case 27:s.append("");break;case 30:a=!0;break;default:throw new V}h=0;break;case 3:a?(s.append(String.fromCharCode(E+224)),a=!1):s.append(String.fromCharCode(E+96)),h=0;break;default:throw new V}}}while(n.available()>0)}static decodeTextSegment(n,s){let a=!1,c=[],h=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),c);for(let m=0;m<3;m++){const E=c[m];switch(h){case 0:if(E<3)h=E+1;else if(E<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[E];a?(s.append(String.fromCharCode(I.charCodeAt(0)+128)),a=!1):s.append(I)}else throw new V;break;case 1:a?(s.append(String.fromCharCode(E+128)),a=!1):s.append(String.fromCharCode(E)),h=0;break;case 2:if(E<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[E];a?(s.append(String.fromCharCode(I.charCodeAt(0)+128)),a=!1):s.append(I)}else switch(E){case 27:s.append("");break;case 30:a=!0;break;default:throw new V}h=0;break;case 3:if(E<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[E];a?(s.append(String.fromCharCode(I.charCodeAt(0)+128)),a=!1):s.append(I),h=0}else throw new V;break;default:throw new V}}}while(n.available()>0)}static decodeAnsiX12Segment(n,s){const a=[];do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let h=0;h<3;h++){const d=a[h];switch(d){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(d<14)s.append(String.fromCharCode(d+44));else if(d<40)s.append(String.fromCharCode(d+51));else throw new V;break}}}while(n.available()>0)}static parseTwoBytes(n,s,a){let c=(n<<8)+s-1,h=Math.floor(c/1600);a[0]=h,c-=h*1600,h=Math.floor(c/40),a[1]=h,a[2]=c-h*40}static decodeEdifactSegment(n,s){do{if(n.available()<=16)return;for(let a=0;a<4;a++){let c=n.readBits(6);if(c===31){const h=8-n.getBitOffset();h!==8&&n.readBits(h);return}(c&32)===0&&(c|=64),s.append(String.fromCharCode(c))}}while(n.available()>0)}static decodeBase256Segment(n,s,a){let c=1+n.getByteOffset();const h=this.unrandomize255State(n.readBits(8),c++);let d;if(h===0?d=n.available()/8|0:h<250?d=h:d=250*(h-249)+this.unrandomize255State(n.readBits(8),c++),d<0)throw new V;const m=new Uint8Array(d);for(let E=0;E<d;E++){if(n.available()<8)throw new V;m[E]=this.unrandomize255State(n.readBits(8),c++)}a.push(m);try{s.append(X.decode(m,q.ISO88591))}catch(E){throw new Mr("Platform does not support required encoding: "+E.message)}}static unrandomize255State(n,s){const a=149*s%255+1,c=n-a;return c>=0?c:c+256}}Gn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gn.TEXT_SHIFT2_SET_CHARS=Gn.C40_SHIFT2_SET_CHARS,Gn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ls{constructor(){this.rsDecoder=new Ei(Et.DATA_MATRIX_FIELD_256)}decode(n){const s=new fr(n),a=s.getVersion(),c=s.readCodewords(),h=Xr.getDataBlocks(c,a);let d=0;for(let I of h)d+=I.getNumDataCodewords();const m=new Uint8Array(d),E=h.length;for(let I=0;I<E;I++){const R=h[I],P=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(P,k);for(let z=0;z<k;z++)m[z*E+I]=P[z]}return Gn.decode(m)}correctErrors(n,s){const a=new Int32Array(n);try{this.rsDecoder.decode(a,n.length-s)}catch{throw new W}for(let c=0;c<s;c++)n[c]=a[c]}}class et{constructor(n){this.image=n,this.rectangleDetector=new Wr(this.image)}detect(){const n=this.rectangleDetector.detect();let s=this.detectSolid1(n);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new le;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],h=s[2],d=s[3];let m=this.transitionsBetween(a,d)+1,E=this.transitionsBetween(h,d)+1;(m&1)===1&&(m+=1),(E&1)===1&&(E+=1),4*m<7*E&&4*E<7*m&&(m=E=Math.max(m,E));let I=et.sampleGrid(this.image,a,c,h,d,m,E);return new rs(I,[a,c,h,d])}static shiftPoint(n,s,a){let c=(s.getX()-n.getX())/(a+1),h=(s.getY()-n.getY())/(a+1);return new Me(n.getX()+c,n.getY()+h)}static moveAway(n,s,a){let c=n.getX(),h=n.getY();return c<s?c-=1:c+=1,h<a?h-=1:h+=1,new Me(c,h)}detectSolid1(n){let s=n[0],a=n[1],c=n[3],h=n[2],d=this.transitionsBetween(s,a),m=this.transitionsBetween(a,c),E=this.transitionsBetween(c,h),I=this.transitionsBetween(h,s),R=d,P=[h,s,a,c];return R>m&&(R=m,P[0]=s,P[1]=a,P[2]=c,P[3]=h),R>E&&(R=E,P[0]=a,P[1]=c,P[2]=h,P[3]=s),R>I&&(P[0]=c,P[1]=h,P[2]=s,P[3]=a),P}detectSolid2(n){let s=n[0],a=n[1],c=n[2],h=n[3],d=this.transitionsBetween(s,h),m=et.shiftPoint(a,c,(d+1)*4),E=et.shiftPoint(c,a,(d+1)*4),I=this.transitionsBetween(m,s),R=this.transitionsBetween(E,h);return I<R?(n[0]=s,n[1]=a,n[2]=c,n[3]=h):(n[0]=a,n[1]=c,n[2]=h,n[3]=s),n}correctTopRight(n){let s=n[0],a=n[1],c=n[2],h=n[3],d=this.transitionsBetween(s,h),m=this.transitionsBetween(a,h),E=et.shiftPoint(s,a,(m+1)*4),I=et.shiftPoint(c,a,(d+1)*4);d=this.transitionsBetween(E,h),m=this.transitionsBetween(I,h);let R=new Me(h.getX()+(c.getX()-a.getX())/(d+1),h.getY()+(c.getY()-a.getY())/(d+1)),P=new Me(h.getX()+(s.getX()-a.getX())/(m+1),h.getY()+(s.getY()-a.getY())/(m+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let k=this.transitionsBetween(E,R)+this.transitionsBetween(I,R),z=this.transitionsBetween(E,P)+this.transitionsBetween(I,P);return k>z?R:P}shiftToModuleCenter(n){let s=n[0],a=n[1],c=n[2],h=n[3],d=this.transitionsBetween(s,h)+1,m=this.transitionsBetween(c,h)+1,E=et.shiftPoint(s,a,m*4),I=et.shiftPoint(c,a,d*4);d=this.transitionsBetween(E,h)+1,m=this.transitionsBetween(I,h)+1,(d&1)===1&&(d+=1),(m&1)===1&&(m+=1);let R=(s.getX()+a.getX()+c.getX()+h.getX())/4,P=(s.getY()+a.getY()+c.getY()+h.getY())/4;s=et.moveAway(s,R,P),a=et.moveAway(a,R,P),c=et.moveAway(c,R,P),h=et.moveAway(h,R,P);let k,z;return E=et.shiftPoint(s,a,m*4),E=et.shiftPoint(E,h,d*4),k=et.shiftPoint(a,s,m*4),k=et.shiftPoint(k,c,d*4),I=et.shiftPoint(c,h,m*4),I=et.shiftPoint(I,a,d*4),z=et.shiftPoint(h,c,m*4),z=et.shiftPoint(z,s,d*4),[E,k,I,z]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,s,a,c,h,d,m){return cr.getInstance().sampleGrid(n,d,m,.5,.5,d-.5,.5,d-.5,m-.5,.5,m-.5,s.getX(),s.getY(),h.getX(),h.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(n,s){let a=Math.trunc(n.getX()),c=Math.trunc(n.getY()),h=Math.trunc(s.getX()),d=Math.trunc(s.getY()),m=Math.abs(d-c)>Math.abs(h-a);if(m){let Z=a;a=c,c=Z,Z=h,h=d,d=Z}let E=Math.abs(h-a),I=Math.abs(d-c),R=-E/2,P=c<d?1:-1,k=a<h?1:-1,z=0,K=this.image.get(m?c:a,m?a:c);for(let Z=a,ne=c;Z!==h;Z+=k){let ce=this.image.get(m?ne:Z,m?Z:ne);if(ce!==K&&(z++,K=ce),R+=I,R>0){if(ne===d)break;ne+=P,R-=E}}return z}}class nr{constructor(){this.decoder=new ls}decode(n,s=null){let a,c;if(s!=null&&s.has(Le.PURE_BARCODE)){const I=nr.extractPureBits(n.getBlackMatrix());a=this.decoder.decode(I),c=nr.NO_POINTS}else{const I=new et(n.getBlackMatrix()).detect();a=this.decoder.decode(I.getBits()),c=I.getPoints()}const h=a.getRawBytes(),d=new Ge(a.getText(),h,8*h.length,c,be.DATA_MATRIX,Y.currentTimeMillis()),m=a.getByteSegments();m!=null&&d.putMetadata(nt.BYTE_SEGMENTS,m);const E=a.getECLevel();return E!=null&&d.putMetadata(nt.ERROR_CORRECTION_LEVEL,E),d}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),a=n.getBottomRightOnBit();if(s==null||a==null)throw new le;const c=this.moduleSize(s,n);let h=s[1];const d=a[1];let m=s[0];const I=(a[0]-m+1)/c,R=(d-h+1)/c;if(I<=0||R<=0)throw new le;const P=c/2;h+=P,m+=P;const k=new Je(I,R);for(let z=0;z<R;z++){const K=h+z*c;for(let Z=0;Z<I;Z++)n.get(m+Z*c,K)&&k.set(Z,z)}return k}static moduleSize(n,s){const a=s.getWidth();let c=n[0];const h=n[1];for(;c<a&&s.get(c,h);)c++;if(c===a)throw new le;const d=c-n[0];if(d===0)throw new le;return d}}nr.NO_POINTS=[];class Ls extends tt{constructor(n=500){super(new nr,n)}}var qr;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(qr||(qr={}));class jt{constructor(n,s,a){this.value=n,this.stringValue=s,this.bits=a,jt.FOR_BITS.set(a,this),jt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return jt.L;case"M":return jt.M;case"Q":return jt.Q;case"H":return jt.H;default:throw new v(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof jt))return!1;const s=n;return this.value===s.value}static forBits(n){if(n<0||n>=jt.FOR_BITS.size)throw new N;return jt.FOR_BITS.get(n)}}jt.FOR_BITS=new Map,jt.FOR_VALUE=new Map,jt.L=new jt(qr.L,"L",1),jt.M=new jt(qr.M,"M",0),jt.Q=new jt(qr.Q,"Q",3),jt.H=new jt(qr.H,"H",2);class Cn{constructor(n){this.errorCorrectionLevel=jt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,s){return ie.bitCount(n^s)}static decodeFormatInformation(n,s){const a=Cn.doDecodeFormatInformation(n,s);return a!==null?a:Cn.doDecodeFormatInformation(n^Cn.FORMAT_INFO_MASK_QR,s^Cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const h of Cn.FORMAT_INFO_DECODE_LOOKUP){const d=h[0];if(d===n||d===s)return new Cn(h[1]);let m=Cn.numBitsDiffering(n,d);m<a&&(c=h[1],a=m),n!==s&&(m=Cn.numBitsDiffering(s,d),m<a&&(c=h[1],a=m))}return a<=3?new Cn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Cn))return!1;const s=n;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Cn.FORMAT_INFO_MASK_QR=21522,Cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(n,...s){this.ecCodewordsPerBlock=n,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const s=this.ecBlocks;for(const a of s)n+=a.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class F{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(n,s,...a){this.versionNumber=n,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const h=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const m of d)c+=m.getCount()*(m.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new V;try{return this.getVersionForNumber((n-17)/4)}catch{throw new V}}static getVersionForNumber(n){if(n<1||n>40)throw new N;return Xe.VERSIONS[n-1]}static decodeVersionInformation(n){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Xe.VERSION_DECODE_INFO.length;c++){const h=Xe.VERSION_DECODE_INFO[c];if(h===n)return Xe.getVersionForNumber(c+7);const d=Cn.numBitsDiffering(n,h);d<s&&(a=c+7,s=d)}return s<=3?Xe.getVersionForNumber(a):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),s=new Je(n);s.setRegion(0,0,9,9),s.setRegion(n-8,0,8,9),s.setRegion(0,n-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const h=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)c===0&&(d===0||d===a-1)||c===a-1&&d===0||s.setRegion(this.alignmentPatternCenters[d]-2,h,5,5)}return s.setRegion(6,9,1,n-17),s.setRegion(9,6,n-17,1),this.versionNumber>6&&(s.setRegion(n-11,0,3,6),s.setRegion(0,n-11,6,3)),s}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new se(7,new F(1,19)),new se(10,new F(1,16)),new se(13,new F(1,13)),new se(17,new F(1,9))),new Xe(2,Int32Array.from([6,18]),new se(10,new F(1,34)),new se(16,new F(1,28)),new se(22,new F(1,22)),new se(28,new F(1,16))),new Xe(3,Int32Array.from([6,22]),new se(15,new F(1,55)),new se(26,new F(1,44)),new se(18,new F(2,17)),new se(22,new F(2,13))),new Xe(4,Int32Array.from([6,26]),new se(20,new F(1,80)),new se(18,new F(2,32)),new se(26,new F(2,24)),new se(16,new F(4,9))),new Xe(5,Int32Array.from([6,30]),new se(26,new F(1,108)),new se(24,new F(2,43)),new se(18,new F(2,15),new F(2,16)),new se(22,new F(2,11),new F(2,12))),new Xe(6,Int32Array.from([6,34]),new se(18,new F(2,68)),new se(16,new F(4,27)),new se(24,new F(4,19)),new se(28,new F(4,15))),new Xe(7,Int32Array.from([6,22,38]),new se(20,new F(2,78)),new se(18,new F(4,31)),new se(18,new F(2,14),new F(4,15)),new se(26,new F(4,13),new F(1,14))),new Xe(8,Int32Array.from([6,24,42]),new se(24,new F(2,97)),new se(22,new F(2,38),new F(2,39)),new se(22,new F(4,18),new F(2,19)),new se(26,new F(4,14),new F(2,15))),new Xe(9,Int32Array.from([6,26,46]),new se(30,new F(2,116)),new se(22,new F(3,36),new F(2,37)),new se(20,new F(4,16),new F(4,17)),new se(24,new F(4,12),new F(4,13))),new Xe(10,Int32Array.from([6,28,50]),new se(18,new F(2,68),new F(2,69)),new se(26,new F(4,43),new F(1,44)),new se(24,new F(6,19),new F(2,20)),new se(28,new F(6,15),new F(2,16))),new Xe(11,Int32Array.from([6,30,54]),new se(20,new F(4,81)),new se(30,new F(1,50),new F(4,51)),new se(28,new F(4,22),new F(4,23)),new se(24,new F(3,12),new F(8,13))),new Xe(12,Int32Array.from([6,32,58]),new se(24,new F(2,92),new F(2,93)),new se(22,new F(6,36),new F(2,37)),new se(26,new F(4,20),new F(6,21)),new se(28,new F(7,14),new F(4,15))),new Xe(13,Int32Array.from([6,34,62]),new se(26,new F(4,107)),new se(22,new F(8,37),new F(1,38)),new se(24,new F(8,20),new F(4,21)),new se(22,new F(12,11),new F(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new se(30,new F(3,115),new F(1,116)),new se(24,new F(4,40),new F(5,41)),new se(20,new F(11,16),new F(5,17)),new se(24,new F(11,12),new F(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new se(22,new F(5,87),new F(1,88)),new se(24,new F(5,41),new F(5,42)),new se(30,new F(5,24),new F(7,25)),new se(24,new F(11,12),new F(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new se(24,new F(5,98),new F(1,99)),new se(28,new F(7,45),new F(3,46)),new se(24,new F(15,19),new F(2,20)),new se(30,new F(3,15),new F(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new se(28,new F(1,107),new F(5,108)),new se(28,new F(10,46),new F(1,47)),new se(28,new F(1,22),new F(15,23)),new se(28,new F(2,14),new F(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new se(30,new F(5,120),new F(1,121)),new se(26,new F(9,43),new F(4,44)),new se(28,new F(17,22),new F(1,23)),new se(28,new F(2,14),new F(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new se(28,new F(3,113),new F(4,114)),new se(26,new F(3,44),new F(11,45)),new se(26,new F(17,21),new F(4,22)),new se(26,new F(9,13),new F(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new se(28,new F(3,107),new F(5,108)),new se(26,new F(3,41),new F(13,42)),new se(30,new F(15,24),new F(5,25)),new se(28,new F(15,15),new F(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new se(28,new F(4,116),new F(4,117)),new se(26,new F(17,42)),new se(28,new F(17,22),new F(6,23)),new se(30,new F(19,16),new F(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new se(28,new F(2,111),new F(7,112)),new se(28,new F(17,46)),new se(30,new F(7,24),new F(16,25)),new se(24,new F(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new se(30,new F(4,121),new F(5,122)),new se(28,new F(4,47),new F(14,48)),new se(30,new F(11,24),new F(14,25)),new se(30,new F(16,15),new F(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new se(30,new F(6,117),new F(4,118)),new se(28,new F(6,45),new F(14,46)),new se(30,new F(11,24),new F(16,25)),new se(30,new F(30,16),new F(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new se(26,new F(8,106),new F(4,107)),new se(28,new F(8,47),new F(13,48)),new se(30,new F(7,24),new F(22,25)),new se(30,new F(22,15),new F(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new se(28,new F(10,114),new F(2,115)),new se(28,new F(19,46),new F(4,47)),new se(28,new F(28,22),new F(6,23)),new se(30,new F(33,16),new F(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new se(30,new F(8,122),new F(4,123)),new se(28,new F(22,45),new F(3,46)),new se(30,new F(8,23),new F(26,24)),new se(30,new F(12,15),new F(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new F(3,117),new F(10,118)),new se(28,new F(3,45),new F(23,46)),new se(30,new F(4,24),new F(31,25)),new se(30,new F(11,15),new F(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new F(7,116),new F(7,117)),new se(28,new F(21,45),new F(7,46)),new se(30,new F(1,23),new F(37,24)),new se(30,new F(19,15),new F(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new F(5,115),new F(10,116)),new se(28,new F(19,47),new F(10,48)),new se(30,new F(15,24),new F(25,25)),new se(30,new F(23,15),new F(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new F(13,115),new F(3,116)),new se(28,new F(2,46),new F(29,47)),new se(30,new F(42,24),new F(1,25)),new se(30,new F(23,15),new F(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new F(17,115)),new se(28,new F(10,46),new F(23,47)),new se(30,new F(10,24),new F(35,25)),new se(30,new F(19,15),new F(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new F(17,115),new F(1,116)),new se(28,new F(14,46),new F(21,47)),new se(30,new F(29,24),new F(19,25)),new se(30,new F(11,15),new F(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new F(13,115),new F(6,116)),new se(28,new F(14,46),new F(23,47)),new se(30,new F(44,24),new F(7,25)),new se(30,new F(59,16),new F(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new F(12,121),new F(7,122)),new se(28,new F(12,47),new F(26,48)),new se(30,new F(39,24),new F(14,25)),new se(30,new F(22,15),new F(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new F(6,121),new F(14,122)),new se(28,new F(6,47),new F(34,48)),new se(30,new F(46,24),new F(10,25)),new se(30,new F(2,15),new F(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new F(17,122),new F(4,123)),new se(28,new F(29,46),new F(14,47)),new se(30,new F(49,24),new F(10,25)),new se(30,new F(24,15),new F(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new F(4,122),new F(18,123)),new se(28,new F(13,46),new F(32,47)),new se(30,new F(48,24),new F(14,25)),new se(30,new F(42,15),new F(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new F(20,117),new F(4,118)),new se(28,new F(40,47),new F(7,48)),new se(30,new F(43,24),new F(22,25)),new se(30,new F(10,15),new F(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new F(19,118),new F(6,119)),new se(28,new F(18,47),new F(31,48)),new se(30,new F(34,24),new F(34,25)),new se(30,new F(20,15),new F(61,16)))];var fn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(fn||(fn={}));class lt{constructor(n,s){this.value=n,this.isMasked=s}unmaskBitMatrix(n,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&n.flip(c,a)}}lt.values=new Map([[fn.DATA_MASK_000,new lt(fn.DATA_MASK_000,(O,n)=>(O+n&1)===0)],[fn.DATA_MASK_001,new lt(fn.DATA_MASK_001,(O,n)=>(O&1)===0)],[fn.DATA_MASK_010,new lt(fn.DATA_MASK_010,(O,n)=>n%3===0)],[fn.DATA_MASK_011,new lt(fn.DATA_MASK_011,(O,n)=>(O+n)%3===0)],[fn.DATA_MASK_100,new lt(fn.DATA_MASK_100,(O,n)=>(Math.floor(O/2)+Math.floor(n/3)&1)===0)],[fn.DATA_MASK_101,new lt(fn.DATA_MASK_101,(O,n)=>O*n%6===0)],[fn.DATA_MASK_110,new lt(fn.DATA_MASK_110,(O,n)=>O*n%6<3)],[fn.DATA_MASK_111,new lt(fn.DATA_MASK_111,(O,n)=>(O+n+O*n%3&1)===0)]]);class Ci{constructor(n){const s=n.getHeight();if(s<21||(s&3)!==1)throw new V;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let h=0;h<6;h++)n=this.copyBit(h,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let h=5;h>=0;h--)n=this.copyBit(8,h,n);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let h=s-1;h>=c;h--)a=this.copyBit(8,h,a);for(let h=s-8;h<s;h++)a=this.copyBit(h,8,a);if(this.parsedFormatInfo=Cn.decodeFormatInformation(n,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),s=Math.floor((n-17)/4);if(s<=6)return Xe.getVersionForNumber(s);let a=0;const c=n-11;for(let d=5;d>=0;d--)for(let m=n-9;m>=c;m--)a=this.copyBit(m,d,a);let h=Xe.decodeVersionInformation(a);if(h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;a=0;for(let d=5;d>=0;d--)for(let m=n-9;m>=c;m--)a=this.copyBit(d,m,a);if(h=Xe.decodeVersionInformation(a),h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;throw new V}copyBit(n,s,a){return(this.isMirror?this.bitMatrix.get(s,n):this.bitMatrix.get(n,s))?a<<1|1:a<<1}readCodewords(){const n=this.readFormatInformation(),s=this.readVersion(),a=lt.values.get(n.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const h=s.buildFunctionPattern();let d=!0;const m=new Uint8Array(s.getTotalCodewords());let E=0,I=0,R=0;for(let P=c-1;P>0;P-=2){P===6&&P--;for(let k=0;k<c;k++){const z=d?c-1-k:k;for(let K=0;K<2;K++)h.get(P-K,z)||(R++,I<<=1,this.bitMatrix.get(P-K,z)&&(I|=1),R===8&&(m[E++]=I,R=0,I=0))}d=!d}if(E!==s.getTotalCodewords())throw new V;return m}remask(){if(this.parsedFormatInfo===null)return;const n=lt.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,s)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let s=0,a=n.getWidth();s<a;s++)for(let c=s+1,h=n.getHeight();c<h;c++)n.get(s,c)!==n.get(c,s)&&(n.flip(c,s),n.flip(s,c))}}class Bs{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s,a){if(n.length!==s.getTotalCodewords())throw new N;const c=s.getECBlocksForLevel(a);let h=0;const d=c.getECBlocks();for(const K of d)h+=K.getCount();const m=new Array(h);let E=0;for(const K of d)for(let Z=0;Z<K.getCount();Z++){const ne=K.getDataCodewords(),ce=c.getECCodewordsPerBlock()+ne;m[E++]=new Bs(ne,new Uint8Array(ce))}const I=m[0].codewords.length;let R=m.length-1;for(;R>=0&&m[R].codewords.length!==I;)R--;R++;const P=I-c.getECCodewordsPerBlock();let k=0;for(let K=0;K<P;K++)for(let Z=0;Z<E;Z++)m[Z].codewords[K]=n[k++];for(let K=R;K<E;K++)m[K].codewords[P]=n[k++];const z=m[0].codewords.length;for(let K=P;K<z;K++)for(let Z=0;Z<E;Z++){const ne=Z<R?K:K+1;m[Z].codewords[ne]=n[k++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Xn;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(Xn||(Xn={}));class Ye{constructor(n,s,a,c){this.value=n,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Ye.FOR_BITS.set(c,this),Ye.FOR_VALUE.set(n,this)}static forBits(n){const s=Ye.FOR_BITS.get(n);if(s===void 0)throw new N;return s}getCharacterCountBits(n){const s=n.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ye))return!1;const s=n;return this.value===s.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(Xn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(Xn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(Xn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(Xn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(Xn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(Xn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(Xn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(Xn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(Xn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(Xn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Zt{static decode(n,s,a,c){const h=new Ir(n);let d=new j;const m=new Array;let E=-1,I=-1;try{let R=null,P=!1,k;do{if(h.available()<4)k=Ye.TERMINATOR;else{const z=h.readBits(4);k=Ye.forBits(z)}switch(k){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:P=!0;break;case Ye.STRUCTURED_APPEND:if(h.available()<16)throw new V;E=h.readBits(8),I=h.readBits(8);break;case Ye.ECI:const z=Zt.parseECIValue(h);if(R=B.getCharacterSetECIByValue(z),R===null)throw new V;break;case Ye.HANZI:const K=h.readBits(4),Z=h.readBits(k.getCharacterCountBits(s));K===Zt.GB2312_SUBSET&&Zt.decodeHanziSegment(h,d,Z);break;default:const ne=h.readBits(k.getCharacterCountBits(s));switch(k){case Ye.NUMERIC:Zt.decodeNumericSegment(h,d,ne);break;case Ye.ALPHANUMERIC:Zt.decodeAlphanumericSegment(h,d,ne,P);break;case Ye.BYTE:Zt.decodeByteSegment(h,d,ne,R,m,c);break;case Ye.KANJI:Zt.decodeKanjiSegment(h,d,ne);break;default:throw new V}break}}while(k!==Ye.TERMINATOR)}catch{throw new V}return new Bt(n,d.toString(),m.length===0?null:m,a===null?null:a.toString(),E,I)}static decodeHanziSegment(n,s,a){if(a*13>n.available())throw new V;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const d=n.readBits(13);let m=d/96<<8&4294967295|d%96;m<959?m+=41377:m+=42657,c[h]=m>>8&255,c[h+1]=m&255,h+=2,a--}try{s.append(X.decode(c,q.GB2312))}catch(d){throw new V(d)}}static decodeKanjiSegment(n,s,a){if(a*13>n.available())throw new V;const c=new Uint8Array(2*a);let h=0;for(;a>0;){const d=n.readBits(13);let m=d/192<<8&4294967295|d%192;m<7936?m+=33088:m+=49472,c[h]=m>>8,c[h+1]=m,h+=2,a--}try{s.append(X.decode(c,q.SHIFT_JIS))}catch(d){throw new V(d)}}static decodeByteSegment(n,s,a,c,h,d){if(8*a>n.available())throw new V;const m=new Uint8Array(a);for(let I=0;I<a;I++)m[I]=n.readBits(8);let E;c===null?E=q.guessEncoding(m,d):E=c.getName();try{s.append(X.decode(m,E))}catch(I){throw new V(I)}h.push(m)}static toAlphaNumericChar(n){if(n>=Zt.ALPHANUMERIC_CHARS.length)throw new V;return Zt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,s,a,c){const h=s.length();for(;a>1;){if(n.available()<11)throw new V;const d=n.readBits(11);s.append(Zt.toAlphaNumericChar(Math.floor(d/45))),s.append(Zt.toAlphaNumericChar(d%45)),a-=2}if(a===1){if(n.available()<6)throw new V;s.append(Zt.toAlphaNumericChar(n.readBits(6)))}if(c)for(let d=h;d<s.length();d++)s.charAt(d)==="%"&&(d<s.length()-1&&s.charAt(d+1)==="%"?s.deleteCharAt(d+1):s.setCharAt(d,""))}static decodeNumericSegment(n,s,a){for(;a>=3;){if(n.available()<10)throw new V;const c=n.readBits(10);if(c>=1e3)throw new V;s.append(Zt.toAlphaNumericChar(Math.floor(c/100))),s.append(Zt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(Zt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(n.available()<7)throw new V;const c=n.readBits(7);if(c>=100)throw new V;s.append(Zt.toAlphaNumericChar(Math.floor(c/10))),s.append(Zt.toAlphaNumericChar(c%10))}else if(a===1){if(n.available()<4)throw new V;const c=n.readBits(4);if(c>=10)throw new V;s.append(Zt.toAlphaNumericChar(c))}}static parseECIValue(n){const s=n.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const a=n.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=n.readBits(16);return(s&31)<<16&4294967295|a}throw new V}}Zt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Zt.GB2312_SUBSET=1;class fo{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const s=n[0];n[0]=n[2],n[2]=s}}class vi{constructor(){this.rsDecoder=new Ei(Et.QR_CODE_FIELD_256)}decodeBooleanArray(n,s){return this.decodeBitMatrix(Je.parseFromBooleanArray(n),s)}decodeBitMatrix(n,s){const a=new Ci(n);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(h){c=h}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const h=this.decodeBitMatrixParser(a,s);return h.setOther(new fo(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(n,s){const a=n.readVersion(),c=n.readFormatInformation().getErrorCorrectionLevel(),h=n.readCodewords(),d=Bs.getDataBlocks(h,a,c);let m=0;for(const R of d)m+=R.getNumDataCodewords();const E=new Uint8Array(m);let I=0;for(const R of d){const P=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(P,k);for(let z=0;z<k;z++)E[I++]=P[z]}return Zt.decode(E,a,c,s)}correctErrors(n,s){const a=new Int32Array(n);try{this.rsDecoder.decode(a,n.length-s)}catch{throw new W}for(let c=0;c<s;c++)n[c]=a[c]}}class us extends Me{constructor(n,s,a){super(n,s),this.estimatedModuleSize=a}aboutEquals(n,s,a){if(Math.abs(s-this.getY())<=n&&Math.abs(a-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,s,a){const c=(this.getX()+s)/2,h=(this.getY()+n)/2,d=(this.estimatedModuleSize+a)/2;return new us(c,h,d)}}class Br{constructor(n,s,a,c,h,d,m){this.image=n,this.startX=s,this.startY=a,this.width=c,this.height=h,this.moduleSize=d,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,s=this.height,a=this.width,c=n+a,h=this.startY+s/2,d=new Int32Array(3),m=this.image;for(let E=0;E<s;E++){const I=h+((E&1)===0?Math.floor((E+1)/2):-Math.floor((E+1)/2));d[0]=0,d[1]=0,d[2]=0;let R=n;for(;R<c&&!m.get(R,I);)R++;let P=0;for(;R<c;){if(m.get(R,I))if(P===1)d[1]++;else if(P===2){if(this.foundPatternCross(d)){const k=this.handlePossibleCenter(d,I,R);if(k!==null)return k}d[0]=d[2],d[1]=1,d[2]=0,P=1}else d[++P]++;else P===1&&P++,d[P]++;R++}if(this.foundPatternCross(d)){const k=this.handlePossibleCenter(d,I,c);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new le}static centerFromEnd(n,s){return s-n[2]-n[1]/2}foundPatternCross(n){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-n[c])>=a)return!1;return!0}crossCheckVertical(n,s,a,c){const h=this.image,d=h.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let E=n;for(;E>=0&&h.get(s,E)&&m[1]<=a;)m[1]++,E--;if(E<0||m[1]>a)return NaN;for(;E>=0&&!h.get(s,E)&&m[0]<=a;)m[0]++,E--;if(m[0]>a)return NaN;for(E=n+1;E<d&&h.get(s,E)&&m[1]<=a;)m[1]++,E++;if(E===d||m[1]>a)return NaN;for(;E<d&&!h.get(s,E)&&m[2]<=a;)m[2]++,E++;if(m[2]>a)return NaN;const I=m[0]+m[1]+m[2];return 5*Math.abs(I-c)>=2*c?NaN:this.foundPatternCross(m)?Br.centerFromEnd(m,E):NaN}handlePossibleCenter(n,s,a){const c=n[0]+n[1]+n[2],h=Br.centerFromEnd(n,a),d=this.crossCheckVertical(s,h,2*n[1],c);if(!isNaN(d)){const m=(n[0]+n[1]+n[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(m,d,h))return I.combineEstimate(d,h,m);const E=new us(h,d,m);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null}}class Kr extends Me{constructor(n,s,a,c){super(n,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,s,a){if(Math.abs(s-this.getY())<=n&&Math.abs(a-this.getX())<=n){const c=Math.abs(n-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(n,s,a){const c=this.count+1,h=(this.count*this.getX()+s)/c,d=(this.count*this.getY()+n)/c,m=(this.count*this.estimatedModuleSize+a)/c;return new Kr(h,d,m,c)}}class qn{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class en{constructor(n,s){this.image=n,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const s=n!=null&&n.get(Le.TRY_HARDER)!==void 0,a=n!=null&&n.get(Le.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),d=c.getWidth();let m=Math.floor(3*h/(4*en.MAX_MODULES));(m<en.MIN_SKIP||s)&&(m=en.MIN_SKIP);let E=!1;const I=new Int32Array(5);for(let P=m-1;P<h&&!E;P+=m){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let k=0;for(let z=0;z<d;z++)if(c.get(z,P))(k&1)===1&&k++,I[k]++;else if((k&1)===0)if(k===4)if(en.foundPatternCross(I)){if(this.handlePossibleCenter(I,P,z,a)===!0)if(m=2,this.hasSkipped===!0)E=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>I[2]&&(P+=Z-I[2]-m,z=d-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,k=3;continue}k=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,k=3;else I[++k]++;else I[k]++;en.foundPatternCross(I)&&this.handlePossibleCenter(I,P,d,a)===!0&&(m=I[0],this.hasSkipped&&(E=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Me.orderBestPatterns(R),new qn(R)}static centerFromEnd(n,s){return s-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let s=0;for(let h=0;h<5;h++){const d=n[h];if(d===0)return!1;s+=d}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-n[0])<c&&Math.abs(a-n[1])<c&&Math.abs(3*a-n[2])<3*c&&Math.abs(a-n[3])<c&&Math.abs(a-n[4])<c}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,s,a,c){const h=this.getCrossCheckStateCount();let d=0;const m=this.image;for(;n>=d&&s>=d&&m.get(s-d,n-d);)h[2]++,d++;if(n<d||s<d)return!1;for(;n>=d&&s>=d&&!m.get(s-d,n-d)&&h[1]<=a;)h[1]++,d++;if(n<d||s<d||h[1]>a)return!1;for(;n>=d&&s>=d&&m.get(s-d,n-d)&&h[0]<=a;)h[0]++,d++;if(h[0]>a)return!1;const E=m.getHeight(),I=m.getWidth();for(d=1;n+d<E&&s+d<I&&m.get(s+d,n+d);)h[2]++,d++;if(n+d>=E||s+d>=I)return!1;for(;n+d<E&&s+d<I&&!m.get(s+d,n+d)&&h[3]<a;)h[3]++,d++;if(n+d>=E||s+d>=I||h[3]>=a)return!1;for(;n+d<E&&s+d<I&&m.get(s+d,n+d)&&h[4]<a;)h[4]++,d++;if(h[4]>=a)return!1;const R=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(R-c)<2*c&&en.foundPatternCross(h)}crossCheckVertical(n,s,a,c){const h=this.image,d=h.getHeight(),m=this.getCrossCheckStateCount();let E=n;for(;E>=0&&h.get(s,E);)m[2]++,E--;if(E<0)return NaN;for(;E>=0&&!h.get(s,E)&&m[1]<=a;)m[1]++,E--;if(E<0||m[1]>a)return NaN;for(;E>=0&&h.get(s,E)&&m[0]<=a;)m[0]++,E--;if(m[0]>a)return NaN;for(E=n+1;E<d&&h.get(s,E);)m[2]++,E++;if(E===d)return NaN;for(;E<d&&!h.get(s,E)&&m[3]<a;)m[3]++,E++;if(E===d||m[3]>=a)return NaN;for(;E<d&&h.get(s,E)&&m[4]<a;)m[4]++,E++;if(m[4]>=a)return NaN;const I=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(I-c)>=2*c?NaN:en.foundPatternCross(m)?en.centerFromEnd(m,E):NaN}crossCheckHorizontal(n,s,a,c){const h=this.image,d=h.getWidth(),m=this.getCrossCheckStateCount();let E=n;for(;E>=0&&h.get(E,s);)m[2]++,E--;if(E<0)return NaN;for(;E>=0&&!h.get(E,s)&&m[1]<=a;)m[1]++,E--;if(E<0||m[1]>a)return NaN;for(;E>=0&&h.get(E,s)&&m[0]<=a;)m[0]++,E--;if(m[0]>a)return NaN;for(E=n+1;E<d&&h.get(E,s);)m[2]++,E++;if(E===d)return NaN;for(;E<d&&!h.get(E,s)&&m[3]<a;)m[3]++,E++;if(E===d||m[3]>=a)return NaN;for(;E<d&&h.get(E,s)&&m[4]<a;)m[4]++,E++;if(m[4]>=a)return NaN;const I=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(I-c)>=c?NaN:en.foundPatternCross(m)?en.centerFromEnd(m,E):NaN}handlePossibleCenter(n,s,a,c){const h=n[0]+n[1]+n[2]+n[3]+n[4];let d=en.centerFromEnd(n,a),m=this.crossCheckVertical(s,Math.floor(d),n[2],h);if(!isNaN(m)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(m),n[2],h),!isNaN(d)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(d),n[2],h)))){const E=h/7;let I=!1;const R=this.possibleCenters;for(let P=0,k=R.length;P<k;P++){const z=R[P];if(z.aboutEquals(E,m,d)){R[P]=z.combineEstimate(m,d,E),I=!0;break}}if(!I){const P=new Kr(d,m,E);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=en.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,s=0;const a=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=en.CENTER_QUORUM&&(n++,s+=d.getEstimatedModuleSize());if(n<3)return!1;const c=s/a;let h=0;for(const d of this.possibleCenters)h+=Math.abs(d.getEstimatedModuleSize()-c);return h<=.05*s}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new le;const s=this.possibleCenters;let a;if(n>3){let c=0,h=0;for(const E of this.possibleCenters){const I=E.getEstimatedModuleSize();c+=I,h+=I*I}a=c/n;let d=Math.sqrt(h/n-a*a);s.sort((E,I)=>{const R=Math.abs(I.getEstimatedModuleSize()-a),P=Math.abs(E.getEstimatedModuleSize()-a);return R<P?-1:R>P?1:0});const m=Math.max(.2*a,d);for(let E=0;E<s.length&&s.length>3;E++){const I=s[E];Math.abs(I.getEstimatedModuleSize()-a)>m&&(s.splice(E,1),E--)}}if(s.length>3){let c=0;for(const h of s)c+=h.getEstimatedModuleSize();a=c/s.length,s.sort((h,d)=>{if(d.getCount()===h.getCount()){const m=Math.abs(d.getEstimatedModuleSize()-a),E=Math.abs(h.getEstimatedModuleSize()-a);return m<E?1:m>E?-1:0}else return d.getCount()-h.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}en.CENTER_QUORUM=2,en.MIN_SKIP=3,en.MAX_MODULES=57;class Fr{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(Le.NEED_RESULT_POINT_CALLBACK);const a=new en(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(a)}processFinderPatternInfo(n){const s=n.getTopLeft(),a=n.getTopRight(),c=n.getBottomLeft(),h=this.calculateModuleSize(s,a,c);if(h<1)throw new le("No pattern found in proccess finder.");const d=Fr.computeDimension(s,a,c,h),m=Xe.getProvisionalVersionForDimension(d),E=m.getDimensionForVersion()-7;let I=null;if(m.getAlignmentPatternCenters().length>0){const z=a.getX()-s.getX()+c.getX(),K=a.getY()-s.getY()+c.getY(),Z=1-3/E,ne=Math.floor(s.getX()+Z*(z-s.getX())),ce=Math.floor(s.getY()+Z*(K-s.getY()));for(let ve=4;ve<=16;ve<<=1)try{I=this.findAlignmentInRegion(h,ne,ce,ve);break}catch(Se){if(!(Se instanceof le))throw Se}}const R=Fr.createTransform(s,a,c,I,d),P=Fr.sampleGrid(this.image,R,d);let k;return I===null?k=[c,s,a]:k=[c,s,a,I],new rs(P,k)}static createTransform(n,s,a,c,h){const d=h-3.5;let m,E,I,R;return c!==null?(m=c.getX(),E=c.getY(),I=d-3,R=I):(m=s.getX()-n.getX()+a.getX(),E=s.getY()-n.getY()+a.getY(),I=d,R=d),ur.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,I,R,3.5,d,n.getX(),n.getY(),s.getX(),s.getY(),m,E,a.getX(),a.getY())}static sampleGrid(n,s,a){return cr.getInstance().sampleGridWithTransform(n,a,a,s)}static computeDimension(n,s,a,c){const h=Ze.round(Me.distance(n,s)/c),d=Ze.round(Me.distance(n,a)/c);let m=Math.floor((h+d)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new le("Dimensions could be not found.")}return m}calculateModuleSize(n,s,a){return(this.calculateModuleSizeOneWay(n,s)+this.calculateModuleSizeOneWay(n,a))/2}calculateModuleSizeOneWay(n,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(n,s,a,c){let h=this.sizeOfBlackWhiteBlackRun(n,s,a,c),d=1,m=n-(a-n);m<0?(d=n/(n-m),m=0):m>=this.image.getWidth()&&(d=(this.image.getWidth()-1-n)/(m-n),m=this.image.getWidth()-1);let E=Math.floor(s-(c-s)*d);return d=1,E<0?(d=s/(s-E),E=0):E>=this.image.getHeight()&&(d=(this.image.getHeight()-1-s)/(E-s),E=this.image.getHeight()-1),m=Math.floor(n+(m-n)*d),h+=this.sizeOfBlackWhiteBlackRun(n,s,m,E),h-1}sizeOfBlackWhiteBlackRun(n,s,a,c){const h=Math.abs(c-s)>Math.abs(a-n);if(h){let z=n;n=s,s=z,z=a,a=c,c=z}const d=Math.abs(a-n),m=Math.abs(c-s);let E=-d/2;const I=n<a?1:-1,R=s<c?1:-1;let P=0;const k=a+I;for(let z=n,K=s;z!==k;z+=I){const Z=h?K:z,ne=h?z:K;if(P===1===this.image.get(Z,ne)){if(P===2)return Ze.distance(z,K,n,s);P++}if(E+=m,E>0){if(K===c)break;K+=R,E-=d}}return P===2?Ze.distance(a+I,c,n,s):NaN}findAlignmentInRegion(n,s,a,c){const h=Math.floor(c*n),d=Math.max(0,s-h),m=Math.min(this.image.getWidth()-1,s+h);if(m-d<n*3)throw new le("Alignment top exceeds estimated module size.");const E=Math.max(0,a-h),I=Math.min(this.image.getHeight()-1,a+h);if(I-E<n*3)throw new le("Alignment bottom exceeds estimated module size.");return new Br(this.image,d,E,m-d,I-E,n,this.resultPointCallback).find()}}class vn{constructor(){this.decoder=new vi}getDecoder(){return this.decoder}decode(n,s){let a,c;if(s!=null&&s.get(Le.PURE_BARCODE)!==void 0){const E=vn.extractPureBits(n.getBlackMatrix());a=this.decoder.decodeBitMatrix(E,s),c=vn.NO_POINTS}else{const E=new Fr(n.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(E.getBits(),s),c=E.getPoints()}a.getOther()instanceof fo&&a.getOther().applyMirroredCorrection(c);const h=new Ge(a.getText(),a.getRawBytes(),void 0,c,be.QR_CODE,void 0),d=a.getByteSegments();d!==null&&h.putMetadata(nt.BYTE_SEGMENTS,d);const m=a.getECLevel();return m!==null&&h.putMetadata(nt.ERROR_CORRECTION_LEVEL,m),a.hasStructuredAppend()&&(h.putMetadata(nt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),h.putMetadata(nt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),h}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),a=n.getBottomRightOnBit();if(s===null||a===null)throw new le;const c=this.moduleSize(s,n);let h=s[1],d=a[1],m=s[0],E=a[0];if(m>=E||h>=d)throw new le;if(d-h!==E-m&&(E=m+(d-h),E>=n.getWidth()))throw new le;const I=Math.round((E-m+1)/c),R=Math.round((d-h+1)/c);if(I<=0||R<=0)throw new le;if(R!==I)throw new le;const P=Math.floor(c/2);h+=P,m+=P;const k=m+Math.floor((I-1)*c)-E;if(k>0){if(k>P)throw new le;m-=k}const z=h+Math.floor((R-1)*c)-d;if(z>0){if(z>P)throw new le;h-=z}const K=new Je(I,R);for(let Z=0;Z<R;Z++){const ne=h+Math.floor(Z*c);for(let ce=0;ce<I;ce++)n.get(m+Math.floor(ce*c),ne)&&K.set(ce,Z)}return K}static moduleSize(n,s){const a=s.getHeight(),c=s.getWidth();let h=n[0],d=n[1],m=!0,E=0;for(;h<c&&d<a;){if(m!==s.get(h,d)){if(++E===5)break;m=!m}h++,d++}if(h===c||d===a)throw new le;return(h-n[0])/7}}vn.NO_POINTS=new Array;class $e{PDF417Common(){}static getBitCountSum(n){return Ze.sum(n)}static toIntArray(n){if(n==null||!n.length)return $e.EMPTY_INT_ARRAY;const s=new Int32Array(n.length);let a=0;for(const c of n)s[a++]=c;return s}static getCodeword(n){const s=ge.binarySearch($e.SYMBOL_TABLE,n&262143);return s<0?-1:($e.CODEWORD_TABLE[s]-1)%$e.NUMBER_OF_CODEWORDS}}$e.NUMBER_OF_CODEWORDS=929,$e.MAX_CODEWORDS_IN_BARCODE=$e.NUMBER_OF_CODEWORDS-1,$e.MIN_ROWS_IN_BARCODE=3,$e.MAX_ROWS_IN_BARCODE=90,$e.MODULES_IN_CODEWORD=17,$e.MODULES_IN_STOP_PATTERN=18,$e.BARS_IN_MODULE=8,$e.EMPTY_INT_ARRAY=new Int32Array([]),$e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),$e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class cs{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class rt{static detectMultiple(n,s,a){let c=n.getBlackMatrix(),h=rt.detect(a,c);return h.length||(c=c.clone(),c.rotate180(),h=rt.detect(a,c)),new cs(c,h)}static detect(n,s){const a=new Array;let c=0,h=0,d=!1;for(;c<s.getHeight();){const m=rt.findVertices(s,c,h);if(m[0]==null&&m[3]==null){if(!d)break;d=!1,h=0;for(const E of a)E[1]!=null&&(c=Math.trunc(Math.max(c,E[1].getY()))),E[3]!=null&&(c=Math.max(c,Math.trunc(E[3].getY())));c+=rt.ROW_STEP;continue}if(d=!0,a.push(m),!n)break;m[2]!=null?(h=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(h=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return a}static findVertices(n,s,a){const c=n.getHeight(),h=n.getWidth(),d=new Array(8);return rt.copyToResult(d,rt.findRowsWithPattern(n,c,h,s,a,rt.START_PATTERN),rt.INDEXES_START_PATTERN),d[4]!=null&&(a=Math.trunc(d[4].getX()),s=Math.trunc(d[4].getY())),rt.copyToResult(d,rt.findRowsWithPattern(n,c,h,s,a,rt.STOP_PATTERN),rt.INDEXES_STOP_PATTERN),d}static copyToResult(n,s,a){for(let c=0;c<a.length;c++)n[a[c]]=s[c]}static findRowsWithPattern(n,s,a,c,h,d){const m=new Array(4);let E=!1;const I=new Int32Array(d.length);for(;c<s;c+=rt.ROW_STEP){let P=rt.findGuardPattern(n,h,c,a,!1,d,I);if(P!=null){for(;c>0;){const k=rt.findGuardPattern(n,h,--c,a,!1,d,I);if(k!=null)P=k;else{c++;break}}m[0]=new Me(P[0],c),m[1]=new Me(P[1],c),E=!0;break}}let R=c+1;if(E){let P=0,k=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;R<s;R++){const z=rt.findGuardPattern(n,k[0],R,a,!1,d,I);if(z!=null&&Math.abs(k[0]-z[0])<rt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-z[1])<rt.MAX_PATTERN_DRIFT)k=z,P=0;else{if(P>rt.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,m[2]=new Me(k[0],R),m[3]=new Me(k[1],R)}return R-c<rt.BARCODE_MIN_HEIGHT&&ge.fill(m,null),m}static findGuardPattern(n,s,a,c,h,d,m){ge.fillWithin(m,0,m.length,0);let E=s,I=0;for(;n.get(E,a)&&E>0&&I++<rt.MAX_PIXEL_DRIFT;)E--;let R=E,P=0,k=d.length;for(let z=h;R<c;R++)if(n.get(R,a)!==z)m[P]++;else{if(P===k-1){if(rt.patternMatchVariance(m,d,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return new Int32Array([E,R]);E+=m[0]+m[1],Y.arraycopy(m,2,m,0,P-1),m[P-1]=0,m[P]=0,P--}else P++;m[P]=1,z=!z}return P===k-1&&rt.patternMatchVariance(m,d,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE?new Int32Array([E,R-1]):null}static patternMatchVariance(n,s,a){let c=n.length,h=0,d=0;for(let I=0;I<c;I++)h+=n[I],d+=s[I];if(h<d)return 1/0;let m=h/d;a*=m;let E=0;for(let I=0;I<c;I++){let R=n[I],P=s[I]*m,k=R>P?R-P:P-R;if(k>a)return 1/0;E+=k}return E/h}}rt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),rt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),rt.MAX_AVG_VARIANCE=.42,rt.MAX_INDIVIDUAL_VARIANCE=.8,rt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),rt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),rt.MAX_PIXEL_DRIFT=3,rt.MAX_PATTERN_DRIFT=5,rt.SKIPPED_ROW_COUNT_MAX=25,rt.ROW_STEP=5,rt.BARCODE_MIN_HEIGHT=10;class Tn{constructor(n,s){if(s.length===0)throw new N;this.field=n;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),Y.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(n,s),this.coefficients[c]);return s}add(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,a=n.coefficients;if(s.length>a.length){let d=s;s=a,a=d}let c=new Int32Array(a.length),h=a.length-s.length;Y.arraycopy(a,0,c,0,h);for(let d=h;d<a.length;d++)c[d]=this.field.add(s[d-h],a[d]);return new Tn(this.field,c)}subtract(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Tn?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Tn(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=n.coefficients,h=c.length,d=new Int32Array(a+h-1);for(let m=0;m<a;m++){let E=s[m];for(let I=0;I<h;I++)d[m+I]=this.field.add(d[m+I],this.field.multiply(E,c[I]))}return new Tn(this.field,d)}negative(){let n=this.coefficients.length,s=new Int32Array(n);for(let a=0;a<n;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new Tn(this.field,s)}multiplyScalar(n){if(n===0)return new Tn(this.field,new Int32Array([0]));if(n===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],n);return new Tn(this.field,a)}multiplyByMonomial(n,s){if(n<0)throw new N;if(s===0)return new Tn(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+n);for(let h=0;h<a;h++)c[h]=this.field.multiply(this.coefficients[h],s);return new Tn(this.field,c)}toString(){let n=new j;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(n.append(" - "),a=-a):n.length()>0&&n.append(" + "),(s===0||a!==1)&&n.append(a),s!==0&&(s===1?n.append("x"):(n.append("x^"),n.append(s))))}return n.toString()}}class go{add(n,s){return(n+s)%this.modulus}subtract(n,s){return(this.modulus+n-s)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new N;return this.logTable[n]}inverse(n){if(n===0)throw new ns;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Wt extends go{constructor(n,s){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let a=1;for(let c=0;c<n;c++)this.expTable[c]=a,a=a*s%n;for(let c=0;c<n-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Tn(this,new Int32Array([0])),this.one=new Tn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new N;if(s===0)return this.zero;let a=new Int32Array(n+1);return a[0]=s,new Tn(this,a)}}Wt.PDF417_GF=new Wt($e.NUMBER_OF_CODEWORDS,3);class ia{constructor(){this.field=Wt.PDF417_GF}decode(n,s,a){let c=new Tn(this.field,n),h=new Int32Array(s),d=!1;for(let K=s;K>0;K--){let Z=c.evaluateAt(this.field.exp(K));h[s-K]=Z,Z!==0&&(d=!0)}if(!d)return 0;let m=this.field.getOne();if(a!=null)for(const K of a){let Z=this.field.exp(n.length-1-K),ne=new Tn(this.field,new Int32Array([this.field.subtract(0,Z),1]));m=m.multiply(ne)}let E=new Tn(this.field,h),I=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),E,s),R=I[0],P=I[1],k=this.findErrorLocations(R),z=this.findErrorMagnitudes(P,R,k);for(let K=0;K<k.length;K++){let Z=n.length-1-this.field.log(k[K]);if(Z<0)throw W.getChecksumInstance();n[Z]=this.field.subtract(n[Z],z[K])}return k.length}runEuclideanAlgorithm(n,s,a){if(n.getDegree()<s.getDegree()){let k=n;n=s,s=k}let c=n,h=s,d=this.field.getZero(),m=this.field.getOne();for(;h.getDegree()>=Math.round(a/2);){let k=c,z=d;if(c=h,d=m,c.isZero())throw W.getChecksumInstance();h=k;let K=this.field.getZero(),Z=c.getCoefficient(c.getDegree()),ne=this.field.inverse(Z);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let ce=h.getDegree()-c.getDegree(),ve=this.field.multiply(h.getCoefficient(h.getDegree()),ne);K=K.add(this.field.buildMonomial(ce,ve)),h=h.subtract(c.multiplyByMonomial(ce,ve))}m=K.multiply(d).subtract(z).negative()}let E=m.getCoefficient(0);if(E===0)throw W.getChecksumInstance();let I=this.field.inverse(E),R=m.multiply(I),P=h.multiply(I);return[R,P]}findErrorLocations(n){let s=n.getDegree(),a=new Int32Array(s),c=0;for(let h=1;h<this.field.getSize()&&c<s;h++)n.evaluateAt(h)===0&&(a[c]=this.field.inverse(h),c++);if(c!==s)throw W.getChecksumInstance();return a}findErrorMagnitudes(n,s,a){let c=s.getDegree(),h=new Int32Array(c);for(let I=1;I<=c;I++)h[c-I]=this.field.multiply(I,s.getCoefficient(I));let d=new Tn(this.field,h),m=a.length,E=new Int32Array(m);for(let I=0;I<m;I++){let R=this.field.inverse(a[I]),P=this.field.subtract(0,n.evaluateAt(R)),k=this.field.inverse(d.evaluateAt(R));E[I]=this.field.multiply(P,k)}return E}}class Ui{constructor(n,s,a,c,h){n instanceof Ui?this.constructor_2(n):this.constructor_1(n,s,a,c,h)}constructor_1(n,s,a,c,h){const d=s==null||a==null,m=c==null||h==null;if(d&&m)throw new le;d?(s=new Me(0,c.getY()),a=new Me(0,h.getY())):m&&(c=new Me(n.getWidth()-1,s.getY()),h=new Me(n.getWidth()-1,a.getY())),this.image=n,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),h.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,s){return n==null?s:s==null?n:new Ui(n.image,n.topLeft,n.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(n,s,a){let c=this.topLeft,h=this.bottomLeft,d=this.topRight,m=this.bottomRight;if(n>0){let E=a?this.topLeft:this.topRight,I=Math.trunc(E.getY()-n);I<0&&(I=0);let R=new Me(E.getX(),I);a?c=R:d=R}if(s>0){let E=a?this.bottomLeft:this.bottomRight,I=Math.trunc(E.getY()+s);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let R=new Me(E.getX(),I);a?h=R:m=R}return new Ui(this.image,c,h,d,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class hs{constructor(n,s,a,c){this.columnCount=n,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Yr{constructor(){this.buffer=""}static form(n,s){let a=-1;function c(d,m,E,I,R,P){if(d==="%%")return"%";if(s[++a]===void 0)return;d=I?parseInt(I.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,z;switch(P){case"s":z=s[a];break;case"c":z=s[a][0];break;case"f":z=parseFloat(s[a]).toFixed(d);break;case"p":z=parseFloat(s[a]).toPrecision(d);break;case"e":z=parseFloat(s[a]).toExponential(d);break;case"x":z=parseInt(s[a]).toString(k||16);break;case"d":z=parseFloat(parseInt(s[a],k||10).toPrecision(d)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(k);let K=parseInt(E),Z=E&&E[0]+""=="0"?"0":" ";for(;z.length<K;)z=m!==void 0?z+Z:Z+z;return z}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,c)}format(n,...s){this.buffer+=Yr.form(n,s)}toString(){return this.buffer}}class Vr{constructor(n){this.boundingBox=new Ui(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let s=this.getCodeword(n);if(s!=null)return s;for(let a=1;a<Vr.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(n)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(n)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,s){this.codewords[this.imageRowToCodewordIndex(n)]=s}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Yr;let s=0;for(const a of this.codewords){if(a==null){n.format("%3d:    |   %n",s++);continue}n.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return n.toString()}}Vr.MAX_NEARBY_DISTANCE=5;class Ur{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let s=this.values.get(n);s==null&&(s=0),s++,this.values.set(n,s)}getValue(){let n=-1,s=new Array;for(const[a,c]of this.values.entries()){const h={getKey:()=>a,getValue:()=>c};h.getValue()>n?(n=h.getValue(),s=[],s.push(h.getKey())):h.getValue()===n&&s.push(h.getKey())}return $e.toIntArray(s)}getConfidence(n){return this.values.get(n)}}class ui extends Vr{constructor(n,s){super(n),this._isLeft=s}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=-1,I=1,R=0;for(let P=d;P<m;P++){if(s[P]==null)continue;let k=s[P],z=k.getRowNumber()-E;if(z===0)R++;else if(z===1)I=Math.max(I,R),R=1,E=k.getRowNumber();else if(z<0||k.getRowNumber()>=n.getRowCount()||z>P)s[P]=null;else{let K;I>2?K=(I-2)*z:K=z;let Z=K>=P;for(let ne=1;ne<=K&&!Z;ne++)Z=s[P-ne]!=null;Z?s[P]=null:(E=k.getRowNumber(),R=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let s=new Int32Array(n.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(n){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),E=-1;for(let I=h;I<d;I++){if(m[I]==null)continue;let R=m[I];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-E;P===0||(P===1?E=R.getRowNumber():R.getRowNumber()>=n.getRowCount()?m[I]=null:E=R.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),s=new Ur,a=new Ur,c=new Ur,h=new Ur;for(let m of n){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let E=m.getValue()%30,I=m.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:a.setValue(E*3+1);break;case 1:h.setValue(E/3),c.setValue(E%3);break;case 2:s.setValue(E+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||h.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<$e.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>$e.MAX_ROWS_IN_BARCODE)return null;let d=new hs(s.getValue()[0],a.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(n,d),d}removeIncorrectCodewords(n,s){for(let a=0;a<n.length;a++){let c=n[a];if(n[a]==null)continue;let h=c.getValue()%30,d=c.getRowNumber();if(d>s.getRowCount()){n[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:h*3+1!==s.getRowCountUpperPart()&&(n[a]=null);break;case 1:(Math.trunc(h/3)!==s.getErrorCorrectionLevel()||h%3!==s.getRowCountLowerPart())&&(n[a]=null);break;case 2:h+1!==s.getColumnCount()&&(n[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class fs{constructor(n,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=$e.MAX_CODEWORDS_IN_BARCODE,s;do s=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<n.length;a++)if(n[a]!=null&&s[a]!=null&&n[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[a];h!=null&&(h.setRowNumber(n[a].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),h=0;for(let d=this.barcodeColumnCount+1;d>0&&h<this.ADJUST_ROW_NUMBER_SKIP;d--){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(h=fs.adjustRowNumberIfValid(c,h,m),m.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),h=0;for(let d=1;d<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;d++){let m=this.detectionResultColumns[d].getCodewords()[a];m!=null&&(h=fs.adjustRowNumberIfValid(c,h,m),m.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(n)?(a.setRowNumber(n),s=0):++s),s}adjustRowNumbers(n,s,a){if(!this.detectionResultColumns[n-1])return;let c=a[s],h=this.detectionResultColumns[n-1].getCodewords(),d=h;this.detectionResultColumns[n+1]!=null&&(d=this.detectionResultColumns[n+1].getCodewords());let m=new Array(14);m[2]=h[s],m[3]=d[s],s>0&&(m[0]=a[s-1],m[4]=h[s-1],m[5]=d[s-1]),s>1&&(m[8]=a[s-2],m[10]=h[s-2],m[11]=d[s-2]),s<a.length-1&&(m[1]=a[s+1],m[6]=h[s+1],m[7]=d[s+1]),s<a.length-2&&(m[9]=a[s+2],m[12]=h[s+2],m[13]=d[s+2]);for(let E of m)if(fs.adjustRowNumber(c,E))return}static adjustRowNumber(n,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===n.getBucket()?(n.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,s){this.detectionResultColumns[n]=s}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Yr;for(let a=0;a<n.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[a];if(h==null){s.format("    |   ");continue}s.format(" %3d|%3d",h.getRowNumber(),h.getValue())}s.format("%n")}return s.toString()}}class zi{constructor(n,s,a,c){this.rowNumber=zi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==zi.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}zi.BARCODE_ROW_UNKNOWN=-1;class sn{static initialize(){for(let n=0;n<$e.SYMBOL_TABLE.length;n++){let s=$e.SYMBOL_TABLE[n],a=s&1;for(let c=0;c<$e.BARS_IN_MODULE;c++){let h=0;for(;(s&1)===a;)h+=1,s>>=1;a=s&1,sn.RATIOS_TABLE[n]||(sn.RATIOS_TABLE[n]=new Array($e.BARS_IN_MODULE)),sn.RATIOS_TABLE[n][$e.BARS_IN_MODULE-c-1]=Math.fround(h/$e.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let s=sn.getDecodedCodewordValue(sn.sampleBitCounts(n));return s!==-1?s:sn.getClosestDecodedValue(n)}static sampleBitCounts(n){let s=Ze.sum(n),a=new Int32Array($e.BARS_IN_MODULE),c=0,h=0;for(let d=0;d<$e.MODULES_IN_CODEWORD;d++){let m=s/(2*$e.MODULES_IN_CODEWORD)+d*s/$e.MODULES_IN_CODEWORD;h+n[c]<=m&&(h+=n[c],c++),a[c]++}return a}static getDecodedCodewordValue(n){let s=sn.getBitValue(n);return $e.getCodeword(s)===-1?-1:s}static getBitValue(n){let s=0;for(let a=0;a<n.length;a++)for(let c=0;c<n[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(n){let s=Ze.sum(n),a=new Array($e.BARS_IN_MODULE);if(s>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(n[d]/s);let c=Jt.MAX_VALUE,h=-1;this.bSymbolTableReady||sn.initialize();for(let d=0;d<sn.RATIOS_TABLE.length;d++){let m=0,E=sn.RATIOS_TABLE[d];for(let I=0;I<$e.BARS_IN_MODULE;I++){let R=Math.fround(E[I]-a[I]);if(m+=Math.fround(R*R),m>=c)break}m<c&&(c=m,h=$e.SYMBOL_TABLE[d])}return h}}sn.bSymbolTableReady=!1,sn.RATIOS_TABLE=new Array($e.SYMBOL_TABLE.length).map(O=>new Array($e.BARS_IN_MODULE));class Fs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Vs{static parseLong(n,s=void 0){return parseInt(n,s)}}class Cr extends _{}Cr.kind="NullPointerException";class po{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,s,a){if(n==null)throw new Cr;if(s<0||s>n.length||a<0||s+a>n.length||s+a<0)throw new G;if(a===0)return;for(let c=0;c<a;c++)this.write(n[s+c])}flush(){}close(){}}class ji extends _{}class ja extends po{constructor(n=32){if(super(),this.count=0,n<0)throw new N("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let a=this.buf.length<<1;if(a-n<0&&(a=n),a<0){if(n<0)throw new ji;a=ie.MAX_VALUE}this.buf=ge.copyOfUint8Array(this.buf,a)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,s,a){if(s<0||s>n.length||a<0||s+a-n.length>0)throw new G;this.ensureCapacity(this.count+a),Y.arraycopy(n,s,this.buf,this.count,a),this.count+=a}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ge.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Rt;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Rt||(Rt={}));function ci(){if(typeof window<"u")return window.BigInt||null;if(typeof Nc<"u")return Nc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ds;function on(O){if(typeof ds>"u"&&(ds=ci()),ds===null)throw new Error("BigInt is not supported!");return ds(O)}function Ti(){let O=[];O[0]=on(1);let n=on(900);O[1]=n;for(let s=2;s<16;s++)O[s]=O[s-1]*n;return O}class ue{static decode(n,s){let a=new j(""),c=B.ISO8859_1;a.enableDecoding(c);let h=1,d=n[h++],m=new Fs;for(;h<n[0];){switch(d){case ue.TEXT_COMPACTION_MODE_LATCH:h=ue.textCompaction(n,h,a);break;case ue.BYTE_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:h=ue.byteCompaction(d,n,c,h,a);break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[h++]);break;case ue.NUMERIC_COMPACTION_MODE_LATCH:h=ue.numericCompaction(n,h,a);break;case ue.ECI_CHARSET:B.getCharacterSetECIByValue(n[h++]);break;case ue.ECI_GENERAL_PURPOSE:h+=2;break;case ue.ECI_USER_DEFINED:h++;break;case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ue.decodeMacroBlock(n,h,m);break;case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:throw new V;default:h--,h=ue.textCompaction(n,h,a);break}if(h<n.length)d=n[h++];else throw V.getFormatInstance()}if(a.length()===0)throw V.getFormatInstance();let E=new Bt(null,a.toString(),null,s);return E.setOther(m),E}static decodeMacroBlock(n,s,a){if(s+ue.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw V.getFormatInstance();let c=new Int32Array(ue.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ue.NUMBER_OF_SEQUENCE_CODEWORDS;m++,s++)c[m]=n[s];a.setSegmentIndex(ie.parseInt(ue.decodeBase900toBase10(c,ue.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new j;s=ue.textCompaction(n,s,h),a.setFileId(h.toString());let d=-1;for(n[s]===ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=s+1);s<n[0];)switch(n[s]){case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,n[s]){case ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new j;s=ue.textCompaction(n,s+1,m),a.setFileName(m.toString());break;case ue.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let E=new j;s=ue.textCompaction(n,s+1,E),a.setSender(E.toString());break;case ue.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new j;s=ue.textCompaction(n,s+1,I),a.setAddressee(I.toString());break;case ue.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new j;s=ue.numericCompaction(n,s+1,R),a.setSegmentCount(ie.parseInt(R.toString()));break;case ue.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new j;s=ue.numericCompaction(n,s+1,P),a.setTimestamp(Vs.parseLong(P.toString()));break;case ue.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new j;s=ue.numericCompaction(n,s+1,k),a.setChecksum(ie.parseInt(k.toString()));break;case ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new j;s=ue.numericCompaction(n,s+1,z),a.setFileSize(Vs.parseLong(z.toString()));break;default:throw V.getFormatInstance()}break;case ue.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(d!==-1){let m=s-d;a.isLastSegment()&&m--,a.setOptionalData(ge.copyOfRange(n,d,d+m))}return s}static textCompaction(n,s,a){let c=new Int32Array((n[0]-s)*2),h=new Int32Array((n[0]-s)*2),d=0,m=!1;for(;s<n[0]&&!m;){let E=n[s++];if(E<ue.TEXT_COMPACTION_MODE_LATCH)c[d]=E/30,c[d+1]=E%30,d+=2;else switch(E){case ue.TEXT_COMPACTION_MODE_LATCH:c[d++]=ue.TEXT_COMPACTION_MODE_LATCH;break;case ue.BYTE_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.NUMERIC_COMPACTION_MODE_LATCH:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:s--,m=!0;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,E=n[s++],h[d]=E,d++;break}}return ue.decodeTextCompaction(c,h,d,a),s}static decodeTextCompaction(n,s,a,c){let h=Rt.ALPHA,d=Rt.ALPHA,m=0;for(;m<a;){let E=n[m],I="";switch(h){case Rt.ALPHA:if(E<26)I=String.fromCharCode(65+E);else switch(E){case 26:I=" ";break;case ue.LL:h=Rt.LOWER;break;case ue.ML:h=Rt.MIXED;break;case ue.PS:d=h,h=Rt.PUNCT_SHIFT;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[m]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Rt.ALPHA;break}break;case Rt.LOWER:if(E<26)I=String.fromCharCode(97+E);else switch(E){case 26:I=" ";break;case ue.AS:d=h,h=Rt.ALPHA_SHIFT;break;case ue.ML:h=Rt.MIXED;break;case ue.PS:d=h,h=Rt.PUNCT_SHIFT;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[m]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Rt.ALPHA;break}break;case Rt.MIXED:if(E<ue.PL)I=ue.MIXED_CHARS[E];else switch(E){case ue.PL:h=Rt.PUNCT;break;case 26:I=" ";break;case ue.LL:h=Rt.LOWER;break;case ue.AL:h=Rt.ALPHA;break;case ue.PS:d=h,h=Rt.PUNCT_SHIFT;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[m]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Rt.ALPHA;break}break;case Rt.PUNCT:if(E<ue.PAL)I=ue.PUNCT_CHARS[E];else switch(E){case ue.PAL:h=Rt.ALPHA;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[m]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Rt.ALPHA;break}break;case Rt.ALPHA_SHIFT:if(h=d,E<26)I=String.fromCharCode(65+E);else switch(E){case 26:I=" ";break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Rt.ALPHA;break}break;case Rt.PUNCT_SHIFT:if(h=d,E<ue.PAL)I=ue.PUNCT_CHARS[E];else switch(E){case ue.PAL:h=Rt.ALPHA;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[m]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Rt.ALPHA;break}break}I!==""&&c.append(I),m++}}static byteCompaction(n,s,a,c,h){let d=new ja,m=0,E=0,I=!1;switch(n){case ue.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=s[c++];for(;c<s[0]&&!I;)switch(R[m++]=P,E=900*E+P,P=s[c++],P){case ue.TEXT_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH:case ue.NUMERIC_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:c--,I=!0;break;default:if(m%5===0&&m>0){for(let k=0;k<6;++k)d.write(Number(on(E)>>on(8*(5-k))));E=0,m=0}break}c===s[0]&&P<ue.TEXT_COMPACTION_MODE_LATCH&&(R[m++]=P);for(let k=0;k<m;k++)d.write(R[k]);break;case ue.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!I;){let k=s[c++];if(k<ue.TEXT_COMPACTION_MODE_LATCH)m++,E=900*E+k;else switch(k){case ue.TEXT_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH:case ue.NUMERIC_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:c--,I=!0;break}if(m%5===0&&m>0){for(let z=0;z<6;++z)d.write(Number(on(E)>>on(8*(5-z))));E=0,m=0}}break}return h.append(X.decode(d.toByteArray(),a)),c}static numericCompaction(n,s,a){let c=0,h=!1,d=new Int32Array(ue.MAX_NUMERIC_CODEWORDS);for(;s<n[0]&&!h;){let m=n[s++];if(s===n[0]&&(h=!0),m<ue.TEXT_COMPACTION_MODE_LATCH)d[c]=m,c++;else switch(m){case ue.TEXT_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:s--,h=!0;break}(c%ue.MAX_NUMERIC_CODEWORDS===0||m===ue.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(a.append(ue.decodeBase900toBase10(d,c)),c=0)}return s}static decodeBase900toBase10(n,s){let a=on(0);for(let h=0;h<s;h++)a+=ue.EXP900[s-h-1]*on(n[h]);let c=a.toString();if(c.charAt(0)!=="1")throw new V;return c.substring(1)}}ue.TEXT_COMPACTION_MODE_LATCH=900,ue.BYTE_COMPACTION_MODE_LATCH=901,ue.NUMERIC_COMPACTION_MODE_LATCH=902,ue.BYTE_COMPACTION_MODE_LATCH_6=924,ue.ECI_USER_DEFINED=925,ue.ECI_GENERAL_PURPOSE=926,ue.ECI_CHARSET=927,ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ue.MACRO_PDF417_TERMINATOR=922,ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ue.MAX_NUMERIC_CODEWORDS=15,ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ue.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ue.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ue.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ue.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ue.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ue.PL=25,ue.LL=27,ue.AS=27,ue.ML=28,ue.AL=28,ue.PS=29,ue.PAL=29,ue.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ue.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ue.EXP900=ci()?Ti():[],ue.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ut{constructor(){}static decode(n,s,a,c,h,d,m){let E=new Ui(n,s,a,c,h),I=null,R=null,P;for(let K=!0;;K=!1){if(s!=null&&(I=ut.getRowIndicatorColumn(n,E,s,!0,d,m)),c!=null&&(R=ut.getRowIndicatorColumn(n,E,c,!1,d,m)),P=ut.merge(I,R),P==null)throw le.getNotFoundInstance();let Z=P.getBoundingBox();if(K&&Z!=null&&(Z.getMinY()<E.getMinY()||Z.getMaxY()>E.getMaxY()))E=Z;else break}P.setBoundingBox(E);let k=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,I),P.setDetectionResultColumn(k,R);let z=I!=null;for(let K=1;K<=k;K++){let Z=z?K:k-K;if(P.getDetectionResultColumn(Z)!==void 0)continue;let ne;Z===0||Z===k?ne=new ui(E,Z===0):ne=new Vr(E),P.setDetectionResultColumn(Z,ne);let ce=-1,ve=ce;for(let Se=E.getMinY();Se<=E.getMaxY();Se++){if(ce=ut.getStartColumn(P,Z,Se,z),ce<0||ce>E.getMaxX()){if(ve===-1)continue;ce=ve}let _e=ut.detectCodeword(n,E.getMinX(),E.getMaxX(),z,ce,Se,d,m);_e!=null&&(ne.setCodeword(Se,_e),ve=ce,d=Math.min(d,_e.getWidth()),m=Math.max(m,_e.getWidth()))}}return ut.createDecoderResult(P)}static merge(n,s){if(n==null&&s==null)return null;let a=ut.getBarcodeMetadata(n,s);if(a==null)return null;let c=Ui.merge(ut.adjustBoundingBox(n),ut.adjustBoundingBox(s));return new fs(a,c)}static adjustBoundingBox(n){if(n==null)return null;let s=n.getRowHeights();if(s==null)return null;let a=ut.getMax(s),c=0;for(let m of s)if(c+=a-m,m>0)break;let h=n.getCodewords();for(let m=0;c>0&&h[m]==null;m++)c--;let d=0;for(let m=s.length-1;m>=0&&(d+=a-s[m],!(s[m]>0));m--);for(let m=h.length-1;d>0&&h[m]==null;m--)d--;return n.getBoundingBox().addMissingRows(c,d,n.isLeft())}static getMax(n){let s=-1;for(let a of n)s=Math.max(s,a);return s}static getBarcodeMetadata(n,s){let a;if(n==null||(a=n.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(n,s,a,c,h,d){let m=new ui(s,c);for(let E=0;E<2;E++){let I=E===0?1:-1,R=Math.trunc(Math.trunc(a.getX()));for(let P=Math.trunc(Math.trunc(a.getY()));P<=s.getMaxY()&&P>=s.getMinY();P+=I){let k=ut.detectCodeword(n,0,n.getWidth(),c,R,P,h,d);k!=null&&(m.setCodeword(P,k),c?R=k.getStartX():R=k.getEndX())}}return m}static adjustCodewordCount(n,s){let a=s[0][1],c=a.getValue(),h=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-ut.getNumberOfECCodeWords(n.getBarcodeECLevel());if(c.length===0){if(h<1||h>$e.MAX_CODEWORDS_IN_BARCODE)throw le.getNotFoundInstance();a.setValue(h)}else c[0]!==h&&a.setValue(h)}static createDecoderResult(n){let s=ut.createBarcodeMatrix(n);ut.adjustCodewordCount(n,s);let a=new Array,c=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),h=[],d=new Array;for(let E=0;E<n.getBarcodeRowCount();E++)for(let I=0;I<n.getBarcodeColumnCount();I++){let R=s[E][I+1].getValue(),P=E*n.getBarcodeColumnCount()+I;R.length===0?a.push(P):R.length===1?c[P]=R[0]:(d.push(P),h.push(R))}let m=new Array(h.length);for(let E=0;E<m.length;E++)m[E]=h[E];return ut.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),c,$e.toIntArray(a),$e.toIntArray(d),m)}static createDecoderResultFromAmbiguousValues(n,s,a,c,h){let d=new Int32Array(c.length),m=100;for(;m-- >0;){for(let E=0;E<d.length;E++)s[c[E]]=h[E][d[E]];try{return ut.decodeCodewords(s,n,a)}catch(E){if(!(E instanceof W))throw E}if(d.length===0)throw W.getChecksumInstance();for(let E=0;E<d.length;E++)if(d[E]<h[E].length-1){d[E]++;break}else if(d[E]=0,E===d.length-1)throw W.getChecksumInstance()}throw W.getChecksumInstance()}static createBarcodeMatrix(n){let s=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let h=0;h<s[c].length;h++)s[c][h]=new Ur;let a=0;for(let c of n.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let d=h.getRowNumber();if(d>=0){if(d>=s.length)continue;s[d][a].setValue(h.getValue())}}}a++}return s}static isValidBarcodeColumn(n,s){return s>=0&&s<=n.getBarcodeColumnCount()+1}static getStartColumn(n,s,a,c){let h=c?1:-1,d=null;if(ut.isValidBarcodeColumn(n,s-h)&&(d=n.getDetectionResultColumn(s-h).getCodeword(a)),d!=null)return c?d.getEndX():d.getStartX();if(d=n.getDetectionResultColumn(s).getCodewordNearby(a),d!=null)return c?d.getStartX():d.getEndX();if(ut.isValidBarcodeColumn(n,s-h)&&(d=n.getDetectionResultColumn(s-h).getCodewordNearby(a)),d!=null)return c?d.getEndX():d.getStartX();let m=0;for(;ut.isValidBarcodeColumn(n,s-h);){s-=h;for(let E of n.getDetectionResultColumn(s).getCodewords())if(E!=null)return(c?E.getEndX():E.getStartX())+h*m*(E.getEndX()-E.getStartX());m++}return c?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,s,a,c,h,d,m,E){h=ut.adjustCodewordStartColumn(n,s,a,c,h,d);let I=ut.getModuleBitCount(n,s,a,c,h,d);if(I==null)return null;let R,P=Ze.sum(I);if(c)R=h+P;else{for(let K=0;K<I.length/2;K++){let Z=I[K];I[K]=I[I.length-1-K],I[I.length-1-K]=Z}R=h,h=R-P}if(!ut.checkCodewordSkew(P,m,E))return null;let k=sn.getDecodedValue(I),z=$e.getCodeword(k);return z===-1?null:new zi(h,R,ut.getCodewordBucketNumber(k),z)}static getModuleBitCount(n,s,a,c,h,d){let m=h,E=new Int32Array(8),I=0,R=c?1:-1,P=c;for(;(c?m<a:m>=s)&&I<E.length;)n.get(m,d)===P?(E[I]++,m+=R):(I++,P=!P);return I===E.length||m===(c?a:s)&&I===E.length-1?E:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,s,a,c,h,d){let m=h,E=c?-1:1;for(let I=0;I<2;I++){for(;(c?m>=s:m<a)&&c===n.get(m,d);){if(Math.abs(h-m)>ut.CODEWORD_SKEW_SIZE)return h;m+=E}E=-E,c=!c}return m}static checkCodewordSkew(n,s,a){return s-ut.CODEWORD_SKEW_SIZE<=n&&n<=a+ut.CODEWORD_SKEW_SIZE}static decodeCodewords(n,s,a){if(n.length===0)throw V.getFormatInstance();let c=1<<s+1,h=ut.correctErrors(n,a,c);ut.verifyCodewordCount(n,c);let d=ue.decode(n,""+s);return d.setErrorsCorrected(h),d.setErasures(a.length),d}static correctErrors(n,s,a){if(s!=null&&s.length>a/2+ut.MAX_ERRORS||a<0||a>ut.MAX_EC_CODEWORDS)throw W.getChecksumInstance();return ut.errorCorrection.decode(n,a,s)}static verifyCodewordCount(n,s){if(n.length<4)throw V.getFormatInstance();let a=n[0];if(a>n.length)throw V.getFormatInstance();if(a===0)if(s<n.length)n[0]=n.length-s;else throw V.getFormatInstance()}static getBitCountForCodeword(n){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((n&1)!==a&&(a=n&1,c--,c<0));)s[c]++,n>>=1;return s}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return ut.getCodewordBucketNumber(ut.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let s=new Yr;for(let a=0;a<n.length;a++){s.format("Row %2d: ",a);for(let c=0;c<n[a].length;c++){let h=n[a][c];h.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}s.format("%n")}return s.toString()}}ut.CODEWORD_SKEW_SIZE=2,ut.MAX_ERRORS=3,ut.MAX_EC_CODEWORDS=512,ut.errorCorrection=new ia;class dn{decode(n,s=null){let a=dn.decode(n,s,!1);if(a==null||a.length===0||a[0]==null)throw le.getNotFoundInstance();return a[0]}decodeMultiple(n,s=null){try{return dn.decode(n,s,!0)}catch(a){throw a instanceof V||a instanceof W?le.getNotFoundInstance():a}}static decode(n,s,a){const c=new Array,h=rt.detectMultiple(n,s,a);for(const d of h.getPoints()){const m=ut.decode(h.getBits(),d[4],d[5],d[6],d[7],dn.getMinCodewordWidth(d),dn.getMaxCodewordWidth(d)),E=new Ge(m.getText(),m.getRawBytes(),void 0,d,be.PDF_417);E.putMetadata(nt.ERROR_CORRECTION_LEVEL,m.getECLevel());const I=m.getOther();I!=null&&E.putMetadata(nt.PDF417_EXTRA_METADATA,I),c.push(E)}return c.map(d=>d)}static getMaxWidth(n,s){return n==null||s==null?0:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMinWidth(n,s){return n==null||s==null?ie.MAX_VALUE:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(dn.getMaxWidth(n[0],n[4]),dn.getMaxWidth(n[6],n[2])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN),Math.max(dn.getMaxWidth(n[1],n[5]),dn.getMaxWidth(n[7],n[3])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(dn.getMinWidth(n[0],n[4]),dn.getMinWidth(n[6],n[2])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN),Math.min(dn.getMinWidth(n[1],n[5]),dn.getMinWidth(n[7],n[3])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hi extends _{}Hi.kind="ReaderException";class Us{constructor(n,s){this.verbose=n===!0,s&&this.setHints(s)}decode(n,s){return s&&this.setHints(s),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const s=!o(n)&&n.get(Le.TRY_HARDER)===!0,a=o(n)?null:n.get(Le.POSSIBLE_FORMATS),c=new Array;if(!o(a)){const h=a.some(d=>d===be.UPC_A||d===be.UPC_E||d===be.EAN_13||d===be.EAN_8||d===be.CODABAR||d===be.CODE_39||d===be.CODE_93||d===be.CODE_128||d===be.ITF||d===be.RSS_14||d===be.RSS_EXPANDED);h&&!s&&c.push(new Ii(n,this.verbose)),a.includes(be.QR_CODE)&&c.push(new vn),a.includes(be.DATA_MATRIX)&&c.push(new nr),a.includes(be.AZTEC)&&c.push(new li),a.includes(be.PDF_417)&&c.push(new dn),h&&s&&c.push(new Ii(n,this.verbose))}c.length===0&&(s||c.push(new Ii(n,this.verbose)),c.push(new vn),c.push(new nr),c.push(new li),c.push(new dn),s&&c.push(new Ii(n,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Hi("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(n,this.hints)}catch(a){if(a instanceof Hi)continue}throw new le("No MultiFormat Readers were able to detect the code.")}}class zr extends tt{constructor(n=null,s=500){const a=new Us;a.setHints(n),super(a,s)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class zs extends tt{constructor(n=500){super(new dn,n)}}class sa extends tt{constructor(n=500){super(new vn,n)}}var mo;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(mo||(mo={}));var gn=mo;class gs{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new On(n,Int32Array.from([1])))}buildGenerator(n){const s=this.cachedGenerators;if(n>=s.length){let a=s[s.length-1];const c=this.field;for(let h=s.length;h<=n;h++){const d=a.multiply(new On(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));s.push(d),a=d}}return s[n]}encode(n,s){if(s===0)throw new N("No error correction bytes");const a=n.length-s;if(a<=0)throw new N("No data bytes provided");const c=this.buildGenerator(s),h=new Int32Array(a);Y.arraycopy(n,0,h,0,a);let d=new On(this.field,h);d=d.multiplyByMonomial(s,1);const E=d.divide(c)[1].getCoefficients(),I=s-E.length;for(let R=0;R<I;R++)n[a+R]=0;Y.arraycopy(E,0,n,a+I,E.length)}}class xt{constructor(){}static applyMaskPenaltyRule1(n){return xt.applyMaskPenaltyRule1Internal(n,!0)+xt.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let s=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let d=0;d<h-1;d++){const m=a[d];for(let E=0;E<c-1;E++){const I=m[E];I===m[E+1]&&I===a[d+1][E]&&I===a[d+1][E+1]&&s++}}return xt.N2*s}static applyMaskPenaltyRule3(n){let s=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let d=0;d<h;d++)for(let m=0;m<c;m++){const E=a[d];m+6<c&&E[m]===1&&E[m+1]===0&&E[m+2]===1&&E[m+3]===1&&E[m+4]===1&&E[m+5]===0&&E[m+6]===1&&(xt.isWhiteHorizontal(E,m-4,m)||xt.isWhiteHorizontal(E,m+7,m+11))&&s++,d+6<h&&a[d][m]===1&&a[d+1][m]===0&&a[d+2][m]===1&&a[d+3][m]===1&&a[d+4][m]===1&&a[d+5][m]===0&&a[d+6][m]===1&&(xt.isWhiteVertical(a,m,d-4,d)||xt.isWhiteVertical(a,m,d+7,d+11))&&s++}return s*xt.N3}static isWhiteHorizontal(n,s,a){s=Math.max(s,0),a=Math.min(a,n.length);for(let c=s;c<a;c++)if(n[c]===1)return!1;return!0}static isWhiteVertical(n,s,a,c){a=Math.max(a,0),c=Math.min(c,n.length);for(let h=a;h<c;h++)if(n[h][s]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let s=0;const a=n.getArray(),c=n.getWidth(),h=n.getHeight();for(let E=0;E<h;E++){const I=a[E];for(let R=0;R<c;R++)I[R]===1&&s++}const d=n.getHeight()*n.getWidth();return Math.floor(Math.abs(s*2-d)*10/d)*xt.N4}static getDataMaskBit(n,s,a){let c,h;switch(n){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:h=a*s,c=(h&1)+h%3;break;case 6:h=a*s,c=(h&1)+h%3&1;break;case 7:h=a*s,c=h%3+(a+s&1)&1;break;default:throw new N("Invalid mask pattern: "+n)}return c===0}static applyMaskPenaltyRule1Internal(n,s){let a=0;const c=s?n.getHeight():n.getWidth(),h=s?n.getWidth():n.getHeight(),d=n.getArray();for(let m=0;m<c;m++){let E=0,I=-1;for(let R=0;R<h;R++){const P=s?d[m][R]:d[R][m];P===I?E++:(E>=5&&(a+=xt.N1+(E-5)),E=1,I=P)}E>=5&&(a+=xt.N1+(E-5))}return a}}xt.N1=3,xt.N2=3,xt.N3=40,xt.N4=10;class js{constructor(n,s){this.width=n,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(n);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(n,s){return this.bytes[s][n]}getArray(){return this.bytes}setNumber(n,s,a){this.bytes[s][n]=a}setBoolean(n,s,a){this.bytes[s][n]=a?1:0}clear(n){for(const s of this.bytes)ge.fill(s,n)}equals(n){if(!(n instanceof js))return!1;const s=n;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const h=this.bytes[a],d=s.bytes[a];for(let m=0,E=this.width;m<E;++m)if(h[m]!==d[m])return!1}return!0}toString(){const n=new j;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let h=0,d=this.width;h<d;++h)switch(c[h]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Si{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new j;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Si.NUM_MASK_PATTERNS}}Si.NUM_MASK_PATTERNS=8;class Nt extends _{}Nt.kind="WriterException";class p{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,s,a,c,h){p.clearMatrix(h),p.embedBasicPatterns(a,h),p.embedTypeInfo(s,c,h),p.maybeEmbedVersionInfo(a,h),p.embedDataBits(n,c,h)}static embedBasicPatterns(n,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(n,s),p.embedTimingPatterns(s)}static embedTypeInfo(n,s,a){const c=new we;p.makeTypeInfoBits(n,s,c);for(let h=0,d=c.getSize();h<d;++h){const m=c.get(c.getSize()-1-h),E=p.TYPE_INFO_COORDINATES[h],I=E[0],R=E[1];if(a.setBoolean(I,R,m),h<8){const P=a.getWidth()-h-1;a.setBoolean(P,8,m)}else{const k=a.getHeight()-7+(h-8);a.setBoolean(8,k,m)}}}static maybeEmbedVersionInfo(n,s){if(n.getVersionNumber()<7)return;const a=new we;p.makeVersionInfoBits(n,a);let c=17;for(let h=0;h<6;++h)for(let d=0;d<3;++d){const m=a.get(c);c--,s.setBoolean(h,s.getHeight()-11+d,m),s.setBoolean(s.getHeight()-11+d,h,m)}}static embedDataBits(n,s,a){let c=0,h=-1,d=a.getWidth()-1,m=a.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);m>=0&&m<a.getHeight();){for(let E=0;E<2;++E){const I=d-E;if(!p.isEmpty(a.get(I,m)))continue;let R;c<n.getSize()?(R=n.get(c),++c):R=!1,s!==255&&xt.getDataMaskBit(s,I,m)&&(R=!R),a.setBoolean(I,m,R)}m+=h}h=-h,m+=h,d-=2}if(c!==n.getSize())throw new Nt("Not all bits consumed: "+c+"/"+n.getSize())}static findMSBSet(n){return 32-ie.numberOfLeadingZeros(n)}static calculateBCHCode(n,s){if(s===0)throw new N("0 polynomial");const a=p.findMSBSet(s);for(n<<=a-1;p.findMSBSet(n)>=a;)n^=s<<p.findMSBSet(n)-a;return n}static makeTypeInfoBits(n,s,a){if(!Si.isValidMaskPattern(s))throw new Nt("Invalid mask pattern");const c=n.getBits()<<3|s;a.appendBits(c,5);const h=p.calculateBCHCode(c,p.TYPE_INFO_POLY);a.appendBits(h,10);const d=new we;if(d.appendBits(p.TYPE_INFO_MASK_PATTERN,15),a.xor(d),a.getSize()!==15)throw new Nt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(n,s){s.appendBits(n.getVersionNumber(),6);const a=p.calculateBCHCode(n.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new Nt("should not happen but we got: "+s.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let s=8;s<n.getWidth()-8;++s){const a=(s+1)%2;p.isEmpty(n.get(s,6))&&n.setNumber(s,6,a),p.isEmpty(n.get(6,s))&&n.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Nt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,s,a){for(let c=0;c<8;++c){if(!p.isEmpty(a.get(n+c,s)))throw new Nt;a.setNumber(n+c,s,0)}}static embedVerticalSeparationPattern(n,s,a){for(let c=0;c<7;++c){if(!p.isEmpty(a.get(n,s+c)))throw new Nt;a.setNumber(n,s+c,0)}}static embedPositionAdjustmentPattern(n,s,a){for(let c=0;c<5;++c){const h=p.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(n+d,s+c,h[d])}}static embedPositionDetectionPattern(n,s,a){for(let c=0;c<7;++c){const h=p.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(n+d,s+c,h[d])}}static embedPositionDetectionPatternsAndSeparators(n){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,n),p.embedPositionDetectionPattern(n.getWidth()-s,0,n),p.embedPositionDetectionPattern(0,n.getWidth()-s,n);const a=8;p.embedHorizontalSeparationPattern(0,a-1,n),p.embedHorizontalSeparationPattern(n.getWidth()-a,a-1,n),p.embedHorizontalSeparationPattern(0,n.getWidth()-a,n);const c=7;p.embedVerticalSeparationPattern(c,0,n),p.embedVerticalSeparationPattern(n.getHeight()-c-1,0,n),p.embedVerticalSeparationPattern(c,n.getHeight()-c,n)}static maybeEmbedPositionAdjustmentPatterns(n,s){if(n.getVersionNumber()<2)return;const a=n.getVersionNumber()-1,c=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let h=0,d=c.length;h!==d;h++){const m=c[h];if(m>=0)for(let E=0;E!==d;E++){const I=c[E];I>=0&&p.isEmpty(s.get(I,m))&&p.embedPositionAdjustmentPattern(I-2,m-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(n,s){this.dataBytes=n,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class b{constructor(){}static calculateMaskPenalty(n){return xt.applyMaskPenaltyRule1(n)+xt.applyMaskPenaltyRule2(n)+xt.applyMaskPenaltyRule3(n)+xt.applyMaskPenaltyRule4(n)}static encode(n,s,a=null){let c=b.DEFAULT_BYTE_MODE_ENCODING;const h=a!==null&&a.get(gn.CHARACTER_SET)!==void 0;h&&(c=a.get(gn.CHARACTER_SET).toString());const d=this.chooseMode(n,c),m=new we;if(d===Ye.BYTE&&(h||b.DEFAULT_BYTE_MODE_ENCODING!==c)){const Se=B.getCharacterSetECIByName(c);Se!==void 0&&this.appendECI(Se,m)}this.appendModeInfo(d,m);const E=new we;this.appendBytes(n,d,E,c);let I;if(a!==null&&a.get(gn.QR_VERSION)!==void 0){const Se=Number.parseInt(a.get(gn.QR_VERSION).toString(),10);I=Xe.getVersionForNumber(Se);const _e=this.calculateBitsNeeded(d,m,E,I);if(!this.willFit(_e,I,s))throw new Nt("Data too big for requested version")}else I=this.recommendVersion(s,d,m,E);const R=new we;R.appendBitArray(m);const P=d===Ye.BYTE?E.getSizeInBytes():n.length;this.appendLengthInfo(P,I,d,R),R.appendBitArray(E);const k=I.getECBlocksForLevel(s),z=I.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(z,R);const K=this.interleaveWithECBytes(R,I.getTotalCodewords(),z,k.getNumBlocks()),Z=new Si;Z.setECLevel(s),Z.setMode(d),Z.setVersion(I);const ne=I.getDimensionForVersion(),ce=new js(ne,ne),ve=this.chooseMaskPattern(K,s,I,ce);return Z.setMaskPattern(ve),p.buildMatrix(K,s,I,ve,ce),Z.setMatrix(ce),Z}static recommendVersion(n,s,a,c){const h=this.calculateBitsNeeded(s,a,c,Xe.getVersionForNumber(1)),d=this.chooseVersion(h,n),m=this.calculateBitsNeeded(s,a,c,d);return this.chooseVersion(m,n)}static calculateBitsNeeded(n,s,a,c){return s.getSize()+n.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(n){return n<b.ALPHANUMERIC_TABLE.length?b.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,s=null){if(B.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(n))return Ye.KANJI;let a=!1,c=!1;for(let h=0,d=n.length;h<d;++h){const m=n.charAt(h);if(b.isDigit(m))a=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Ye.BYTE}return c?Ye.ALPHANUMERIC:a?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(n){let s;try{s=X.encode(n,B.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const h=s[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(n,s,a,c){let h=Number.MAX_SAFE_INTEGER,d=-1;for(let m=0;m<Si.NUM_MASK_PATTERNS;m++){p.buildMatrix(n,s,a,m,c);let E=this.calculateMaskPenalty(c);E<h&&(h=E,d=m)}return d}static chooseVersion(n,s){for(let a=1;a<=40;a++){const c=Xe.getVersionForNumber(a);if(b.willFit(n,c,s))return c}throw new Nt("Data too big")}static willFit(n,s,a){const c=s.getTotalCodewords(),d=s.getECBlocksForLevel(a).getTotalECCodewords(),m=c-d,E=(n+7)/8;return m>=E}static terminateBits(n,s){const a=n*8;if(s.getSize()>a)throw new Nt("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let d=0;d<4&&s.getSize()<a;++d)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let d=c;d<8;d++)s.appendBit(!1);const h=n-s.getSizeInBytes();for(let d=0;d<h;++d)s.appendBits((d&1)===0?236:17,8);if(s.getSize()!==a)throw new Nt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,s,a,c,h,d){if(c>=a)throw new Nt("Block ID too large");const m=n%a,E=a-m,I=Math.floor(n/a),R=I+1,P=Math.floor(s/a),k=P+1,z=I-P,K=R-k;if(z!==K)throw new Nt("EC bytes mismatch");if(a!==E+m)throw new Nt("RS blocks mismatch");if(n!==(P+z)*E+(k+K)*m)throw new Nt("Total bytes mismatch");c<E?(h[0]=P,d[0]=z):(h[0]=k,d[0]=K)}static interleaveWithECBytes(n,s,a,c){if(n.getSizeInBytes()!==a)throw new Nt("Number of bits and data bytes does not match");let h=0,d=0,m=0;const E=new Array;for(let R=0;R<c;++R){const P=new Int32Array(1),k=new Int32Array(1);b.getNumDataBytesAndNumECBytesForBlockID(s,a,c,R,P,k);const z=P[0],K=new Uint8Array(z);n.toBytes(8*h,K,0,z);const Z=b.generateECBytes(K,k[0]);E.push(new S(K,Z)),d=Math.max(d,z),m=Math.max(m,Z.length),h+=P[0]}if(a!==h)throw new Nt("Data bytes does not match offset");const I=new we;for(let R=0;R<d;++R)for(const P of E){const k=P.getDataBytes();R<k.length&&I.appendBits(k[R],8)}for(let R=0;R<m;++R)for(const P of E){const k=P.getErrorCorrectionBytes();R<k.length&&I.appendBits(k[R],8)}if(s!==I.getSizeInBytes())throw new Nt("Interleaving error: "+s+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(n,s){const a=n.length,c=new Int32Array(a+s);for(let d=0;d<a;d++)c[d]=n[d]&255;new gs(Et.QR_CODE_FIELD_256).encode(c,s);const h=new Uint8Array(s);for(let d=0;d<s;d++)h[d]=c[a+d];return h}static appendModeInfo(n,s){s.appendBits(n.getBits(),4)}static appendLengthInfo(n,s,a,c){const h=a.getCharacterCountBits(s);if(n>=1<<h)throw new Nt(n+" is bigger than "+((1<<h)-1));c.appendBits(n,h)}static appendBytes(n,s,a,c){switch(s){case Ye.NUMERIC:b.appendNumericBytes(n,a);break;case Ye.ALPHANUMERIC:b.appendAlphanumericBytes(n,a);break;case Ye.BYTE:b.append8BitBytes(n,a,c);break;case Ye.KANJI:b.appendKanjiBytes(n,a);break;default:throw new Nt("Invalid mode: "+s)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const s=b.getDigit(n);return s>=0&&s<=9}static appendNumericBytes(n,s){const a=n.length;let c=0;for(;c<a;){const h=b.getDigit(n.charAt(c));if(c+2<a){const d=b.getDigit(n.charAt(c+1)),m=b.getDigit(n.charAt(c+2));s.appendBits(h*100+d*10+m,10),c+=3}else if(c+1<a){const d=b.getDigit(n.charAt(c+1));s.appendBits(h*10+d,7),c+=2}else s.appendBits(h,4),c++}}static appendAlphanumericBytes(n,s){const a=n.length;let c=0;for(;c<a;){const h=b.getAlphanumericCode(n.charCodeAt(c));if(h===-1)throw new Nt;if(c+1<a){const d=b.getAlphanumericCode(n.charCodeAt(c+1));if(d===-1)throw new Nt;s.appendBits(h*45+d,11),c+=2}else s.appendBits(h,6),c++}}static append8BitBytes(n,s,a){let c;try{c=X.encode(n,a)}catch(h){throw new Nt(h)}for(let h=0,d=c.length;h!==d;h++){const m=c[h];s.appendBits(m,8)}}static appendKanjiBytes(n,s){let a;try{a=X.encode(n,B.SJIS)}catch(h){throw new Nt(h)}const c=a.length;for(let h=0;h<c;h+=2){const d=a[h]&255,m=a[h+1]&255,E=d<<8&4294967295|m;let I=-1;if(E>=33088&&E<=40956?I=E-33088:E>=57408&&E<=60351&&(I=E-49472),I===-1)throw new Nt("Invalid byte sequence");const R=(I>>8)*192+(I&255);s.appendBits(R,13)}}static appendECI(n,s){s.appendBits(Ye.ECI.getBits(),4),s.appendBits(n.getValue(),8)}}b.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),b.DEFAULT_BYTE_MODE_ENCODING=B.UTF8.getName();class L{write(n,s,a,c=null){if(n.length===0)throw new N("Found empty contents");if(s<0||a<0)throw new N("Requested dimensions are too small: "+s+"x"+a);let h=jt.L,d=L.QUIET_ZONE_SIZE;c!==null&&(c.get(gn.ERROR_CORRECTION)!==void 0&&(h=jt.fromString(c.get(gn.ERROR_CORRECTION).toString())),c.get(gn.MARGIN)!==void 0&&(d=Number.parseInt(c.get(gn.MARGIN).toString(),10)));const m=b.encode(n,h,c);return this.renderResult(m,s,a,d)}writeToDom(n,s,a,c,h=null){typeof n=="string"&&(n=document.querySelector(n));const d=this.write(s,a,c,h);n&&n.appendChild(d)}renderResult(n,s,a,c){const h=n.getMatrix();if(h===null)throw new Mr;const d=h.getWidth(),m=h.getHeight(),E=d+c*2,I=m+c*2,R=Math.max(s,E),P=Math.max(a,I),k=Math.min(Math.floor(R/E),Math.floor(P/I)),z=Math.floor((R-d*k)/2),K=Math.floor((P-m*k)/2),Z=this.createSVGElement(R,P);for(let ne=0,ce=K;ne<m;ne++,ce+=k)for(let ve=0,Se=z;ve<d;ve++,Se+=k)if(h.get(ve,ne)===1){const _e=this.createSvgRectElement(Se,ce,k,k);Z.appendChild(_e)}return Z}createSVGElement(n,s){const a=document.createElementNS(L.SVG_NS,"svg");return a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(n,s,a,c){const h=document.createElementNS(L.SVG_NS,"rect");return h.setAttributeNS(null,"x",n.toString()),h.setAttributeNS(null,"y",s.toString()),h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}L.QUIET_ZONE_SIZE=4,L.SVG_NS="http://www.w3.org/2000/svg";class re{encode(n,s,a,c,h){if(n.length===0)throw new N("Found empty contents");if(s!==be.QR_CODE)throw new N("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new N(`Requested dimensions are too small: ${a}x${c}`);let d=jt.L,m=re.QUIET_ZONE_SIZE;h!==null&&(h.get(gn.ERROR_CORRECTION)!==void 0&&(d=jt.fromString(h.get(gn.ERROR_CORRECTION).toString())),h.get(gn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(gn.MARGIN).toString(),10)));const E=b.encode(n,d,h);return re.renderResult(E,a,c,m)}static renderResult(n,s,a,c){const h=n.getMatrix();if(h===null)throw new Mr;const d=h.getWidth(),m=h.getHeight(),E=d+c*2,I=m+c*2,R=Math.max(s,E),P=Math.max(a,I),k=Math.min(Math.floor(R/E),Math.floor(P/I)),z=Math.floor((R-d*k)/2),K=Math.floor((P-m*k)/2),Z=new Je(R,P);for(let ne=0,ce=K;ne<m;ne++,ce+=k)for(let ve=0,Se=z;ve<d;ve++,Se+=k)h.get(ve,ne)===1&&Z.setRegion(Se,ce,k,k);return Z}}re.QUIET_ZONE_SIZE=4;class fe{encode(n,s,a,c,h){let d;switch(s){case be.QR_CODE:d=new re;break;default:throw new N("No encoder available for format "+s)}return d.encode(n,s,a,c,h)}}class Te extends Pe{constructor(n,s,a,c,h,d,m,E){if(super(d,m),this.yuvData=n,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=h,c+d>s||h+m>a)throw new N("Crop rectangle does not fit within image data.");E&&this.reverseHorizontal(d,m)}getRow(n,s){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(n+this.top)*this.dataWidth+this.left;return Y.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=n*s,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Y.arraycopy(this.yuvData,h,c,0,a),c;for(let d=0;d<s;d++){const m=d*n;Y.arraycopy(this.yuvData,h,c,m,n),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,s,a,c){return new Te(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,a,c,!1)}renderThumbnail(){const n=this.getWidth()/Te.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Te.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(n*s),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let d=0;d<s;d++){const m=d*n;for(let E=0;E<n;E++){const I=c[h+E*Te.THUMBNAIL_SCALE_FACTOR]&255;a[m+E]=4278190080|I*65793}h+=this.dataWidth*Te.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Te.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Te.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,s){const a=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<s;c++,h+=this.dataWidth){const d=h+n/2;for(let m=h,E=h+n-1;m<d;m++,E--){const I=a[m];a[m]=a[E],a[E]=I}}}invert(){return new ze(this)}}Te.THUMBNAIL_SCALE_FACTOR=2;class ct extends Pe{constructor(n,s,a,c,h,d,m){if(super(s,a),this.dataWidth=c,this.dataHeight=h,this.left=d,this.top=m,n.BYTES_PER_ELEMENT===4){const E=s*a,I=new Uint8ClampedArray(E);for(let R=0;R<E;R++){const P=n[R],k=P>>16&255,z=P>>7&510,K=P&255;I[R]=(k+z+K)/4&255}this.luminances=I}else this.luminances=n;if(c===void 0&&(this.dataWidth=s),h===void 0&&(this.dataHeight=a),d===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(n,s){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(n+this.top)*this.dataWidth+this.left;return Y.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=n*s,c=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Y.arraycopy(this.luminances,h,c,0,a),c;for(let d=0;d<s;d++){const m=d*n;Y.arraycopy(this.luminances,h,c,m,n),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(n,s,a,c){return new ct(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+n,this.top+s)}invert(){return new ze(this)}}class pn extends B{static forName(n){return this.getCharacterSetECIByName(n)}}class Ft{}Ft.ISO_8859_1=B.ISO8859_1;class yn{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class vr{static singletonList(n){return[n]}static min(n,s){return n.sort(s)[0]}}class Wi{constructor(n){this.previous=n}getPrevious(){return this.previous}}class dr extends Wi{constructor(n,s,a){super(n),this.value=s,this.bitCount=a}appendTo(n,s){n.appendBits(this.value,this.bitCount)}add(n,s){return new dr(this,n,s)}addBinaryShift(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new dr(this,n,s)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+ie.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Qr extends dr{constructor(n,s,a){super(n,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(n,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):a===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(n,s){return new Qr(this,n,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function yo(O,n,s){return new Qr(O,n,s)}function Gi(O,n,s){return new dr(O,n,s)}const $h=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ps=0,wo=1,rr=2,Lu=3,hi=4,Bu=new dr(null,0,0),Ha=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Fu(O){for(let n of O)ge.fill(n,-1);return O[ps][hi]=0,O[wo][hi]=0,O[wo][ps]=28,O[Lu][hi]=0,O[rr][hi]=0,O[rr][ps]=15,O}const bl=Fu(ge.createInt32Array(6,6));class gr{constructor(n,s,a,c){this.token=n,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,s){let a=this.bitCount,c=this.token;if(n!==this.mode){let d=Ha[this.mode][n];c=Gi(c,d&65535,d>>16),a+=d>>16}let h=n===rr?4:5;return c=Gi(c,s,h),new gr(c,n,0,a+h)}shiftAndAppend(n,s){let a=this.token,c=this.mode===rr?4:5;return a=Gi(a,bl[this.mode][n],c),a=Gi(a,s,5),new gr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(n){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===hi||this.mode===rr){let m=Ha[a][ps];s=Gi(s,m&65535,m>>16),c+=m>>16,a=ps}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new gr(s,a,this.binaryShiftByteCount+1,c+h);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(n+1)),d}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=yo(s,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new gr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let s=this.bitCount+(Ha[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?s+=gr.calculateBinaryShiftCost(n)-gr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(s+=10),s<=n.bitCount}toBitArray(n){let s=[];for(let c=this.endBinaryShift(n.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new we;for(const c of s)c.appendTo(a,n);return a}toString(){return q.format("%s bits=%d bytes=%d",$h[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}gr.INITIAL_STATE=new gr(Bu,ps,0,0);function Jh(O){const n=q.getCharCode(" "),s=q.getCharCode("."),a=q.getCharCode(",");O[ps][n]=1;const c=q.getCharCode("Z"),h=q.getCharCode("A");for(let k=h;k<=c;k++)O[ps][k]=k-h+2;O[wo][n]=1;const d=q.getCharCode("z"),m=q.getCharCode("a");for(let k=m;k<=d;k++)O[wo][k]=k-m+2;O[rr][n]=1;const E=q.getCharCode("9"),I=q.getCharCode("0");for(let k=I;k<=E;k++)O[rr][k]=k-I+2;O[rr][a]=12,O[rr][s]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<R.length;k++)O[Lu][q.getCharCode(R[k])]=k;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<P.length;k++)q.getCharCode(P[k])>0&&(O[hi][q.getCharCode(P[k])]=k);return O}const Ol=Jh(ge.createInt32Array(5,256));class oa{constructor(n){this.text=n}encode(){const n=q.getCharCode(" "),s=q.getCharCode(`
`);let a=vr.singletonList(gr.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let d,m=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case q.getCharCode("\r"):d=m===s?2:0;break;case q.getCharCode("."):d=m===n?3:0;break;case q.getCharCode(","):d=m===n?4:0;break;case q.getCharCode(":"):d=m===n?5:0;break;default:d=0}d>0?(a=oa.updateStateListForPair(a,h,d),h++):a=this.updateStateListForChar(a,h)}return vr.min(a,(h,d)=>h.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,s){const a=[];for(let c of n)this.updateStateForChar(c,s,a);return oa.simplifyStates(a)}updateStateForChar(n,s,a){let c=this.text[s]&255,h=Ol[n.getMode()][c]>0,d=null;for(let m=0;m<=hi;m++){let E=Ol[m][c];if(E>0){if(d==null&&(d=n.endBinaryShift(s)),!h||m===n.getMode()||m===rr){const I=d.latchAndAppend(m,E);a.push(I)}if(!h&&bl[n.getMode()][m]>=0){const I=d.shiftAndAppend(m,E);a.push(I)}}}if(n.getBinaryShiftByteCount()>0||Ol[n.getMode()][c]===0){let m=n.addBinaryShiftChar(s);a.push(m)}}static updateStateListForPair(n,s,a){const c=[];for(let h of n)this.updateStateForPair(h,s,a,c);return this.simplifyStates(c)}static updateStateForPair(n,s,a,c){let h=n.endBinaryShift(s);if(c.push(h.latchAndAppend(hi,a)),n.getMode()!==hi&&c.push(h.shiftAndAppend(hi,a)),a===3||a===4){let d=h.latchAndAppend(rr,16-a).latchAndAppend(rr,1);c.push(d)}if(n.getBinaryShiftByteCount()>0){let d=n.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(d)}}static simplifyStates(n){let s=[];for(const a of n){let c=!0;for(const h of s){if(h.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(h)&&(s=s.filter(d=>d!==h))}c&&s.push(a)}return s}}class bt{constructor(){}static encodeBytes(n){return bt.encode(n,bt.DEFAULT_EC_PERCENT,bt.DEFAULT_AZTEC_LAYERS)}static encode(n,s,a){let c=new oa(n).encode(),h=ie.truncDivision(c.getSize()*s,100)+11,d=c.getSize()+h,m,E,I,R,P;if(a!==bt.DEFAULT_AZTEC_LAYERS){if(m=a<0,E=Math.abs(a),E>(m?bt.MAX_NB_BITS_COMPACT:bt.MAX_NB_BITS))throw new N(q.format("Illegal value %s for layers",a));I=bt.totalBitsInLayer(E,m),R=bt.WORD_SIZE[E];let _e=I-I%R;if(P=bt.stuffBits(c,R),P.getSize()+h>_e)throw new N("Data to large for user specified layer");if(m&&P.getSize()>R*64)throw new N("Data to large for user specified layer")}else{R=0,P=null;for(let _e=0;;_e++){if(_e>bt.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(m=_e<=3,E=m?_e+1:_e,I=bt.totalBitsInLayer(E,m),d>I)continue;(P==null||R!==bt.WORD_SIZE[E])&&(R=bt.WORD_SIZE[E],P=bt.stuffBits(c,R));let It=I-I%R;if(!(m&&P.getSize()>R*64)&&P.getSize()+h<=It)break}}let k=bt.generateCheckWords(P,I,R),z=P.getSize()/R,K=bt.generateModeMessage(m,E,z),Z=(m?11:14)+E*4,ne=new Int32Array(Z),ce;if(m){ce=Z;for(let _e=0;_e<ne.length;_e++)ne[_e]=_e}else{ce=Z+1+2*ie.truncDivision(ie.truncDivision(Z,2)-1,15);let _e=ie.truncDivision(Z,2),It=ie.truncDivision(ce,2);for(let dt=0;dt<_e;dt++){let Tr=dt+ie.truncDivision(dt,15);ne[_e-dt-1]=It-Tr-1,ne[_e+dt]=It+Tr+1}}let ve=new Je(ce);for(let _e=0,It=0;_e<E;_e++){let dt=(E-_e)*4+(m?9:12);for(let Tr=0;Tr<dt;Tr++){let fi=Tr*2;for(let Dn=0;Dn<2;Dn++)k.get(It+fi+Dn)&&ve.set(ne[_e*2+Dn],ne[_e*2+Tr]),k.get(It+dt*2+fi+Dn)&&ve.set(ne[_e*2+Tr],ne[Z-1-_e*2-Dn]),k.get(It+dt*4+fi+Dn)&&ve.set(ne[Z-1-_e*2-Dn],ne[Z-1-_e*2-Tr]),k.get(It+dt*6+fi+Dn)&&ve.set(ne[Z-1-_e*2-Tr],ne[_e*2+Dn])}It+=dt*8}if(bt.drawModeMessage(ve,m,ce,K),m)bt.drawBullsEye(ve,ie.truncDivision(ce,2),5);else{bt.drawBullsEye(ve,ie.truncDivision(ce,2),7);for(let _e=0,It=0;_e<ie.truncDivision(Z,2)-1;_e+=15,It+=16)for(let dt=ie.truncDivision(ce,2)&1;dt<ce;dt+=2)ve.set(ie.truncDivision(ce,2)-It,dt),ve.set(ie.truncDivision(ce,2)+It,dt),ve.set(dt,ie.truncDivision(ce,2)-It),ve.set(dt,ie.truncDivision(ce,2)+It)}let Se=new yn;return Se.setCompact(m),Se.setSize(ce),Se.setLayers(E),Se.setCodeWords(z),Se.setMatrix(ve),Se}static drawBullsEye(n,s,a){for(let c=0;c<a;c+=2)for(let h=s-c;h<=s+c;h++)n.set(h,s-c),n.set(h,s+c),n.set(s-c,h),n.set(s+c,h);n.set(s-a,s-a),n.set(s-a+1,s-a),n.set(s-a,s-a+1),n.set(s+a,s-a),n.set(s+a,s-a+1),n.set(s+a,s+a-1)}static generateModeMessage(n,s,a){let c=new we;return n?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=bt.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=bt.generateCheckWords(c,40,4)),c}static drawModeMessage(n,s,a,c){let h=ie.truncDivision(a,2);if(s)for(let d=0;d<7;d++){let m=h-3+d;c.get(d)&&n.set(m,h-5),c.get(d+7)&&n.set(h+5,m),c.get(20-d)&&n.set(m,h+5),c.get(27-d)&&n.set(h-5,m)}else for(let d=0;d<10;d++){let m=h-5+d+ie.truncDivision(d,5);c.get(d)&&n.set(m,h-7),c.get(d+10)&&n.set(h+7,m),c.get(29-d)&&n.set(m,h+7),c.get(39-d)&&n.set(h-7,m)}}static generateCheckWords(n,s,a){let c=n.getSize()/a,h=new gs(bt.getGF(a)),d=ie.truncDivision(s,a),m=bt.bitsToWords(n,a,d);h.encode(m,d-c);let E=s%a,I=new we;I.appendBits(0,E);for(const R of Array.from(m))I.appendBits(R,a);return I}static bitsToWords(n,s,a){let c=new Int32Array(a),h,d;for(h=0,d=n.getSize()/s;h<d;h++){let m=0;for(let E=0;E<s;E++)m|=n.get(h*s+E)?1<<s-E-1:0;c[h]=m}return c}static getGF(n){switch(n){case 4:return Et.AZTEC_PARAM;case 6:return Et.AZTEC_DATA_6;case 8:return Et.AZTEC_DATA_8;case 10:return Et.AZTEC_DATA_10;case 12:return Et.AZTEC_DATA_12;default:throw new N("Unsupported word size "+n)}}static stuffBits(n,s){let a=new we,c=n.getSize(),h=(1<<s)-2;for(let d=0;d<c;d+=s){let m=0;for(let E=0;E<s;E++)(d+E>=c||n.get(d+E))&&(m|=1<<s-1-E);(m&h)===h?(a.appendBits(m&h,s),d--):(m&h)===0?(a.appendBits(m|1,s),d--):a.appendBits(m,s)}return a}static totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}bt.DEFAULT_EC_PERCENT=33,bt.DEFAULT_AZTEC_LAYERS=0,bt.MAX_NB_BITS=32,bt.MAX_NB_BITS_COMPACT=4,bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class aa{encode(n,s,a,c){return this.encodeWithHints(n,s,a,c,null)}encodeWithHints(n,s,a,c,h){let d=Ft.ISO_8859_1,m=bt.DEFAULT_EC_PERCENT,E=bt.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(gn.CHARACTER_SET)&&(d=pn.forName(h.get(gn.CHARACTER_SET).toString())),h.has(gn.ERROR_CORRECTION)&&(m=ie.parseInt(h.get(gn.ERROR_CORRECTION).toString())),h.has(gn.AZTEC_LAYERS)&&(E=ie.parseInt(h.get(gn.AZTEC_LAYERS).toString()))),aa.encodeLayers(n,s,a,c,d,m,E)}static encodeLayers(n,s,a,c,h,d,m){if(s!==be.AZTEC)throw new N("Can only encode AZTEC, but got "+s);let E=bt.encode(q.getBytes(n,h),d,m);return aa.renderResult(E,a,c)}static renderResult(n,s,a){let c=n.getMatrix();if(c==null)throw new Mr;let h=c.getWidth(),d=c.getHeight(),m=Math.max(s,h),E=Math.max(a,d),I=Math.min(m/h,E/d),R=(m-h*I)/2,P=(E-d*I)/2,k=new Je(m,E);for(let z=0,K=P;z<d;z++,K+=I)for(let Z=0,ne=R;Z<h;Z++,ne+=I)c.get(Z,z)&&k.setRegion(ne,K,I,I);return k}}t.AbstractExpandedDecoder=co,t.ArgumentException=v,t.ArithmeticException=ns,t.AztecCode=yn,t.AztecCodeReader=li,t.AztecCodeWriter=aa,t.AztecDecoder=Ut,t.AztecDetector=is,t.AztecDetectorResult=oo,t.AztecEncoder=bt,t.AztecHighLevelEncoder=oa,t.AztecPoint=Ln,t.BarcodeFormat=be,t.Binarizer=ee,t.BinaryBitmap=M,t.BitArray=we,t.BitMatrix=Je,t.BitSource=Ir,t.BrowserAztecCodeReader=Ua,t.BrowserBarcodeReader=ho,t.BrowserCodeReader=tt,t.BrowserDatamatrixCodeReader=Ls,t.BrowserMultiFormatReader=zr,t.BrowserPDF417Reader=zs,t.BrowserQRCodeReader=sa,t.BrowserQRCodeSvgWriter=L,t.CharacterSetECI=B,t.ChecksumException=W,t.Code128Reader=Oe,t.Code39Reader=rn,t.DataMatrixDecodedBitStreamParser=Gn,t.DataMatrixReader=nr,t.DecodeHintType=Le,t.DecoderResult=Bt,t.DefaultGridSampler=Ps,t.DetectorResult=rs,t.EAN13Reader=Xt,t.EncodeHintType=gn,t.Exception=_,t.FormatException=V,t.GenericGF=Et,t.GenericGFPoly=On,t.GlobalHistogramBinarizer=Ct,t.GridSampler=_i,t.GridSamplerInstance=cr,t.HTMLCanvasElementLuminanceSource=ke,t.HybridBinarizer=Be,t.ITFReader=At,t.IllegalArgumentException=N,t.IllegalStateException=Mr,t.InvertedLuminanceSource=ze,t.LuminanceSource=Pe,t.MathUtils=Ze,t.MultiFormatOneDReader=Ii,t.MultiFormatReader=Us,t.MultiFormatWriter=fe,t.NotFoundException=le,t.OneDReader=Yt,t.PDF417DecodedBitStreamParser=ue,t.PDF417DecoderErrorCorrection=ia,t.PDF417Reader=dn,t.PDF417ResultMetadata=Fs,t.PerspectiveTransform=ur,t.PlanarYUVLuminanceSource=Te,t.QRCodeByteMatrix=js,t.QRCodeDataMask=lt,t.QRCodeDecodedBitStreamParser=Zt,t.QRCodeDecoderErrorCorrectionLevel=jt,t.QRCodeDecoderFormatInformation=Cn,t.QRCodeEncoder=b,t.QRCodeEncoderQRCode=Si,t.QRCodeMaskUtil=xt,t.QRCodeMatrixUtil=p,t.QRCodeMode=Ye,t.QRCodeReader=vn,t.QRCodeVersion=Xe,t.QRCodeWriter=re,t.RGBLuminanceSource=ct,t.RSS14Reader=qt,t.RSSExpandedReader=pe,t.ReaderException=Hi,t.ReedSolomonDecoder=Ei,t.ReedSolomonEncoder=gs,t.ReedSolomonException=ai,t.Result=Ge,t.ResultMetadataType=nt,t.ResultPoint=Me,t.StringUtils=q,t.UnsupportedOperationException=$,t.VideoInputDevice=te,t.WhiteRectangleDetector=Wr,t.WriterException=Nt,t.ZXingArrays=ge,t.ZXingCharset=pn,t.ZXingInteger=ie,t.ZXingStandardCharsets=Ft,t.ZXingStringBuilder=j,t.ZXingStringEncoding=X,t.ZXingSystem=Y,t.createAbstractExpandedDecoder=Ai,Object.defineProperty(t,"__esModule",{value:!0})}))})(ru,ru.exports)),ru.exports}var un=y8();const w8=x2(un),E8=_2({__proto__:null,default:w8},[un]);var d2=(function(){function r(e,t,o){if(this.formatMap=new Map([[Ue.QR_CODE,un.BarcodeFormat.QR_CODE],[Ue.AZTEC,un.BarcodeFormat.AZTEC],[Ue.CODABAR,un.BarcodeFormat.CODABAR],[Ue.CODE_39,un.BarcodeFormat.CODE_39],[Ue.CODE_93,un.BarcodeFormat.CODE_93],[Ue.CODE_128,un.BarcodeFormat.CODE_128],[Ue.DATA_MATRIX,un.BarcodeFormat.DATA_MATRIX],[Ue.MAXICODE,un.BarcodeFormat.MAXICODE],[Ue.ITF,un.BarcodeFormat.ITF],[Ue.EAN_13,un.BarcodeFormat.EAN_13],[Ue.EAN_8,un.BarcodeFormat.EAN_8],[Ue.PDF_417,un.BarcodeFormat.PDF_417],[Ue.RSS_14,un.BarcodeFormat.RSS_14],[Ue.RSS_EXPANDED,un.BarcodeFormat.RSS_EXPANDED],[Ue.UPC_A,un.BarcodeFormat.UPC_A],[Ue.UPC_E,un.BarcodeFormat.UPC_E],[Ue.UPC_EAN_EXTENSION,un.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!E8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=o;var u=this.createZXingFormats(e),f=new Map;f.set(un.DecodeHintType.POSSIBLE_FORMATS,u),f.set(un.DecodeHintType.TRY_HARDER,!1),this.hints=f}return r.prototype.decodeAsync=function(e){var t=this;return new Promise(function(o,u){try{o(t.decode(e))}catch(f){u(f)}})},r.prototype.decode=function(e){var t=new un.MultiFormatReader(this.verbose,this.hints),o=new un.HTMLCanvasElementLuminanceSource(e),u=new un.BinaryBitmap(new un.HybridBinarizer(o)),f=t.decode(u);return{text:f.text,format:jE.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,o,u){e.set(t,o)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var t=[],o=0,u=e;o<u.length;o++){var f=u[o];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),_8=function(r,e,t,o){function u(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function A(v){try{_(o.next(v))}catch(N){y(N)}}function x(v){try{_(o.throw(v))}catch(N){y(N)}}function _(v){v.done?f(v.value):u(v.value).then(A,x)}_((o=o.apply(r,e||[])).next())})},x8=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(_){return function(v){return x([_,v])}}function x(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(t=0)),t;)try{if(o=1,u&&(f=_[0]&2?u.return:_[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,_[1])).done)return f;switch(u=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,u=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(v){_=[6,v],u=0}finally{o=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},g2=(function(){function r(e,t,o){if(this.formatMap=new Map([[Ue.QR_CODE,"qr_code"],[Ue.AZTEC,"aztec"],[Ue.CODABAR,"codabar"],[Ue.CODE_39,"code_39"],[Ue.CODE_93,"code_93"],[Ue.CODE_128,"code_128"],[Ue.DATA_MATRIX,"data_matrix"],[Ue.ITF,"itf"],[Ue.EAN_13,"ean_13"],[Ue.EAN_8,"ean_8"],[Ue.PDF_417,"pdf417"],[Ue.UPC_A,"upc_a"],[Ue.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return _8(this,void 0,void 0,function(){var t,o;return x8(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=u.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(t),[2,{text:o.rawValue,format:jE.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var t=null,o=0,u=0,f=e;u<f.length;u++){var y=f[u],A=y.boundingBox.width*y.boundingBox.height;A>o&&(o=A,t=y)}if(!t)throw"No largest barcode found";return t},r.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],o=0,u=e;o<u.length;o++){var f=u[o];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,o,u){e.set(t,o)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),p2=function(r,e,t,o){function u(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function A(v){try{_(o.next(v))}catch(N){y(N)}}function x(v){try{_(o.throw(v))}catch(N){y(N)}}function _(v){v.done?f(v.value):u(v.value).then(A,x)}_((o=o.apply(r,e||[])).next())})},m2=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(_){return function(v){return x([_,v])}}function x(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(t=0)),t;)try{if(o=1,u&&(f=_[0]&2?u.return:_[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,_[1])).done)return f;switch(u=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,u=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(v){_=[6,v],u=0}finally{o=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},A8=(function(){function r(e,t,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,t&&g2.isSupported()?(this.primaryDecoder=new g2(e,o,u),this.secondaryDecoder=new d2(e,o,u)):this.primaryDecoder=new d2(e,o,u)}return r.prototype.decodeAsync=function(e){return p2(this,void 0,void 0,function(){var t;return m2(this,function(o){switch(o.label){case 0:t=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return p2(this,void 0,void 0,function(){var t,o;return m2(this,function(u){switch(u.label){case 0:t=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,o=this.executionResults;t<o.length;t++){var u=o[t];e+=u}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),g0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function o(){this.constructor=e}e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}})(),Ah=function(r,e,t,o){function u(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function A(v){try{_(o.next(v))}catch(N){y(N)}}function x(v){try{_(o.throw(v))}catch(N){y(N)}}function _(v){v.done?f(v.value):u(v.value).then(A,x)}_((o=o.apply(r,e||[])).next())})},Ih=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(_){return function(v){return x([_,v])}}function x(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(t=0)),t;)try{if(o=1,u&&(f=_[0]&2?u.return:_[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,_[1])).done)return f;switch(u=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,u=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(v){_=[6,v],u=0}finally{o=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},WE=(function(){function r(e,t){this.name=e,this.track=t}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var t={};t[this.name]=e;var o={advanced:[t]};return this.track.applyConstraints(o)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},r})(),I8=(function(r){g0(e,r);function e(t,o){return r.call(this,t,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var o={};o[this.name]=t;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),o=t[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(WE),C8=(function(r){g0(e,r);function e(t){return r.call(this,"zoom",t)||this}return e})(I8),v8=(function(r){g0(e,r);function e(t){return r.call(this,"torch",t)||this}return e})(WE),T8=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new C8(this.track)},r.prototype.torchFeature=function(){return new v8(this.track)},r})(),S8=(function(){function r(e,t,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,t,o,u){return Ah(this,void 0,void 0,function(){var f,y;return Ih(this,function(A){switch(A.label){case 0:return f=new r(e,t,u),o.aspectRatio?(y={aspectRatio:o.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:A.sent(),A.label=2;case 2:return f.setupSurface(),[2,f]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var t=this,o=function(){setTimeout(e,200),t.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return Ah(this,void 0,void 0,function(){return Ih(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,o){var u=e.mediaStream.getVideoTracks(),f=u.length,y=0;e.mediaStream.getVideoTracks().forEach(function(A){e.mediaStream.removeTrack(A),A.stop(),++y,y>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},r.prototype.getCapabilities=function(){return new T8(this.getFirstTrackOrFail())},r})(),R8=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,t,o){return Ah(this,void 0,void 0,function(){return Ih(this,function(u){return[2,S8.create(e,this.mediaStream,t,o)]})})},r.create=function(e){return Ah(this,void 0,void 0,function(){var t,o;return Ih(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return o=u.sent(),[2,new r(o)]}})})},r})(),y2=function(r,e,t,o){function u(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function A(v){try{_(o.next(v))}catch(N){y(N)}}function x(v){try{_(o.throw(v))}catch(N){y(N)}}function _(v){v.done?f(v.value):u(v.value).then(A,x)}_((o=o.apply(r,e||[])).next())})},w2=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(_){return function(v){return x([_,v])}}function x(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(t=0)),t;)try{if(o=1,u&&(f=_[0]&2?u.return:_[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,_[1])).done)return f;switch(u=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,u=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(v){_=[6,v],u=0}finally{o=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},N8=(function(){function r(){}return r.failIfNotSupported=function(){return y2(this,void 0,void 0,function(){return w2(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return y2(this,void 0,void 0,function(){return w2(this,function(t){return[2,R8.create(e)]})})},r})(),b8=function(r,e,t,o){function u(f){return f instanceof t?f:new t(function(y){y(f)})}return new(t||(t=Promise))(function(f,y){function A(v){try{_(o.next(v))}catch(N){y(N)}}function x(v){try{_(o.throw(v))}catch(N){y(N)}}function _(v){v.done?f(v.value):u(v.value).then(A,x)}_((o=o.apply(r,e||[])).next())})},O8=function(r,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,y;return y={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function A(_){return function(v){return x([_,v])}}function x(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(t=0)),t;)try{if(o=1,u&&(f=_[0]&2?u.return:_[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,_[1])).done)return f;switch(u=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,u=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){t.label=_[1];break}if(_[0]===6&&t.label<f[1]){t.label=f[1],f=_;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(_);break}f[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(r,t)}catch(v){_=[6,v],u=0}finally{o=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},P8=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=fl.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=fl.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return b8(this,void 0,void 0,function(){var e,t,o,u,f,y,A;return O8(this,function(x){switch(x.label){case 0:return e=function(_){for(var v=_.getVideoTracks(),N=0,M=v;N<M.length;N++){var W=M[N];W.enabled=!1,W.stop(),_.removeTrack(W)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=x.sent(),u=[],f=0,y=o;f<y.length;f++)A=y[f],A.kind==="videoinput"&&u.push({id:A.deviceId,label:A.label});return e(t),[2,u]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var o=function(f){for(var y=[],A=0,x=f;A<x.length;A++){var _=x[A];_.kind==="video"&&y.push({id:_.id,label:_.label})}e(y)},u=MediaStreamTrack;u.getSources(o)})},r})(),Nn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(Nn||(Nn={}));var D8=(function(){function r(){this.state=Nn.NOT_STARTED,this.onGoingTransactionNewState=Nn.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===Nn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Nn.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===Nn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Nn.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Nn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case Nn.UNKNOWN:throw"Transition from unknown is not allowed";case Nn.NOT_STARTED:this.failIfNewStateIs(e,[Nn.PAUSED]);break;case Nn.SCANNING:break;case Nn.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,t){for(var o=0,u=t;o<u.length;o++){var f=u[o];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),k8=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===Nn.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==Nn.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Nn.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===Nn.PAUSED},r})(),M8=(function(){function r(){}return r.create=function(){return new k8(new D8)},r})(),L8=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function o(){this.constructor=e}e.prototype=t===null?Object.create(t):(o.prototype=t.prototype,new o)}})(),mi=(function(r){L8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(d8),B8=(function(){function r(e,t){this.logger=t,this.fps=mi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=mi.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?HE.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!$s(this.qrbox)},r.create=function(e,t){return new r(e,t)},r})(),F8=(function(){function r(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof t=="boolean"?this.verbose=t===!0:t&&(o=t,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new p8(this.verbose),this.qrcode=new A8(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=M8.create()}return r.prototype.start=function(e,t,o,u){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;u?y=u:y=this.verbose?this.logger.log:function(){};var A=B8.create(t,this.logger);this.clearElement();var x=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=x,v=document.getElementById(this.elementId);v.clientWidth?v.clientWidth:mi.DEFAULT_WIDTH,v.style.position="relative",this.shouldScan=!0,this.element=v;var N=this,M=this.stateManagerProxy.startTransition(Nn.SCANNING);return new Promise(function(W,ee){var Y=_?A.videoConstraints:N.createVideoConstraints(e);if(!Y){M.cancel(),ee("videoConstraints should be defined");return}var G={};(!_||A.aspectRatio)&&(G.aspectRatio=A.aspectRatio);var Ie={onRenderSurfaceReady:function(ge,ie){N.setupUi(ge,ie,A),N.isScanning=!0,N.foreverScan(A,o,y)}};N8.failIfNotSupported().then(function(ge){ge.create(Y).then(function(ie){return ie.render(f.element,G,Ie).then(function(we){N.renderedCamera=we,M.execute(),W(null)}).catch(function(we){M.cancel(),ee(we)})}).catch(function(ie){M.cancel(),ee(fl.errorGettingUserMedia(ie))})}).catch(function(ge){M.cancel(),ee(fl.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Nn.PAUSED),this.showPausedState(),($s(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Nn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Nn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var f=document.getElementById(mi.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),t.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(e,t){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if($s(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,f){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var A=y.width,x=y.height,_=document.getElementById(o.elementId),v=_.clientWidth?_.clientWidth:mi.DEFAULT_WIDTH,N=Math.max(_.clientHeight?_.clientHeight:x,mi.FILE_SCAN_MIN_HEIGHT),M=o.computeCanvasDrawConfig(A,x,v,N);if(t){var W=o.createCanvasElement(v,N,"qr-canvas-visible");W.style.display="inline-block",_.appendChild(W);var ee=W.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=v,ee.canvas.height=N,ee.drawImage(y,0,0,A,x,M.x,M.y,M.width,M.height)}var Y=mi.FILE_SCAN_HIDDEN_CANVAS_PADDING,G=Math.max(y.width,M.width),Ie=Math.max(y.height,M.height),ge=G+2*Y,ie=Ie+2*Y,we=o.createCanvasElement(ge,ie);_.appendChild(we);var Ke=we.getContext("2d");if(!Ke)throw"Unable to get 2d context from canvas";Ke.canvas.width=ge,Ke.canvas.height=ie,Ke.drawImage(y,0,0,A,x,Y,Y,G,Ie);try{o.qrcode.decodeRobustlyAsync(we).then(function(Le){u(h2.createFromQrcodeResult(Le))}).catch(f)}catch(Le){f("QR code parse error, error = ".concat(Le))}},y.onerror=f,y.onabort=f,y.onstalled=f,y.onsuspend=f,y.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return P8.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!HE.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var t=[Ue.QR_CODE,Ue.AZTEC,Ue.CODABAR,Ue.CODE_39,Ue.CODE_93,Ue.CODE_128,Ue.DATA_MATRIX,Ue.MAXICODE,Ue.ITF,Ue.EAN_13,Ue.EAN_8,Ue.PDF_417,Ue.RSS_14,Ue.RSS_EXPANDED,Ue.UPC_A,Ue.UPC_E,Ue.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,f=e.formatsToSupport;u<f.length;u++){var y=f[u];f8(y)?o.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if($s(e))return!0;if(!$s(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if($s(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return $s(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,t,o){var u=this,f=o.qrbox;this.validateQrboxConfig(f);var y=this.toQrdimensions(e,t,f),A=function(_){if(_<mi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(mi.MIN_QR_BOX_SIZE,"px.")},x=function(_){return _>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};A(y.width),A(y.height),y.width=x(y.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,t,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,t)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},r.prototype.setupUi=function(e,t,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,o);var u=$s(o.qrbox)?{width:e,height:t}:o.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(e,t,u);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=o.isShadedBoxEnabled()&&f.height<=t,A={x:0,y:0,width:e,height:t},x=y?this.getShadedRegionBounds(e,t,f):A,_=this.createCanvasElement(x.width,x.height),v={willReadFrequently:!0},N=_.getContext("2d",v);N.canvas.width=x.width,N.canvas.height=x.height,this.element.append(_),y&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=N,this.canvasElement=_},r.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=fl.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},r.prototype.scanContext=function(e,t){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,h2.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var f=fl.codeParseError(u);return t(f,g8.createFrom(f)),!1})},r.prototype.foreverScan=function(e,t,o){var u=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),y=f.videoWidth/f.clientWidth,A=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*y,_=this.qrRegion.height*A,v=this.qrRegion.x*y,N=this.qrRegion.y*A;this.context.drawImage(f,v,N,x,_,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,t,o)},u.getTimeoutFps(e.fps))};this.scanContext(t,o).then(function(W){!W&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(t,o).finally(function(){M()})):M()}).catch(function(W){u.logger.logError("Error happend while scanning context",W),M()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",o="deviceId",u={user:!0,environment:!0},f="exact",y=function(ee){if(ee in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ee,"'")},A=Object.keys(e);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var x=Object.keys(e)[0];if(x!==t&&x!==o)throw"Only '".concat(t,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(x===t){var _=e.facingMode;if(typeof _=="string"){if(y(_))return{facingMode:_}}else if(typeof _=="object")if(f in _){if(y(_["".concat(f)]))return{facingMode:{exact:_["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var v=typeof _;throw"Invalid type of 'facingMode' = ".concat(v)}}else{var N=e.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(f in N)return{deviceId:{exact:N["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var M=typeof N;throw"Invalid type of 'deviceId' = ".concat(M)}}}var W=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(W)},r.prototype.computeCanvasDrawConfig=function(e,t,o,u){if(e<=o&&t<=u){var f=(o-e)/2,y=(u-t)/2;return{x:f,y,width:e,height:t}}else{var A=e,x=t;return e>o&&(t=o/e*t,e=o),t>u&&(e=u/t*e,t=u),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(x)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,o,u)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?mi.BORDER_SHADER_MATCH_COLOR:mi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,t,o){var u=e,f=t,y=document.createElement("canvas");return y.style.width="".concat(u,"px"),y.style.height="".concat(f,"px"),y.style.display="none",y.id=$s(o)?"qr-canvas":o,y},r.prototype.getShadedRegionBounds=function(e,t,o){if(o.width>e||o.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(t-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(e,t,o,u){if(!(t-u.width<1||o-u.height<1)){var f=document.createElement("div");f.style.position="absolute";var y=(t-u.width)/2,A=(o-u.height)/2;if(f.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(mi.SHADED_REGION_ELEMENT_ID),t-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var x=5,_=40;this.insertShaderBorders(f,_,x,-x,null,0,!0),this.insertShaderBorders(f,_,x,-x,null,0,!1),this.insertShaderBorders(f,_,x,null,-x,0,!0),this.insertShaderBorders(f,_,x,null,-x,0,!1),this.insertShaderBorders(f,x,_+x,-x,null,-x,!0),this.insertShaderBorders(f,x,_+x,null,-x,-x,!0),this.insertShaderBorders(f,x,_+x,-x,null,-x,!1),this.insertShaderBorders(f,x,_+x,null,-x,-x,!1),this.hasBorderShaders=!0}e.append(f)}},r.prototype.insertShaderBorders=function(e,t,o,u,f,y,A){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=mi.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(t,"px"),x.style.height="".concat(o,"px"),u!==null&&(x.style.top="".concat(u,"px")),f!==null&&(x.style.bottom="".concat(f,"px")),A?x.style.left="".concat(y,"px"):x.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),e.appendChild(x)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),E2;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(E2||(E2={}));function V8({onScan:r}){Re.useRef(null);const[e,t]=Re.useState(!1);return Re.useEffect(()=>{if(!e)return;const o=new F8("reader");return o.start({facingMode:"environment"},{fps:10,qrbox:250},u=>{try{const f=JSON.parse(u);r(f),o.stop(),t(!1)}catch(f){console.error("QR Code 不是 JSON 格式",f)}},u=>{}).catch(u=>console.error(u)),()=>{o.stop().catch(()=>{})}},[e]),me.jsxs("div",{className:"flex flex-col items-center",children:[me.jsx("button",{onClick:()=>t(o=>!o),className:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition",children:e?"關閉掃描":"開啟相機掃描"}),me.jsx("div",{id:"reader",className:"mt-2 w-64 h-64"})]})}const U8=new Js,Fc={zh:{loginBtn:"使用 Google 登入",logoutBtn:"登出",scores:"🏆 積分",name:"名字",title:"職稱",years:"年資",factory:"工廠",phone:"電話",birthday:"生日"},en:{loginBtn:"Sign in with Google",logoutBtn:"Logout",scores:"🏆 Scores",name:"Name",title:"Title",years:"Years",factory:"Factory",phone:"Phone",birthday:"Birthday"}};function z8({lang:r="zh"}){const[e,t]=Re.useState(null),[o,u]=Re.useState(null),[f,y]=Re.useState(null),[A,x]=Re.useState(!1),[_,v]=Re.useState(null);Re.useEffect(()=>{const Y=Uy(Yc,async G=>{if(G){t(G);const Ie=hu(du,"profiles",G.uid),ge=await h1(Ie);ge.exists()&&u(ge.data())}else t(null),u(null)});return()=>Y()},[]);const N=async()=>{try{const G=(await cT(Yc,U8)).user;t(G);const Ie=hu(du,"profiles",G.uid),ge=await h1(Ie);if(ge.exists())u(ge.data());else{const ie={name:G.displayName||"",title:"",years:0,factory:"",phone:"",birthday:"",email:G.email||"",photoURL:G.photoURL||"",createdAt:AR(),scores:0};await _R(Ie,ie),u(ie)}}catch(Y){console.error("登入失敗",Y)}},M=async()=>{try{await Wv(Yc),t(null),u(null)}catch(Y){console.error("登出失敗",Y)}},W=async(Y,G)=>{if(!e)return;const Ie=hu(du,"profiles",e.uid);let ge=G;(Y==="years"||Y==="phone")&&(ge=G.replace(/\D/g,"")),await CE(Ie,{[Y]:ge}),u(ie=>({...ie,[Y]:ge})),y(null)},ee=(Y,G,Ie="text")=>{const ge=Fc[r][G]||G;return f===Y?me.jsx("input",{type:Ie,value:o?.[Y]||"",onChange:ie=>u(we=>({...we,[Y]:ie.target.value})),onBlur:ie=>W(Y,ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&W(Y,ie.target.value),autoFocus:!0,className:"field-input"}):me.jsx("p",{className:"field-text",onClick:()=>y(Y),children:o?.[Y]||ge})};return me.jsx("div",{className:"page-container",children:e?me.jsxs("div",{className:"card-container",children:[me.jsxs("div",{className:"profile-header",children:[me.jsx("img",{src:o?.photoURL||e.photoURL,alt:"avatar",className:"avatar"}),me.jsxs("div",{className:"profile-info",children:[me.jsx("h2",{children:ee("name","name")}),me.jsx("p",{className:"email",children:o?.email||e.email}),ee("title","title"),ee("years","years"),ee("factory","factory"),ee("phone","phone"),ee("birthday","birthday"),me.jsxs("p",{children:[Fc[r].scores,": ",o?.scores||0]})]})]}),me.jsxs("div",{className:"card-buttons",children:[me.jsx("button",{onClick:()=>x(Y=>!Y),children:A?"隱藏 QR Code":"產生 QR Code"}),A&&me.jsx(h8,{profile:o}),me.jsx(V8,{onScan:v}),_&&me.jsx("pre",{className:"scan-result",children:JSON.stringify(_,null,2)}),me.jsx("button",{onClick:M,children:Fc[r].logoutBtn})]})]}):me.jsx("button",{className:"login-btn",onClick:N,children:Fc[r].loginBtn})})}const j8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAClCAYAAADvezeCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAACdhJREFUeF7t3XtwVFcBx/HvPpJAAuRBIAGa8ihICRSE2oLWqdJ2yihWq0il4uCgte2Io+PgqH+go305Y8vUsepotTroKDNW6Wgr09IK2GkZi7VTwIQaqS3hkRATkkAePJJd/zi7hZwl2YTs3nv37O/T+c225yzTzb2/DefuvbsbQbwyF9gOtAJvWHMiOe2jwCkgnsiDQHjAPURyUBj4DqbU5xO3ybwAlL1zT5EcUwo8zaXLncwRoDb5B0RyRS3wb0yJY4nbwXIG+KT5YyLB9wmgi/TFtvN9IIJIQEWABzBl7UvcjjS7gHJEAqYc8xLgaMqdzDHgGkQCYgFwiNSijiZngU8h4rPVQDcjX28PN5vRulx8EAG+hynhaJck6fIiMBERj1QAz2HK15+4zXaOA4sQybKFwFukFtCLnAM+jUiWrAF6yN56e7j5ARBFJEOiwMOYcnm1JEmXl4FKREapEnNRVBz/f3PbaQaWIHKZFgOHSS1WkHIeWIfICK3FXAQVtN/ag+VHQAEiaUSBRzGlCcp6e7j5OzAZkUFMwlzsZBcnl/I/4D2IWK7FvPnALkwu5jywHpGEdZiLm3JlvT3c/BSty/NaAfBDTBlcK3cye4EqJO9UYS5isgvhYlqBpUjeuA7zpgK7CC6nD7gLcd7ncHO9Pdz8AihEnFMI/ASzk/O13Mn8E5iCOKMac3GSvaPzOW3A+5CctwxzUZK9gxWzLr8XyVlfwJz0yPclSbr8CihCckYR8DNSd6QyeF4HpiGBNxV4hdQdqKRPO/B+JLBuAFpI3XHK8NMPbABCSGCEMAdLWm9nLr8BxiC+GwM8QeoOUkaf/UAN4psrgFdJ3TFK5tIBfADx3I2YkxX2DlEynxjwFbQu90QI+BLmJIXW295mKzAWyZqxwBZSN7ziXeqA6UjGXYk5GWFvcMX7dALLkYz5IOYkhL2hFf8SAzaidfmohDAHN7n28Q35lCeBYmTEioHfkrpBleDlIDATGbYZmIMZe0MqwU0XcAuS1s2YjWVvQCX4iQFfR+vySwoBX0OvbbuQp4AS5B0lmIMVe0MpuZtDwFUIszAHKfYGUnI/XcAKfObnV9Tdivmwy6n2hDihEPgM5jLml6w5p4WAb6L1dj7lT8A48sA4zEGIvQEU93MImIPDZgMNpP7gSv6kG/gwHvJqDf4hYCfmQ3gkfxVgvh4mhlmXxwdO554QsInUZ7KiPAOMJ4eNx/wQ9g+mKMn8F5hLDpqDefD2D6QodnqA28iSbKzBP4JZb0+yJ0QuoQC4Ewhz4UsJAikM3EfqM1RRhptngVICaALwHKkPWFFGmsPAPALkaqCR1AeqKJebXuB2MmC0a/DbgReACntCZBSiwBrM9Sy7MaX3VBh4iNRnnqJkOs8DZVymy3n3RRmwDX10gHjnCOZseJ09kU7YHkijFvM/UbnFSzWYL89aZU+kM5I1+CpG+deFyChEgTswn7iwC7N8yYgI8AipayNF8Ss7gXKGId0avBz4M/pqCwmeY5h1+QF74mJDrcEXYN4vqXJLEE3DfD78HfbExQZbg6/BnDadYE+IBEgEWI3p6U7MdeZDigCPkbrmUZSg50VgIpaL1+AVwHZg6UVjIrmkCfOWuNeTA8mCLwT2JQdFctxa4HdgliRrgKcx1+WKuGAViXV5CG9P3CzGHAxIftpA4jerR7qimK+K88ppe0DySg/e9m3I18FFcp4KLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHFa1B6QIYSgatYErlw4kZKKMUSiIfseGRfrj9PdcY6jdSdpeqODeDxu30WGoIIP06QZ47n5nvlUv6vUnvJMW2MXOx+v59jBdntKBqGCD8Os6yazcuMiCgoLWD5nFQun3UB58WSi4QL7rhnXH+un80wr9U172RHeyur7r2fHj/9F/a5j9l3lElTwNCqnj2flxkVUldXw+fd+m+oJ0+27ZN24olKmlV7FkprlbHnlQW7dAKdaejlad9K+q1h0kJnG8rvmES2Isn7ZJl/KfbGJJdWsX/YtCiJF3HR3LaFw9o8Bcp0KPoSKK0qYVlvOjbM/xtTSmfa0L8qLJ7Oidq15bPPK7WmxqOBDqFkwEYD5U5ZaM/6aX70MgJprKqwZsangQygpLwSgbOwka8ZfZWMrASgpL7JmxKaCDyEcMZsnEg7WsXg08XjCUe2+dLSFxGkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4zeuCxxK3+vyx/JTc/57xuuDdiVvPf1AJhC57INu8LnhH4rZvwKjki057INu8LngL5lmsguenN+2BbPO64HGgHojYE+K8c8ARezDbvC44wLPAGHtQnPc80G8PZpsfBX/KHpC88KQ94AU/Cr4POAz02hPirBjwjD3oBT8KHsc8m8faE+KkOPA3oM2e8IIfBQd4BPOa+Dl7QpwTAjbZg17xq+AngIcB8/Gt4qo45phrjz3hFb8KDrAZ87r4eXtCnBEDvmEPesnPgncBXwQK0Kl7V90H/Mce9JKfBQf4I2Yj+P04JPO2AQ/Yg14LQrG+iyl64MRi5qLH/liwrizoj5vzJfH+QP7FFwMOAOsS/+6rIBQ8BnwW2GVP+K27/SwAnb2+vMI1qM7eVuDC4wuQOOZ6k9u4cOWor4JQcDAbYwXwWOK/A3G9+LF6843CB0/8w5rxV32zeTxH6wL3jcc7gOsxJ/ICISgFB/NqypeBuzG/1X0veWvjaZobOtndsI0TpxvtaV909raxve7XdDT1BOWLYJPLkM3ASi5cEh0IQbyq7zXg98B0YC6m6L5942nL26eovWkqb7Ye4OqqaykuHG/fxTOdZ9rYsvch2rqb2P7oPjqaeuy7eCm5X14D7gR+nhgLlCAWHKAV2ArsBt4NTBkw66Hu9rO0H++mevEY9rz1FwiFKCkspTBSRCgUIp7lf/pifZzsaebVxr/yyz3309Z9nF1PHKThpWb7oXrtCHAP8FXg7YFTweHbb8YRCAELgY8Dq4HagdPeqJ5Tyi33LqByxjh7yjOdzb3sfLyOw/t8O+g9AvyBC2cnPb/8daRyoeC2mcASzPKlCijFo+vLQ5FQaPbSqsoZiyurx5UXFYcLwlk/hon1x+I97ed6Gve3tTS83NTS3xf36qW385i3mLUCDcB+oI4ALkOG8n8uq3EDMZcE5gAAAABJRU5ErkJggg==",H8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACVCAYAAAC3i3MLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAC3pJREFUeF7t3VtsFPcVx/GvbwJaau4LTbiYWk2NoUppaFGJEdSAwgsuyKFNWpQ+VKnSpFUieGmblqhKmqhCLg2xo9L2pSBHbbiYSoWYu6FEfQA5ESUJ4BgnLpes8YIdG3zdnT5MQcqZWe/M/nf2Ys5HOi9n7P3Pf/bnmZ3ZWW8e6TUBqASWAPOBB4BJQDEwBHQD14D3gbPAMeAdIMq9pwBYDCwHvgqUA9Oxt2EB9ra6AVwA3gNOAU3ALUaZscD3gSPAMGD5rE6gFvga94ZvAX8BbuLcFolqAPgnsA4oIscVAD/C3qPIiSZbb2H/JY5Gi4B/4ZxzstUGfI8cVQm8i3NSqahhoA6YyuhwP7ADiOGcayrqbeCb5Ihi4E2ckwiiuoAfkNt+iv2aRc4t1RUD/gyMIYuVAP/BufJB12+BfHJLIfBHnHMJut4GQmShCuA6zhVOV+0FxpMbJgFHcc4hXfUR9lld1lgLDOJc0XRXM/Ypbjabjn3aLdc93dUDLCULfB24jXMFM1VvYR8estEY4N841zlTdR2YSwZ9EbiMc8UyXVvJTjtxrmum6xz2iU/S8mTDo3HACeAbckEiJSUlrF69mpUrVzJ37lxCoRBTp05lYGCAjo4OwuEwzc3NNDY20tTURF9fn3wIL36MfdaRLX4BvCybiRQXF1NZWckjjzzCgw8+SCgUIhQKUVRUREdHB9evX+fDDz/k0KFDHDx4kCtXrsiH8OIAsAb7TC1ttuBM84i1YsUK6+TJk1YsFrO86u3ttWpqaqxQKOR4vAQ1CHyZ7LAIn9d45syZY23fvt0aGBiQm2REBw8etJYsWeJ4PA+1kTQqxb5kLlfCtaZPn24dOXJEztWXW7duWRs3bnQ8doLaR3bwfHU5Pz/feumll6zBwUG5CXzZt2+fNXHiRMfjj1A3SeOF2V04V8C1HnroIau9vV3OL2k7d+60xo4d6xhnhPo2mbUe5zq51oQJE6z9+/fLKSft4sWL1rx58xzjjFC1pEEFzoFdq6yszOru7pbzMtbQ0OAYa4R6F/s9uUwYA1zCuU6OKioqsk6ePCmnaiwcDlszZ850jBenhoB5BOwYzoEdVVxcbJ0/f17OJ2VeeOEFx5gj1HfJjJ/gXBfXqq2tlVNMmdOnT/vZa/8dn/ychT2AfREsobq6Op5++mnZTplYLMbChQs5e/asXOTmMPBD4EvADPzN2a8YcBVoBQ7h4RaUyspKjh49Ktsp9eKLL7J582bZdjOI/eZup1yQCi/jTKyjZs+ebfX398s/hJTbs2ePY+xcrFOnTsmppVx3d7c1efJkx9hx6mcE5B2cgznqtddek+sfiGg0apWVlTnGz6Vavny5nFZgfBz238IHr+9iT8PD7hhg7dq1shWI/Px8qqqqZDunpHP9fYy1jABu+1iFM6mOmj9/vgx+oI4dO+ZYh1yqc+fOySkFJhaLWdOmTXOsQ5zytLMA73ug+bLhpqKiQrYCtWTJEvLygnxNHJxJkyYxf76nzZoSeXl5PPzww7Idj+cV8xqgObLh5r777pOtQI0ZM4YpU6bIdk6YMWOGbAXOx5izZSMerwHydJ9NKJT+m90yMWYqZGK9fYz5BdmIx2uAPi8bboqLje4MSMrkyZNlKydkYr0nTpwoW/F8Tjbi8RqgXtlw09XVJVuBKyjI1DsVZvLzvW761Llx44ZsxeP5w4le797rlg03HR0dspU1ysrKKC8vD/RFt2VZnDlzhvb2drkoK/h4fnpkIx6vAWqTDTdJ3tCUFk8++SQbNwZ/28tzzz3Hq6++KttZ4dq1a7IVj6fnG7wfwt6TDTcnTpyQrayRrkNGYaHXv8n0isVinDp1SrbjeV824vG6Ve+8jTGilpYWLl26JNsqC5w+fZqbN2/Ktpte4LxsxuM1QDeB07LpZs+ePbKlskBDQ4NsxXMM+94gT7wGCOybrxOqqanh9u3bsq0yKBKJ8Prrr8t2PPtlYyR+AvRXPBzGwuEwdXV1sq0yaMuWLfT0eDqx6sPnTWV+AvQR0CibbjZv3kxzc7NsqwxoamqipqZGtuN5E4+XbO7wEyCAX+FhL9Tf38+6dev8XHdQAfj4449Zv349w8PDcpGbAeA3spmI3wA1Y/8vm4Ta29upqKjggw8+kItUGpw5c4aKigo6Oz3fnfoHfFz/ucNvgACexz5WJtTS0sLixYupr68nFkvrBx/vWdFolO3bt7N06VIuX74sF8fTQRKfnIXkAnQF+J1sxtPT08OGDRtYuHAhe/fu9bo7VT4NDQ1RX19PeXk5Tz31FP39/fJHRvJr4FPZ9KKQ5D6R+CdgBT7+RcjZs2eprq5mwoQJrFy5klWrVlFSUkIoFGLatGmMHTtW/oonPnbRWaWzszPpde/v7yccDn/ms/HHjx+nt9fTe97S3v9XMjnoBOftjKOytm7dKu/yDMSmTZscY4/iSuoQptRdGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGfF8A2+qPgE6PDzM0NAQ0WiUaDSKZVl3Kxlefy9d9yr7GSfZT4jk5eXdrYKCAgoLC+9WKkQiEdmKy/OIyV52D9ry5cs93cy/YMEC2QrEokWLZMtVdXU1u3fvlu2s4CfYeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBHP/x+otrZWtrJCNn9T9EhaW1uzdpv6Jf99/ais48ePf+YrCYKya9cux9ijuPQQpsxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlpBCok00fSoHVsimVlpayenXCH0tKQ0MDV69ele2sF+Q2aWxspLW1VbbdNAKefjAoj+K8Oumo6upqecE2ZZYtW+YYz62y7Up0kNukurraMV6cehRDeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSOmAeqXDTeDg4OypQI0MDAgW/H0yYZfpgG6LBtuIpGIbKkA+djenp6/kaQlQG1tbViWJdsqAJZl0dbWJtvxeHr+RmIaoAgedoPXrl2jpaVFtlUALl68yCeffCLbbvqAG7Lpl2mALKBJNt3U19fLlgrAG2+8IVvxHMd+/oyYBgjgb7LhZtu2bX6OzSoJkUiEbdu2yXY8np63RFIRoH8ACU+zurq6ePzxx4lGo3KRSoFoNMpjjz1GV1eXXORmAPt5M5aKAHUDu2XTzeHDh6mqqvI6SU/Gjx8vW66GhoZkKxBeT6GLi4tlK2ldXV2sWbOGI0eOyEXx7AY+lc1keP7e+ASeB6qBMXKBdODAAebNm8emTZt44oknCIVC8kd8KSkpkS1XGzZsYOrUqeTl5clFKROLxQiHw7Ltau7cubLlW0dHBzt27KCmpsbrC2ew9z7Py2ayUrk1XwF+LpuJLFiwgNLSUqZMmcK4cePk4oQuXLjg5y8va1RVVTFr1izZTqivr49IJEJrayvnzp2Ti714BfilbCYrlQEqBt4H7pcLVNa4DJQDPXJBslLxGuiOT4Eq4LZcoLLCbeA7pDA8QVmH84vNtDJbMWAtOeRZnJPQylw9Sw56FHu3KSejlb66TQq+1jKTFgFXcU5MK/i6ir39c94kYCswhHOSWqmvIeD32Nt9VPkKsA/7BZ2ctJZ5RbG37wOMcjOAZ4CTaJhMK4a9HZ/B3q5pl8oLickYB8wEZgOzAG9vbN3beoH/Au3YFwYT3o8VpP8BOx/K48GQwasAAAAASUVORK5CYII=",W8="/basecamp-app/assets/setting_icon-fnFuyX_C.png",G8={zh:[{title:"公司環境",path:"/explore"},{title:"交通資訊",path:"/info"},{title:"社交任務",path:"/social"},{title:"獎勵兌換",path:"/rewards"},{title:"個人資訊",path:"/settings"}],en:[{title:"Environment",path:"/explore"},{title:"Transport Info",path:"/info"},{title:"Social Tasks",path:"/social"},{title:"Rewards",path:"/rewards"},{title:"Profile",path:"/settings"}]};function X8({lang:r}){const e=G8[r],t=[{title:r==="zh"?"公司生活":"Company Life",items:e.slice(0,2),icons:[j8]},{title:r==="zh"?"社交獎勵":"Social & Rewards",items:e.slice(2,4),icons:[H8]},{title:r==="zh"?"設定":"Settings",items:e.slice(4,5),icons:[W8]}];return me.jsxs("div",{className:"home-container",children:[me.jsx("h1",{children:"BaseCamp"}),me.jsx("div",{className:"menu-container",children:t.map((o,u)=>me.jsxs("div",{className:"menu-row-wrapper",children:[me.jsxs("div",{className:"menu-row-title",children:[me.jsx("div",{className:"row-icons",children:o.icons.map((f,y)=>me.jsx("img",{src:f,alt:`icon-${y}`,className:"row-icon"},y))}),me.jsx("span",{className:"row-title-text",children:o.title})]}),me.jsx("div",{className:"menu-row",children:o.items.map((f,y)=>me.jsx(M2,{to:f.path,className:"menu-button",children:f.title},y))})]},u))})]})}function q8(){const[r,e]=Re.useState("zh");return me.jsx(JR,{children:me.jsxs(Hx,{children:[me.jsxs(Lx,{children:[me.jsx(Mo,{path:"/",element:me.jsx(X8,{lang:r})}),me.jsx(Mo,{path:"/explore",element:me.jsx($x,{lang:r})}),me.jsx(Mo,{path:"/info",element:me.jsx(Yx,{lang:r})}),me.jsx(Mo,{path:"/social",element:me.jsx(Jx,{lang:r})}),me.jsx(Mo,{path:"/rewards",element:me.jsx(t8,{lang:r})}),me.jsx(Mo,{path:"/settings",element:me.jsx(z8,{lang:r,setLang:e})}),me.jsx(Mo,{path:"/mailbox",element:me.jsx(qx,{})})]}),me.jsxs("div",{className:"bottom-buttons",children:[me.jsx("button",{className:"lang-button",onClick:()=>e(r==="zh"?"en":"zh"),children:r==="zh"?"English":"中文"}),me.jsx(M2,{to:"/",className:"home-button",children:r==="zh"?"首頁":"Home"})]})]})})}W_.createRoot(document.getElementById("root")).render(me.jsx(Re.StrictMode,{children:me.jsx(q8,{})}));

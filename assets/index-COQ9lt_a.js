function hI(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const h=Object.getOwnPropertyDescriptor(r,l);h&&Object.defineProperty(e,l,h.get?h:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();var Ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gg={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CA;function fI(){if(CA)return ku;CA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,l,h){var g=null;if(h!==void 0&&(g=""+h),l.key!==void 0&&(g=""+l.key),"key"in l){h={};for(var w in l)w!=="key"&&(h[w]=l[w])}else h=l;return l=h.ref,{$$typeof:e,type:r,key:g,ref:l!==void 0?l:null,props:h}}return ku.Fragment=t,ku.jsx=n,ku.jsxs=n,ku}var bA;function dI(){return bA||(bA=1,gg.exports=fI()),gg.exports}var Tt=dI(),mg={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function gI(){if(SA)return ye;SA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),g=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function N(J){return J===null||typeof J!="object"?null:(J=S&&J[S]||J["@@iterator"],typeof J=="function"?J:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,X={};function G(J,bt,Bt){this.props=J,this.context=bt,this.refs=X,this.updater=Bt||k}G.prototype.isReactComponent={},G.prototype.setState=function(J,bt){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,bt,"setState")},G.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function it(){}it.prototype=G.prototype;function nt(J,bt,Bt){this.props=J,this.context=bt,this.refs=X,this.updater=Bt||k}var K=nt.prototype=new it;K.constructor=nt,z(K,G.prototype),K.isPureReactComponent=!0;var At=Array.isArray,wt={H:null,A:null,T:null,S:null,V:null},Rt=Object.prototype.hasOwnProperty;function H(J,bt,Bt,Vt,zt,Ee){return Bt=Ee.ref,{$$typeof:e,type:J,key:bt,ref:Bt!==void 0?Bt:null,props:Ee}}function U(J,bt){return H(J.type,bt,void 0,void 0,void 0,J.props)}function V(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function tt(J){var bt={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Bt){return bt[Bt]})}var W=/\/+/g;function Z(J,bt){return typeof J=="object"&&J!==null&&J.key!=null?tt(""+J.key):bt.toString(36)}function Y(){}function Jt(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(Y,Y):(J.status="pending",J.then(function(bt){J.status==="pending"&&(J.status="fulfilled",J.value=bt)},function(bt){J.status==="pending"&&(J.status="rejected",J.reason=bt)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function ht(J,bt,Bt,Vt,zt){var Ee=typeof J;(Ee==="undefined"||Ee==="boolean")&&(J=null);var Ot=!1;if(J===null)Ot=!0;else switch(Ee){case"bigint":case"string":case"number":Ot=!0;break;case"object":switch(J.$$typeof){case e:case t:Ot=!0;break;case T:return Ot=J._init,ht(Ot(J._payload),bt,Bt,Vt,zt)}}if(Ot)return zt=zt(J),Ot=Vt===""?"."+Z(J,0):Vt,At(zt)?(Bt="",Ot!=null&&(Bt=Ot.replace(W,"$&/")+"/"),ht(zt,bt,Bt,"",function(vi){return vi})):zt!=null&&(V(zt)&&(zt=U(zt,Bt+(zt.key==null||J&&J.key===zt.key?"":(""+zt.key).replace(W,"$&/")+"/")+Ot)),bt.push(zt)),1;Ot=0;var qn=Vt===""?".":Vt+":";if(At(J))for(var ce=0;ce<J.length;ce++)Vt=J[ce],Ee=qn+Z(Vt,ce),Ot+=ht(Vt,bt,Bt,Ee,zt);else if(ce=N(J),typeof ce=="function")for(J=ce.call(J),ce=0;!(Vt=J.next()).done;)Vt=Vt.value,Ee=qn+Z(Vt,ce++),Ot+=ht(Vt,bt,Bt,Ee,zt);else if(Ee==="object"){if(typeof J.then=="function")return ht(Jt(J),bt,Bt,Vt,zt);throw bt=String(J),Error("Objects are not valid as a React child (found: "+(bt==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":bt)+"). If you meant to render a collection of children, use an array instead.")}return Ot}function yt(J,bt,Bt){if(J==null)return J;var Vt=[],zt=0;return ht(J,Vt,"","",function(Ee){return bt.call(Bt,Ee,zt++)}),Vt}function xt(J){if(J._status===-1){var bt=J._result;bt=bt(),bt.then(function(Bt){(J._status===0||J._status===-1)&&(J._status=1,J._result=Bt)},function(Bt){(J._status===0||J._status===-1)&&(J._status=2,J._result=Bt)}),J._status===-1&&(J._status=0,J._result=bt)}if(J._status===1)return J._result.default;throw J._result}var Ft=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var bt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(bt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function $t(){}return ye.Children={map:yt,forEach:function(J,bt,Bt){yt(J,function(){bt.apply(this,arguments)},Bt)},count:function(J){var bt=0;return yt(J,function(){bt++}),bt},toArray:function(J){return yt(J,function(bt){return bt})||[]},only:function(J){if(!V(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},ye.Component=G,ye.Fragment=n,ye.Profiler=l,ye.PureComponent=nt,ye.StrictMode=r,ye.Suspense=E,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wt,ye.__COMPILER_RUNTIME={__proto__:null,c:function(J){return wt.H.useMemoCache(J)}},ye.cache=function(J){return function(){return J.apply(null,arguments)}},ye.cloneElement=function(J,bt,Bt){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var Vt=z({},J.props),zt=J.key,Ee=void 0;if(bt!=null)for(Ot in bt.ref!==void 0&&(Ee=void 0),bt.key!==void 0&&(zt=""+bt.key),bt)!Rt.call(bt,Ot)||Ot==="key"||Ot==="__self"||Ot==="__source"||Ot==="ref"&&bt.ref===void 0||(Vt[Ot]=bt[Ot]);var Ot=arguments.length-2;if(Ot===1)Vt.children=Bt;else if(1<Ot){for(var qn=Array(Ot),ce=0;ce<Ot;ce++)qn[ce]=arguments[ce+2];Vt.children=qn}return H(J.type,zt,void 0,void 0,Ee,Vt)},ye.createContext=function(J){return J={$$typeof:g,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:h,_context:J},J},ye.createElement=function(J,bt,Bt){var Vt,zt={},Ee=null;if(bt!=null)for(Vt in bt.key!==void 0&&(Ee=""+bt.key),bt)Rt.call(bt,Vt)&&Vt!=="key"&&Vt!=="__self"&&Vt!=="__source"&&(zt[Vt]=bt[Vt]);var Ot=arguments.length-2;if(Ot===1)zt.children=Bt;else if(1<Ot){for(var qn=Array(Ot),ce=0;ce<Ot;ce++)qn[ce]=arguments[ce+2];zt.children=qn}if(J&&J.defaultProps)for(Vt in Ot=J.defaultProps,Ot)zt[Vt]===void 0&&(zt[Vt]=Ot[Vt]);return H(J,Ee,void 0,void 0,null,zt)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(J){return{$$typeof:w,render:J}},ye.isValidElement=V,ye.lazy=function(J){return{$$typeof:T,_payload:{_status:-1,_result:J},_init:xt}},ye.memo=function(J,bt){return{$$typeof:y,type:J,compare:bt===void 0?null:bt}},ye.startTransition=function(J){var bt=wt.T,Bt={};wt.T=Bt;try{var Vt=J(),zt=wt.S;zt!==null&&zt(Bt,Vt),typeof Vt=="object"&&Vt!==null&&typeof Vt.then=="function"&&Vt.then($t,Ft)}catch(Ee){Ft(Ee)}finally{wt.T=bt}},ye.unstable_useCacheRefresh=function(){return wt.H.useCacheRefresh()},ye.use=function(J){return wt.H.use(J)},ye.useActionState=function(J,bt,Bt){return wt.H.useActionState(J,bt,Bt)},ye.useCallback=function(J,bt){return wt.H.useCallback(J,bt)},ye.useContext=function(J){return wt.H.useContext(J)},ye.useDebugValue=function(){},ye.useDeferredValue=function(J,bt){return wt.H.useDeferredValue(J,bt)},ye.useEffect=function(J,bt,Bt){var Vt=wt.H;if(typeof Bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Vt.useEffect(J,bt)},ye.useId=function(){return wt.H.useId()},ye.useImperativeHandle=function(J,bt,Bt){return wt.H.useImperativeHandle(J,bt,Bt)},ye.useInsertionEffect=function(J,bt){return wt.H.useInsertionEffect(J,bt)},ye.useLayoutEffect=function(J,bt){return wt.H.useLayoutEffect(J,bt)},ye.useMemo=function(J,bt){return wt.H.useMemo(J,bt)},ye.useOptimistic=function(J,bt){return wt.H.useOptimistic(J,bt)},ye.useReducer=function(J,bt,Bt){return wt.H.useReducer(J,bt,Bt)},ye.useRef=function(J){return wt.H.useRef(J)},ye.useState=function(J){return wt.H.useState(J)},ye.useSyncExternalStore=function(J,bt,Bt){return wt.H.useSyncExternalStore(J,bt,Bt)},ye.useTransition=function(){return wt.H.useTransition()},ye.version="19.1.1",ye}var IA;function Zm(){return IA||(IA=1,mg.exports=gI()),mg.exports}var st=Zm();const fi=Y_(st);var pg={exports:{}},Bu={},yg={exports:{}},Eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function mI(){return RA||(RA=1,(function(e){function t(yt,xt){var Ft=yt.length;yt.push(xt);t:for(;0<Ft;){var $t=Ft-1>>>1,J=yt[$t];if(0<l(J,xt))yt[$t]=xt,yt[Ft]=J,Ft=$t;else break t}}function n(yt){return yt.length===0?null:yt[0]}function r(yt){if(yt.length===0)return null;var xt=yt[0],Ft=yt.pop();if(Ft!==xt){yt[0]=Ft;t:for(var $t=0,J=yt.length,bt=J>>>1;$t<bt;){var Bt=2*($t+1)-1,Vt=yt[Bt],zt=Bt+1,Ee=yt[zt];if(0>l(Vt,Ft))zt<J&&0>l(Ee,Vt)?(yt[$t]=Ee,yt[zt]=Ft,$t=zt):(yt[$t]=Vt,yt[Bt]=Ft,$t=Bt);else if(zt<J&&0>l(Ee,Ft))yt[$t]=Ee,yt[zt]=Ft,$t=zt;else break t}}return xt}function l(yt,xt){var Ft=yt.sortIndex-xt.sortIndex;return Ft!==0?Ft:yt.id-xt.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var g=Date,w=g.now();e.unstable_now=function(){return g.now()-w}}var E=[],y=[],T=1,S=null,N=3,k=!1,z=!1,X=!1,G=!1,it=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function At(yt){for(var xt=n(y);xt!==null;){if(xt.callback===null)r(y);else if(xt.startTime<=yt)r(y),xt.sortIndex=xt.expirationTime,t(E,xt);else break;xt=n(y)}}function wt(yt){if(X=!1,At(yt),!z)if(n(E)!==null)z=!0,Rt||(Rt=!0,Z());else{var xt=n(y);xt!==null&&ht(wt,xt.startTime-yt)}}var Rt=!1,H=-1,U=5,V=-1;function tt(){return G?!0:!(e.unstable_now()-V<U)}function W(){if(G=!1,Rt){var yt=e.unstable_now();V=yt;var xt=!0;try{t:{z=!1,X&&(X=!1,nt(H),H=-1),k=!0;var Ft=N;try{e:{for(At(yt),S=n(E);S!==null&&!(S.expirationTime>yt&&tt());){var $t=S.callback;if(typeof $t=="function"){S.callback=null,N=S.priorityLevel;var J=$t(S.expirationTime<=yt);if(yt=e.unstable_now(),typeof J=="function"){S.callback=J,At(yt),xt=!0;break e}S===n(E)&&r(E),At(yt)}else r(E);S=n(E)}if(S!==null)xt=!0;else{var bt=n(y);bt!==null&&ht(wt,bt.startTime-yt),xt=!1}}break t}finally{S=null,N=Ft,k=!1}xt=void 0}}finally{xt?Z():Rt=!1}}}var Z;if(typeof K=="function")Z=function(){K(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Jt=Y.port2;Y.port1.onmessage=W,Z=function(){Jt.postMessage(null)}}else Z=function(){it(W,0)};function ht(yt,xt){H=it(function(){yt(e.unstable_now())},xt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(yt){yt.callback=null},e.unstable_forceFrameRate=function(yt){0>yt||125<yt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<yt?Math.floor(1e3/yt):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function(yt){switch(N){case 1:case 2:case 3:var xt=3;break;default:xt=N}var Ft=N;N=xt;try{return yt()}finally{N=Ft}},e.unstable_requestPaint=function(){G=!0},e.unstable_runWithPriority=function(yt,xt){switch(yt){case 1:case 2:case 3:case 4:case 5:break;default:yt=3}var Ft=N;N=yt;try{return xt()}finally{N=Ft}},e.unstable_scheduleCallback=function(yt,xt,Ft){var $t=e.unstable_now();switch(typeof Ft=="object"&&Ft!==null?(Ft=Ft.delay,Ft=typeof Ft=="number"&&0<Ft?$t+Ft:$t):Ft=$t,yt){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Ft+J,yt={id:T++,callback:xt,priorityLevel:yt,startTime:Ft,expirationTime:J,sortIndex:-1},Ft>$t?(yt.sortIndex=Ft,t(y,yt),n(E)===null&&yt===n(y)&&(X?(nt(H),H=-1):X=!0,ht(wt,Ft-$t))):(yt.sortIndex=J,t(E,yt),z||k||(z=!0,Rt||(Rt=!0,Z()))),yt},e.unstable_shouldYield=tt,e.unstable_wrapCallback=function(yt){var xt=N;return function(){var Ft=N;N=xt;try{return yt.apply(this,arguments)}finally{N=Ft}}}})(Eg)),Eg}var NA;function pI(){return NA||(NA=1,yg.exports=mI()),yg.exports}var Ag={exports:{}},qi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function yI(){if(DA)return qi;DA=1;var e=Zm();function t(E){var y="https://react.dev/errors/"+E;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+E+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(E,y,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:E,containerInfo:y,implementation:T}}var g=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(E,y){if(E==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return qi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qi.createPortal=function(E,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return h(E,y,null,T)},qi.flushSync=function(E){var y=g.T,T=r.p;try{if(g.T=null,r.p=2,E)return E()}finally{g.T=y,r.p=T,r.d.f()}},qi.preconnect=function(E,y){typeof E=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(E,y))},qi.prefetchDNS=function(E){typeof E=="string"&&r.d.D(E)},qi.preinit=function(E,y){if(typeof E=="string"&&y&&typeof y.as=="string"){var T=y.as,S=w(T,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(E,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:N,fetchPriority:k}):T==="script"&&r.d.X(E,{crossOrigin:S,integrity:N,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},qi.preinitModule=function(E,y){if(typeof E=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=w(y.as,y.crossOrigin);r.d.M(E,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(E)},qi.preload=function(E,y){if(typeof E=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,S=w(T,y.crossOrigin);r.d.L(E,T,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},qi.preloadModule=function(E,y){if(typeof E=="string")if(y){var T=w(y.as,y.crossOrigin);r.d.m(E,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(E)},qi.requestFormReset=function(E){r.d.r(E)},qi.unstable_batchedUpdates=function(E,y){return E(y)},qi.useFormState=function(E,y,T){return g.H.useFormState(E,y,T)},qi.useFormStatus=function(){return g.H.useHostTransitionStatus()},qi.version="19.1.1",qi}var OA;function EI(){if(OA)return Ag.exports;OA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ag.exports=yI(),Ag.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function AI(){if(MA)return Bu;MA=1;var e=pI(),t=Zm(),n=EI();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function h(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function g(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function w(i){if(h(i)!==i)throw Error(r(188))}function E(i){var a=i.alternate;if(!a){if(a=h(i),a===null)throw Error(r(188));return a!==i?null:i}for(var u=i,m=a;;){var _=u.return;if(_===null)break;var C=_.alternate;if(C===null){if(m=_.return,m!==null){u=m;continue}break}if(_.child===C.child){for(C=_.child;C;){if(C===u)return w(_),i;if(C===m)return w(_),a;C=C.sibling}throw Error(r(188))}if(u.return!==m.return)u=_,m=C;else{for(var O=!1,B=_.child;B;){if(B===u){O=!0,u=_,m=C;break}if(B===m){O=!0,m=_,u=C;break}B=B.sibling}if(!O){for(B=C.child;B;){if(B===u){O=!0,u=C,m=_;break}if(B===m){O=!0,m=C,u=_;break}B=B.sibling}if(!O)throw Error(r(189))}}if(u.alternate!==m)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:a}function y(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=y(i),a!==null)return a;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),nt=Symbol.for("react.consumer"),K=Symbol.for("react.context"),At=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var Y=Symbol.for("react.client.reference");function Jt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Y?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case G:return"Profiler";case X:return"StrictMode";case wt:return"Suspense";case Rt:return"SuspenseList";case V:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case K:return(i.displayName||"Context")+".Provider";case nt:return(i._context.displayName||"Context")+".Consumer";case At:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return a=i.displayName||null,a!==null?a:Jt(i.type)||"Memo";case U:a=i._payload,i=i._init;try{return Jt(i(a))}catch{}}return null}var ht=Array.isArray,yt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ft={pending:!1,data:null,method:null,action:null},$t=[],J=-1;function bt(i){return{current:i}}function Bt(i){0>J||(i.current=$t[J],$t[J]=null,J--)}function Vt(i,a){J++,$t[J]=i.current,i.current=a}var zt=bt(null),Ee=bt(null),Ot=bt(null),qn=bt(null);function ce(i,a){switch(Vt(Ot,a),Vt(Ee,i),Vt(zt,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?$E(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=$E(a),i=tA(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Bt(zt),Vt(zt,i)}function vi(){Bt(zt),Bt(Ee),Bt(Ot)}function os(i){i.memoizedState!==null&&Vt(qn,i);var a=zt.current,u=tA(a,i.type);a!==u&&(Vt(Ee,i),Vt(zt,u))}function Xn(i){Ee.current===i&&(Bt(zt),Bt(Ee)),qn.current===i&&(Bt(qn),Du._currentValue=Ft)}var ls=Object.prototype.hasOwnProperty,we=e.unstable_scheduleCallback,Er=e.unstable_cancelCallback,sr=e.unstable_shouldYield,cs=e.unstable_requestPaint,Fe=e.unstable_now,qe=e.unstable_getCurrentPriorityLevel,Zt=e.unstable_ImmediatePriority,Sn=e.unstable_UserBlockingPriority,Ht=e.unstable_NormalPriority,Ga=e.unstable_LowPriority,qa=e.unstable_IdlePriority,Ar=e.log,us=e.unstable_setDisableYieldValue,ti=null,oi=null;function Yn(i){if(typeof Ar=="function"&&us(i),oi&&typeof oi.setStrictMode=="function")try{oi.setStrictMode(ti,i)}catch{}}var Xe=Math.clz32?Math.clz32:Vl,Bl=Math.log,ra=Math.LN2;function Vl(i){return i>>>=0,i===0?32:31-(Bl(i)/ra|0)|0}var Ye=256,kt=4194304;function Ke(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ae(i,a,u){var m=i.pendingLanes;if(m===0)return 0;var _=0,C=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var B=m&134217727;return B!==0?(m=B&~C,m!==0?_=Ke(m):(O&=B,O!==0?_=Ke(O):u||(u=B&~i,u!==0&&(_=Ke(u))))):(B=m&~C,B!==0?_=Ke(B):O!==0?_=Ke(O):u||(u=m&~i,u!==0&&(_=Ke(u)))),_===0?0:a!==0&&a!==_&&(a&C)===0&&(C=_&-_,u=a&-a,C>=u||C===32&&(u&4194048)!==0)?a:_}function We(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Hr(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sa(){var i=Ye;return Ye<<=1,(Ye&4194048)===0&&(Ye=256),i}function hs(){var i=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),i}function Te(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function $e(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function qo(i,a,u,m,_,C){var O=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var B=i.entanglements,Q=i.expirationTimes,ft=i.hiddenUpdates;for(u=O&~u;0<u;){var _t=31-Xe(u),St=1<<_t;B[_t]=0,Q[_t]=-1;var dt=ft[_t];if(dt!==null)for(ft[_t]=null,_t=0;_t<dt.length;_t++){var pt=dt[_t];pt!==null&&(pt.lane&=-536870913)}u&=~St}m!==0&&fs(i,m,0),C!==0&&_===0&&i.tag!==0&&(i.suspendedLanes|=C&~(O&~a))}function fs(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var m=31-Xe(a);i.entangledLanes|=a,i.entanglements[m]=i.entanglements[m]|1073741824|u&4194090}function ei(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var m=31-Xe(u),_=1<<m;_&a|i[m]&a&&(i[m]|=a),u&=~_}}function aa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function kn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ki(){var i=xt.p;return i!==0?i:(i=window.event,i===void 0?32:AA(i.type))}function Xa(i,a){var u=xt.p;try{return xt.p=i,a()}finally{xt.p=u}}var Kn=Math.random().toString(36).slice(2),In="__reactFiber$"+Kn,mn="__reactProps$"+Kn,xr="__reactContainer$"+Kn,Bn="__reactEvents$"+Kn,Zi="__reactListeners$"+Kn,Bi="__reactHandles$"+Kn,Ut="__reactResources$"+Kn,Ji="__reactMarker$"+Kn;function bs(i){delete i[In],delete i[mn],delete i[Bn],delete i[Zi],delete i[Bi]}function pn(i){var a=i[In];if(a)return a;for(var u=i.parentNode;u;){if(a=u[xr]||u[In]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=rA(i);i!==null;){if(u=i[In])return u;i=rA(i)}return a}i=u,u=i.parentNode}return null}function Ci(i){if(i=i[In]||i[xr]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function wr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function _r(i){var a=i[Ut];return a||(a=i[Ut]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ze(i){i[Ji]=!0}var Ul=new Set,oa={};function Wn(i,a){fn(i,a),fn(i+"Capture",a)}function fn(i,a){for(oa[i]=a,i=0;i<a.length;i++)Ul.add(a[i])}var He=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tr={},$i={};function Xo(i){return ls.call($i,i)?!0:ls.call(Tr,i)?!1:He.test(i)?$i[i]=!0:(Tr[i]=!0,!1)}function Ct(i,a,u){if(Xo(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function la(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function Le(i,a,u,m){if(m===null)i.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+m)}}var ar,Ya;function xe(i){if(ar===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ar=a&&a[1]||"",Ya=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ar+i+Ya}var ve=!1;function pe(i,a){if(!i||ve)return"";ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(pt){var dt=pt}Reflect.construct(i,[],St)}else{try{St.call()}catch(pt){dt=pt}i.call(St.prototype)}}else{try{throw Error()}catch(pt){dt=pt}(St=i())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(pt){if(pt&&dt&&typeof pt.stack=="string")return[pt.stack,dt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),O=C[0],B=C[1];if(O&&B){var Q=O.split(`
`),ft=B.split(`
`);for(_=m=0;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;for(;_<ft.length&&!ft[_].includes("DetermineComponentFrameRoot");)_++;if(m===Q.length||_===ft.length)for(m=Q.length-1,_=ft.length-1;1<=m&&0<=_&&Q[m]!==ft[_];)_--;for(;1<=m&&0<=_;m--,_--)if(Q[m]!==ft[_]){if(m!==1||_!==1)do if(m--,_--,0>_||Q[m]!==ft[_]){var _t=`
`+Q[m].replace(" at new "," at ");return i.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",i.displayName)),_t}while(1<=m&&0<=_);break}}}finally{ve=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?xe(u):""}function Yo(i){switch(i.tag){case 26:case 27:case 5:return xe(i.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return pe(i.type,!1);case 11:return pe(i.type.render,!1);case 1:return pe(i.type,!0);case 31:return xe("Activity");default:return""}}function tr(i){try{var a="";do a+=Yo(i),i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rn(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Vi(i){var a=rn(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,C=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return _.call(this)},set:function(O){m=""+O,C.call(this,O)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(O){m=""+O},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ss(i){i._valueTracker||(i._valueTracker=Vi(i))}function ne(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),m="";return i&&(m=rn(i)?i.checked?"true":"false":i.value),i=m,i!==u?(a.setValue(i),!0):!1}function pi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ca=/[\n"\\]/g;function yn(i){return i.replace(ca,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function je(i,a,u,m,_,C,O,B){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),a!=null?O==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+un(a)):i.value!==""+un(a)&&(i.value=""+un(a)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),a!=null?ct(i,O,un(a)):u!=null?ct(i,O,un(u)):m!=null&&i.removeAttribute("value"),_==null&&C!=null&&(i.defaultChecked=!!C),_!=null&&(i.checked=_&&typeof _!="function"&&typeof _!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?i.name=""+un(B):i.removeAttribute("name")}function Vn(i,a,u,m,_,C,O,B){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.type=C),a!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||a!=null))return;u=u!=null?""+un(u):"",a=a!=null?""+un(a):u,B||a===i.value||(i.value=a),i.defaultValue=a}m=m??_,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=B?i.checked:!!m,i.defaultChecked=!!m,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O)}function ct(i,a,u){a==="number"&&pi(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function j(i,a,u,m){if(i=i.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<i.length;u++)_=a.hasOwnProperty("$"+i[u].value),i[u].selected!==_&&(i[u].selected=_),_&&m&&(i[u].defaultSelected=!0)}else{for(u=""+un(u),a=null,_=0;_<i.length;_++){if(i[_].value===u){i[_].selected=!0,m&&(i[_].defaultSelected=!0);return}a!==null||i[_].disabled||(a=i[_])}a!==null&&(a.selected=!0)}}function Xt(i,a,u){if(a!=null&&(a=""+un(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+un(u):""}function Rn(i,a,u,m){if(a==null){if(m!=null){if(u!=null)throw Error(r(92));if(ht(m)){if(1<m.length)throw Error(r(93));m=m[0]}u=m}u==null&&(u=""),a=u}u=un(a),i.defaultValue=u,m=i.textContent,m===u&&m!==""&&m!==null&&(i.value=m)}function En(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ua(i,a,u){var m=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":m?i.setProperty(a,u):typeof u!="number"||u===0||ds.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function yi(i,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var _ in a)m=a[_],a.hasOwnProperty(_)&&u[_]!==m&&ua(i,_,m)}else for(var C in a)a.hasOwnProperty(C)&&ua(i,C,a[C])}function Yt(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ko=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vr(i){return Ko.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ha=null;function Is(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var jr=null,bi=null;function Nn(i){var a=Ci(i);if(a&&(i=a.stateNode)){var u=i[mn]||null;t:switch(i=a.stateNode,a.type){case"input":if(je(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+yn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var m=u[a];if(m!==i&&m.form===i.form){var _=m[mn]||null;if(!_)throw Error(r(90));je(m,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)m=u[a],m.form===i.form&&ne(m)}break t;case"textarea":Xt(i,u.value,u.defaultValue);break t;case"select":a=u.value,a!=null&&j(i,!!u.multiple,a,!1)}}}var Cr=!1;function Ui(i,a,u){if(Cr)return i(a,u);Cr=!0;try{var m=i(a);return m}finally{if(Cr=!1,(jr!==null||bi!==null)&&(Af(),jr&&(a=jr,i=bi,bi=jr=null,Nn(a),i)))for(a=0;a<i.length;a++)Nn(i[a])}}function Kt(i,a){var u=i.stateNode;if(u===null)return null;var m=u[mn]||null;if(m===null)return null;u=m[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ie=!1;if(Si)try{var dn={};Object.defineProperty(dn,"passive",{get:function(){ie=!0}}),window.addEventListener("test",dn,dn),window.removeEventListener("test",dn,dn)}catch{ie=!1}var or=null,Ze=null,fa=null;function Gr(){if(fa)return fa;var i,a=Ze,u=a.length,m,_="value"in or?or.value:or.textContent,C=_.length;for(i=0;i<u&&a[i]===_[i];i++);var O=u-i;for(m=1;m<=O&&a[u-m]===_[C-m];m++);return fa=_.slice(i,1<m?1-m:void 0)}function da(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function br(){return!0}function gs(){return!1}function An(i){function a(u,m,_,C,O){this._reactName=u,this._targetInst=_,this.type=m,this.nativeEvent=C,this.target=O,this.currentTarget=null;for(var B in i)i.hasOwnProperty(B)&&(u=i[B],this[B]=u?u(C):C[B]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?br:gs,this.isPropagationStopped=gs,this}return T(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),a}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sr=An(li),Ir=T({},li,{view:0,detail:0}),Un=An(Ir),ga,Rs,Rr,ma=T({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Rr&&(Rr&&i.type==="mousemove"?(ga=i.screenX-Rr.screenX,Rs=i.screenY-Rr.screenY):Rs=ga=0,Rr=i),ga)},movementY:function(i){return"movementY"in i?i.movementY:Rs}}),pa=An(ma),Qc=T({},ma,{dataTransfer:0}),Ve=An(Qc),Ns=T({},Ir,{relatedTarget:0}),ms=An(Ns),Nr=T({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),Wo=An(Nr),mt=T({},li,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),de=An(mt),_n=T({},li,{data:0}),Ds=An(_n),Qo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zl(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Fl[i])?!!a[i]:!1}function Os(){return zl}var Tn=T({},Ir,{key:function(i){if(i.key){var a=Qo[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=da(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ps[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(i){return i.type==="keypress"?da(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?da(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ms=An(Tn),Ce=T({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ps=An(Ce),qr=T({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),Ne=An(qr),A=T({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=An(A),D=T({},ma,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),F=An(D),ot=T({},li,{newState:0,oldState:0}),Et=An(ot),Pt=[9,13,27,32],ae=Si&&"CompositionEvent"in window,an=null;Si&&"documentMode"in document&&(an=document.documentMode);var Ue=Si&&"TextEvent"in window&&!an,vn=Si&&(!ae||an&&8<an&&11>=an),Fi=" ",Xr=!1;function Ei(i,a){switch(i){case"keyup":return Pt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function er(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Dr=!1;function ys(i,a){switch(i){case"compositionend":return er(a);case"keypress":return a.which!==32?null:(Xr=!0,Fi);case"textInput":return i=a.data,i===Fi&&Xr?null:i;default:return null}}function R0(i,a){if(Dr)return i==="compositionend"||!ae&&Ei(i,a)?(i=Gr(),fa=Ze=or=null,Dr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vn&&a.locale!=="ko"?null:a.data;default:return null}}var Ls={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zo(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Ls[i.type]:a==="textarea"}function nr(i,a,u,m){jr?bi?bi.push(m):bi=[m]:jr=m,a=Cf(a,"onChange"),0<a.length&&(u=new Sr("onChange","change",null,u,m),i.push({event:u,listeners:a}))}var Ka=null,zi=null;function N0(i){KE(i,0)}function Wa(i){var a=wr(i);if(ne(a))return i}function Vh(i,a){if(i==="change")return a}var Zc=!1;if(Si){var lr;if(Si){var Jc="oninput"in document;if(!Jc){var Hl=document.createElement("div");Hl.setAttribute("oninput","return;"),Jc=typeof Hl.oninput=="function"}lr=Jc}else lr=!1;Zc=lr&&(!document.documentMode||9<document.documentMode)}function Qa(){Ka&&(Ka.detachEvent("onpropertychange",De),zi=Ka=null)}function De(i){if(i.propertyName==="value"&&Wa(zi)){var a=[];nr(a,zi,i,Is(i)),Ui(N0,a)}}function jl(i,a,u){i==="focusin"?(Qa(),Ka=a,zi=u,Ka.attachEvent("onpropertychange",De)):i==="focusout"&&Qa()}function M(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wa(zi)}function s(i,a){if(i==="click")return Wa(a)}function o(i,a){if(i==="input"||i==="change")return Wa(a)}function c(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var f=typeof Object.is=="function"?Object.is:c;function d(i,a){if(f(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),m=Object.keys(a);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var _=u[m];if(!ls.call(a,_)||!f(i[_],a[_]))return!1}return!0}function p(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function x(i,a){var u=p(i);i=0;for(var m;u;){if(u.nodeType===3){if(m=i+u.textContent.length,i<=a&&m>=a)return{node:u,offset:a-i};i=m}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=p(u)}}function v(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?v(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function b(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=pi(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=pi(i.document)}return a}function R(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var P=Si&&"documentMode"in document&&11>=document.documentMode,L=null,q=null,$=null,et=!1;function lt(i,a,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;et||L==null||L!==pi(m)||(m=L,"selectionStart"in m&&R(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),$&&d($,m)||($=m,m=Cf(q,"onSelect"),0<m.length&&(a=new Sr("onSelect","select",null,a,u),i.push({event:a,listeners:m}),a.target=L)))}function gt(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Mt={animationend:gt("Animation","AnimationEnd"),animationiteration:gt("Animation","AnimationIteration"),animationstart:gt("Animation","AnimationStart"),transitionrun:gt("Transition","TransitionRun"),transitionstart:gt("Transition","TransitionStart"),transitioncancel:gt("Transition","TransitionCancel"),transitionend:gt("Transition","TransitionEnd")},Lt={},Nt={};Si&&(Nt=document.createElement("div").style,"AnimationEvent"in window||(delete Mt.animationend.animation,delete Mt.animationiteration.animation,delete Mt.animationstart.animation),"TransitionEvent"in window||delete Mt.transitionend.transition);function ge(i){if(Lt[i])return Lt[i];if(!Mt[i])return i;var a=Mt[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Nt)return Lt[i]=a[u];return i}var he=ge("animationend"),Ii=ge("animationiteration"),cr=ge("animationstart"),Hi=ge("transitionrun"),tn=ge("transitionstart"),ci=ge("transitioncancel"),ji=ge("transitionend"),ya=new Map,ks="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ks.push("scrollEnd");function Or(i,a){ya.set(i,a),Wn(a,[i])}var Uh=new WeakMap;function Yr(i,a){if(typeof i=="object"&&i!==null){var u=Uh.get(i);return u!==void 0?u:(a={value:i,source:a,stack:tr(a)},Uh.set(i,a),a)}return{value:i,source:a,stack:tr(a)}}var Kr=[],Gl=0,D0=0;function Fh(){for(var i=Gl,a=D0=Gl=0;a<i;){var u=Kr[a];Kr[a++]=null;var m=Kr[a];Kr[a++]=null;var _=Kr[a];Kr[a++]=null;var C=Kr[a];if(Kr[a++]=null,m!==null&&_!==null){var O=m.pending;O===null?_.next=_:(_.next=O.next,O.next=_),m.pending=_}C!==0&&Oy(u,_,C)}}function zh(i,a,u,m){Kr[Gl++]=i,Kr[Gl++]=a,Kr[Gl++]=u,Kr[Gl++]=m,D0|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function O0(i,a,u,m){return zh(i,a,u,m),Hh(i)}function ql(i,a){return zh(i,null,null,a),Hh(i)}function Oy(i,a,u){i.lanes|=u;var m=i.alternate;m!==null&&(m.lanes|=u);for(var _=!1,C=i.return;C!==null;)C.childLanes|=u,m=C.alternate,m!==null&&(m.childLanes|=u),C.tag===22&&(i=C.stateNode,i===null||i._visibility&1||(_=!0)),i=C,C=C.return;return i.tag===3?(C=i.stateNode,_&&a!==null&&(_=31-Xe(u),i=C.hiddenUpdates,m=i[_],m===null?i[_]=[a]:m.push(a),a.lane=u|536870912),C):null}function Hh(i){if(50<Tu)throw Tu=0,V1=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Xl={};function QS(i,a,u,m){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(i,a,u,m){return new QS(i,a,u,m)}function M0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ea(i,a){var u=i.alternate;return u===null?(u=Mr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function My(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function jh(i,a,u,m,_,C){var O=0;if(m=i,typeof i=="function")M0(i)&&(O=1);else if(typeof i=="string")O=J3(i,u,zt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case V:return i=Mr(31,u,a,_),i.elementType=V,i.lanes=C,i;case z:return Jo(u.children,_,C,a);case X:O=8,_|=24;break;case G:return i=Mr(12,u,a,_|2),i.elementType=G,i.lanes=C,i;case wt:return i=Mr(13,u,a,_),i.elementType=wt,i.lanes=C,i;case Rt:return i=Mr(19,u,a,_),i.elementType=Rt,i.lanes=C,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case it:case K:O=10;break t;case nt:O=9;break t;case At:O=11;break t;case H:O=14;break t;case U:O=16,m=null;break t}O=29,u=Error(r(130,i===null?"null":typeof i,"")),m=null}return a=Mr(O,u,a,_),a.elementType=i,a.type=m,a.lanes=C,a}function Jo(i,a,u,m){return i=Mr(7,i,m,a),i.lanes=u,i}function P0(i,a,u){return i=Mr(6,i,null,a),i.lanes=u,i}function L0(i,a,u){return a=Mr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Yl=[],Kl=0,Gh=null,qh=0,Wr=[],Qr=0,$o=null,Aa=1,xa="";function tl(i,a){Yl[Kl++]=qh,Yl[Kl++]=Gh,Gh=i,qh=a}function Py(i,a,u){Wr[Qr++]=Aa,Wr[Qr++]=xa,Wr[Qr++]=$o,$o=i;var m=Aa;i=xa;var _=32-Xe(m)-1;m&=~(1<<_),u+=1;var C=32-Xe(a)+_;if(30<C){var O=_-_%5;C=(m&(1<<O)-1).toString(32),m>>=O,_-=O,Aa=1<<32-Xe(a)+_|u<<_|m,xa=C+i}else Aa=1<<C|u<<_|m,xa=i}function k0(i){i.return!==null&&(tl(i,1),Py(i,1,0))}function B0(i){for(;i===Gh;)Gh=Yl[--Kl],Yl[Kl]=null,qh=Yl[--Kl],Yl[Kl]=null;for(;i===$o;)$o=Wr[--Qr],Wr[Qr]=null,xa=Wr[--Qr],Wr[Qr]=null,Aa=Wr[--Qr],Wr[Qr]=null}var ir=null,Fn=null,Qe=!1,el=null,Bs=!1,V0=Error(r(519));function nl(i){var a=Error(r(418,""));throw eu(Yr(a,i)),V0}function Ly(i){var a=i.stateNode,u=i.type,m=i.memoizedProps;switch(a[In]=i,a[mn]=m,u){case"dialog":Ie("cancel",a),Ie("close",a);break;case"iframe":case"object":case"embed":Ie("load",a);break;case"video":case"audio":for(u=0;u<Cu.length;u++)Ie(Cu[u],a);break;case"source":Ie("error",a);break;case"img":case"image":case"link":Ie("error",a),Ie("load",a);break;case"details":Ie("toggle",a);break;case"input":Ie("invalid",a),Vn(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Ss(a);break;case"select":Ie("invalid",a);break;case"textarea":Ie("invalid",a),Rn(a,m.value,m.defaultValue,m.children),Ss(a)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||m.suppressHydrationWarning===!0||JE(a.textContent,u)?(m.popover!=null&&(Ie("beforetoggle",a),Ie("toggle",a)),m.onScroll!=null&&Ie("scroll",a),m.onScrollEnd!=null&&Ie("scrollend",a),m.onClick!=null&&(a.onclick=bf),a=!0):a=!1,a||nl(i)}function ky(i){for(ir=i.return;ir;)switch(ir.tag){case 5:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:ir=ir.return}}function $c(i){if(i!==ir)return!1;if(!Qe)return ky(i),Qe=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||tg(i.type,i.memoizedProps)),u=!u),u&&Fn&&nl(i),ky(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(a===0){Fn=As(i.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;i=i.nextSibling}Fn=null}}else a===27?(a=Fn,fo(i.type)?(i=rg,rg=null,Fn=i):Fn=a):Fn=ir?As(i.stateNode.nextSibling):null;return!0}function tu(){Fn=ir=null,Qe=!1}function By(){var i=el;return i!==null&&(fr===null?fr=i:fr.push.apply(fr,i),el=null),i}function eu(i){el===null?el=[i]:el.push(i)}var U0=bt(null),il=null,wa=null;function Za(i,a,u){Vt(U0,a._currentValue),a._currentValue=u}function _a(i){i._currentValue=U0.current,Bt(U0)}function F0(i,a,u){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===u)break;i=i.return}}function z0(i,a,u,m){var _=i.child;for(_!==null&&(_.return=i);_!==null;){var C=_.dependencies;if(C!==null){var O=_.child;C=C.firstContext;t:for(;C!==null;){var B=C;C=_;for(var Q=0;Q<a.length;Q++)if(B.context===a[Q]){C.lanes|=u,B=C.alternate,B!==null&&(B.lanes|=u),F0(C.return,u,i),m||(O=null);break t}C=B.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(r(341));O.lanes|=u,C=O.alternate,C!==null&&(C.lanes|=u),F0(O,u,i),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===i){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function nu(i,a,u,m){i=null;for(var _=a,C=!1;_!==null;){if(!C){if((_.flags&524288)!==0)C=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var B=_.type;f(_.pendingProps.value,O.value)||(i!==null?i.push(B):i=[B])}}else if(_===qn.current){if(O=_.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(i!==null?i.push(Du):i=[Du])}_=_.return}i!==null&&z0(a,i,u,m),a.flags|=262144}function Xh(i){for(i=i.firstContext;i!==null;){if(!f(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function rl(i){il=i,wa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Gi(i){return Vy(il,i)}function Yh(i,a){return il===null&&rl(i),Vy(i,a)}function Vy(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},wa===null){if(i===null)throw Error(r(308));wa=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else wa=wa.next=a;return u}var ZS=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,m){i.push(m)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},JS=e.unstable_scheduleCallback,$S=e.unstable_NormalPriority,ui={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function H0(){return{controller:new ZS,data:new Map,refCount:0}}function iu(i){i.refCount--,i.refCount===0&&JS($S,function(){i.controller.abort()})}var ru=null,j0=0,Wl=0,Ql=null;function t3(i,a){if(ru===null){var u=ru=[];j0=0,Wl=q1(),Ql={status:"pending",value:void 0,then:function(m){u.push(m)}}}return j0++,a.then(Uy,Uy),a}function Uy(){if(--j0===0&&ru!==null){Ql!==null&&(Ql.status="fulfilled");var i=ru;ru=null,Wl=0,Ql=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function e3(i,a){var u=[],m={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return i.then(function(){m.status="fulfilled",m.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(m.status="rejected",m.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),m}var Fy=yt.S;yt.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&t3(i,a),Fy!==null&&Fy(i,a)};var sl=bt(null);function G0(){var i=sl.current;return i!==null?i:gn.pooledCache}function Kh(i,a){a===null?Vt(sl,sl.current):Vt(sl,a.pool)}function zy(){var i=G0();return i===null?null:{parent:ui._currentValue,pool:i}}var su=Error(r(460)),Hy=Error(r(474)),Wh=Error(r(542)),q0={then:function(){}};function jy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Qh(){}function Gy(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(Qh,Qh),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Xy(i),i;default:if(typeof a.status=="string")a.then(Qh,Qh);else{if(i=gn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(m){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=m}},function(m){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Xy(i),i}throw au=a,su}}var au=null;function qy(){if(au===null)throw Error(r(459));var i=au;return au=null,i}function Xy(i){if(i===su||i===Wh)throw Error(r(483))}var Ja=!1;function X0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Y0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $a(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function to(i,a,u){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(en&2)!==0){var _=m.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),m.pending=a,a=Hh(i),Oy(i,null,u),a}return zh(i,m,a,u),Hh(i)}function ou(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var m=a.lanes;m&=i.pendingLanes,u|=m,a.lanes=u,ei(i,u)}}function K0(i,a){var u=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var _=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?_=C=O:C=C.next=O,u=u.next}while(u!==null);C===null?_=C=a:C=C.next=a}else _=C=a;u={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var W0=!1;function lu(){if(W0){var i=Ql;if(i!==null)throw i}}function cu(i,a,u,m){W0=!1;var _=i.updateQueue;Ja=!1;var C=_.firstBaseUpdate,O=_.lastBaseUpdate,B=_.shared.pending;if(B!==null){_.shared.pending=null;var Q=B,ft=Q.next;Q.next=null,O===null?C=ft:O.next=ft,O=Q;var _t=i.alternate;_t!==null&&(_t=_t.updateQueue,B=_t.lastBaseUpdate,B!==O&&(B===null?_t.firstBaseUpdate=ft:B.next=ft,_t.lastBaseUpdate=Q))}if(C!==null){var St=_.baseState;O=0,_t=ft=Q=null,B=C;do{var dt=B.lane&-536870913,pt=dt!==B.lane;if(pt?(ke&dt)===dt:(m&dt)===dt){dt!==0&&dt===Wl&&(W0=!0),_t!==null&&(_t=_t.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var oe=i,ee=B;dt=a;var cn=u;switch(ee.tag){case 1:if(oe=ee.payload,typeof oe=="function"){St=oe.call(cn,St,dt);break t}St=oe;break t;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ee.payload,dt=typeof oe=="function"?oe.call(cn,St,dt):oe,dt==null)break t;St=T({},St,dt);break t;case 2:Ja=!0}}dt=B.callback,dt!==null&&(i.flags|=64,pt&&(i.flags|=8192),pt=_.callbacks,pt===null?_.callbacks=[dt]:pt.push(dt))}else pt={lane:dt,tag:B.tag,payload:B.payload,callback:B.callback,next:null},_t===null?(ft=_t=pt,Q=St):_t=_t.next=pt,O|=dt;if(B=B.next,B===null){if(B=_.shared.pending,B===null)break;pt=B,B=pt.next,pt.next=null,_.lastBaseUpdate=pt,_.shared.pending=null}}while(!0);_t===null&&(Q=St),_.baseState=Q,_.firstBaseUpdate=ft,_.lastBaseUpdate=_t,C===null&&(_.shared.lanes=0),lo|=O,i.lanes=O,i.memoizedState=St}}function Yy(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Ky(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Yy(u[i],a)}var Zl=bt(null),Zh=bt(0);function Wy(i,a){i=Ra,Vt(Zh,i),Vt(Zl,a),Ra=i|a.baseLanes}function Q0(){Vt(Zh,Ra),Vt(Zl,Zl.current)}function Z0(){Ra=Zh.current,Bt(Zl),Bt(Zh)}var eo=0,_e=null,on=null,ni=null,Jh=!1,Jl=!1,al=!1,$h=0,uu=0,$l=null,n3=0;function Qn(){throw Error(r(321))}function J0(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!f(i[u],a[u]))return!1;return!0}function $0(i,a,u,m,_,C){return eo=C,_e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,yt.H=i===null||i.memoizedState===null?O2:M2,al=!1,C=u(m,_),al=!1,Jl&&(C=Zy(a,u,m,_)),Qy(i),C}function Qy(i){yt.H=af;var a=on!==null&&on.next!==null;if(eo=0,ni=on=_e=null,Jh=!1,uu=0,$l=null,a)throw Error(r(300));i===null||Ai||(i=i.dependencies,i!==null&&Xh(i)&&(Ai=!0))}function Zy(i,a,u,m){_e=i;var _=0;do{if(Jl&&($l=null),uu=0,Jl=!1,25<=_)throw Error(r(301));if(_+=1,ni=on=null,i.updateQueue!=null){var C=i.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}yt.H=c3,C=a(u,m)}while(Jl);return C}function i3(){var i=yt.H,a=i.useState()[0];return a=typeof a.then=="function"?hu(a):a,i=i.useState()[0],(on!==null?on.memoizedState:null)!==i&&(_e.flags|=1024),a}function t1(){var i=$h!==0;return $h=0,i}function e1(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function n1(i){if(Jh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Jh=!1}eo=0,ni=on=_e=null,Jl=!1,uu=$h=0,$l=null}function ur(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?_e.memoizedState=ni=i:ni=ni.next=i,ni}function ii(){if(on===null){var i=_e.alternate;i=i!==null?i.memoizedState:null}else i=on.next;var a=ni===null?_e.memoizedState:ni.next;if(a!==null)ni=a,on=i;else{if(i===null)throw _e.alternate===null?Error(r(467)):Error(r(310));on=i,i={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},ni===null?_e.memoizedState=ni=i:ni=ni.next=i}return ni}function i1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(i){var a=uu;return uu+=1,$l===null&&($l=[]),i=Gy($l,i,a),a=_e,(ni===null?a.memoizedState:ni.next)===null&&(a=a.alternate,yt.H=a===null||a.memoizedState===null?O2:M2),i}function tf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return hu(i);if(i.$$typeof===K)return Gi(i)}throw Error(r(438,String(i)))}function r1(i){var a=null,u=_e.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var m=_e.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=i1(),_e.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),m=0;m<i;m++)u[m]=tt;return a.index++,u}function Ta(i,a){return typeof a=="function"?a(i):a}function ef(i){var a=ii();return s1(a,on,i)}function s1(i,a,u){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var _=i.baseQueue,C=m.pending;if(C!==null){if(_!==null){var O=_.next;_.next=C.next,C.next=O}a.baseQueue=_=C,m.pending=null}if(C=i.baseState,_===null)i.memoizedState=C;else{a=_.next;var B=O=null,Q=null,ft=a,_t=!1;do{var St=ft.lane&-536870913;if(St!==ft.lane?(ke&St)===St:(eo&St)===St){var dt=ft.revertLane;if(dt===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),St===Wl&&(_t=!0);else if((eo&dt)===dt){ft=ft.next,dt===Wl&&(_t=!0);continue}else St={lane:0,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Q===null?(B=Q=St,O=C):Q=Q.next=St,_e.lanes|=dt,lo|=dt;St=ft.action,al&&u(C,St),C=ft.hasEagerState?ft.eagerState:u(C,St)}else dt={lane:St,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},Q===null?(B=Q=dt,O=C):Q=Q.next=dt,_e.lanes|=St,lo|=St;ft=ft.next}while(ft!==null&&ft!==a);if(Q===null?O=C:Q.next=B,!f(C,i.memoizedState)&&(Ai=!0,_t&&(u=Ql,u!==null)))throw u;i.memoizedState=C,i.baseState=O,i.baseQueue=Q,m.lastRenderedState=C}return _===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function a1(i){var a=ii(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var m=u.dispatch,_=u.pending,C=a.memoizedState;if(_!==null){u.pending=null;var O=_=_.next;do C=i(C,O.action),O=O.next;while(O!==_);f(C,a.memoizedState)||(Ai=!0),a.memoizedState=C,a.baseQueue===null&&(a.baseState=C),u.lastRenderedState=C}return[C,m]}function Jy(i,a,u){var m=_e,_=ii(),C=Qe;if(C){if(u===void 0)throw Error(r(407));u=u()}else u=a();var O=!f((on||_).memoizedState,u);O&&(_.memoizedState=u,Ai=!0),_=_.queue;var B=e2.bind(null,m,_,i);if(fu(2048,8,B,[i]),_.getSnapshot!==a||O||ni!==null&&ni.memoizedState.tag&1){if(m.flags|=2048,tc(9,nf(),t2.bind(null,m,_,u,a),null),gn===null)throw Error(r(349));C||(eo&124)!==0||$y(m,a,u)}return u}function $y(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=_e.updateQueue,a===null?(a=i1(),_e.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function t2(i,a,u,m){a.value=u,a.getSnapshot=m,n2(a)&&i2(i)}function e2(i,a,u){return u(function(){n2(a)&&i2(i)})}function n2(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!f(i,u)}catch{return!0}}function i2(i){var a=ql(i,2);a!==null&&Vr(a,i,2)}function o1(i){var a=ur();if(typeof i=="function"){var u=i;if(i=u(),al){Yn(!0);try{u()}finally{Yn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:i},a}function r2(i,a,u,m){return i.baseState=u,s1(i,on,typeof m=="function"?m:Ta)}function r3(i,a,u,m,_){if(sf(i))throw Error(r(485));if(i=a.action,i!==null){var C={payload:_,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){C.listeners.push(O)}};yt.T!==null?u(!0):C.isTransition=!1,m(C),u=a.pending,u===null?(C.next=a.pending=C,s2(a,C)):(C.next=u.next,a.pending=u.next=C)}}function s2(i,a){var u=a.action,m=a.payload,_=i.state;if(a.isTransition){var C=yt.T,O={};yt.T=O;try{var B=u(_,m),Q=yt.S;Q!==null&&Q(O,B),a2(i,a,B)}catch(ft){l1(i,a,ft)}finally{yt.T=C}}else try{C=u(_,m),a2(i,a,C)}catch(ft){l1(i,a,ft)}}function a2(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){o2(i,a,m)},function(m){return l1(i,a,m)}):o2(i,a,u)}function o2(i,a,u){a.status="fulfilled",a.value=u,l2(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,s2(i,u)))}function l1(i,a,u){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=u,l2(a),a=a.next;while(a!==m)}i.action=null}function l2(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function c2(i,a){return a}function u2(i,a){if(Qe){var u=gn.formState;if(u!==null){t:{var m=_e;if(Qe){if(Fn){e:{for(var _=Fn,C=Bs;_.nodeType!==8;){if(!C){_=null;break e}if(_=As(_.nextSibling),_===null){_=null;break e}}C=_.data,_=C==="F!"||C==="F"?_:null}if(_){Fn=As(_.nextSibling),m=_.data==="F!";break t}}nl(m)}m=!1}m&&(a=u[0])}}return u=ur(),u.memoizedState=u.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c2,lastRenderedState:a},u.queue=m,u=R2.bind(null,_e,m),m.dispatch=u,m=o1(!1),C=d1.bind(null,_e,!1,m.queue),m=ur(),_={state:a,dispatch:null,action:i,pending:null},m.queue=_,u=r3.bind(null,_e,_,C,u),_.dispatch=u,m.memoizedState=i,[a,u,!1]}function h2(i){var a=ii();return f2(a,on,i)}function f2(i,a,u){if(a=s1(i,a,c2)[0],i=ef(Ta)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=hu(a)}catch(O){throw O===su?Wh:O}else m=a;a=ii();var _=a.queue,C=_.dispatch;return u!==a.memoizedState&&(_e.flags|=2048,tc(9,nf(),s3.bind(null,_,u),null)),[m,C,i]}function s3(i,a){i.action=a}function d2(i){var a=ii(),u=on;if(u!==null)return f2(a,u,i);ii(),a=a.memoizedState,u=ii();var m=u.queue.dispatch;return u.memoizedState=i,[a,m,!1]}function tc(i,a,u,m){return i={tag:i,create:u,deps:m,inst:a,next:null},a=_e.updateQueue,a===null&&(a=i1(),_e.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(m=u.next,u.next=i,i.next=m,a.lastEffect=i),i}function nf(){return{destroy:void 0,resource:void 0}}function g2(){return ii().memoizedState}function rf(i,a,u,m){var _=ur();m=m===void 0?null:m,_e.flags|=i,_.memoizedState=tc(1|a,nf(),u,m)}function fu(i,a,u,m){var _=ii();m=m===void 0?null:m;var C=_.memoizedState.inst;on!==null&&m!==null&&J0(m,on.memoizedState.deps)?_.memoizedState=tc(a,C,u,m):(_e.flags|=i,_.memoizedState=tc(1|a,C,u,m))}function m2(i,a){rf(8390656,8,i,a)}function p2(i,a){fu(2048,8,i,a)}function y2(i,a){return fu(4,2,i,a)}function E2(i,a){return fu(4,4,i,a)}function A2(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function x2(i,a,u){u=u!=null?u.concat([i]):null,fu(4,4,A2.bind(null,a,i),u)}function c1(){}function w2(i,a){var u=ii();a=a===void 0?null:a;var m=u.memoizedState;return a!==null&&J0(a,m[1])?m[0]:(u.memoizedState=[i,a],i)}function _2(i,a){var u=ii();a=a===void 0?null:a;var m=u.memoizedState;if(a!==null&&J0(a,m[1]))return m[0];if(m=i(),al){Yn(!0);try{i()}finally{Yn(!1)}}return u.memoizedState=[m,a],m}function u1(i,a,u){return u===void 0||(eo&1073741824)!==0?i.memoizedState=a:(i.memoizedState=u,i=CE(),_e.lanes|=i,lo|=i,u)}function T2(i,a,u,m){return f(u,a)?u:Zl.current!==null?(i=u1(i,u,m),f(i,a)||(Ai=!0),i):(eo&42)===0?(Ai=!0,i.memoizedState=u):(i=CE(),_e.lanes|=i,lo|=i,a)}function v2(i,a,u,m,_){var C=xt.p;xt.p=C!==0&&8>C?C:8;var O=yt.T,B={};yt.T=B,d1(i,!1,a,u);try{var Q=_(),ft=yt.S;if(ft!==null&&ft(B,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var _t=e3(Q,m);du(i,a,_t,Br(i))}else du(i,a,m,Br(i))}catch(St){du(i,a,{then:function(){},status:"rejected",reason:St},Br())}finally{xt.p=C,yt.T=O}}function a3(){}function h1(i,a,u,m){if(i.tag!==5)throw Error(r(476));var _=C2(i).queue;v2(i,_,a,Ft,u===null?a3:function(){return b2(i),u(m)})}function C2(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Ft,baseState:Ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:Ft},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function b2(i){var a=C2(i).next.queue;du(i,a,{},Br())}function f1(){return Gi(Du)}function S2(){return ii().memoizedState}function I2(){return ii().memoizedState}function o3(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=Br();i=$a(u);var m=to(a,i,u);m!==null&&(Vr(m,a,u),ou(m,a,u)),a={cache:H0()},i.payload=a;return}a=a.return}}function l3(i,a,u){var m=Br();u={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},sf(i)?N2(a,u):(u=O0(i,a,u,m),u!==null&&(Vr(u,i,m),D2(u,a,m)))}function R2(i,a,u){var m=Br();du(i,a,u,m)}function du(i,a,u,m){var _={lane:m,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(sf(i))N2(a,_);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=a.lastRenderedReducer,C!==null))try{var O=a.lastRenderedState,B=C(O,u);if(_.hasEagerState=!0,_.eagerState=B,f(B,O))return zh(i,a,_,0),gn===null&&Fh(),!1}catch{}finally{}if(u=O0(i,a,_,m),u!==null)return Vr(u,i,m),D2(u,a,m),!0}return!1}function d1(i,a,u,m){if(m={lane:2,revertLane:q1(),action:m,hasEagerState:!1,eagerState:null,next:null},sf(i)){if(a)throw Error(r(479))}else a=O0(i,u,m,2),a!==null&&Vr(a,i,2)}function sf(i){var a=i.alternate;return i===_e||a!==null&&a===_e}function N2(i,a){Jl=Jh=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function D2(i,a,u){if((u&4194048)!==0){var m=a.lanes;m&=i.pendingLanes,u|=m,a.lanes=u,ei(i,u)}}var af={readContext:Gi,use:tf,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn},O2={readContext:Gi,use:tf,useCallback:function(i,a){return ur().memoizedState=[i,a===void 0?null:a],i},useContext:Gi,useEffect:m2,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,rf(4194308,4,A2.bind(null,a,i),u)},useLayoutEffect:function(i,a){return rf(4194308,4,i,a)},useInsertionEffect:function(i,a){rf(4,2,i,a)},useMemo:function(i,a){var u=ur();a=a===void 0?null:a;var m=i();if(al){Yn(!0);try{i()}finally{Yn(!1)}}return u.memoizedState=[m,a],m},useReducer:function(i,a,u){var m=ur();if(u!==void 0){var _=u(a);if(al){Yn(!0);try{u(a)}finally{Yn(!1)}}}else _=a;return m.memoizedState=m.baseState=_,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:_},m.queue=i,i=i.dispatch=l3.bind(null,_e,i),[m.memoizedState,i]},useRef:function(i){var a=ur();return i={current:i},a.memoizedState=i},useState:function(i){i=o1(i);var a=i.queue,u=R2.bind(null,_e,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:c1,useDeferredValue:function(i,a){var u=ur();return u1(u,i,a)},useTransition:function(){var i=o1(!1);return i=v2.bind(null,_e,i.queue,!0,!1),ur().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var m=_e,_=ur();if(Qe){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),gn===null)throw Error(r(349));(ke&124)!==0||$y(m,a,u)}_.memoizedState=u;var C={value:u,getSnapshot:a};return _.queue=C,m2(e2.bind(null,m,C,i),[i]),m.flags|=2048,tc(9,nf(),t2.bind(null,m,C,u,a),null),u},useId:function(){var i=ur(),a=gn.identifierPrefix;if(Qe){var u=xa,m=Aa;u=(m&~(1<<32-Xe(m)-1)).toString(32)+u,a="«"+a+"R"+u,u=$h++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=n3++,a="«"+a+"r"+u.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:f1,useFormState:u2,useActionState:u2,useOptimistic:function(i){var a=ur();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=d1.bind(null,_e,!0,u),u.dispatch=a,[i,a]},useMemoCache:r1,useCacheRefresh:function(){return ur().memoizedState=o3.bind(null,_e)}},M2={readContext:Gi,use:tf,useCallback:w2,useContext:Gi,useEffect:p2,useImperativeHandle:x2,useInsertionEffect:y2,useLayoutEffect:E2,useMemo:_2,useReducer:ef,useRef:g2,useState:function(){return ef(Ta)},useDebugValue:c1,useDeferredValue:function(i,a){var u=ii();return T2(u,on.memoizedState,i,a)},useTransition:function(){var i=ef(Ta)[0],a=ii().memoizedState;return[typeof i=="boolean"?i:hu(i),a]},useSyncExternalStore:Jy,useId:S2,useHostTransitionStatus:f1,useFormState:h2,useActionState:h2,useOptimistic:function(i,a){var u=ii();return r2(u,on,i,a)},useMemoCache:r1,useCacheRefresh:I2},c3={readContext:Gi,use:tf,useCallback:w2,useContext:Gi,useEffect:p2,useImperativeHandle:x2,useInsertionEffect:y2,useLayoutEffect:E2,useMemo:_2,useReducer:a1,useRef:g2,useState:function(){return a1(Ta)},useDebugValue:c1,useDeferredValue:function(i,a){var u=ii();return on===null?u1(u,i,a):T2(u,on.memoizedState,i,a)},useTransition:function(){var i=a1(Ta)[0],a=ii().memoizedState;return[typeof i=="boolean"?i:hu(i),a]},useSyncExternalStore:Jy,useId:S2,useHostTransitionStatus:f1,useFormState:d2,useActionState:d2,useOptimistic:function(i,a){var u=ii();return on!==null?r2(u,on,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:r1,useCacheRefresh:I2},ec=null,gu=0;function of(i){var a=gu;return gu+=1,ec===null&&(ec=[]),Gy(ec,i,a)}function mu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function lf(i,a){throw a.$$typeof===S?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function P2(i){var a=i._init;return a(i._payload)}function L2(i){function a(at,rt){if(i){var ut=at.deletions;ut===null?(at.deletions=[rt],at.flags|=16):ut.push(rt)}}function u(at,rt){if(!i)return null;for(;rt!==null;)a(at,rt),rt=rt.sibling;return null}function m(at){for(var rt=new Map;at!==null;)at.key!==null?rt.set(at.key,at):rt.set(at.index,at),at=at.sibling;return rt}function _(at,rt){return at=Ea(at,rt),at.index=0,at.sibling=null,at}function C(at,rt,ut){return at.index=ut,i?(ut=at.alternate,ut!==null?(ut=ut.index,ut<rt?(at.flags|=67108866,rt):ut):(at.flags|=67108866,rt)):(at.flags|=1048576,rt)}function O(at){return i&&at.alternate===null&&(at.flags|=67108866),at}function B(at,rt,ut,vt){return rt===null||rt.tag!==6?(rt=P0(ut,at.mode,vt),rt.return=at,rt):(rt=_(rt,ut),rt.return=at,rt)}function Q(at,rt,ut,vt){var qt=ut.type;return qt===z?_t(at,rt,ut.props.children,vt,ut.key):rt!==null&&(rt.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===U&&P2(qt)===rt.type)?(rt=_(rt,ut.props),mu(rt,ut),rt.return=at,rt):(rt=jh(ut.type,ut.key,ut.props,null,at.mode,vt),mu(rt,ut),rt.return=at,rt)}function ft(at,rt,ut,vt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==ut.containerInfo||rt.stateNode.implementation!==ut.implementation?(rt=L0(ut,at.mode,vt),rt.return=at,rt):(rt=_(rt,ut.children||[]),rt.return=at,rt)}function _t(at,rt,ut,vt,qt){return rt===null||rt.tag!==7?(rt=Jo(ut,at.mode,vt,qt),rt.return=at,rt):(rt=_(rt,ut),rt.return=at,rt)}function St(at,rt,ut){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=P0(""+rt,at.mode,ut),rt.return=at,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case N:return ut=jh(rt.type,rt.key,rt.props,null,at.mode,ut),mu(ut,rt),ut.return=at,ut;case k:return rt=L0(rt,at.mode,ut),rt.return=at,rt;case U:var vt=rt._init;return rt=vt(rt._payload),St(at,rt,ut)}if(ht(rt)||Z(rt))return rt=Jo(rt,at.mode,ut,null),rt.return=at,rt;if(typeof rt.then=="function")return St(at,of(rt),ut);if(rt.$$typeof===K)return St(at,Yh(at,rt),ut);lf(at,rt)}return null}function dt(at,rt,ut,vt){var qt=rt!==null?rt.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return qt!==null?null:B(at,rt,""+ut,vt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case N:return ut.key===qt?Q(at,rt,ut,vt):null;case k:return ut.key===qt?ft(at,rt,ut,vt):null;case U:return qt=ut._init,ut=qt(ut._payload),dt(at,rt,ut,vt)}if(ht(ut)||Z(ut))return qt!==null?null:_t(at,rt,ut,vt,null);if(typeof ut.then=="function")return dt(at,rt,of(ut),vt);if(ut.$$typeof===K)return dt(at,rt,Yh(at,ut),vt);lf(at,ut)}return null}function pt(at,rt,ut,vt,qt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return at=at.get(ut)||null,B(rt,at,""+vt,qt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case N:return at=at.get(vt.key===null?ut:vt.key)||null,Q(rt,at,vt,qt);case k:return at=at.get(vt.key===null?ut:vt.key)||null,ft(rt,at,vt,qt);case U:var be=vt._init;return vt=be(vt._payload),pt(at,rt,ut,vt,qt)}if(ht(vt)||Z(vt))return at=at.get(ut)||null,_t(rt,at,vt,qt,null);if(typeof vt.then=="function")return pt(at,rt,ut,of(vt),qt);if(vt.$$typeof===K)return pt(at,rt,ut,Yh(rt,vt),qt);lf(rt,vt)}return null}function oe(at,rt,ut,vt){for(var qt=null,be=null,Qt=rt,re=rt=0,wi=null;Qt!==null&&re<ut.length;re++){Qt.index>re?(wi=Qt,Qt=null):wi=Qt.sibling;var Ge=dt(at,Qt,ut[re],vt);if(Ge===null){Qt===null&&(Qt=wi);break}i&&Qt&&Ge.alternate===null&&a(at,Qt),rt=C(Ge,rt,re),be===null?qt=Ge:be.sibling=Ge,be=Ge,Qt=wi}if(re===ut.length)return u(at,Qt),Qe&&tl(at,re),qt;if(Qt===null){for(;re<ut.length;re++)Qt=St(at,ut[re],vt),Qt!==null&&(rt=C(Qt,rt,re),be===null?qt=Qt:be.sibling=Qt,be=Qt);return Qe&&tl(at,re),qt}for(Qt=m(Qt);re<ut.length;re++)wi=pt(Qt,at,re,ut[re],vt),wi!==null&&(i&&wi.alternate!==null&&Qt.delete(wi.key===null?re:wi.key),rt=C(wi,rt,re),be===null?qt=wi:be.sibling=wi,be=wi);return i&&Qt.forEach(function(Eo){return a(at,Eo)}),Qe&&tl(at,re),qt}function ee(at,rt,ut,vt){if(ut==null)throw Error(r(151));for(var qt=null,be=null,Qt=rt,re=rt=0,wi=null,Ge=ut.next();Qt!==null&&!Ge.done;re++,Ge=ut.next()){Qt.index>re?(wi=Qt,Qt=null):wi=Qt.sibling;var Eo=dt(at,Qt,Ge.value,vt);if(Eo===null){Qt===null&&(Qt=wi);break}i&&Qt&&Eo.alternate===null&&a(at,Qt),rt=C(Eo,rt,re),be===null?qt=Eo:be.sibling=Eo,be=Eo,Qt=wi}if(Ge.done)return u(at,Qt),Qe&&tl(at,re),qt;if(Qt===null){for(;!Ge.done;re++,Ge=ut.next())Ge=St(at,Ge.value,vt),Ge!==null&&(rt=C(Ge,rt,re),be===null?qt=Ge:be.sibling=Ge,be=Ge);return Qe&&tl(at,re),qt}for(Qt=m(Qt);!Ge.done;re++,Ge=ut.next())Ge=pt(Qt,at,re,Ge.value,vt),Ge!==null&&(i&&Ge.alternate!==null&&Qt.delete(Ge.key===null?re:Ge.key),rt=C(Ge,rt,re),be===null?qt=Ge:be.sibling=Ge,be=Ge);return i&&Qt.forEach(function(uI){return a(at,uI)}),Qe&&tl(at,re),qt}function cn(at,rt,ut,vt){if(typeof ut=="object"&&ut!==null&&ut.type===z&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case N:t:{for(var qt=ut.key;rt!==null;){if(rt.key===qt){if(qt=ut.type,qt===z){if(rt.tag===7){u(at,rt.sibling),vt=_(rt,ut.props.children),vt.return=at,at=vt;break t}}else if(rt.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===U&&P2(qt)===rt.type){u(at,rt.sibling),vt=_(rt,ut.props),mu(vt,ut),vt.return=at,at=vt;break t}u(at,rt);break}else a(at,rt);rt=rt.sibling}ut.type===z?(vt=Jo(ut.props.children,at.mode,vt,ut.key),vt.return=at,at=vt):(vt=jh(ut.type,ut.key,ut.props,null,at.mode,vt),mu(vt,ut),vt.return=at,at=vt)}return O(at);case k:t:{for(qt=ut.key;rt!==null;){if(rt.key===qt)if(rt.tag===4&&rt.stateNode.containerInfo===ut.containerInfo&&rt.stateNode.implementation===ut.implementation){u(at,rt.sibling),vt=_(rt,ut.children||[]),vt.return=at,at=vt;break t}else{u(at,rt);break}else a(at,rt);rt=rt.sibling}vt=L0(ut,at.mode,vt),vt.return=at,at=vt}return O(at);case U:return qt=ut._init,ut=qt(ut._payload),cn(at,rt,ut,vt)}if(ht(ut))return oe(at,rt,ut,vt);if(Z(ut)){if(qt=Z(ut),typeof qt!="function")throw Error(r(150));return ut=qt.call(ut),ee(at,rt,ut,vt)}if(typeof ut.then=="function")return cn(at,rt,of(ut),vt);if(ut.$$typeof===K)return cn(at,rt,Yh(at,ut),vt);lf(at,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,rt!==null&&rt.tag===6?(u(at,rt.sibling),vt=_(rt,ut),vt.return=at,at=vt):(u(at,rt),vt=P0(ut,at.mode,vt),vt.return=at,at=vt),O(at)):u(at,rt)}return function(at,rt,ut,vt){try{gu=0;var qt=cn(at,rt,ut,vt);return ec=null,qt}catch(Qt){if(Qt===su||Qt===Wh)throw Qt;var be=Mr(29,Qt,null,at.mode);return be.lanes=vt,be.return=at,be}finally{}}}var nc=L2(!0),k2=L2(!1),Zr=bt(null),Vs=null;function no(i){var a=i.alternate;Vt(hi,hi.current&1),Vt(Zr,i),Vs===null&&(a===null||Zl.current!==null||a.memoizedState!==null)&&(Vs=i)}function B2(i){if(i.tag===22){if(Vt(hi,hi.current),Vt(Zr,i),Vs===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Vs=i)}}else io()}function io(){Vt(hi,hi.current),Vt(Zr,Zr.current)}function va(i){Bt(Zr),Vs===i&&(Vs=null),Bt(hi)}var hi=bt(0);function cf(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||ig(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function g1(i,a,u,m){a=i.memoizedState,u=u(m,a),u=u==null?a:T({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var m1={enqueueSetState:function(i,a,u){i=i._reactInternals;var m=Br(),_=$a(m);_.payload=a,u!=null&&(_.callback=u),a=to(i,_,m),a!==null&&(Vr(a,i,m),ou(a,i,m))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var m=Br(),_=$a(m);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=to(i,_,m),a!==null&&(Vr(a,i,m),ou(a,i,m))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=Br(),m=$a(u);m.tag=2,a!=null&&(m.callback=a),a=to(i,m,u),a!==null&&(Vr(a,i,u),ou(a,i,u))}};function V2(i,a,u,m,_,C,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,C,O):a.prototype&&a.prototype.isPureReactComponent?!d(u,m)||!d(_,C):!0}function U2(i,a,u,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,m),a.state!==i&&m1.enqueueReplaceState(a,a.state,null)}function ol(i,a){var u=a;if("ref"in a){u={};for(var m in a)m!=="ref"&&(u[m]=a[m])}if(i=i.defaultProps){u===a&&(u=T({},u));for(var _ in i)u[_]===void 0&&(u[_]=i[_])}return u}var uf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function F2(i){uf(i)}function z2(i){console.error(i)}function H2(i){uf(i)}function hf(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function j2(i,a,u){try{var m=i.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function p1(i,a,u){return u=$a(u),u.tag=3,u.payload={element:null},u.callback=function(){hf(i,a)},u}function G2(i){return i=$a(i),i.tag=3,i}function q2(i,a,u,m){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var C=m.value;i.payload=function(){return _(C)},i.callback=function(){j2(a,u,m)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){j2(a,u,m),typeof _!="function"&&(co===null?co=new Set([this]):co.add(this));var B=m.stack;this.componentDidCatch(m.value,{componentStack:B!==null?B:""})})}function u3(i,a,u,m,_){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=u.alternate,a!==null&&nu(a,u,_,!0),u=Zr.current,u!==null){switch(u.tag){case 13:return Vs===null?F1():u.alternate===null&&zn===0&&(zn=3),u.flags&=-257,u.flags|=65536,u.lanes=_,m===q0?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([m]):a.add(m),H1(i,m,_)),!1;case 22:return u.flags|=65536,m===q0?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([m]):u.add(m)),H1(i,m,_)),!1}throw Error(r(435,u.tag))}return H1(i,m,_),F1(),!1}if(Qe)return a=Zr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,m!==V0&&(i=Error(r(422),{cause:m}),eu(Yr(i,u)))):(m!==V0&&(a=Error(r(423),{cause:m}),eu(Yr(a,u))),i=i.current.alternate,i.flags|=65536,_&=-_,i.lanes|=_,m=Yr(m,u),_=p1(i.stateNode,m,_),K0(i,_),zn!==4&&(zn=2)),!1;var C=Error(r(520),{cause:m});if(C=Yr(C,u),_u===null?_u=[C]:_u.push(C),zn!==4&&(zn=2),a===null)return!0;m=Yr(m,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=_&-_,u.lanes|=i,i=p1(u.stateNode,m,i),K0(u,i),!1;case 1:if(a=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(co===null||!co.has(C))))return u.flags|=65536,_&=-_,u.lanes|=_,_=G2(_),q2(_,i,u,m),K0(u,_),!1}u=u.return}while(u!==null);return!1}var X2=Error(r(461)),Ai=!1;function Ri(i,a,u,m){a.child=i===null?k2(a,null,u,m):nc(a,i.child,u,m)}function Y2(i,a,u,m,_){u=u.render;var C=a.ref;if("ref"in m){var O={};for(var B in m)B!=="ref"&&(O[B]=m[B])}else O=m;return rl(a),m=$0(i,a,u,O,C,_),B=t1(),i!==null&&!Ai?(e1(i,a,_),Ca(i,a,_)):(Qe&&B&&k0(a),a.flags|=1,Ri(i,a,m,_),a.child)}function K2(i,a,u,m,_){if(i===null){var C=u.type;return typeof C=="function"&&!M0(C)&&C.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=C,W2(i,a,C,m,_)):(i=jh(u.type,null,m,a,a.mode,_),i.ref=a.ref,i.return=a,a.child=i)}if(C=i.child,!v1(i,_)){var O=C.memoizedProps;if(u=u.compare,u=u!==null?u:d,u(O,m)&&i.ref===a.ref)return Ca(i,a,_)}return a.flags|=1,i=Ea(C,m),i.ref=a.ref,i.return=a,a.child=i}function W2(i,a,u,m,_){if(i!==null){var C=i.memoizedProps;if(d(C,m)&&i.ref===a.ref)if(Ai=!1,a.pendingProps=m=C,v1(i,_))(i.flags&131072)!==0&&(Ai=!0);else return a.lanes=i.lanes,Ca(i,a,_)}return y1(i,a,u,m,_)}function Q2(i,a,u){var m=a.pendingProps,_=m.children,C=i!==null?i.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=C!==null?C.baseLanes|u:u,i!==null){for(_=a.child=i.child,C=0;_!==null;)C=C|_.lanes|_.childLanes,_=_.sibling;a.childLanes=C&~m}else a.childLanes=0,a.child=null;return Z2(i,a,m,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Kh(a,C!==null?C.cachePool:null),C!==null?Wy(a,C):Q0(),B2(a);else return a.lanes=a.childLanes=536870912,Z2(i,a,C!==null?C.baseLanes|u:u,u)}else C!==null?(Kh(a,C.cachePool),Wy(a,C),io(),a.memoizedState=null):(i!==null&&Kh(a,null),Q0(),io());return Ri(i,a,_,u),a.child}function Z2(i,a,u,m){var _=G0();return _=_===null?null:{parent:ui._currentValue,pool:_},a.memoizedState={baseLanes:u,cachePool:_},i!==null&&Kh(a,null),Q0(),B2(a),i!==null&&nu(i,a,m,!0),null}function ff(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function y1(i,a,u,m,_){return rl(a),u=$0(i,a,u,m,void 0,_),m=t1(),i!==null&&!Ai?(e1(i,a,_),Ca(i,a,_)):(Qe&&m&&k0(a),a.flags|=1,Ri(i,a,u,_),a.child)}function J2(i,a,u,m,_,C){return rl(a),a.updateQueue=null,u=Zy(a,m,u,_),Qy(i),m=t1(),i!==null&&!Ai?(e1(i,a,C),Ca(i,a,C)):(Qe&&m&&k0(a),a.flags|=1,Ri(i,a,u,C),a.child)}function $2(i,a,u,m,_){if(rl(a),a.stateNode===null){var C=Xl,O=u.contextType;typeof O=="object"&&O!==null&&(C=Gi(O)),C=new u(m,C),a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=m1,a.stateNode=C,C._reactInternals=a,C=a.stateNode,C.props=m,C.state=a.memoizedState,C.refs={},X0(a),O=u.contextType,C.context=typeof O=="object"&&O!==null?Gi(O):Xl,C.state=a.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(g1(a,u,O,m),C.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(O=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),O!==C.state&&m1.enqueueReplaceState(C,C.state,null),cu(a,m,C,_),lu(),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(i===null){C=a.stateNode;var B=a.memoizedProps,Q=ol(u,B);C.props=Q;var ft=C.context,_t=u.contextType;O=Xl,typeof _t=="object"&&_t!==null&&(O=Gi(_t));var St=u.getDerivedStateFromProps;_t=typeof St=="function"||typeof C.getSnapshotBeforeUpdate=="function",B=a.pendingProps!==B,_t||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B||ft!==O)&&U2(a,C,m,O),Ja=!1;var dt=a.memoizedState;C.state=dt,cu(a,m,C,_),lu(),ft=a.memoizedState,B||dt!==ft||Ja?(typeof St=="function"&&(g1(a,u,St,m),ft=a.memoizedState),(Q=Ja||V2(a,u,Q,m,dt,ft,O))?(_t||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=ft),C.props=m,C.state=ft,C.context=O,m=Q):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{C=a.stateNode,Y0(i,a),O=a.memoizedProps,_t=ol(u,O),C.props=_t,St=a.pendingProps,dt=C.context,ft=u.contextType,Q=Xl,typeof ft=="object"&&ft!==null&&(Q=Gi(ft)),B=u.getDerivedStateFromProps,(ft=typeof B=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==St||dt!==Q)&&U2(a,C,m,Q),Ja=!1,dt=a.memoizedState,C.state=dt,cu(a,m,C,_),lu();var pt=a.memoizedState;O!==St||dt!==pt||Ja||i!==null&&i.dependencies!==null&&Xh(i.dependencies)?(typeof B=="function"&&(g1(a,u,B,m),pt=a.memoizedState),(_t=Ja||V2(a,u,_t,m,dt,pt,Q)||i!==null&&i.dependencies!==null&&Xh(i.dependencies))?(ft||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,pt,Q),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,pt,Q)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||O===i.memoizedProps&&dt===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&dt===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=pt),C.props=m,C.state=pt,C.context=Q,m=_t):(typeof C.componentDidUpdate!="function"||O===i.memoizedProps&&dt===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&dt===i.memoizedState||(a.flags|=1024),m=!1)}return C=m,ff(i,a),m=(a.flags&128)!==0,C||m?(C=a.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:C.render(),a.flags|=1,i!==null&&m?(a.child=nc(a,i.child,null,_),a.child=nc(a,null,u,_)):Ri(i,a,u,_),a.memoizedState=C.state,i=a.child):i=Ca(i,a,_),i}function tE(i,a,u,m){return tu(),a.flags|=256,Ri(i,a,u,m),a.child}var E1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function A1(i){return{baseLanes:i,cachePool:zy()}}function x1(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=Jr),i}function eE(i,a,u){var m=a.pendingProps,_=!1,C=(a.flags&128)!==0,O;if((O=C)||(O=i!==null&&i.memoizedState===null?!1:(hi.current&2)!==0),O&&(_=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,i===null){if(Qe){if(_?no(a):io(),Qe){var B=Fn,Q;if(Q=B){t:{for(Q=B,B=Bs;Q.nodeType!==8;){if(!B){B=null;break t}if(Q=As(Q.nextSibling),Q===null){B=null;break t}}B=Q}B!==null?(a.memoizedState={dehydrated:B,treeContext:$o!==null?{id:Aa,overflow:xa}:null,retryLane:536870912,hydrationErrors:null},Q=Mr(18,null,null,0),Q.stateNode=B,Q.return=a,a.child=Q,ir=a,Fn=null,Q=!0):Q=!1}Q||nl(a)}if(B=a.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return ig(B)?a.lanes=32:a.lanes=536870912,null;va(a)}return B=m.children,m=m.fallback,_?(io(),_=a.mode,B=df({mode:"hidden",children:B},_),m=Jo(m,_,u,null),B.return=a,m.return=a,B.sibling=m,a.child=B,_=a.child,_.memoizedState=A1(u),_.childLanes=x1(i,O,u),a.memoizedState=E1,m):(no(a),w1(a,B))}if(Q=i.memoizedState,Q!==null&&(B=Q.dehydrated,B!==null)){if(C)a.flags&256?(no(a),a.flags&=-257,a=_1(i,a,u)):a.memoizedState!==null?(io(),a.child=i.child,a.flags|=128,a=null):(io(),_=m.fallback,B=a.mode,m=df({mode:"visible",children:m.children},B),_=Jo(_,B,u,null),_.flags|=2,m.return=a,_.return=a,m.sibling=_,a.child=m,nc(a,i.child,null,u),m=a.child,m.memoizedState=A1(u),m.childLanes=x1(i,O,u),a.memoizedState=E1,a=_);else if(no(a),ig(B)){if(O=B.nextSibling&&B.nextSibling.dataset,O)var ft=O.dgst;O=ft,m=Error(r(419)),m.stack="",m.digest=O,eu({value:m,source:null,stack:null}),a=_1(i,a,u)}else if(Ai||nu(i,a,u,!1),O=(u&i.childLanes)!==0,Ai||O){if(O=gn,O!==null&&(m=u&-u,m=(m&42)!==0?1:aa(m),m=(m&(O.suspendedLanes|u))!==0?0:m,m!==0&&m!==Q.retryLane))throw Q.retryLane=m,ql(i,m),Vr(O,i,m),X2;B.data==="$?"||F1(),a=_1(i,a,u)}else B.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Q.treeContext,Fn=As(B.nextSibling),ir=a,Qe=!0,el=null,Bs=!1,i!==null&&(Wr[Qr++]=Aa,Wr[Qr++]=xa,Wr[Qr++]=$o,Aa=i.id,xa=i.overflow,$o=a),a=w1(a,m.children),a.flags|=4096);return a}return _?(io(),_=m.fallback,B=a.mode,Q=i.child,ft=Q.sibling,m=Ea(Q,{mode:"hidden",children:m.children}),m.subtreeFlags=Q.subtreeFlags&65011712,ft!==null?_=Ea(ft,_):(_=Jo(_,B,u,null),_.flags|=2),_.return=a,m.return=a,m.sibling=_,a.child=m,m=_,_=a.child,B=i.child.memoizedState,B===null?B=A1(u):(Q=B.cachePool,Q!==null?(ft=ui._currentValue,Q=Q.parent!==ft?{parent:ft,pool:ft}:Q):Q=zy(),B={baseLanes:B.baseLanes|u,cachePool:Q}),_.memoizedState=B,_.childLanes=x1(i,O,u),a.memoizedState=E1,m):(no(a),u=i.child,i=u.sibling,u=Ea(u,{mode:"visible",children:m.children}),u.return=a,u.sibling=null,i!==null&&(O=a.deletions,O===null?(a.deletions=[i],a.flags|=16):O.push(i)),a.child=u,a.memoizedState=null,u)}function w1(i,a){return a=df({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function df(i,a){return i=Mr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function _1(i,a,u){return nc(a,i.child,null,u),i=w1(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function nE(i,a,u){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),F0(i.return,a,u)}function T1(i,a,u,m,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:_}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=u,C.tailMode=_)}function iE(i,a,u){var m=a.pendingProps,_=m.revealOrder,C=m.tail;if(Ri(i,a,m.children,u),m=hi.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&nE(i,u,a);else if(i.tag===19)nE(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}switch(Vt(hi,m),_){case"forwards":for(u=a.child,_=null;u!==null;)i=u.alternate,i!==null&&cf(i)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),T1(a,!1,_,u,C);break;case"backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(i=_.alternate,i!==null&&cf(i)===null){a.child=_;break}i=_.sibling,_.sibling=u,u=_,_=i}T1(a,!0,u,null,C);break;case"together":T1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ca(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),lo|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(nu(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,u=Ea(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Ea(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function v1(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Xh(i)))}function h3(i,a,u){switch(a.tag){case 3:ce(a,a.stateNode.containerInfo),Za(a,ui,i.memoizedState.cache),tu();break;case 27:case 5:os(a);break;case 4:ce(a,a.stateNode.containerInfo);break;case 10:Za(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(no(a),a.flags|=128,null):(u&a.child.childLanes)!==0?eE(i,a,u):(no(a),i=Ca(i,a,u),i!==null?i.sibling:null);no(a);break;case 19:var _=(i.flags&128)!==0;if(m=(u&a.childLanes)!==0,m||(nu(i,a,u,!1),m=(u&a.childLanes)!==0),_){if(m)return iE(i,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Vt(hi,hi.current),m)break;return null;case 22:case 23:return a.lanes=0,Q2(i,a,u);case 24:Za(a,ui,i.memoizedState.cache)}return Ca(i,a,u)}function rE(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)Ai=!0;else{if(!v1(i,u)&&(a.flags&128)===0)return Ai=!1,h3(i,a,u);Ai=(i.flags&131072)!==0}else Ai=!1,Qe&&(a.flags&1048576)!==0&&Py(a,qh,a.index);switch(a.lanes=0,a.tag){case 16:t:{i=a.pendingProps;var m=a.elementType,_=m._init;if(m=_(m._payload),a.type=m,typeof m=="function")M0(m)?(i=ol(m,i),a.tag=1,a=$2(null,a,m,i,u)):(a.tag=0,a=y1(null,a,m,i,u));else{if(m!=null){if(_=m.$$typeof,_===At){a.tag=11,a=Y2(null,a,m,i,u);break t}else if(_===H){a.tag=14,a=K2(null,a,m,i,u);break t}}throw a=Jt(m)||m,Error(r(306,a,""))}}return a;case 0:return y1(i,a,a.type,a.pendingProps,u);case 1:return m=a.type,_=ol(m,a.pendingProps),$2(i,a,m,_,u);case 3:t:{if(ce(a,a.stateNode.containerInfo),i===null)throw Error(r(387));m=a.pendingProps;var C=a.memoizedState;_=C.element,Y0(i,a),cu(a,m,null,u);var O=a.memoizedState;if(m=O.cache,Za(a,ui,m),m!==C.cache&&z0(a,[ui],u,!0),lu(),m=O.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=C,a.memoizedState=C,a.flags&256){a=tE(i,a,m,u);break t}else if(m!==_){_=Yr(Error(r(424)),a),eu(_),a=tE(i,a,m,u);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Fn=As(i.firstChild),ir=a,Qe=!0,el=null,Bs=!0,u=k2(a,null,m,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(tu(),m===_){a=Ca(i,a,u);break t}Ri(i,a,m,u)}a=a.child}return a;case 26:return ff(i,a),i===null?(u=lA(a.type,null,a.pendingProps,null))?a.memoizedState=u:Qe||(u=a.type,i=a.pendingProps,m=Sf(Ot.current).createElement(u),m[In]=a,m[mn]=i,Di(m,u,i),ze(m),a.stateNode=m):a.memoizedState=lA(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return os(a),i===null&&Qe&&(m=a.stateNode=sA(a.type,a.pendingProps,Ot.current),ir=a,Bs=!0,_=Fn,fo(a.type)?(rg=_,Fn=As(m.firstChild)):Fn=_),Ri(i,a,a.pendingProps.children,u),ff(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Qe&&((_=m=Fn)&&(m=U3(m,a.type,a.pendingProps,Bs),m!==null?(a.stateNode=m,ir=a,Fn=As(m.firstChild),Bs=!1,_=!0):_=!1),_||nl(a)),os(a),_=a.type,C=a.pendingProps,O=i!==null?i.memoizedProps:null,m=C.children,tg(_,C)?m=null:O!==null&&tg(_,O)&&(a.flags|=32),a.memoizedState!==null&&(_=$0(i,a,i3,null,null,u),Du._currentValue=_),ff(i,a),Ri(i,a,m,u),a.child;case 6:return i===null&&Qe&&((i=u=Fn)&&(u=F3(u,a.pendingProps,Bs),u!==null?(a.stateNode=u,ir=a,Fn=null,i=!0):i=!1),i||nl(a)),null;case 13:return eE(i,a,u);case 4:return ce(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=nc(a,null,m,u):Ri(i,a,m,u),a.child;case 11:return Y2(i,a,a.type,a.pendingProps,u);case 7:return Ri(i,a,a.pendingProps,u),a.child;case 8:return Ri(i,a,a.pendingProps.children,u),a.child;case 12:return Ri(i,a,a.pendingProps.children,u),a.child;case 10:return m=a.pendingProps,Za(a,a.type,m.value),Ri(i,a,m.children,u),a.child;case 9:return _=a.type._context,m=a.pendingProps.children,rl(a),_=Gi(_),m=m(_),a.flags|=1,Ri(i,a,m,u),a.child;case 14:return K2(i,a,a.type,a.pendingProps,u);case 15:return W2(i,a,a.type,a.pendingProps,u);case 19:return iE(i,a,u);case 31:return m=a.pendingProps,u=a.mode,m={mode:m.mode,children:m.children},i===null?(u=df(m,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=Ea(i.child,m),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return Q2(i,a,u);case 24:return rl(a),m=Gi(ui),i===null?(_=G0(),_===null&&(_=gn,C=H0(),_.pooledCache=C,C.refCount++,C!==null&&(_.pooledCacheLanes|=u),_=C),a.memoizedState={parent:m,cache:_},X0(a),Za(a,ui,_)):((i.lanes&u)!==0&&(Y0(i,a),cu(a,null,null,u),lu()),_=i.memoizedState,C=a.memoizedState,_.parent!==m?(_={parent:m,cache:m},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),Za(a,ui,m)):(m=C.cache,Za(a,ui,m),m!==_.cache&&z0(a,[ui],u,!0))),Ri(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ba(i){i.flags|=4}function sE(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!dA(a)){if(a=Zr.current,a!==null&&((ke&4194048)===ke?Vs!==null:(ke&62914560)!==ke&&(ke&536870912)===0||a!==Vs))throw au=q0,Hy;i.flags|=8192}}function gf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?hs():536870912,i.lanes|=a,ac|=a)}function pu(i,a){if(!Qe)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Dn(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,m=0;if(a)for(var _=i.child;_!==null;)u|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)u|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=m,i.childLanes=u,a}function f3(i,a,u){var m=a.pendingProps;switch(B0(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(a),null;case 1:return Dn(a),null;case 3:return u=a.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),_a(ui),vi(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&($c(a)?ba(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,By())),Dn(a),null;case 26:return u=a.memoizedState,i===null?(ba(a),u!==null?(Dn(a),sE(a,u)):(Dn(a),a.flags&=-16777217)):u?u!==i.memoizedState?(ba(a),Dn(a),sE(a,u)):(Dn(a),a.flags&=-16777217):(i.memoizedProps!==m&&ba(a),Dn(a),a.flags&=-16777217),null;case 27:Xn(a),u=Ot.current;var _=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==m&&ba(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return Dn(a),null}i=zt.current,$c(a)?Ly(a):(i=sA(_,m,u),a.stateNode=i,ba(a))}return Dn(a),null;case 5:if(Xn(a),u=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==m&&ba(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return Dn(a),null}if(i=zt.current,$c(a))Ly(a);else{switch(_=Sf(Ot.current),i){case 1:i=_.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=_.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=_.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof m.is=="string"?_.createElement("select",{is:m.is}):_.createElement("select"),m.multiple?i.multiple=!0:m.size&&(i.size=m.size);break;default:i=typeof m.is=="string"?_.createElement(u,{is:m.is}):_.createElement(u)}}i[In]=a,i[mn]=m;t:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)i.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break t;for(;_.sibling===null;){if(_.return===null||_.return===a)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=i;t:switch(Di(i,u,m),u){case"button":case"input":case"select":case"textarea":i=!!m.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&ba(a)}}return Dn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==m&&ba(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(r(166));if(i=Ot.current,$c(a)){if(i=a.stateNode,u=a.memoizedProps,m=null,_=ir,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}i[In]=a,i=!!(i.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||JE(i.nodeValue,u)),i||nl(a)}else i=Sf(i).createTextNode(m),i[In]=a,a.stateNode=i}return Dn(a),null;case 13:if(m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_=$c(a),m!==null&&m.dehydrated!==null){if(i===null){if(!_)throw Error(r(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[In]=a}else tu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),_=!1}else _=By(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(va(a),a):(va(a),null)}if(va(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=m!==null,i=i!==null&&i.memoizedState!==null,u){m=a.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==_&&(m.flags|=2048)}return u!==i&&u&&(a.child.flags|=8192),gf(a,a.updateQueue),Dn(a),null;case 4:return vi(),i===null&&W1(a.stateNode.containerInfo),Dn(a),null;case 10:return _a(a.type),Dn(a),null;case 19:if(Bt(hi),_=a.memoizedState,_===null)return Dn(a),null;if(m=(a.flags&128)!==0,C=_.rendering,C===null)if(m)pu(_,!1);else{if(zn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=cf(i),C!==null){for(a.flags|=128,pu(_,!1),i=C.updateQueue,a.updateQueue=i,gf(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)My(u,i),u=u.sibling;return Vt(hi,hi.current&1|2),a.child}i=i.sibling}_.tail!==null&&Fe()>yf&&(a.flags|=128,m=!0,pu(_,!1),a.lanes=4194304)}else{if(!m)if(i=cf(C),i!==null){if(a.flags|=128,m=!0,i=i.updateQueue,a.updateQueue=i,gf(a,i),pu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Qe)return Dn(a),null}else 2*Fe()-_.renderingStartTime>yf&&u!==536870912&&(a.flags|=128,m=!0,pu(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(i=_.last,i!==null?i.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=Fe(),a.sibling=null,i=hi.current,Vt(hi,m?i&1|2:i&1),a):(Dn(a),null);case 22:case 23:return va(a),Z0(),m=a.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(u&536870912)!==0&&(a.flags&128)===0&&(Dn(a),a.subtreeFlags&6&&(a.flags|=8192)):Dn(a),u=a.updateQueue,u!==null&&gf(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==u&&(a.flags|=2048),i!==null&&Bt(sl),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),_a(ui),Dn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function d3(i,a){switch(B0(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return _a(ui),vi(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Xn(a),null;case 13:if(va(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));tu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Bt(hi),null;case 4:return vi(),null;case 10:return _a(a.type),null;case 22:case 23:return va(a),Z0(),i!==null&&Bt(sl),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return _a(ui),null;case 25:return null;default:return null}}function aE(i,a){switch(B0(a),a.tag){case 3:_a(ui),vi();break;case 26:case 27:case 5:Xn(a);break;case 4:vi();break;case 13:va(a);break;case 19:Bt(hi);break;case 10:_a(a.type);break;case 22:case 23:va(a),Z0(),i!==null&&Bt(sl);break;case 24:_a(ui)}}function yu(i,a){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var _=m.next;u=_;do{if((u.tag&i)===i){m=void 0;var C=u.create,O=u.inst;m=C(),O.destroy=m}u=u.next}while(u!==_)}}catch(B){hn(a,a.return,B)}}function ro(i,a,u){try{var m=a.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var C=_.next;m=C;do{if((m.tag&i)===i){var O=m.inst,B=O.destroy;if(B!==void 0){O.destroy=void 0,_=a;var Q=u,ft=B;try{ft()}catch(_t){hn(_,Q,_t)}}}m=m.next}while(m!==C)}}catch(_t){hn(a,a.return,_t)}}function oE(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{Ky(a,u)}catch(m){hn(i,i.return,m)}}}function lE(i,a,u){u.props=ol(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(m){hn(i,a,m)}}function Eu(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof u=="function"?i.refCleanup=u(m):u.current=m}}catch(_){hn(i,a,_)}}function Us(i,a){var u=i.ref,m=i.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(_){hn(i,a,_)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){hn(i,a,_)}else u.current=null}function cE(i){var a=i.type,u=i.memoizedProps,m=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break t;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(_){hn(i,i.return,_)}}function C1(i,a,u){try{var m=i.stateNode;P3(m,i.type,u,a),m[mn]=a}catch(_){hn(i,i.return,_)}}function uE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fo(i.type)||i.tag===4}function b1(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||uE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fo(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function S1(i,a,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=bf));else if(m!==4&&(m===27&&fo(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(S1(i,a,u),i=i.sibling;i!==null;)S1(i,a,u),i=i.sibling}function mf(i,a,u){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(m!==4&&(m===27&&fo(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(mf(i,a,u),i=i.sibling;i!==null;)mf(i,a,u),i=i.sibling}function hE(i){var a=i.stateNode,u=i.memoizedProps;try{for(var m=i.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Di(a,m,u),a[In]=i,a[mn]=u}catch(C){hn(i,i.return,C)}}var Sa=!1,Zn=!1,I1=!1,fE=typeof WeakSet=="function"?WeakSet:Set,xi=null;function g3(i,a){if(i=i.containerInfo,J1=Mf,i=b(i),R(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var _=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break t}var O=0,B=-1,Q=-1,ft=0,_t=0,St=i,dt=null;e:for(;;){for(var pt;St!==u||_!==0&&St.nodeType!==3||(B=O+_),St!==C||m!==0&&St.nodeType!==3||(Q=O+m),St.nodeType===3&&(O+=St.nodeValue.length),(pt=St.firstChild)!==null;)dt=St,St=pt;for(;;){if(St===i)break e;if(dt===u&&++ft===_&&(B=O),dt===C&&++_t===m&&(Q=O),(pt=St.nextSibling)!==null)break;St=dt,dt=St.parentNode}St=pt}u=B===-1||Q===-1?null:{start:B,end:Q}}else u=null}u=u||{start:0,end:0}}else u=null;for($1={focusedElem:i,selectionRange:u},Mf=!1,xi=a;xi!==null;)if(a=xi,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,xi=i;else for(;xi!==null;){switch(a=xi,C=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&C!==null){i=void 0,u=a,_=C.memoizedProps,C=C.memoizedState,m=u.stateNode;try{var oe=ol(u.type,_,u.elementType===u.type);i=m.getSnapshotBeforeUpdate(oe,C),m.__reactInternalSnapshotBeforeUpdate=i}catch(ee){hn(u,u.return,ee)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)ng(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ng(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,xi=i;break}xi=a.return}}function dE(i,a,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:so(i,u),m&4&&yu(5,u);break;case 1:if(so(i,u),m&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(O){hn(u,u.return,O)}else{var _=ol(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(_,a,i.__reactInternalSnapshotBeforeUpdate)}catch(O){hn(u,u.return,O)}}m&64&&oE(u),m&512&&Eu(u,u.return);break;case 3:if(so(i,u),m&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Ky(i,a)}catch(O){hn(u,u.return,O)}}break;case 27:a===null&&m&4&&hE(u);case 26:case 5:so(i,u),a===null&&m&4&&cE(u),m&512&&Eu(u,u.return);break;case 12:so(i,u);break;case 13:so(i,u),m&4&&pE(i,u),m&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=T3.bind(null,u),z3(i,u))));break;case 22:if(m=u.memoizedState!==null||Sa,!m){a=a!==null&&a.memoizedState!==null||Zn,_=Sa;var C=Zn;Sa=m,(Zn=a)&&!C?ao(i,u,(u.subtreeFlags&8772)!==0):so(i,u),Sa=_,Zn=C}break;case 30:break;default:so(i,u)}}function gE(i){var a=i.alternate;a!==null&&(i.alternate=null,gE(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&bs(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Cn=null,hr=!1;function Ia(i,a,u){for(u=u.child;u!==null;)mE(i,a,u),u=u.sibling}function mE(i,a,u){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(ti,u)}catch{}switch(u.tag){case 26:Zn||Us(u,a),Ia(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Zn||Us(u,a);var m=Cn,_=hr;fo(u.type)&&(Cn=u.stateNode,hr=!1),Ia(i,a,u),Su(u.stateNode),Cn=m,hr=_;break;case 5:Zn||Us(u,a);case 6:if(m=Cn,_=hr,Cn=null,Ia(i,a,u),Cn=m,hr=_,Cn!==null)if(hr)try{(Cn.nodeType===9?Cn.body:Cn.nodeName==="HTML"?Cn.ownerDocument.body:Cn).removeChild(u.stateNode)}catch(C){hn(u,a,C)}else try{Cn.removeChild(u.stateNode)}catch(C){hn(u,a,C)}break;case 18:Cn!==null&&(hr?(i=Cn,iA(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Lu(i)):iA(Cn,u.stateNode));break;case 4:m=Cn,_=hr,Cn=u.stateNode.containerInfo,hr=!0,Ia(i,a,u),Cn=m,hr=_;break;case 0:case 11:case 14:case 15:Zn||ro(2,u,a),Zn||ro(4,u,a),Ia(i,a,u);break;case 1:Zn||(Us(u,a),m=u.stateNode,typeof m.componentWillUnmount=="function"&&lE(u,a,m)),Ia(i,a,u);break;case 21:Ia(i,a,u);break;case 22:Zn=(m=Zn)||u.memoizedState!==null,Ia(i,a,u),Zn=m;break;default:Ia(i,a,u)}}function pE(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Lu(i)}catch(u){hn(a,a.return,u)}}function m3(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new fE),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new fE),a;default:throw Error(r(435,i.tag))}}function R1(i,a){var u=m3(i);a.forEach(function(m){var _=v3.bind(null,i,m);u.has(m)||(u.add(m),m.then(_,_))})}function Pr(i,a){var u=a.deletions;if(u!==null)for(var m=0;m<u.length;m++){var _=u[m],C=i,O=a,B=O;t:for(;B!==null;){switch(B.tag){case 27:if(fo(B.type)){Cn=B.stateNode,hr=!1;break t}break;case 5:Cn=B.stateNode,hr=!1;break t;case 3:case 4:Cn=B.stateNode.containerInfo,hr=!0;break t}B=B.return}if(Cn===null)throw Error(r(160));mE(C,O,_),Cn=null,hr=!1,C=_.alternate,C!==null&&(C.return=null),_.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)yE(a,i),a=a.sibling}var Es=null;function yE(i,a){var u=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Pr(a,i),Lr(i),m&4&&(ro(3,i,i.return),yu(3,i),ro(5,i,i.return));break;case 1:Pr(a,i),Lr(i),m&512&&(Zn||u===null||Us(u,u.return)),m&64&&Sa&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var _=Es;if(Pr(a,i),Lr(i),m&512&&(Zn||u===null||Us(u,u.return)),m&4){var C=u!==null?u.memoizedState:null;if(m=i.memoizedState,u===null)if(m===null)if(i.stateNode===null){t:{m=i.type,u=i.memoizedProps,_=_.ownerDocument||_;e:switch(m){case"title":C=_.getElementsByTagName("title")[0],(!C||C[Ji]||C[In]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=_.createElement(m),_.head.insertBefore(C,_.querySelector("head > title"))),Di(C,m,u),C[In]=i,ze(C),m=C;break t;case"link":var O=hA("link","href",_).get(m+(u.href||""));if(O){for(var B=0;B<O.length;B++)if(C=O[B],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(B,1);break e}}C=_.createElement(m),Di(C,m,u),_.head.appendChild(C);break;case"meta":if(O=hA("meta","content",_).get(m+(u.content||""))){for(B=0;B<O.length;B++)if(C=O[B],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(B,1);break e}}C=_.createElement(m),Di(C,m,u),_.head.appendChild(C);break;default:throw Error(r(468,m))}C[In]=i,ze(C),m=C}i.stateNode=m}else fA(_,i.type,i.stateNode);else i.stateNode=uA(_,m,i.memoizedProps);else C!==m?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,m===null?fA(_,i.type,i.stateNode):uA(_,m,i.memoizedProps)):m===null&&i.stateNode!==null&&C1(i,i.memoizedProps,u.memoizedProps)}break;case 27:Pr(a,i),Lr(i),m&512&&(Zn||u===null||Us(u,u.return)),u!==null&&m&4&&C1(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Pr(a,i),Lr(i),m&512&&(Zn||u===null||Us(u,u.return)),i.flags&32){_=i.stateNode;try{En(_,"")}catch(pt){hn(i,i.return,pt)}}m&4&&i.stateNode!=null&&(_=i.memoizedProps,C1(i,_,u!==null?u.memoizedProps:_)),m&1024&&(I1=!0);break;case 6:if(Pr(a,i),Lr(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,u=i.stateNode;try{u.nodeValue=m}catch(pt){hn(i,i.return,pt)}}break;case 3:if(Nf=null,_=Es,Es=If(a.containerInfo),Pr(a,i),Es=_,Lr(i),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Lu(a.containerInfo)}catch(pt){hn(i,i.return,pt)}I1&&(I1=!1,EE(i));break;case 4:m=Es,Es=If(i.stateNode.containerInfo),Pr(a,i),Lr(i),Es=m;break;case 12:Pr(a,i),Lr(i);break;case 13:Pr(a,i),Lr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(L1=Fe()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,R1(i,m)));break;case 22:_=i.memoizedState!==null;var Q=u!==null&&u.memoizedState!==null,ft=Sa,_t=Zn;if(Sa=ft||_,Zn=_t||Q,Pr(a,i),Zn=_t,Sa=ft,Lr(i),m&8192)t:for(a=i.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||Q||Sa||Zn||ll(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){Q=u=a;try{if(C=Q.stateNode,_)O=C.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{B=Q.stateNode;var St=Q.memoizedProps.style,dt=St!=null&&St.hasOwnProperty("display")?St.display:null;B.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(pt){hn(Q,Q.return,pt)}}}else if(a.tag===6){if(u===null){Q=a;try{Q.stateNode.nodeValue=_?"":Q.memoizedProps}catch(pt){hn(Q,Q.return,pt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=i.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,R1(i,u))));break;case 19:Pr(a,i),Lr(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,R1(i,m)));break;case 30:break;case 21:break;default:Pr(a,i),Lr(i)}}function Lr(i){var a=i.flags;if(a&2){try{for(var u,m=i.return;m!==null;){if(uE(m)){u=m;break}m=m.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var _=u.stateNode,C=b1(i);mf(i,C,_);break;case 5:var O=u.stateNode;u.flags&32&&(En(O,""),u.flags&=-33);var B=b1(i);mf(i,B,O);break;case 3:case 4:var Q=u.stateNode.containerInfo,ft=b1(i);S1(i,ft,Q);break;default:throw Error(r(161))}}catch(_t){hn(i,i.return,_t)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function EE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;EE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function so(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)dE(i,a.alternate,a),a=a.sibling}function ll(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:ro(4,a,a.return),ll(a);break;case 1:Us(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&lE(a,a.return,u),ll(a);break;case 27:Su(a.stateNode);case 26:case 5:Us(a,a.return),ll(a);break;case 22:a.memoizedState===null&&ll(a);break;case 30:ll(a);break;default:ll(a)}i=i.sibling}}function ao(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,_=i,C=a,O=C.flags;switch(C.tag){case 0:case 11:case 15:ao(_,C,u),yu(4,C);break;case 1:if(ao(_,C,u),m=C,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ft){hn(m,m.return,ft)}if(m=C,_=m.updateQueue,_!==null){var B=m.stateNode;try{var Q=_.shared.hiddenCallbacks;if(Q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Q.length;_++)Yy(Q[_],B)}catch(ft){hn(m,m.return,ft)}}u&&O&64&&oE(C),Eu(C,C.return);break;case 27:hE(C);case 26:case 5:ao(_,C,u),u&&m===null&&O&4&&cE(C),Eu(C,C.return);break;case 12:ao(_,C,u);break;case 13:ao(_,C,u),u&&O&4&&pE(_,C);break;case 22:C.memoizedState===null&&ao(_,C,u),Eu(C,C.return);break;case 30:break;default:ao(_,C,u)}a=a.sibling}}function N1(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&iu(u))}function D1(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&iu(i))}function Fs(i,a,u,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)AE(i,a,u,m),a=a.sibling}function AE(i,a,u,m){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(i,a,u,m),_&2048&&yu(9,a);break;case 1:Fs(i,a,u,m);break;case 3:Fs(i,a,u,m),_&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&iu(i)));break;case 12:if(_&2048){Fs(i,a,u,m),i=a.stateNode;try{var C=a.memoizedProps,O=C.id,B=C.onPostCommit;typeof B=="function"&&B(O,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){hn(a,a.return,Q)}}else Fs(i,a,u,m);break;case 13:Fs(i,a,u,m);break;case 23:break;case 22:C=a.stateNode,O=a.alternate,a.memoizedState!==null?C._visibility&2?Fs(i,a,u,m):Au(i,a):C._visibility&2?Fs(i,a,u,m):(C._visibility|=2,ic(i,a,u,m,(a.subtreeFlags&10256)!==0)),_&2048&&N1(O,a);break;case 24:Fs(i,a,u,m),_&2048&&D1(a.alternate,a);break;default:Fs(i,a,u,m)}}function ic(i,a,u,m,_){for(_=_&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var C=i,O=a,B=u,Q=m,ft=O.flags;switch(O.tag){case 0:case 11:case 15:ic(C,O,B,Q,_),yu(8,O);break;case 23:break;case 22:var _t=O.stateNode;O.memoizedState!==null?_t._visibility&2?ic(C,O,B,Q,_):Au(C,O):(_t._visibility|=2,ic(C,O,B,Q,_)),_&&ft&2048&&N1(O.alternate,O);break;case 24:ic(C,O,B,Q,_),_&&ft&2048&&D1(O.alternate,O);break;default:ic(C,O,B,Q,_)}a=a.sibling}}function Au(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,m=a,_=m.flags;switch(m.tag){case 22:Au(u,m),_&2048&&N1(m.alternate,m);break;case 24:Au(u,m),_&2048&&D1(m.alternate,m);break;default:Au(u,m)}a=a.sibling}}var xu=8192;function rc(i){if(i.subtreeFlags&xu)for(i=i.child;i!==null;)xE(i),i=i.sibling}function xE(i){switch(i.tag){case 26:rc(i),i.flags&xu&&i.memoizedState!==null&&tI(Es,i.memoizedState,i.memoizedProps);break;case 5:rc(i);break;case 3:case 4:var a=Es;Es=If(i.stateNode.containerInfo),rc(i),Es=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=xu,xu=16777216,rc(i),xu=a):rc(i));break;default:rc(i)}}function wE(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function wu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var m=a[u];xi=m,TE(m,i)}wE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_E(i),i=i.sibling}function _E(i){switch(i.tag){case 0:case 11:case 15:wu(i),i.flags&2048&&ro(9,i,i.return);break;case 3:wu(i);break;case 12:wu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,pf(i)):wu(i);break;default:wu(i)}}function pf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var m=a[u];xi=m,TE(m,i)}wE(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:ro(8,a,a.return),pf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,pf(a));break;default:pf(a)}i=i.sibling}}function TE(i,a){for(;xi!==null;){var u=xi;switch(u.tag){case 0:case 11:case 15:ro(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:iu(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,xi=m;else t:for(u=i;xi!==null;){m=xi;var _=m.sibling,C=m.return;if(gE(m),m===u){xi=null;break t}if(_!==null){_.return=C,xi=_;break t}xi=C}}}var p3={getCacheForType:function(i){var a=Gi(ui),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u}},y3=typeof WeakMap=="function"?WeakMap:Map,en=0,gn=null,Se=null,ke=0,nn=0,kr=null,oo=!1,sc=!1,O1=!1,Ra=0,zn=0,lo=0,cl=0,M1=0,Jr=0,ac=0,_u=null,fr=null,P1=!1,L1=0,yf=1/0,Ef=null,co=null,Ni=0,uo=null,oc=null,lc=0,k1=0,B1=null,vE=null,Tu=0,V1=null;function Br(){if((en&2)!==0&&ke!==0)return ke&-ke;if(yt.T!==null){var i=Wl;return i!==0?i:q1()}return ki()}function CE(){Jr===0&&(Jr=(ke&536870912)===0||Qe?sa():536870912);var i=Zr.current;return i!==null&&(i.flags|=32),Jr}function Vr(i,a,u){(i===gn&&(nn===2||nn===9)||i.cancelPendingCommit!==null)&&(cc(i,0),ho(i,ke,Jr,!1)),$e(i,u),((en&2)===0||i!==gn)&&(i===gn&&((en&2)===0&&(cl|=u),zn===4&&ho(i,ke,Jr,!1)),zs(i))}function bE(i,a,u){if((en&6)!==0)throw Error(r(327));var m=!u&&(a&124)===0&&(a&i.expiredLanes)===0||We(i,a),_=m?x3(i,a):z1(i,a,!0),C=m;do{if(_===0){sc&&!m&&ho(i,a,0,!1);break}else{if(u=i.current.alternate,C&&!E3(u)){_=z1(i,a,!1),C=!1;continue}if(_===2){if(C=a,i.errorRecoveryDisabledLanes&C)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;t:{var B=i;_=_u;var Q=B.current.memoizedState.isDehydrated;if(Q&&(cc(B,O).flags|=256),O=z1(B,O,!1),O!==2){if(O1&&!Q){B.errorRecoveryDisabledLanes|=C,cl|=C,_=4;break t}C=fr,fr=_,C!==null&&(fr===null?fr=C:fr.push.apply(fr,C))}_=O}if(C=!1,_!==2)continue}}if(_===1){cc(i,0),ho(i,a,0,!0);break}t:{switch(m=i,C=_,C){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:ho(m,a,Jr,!oo);break t;case 2:fr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(_=L1+300-Fe(),10<_)){if(ho(m,a,Jr,!oo),Ae(m,0,!0)!==0)break t;m.timeoutHandle=eA(SE.bind(null,m,u,fr,Ef,P1,a,Jr,cl,ac,oo,C,2,-0,0),_);break t}SE(m,u,fr,Ef,P1,a,Jr,cl,ac,oo,C,0,-0,0)}}break}while(!0);zs(i)}function SE(i,a,u,m,_,C,O,B,Q,ft,_t,St,dt,pt){if(i.timeoutHandle=-1,St=a.subtreeFlags,(St&8192||(St&16785408)===16785408)&&(Nu={stylesheets:null,count:0,unsuspend:$3},xE(a),St=eI(),St!==null)){i.cancelPendingCommit=St(PE.bind(null,i,a,C,u,m,_,O,B,Q,_t,1,dt,pt)),ho(i,C,O,!ft);return}PE(i,a,C,u,m,_,O,B,Q)}function E3(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var _=u[m],C=_.getSnapshot;_=_.value;try{if(!f(C(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ho(i,a,u,m){a&=~M1,a&=~cl,i.suspendedLanes|=a,i.pingedLanes&=~a,m&&(i.warmLanes|=a),m=i.expirationTimes;for(var _=a;0<_;){var C=31-Xe(_),O=1<<C;m[C]=-1,_&=~O}u!==0&&fs(i,u,a)}function Af(){return(en&6)===0?(vu(0),!1):!0}function U1(){if(Se!==null){if(nn===0)var i=Se.return;else i=Se,wa=il=null,n1(i),ec=null,gu=0,i=Se;for(;i!==null;)aE(i.alternate,i),i=i.return;Se=null}}function cc(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,k3(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),U1(),gn=i,Se=u=Ea(i.current,null),ke=a,nn=0,kr=null,oo=!1,sc=We(i,a),O1=!1,ac=Jr=M1=cl=lo=zn=0,fr=_u=null,P1=!1,(a&8)!==0&&(a|=a&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=a;0<m;){var _=31-Xe(m),C=1<<_;a|=i[_],m&=~C}return Ra=a,Fh(),u}function IE(i,a){_e=null,yt.H=af,a===su||a===Wh?(a=qy(),nn=3):a===Hy?(a=qy(),nn=4):nn=a===X2?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kr=a,Se===null&&(zn=1,hf(i,Yr(a,i.current)))}function RE(){var i=yt.H;return yt.H=af,i===null?af:i}function NE(){var i=yt.A;return yt.A=p3,i}function F1(){zn=4,oo||(ke&4194048)!==ke&&Zr.current!==null||(sc=!0),(lo&134217727)===0&&(cl&134217727)===0||gn===null||ho(gn,ke,Jr,!1)}function z1(i,a,u){var m=en;en|=2;var _=RE(),C=NE();(gn!==i||ke!==a)&&(Ef=null,cc(i,a)),a=!1;var O=zn;t:do try{if(nn!==0&&Se!==null){var B=Se,Q=kr;switch(nn){case 8:U1(),O=6;break t;case 3:case 2:case 9:case 6:Zr.current===null&&(a=!0);var ft=nn;if(nn=0,kr=null,uc(i,B,Q,ft),u&&sc){O=0;break t}break;default:ft=nn,nn=0,kr=null,uc(i,B,Q,ft)}}A3(),O=zn;break}catch(_t){IE(i,_t)}while(!0);return a&&i.shellSuspendCounter++,wa=il=null,en=m,yt.H=_,yt.A=C,Se===null&&(gn=null,ke=0,Fh()),O}function A3(){for(;Se!==null;)DE(Se)}function x3(i,a){var u=en;en|=2;var m=RE(),_=NE();gn!==i||ke!==a?(Ef=null,yf=Fe()+500,cc(i,a)):sc=We(i,a);t:do try{if(nn!==0&&Se!==null){a=Se;var C=kr;e:switch(nn){case 1:nn=0,kr=null,uc(i,a,C,1);break;case 2:case 9:if(jy(C)){nn=0,kr=null,OE(a);break}a=function(){nn!==2&&nn!==9||gn!==i||(nn=7),zs(i)},C.then(a,a);break t;case 3:nn=7;break t;case 4:nn=5;break t;case 7:jy(C)?(nn=0,kr=null,OE(a)):(nn=0,kr=null,uc(i,a,C,7));break;case 5:var O=null;switch(Se.tag){case 26:O=Se.memoizedState;case 5:case 27:var B=Se;if(!O||dA(O)){nn=0,kr=null;var Q=B.sibling;if(Q!==null)Se=Q;else{var ft=B.return;ft!==null?(Se=ft,xf(ft)):Se=null}break e}}nn=0,kr=null,uc(i,a,C,5);break;case 6:nn=0,kr=null,uc(i,a,C,6);break;case 8:U1(),zn=6;break t;default:throw Error(r(462))}}w3();break}catch(_t){IE(i,_t)}while(!0);return wa=il=null,yt.H=m,yt.A=_,en=u,Se!==null?0:(gn=null,ke=0,Fh(),zn)}function w3(){for(;Se!==null&&!sr();)DE(Se)}function DE(i){var a=rE(i.alternate,i,Ra);i.memoizedProps=i.pendingProps,a===null?xf(i):Se=a}function OE(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=J2(u,a,a.pendingProps,a.type,void 0,ke);break;case 11:a=J2(u,a,a.pendingProps,a.type.render,a.ref,ke);break;case 5:n1(a);default:aE(u,a),a=Se=My(a,Ra),a=rE(u,a,Ra)}i.memoizedProps=i.pendingProps,a===null?xf(i):Se=a}function uc(i,a,u,m){wa=il=null,n1(a),ec=null,gu=0;var _=a.return;try{if(u3(i,_,a,u,ke)){zn=1,hf(i,Yr(u,i.current)),Se=null;return}}catch(C){if(_!==null)throw Se=_,C;zn=1,hf(i,Yr(u,i.current)),Se=null;return}a.flags&32768?(Qe||m===1?i=!0:sc||(ke&536870912)!==0?i=!1:(oo=i=!0,(m===2||m===9||m===3||m===6)&&(m=Zr.current,m!==null&&m.tag===13&&(m.flags|=16384))),ME(a,i)):xf(a)}function xf(i){var a=i;do{if((a.flags&32768)!==0){ME(a,oo);return}i=a.return;var u=f3(a.alternate,a,Ra);if(u!==null){Se=u;return}if(a=a.sibling,a!==null){Se=a;return}Se=a=i}while(a!==null);zn===0&&(zn=5)}function ME(i,a){do{var u=d3(i.alternate,i);if(u!==null){u.flags&=32767,Se=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){Se=i;return}Se=i=u}while(i!==null);zn=6,Se=null}function PE(i,a,u,m,_,C,O,B,Q){i.cancelPendingCommit=null;do wf();while(Ni!==0);if((en&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(C=a.lanes|a.childLanes,C|=D0,qo(i,u,C,O,B,Q),i===gn&&(Se=gn=null,ke=0),oc=a,uo=i,lc=u,k1=C,B1=_,vE=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,C3(Ht,function(){return UE(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=yt.T,yt.T=null,_=xt.p,xt.p=2,O=en,en|=4;try{g3(i,a,u)}finally{en=O,xt.p=_,yt.T=m}}Ni=1,LE(),kE(),BE()}}function LE(){if(Ni===1){Ni=0;var i=uo,a=oc,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=yt.T,yt.T=null;var m=xt.p;xt.p=2;var _=en;en|=4;try{yE(a,i);var C=$1,O=b(i.containerInfo),B=C.focusedElem,Q=C.selectionRange;if(O!==B&&B&&B.ownerDocument&&v(B.ownerDocument.documentElement,B)){if(Q!==null&&R(B)){var ft=Q.start,_t=Q.end;if(_t===void 0&&(_t=ft),"selectionStart"in B)B.selectionStart=ft,B.selectionEnd=Math.min(_t,B.value.length);else{var St=B.ownerDocument||document,dt=St&&St.defaultView||window;if(dt.getSelection){var pt=dt.getSelection(),oe=B.textContent.length,ee=Math.min(Q.start,oe),cn=Q.end===void 0?ee:Math.min(Q.end,oe);!pt.extend&&ee>cn&&(O=cn,cn=ee,ee=O);var at=x(B,ee),rt=x(B,cn);if(at&&rt&&(pt.rangeCount!==1||pt.anchorNode!==at.node||pt.anchorOffset!==at.offset||pt.focusNode!==rt.node||pt.focusOffset!==rt.offset)){var ut=St.createRange();ut.setStart(at.node,at.offset),pt.removeAllRanges(),ee>cn?(pt.addRange(ut),pt.extend(rt.node,rt.offset)):(ut.setEnd(rt.node,rt.offset),pt.addRange(ut))}}}}for(St=[],pt=B;pt=pt.parentNode;)pt.nodeType===1&&St.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<St.length;B++){var vt=St[B];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}Mf=!!J1,$1=J1=null}finally{en=_,xt.p=m,yt.T=u}}i.current=a,Ni=2}}function kE(){if(Ni===2){Ni=0;var i=uo,a=oc,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=yt.T,yt.T=null;var m=xt.p;xt.p=2;var _=en;en|=4;try{dE(i,a.alternate,a)}finally{en=_,xt.p=m,yt.T=u}}Ni=3}}function BE(){if(Ni===4||Ni===3){Ni=0,cs();var i=uo,a=oc,u=lc,m=vE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ni=5:(Ni=0,oc=uo=null,VE(i,i.pendingLanes));var _=i.pendingLanes;if(_===0&&(co=null),kn(u),a=a.stateNode,oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(ti,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=yt.T,_=xt.p,xt.p=2,yt.T=null;try{for(var C=i.onRecoverableError,O=0;O<m.length;O++){var B=m[O];C(B.value,{componentStack:B.stack})}}finally{yt.T=a,xt.p=_}}(lc&3)!==0&&wf(),zs(i),_=i.pendingLanes,(u&4194090)!==0&&(_&42)!==0?i===V1?Tu++:(Tu=0,V1=i):Tu=0,vu(0)}}function VE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,iu(a)))}function wf(i){return LE(),kE(),BE(),UE()}function UE(){if(Ni!==5)return!1;var i=uo,a=k1;k1=0;var u=kn(lc),m=yt.T,_=xt.p;try{xt.p=32>u?32:u,yt.T=null,u=B1,B1=null;var C=uo,O=lc;if(Ni=0,oc=uo=null,lc=0,(en&6)!==0)throw Error(r(331));var B=en;if(en|=4,_E(C.current),AE(C,C.current,O,u),en=B,vu(0,!1),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(ti,C)}catch{}return!0}finally{xt.p=_,yt.T=m,VE(i,a)}}function FE(i,a,u){a=Yr(u,a),a=p1(i.stateNode,a,2),i=to(i,a,2),i!==null&&($e(i,2),zs(i))}function hn(i,a,u){if(i.tag===3)FE(i,i,u);else for(;a!==null;){if(a.tag===3){FE(a,i,u);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(co===null||!co.has(m))){i=Yr(u,i),u=G2(2),m=to(a,u,2),m!==null&&(q2(u,m,a,i),$e(m,2),zs(m));break}}a=a.return}}function H1(i,a,u){var m=i.pingCache;if(m===null){m=i.pingCache=new y3;var _=new Set;m.set(a,_)}else _=m.get(a),_===void 0&&(_=new Set,m.set(a,_));_.has(u)||(O1=!0,_.add(u),i=_3.bind(null,i,a,u),a.then(i,i))}function _3(i,a,u){var m=i.pingCache;m!==null&&m.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,gn===i&&(ke&u)===u&&(zn===4||zn===3&&(ke&62914560)===ke&&300>Fe()-L1?(en&2)===0&&cc(i,0):M1|=u,ac===ke&&(ac=0)),zs(i)}function zE(i,a){a===0&&(a=hs()),i=ql(i,a),i!==null&&($e(i,a),zs(i))}function T3(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),zE(i,u)}function v3(i,a){var u=0;switch(i.tag){case 13:var m=i.stateNode,_=i.memoizedState;_!==null&&(u=_.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(a),zE(i,u)}function C3(i,a){return we(i,a)}var _f=null,hc=null,j1=!1,Tf=!1,G1=!1,ul=0;function zs(i){i!==hc&&i.next===null&&(hc===null?_f=hc=i:hc=hc.next=i),Tf=!0,j1||(j1=!0,S3())}function vu(i,a){if(!G1&&Tf){G1=!0;do for(var u=!1,m=_f;m!==null;){if(i!==0){var _=m.pendingLanes;if(_===0)var C=0;else{var O=m.suspendedLanes,B=m.pingedLanes;C=(1<<31-Xe(42|i)+1)-1,C&=_&~(O&~B),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,qE(m,C))}else C=ke,C=Ae(m,m===gn?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(C&3)===0||We(m,C)||(u=!0,qE(m,C));m=m.next}while(u);G1=!1}}function b3(){HE()}function HE(){Tf=j1=!1;var i=0;ul!==0&&(L3()&&(i=ul),ul=0);for(var a=Fe(),u=null,m=_f;m!==null;){var _=m.next,C=jE(m,a);C===0?(m.next=null,u===null?_f=_:u.next=_,_===null&&(hc=u)):(u=m,(i!==0||(C&3)!==0)&&(Tf=!0)),m=_}vu(i)}function jE(i,a){for(var u=i.suspendedLanes,m=i.pingedLanes,_=i.expirationTimes,C=i.pendingLanes&-62914561;0<C;){var O=31-Xe(C),B=1<<O,Q=_[O];Q===-1?((B&u)===0||(B&m)!==0)&&(_[O]=Hr(B,a)):Q<=a&&(i.expiredLanes|=B),C&=~B}if(a=gn,u=ke,u=Ae(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,u===0||i===a&&(nn===2||nn===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Er(m),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||We(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(m!==null&&Er(m),kn(u)){case 2:case 8:u=Sn;break;case 32:u=Ht;break;case 268435456:u=qa;break;default:u=Ht}return m=GE.bind(null,i),u=we(u,m),i.callbackPriority=a,i.callbackNode=u,a}return m!==null&&m!==null&&Er(m),i.callbackPriority=2,i.callbackNode=null,2}function GE(i,a){if(Ni!==0&&Ni!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(wf()&&i.callbackNode!==u)return null;var m=ke;return m=Ae(i,i===gn?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(bE(i,m,a),jE(i,Fe()),i.callbackNode!=null&&i.callbackNode===u?GE.bind(null,i):null)}function qE(i,a){if(wf())return null;bE(i,a,!0)}function S3(){B3(function(){(en&6)!==0?we(Zt,b3):HE()})}function q1(){return ul===0&&(ul=sa()),ul}function XE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:vr(""+i)}function YE(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function I3(i,a,u,m,_){if(a==="submit"&&u&&u.stateNode===_){var C=XE((_[mn]||null).action),O=m.submitter;O&&(a=(a=O[mn]||null)?XE(a.formAction):O.getAttribute("formAction"),a!==null&&(C=a,O=null));var B=new Sr("action","action",null,m,_);i.push({event:B,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ul!==0){var Q=O?YE(_,O):new FormData(_);h1(u,{pending:!0,data:Q,method:_.method,action:C},null,Q)}}else typeof C=="function"&&(B.preventDefault(),Q=O?YE(_,O):new FormData(_),h1(u,{pending:!0,data:Q,method:_.method,action:C},C,Q))},currentTarget:_}]})}}for(var X1=0;X1<ks.length;X1++){var Y1=ks[X1],R3=Y1.toLowerCase(),N3=Y1[0].toUpperCase()+Y1.slice(1);Or(R3,"on"+N3)}Or(he,"onAnimationEnd"),Or(Ii,"onAnimationIteration"),Or(cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Hi,"onTransitionRun"),Or(tn,"onTransitionStart"),Or(ci,"onTransitionCancel"),Or(ji,"onTransitionEnd"),fn("onMouseEnter",["mouseout","mouseover"]),fn("onMouseLeave",["mouseout","mouseover"]),fn("onPointerEnter",["pointerout","pointerover"]),fn("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cu));function KE(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var m=i[u],_=m.event;m=m.listeners;t:{var C=void 0;if(a)for(var O=m.length-1;0<=O;O--){var B=m[O],Q=B.instance,ft=B.currentTarget;if(B=B.listener,Q!==C&&_.isPropagationStopped())break t;C=B,_.currentTarget=ft;try{C(_)}catch(_t){uf(_t)}_.currentTarget=null,C=Q}else for(O=0;O<m.length;O++){if(B=m[O],Q=B.instance,ft=B.currentTarget,B=B.listener,Q!==C&&_.isPropagationStopped())break t;C=B,_.currentTarget=ft;try{C(_)}catch(_t){uf(_t)}_.currentTarget=null,C=Q}}}}function Ie(i,a){var u=a[Bn];u===void 0&&(u=a[Bn]=new Set);var m=i+"__bubble";u.has(m)||(WE(a,i,2,!1),u.add(m))}function K1(i,a,u){var m=0;a&&(m|=4),WE(u,i,m,a)}var vf="_reactListening"+Math.random().toString(36).slice(2);function W1(i){if(!i[vf]){i[vf]=!0,Ul.forEach(function(u){u!=="selectionchange"&&(D3.has(u)||K1(u,!1,i),K1(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[vf]||(a[vf]=!0,K1("selectionchange",!1,a))}}function WE(i,a,u,m){switch(AA(a)){case 2:var _=rI;break;case 8:_=sI;break;default:_=cg}u=_.bind(null,a,u,i),_=void 0,!ie||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),m?_!==void 0?i.addEventListener(a,u,{capture:!0,passive:_}):i.addEventListener(a,u,!0):_!==void 0?i.addEventListener(a,u,{passive:_}):i.addEventListener(a,u,!1)}function Q1(i,a,u,m,_){var C=m;if((a&1)===0&&(a&2)===0&&m!==null)t:for(;;){if(m===null)return;var O=m.tag;if(O===3||O===4){var B=m.stateNode.containerInfo;if(B===_)break;if(O===4)for(O=m.return;O!==null;){var Q=O.tag;if((Q===3||Q===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;B!==null;){if(O=pn(B),O===null)return;if(Q=O.tag,Q===5||Q===6||Q===26||Q===27){m=C=O;continue t}B=B.parentNode}}m=m.return}Ui(function(){var ft=C,_t=Is(u),St=[];t:{var dt=ya.get(i);if(dt!==void 0){var pt=Sr,oe=i;switch(i){case"keypress":if(da(u)===0)break t;case"keydown":case"keyup":pt=Ms;break;case"focusin":oe="focus",pt=ms;break;case"focusout":oe="blur",pt=ms;break;case"beforeblur":case"afterblur":pt=ms;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Ve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Ne;break;case he:case Ii:case cr:pt=Wo;break;case ji:pt=I;break;case"scroll":case"scrollend":pt=Un;break;case"wheel":pt=F;break;case"copy":case"cut":case"paste":pt=de;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Ps;break;case"toggle":case"beforetoggle":pt=Et}var ee=(a&4)!==0,cn=!ee&&(i==="scroll"||i==="scrollend"),at=ee?dt!==null?dt+"Capture":null:dt;ee=[];for(var rt=ft,ut;rt!==null;){var vt=rt;if(ut=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||ut===null||at===null||(vt=Kt(rt,at),vt!=null&&ee.push(bu(rt,vt,ut))),cn)break;rt=rt.return}0<ee.length&&(dt=new pt(dt,oe,null,u,_t),St.push({event:dt,listeners:ee}))}}if((a&7)===0){t:{if(dt=i==="mouseover"||i==="pointerover",pt=i==="mouseout"||i==="pointerout",dt&&u!==ha&&(oe=u.relatedTarget||u.fromElement)&&(pn(oe)||oe[xr]))break t;if((pt||dt)&&(dt=_t.window===_t?_t:(dt=_t.ownerDocument)?dt.defaultView||dt.parentWindow:window,pt?(oe=u.relatedTarget||u.toElement,pt=ft,oe=oe?pn(oe):null,oe!==null&&(cn=h(oe),ee=oe.tag,oe!==cn||ee!==5&&ee!==27&&ee!==6)&&(oe=null)):(pt=null,oe=ft),pt!==oe)){if(ee=pa,vt="onMouseLeave",at="onMouseEnter",rt="mouse",(i==="pointerout"||i==="pointerover")&&(ee=Ps,vt="onPointerLeave",at="onPointerEnter",rt="pointer"),cn=pt==null?dt:wr(pt),ut=oe==null?dt:wr(oe),dt=new ee(vt,rt+"leave",pt,u,_t),dt.target=cn,dt.relatedTarget=ut,vt=null,pn(_t)===ft&&(ee=new ee(at,rt+"enter",oe,u,_t),ee.target=ut,ee.relatedTarget=cn,vt=ee),cn=vt,pt&&oe)e:{for(ee=pt,at=oe,rt=0,ut=ee;ut;ut=fc(ut))rt++;for(ut=0,vt=at;vt;vt=fc(vt))ut++;for(;0<rt-ut;)ee=fc(ee),rt--;for(;0<ut-rt;)at=fc(at),ut--;for(;rt--;){if(ee===at||at!==null&&ee===at.alternate)break e;ee=fc(ee),at=fc(at)}ee=null}else ee=null;pt!==null&&QE(St,dt,pt,ee,!1),oe!==null&&cn!==null&&QE(St,cn,oe,ee,!0)}}t:{if(dt=ft?wr(ft):window,pt=dt.nodeName&&dt.nodeName.toLowerCase(),pt==="select"||pt==="input"&&dt.type==="file")var qt=Vh;else if(Zo(dt))if(Zc)qt=o;else{qt=M;var be=jl}else pt=dt.nodeName,!pt||pt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?ft&&Yt(ft.elementType)&&(qt=Vh):qt=s;if(qt&&(qt=qt(i,ft))){nr(St,qt,u,_t);break t}be&&be(i,dt,ft),i==="focusout"&&ft&&dt.type==="number"&&ft.memoizedProps.value!=null&&ct(dt,"number",dt.value)}switch(be=ft?wr(ft):window,i){case"focusin":(Zo(be)||be.contentEditable==="true")&&(L=be,q=ft,$=null);break;case"focusout":$=q=L=null;break;case"mousedown":et=!0;break;case"contextmenu":case"mouseup":case"dragend":et=!1,lt(St,u,_t);break;case"selectionchange":if(P)break;case"keydown":case"keyup":lt(St,u,_t)}var Qt;if(ae)t:{switch(i){case"compositionstart":var re="onCompositionStart";break t;case"compositionend":re="onCompositionEnd";break t;case"compositionupdate":re="onCompositionUpdate";break t}re=void 0}else Dr?Ei(i,u)&&(re="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(re="onCompositionStart");re&&(vn&&u.locale!=="ko"&&(Dr||re!=="onCompositionStart"?re==="onCompositionEnd"&&Dr&&(Qt=Gr()):(or=_t,Ze="value"in or?or.value:or.textContent,Dr=!0)),be=Cf(ft,re),0<be.length&&(re=new Ds(re,i,null,u,_t),St.push({event:re,listeners:be}),Qt?re.data=Qt:(Qt=er(u),Qt!==null&&(re.data=Qt)))),(Qt=Ue?ys(i,u):R0(i,u))&&(re=Cf(ft,"onBeforeInput"),0<re.length&&(be=new Ds("onBeforeInput","beforeinput",null,u,_t),St.push({event:be,listeners:re}),be.data=Qt)),I3(St,i,ft,u,_t)}KE(St,a)})}function bu(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Cf(i,a){for(var u=a+"Capture",m=[];i!==null;){var _=i,C=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||C===null||(_=Kt(i,u),_!=null&&m.unshift(bu(i,_,C)),_=Kt(i,a),_!=null&&m.push(bu(i,_,C))),i.tag===3)return m;i=i.return}return[]}function fc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function QE(i,a,u,m,_){for(var C=a._reactName,O=[];u!==null&&u!==m;){var B=u,Q=B.alternate,ft=B.stateNode;if(B=B.tag,Q!==null&&Q===m)break;B!==5&&B!==26&&B!==27||ft===null||(Q=ft,_?(ft=Kt(u,C),ft!=null&&O.unshift(bu(u,ft,Q))):_||(ft=Kt(u,C),ft!=null&&O.push(bu(u,ft,Q)))),u=u.return}O.length!==0&&i.push({event:a,listeners:O})}var O3=/\r\n?/g,M3=/\u0000|\uFFFD/g;function ZE(i){return(typeof i=="string"?i:""+i).replace(O3,`
`).replace(M3,"")}function JE(i,a){return a=ZE(a),ZE(i)===a}function bf(){}function ln(i,a,u,m,_,C){switch(u){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||En(i,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&En(i,""+m);break;case"className":la(i,"class",m);break;case"tabIndex":la(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":la(i,u,m);break;case"style":yi(i,m,C);break;case"data":if(a!=="object"){la(i,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=vr(""+m),i.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(a!=="input"&&ln(i,a,"name",_.name,_,null),ln(i,a,"formEncType",_.formEncType,_,null),ln(i,a,"formMethod",_.formMethod,_,null),ln(i,a,"formTarget",_.formTarget,_,null)):(ln(i,a,"encType",_.encType,_,null),ln(i,a,"method",_.method,_,null),ln(i,a,"target",_.target,_,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(u);break}m=vr(""+m),i.setAttribute(u,m);break;case"onClick":m!=null&&(i.onclick=bf);break;case"onScroll":m!=null&&Ie("scroll",i);break;case"onScrollEnd":m!=null&&Ie("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(_.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}u=vr(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""+m):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":m===!0?i.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(u,m):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(u,m):i.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(u):i.setAttribute(u,m);break;case"popover":Ie("beforetoggle",i),Ie("toggle",i),Ct(i,"popover",m);break;case"xlinkActuate":Le(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Le(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Le(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Le(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Le(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Le(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Le(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Le(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Le(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ct(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=sn.get(u)||u,Ct(i,u,m))}}function Z1(i,a,u,m,_,C){switch(u){case"style":yi(i,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(_.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof m=="string"?En(i,m):(typeof m=="number"||typeof m=="bigint")&&En(i,""+m);break;case"onScroll":m!=null&&Ie("scroll",i);break;case"onScrollEnd":m!=null&&Ie("scrollend",i);break;case"onClick":m!=null&&(i.onclick=bf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),C=i[mn]||null,C=C!=null?C[u]:null,typeof C=="function"&&i.removeEventListener(a,C,_),typeof m=="function")){typeof C!="function"&&C!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,m,_);break t}u in i?i[u]=m:m===!0?i.setAttribute(u,""):Ct(i,u,m)}}}function Di(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",i),Ie("load",i);var m=!1,_=!1,C;for(C in u)if(u.hasOwnProperty(C)){var O=u[C];if(O!=null)switch(C){case"src":m=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ln(i,a,C,O,u,null)}}_&&ln(i,a,"srcSet",u.srcSet,u,null),m&&ln(i,a,"src",u.src,u,null);return;case"input":Ie("invalid",i);var B=C=O=_=null,Q=null,ft=null;for(m in u)if(u.hasOwnProperty(m)){var _t=u[m];if(_t!=null)switch(m){case"name":_=_t;break;case"type":O=_t;break;case"checked":Q=_t;break;case"defaultChecked":ft=_t;break;case"value":C=_t;break;case"defaultValue":B=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,a));break;default:ln(i,a,m,_t,u,null)}}Vn(i,C,B,Q,ft,O,_,!1),Ss(i);return;case"select":Ie("invalid",i),m=O=C=null;for(_ in u)if(u.hasOwnProperty(_)&&(B=u[_],B!=null))switch(_){case"value":C=B;break;case"defaultValue":O=B;break;case"multiple":m=B;default:ln(i,a,_,B,u,null)}a=C,u=O,i.multiple=!!m,a!=null?j(i,!!m,a,!1):u!=null&&j(i,!!m,u,!0);return;case"textarea":Ie("invalid",i),C=_=m=null;for(O in u)if(u.hasOwnProperty(O)&&(B=u[O],B!=null))switch(O){case"value":m=B;break;case"defaultValue":_=B;break;case"children":C=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:ln(i,a,O,B,u,null)}Rn(i,m,_,C),Ss(i);return;case"option":for(Q in u)if(u.hasOwnProperty(Q)&&(m=u[Q],m!=null))switch(Q){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ln(i,a,Q,m,u,null)}return;case"dialog":Ie("beforetoggle",i),Ie("toggle",i),Ie("cancel",i),Ie("close",i);break;case"iframe":case"object":Ie("load",i);break;case"video":case"audio":for(m=0;m<Cu.length;m++)Ie(Cu[m],i);break;case"image":Ie("error",i),Ie("load",i);break;case"details":Ie("toggle",i);break;case"embed":case"source":case"link":Ie("error",i),Ie("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in u)if(u.hasOwnProperty(ft)&&(m=u[ft],m!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ln(i,a,ft,m,u,null)}return;default:if(Yt(a)){for(_t in u)u.hasOwnProperty(_t)&&(m=u[_t],m!==void 0&&Z1(i,a,_t,m,u,void 0));return}}for(B in u)u.hasOwnProperty(B)&&(m=u[B],m!=null&&ln(i,a,B,m,u,null))}function P3(i,a,u,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,C=null,O=null,B=null,Q=null,ft=null,_t=null;for(pt in u){var St=u[pt];if(u.hasOwnProperty(pt)&&St!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":Q=St;default:m.hasOwnProperty(pt)||ln(i,a,pt,null,m,St)}}for(var dt in m){var pt=m[dt];if(St=u[dt],m.hasOwnProperty(dt)&&(pt!=null||St!=null))switch(dt){case"type":C=pt;break;case"name":_=pt;break;case"checked":ft=pt;break;case"defaultChecked":_t=pt;break;case"value":O=pt;break;case"defaultValue":B=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,a));break;default:pt!==St&&ln(i,a,dt,pt,m,St)}}je(i,O,B,Q,ft,_t,C,_);return;case"select":pt=O=B=dt=null;for(C in u)if(Q=u[C],u.hasOwnProperty(C)&&Q!=null)switch(C){case"value":break;case"multiple":pt=Q;default:m.hasOwnProperty(C)||ln(i,a,C,null,m,Q)}for(_ in m)if(C=m[_],Q=u[_],m.hasOwnProperty(_)&&(C!=null||Q!=null))switch(_){case"value":dt=C;break;case"defaultValue":B=C;break;case"multiple":O=C;default:C!==Q&&ln(i,a,_,C,m,Q)}a=B,u=O,m=pt,dt!=null?j(i,!!u,dt,!1):!!m!=!!u&&(a!=null?j(i,!!u,a,!0):j(i,!!u,u?[]:"",!1));return;case"textarea":pt=dt=null;for(B in u)if(_=u[B],u.hasOwnProperty(B)&&_!=null&&!m.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:ln(i,a,B,null,m,_)}for(O in m)if(_=m[O],C=u[O],m.hasOwnProperty(O)&&(_!=null||C!=null))switch(O){case"value":dt=_;break;case"defaultValue":pt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==C&&ln(i,a,O,_,m,C)}Xt(i,dt,pt);return;case"option":for(var oe in u)if(dt=u[oe],u.hasOwnProperty(oe)&&dt!=null&&!m.hasOwnProperty(oe))switch(oe){case"selected":i.selected=!1;break;default:ln(i,a,oe,null,m,dt)}for(Q in m)if(dt=m[Q],pt=u[Q],m.hasOwnProperty(Q)&&dt!==pt&&(dt!=null||pt!=null))switch(Q){case"selected":i.selected=dt&&typeof dt!="function"&&typeof dt!="symbol";break;default:ln(i,a,Q,dt,m,pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in u)dt=u[ee],u.hasOwnProperty(ee)&&dt!=null&&!m.hasOwnProperty(ee)&&ln(i,a,ee,null,m,dt);for(ft in m)if(dt=m[ft],pt=u[ft],m.hasOwnProperty(ft)&&dt!==pt&&(dt!=null||pt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(r(137,a));break;default:ln(i,a,ft,dt,m,pt)}return;default:if(Yt(a)){for(var cn in u)dt=u[cn],u.hasOwnProperty(cn)&&dt!==void 0&&!m.hasOwnProperty(cn)&&Z1(i,a,cn,void 0,m,dt);for(_t in m)dt=m[_t],pt=u[_t],!m.hasOwnProperty(_t)||dt===pt||dt===void 0&&pt===void 0||Z1(i,a,_t,dt,m,pt);return}}for(var at in u)dt=u[at],u.hasOwnProperty(at)&&dt!=null&&!m.hasOwnProperty(at)&&ln(i,a,at,null,m,dt);for(St in m)dt=m[St],pt=u[St],!m.hasOwnProperty(St)||dt===pt||dt==null&&pt==null||ln(i,a,St,dt,m,pt)}var J1=null,$1=null;function Sf(i){return i.nodeType===9?i:i.ownerDocument}function $E(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tA(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function tg(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var eg=null;function L3(){var i=window.event;return i&&i.type==="popstate"?i===eg?!1:(eg=i,!0):(eg=null,!1)}var eA=typeof setTimeout=="function"?setTimeout:void 0,k3=typeof clearTimeout=="function"?clearTimeout:void 0,nA=typeof Promise=="function"?Promise:void 0,B3=typeof queueMicrotask=="function"?queueMicrotask:typeof nA<"u"?function(i){return nA.resolve(null).then(i).catch(V3)}:eA;function V3(i){setTimeout(function(){throw i})}function fo(i){return i==="head"}function iA(i,a){var u=a,m=0,_=0;do{var C=u.nextSibling;if(i.removeChild(u),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(0<m&&8>m){u=m;var O=i.ownerDocument;if(u&1&&Su(O.documentElement),u&2&&Su(O.body),u&4)for(u=O.head,Su(u),O=u.firstChild;O;){var B=O.nextSibling,Q=O.nodeName;O[Ji]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&O.rel.toLowerCase()==="stylesheet"||u.removeChild(O),O=B}}if(_===0){i.removeChild(C),Lu(a);return}_--}else u==="$"||u==="$?"||u==="$!"?_++:m=u.charCodeAt(0)-48;else m=0;u=C}while(u);Lu(a)}function ng(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":ng(u),bs(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function U3(i,a,u,m){for(;i.nodeType===1;){var _=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[Ji])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(C=i.getAttribute("rel"),C==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(C!==_.rel||i.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||i.getAttribute("title")!==(_.title==null?null:_.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(C=i.getAttribute("src"),(C!==(_.src==null?null:_.src)||i.getAttribute("type")!==(_.type==null?null:_.type)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&C&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var C=_.name==null?null:""+_.name;if(_.type==="hidden"&&i.getAttribute("name")===C)return i}else return i;if(i=As(i.nextSibling),i===null)break}return null}function F3(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=As(i.nextSibling),i===null))return null;return i}function ig(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function z3(i,a){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")a();else{var m=function(){a(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function As(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var rg=null;function rA(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}function sA(i,a,u){switch(a=Sf(u),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Su(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);bs(i)}var $r=new Map,aA=new Set;function If(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Na=xt.d;xt.d={f:H3,r:j3,D:G3,C:q3,L:X3,m:Y3,X:W3,S:K3,M:Q3};function H3(){var i=Na.f(),a=Af();return i||a}function j3(i){var a=Ci(i);a!==null&&a.tag===5&&a.type==="form"?b2(a):Na.r(i)}var dc=typeof document>"u"?null:document;function oA(i,a,u){var m=dc;if(m&&typeof a=="string"&&a){var _=yn(a);_='link[rel="'+i+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),aA.has(_)||(aA.add(_),i={rel:i,crossOrigin:u,href:a},m.querySelector(_)===null&&(a=m.createElement("link"),Di(a,"link",i),ze(a),m.head.appendChild(a)))}}function G3(i){Na.D(i),oA("dns-prefetch",i,null)}function q3(i,a){Na.C(i,a),oA("preconnect",i,a)}function X3(i,a,u){Na.L(i,a,u);var m=dc;if(m&&i&&a){var _='link[rel="preload"][as="'+yn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+yn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+yn(u.imageSizes)+'"]')):_+='[href="'+yn(i)+'"]';var C=_;switch(a){case"style":C=gc(i);break;case"script":C=mc(i)}$r.has(C)||(i=T({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),$r.set(C,i),m.querySelector(_)!==null||a==="style"&&m.querySelector(Iu(C))||a==="script"&&m.querySelector(Ru(C))||(a=m.createElement("link"),Di(a,"link",i),ze(a),m.head.appendChild(a)))}}function Y3(i,a){Na.m(i,a);var u=dc;if(u&&i){var m=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+yn(m)+'"][href="'+yn(i)+'"]',C=_;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=mc(i)}if(!$r.has(C)&&(i=T({rel:"modulepreload",href:i},a),$r.set(C,i),u.querySelector(_)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ru(C)))return}m=u.createElement("link"),Di(m,"link",i),ze(m),u.head.appendChild(m)}}}function K3(i,a,u){Na.S(i,a,u);var m=dc;if(m&&i){var _=_r(m).hoistableStyles,C=gc(i);a=a||"default";var O=_.get(C);if(!O){var B={loading:0,preload:null};if(O=m.querySelector(Iu(C)))B.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":a},u),(u=$r.get(C))&&sg(i,u);var Q=O=m.createElement("link");ze(Q),Di(Q,"link",i),Q._p=new Promise(function(ft,_t){Q.onload=ft,Q.onerror=_t}),Q.addEventListener("load",function(){B.loading|=1}),Q.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Rf(O,a,m)}O={type:"stylesheet",instance:O,count:1,state:B},_.set(C,O)}}}function W3(i,a){Na.X(i,a);var u=dc;if(u&&i){var m=_r(u).hoistableScripts,_=mc(i),C=m.get(_);C||(C=u.querySelector(Ru(_)),C||(i=T({src:i,async:!0},a),(a=$r.get(_))&&ag(i,a),C=u.createElement("script"),ze(C),Di(C,"link",i),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(_,C))}}function Q3(i,a){Na.M(i,a);var u=dc;if(u&&i){var m=_r(u).hoistableScripts,_=mc(i),C=m.get(_);C||(C=u.querySelector(Ru(_)),C||(i=T({src:i,async:!0,type:"module"},a),(a=$r.get(_))&&ag(i,a),C=u.createElement("script"),ze(C),Di(C,"link",i),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(_,C))}}function lA(i,a,u,m){var _=(_=Ot.current)?If(_):null;if(!_)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=gc(u.href),u=_r(_).hoistableStyles,m=u.get(a),m||(m={type:"style",instance:null,count:0,state:null},u.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=gc(u.href);var C=_r(_).hoistableStyles,O=C.get(i);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(i,O),(C=_.querySelector(Iu(i)))&&!C._p&&(O.instance=C,O.state.loading=5),$r.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},$r.set(i,u),C||Z3(_,i,u,O.state))),a&&m===null)throw Error(r(528,""));return O}if(a&&m!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=mc(u),u=_r(_).hoistableScripts,m=u.get(a),m||(m={type:"script",instance:null,count:0,state:null},u.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function gc(i){return'href="'+yn(i)+'"'}function Iu(i){return'link[rel="stylesheet"]['+i+"]"}function cA(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function Z3(i,a,u,m){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=i.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),Di(a,"link",u),ze(a),i.head.appendChild(a))}function mc(i){return'[src="'+yn(i)+'"]'}function Ru(i){return"script[async]"+i}function uA(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var m=i.querySelector('style[data-href~="'+yn(u.href)+'"]');if(m)return a.instance=m,ze(m),m;var _=T({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),ze(m),Di(m,"style",_),Rf(m,u.precedence,i),a.instance=m;case"stylesheet":_=gc(u.href);var C=i.querySelector(Iu(_));if(C)return a.state.loading|=4,a.instance=C,ze(C),C;m=cA(u),(_=$r.get(_))&&sg(m,_),C=(i.ownerDocument||i).createElement("link"),ze(C);var O=C;return O._p=new Promise(function(B,Q){O.onload=B,O.onerror=Q}),Di(C,"link",m),a.state.loading|=4,Rf(C,u.precedence,i),a.instance=C;case"script":return C=mc(u.src),(_=i.querySelector(Ru(C)))?(a.instance=_,ze(_),_):(m=u,(_=$r.get(C))&&(m=T({},u),ag(m,_)),i=i.ownerDocument||i,_=i.createElement("script"),ze(_),Di(_,"link",m),i.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,Rf(m,u.precedence,i));return a.instance}function Rf(i,a,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=m.length?m[m.length-1]:null,C=_,O=0;O<m.length;O++){var B=m[O];if(B.dataset.precedence===a)C=B;else if(C!==_)break}C?C.parentNode.insertBefore(i,C.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function sg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function ag(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Nf=null;function hA(i,a,u){if(Nf===null){var m=new Map,_=Nf=new Map;_.set(u,m)}else _=Nf,m=_.get(u),m||(m=new Map,_.set(u,m));if(m.has(i))return m;for(m.set(i,null),u=u.getElementsByTagName(i),_=0;_<u.length;_++){var C=u[_];if(!(C[Ji]||C[In]||i==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var O=C.getAttribute(a)||"";O=i+O;var B=m.get(O);B?B.push(C):m.set(O,[C])}}return m}function fA(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function J3(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function dA(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Nu=null;function $3(){}function tI(i,a,u){if(Nu===null)throw Error(r(475));var m=Nu;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var _=gc(u.href),C=i.querySelector(Iu(_));if(C){i=C._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(m.count++,m=Df.bind(m),i.then(m,m)),a.state.loading|=4,a.instance=C,ze(C);return}C=i.ownerDocument||i,u=cA(u),(_=$r.get(_))&&sg(u,_),C=C.createElement("link"),ze(C);var O=C;O._p=new Promise(function(B,Q){O.onload=B,O.onerror=Q}),Di(C,"link",u),a.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=Df.bind(m),i.addEventListener("load",a),i.addEventListener("error",a))}}function eI(){if(Nu===null)throw Error(r(475));var i=Nu;return i.stylesheets&&i.count===0&&og(i,i.stylesheets),0<i.count?function(a){var u=setTimeout(function(){if(i.stylesheets&&og(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u)}}:null}function Df(){if(this.count--,this.count===0){if(this.stylesheets)og(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Of=null;function og(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Of=new Map,a.forEach(nI,i),Of=null,Df.call(i))}function nI(i,a){if(!(a.state.loading&4)){var u=Of.get(i);if(u)var m=u.get(null);else{u=new Map,Of.set(i,u);for(var _=i.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<_.length;C++){var O=_[C];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),m=O)}m&&u.set(null,m)}_=a.instance,O=_.getAttribute("data-precedence"),C=u.get(O)||m,C===m&&u.set(null,_),u.set(O,_),this.count++,m=Df.bind(this),_.addEventListener("load",m),_.addEventListener("error",m),C?C.parentNode.insertBefore(_,C.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(_,i.firstChild)),a.state.loading|=4}}var Du={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ft,_currentValue2:Ft,_threadCount:0};function iI(i,a,u,m,_,C,O,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=C,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function gA(i,a,u,m,_,C,O,B,Q,ft,_t,St){return i=new iI(i,a,u,O,B,Q,ft,St),a=1,C===!0&&(a|=24),C=Mr(3,null,null,a),i.current=C,C.stateNode=i,a=H0(),a.refCount++,i.pooledCache=a,a.refCount++,C.memoizedState={element:m,isDehydrated:u,cache:a},X0(C),i}function mA(i){return i?(i=Xl,i):Xl}function pA(i,a,u,m,_,C){_=mA(_),m.context===null?m.context=_:m.pendingContext=_,m=$a(a),m.payload={element:u},C=C===void 0?null:C,C!==null&&(m.callback=C),u=to(i,m,a),u!==null&&(Vr(u,i,a),ou(u,i,a))}function yA(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function lg(i,a){yA(i,a),(i=i.alternate)&&yA(i,a)}function EA(i){if(i.tag===13){var a=ql(i,67108864);a!==null&&Vr(a,i,67108864),lg(i,67108864)}}var Mf=!0;function rI(i,a,u,m){var _=yt.T;yt.T=null;var C=xt.p;try{xt.p=2,cg(i,a,u,m)}finally{xt.p=C,yt.T=_}}function sI(i,a,u,m){var _=yt.T;yt.T=null;var C=xt.p;try{xt.p=8,cg(i,a,u,m)}finally{xt.p=C,yt.T=_}}function cg(i,a,u,m){if(Mf){var _=ug(m);if(_===null)Q1(i,a,m,Pf,u),xA(i,m);else if(oI(_,i,a,u,m))m.stopPropagation();else if(xA(i,m),a&4&&-1<aI.indexOf(i)){for(;_!==null;){var C=Ci(_);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var O=Ke(C.pendingLanes);if(O!==0){var B=C;for(B.pendingLanes|=2,B.entangledLanes|=2;O;){var Q=1<<31-Xe(O);B.entanglements[1]|=Q,O&=~Q}zs(C),(en&6)===0&&(yf=Fe()+500,vu(0))}}break;case 13:B=ql(C,2),B!==null&&Vr(B,C,2),Af(),lg(C,2)}if(C=ug(m),C===null&&Q1(i,a,m,Pf,u),C===_)break;_=C}_!==null&&m.stopPropagation()}else Q1(i,a,m,null,u)}}function ug(i){return i=Is(i),hg(i)}var Pf=null;function hg(i){if(Pf=null,i=pn(i),i!==null){var a=h(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=g(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Pf=i,null}function AA(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case Zt:return 2;case Sn:return 8;case Ht:case Ga:return 32;case qa:return 268435456;default:return 32}default:return 32}}var fg=!1,go=null,mo=null,po=null,Ou=new Map,Mu=new Map,yo=[],aI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xA(i,a){switch(i){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Ou.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(a.pointerId)}}function Pu(i,a,u,m,_,C){return i===null||i.nativeEvent!==C?(i={blockedOn:a,domEventName:u,eventSystemFlags:m,nativeEvent:C,targetContainers:[_]},a!==null&&(a=Ci(a),a!==null&&EA(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),i)}function oI(i,a,u,m,_){switch(a){case"focusin":return go=Pu(go,i,a,u,m,_),!0;case"dragenter":return mo=Pu(mo,i,a,u,m,_),!0;case"mouseover":return po=Pu(po,i,a,u,m,_),!0;case"pointerover":var C=_.pointerId;return Ou.set(C,Pu(Ou.get(C)||null,i,a,u,m,_)),!0;case"gotpointercapture":return C=_.pointerId,Mu.set(C,Pu(Mu.get(C)||null,i,a,u,m,_)),!0}return!1}function wA(i){var a=pn(i.target);if(a!==null){var u=h(a);if(u!==null){if(a=u.tag,a===13){if(a=g(u),a!==null){i.blockedOn=a,Xa(i.priority,function(){if(u.tag===13){var m=Br();m=aa(m);var _=ql(u,m);_!==null&&Vr(_,u,m),lg(u,m)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Lf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=ug(i.nativeEvent);if(u===null){u=i.nativeEvent;var m=new u.constructor(u.type,u);ha=m,u.target.dispatchEvent(m),ha=null}else return a=Ci(u),a!==null&&EA(a),i.blockedOn=u,!1;a.shift()}return!0}function _A(i,a,u){Lf(i)&&u.delete(a)}function lI(){fg=!1,go!==null&&Lf(go)&&(go=null),mo!==null&&Lf(mo)&&(mo=null),po!==null&&Lf(po)&&(po=null),Ou.forEach(_A),Mu.forEach(_A)}function kf(i,a){i.blockedOn===a&&(i.blockedOn=null,fg||(fg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lI)))}var Bf=null;function TA(i){Bf!==i&&(Bf=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Bf===i&&(Bf=null);for(var a=0;a<i.length;a+=3){var u=i[a],m=i[a+1],_=i[a+2];if(typeof m!="function"){if(hg(m||u)===null)continue;break}var C=Ci(u);C!==null&&(i.splice(a,3),a-=3,h1(C,{pending:!0,data:_,method:u.method,action:m},m,_))}}))}function Lu(i){function a(Q){return kf(Q,i)}go!==null&&kf(go,i),mo!==null&&kf(mo,i),po!==null&&kf(po,i),Ou.forEach(a),Mu.forEach(a);for(var u=0;u<yo.length;u++){var m=yo[u];m.blockedOn===i&&(m.blockedOn=null)}for(;0<yo.length&&(u=yo[0],u.blockedOn===null);)wA(u),u.blockedOn===null&&yo.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var _=u[m],C=u[m+1],O=_[mn]||null;if(typeof C=="function")O||TA(u);else if(O){var B=null;if(C&&C.hasAttribute("formAction")){if(_=C,O=C[mn]||null)B=O.formAction;else if(hg(_)!==null)continue}else B=O.action;typeof B=="function"?u[m+1]=B:(u.splice(m,3),m-=3),TA(u)}}}function dg(i){this._internalRoot=i}Vf.prototype.render=dg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,m=Br();pA(u,m,i,a,null,null)},Vf.prototype.unmount=dg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;pA(i.current,2,null,i,null,null),Af(),a[xr]=null}};function Vf(i){this._internalRoot=i}Vf.prototype.unstable_scheduleHydration=function(i){if(i){var a=ki();i={blockedOn:null,target:i,priority:a};for(var u=0;u<yo.length&&a!==0&&a<yo[u].priority;u++);yo.splice(u,0,i),u===0&&wA(i)}};var vA=t.version;if(vA!=="19.1.1")throw Error(r(527,vA,"19.1.1"));xt.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=E(a),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var cI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:yt,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{ti=Uf.inject(cI),oi=Uf}catch{}}return Bu.createRoot=function(i,a){if(!l(i))throw Error(r(299));var u=!1,m="",_=F2,C=z2,O=H2,B=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(B=a.unstable_transitionCallbacks)),a=gA(i,1,!1,null,null,u,m,_,C,O,B,null),i[xr]=a.current,W1(i),new dg(a)},Bu.hydrateRoot=function(i,a,u){if(!l(i))throw Error(r(299));var m=!1,_="",C=F2,O=z2,B=H2,Q=null,ft=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Q=u.unstable_transitionCallbacks),u.formState!==void 0&&(ft=u.formState)),a=gA(i,1,!0,a,u??null,m,_,C,O,B,Q,ft),a.context=mA(null),u=a.current,m=Br(),m=aa(m),_=$a(m),_.callback=null,to(u,_,m),u=m,a.current.lanes=u,$e(a,u),zs(a),i[xr]=a.current,W1(i),new Vf(a)},Bu.version="19.1.1",Bu}var PA;function xI(){if(PA)return pg.exports;PA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pg.exports=AI(),pg.exports}var wI=xI();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var LA="popstate";function _I(e={}){function t(l,h){let{pathname:g="/",search:w="",hash:E=""}=Nl(l.location.hash.substring(1));return!g.startsWith("/")&&!g.startsWith(".")&&(g="/"+g),$g("",{pathname:g,search:w,hash:E},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function n(l,h){let g=l.document.querySelector("base"),w="";if(g&&g.getAttribute("href")){let E=l.location.href,y=E.indexOf("#");w=y===-1?E:E.slice(0,y)}return w+"#"+(typeof h=="string"?h:sh(h))}function r(l,h){vs(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return vI(t,n,r,e)}function Pn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TI(){return Math.random().toString(36).substring(2,10)}function kA(e,t){return{usr:e.state,key:e.key,idx:t}}function $g(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Nl(t):t,state:n,key:t&&t.key||r||TI()}}function sh({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Nl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function vI(e,t,n,r={}){let{window:l=document.defaultView,v5Compat:h=!1}=r,g=l.history,w="POP",E=null,y=T();y==null&&(y=0,g.replaceState({...g.state,idx:y},""));function T(){return(g.state||{idx:null}).idx}function S(){w="POP";let G=T(),it=G==null?null:G-y;y=G,E&&E({action:w,location:X.location,delta:it})}function N(G,it){w="PUSH";let nt=$g(X.location,G,it);n&&n(nt,G),y=T()+1;let K=kA(nt,y),At=X.createHref(nt);try{g.pushState(K,"",At)}catch(wt){if(wt instanceof DOMException&&wt.name==="DataCloneError")throw wt;l.location.assign(At)}h&&E&&E({action:w,location:X.location,delta:1})}function k(G,it){w="REPLACE";let nt=$g(X.location,G,it);n&&n(nt,G),y=T();let K=kA(nt,y),At=X.createHref(nt);g.replaceState(K,"",At),h&&E&&E({action:w,location:X.location,delta:0})}function z(G){return CI(G)}let X={get action(){return w},get location(){return e(l,g)},listen(G){if(E)throw new Error("A history only accepts one active listener");return l.addEventListener(LA,S),E=G,()=>{l.removeEventListener(LA,S),E=null}},createHref(G){return t(l,G)},createURL:z,encodeLocation(G){let it=z(G);return{pathname:it.pathname,search:it.search,hash:it.hash}},push:N,replace:k,go(G){return g.go(G)}};return X}function CI(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:sh(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function K_(e,t,n="/"){return bI(e,t,n,!1)}function bI(e,t,n,r){let l=typeof t=="string"?Nl(t):t,h=ka(l.pathname||"/",n);if(h==null)return null;let g=W_(e);SI(g);let w=null;for(let E=0;w==null&&E<g.length;++E){let y=VI(h);w=kI(g[E],y,r)}return w}function W_(e,t=[],n=[],r="",l=!1){let h=(g,w,E=l,y)=>{let T={relativePath:y===void 0?g.path||"":y,caseSensitive:g.caseSensitive===!0,childrenIndex:w,route:g};if(T.relativePath.startsWith("/")){if(!T.relativePath.startsWith(r)&&E)return;Pn(T.relativePath.startsWith(r),`Absolute route path "${T.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(r.length)}let S=La([r,T.relativePath]),N=n.concat(T);g.children&&g.children.length>0&&(Pn(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),W_(g.children,t,N,S,E)),!(g.path==null&&!g.index)&&t.push({path:S,score:PI(S,g.index),routesMeta:N})};return e.forEach((g,w)=>{if(g.path===""||!g.path?.includes("?"))h(g,w);else for(let E of Q_(g.path))h(g,w,!0,E)}),t}function Q_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),h=n.replace(/\?$/,"");if(r.length===0)return l?[h,""]:[h];let g=Q_(r.join("/")),w=[];return w.push(...g.map(E=>E===""?h:[h,E].join("/"))),l&&w.push(...g),w.map(E=>e.startsWith("/")&&E===""?"/":E)}function SI(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:LI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var II=/^:[\w-]+$/,RI=3,NI=2,DI=1,OI=10,MI=-2,BA=e=>e==="*";function PI(e,t){let n=e.split("/"),r=n.length;return n.some(BA)&&(r+=MI),t&&(r+=NI),n.filter(l=>!BA(l)).reduce((l,h)=>l+(II.test(h)?RI:h===""?DI:OI),r)}function LI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function kI(e,t,n=!1){let{routesMeta:r}=e,l={},h="/",g=[];for(let w=0;w<r.length;++w){let E=r[w],y=w===r.length-1,T=h==="/"?t:t.slice(h.length)||"/",S=pd({path:E.relativePath,caseSensitive:E.caseSensitive,end:y},T),N=E.route;if(!S&&y&&n&&!r[r.length-1].route.index&&(S=pd({path:E.relativePath,caseSensitive:E.caseSensitive,end:!1},T)),!S)return null;Object.assign(l,S.params),g.push({params:l,pathname:La([h,S.pathname]),pathnameBase:HI(La([h,S.pathnameBase])),route:N}),S.pathnameBase!=="/"&&(h=La([h,S.pathnameBase]))}return g}function pd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BI(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let h=l[0],g=h.replace(/(.)\/+$/,"$1"),w=l.slice(1);return{params:r.reduce((y,{paramName:T,isOptional:S},N)=>{if(T==="*"){let z=w[N]||"";g=h.slice(0,h.length-z.length).replace(/(.)\/+$/,"$1")}const k=w[N];return S&&!k?y[T]=void 0:y[T]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:h,pathnameBase:g,pattern:e}}function BI(e,t=!1,n=!0){vs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,w,E)=>(r.push({paramName:w,isOptional:E!=null}),E?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function VI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function UI(e,t="/"){let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?Nl(e):e;return{pathname:n?n.startsWith("/")?n:FI(n,t):t,search:jI(r),hash:GI(l)}}function FI(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function xg(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Z_(e){let t=zI(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function J_(e,t,n,r=!1){let l;typeof e=="string"?l=Nl(e):(l={...e},Pn(!l.pathname||!l.pathname.includes("?"),xg("?","pathname","search",l)),Pn(!l.pathname||!l.pathname.includes("#"),xg("#","pathname","hash",l)),Pn(!l.search||!l.search.includes("#"),xg("#","search","hash",l)));let h=e===""||l.pathname==="",g=h?"/":l.pathname,w;if(g==null)w=n;else{let S=t.length-1;if(!r&&g.startsWith("..")){let N=g.split("/");for(;N[0]==="..";)N.shift(),S-=1;l.pathname=N.join("/")}w=S>=0?t[S]:"/"}let E=UI(l,w),y=g&&g!=="/"&&g.endsWith("/"),T=(h||g===".")&&n.endsWith("/");return!E.pathname.endsWith("/")&&(y||T)&&(E.pathname+="/"),E}var La=e=>e.join("/").replace(/\/\/+/g,"/"),HI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var $_=["POST","PUT","PATCH","DELETE"];new Set($_);var XI=["GET",...$_];new Set(XI);var zc=st.createContext(null);zc.displayName="DataRouter";var Zd=st.createContext(null);Zd.displayName="DataRouterState";st.createContext(!1);var tT=st.createContext({isTransitioning:!1});tT.displayName="ViewTransition";var YI=st.createContext(new Map);YI.displayName="Fetchers";var KI=st.createContext(null);KI.displayName="Await";var na=st.createContext(null);na.displayName="Navigation";var _h=st.createContext(null);_h.displayName="Location";var ja=st.createContext({outlet:null,matches:[],isDataRoute:!1});ja.displayName="Route";var Jm=st.createContext(null);Jm.displayName="RouteError";function WI(e,{relative:t}={}){Pn(Th(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=st.useContext(na),{hash:l,pathname:h,search:g}=vh(e,{relative:t}),w=h;return n!=="/"&&(w=h==="/"?n:La([n,h])),r.createHref({pathname:w,search:g,hash:l})}function Th(){return st.useContext(_h)!=null}function Dl(){return Pn(Th(),"useLocation() may be used only in the context of a <Router> component."),st.useContext(_h).location}var eT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nT(e){st.useContext(na).static||st.useLayoutEffect(e)}function QI(){let{isDataRoute:e}=st.useContext(ja);return e?cR():ZI()}function ZI(){Pn(Th(),"useNavigate() may be used only in the context of a <Router> component.");let e=st.useContext(zc),{basename:t,navigator:n}=st.useContext(na),{matches:r}=st.useContext(ja),{pathname:l}=Dl(),h=JSON.stringify(Z_(r)),g=st.useRef(!1);return nT(()=>{g.current=!0}),st.useCallback((E,y={})=>{if(vs(g.current,eT),!g.current)return;if(typeof E=="number"){n.go(E);return}let T=J_(E,JSON.parse(h),l,y.relative==="path");e==null&&t!=="/"&&(T.pathname=T.pathname==="/"?t:La([t,T.pathname])),(y.replace?n.replace:n.push)(T,y.state,y)},[t,n,h,l,e])}st.createContext(null);function vh(e,{relative:t}={}){let{matches:n}=st.useContext(ja),{pathname:r}=Dl(),l=JSON.stringify(Z_(n));return st.useMemo(()=>J_(e,JSON.parse(l),r,t==="path"),[e,l,r,t])}function JI(e,t){return iT(e,t)}function iT(e,t,n,r,l){Pn(Th(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=st.useContext(na),{matches:g}=st.useContext(ja),w=g[g.length-1],E=w?w.params:{},y=w?w.pathname:"/",T=w?w.pathnameBase:"/",S=w&&w.route;{let nt=S&&S.path||"";rT(y,!S||nt.endsWith("*")||nt.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${nt}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${nt}"> to <Route path="${nt==="/"?"*":`${nt}/*`}">.`)}let N=Dl(),k;if(t){let nt=typeof t=="string"?Nl(t):t;Pn(T==="/"||nt.pathname?.startsWith(T),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${nt.pathname}" was given in the \`location\` prop.`),k=nt}else k=N;let z=k.pathname||"/",X=z;if(T!=="/"){let nt=T.replace(/^\//,"").split("/");X="/"+z.replace(/^\//,"").split("/").slice(nt.length).join("/")}let G=K_(e,{pathname:X});vs(S||G!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),vs(G==null||G[G.length-1].route.element!==void 0||G[G.length-1].route.Component!==void 0||G[G.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let it=iR(G&&G.map(nt=>Object.assign({},nt,{params:Object.assign({},E,nt.params),pathname:La([T,h.encodeLocation?h.encodeLocation(nt.pathname).pathname:nt.pathname]),pathnameBase:nt.pathnameBase==="/"?T:La([T,h.encodeLocation?h.encodeLocation(nt.pathnameBase).pathname:nt.pathnameBase])})),g,n,r,l);return t&&it?st.createElement(_h.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},it):it}function $I(){let e=lR(),t=qI(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},h={padding:"2px 4px",backgroundColor:r},g=null;return console.error("Error handled by React Router default ErrorBoundary:",e),g=st.createElement(st.Fragment,null,st.createElement("p",null,"💿 Hey developer 👋"),st.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",st.createElement("code",{style:h},"ErrorBoundary")," or"," ",st.createElement("code",{style:h},"errorElement")," prop on your route.")),st.createElement(st.Fragment,null,st.createElement("h2",null,"Unexpected Application Error!"),st.createElement("h3",{style:{fontStyle:"italic"}},t),n?st.createElement("pre",{style:l},n):null,g)}var tR=st.createElement($I,null),eR=class extends st.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?st.createElement(ja.Provider,{value:this.props.routeContext},st.createElement(Jm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nR({routeContext:e,match:t,children:n}){let r=st.useContext(zc);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),st.createElement(ja.Provider,{value:e},n)}function iR(e,t=[],n=null,r=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let h=e,g=n?.errors;if(g!=null){let y=h.findIndex(T=>T.route.id&&g?.[T.route.id]!==void 0);Pn(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),h=h.slice(0,Math.min(h.length,y+1))}let w=!1,E=-1;if(n)for(let y=0;y<h.length;y++){let T=h[y];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(E=y),T.route.id){let{loaderData:S,errors:N}=n,k=T.route.loader&&!S.hasOwnProperty(T.route.id)&&(!N||N[T.route.id]===void 0);if(T.route.lazy||k){w=!0,E>=0?h=h.slice(0,E+1):h=[h[0]];break}}}return h.reduceRight((y,T,S)=>{let N,k=!1,z=null,X=null;n&&(N=g&&T.route.id?g[T.route.id]:void 0,z=T.route.errorElement||tR,w&&(E<0&&S===0?(rT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,X=null):E===S&&(k=!0,X=T.route.hydrateFallbackElement||null)));let G=t.concat(h.slice(0,S+1)),it=()=>{let nt;return N?nt=z:k?nt=X:T.route.Component?nt=st.createElement(T.route.Component,null):T.route.element?nt=T.route.element:nt=y,st.createElement(nR,{match:T,routeContext:{outlet:y,matches:G,isDataRoute:n!=null},children:nt})};return n&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?st.createElement(eR,{location:n.location,revalidation:n.revalidation,component:z,error:N,children:it(),routeContext:{outlet:null,matches:G,isDataRoute:!0},unstable_onError:r}):it()},null)}function $m(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rR(e){let t=st.useContext(zc);return Pn(t,$m(e)),t}function sR(e){let t=st.useContext(Zd);return Pn(t,$m(e)),t}function aR(e){let t=st.useContext(ja);return Pn(t,$m(e)),t}function tp(e){let t=aR(e),n=t.matches[t.matches.length-1];return Pn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function oR(){return tp("useRouteId")}function lR(){let e=st.useContext(Jm),t=sR("useRouteError"),n=tp("useRouteError");return e!==void 0?e:t.errors?.[n]}function cR(){let{router:e}=rR("useNavigate"),t=tp("useNavigate"),n=st.useRef(!1);return nT(()=>{n.current=!0}),st.useCallback(async(l,h={})=>{vs(n.current,eT),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...h}))},[e,t])}var VA={};function rT(e,t,n){!t&&!VA[e]&&(VA[e]=!0,vs(!1,n))}st.memo(uR);function uR({routes:e,future:t,state:n,unstable_onError:r}){return iT(e,void 0,n,r,t)}function xo(e){Pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hR({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:l,static:h=!1}){Pn(!Th(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),w=st.useMemo(()=>({basename:g,navigator:l,static:h,future:{}}),[g,l,h]);typeof n=="string"&&(n=Nl(n));let{pathname:E="/",search:y="",hash:T="",state:S=null,key:N="default"}=n,k=st.useMemo(()=>{let z=ka(E,g);return z==null?null:{location:{pathname:z,search:y,hash:T,state:S,key:N},navigationType:r}},[g,E,y,T,S,N,r]);return vs(k!=null,`<Router basename="${g}"> is not able to match the URL "${E}${y}${T}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:st.createElement(na.Provider,{value:w},st.createElement(_h.Provider,{children:t,value:k}))}function fR({children:e,location:t}){return JI(tm(e),t)}function tm(e,t=[]){let n=[];return st.Children.forEach(e,(r,l)=>{if(!st.isValidElement(r))return;let h=[...t,l];if(r.type===st.Fragment){n.push.apply(n,tm(r.props.children,h));return}Pn(r.type===xo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let g={id:r.props.id||h.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(g.children=tm(r.props.children,h)),n.push(g)}),n}var $f="get",td="application/x-www-form-urlencoded";function Jd(e){return e!=null&&typeof e.tagName=="string"}function dR(e){return Jd(e)&&e.tagName.toLowerCase()==="button"}function gR(e){return Jd(e)&&e.tagName.toLowerCase()==="form"}function mR(e){return Jd(e)&&e.tagName.toLowerCase()==="input"}function pR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yR(e,t){return e.button===0&&(!t||t==="_self")&&!pR(e)}var zf=null;function ER(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var AR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wg(e){return e!=null&&!AR.has(e)?(vs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${td}"`),null):e}function xR(e,t){let n,r,l,h,g;if(gR(e)){let w=e.getAttribute("action");r=w?ka(w,t):null,n=e.getAttribute("method")||$f,l=wg(e.getAttribute("enctype"))||td,h=new FormData(e)}else if(dR(e)||mR(e)&&(e.type==="submit"||e.type==="image")){let w=e.form;if(w==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let E=e.getAttribute("formaction")||w.getAttribute("action");if(r=E?ka(E,t):null,n=e.getAttribute("formmethod")||w.getAttribute("method")||$f,l=wg(e.getAttribute("formenctype"))||wg(w.getAttribute("enctype"))||td,h=new FormData(w,e),!ER()){let{name:y,type:T,value:S}=e;if(T==="image"){let N=y?`${y}.`:"";h.append(`${N}x`,"0"),h.append(`${N}y`,"0")}else y&&h.append(y,S)}}else{if(Jd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$f,r=null,l=td,g=e}return h&&l==="text/plain"&&(g=h,h=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:h,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ep(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wR(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&ka(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function _R(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vR(e,t,n){let r=await Promise.all(e.map(async l=>{let h=t.routes[l.route.id];if(h){let g=await _R(h,n);return g.links?g.links():[]}return[]}));return IR(r.flat(1).filter(TR).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function UA(e,t,n,r,l,h){let g=(E,y)=>n[y]?E.route.id!==n[y].route.id:!0,w=(E,y)=>n[y].pathname!==E.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==E.params["*"];return h==="assets"?t.filter((E,y)=>g(E,y)||w(E,y)):h==="data"?t.filter((E,y)=>{let T=r.routes[E.route.id];if(!T||!T.hasLoader)return!1;if(g(E,y)||w(E,y))return!0;if(E.route.shouldRevalidate){let S=E.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:E.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function CR(e,t,{includeHydrateFallback:n}={}){return bR(e.map(r=>{let l=t.routes[r.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function bR(e){return[...new Set(e)]}function SR(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function IR(e,t){let n=new Set;return new Set(t),e.reduce((r,l)=>{let h=JSON.stringify(SR(l));return n.has(h)||(n.add(h),r.push({key:h,link:l})),r},[])}function sT(){let e=st.useContext(zc);return ep(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function RR(){let e=st.useContext(Zd);return ep(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var np=st.createContext(void 0);np.displayName="FrameworkContext";function aT(){let e=st.useContext(np);return ep(e,"You must render this element inside a <HydratedRouter> element"),e}function NR(e,t){let n=st.useContext(np),[r,l]=st.useState(!1),[h,g]=st.useState(!1),{onFocus:w,onBlur:E,onMouseEnter:y,onMouseLeave:T,onTouchStart:S}=t,N=st.useRef(null);st.useEffect(()=>{if(e==="render"&&g(!0),e==="viewport"){let X=it=>{it.forEach(nt=>{g(nt.isIntersecting)})},G=new IntersectionObserver(X,{threshold:.5});return N.current&&G.observe(N.current),()=>{G.disconnect()}}},[e]),st.useEffect(()=>{if(r){let X=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(X)}}},[r]);let k=()=>{l(!0)},z=()=>{l(!1),g(!1)};return n?e!=="intent"?[h,N,{}]:[h,N,{onFocus:Vu(w,k),onBlur:Vu(E,z),onMouseEnter:Vu(y,k),onMouseLeave:Vu(T,z),onTouchStart:Vu(S,k)}]:[!1,N,{}]}function Vu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function DR({page:e,...t}){let{router:n}=sT(),r=st.useMemo(()=>K_(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?st.createElement(MR,{page:e,matches:r,...t}):null}function OR(e){let{manifest:t,routeModules:n}=aT(),[r,l]=st.useState([]);return st.useEffect(()=>{let h=!1;return vR(e,t,n).then(g=>{h||l(g)}),()=>{h=!0}},[e,t,n]),r}function MR({page:e,matches:t,...n}){let r=Dl(),{manifest:l,routeModules:h}=aT(),{basename:g}=sT(),{loaderData:w,matches:E}=RR(),y=st.useMemo(()=>UA(e,t,E,l,r,"data"),[e,t,E,l,r]),T=st.useMemo(()=>UA(e,t,E,l,r,"assets"),[e,t,E,l,r]),S=st.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let z=new Set,X=!1;if(t.forEach(it=>{let nt=l.routes[it.route.id];!nt||!nt.hasLoader||(!y.some(K=>K.route.id===it.route.id)&&it.route.id in w&&h[it.route.id]?.shouldRevalidate||nt.hasClientLoader?X=!0:z.add(it.route.id))}),z.size===0)return[];let G=wR(e,g,"data");return X&&z.size>0&&G.searchParams.set("_routes",t.filter(it=>z.has(it.route.id)).map(it=>it.route.id).join(",")),[G.pathname+G.search]},[g,w,r,l,y,t,e,h]),N=st.useMemo(()=>CR(T,l),[T,l]),k=OR(T);return st.createElement(st.Fragment,null,S.map(z=>st.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),N.map(z=>st.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),k.map(({key:z,link:X})=>st.createElement("link",{key:z,nonce:n.nonce,...X})))}function PR(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oT&&(window.__reactRouterVersion="7.9.1")}catch{}function LR({basename:e,children:t,window:n}){let r=st.useRef();r.current==null&&(r.current=_I({window:n,v5Compat:!0}));let l=r.current,[h,g]=st.useState({action:l.action,location:l.location}),w=st.useCallback(E=>{st.startTransition(()=>g(E))},[g]);return st.useLayoutEffect(()=>l.listen(w),[l,w]),st.createElement(hR,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:l})}var lT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$d=st.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:l,reloadDocument:h,replace:g,state:w,target:E,to:y,preventScrollReset:T,viewTransition:S,...N},k){let{basename:z}=st.useContext(na),X=typeof y=="string"&&lT.test(y),G,it=!1;if(typeof y=="string"&&X&&(G=y,oT))try{let V=new URL(window.location.href),tt=y.startsWith("//")?new URL(V.protocol+y):new URL(y),W=ka(tt.pathname,z);tt.origin===V.origin&&W!=null?y=W+tt.search+tt.hash:it=!0}catch{vs(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let nt=WI(y,{relative:l}),[K,At,wt]=NR(r,N),Rt=UR(y,{replace:g,state:w,target:E,preventScrollReset:T,relative:l,viewTransition:S});function H(V){t&&t(V),V.defaultPrevented||Rt(V)}let U=st.createElement("a",{...N,...wt,href:G||nt,onClick:it||h?t:H,ref:PR(k,At),target:E,"data-discover":!X&&n==="render"?"true":void 0});return K&&!X?st.createElement(st.Fragment,null,U,st.createElement(DR,{page:nt})):U});$d.displayName="Link";var kR=st.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:l=!1,style:h,to:g,viewTransition:w,children:E,...y},T){let S=vh(g,{relative:y.relative}),N=Dl(),k=st.useContext(Zd),{navigator:z,basename:X}=st.useContext(na),G=k!=null&&GR(S)&&w===!0,it=z.encodeLocation?z.encodeLocation(S).pathname:S.pathname,nt=N.pathname,K=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(nt=nt.toLowerCase(),K=K?K.toLowerCase():null,it=it.toLowerCase()),K&&X&&(K=ka(K,X)||K);const At=it!=="/"&&it.endsWith("/")?it.length-1:it.length;let wt=nt===it||!l&&nt.startsWith(it)&&nt.charAt(At)==="/",Rt=K!=null&&(K===it||!l&&K.startsWith(it)&&K.charAt(it.length)==="/"),H={isActive:wt,isPending:Rt,isTransitioning:G},U=wt?t:void 0,V;typeof r=="function"?V=r(H):V=[r,wt?"active":null,Rt?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let tt=typeof h=="function"?h(H):h;return st.createElement($d,{...y,"aria-current":U,className:V,ref:T,style:tt,to:g,viewTransition:w},typeof E=="function"?E(H):E)});kR.displayName="NavLink";var BR=st.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:l,state:h,method:g=$f,action:w,onSubmit:E,relative:y,preventScrollReset:T,viewTransition:S,...N},k)=>{let z=HR(),X=jR(w,{relative:y}),G=g.toLowerCase()==="get"?"get":"post",it=typeof w=="string"&&lT.test(w),nt=K=>{if(E&&E(K),K.defaultPrevented)return;K.preventDefault();let At=K.nativeEvent.submitter,wt=At?.getAttribute("formmethod")||g;z(At||K.currentTarget,{fetcherKey:t,method:wt,navigate:n,replace:l,state:h,relative:y,preventScrollReset:T,viewTransition:S})};return st.createElement("form",{ref:k,method:G,action:X,onSubmit:r?E:nt,...N,"data-discover":!it&&e==="render"?"true":void 0})});BR.displayName="Form";function VR(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cT(e){let t=st.useContext(zc);return Pn(t,VR(e)),t}function UR(e,{target:t,replace:n,state:r,preventScrollReset:l,relative:h,viewTransition:g}={}){let w=QI(),E=Dl(),y=vh(e,{relative:h});return st.useCallback(T=>{if(yR(T,t)){T.preventDefault();let S=n!==void 0?n:sh(E)===sh(y);w(e,{replace:S,state:r,preventScrollReset:l,relative:h,viewTransition:g})}},[E,w,y,n,r,t,e,l,h,g])}var FR=0,zR=()=>`__${String(++FR)}__`;function HR(){let{router:e}=cT("useSubmit"),{basename:t}=st.useContext(na),n=oR();return st.useCallback(async(r,l={})=>{let{action:h,method:g,encType:w,formData:E,body:y}=xR(r,t);if(l.navigate===!1){let T=l.fetcherKey||zR();await e.fetch(T,n,l.action||h,{preventScrollReset:l.preventScrollReset,formData:E,body:y,formMethod:l.method||g,formEncType:l.encType||w,flushSync:l.flushSync})}else await e.navigate(l.action||h,{preventScrollReset:l.preventScrollReset,formData:E,body:y,formMethod:l.method||g,formEncType:l.encType||w,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,n])}function jR(e,{relative:t}={}){let{basename:n}=st.useContext(na),r=st.useContext(ja);Pn(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),h={...vh(e||".",{relative:t})},g=Dl();if(e==null){h.search=g.search;let w=new URLSearchParams(h.search),E=w.getAll("index");if(E.some(T=>T==="")){w.delete("index"),E.filter(S=>S).forEach(S=>w.append("index",S));let T=w.toString();h.search=T?`?${T}`:""}}return(!e||e===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(h.pathname=h.pathname==="/"?n:La([n,h.pathname])),sh(h)}function GR(e,{relative:t}={}){let n=st.useContext(tT);Pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cT("useViewTransitionState"),l=vh(e,{relative:t});if(!n.isTransitioning)return!1;let h=ka(n.currentLocation.pathname,r)||n.currentLocation.pathname,g=ka(n.nextLocation.pathname,r)||n.nextLocation.pathname;return pd(l.pathname,g)!=null||pd(l.pathname,h)!=null}function qR(){const[e,t]=st.useState(""),[n,r]=st.useState(""),[l,h]=st.useState(""),g=async()=>{(await fetch("http://localhost:3000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})})).ok?h("登入成功！"):h("登入失敗！")};return Tt.jsxs("div",{className:"page-container",children:[Tt.jsx("h2",{children:"信箱 Mailbox"}),Tt.jsx("input",{value:e,onChange:w=>t(w.target.value),placeholder:"帳號"}),Tt.jsx("input",{value:n,onChange:w=>r(w.target.value),type:"password",placeholder:"密碼"}),Tt.jsx("button",{onClick:g,children:"登入"}),Tt.jsx("p",{children:l})]})}const XR=[{route:"紅線",start:"火車站",end:"科學園區",time:"06:00 - 22:00",interval:"10 分鐘",description:"途經市中心、科學園區，停靠 10 個站點"},{route:"藍線",start:"東門",end:"光復路",time:"06:30 - 21:30",interval:"15 分鐘",description:"途經東區、光復路，停靠 8 個站點"},{route:"綠線",start:"市政府",end:"高鐵站",time:"07:00 - 20:00",interval:"12 分鐘",description:"連接市政府與高鐵站，途經科學園區"},{route:"黃線",start:"北區",end:"南區",time:"06:15 - 22:15",interval:"20 分鐘",description:"貫穿北區與南區，途經主要商圈"},{route:"橘線",start:"中央公園",end:"東湖",time:"06:45 - 21:45",interval:"15 分鐘",description:"環狀路線，途經學校與住宅區"},{route:"紫線",start:"新竹站",end:"香山",time:"07:00 - 20:30",interval:"30 分鐘",description:"跨區路線，連接新竹市與香山"},{route:"粉紅線",start:"科學園區",end:"新竹市政府",time:"06:30 - 22:00",interval:"10 分鐘",description:"主要接駁園區與政府機關"},{route:"灰線",start:"南門",end:"北門",time:"06:00 - 21:00",interval:"25 分鐘",description:"連接南北區，停靠住宅與商業區"}];function YR(){const[e,t]=st.useState([]),[n,r]=st.useState([]);st.useEffect(()=>{t(XR)},[]);const l=w=>{r(E=>E.includes(w)?E.filter(y=>y!==w):[...E,w])},h=["#65a6e6","#f7b267","#f79d84","#84d9a8","#d6a2e8"],g=w=>{const E=e.findIndex(y=>y.route===w);return h[E%h.length]};return Tt.jsxs("div",{className:"page-container",children:[Tt.jsx("h1",{className:"info-title",children:"園區公車資訊"}),Tt.jsx("div",{className:"route-buttons",children:e.map(w=>Tt.jsx("button",{className:`route-btn ${n.includes(w.route)?"active":""}`,onClick:()=>l(w.route),children:w.route},w.route))}),Tt.jsx("div",{className:"bus-cards-container",children:n.map(w=>{const E=e.find(y=>y.route===w);return E?Tt.jsxs("div",{className:"bus-card",style:{backgroundColor:g(E.route)},children:[Tt.jsxs("h2",{children:[E.route,"（",E.start," → ",E.end,"）"]}),Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"營運時間："}),E.time]}),Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"發車間隔："}),E.interval]}),Tt.jsxs("p",{children:[Tt.jsx("strong",{children:"路線描述："}),E.description]})]},E.route):null})})]})}const KR={office:[{title_zh:"辦公室",title_en:"Office Room",desc_zh:"辦公人員使用",desc_en:"For office staff",phone:"1234-5678",time:"9:00-18:00"},{title_zh:"會議室",title_en:"Conference Room",desc_zh:"會議與討論空間",desc_en:"Meeting and discussion space",phone:"2345-6789",time:"9:00-18:00"},{title_zh:"無塵室",title_en:"Clean Room",desc_zh:"特殊環境",desc_en:"Special environment",phone:"3456-7890",time:"9:00-18:00"}],sport:[{title_zh:"健身房",title_en:"Gym",desc_zh:"運動健身",desc_en:"Fitness exercise",phone:"4567-8901",time:"6:00-22:00"},{title_zh:"游泳池",title_en:"Swimming Pool",desc_zh:"游泳休閒",desc_en:"Swimming leisure",phone:"5678-9012",time:"6:00-22:00"},{title_zh:"綜合球場",title_en:"Comprehensive Court",desc_zh:"多功能球場",desc_en:"Multi-purpose court",phone:"6789-0123",time:"6:00-22:00"}],leisure:[{title_zh:"圖書館",title_en:"Library",desc_zh:"閱讀書籍",desc_en:"Read books",phone:"7890-1234",time:"9:00-20:00"},{title_zh:"書店",title_en:"Book Store",desc_zh:"買書看書",desc_en:"Buy and read books",phone:"8901-2345",time:"9:00-20:00"},{title_zh:"展演廳",title_en:"Exhibition Hall",desc_zh:"展演活動",desc_en:"Exhibitions and performances",phone:"9012-3456",time:"9:00-20:00"}],food:[{title_zh:"麵包店",title_en:"Bread Store",desc_zh:"各式麵包",desc_en:"Various breads",phone:"0123-4567",time:"8:00-20:00"},{title_zh:"超商",title_en:"Convenience Store",desc_zh:"便利商店",desc_en:"Convenience store",phone:"1234-5670",time:"0:00-24:00"},{title_zh:"咖啡廳",title_en:"Coffee Shop",desc_zh:"飲品咖啡",desc_en:"Drinks and coffee",phone:"2345-6780",time:"8:00-20:00"}]};function WR({category:e,title:t,desc:n,phone:r,time:l}){return Tt.jsxs("div",{className:`card ${e}`,children:[Tt.jsx("h3",{children:t}),Tt.jsx("p",{children:n}),Tt.jsxs("p",{children:["📞 ",r]}),Tt.jsxs("p",{children:["🕒 ",l]})]})}function QR({lang:e}){const[t,n]=st.useState("office"),r=[{key:"office",label_zh:"辦公場所",label_en:"Office"},{key:"sport",label_zh:"運動設施",label_en:"Sports"},{key:"leisure",label_zh:"休閒場所",label_en:"Leisure"},{key:"food",label_zh:"美食街",label_en:"Food Court"}];return Tt.jsxs("div",{className:"explore-page",children:[Tt.jsx("h1",{children:e==="zh"?"探索環境":"Explore Environment"}),Tt.jsx("div",{className:"category-buttons",children:r.map(l=>Tt.jsx("button",{className:`category-btn ${t===l.key?"active":""}`,onClick:()=>n(l.key),children:e==="zh"?l.label_zh:l.label_en},l.key))}),Tt.jsx("div",{className:"cards-container",children:KR[t].map((l,h)=>Tt.jsx(WR,{category:t,title:e==="zh"?l.title_zh:l.title_en,desc:e==="zh"?l.desc_zh:l.desc_en,phone:l.phone,time:l.time},h))})]})}function FA({tasks:e=[],completedIds:t=[],onComplete:n,lang:r="zh"}){const l={zh:{point:"分",complete:"完成",done:"已完成"},en:{point:"pt",complete:"Complete",done:"Done"}};return Tt.jsx("ul",{style:{listStyle:"none",padding:0,width:"100%"},children:e.map(h=>{const g=t.includes(h.id);return Tt.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",border:"1px solid #eee",borderRadius:8,marginBottom:8,background:g?"#f6fff6":"#fff"},children:[Tt.jsxs("div",{style:{textAlign:"left"},children:[Tt.jsx("div",{style:{fontWeight:600},children:h.text}),Tt.jsxs("div",{style:{fontSize:12,color:"#666"},children:[h.point," ",l[r].point]})]}),Tt.jsx("button",{onClick:()=>n&&n(h),disabled:g,style:{padding:"6px 12px",border:"none",borderRadius:6,backgroundColor:g?"#9e9e9e":"#4caf50",color:"#fff",cursor:g?"not-allowed":"pointer"},children:g?h.doneLabel||l[r].done:h.completeLabel||l[r].complete})]},h.id)})})}const ZR=()=>{};var zA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let l=e.charCodeAt(r);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},JR=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const l=e[n++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){const h=e[n++];t[r++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=e[n++],g=e[n++],w=e[n++],E=((l&7)<<18|(h&63)<<12|(g&63)<<6|w&63)-65536;t[r++]=String.fromCharCode(55296+(E>>10)),t[r++]=String.fromCharCode(56320+(E&1023))}else{const h=e[n++],g=e[n++];t[r++]=String.fromCharCode((l&15)<<12|(h&63)<<6|g&63)}}return t.join("")},hT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<e.length;l+=3){const h=e[l],g=l+1<e.length,w=g?e[l+1]:0,E=l+2<e.length,y=E?e[l+2]:0,T=h>>2,S=(h&3)<<4|w>>4;let N=(w&15)<<2|y>>6,k=y&63;E||(k=64,g||(N=64)),r.push(n[T],n[S],n[N],n[k])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(uT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):JR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<e.length;){const h=n[e.charAt(l++)],w=l<e.length?n[e.charAt(l)]:0;++l;const y=l<e.length?n[e.charAt(l)]:64;++l;const S=l<e.length?n[e.charAt(l)]:64;if(++l,h==null||w==null||y==null||S==null)throw new $R;const N=h<<2|w>>4;if(r.push(N),y!==64){const k=w<<4&240|y>>2;if(r.push(k),S!==64){const z=y<<6&192|S;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class $R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t4=function(e){const t=uT(e);return hT.encodeByteArray(t,!0)},yd=function(e){return t4(e).replace(/\./g,"")},fT=function(e){try{return hT.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=()=>e4().__FIREBASE_DEFAULTS__,i4=()=>{if(typeof process>"u"||typeof zA>"u")return;const e=zA.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},r4=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&fT(e[1]);return t&&JSON.parse(t)},t0=()=>{try{return ZR()||n4()||i4()||r4()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},dT=e=>t0()?.emulatorHosts?.[e],gT=e=>{const t=dT(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},mT=()=>t0()?.config,pT=e=>t0()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ip(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",l=e.iat||0,h=e.sub||e.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const g={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...e};return[yd(JSON.stringify(n)),yd(JSON.stringify(g)),""].join(".")}const Xu={};function a4(){const e={prod:[],emulator:[]};for(const t of Object.keys(Xu))Xu[t]?e.emulator.push(t):e.prod.push(t);return e}function o4(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let HA=!1;function rp(e,t){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||Xu[e]===t||Xu[e]||HA)return;Xu[e]=t;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",h=a4().prod.length>0;function g(){const N=document.getElementById(r);N&&N.remove()}function w(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function E(N,k){N.setAttribute("width","24"),N.setAttribute("id",k),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{HA=!0,g()},N}function T(N,k){N.setAttribute("id",k),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function S(){const N=o4(r),k=n("text"),z=document.getElementById(k)||document.createElement("span"),X=n("learnmore"),G=document.getElementById(X)||document.createElement("a"),it=n("preprendIcon"),nt=document.getElementById(it)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const K=N.element;w(K),T(G,X);const At=y();E(nt,it),K.append(nt,z,G,At),document.body.appendChild(K)}h?(z.innerText="Preview backend disconnected.",nt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(nt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qi())}function c4(){const e=t0()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ET(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function h4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f4(){const e=Qi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function d4(){return!c4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AT(){try{return typeof indexedDB=="object"}catch{return!1}}function xT(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}function g4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="FirebaseError";class as extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=m4,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},l=`${this.service}/${t}`,h=this.errors[t],g=h?p4(h,r):"Error",w=`${this.serviceName}: ${g} (${l}).`;return new as(l,w,r)}}function p4(e,t){return e.replace(y4,(n,r)=>{const l=t[r];return l!=null?String(l):`<${r}?>`})}const y4=/\{\$([^}]+)}/g;function E4(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Oo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const l of n){if(!r.includes(l))return!1;const h=e[l],g=t[l];if(jA(h)&&jA(g)){if(!Oo(h,g))return!1}else if(h!==g)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function jA(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function A4(e,t){const n=new x4(e,t);return n.subscribe.bind(n)}class x4{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let l;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");w4(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:r},l.next===void 0&&(l.next=_g),l.error===void 0&&(l.error=_g),l.complete===void 0&&(l.complete=_g);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w4(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=1e3,T4=2,v4=14400*1e3,C4=.5;function GA(e,t=_4,n=T4){const r=t*Math.pow(n,e),l=Math.round(C4*r*(Math.random()-.5)*2);return Math.min(v4,r+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e){return e&&e._delegate?e._delegate:e}class ss{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new s4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(I4(t))try{this.getOrInitializeService({instanceIdentifier:fl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:l});r.resolve(h)}catch{}}}}clearInstance(t=fl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=fl){return this.instances.has(t)}getOptions(t=fl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[h,g]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(h);r===w&&g.resolve(l)}return l}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(t),this.onInitCallbacks.set(r,l);const h=this.instances.get(r);return h&&t(h,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:S4(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=fl){return this.component?this.component.multipleInstances?t:fl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S4(e){return e===fl?void 0:e}function I4(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new b4(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Oe||(Oe={}));const N4={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},D4=Oe.INFO,O4={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},M4=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),l=O4[t];if(l)console[l](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class e0{constructor(t){this.name=t,this._logLevel=D4,this._logHandler=M4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Oe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?N4[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...t),this._logHandler(this,Oe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...t),this._logHandler(this,Oe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...t),this._logHandler(this,Oe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...t),this._logHandler(this,Oe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...t),this._logHandler(this,Oe.ERROR,...t)}}const P4=(e,t)=>t.some(n=>e instanceof n);let qA,XA;function L4(){return qA||(qA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k4(){return XA||(XA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wT=new WeakMap,em=new WeakMap,_T=new WeakMap,Tg=new WeakMap,sp=new WeakMap;function B4(e){const t=new Promise((n,r)=>{const l=()=>{e.removeEventListener("success",h),e.removeEventListener("error",g)},h=()=>{n(bo(e.result)),l()},g=()=>{r(e.error),l()};e.addEventListener("success",h),e.addEventListener("error",g)});return t.then(n=>{n instanceof IDBCursor&&wT.set(n,e)}).catch(()=>{}),sp.set(t,e),t}function V4(e){if(em.has(e))return;const t=new Promise((n,r)=>{const l=()=>{e.removeEventListener("complete",h),e.removeEventListener("error",g),e.removeEventListener("abort",g)},h=()=>{n(),l()},g=()=>{r(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",h),e.addEventListener("error",g),e.addEventListener("abort",g)});em.set(e,t)}let nm={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return em.get(e);if(t==="objectStoreNames")return e.objectStoreNames||_T.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bo(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function U4(e){nm=e(nm)}function F4(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(vg(this),t,...n);return _T.set(r,t.sort?t.sort():[t]),bo(r)}:k4().includes(e)?function(...t){return e.apply(vg(this),t),bo(wT.get(this))}:function(...t){return bo(e.apply(vg(this),t))}}function z4(e){return typeof e=="function"?F4(e):(e instanceof IDBTransaction&&V4(e),P4(e,L4())?new Proxy(e,nm):e)}function bo(e){if(e instanceof IDBRequest)return B4(e);if(Tg.has(e))return Tg.get(e);const t=z4(e);return t!==e&&(Tg.set(e,t),sp.set(t,e)),t}const vg=e=>sp.get(e);function TT(e,t,{blocked:n,upgrade:r,blocking:l,terminated:h}={}){const g=indexedDB.open(e,t),w=bo(g);return r&&g.addEventListener("upgradeneeded",E=>{r(bo(g.result),E.oldVersion,E.newVersion,bo(g.transaction),E)}),n&&g.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),w.then(E=>{h&&E.addEventListener("close",()=>h()),l&&E.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),w}const H4=["get","getKey","getAll","getAllKeys","count"],j4=["put","add","delete","clear"],Cg=new Map;function YA(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Cg.get(t))return Cg.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,l=j4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||H4.includes(n)))return;const h=async function(g,...w){const E=this.transaction(g,l?"readwrite":"readonly");let y=E.store;return r&&(y=y.index(w.shift())),(await Promise.all([y[n](...w),l&&E.done]))[0]};return Cg.set(t,h),h}U4(e=>({...e,get:(t,n,r)=>YA(t,n)||e.get(t,n,r),has:(t,n)=>!!YA(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q4(e){return e.getComponent()?.type==="VERSION"}const im="@firebase/app",KA="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new e0("@firebase/app"),X4="@firebase/app-compat",Y4="@firebase/analytics-compat",K4="@firebase/analytics",W4="@firebase/app-check-compat",Q4="@firebase/app-check",Z4="@firebase/auth",J4="@firebase/auth-compat",$4="@firebase/database",t8="@firebase/data-connect",e8="@firebase/database-compat",n8="@firebase/functions",i8="@firebase/functions-compat",r8="@firebase/installations",s8="@firebase/installations-compat",a8="@firebase/messaging",o8="@firebase/messaging-compat",l8="@firebase/performance",c8="@firebase/performance-compat",u8="@firebase/remote-config",h8="@firebase/remote-config-compat",f8="@firebase/storage",d8="@firebase/storage-compat",g8="@firebase/firestore",m8="@firebase/ai",p8="@firebase/firestore-compat",y8="firebase",E8="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="[DEFAULT]",A8={[im]:"fire-core",[X4]:"fire-core-compat",[K4]:"fire-analytics",[Y4]:"fire-analytics-compat",[Q4]:"fire-app-check",[W4]:"fire-app-check-compat",[Z4]:"fire-auth",[J4]:"fire-auth-compat",[$4]:"fire-rtdb",[t8]:"fire-data-connect",[e8]:"fire-rtdb-compat",[n8]:"fire-fn",[i8]:"fire-fn-compat",[r8]:"fire-iid",[s8]:"fire-iid-compat",[a8]:"fire-fcm",[o8]:"fire-fcm-compat",[l8]:"fire-perf",[c8]:"fire-perf-compat",[u8]:"fire-rc",[h8]:"fire-rc-compat",[f8]:"fire-gcs",[d8]:"fire-gcs-compat",[g8]:"fire-fst",[p8]:"fire-fst-compat",[m8]:"fire-vertex","fire-js":"fire-js",[y8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map,x8=new Map,sm=new Map;function WA(e,t){try{e.container.addComponent(t)}catch(n){Ba.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cs(e){const t=e.name;if(sm.has(t))return Ba.debug(`There were multiple attempts to register component ${t}.`),!1;sm.set(t,e);for(const n of Ed.values())WA(n,e);for(const n of x8.values())WA(n,e);return!0}function zo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ns(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},So=new Ml("app","Firebase",w8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw So.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=E8;function vT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:rm,automaticDataCollectionEnabled:!0,...t},l=r.name;if(typeof l!="string"||!l)throw So.create("bad-app-name",{appName:String(l)});if(n||(n=mT()),!n)throw So.create("no-options");const h=Ed.get(l);if(h){if(Oo(n,h.options)&&Oo(r,h.config))return h;throw So.create("duplicate-app",{appName:l})}const g=new R4(l);for(const E of sm.values())g.addComponent(E);const w=new _8(n,r,g);return Ed.set(l,w),w}function n0(e=rm){const t=Ed.get(e);if(!t&&e===rm&&mT())return vT();if(!t)throw So.create("no-app",{appName:e});return t}function pr(e,t,n){let r=A8[e]??e;n&&(r+=`-${n}`);const l=r.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const g=[`Unable to register library "${r}" with version "${t}":`];l&&g.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&h&&g.push("and"),h&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ba.warn(g.join(" "));return}Cs(new ss(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8="firebase-heartbeat-database",v8=1,ah="firebase-heartbeat-store";let bg=null;function CT(){return bg||(bg=TT(T8,v8,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ah)}catch(n){console.warn(n)}}}}).catch(e=>{throw So.create("idb-open",{originalErrorMessage:e.message})})),bg}async function C8(e){try{const n=(await CT()).transaction(ah),r=await n.objectStore(ah).get(bT(e));return await n.done,r}catch(t){if(t instanceof as)Ba.warn(t.message);else{const n=So.create("idb-get",{originalErrorMessage:t?.message});Ba.warn(n.message)}}}async function QA(e,t){try{const r=(await CT()).transaction(ah,"readwrite");await r.objectStore(ah).put(t,bT(e)),await r.done}catch(n){if(n instanceof as)Ba.warn(n.message);else{const r=So.create("idb-set",{originalErrorMessage:n?.message});Ba.warn(r.message)}}}function bT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=1024,S8=30;class I8{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ZA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>S8){const l=D8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ba.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ZA(),{heartbeatsToSend:n,unsentEntries:r}=R8(this._heartbeatsCache.heartbeats),l=yd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ba.warn(t),""}}}function ZA(){return new Date().toISOString().substring(0,10)}function R8(e,t=b8){const n=[];let r=e.slice();for(const l of e){const h=n.find(g=>g.agent===l.agent);if(h){if(h.dates.push(l.date),JA(n)>t){h.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),JA(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N8{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AT()?xT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return QA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return QA(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function JA(e){return yd(JSON.stringify({version:2,heartbeats:e})).length}function D8(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(e){Cs(new ss("platform-logger",t=>new G4(t),"PRIVATE")),Cs(new ss("heartbeat",t=>new I8(t),"PRIVATE")),pr(im,KA,e),pr(im,KA,"esm2020"),pr("fire-js","")}O8("");var M8="firebase",P8="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(M8,P8,"app");const ST="@firebase/installations",ap="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=1e4,RT=`w:${ap}`,NT="FIS_v2",L8="https://firebaseinstallations.googleapis.com/v1",k8=3600*1e3,B8="installations",V8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Tl=new Ml(B8,V8,U8);function DT(e){return e instanceof as&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT({projectId:e}){return`${L8}/projects/${e}/installations`}function MT(e){return{token:e.token,requestStatus:2,expiresIn:z8(e.expiresIn),creationTime:Date.now()}}async function PT(e,t){const r=(await t.json()).error;return Tl.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function LT({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function F8(e,{refreshToken:t}){const n=LT(e);return n.append("Authorization",H8(t)),n}async function kT(e){const t=await e();return t.status>=500&&t.status<600?e():t}function z8(e){return Number(e.replace("s","000"))}function H8(e){return`${NT} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=OT(e),l=LT(e),h=t.getImmediate({optional:!0});if(h){const y=await h.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const g={fid:n,authVersion:NT,appId:e.appId,sdkVersion:RT},w={method:"POST",headers:l,body:JSON.stringify(g)},E=await kT(()=>fetch(r,w));if(E.ok){const y=await E.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:MT(y.authToken)}}else throw await PT("Create Installation",E)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=/^[cdef][\w-]{21}$/,am="";function X8(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=Y8(e);return q8.test(n)?n:am}catch{return am}}function Y8(e){return G8(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;function UT(e,t){const n=i0(e);FT(n,t),K8(n,t)}function FT(e,t){const n=VT.get(e);if(n)for(const r of n)r(t)}function K8(e,t){const n=W8();n&&n.postMessage({key:e,fid:t}),Q8()}let gl=null;function W8(){return!gl&&"BroadcastChannel"in self&&(gl=new BroadcastChannel("[Firebase] FID Change"),gl.onmessage=e=>{FT(e.data.key,e.data.fid)}),gl}function Q8(){VT.size===0&&gl&&(gl.close(),gl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="firebase-installations-database",J8=1,vl="firebase-installations-store";let Sg=null;function op(){return Sg||(Sg=TT(Z8,J8,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(vl)}}})),Sg}async function Ad(e,t){const n=i0(e),l=(await op()).transaction(vl,"readwrite"),h=l.objectStore(vl),g=await h.get(n);return await h.put(t,n),await l.done,(!g||g.fid!==t.fid)&&UT(e,t.fid),t}async function zT(e){const t=i0(e),r=(await op()).transaction(vl,"readwrite");await r.objectStore(vl).delete(t),await r.done}async function r0(e,t){const n=i0(e),l=(await op()).transaction(vl,"readwrite"),h=l.objectStore(vl),g=await h.get(n),w=t(g);return w===void 0?await h.delete(n):await h.put(w,n),await l.done,w&&(!g||g.fid!==w.fid)&&UT(e,w.fid),w}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(e){let t;const n=await r0(e.appConfig,r=>{const l=$8(r),h=t6(e,l);return t=h.registrationPromise,h.installationEntry});return n.fid===am?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function $8(e){const t=e||{fid:X8(),registrationStatus:0};return HT(t)}function t6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Tl.create("app-offline"));return{installationEntry:t,registrationPromise:l}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=e6(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:n6(e)}:{installationEntry:t}}async function e6(e,t){try{const n=await j8(e,t);return Ad(e.appConfig,n)}catch(n){throw DT(n)&&n.customData.serverCode===409?await zT(e.appConfig):await Ad(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function n6(e){let t=await $A(e.appConfig);for(;t.registrationStatus===1;)await BT(100),t=await $A(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await lp(e);return r||n}return t}function $A(e){return r0(e,t=>{if(!t)throw Tl.create("installation-not-found");return HT(t)})}function HT(e){return i6(e)?{fid:e.fid,registrationStatus:0}:e}function i6(e){return e.registrationStatus===1&&e.registrationTime+IT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6({appConfig:e,heartbeatServiceProvider:t},n){const r=s6(e,n),l=F8(e,n),h=t.getImmediate({optional:!0});if(h){const y=await h.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const g={installation:{sdkVersion:RT,appId:e.appId}},w={method:"POST",headers:l,body:JSON.stringify(g)},E=await kT(()=>fetch(r,w));if(E.ok){const y=await E.json();return MT(y)}else throw await PT("Generate Auth Token",E)}function s6(e,{fid:t}){return`${OT(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cp(e,t=!1){let n;const r=await r0(e.appConfig,h=>{if(!jT(h))throw Tl.create("not-registered");const g=h.authToken;if(!t&&l6(g))return h;if(g.requestStatus===1)return n=a6(e,t),h;{if(!navigator.onLine)throw Tl.create("app-offline");const w=u6(h);return n=o6(e,w),w}});return n?await n:r.authToken}async function a6(e,t){let n=await tx(e.appConfig);for(;n.authToken.requestStatus===1;)await BT(100),n=await tx(e.appConfig);const r=n.authToken;return r.requestStatus===0?cp(e,t):r}function tx(e){return r0(e,t=>{if(!jT(t))throw Tl.create("not-registered");const n=t.authToken;return h6(n)?{...t,authToken:{requestStatus:0}}:t})}async function o6(e,t){try{const n=await r6(e,t),r={...t,authToken:n};return await Ad(e.appConfig,r),n}catch(n){if(DT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await zT(e.appConfig);else{const r={...t,authToken:{requestStatus:0}};await Ad(e.appConfig,r)}throw n}}function jT(e){return e!==void 0&&e.registrationStatus===2}function l6(e){return e.requestStatus===2&&!c6(e)}function c6(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+k8}function u6(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function h6(e){return e.requestStatus===1&&e.requestTime+IT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(e){const t=e,{installationEntry:n,registrationPromise:r}=await lp(t);return r?r.catch(console.error):cp(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(e,t=!1){const n=e;return await g6(n),(await cp(n,t)).token}async function g6(e){const{registrationPromise:t}=await lp(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(e){if(!e||!e.options)throw Ig("App Configuration");if(!e.name)throw Ig("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ig(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Ig(e){return Tl.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="installations",p6="installations-internal",y6=e=>{const t=e.getProvider("app").getImmediate(),n=m6(t),r=zo(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},E6=e=>{const t=e.getProvider("app").getImmediate(),n=zo(t,GT).getImmediate();return{getId:()=>f6(n),getToken:l=>d6(n,l)}};function A6(){Cs(new ss(GT,y6,"PUBLIC")),Cs(new ss(p6,E6,"PRIVATE"))}A6();pr(ST,ap);pr(ST,ap,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="analytics",x6="firebase_id",w6="origin",_6=60*1e3,T6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",up="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new e0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zr=new Ml("analytics","Analytics",v6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(e){if(!e.startsWith(up)){const t=zr.create("invalid-gtag-resource",{gtagURL:e});return yr.warn(t.message),""}return e}function qT(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function b6(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function S6(e,t){const n=b6("firebase-js-sdk-policy",{createScriptURL:C6}),r=document.createElement("script"),l=`${up}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(l):l,r.async=!0,document.head.appendChild(r)}function I6(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function R6(e,t,n,r,l,h){const g=r[l];try{if(g)await t[g];else{const E=(await qT(n)).find(y=>y.measurementId===l);E&&await t[E.appId]}}catch(w){yr.error(w)}e("config",l,h)}async function N6(e,t,n,r,l){try{let h=[];if(l&&l.send_to){let g=l.send_to;Array.isArray(g)||(g=[g]);const w=await qT(n);for(const E of g){const y=w.find(S=>S.measurementId===E),T=y&&t[y.appId];if(T)h.push(T);else{h=[];break}}}h.length===0&&(h=Object.values(t)),await Promise.all(h),e("event",r,l||{})}catch(h){yr.error(h)}}function D6(e,t,n,r){async function l(h,...g){try{if(h==="event"){const[w,E]=g;await N6(e,t,n,w,E)}else if(h==="config"){const[w,E]=g;await R6(e,t,n,r,w,E)}else if(h==="consent"){const[w,E]=g;e("consent",w,E)}else if(h==="get"){const[w,E,y]=g;e("get",w,E,y)}else if(h==="set"){const[w]=g;e("set",w)}else e(h,...g)}catch(w){yr.error(w)}}return l}function O6(e,t,n,r,l){let h=function(...g){window[r].push(arguments)};return window[l]&&typeof window[l]=="function"&&(h=window[l]),window[l]=D6(h,e,t,n),{gtagCore:h,wrappedGtag:window[l]}}function M6(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(up)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=30,L6=1e3;class k6{constructor(t={},n=L6){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const XT=new k6;function B6(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function V6(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:B6(n)},l=T6.replace("{app-id}",t),h=await fetch(l,r);if(h.status!==200&&h.status!==304){let g="";try{const w=await h.json();w.error?.message&&(g=w.error.message)}catch{}throw zr.create("config-fetch-failed",{httpStatus:h.status,responseMessage:g})}return h.json()}async function U6(e,t=XT,n){const{appId:r,apiKey:l,measurementId:h}=e.options;if(!r)throw zr.create("no-app-id");if(!l){if(h)return{measurementId:h,appId:r};throw zr.create("no-api-key")}const g=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},w=new H6;return setTimeout(async()=>{w.abort()},_6),YT({appId:r,apiKey:l,measurementId:h},g,w,t)}async function YT(e,{throttleEndTimeMillis:t,backoffCount:n},r,l=XT){const{appId:h,measurementId:g}=e;try{await F6(r,t)}catch(w){if(g)return yr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${w?.message}]`),{appId:h,measurementId:g};throw w}try{const w=await V6(e);return l.deleteThrottleMetadata(h),w}catch(w){const E=w;if(!z6(E)){if(l.deleteThrottleMetadata(h),g)return yr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${E?.message}]`),{appId:h,measurementId:g};throw w}const y=Number(E?.customData?.httpStatus)===503?GA(n,l.intervalMillis,P6):GA(n,l.intervalMillis),T={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return l.setThrottleMetadata(h,T),yr.debug(`Calling attemptFetch again in ${y} millis`),YT(e,T,r,l)}}function F6(e,t){return new Promise((n,r)=>{const l=Math.max(t-Date.now(),0),h=setTimeout(n,l);e.addEventListener(()=>{clearTimeout(h),r(zr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function z6(e){if(!(e instanceof as)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class H6{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function j6(e,t,n,r,l){if(l&&l.global){e("event",n,r);return}else{const h=await t,g={...r,send_to:h};e("event",n,g)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(){if(AT())try{await xT()}catch(e){return yr.warn(zr.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return yr.warn(zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function q6(e,t,n,r,l,h,g){const w=U6(e);w.then(N=>{n[N.measurementId]=N.appId,e.options.measurementId&&N.measurementId!==e.options.measurementId&&yr.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>yr.error(N)),t.push(w);const E=G6().then(N=>{if(N)return r.getId()}),[y,T]=await Promise.all([w,E]);M6(h)||S6(h,y.measurementId),l("js",new Date);const S=g?.config??{};return S[w6]="firebase",S.update=!0,T!=null&&(S[x6]=T),l("config",y.measurementId,S),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(t){this.app=t}_delete(){return delete Yu[this.app.options.appId],Promise.resolve()}}let Yu={},ex=[];const nx={};let Rg="dataLayer",Y6="gtag",ix,KT,rx=!1;function K6(){const e=[];if(ET()&&e.push("This is a browser extension environment."),g4()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,l)=>`(${l+1}) ${r}`).join(" "),n=zr.create("invalid-analytics-context",{errorInfo:t});yr.warn(n.message)}}function W6(e,t,n){K6();const r=e.options.appId;if(!r)throw zr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)yr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zr.create("no-api-key");if(Yu[r]!=null)throw zr.create("already-exists",{id:r});if(!rx){I6(Rg);const{wrappedGtag:h,gtagCore:g}=O6(Yu,ex,nx,Rg,Y6);KT=h,ix=g,rx=!0}return Yu[r]=q6(e,ex,nx,t,ix,Rg,n),new X6(e)}function Q6(e=n0()){e=Ti(e);const t=zo(e,xd);return t.isInitialized()?t.getImmediate():Z6(e)}function Z6(e,t={}){const n=zo(e,xd);if(n.isInitialized()){const l=n.getImmediate();if(Oo(t,n.getOptions()))return l;throw zr.create("already-initialized")}return n.initialize({options:t})}function J6(e,t,n,r){e=Ti(e),j6(KT,Yu[e.app.options.appId],t,n,r).catch(l=>yr.error(l))}const sx="@firebase/analytics",ax="0.10.18";function $6(){Cs(new ss(xd,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("installations-internal").getImmediate();return W6(r,l,n)},"PUBLIC")),Cs(new ss("analytics-internal",e,"PRIVATE")),pr(sx,ax),pr(sx,ax,"esm2020");function e(t){try{const n=t.getProvider(xd).getImmediate();return{logEvent:(r,l,h)=>J6(n,r,l,h)}}catch(n){throw zr.create("interop-component-reg-failed",{reason:n})}}}$6();function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tN=WT,QT=new Ml("auth","Firebase",WT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new e0("@firebase/auth");function eN(e,...t){wd.logLevel<=Oe.WARN&&wd.warn(`Auth (${Pl}): ${e}`,...t)}function ed(e,...t){wd.logLevel<=Oe.ERROR&&wd.error(`Auth (${Pl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(e,...t){throw fp(e,...t)}function Ts(e,...t){return fp(e,...t)}function hp(e,t,n){const r={...tN(),[t]:n};return new Ml("auth","Firebase",r).create(t,{appName:e.name})}function Al(e){return hp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nN(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Js(e,"argument-error"),hp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fp(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return QT.create(e,...t)}function ue(e,t,...n){if(!e)throw fp(t,...n)}function Ma(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ed(t),new Error(t)}function Va(e,t){e||Ma(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){return typeof self<"u"&&self.location?.href||""}function iN(){return ox()==="http:"||ox()==="https:"}function ox(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iN()||ET()||"connection"in navigator)?navigator.onLine:!0}function sN(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(t,n){this.shortDelay=t,this.longDelay=n,Va(n>t,"Short delay should be less than long delay!"),this.isMobile=l4()||h4()}get(){return rN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(e,t){Va(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lN=new bh(3e4,6e4);function gp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Hc(e,t,n,r,l={}){return JT(e,l,async()=>{let h={},g={};r&&(t==="GET"?g=r:h={body:JSON.stringify(r)});const w=Ch({key:e.config.apiKey,...g}).slice(1),E=await e._getAdditionalHeaders();E["Content-Type"]="application/json",e.languageCode&&(E["X-Firebase-Locale"]=e.languageCode);const y={method:t,headers:E,...h};return u4()||(y.referrerPolicy="no-referrer"),e.emulatorConfig&&Ol(e.emulatorConfig.host)&&(y.credentials="include"),ZT.fetch()(await $T(e,e.config.apiHost,n,w),y)})}async function JT(e,t,n){e._canInitEmulator=!1;const r={...aN,...t};try{const l=new uN(e),h=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const g=await h.json();if("needConfirmation"in g)throw Hf(e,"account-exists-with-different-credential",g);if(h.ok&&!("errorMessage"in g))return g;{const w=h.ok?g.errorMessage:g.error.message,[E,y]=w.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(e,"credential-already-in-use",g);if(E==="EMAIL_EXISTS")throw Hf(e,"email-already-in-use",g);if(E==="USER_DISABLED")throw Hf(e,"user-disabled",g);const T=r[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw hp(e,T,y);Js(e,T)}}catch(l){if(l instanceof as)throw l;Js(e,"network-request-failed",{message:String(l)})}}async function cN(e,t,n,r,l={}){const h=await Hc(e,t,n,r,l);return"mfaPendingCredential"in h&&Js(e,"multi-factor-auth-required",{_serverResponse:h}),h}async function $T(e,t,n,r){const l=`${t}${n}?${r}`,h=e,g=h.config.emulator?dp(e.config,l):`${e.config.apiScheme}://${l}`;return oN.includes(n)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(g).toString():g}class uN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ts(this.auth,"network-request-failed")),lN.get())})}}function Hf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=Ts(e,t,r);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(e,t){return Hc(e,"POST","/v1/accounts:delete",t)}async function _d(e,t){return Hc(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fN(e,t=!1){const n=Ti(e),r=await n.getIdToken(t),l=mp(r);ue(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,g=h?.sign_in_provider;return{claims:l,token:r,authTime:Ku(Ng(l.auth_time)),issuedAtTime:Ku(Ng(l.iat)),expirationTime:Ku(Ng(l.exp)),signInProvider:g||null,signInSecondFactor:h?.sign_in_second_factor||null}}function Ng(e){return Number(e)*1e3}function mp(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return ed("JWT malformed, contained fewer than 3 sections"),null;try{const l=fT(n);return l?JSON.parse(l):(ed("Failed to decode base64 JWT payload"),null)}catch(l){return ed("Caught error parsing JWT payload as JSON",l?.toString()),null}}function lx(e){const t=mp(e);return ue(t,"internal-error"),ue(typeof t.exp<"u","internal-error"),ue(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof as&&dN(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function dN({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(e){const t=e.auth,n=await e.getIdToken(),r=await oh(e,_d(t,{idToken:n}));ue(r?.users.length,t,"internal-error");const l=r.users[0];e._notifyReloadListener(l);const h=l.providerUserInfo?.length?tv(l.providerUserInfo):[],g=pN(e.providerData,h),w=e.isAnonymous,E=!(e.email&&l.passwordHash)&&!g?.length,y=w?E:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:g,metadata:new lm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,T)}async function mN(e){const t=Ti(e);await Td(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function pN(e,t){return[...e.filter(r=>!t.some(l=>l.providerId===r.providerId)),...t]}function tv(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(e,t){const n=await JT(e,{},async()=>{const r=Ch({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=e.config,g=await $T(e,l,"/v1/token",`key=${h}`),w=await e._getAdditionalHeaders();w["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:w,body:r};return e.emulatorConfig&&Ol(e.emulatorConfig.host)&&(E.credentials="include"),ZT.fetch()(g,E)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EN(e,t){return Hc(e,"POST","/v2/accounts:revokeToken",gp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ue(t.idToken,"internal-error"),ue(typeof t.idToken<"u","internal-error"),ue(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):lx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ue(t.length!==0,"internal-error");const n=lx(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:l,expiresIn:h}=await yN(t,n);this.updateTokensAndExpiration(r,l,Number(h))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:l,expirationTime:h}=n,g=new Sc;return r&&(ue(typeof r=="string","internal-error",{appName:t}),g.refreshToken=r),l&&(ue(typeof l=="string","internal-error",{appName:t}),g.accessToken=l),h&&(ue(typeof h=="number","internal-error",{appName:t}),g.expirationTime=h),g}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Sc,this.toJSON())}_performRefresh(){return Ma("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(e,t){ue(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class ws{constructor({uid:t,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new gN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new lm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await oh(this,this.stsTokenManager.getToken(this.auth,t));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return fN(this,t)}reload(){return mN(this)}_assign(t){this!==t&&(ue(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new ws({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(Al(this.auth));const t=await this.getIdToken();return await oh(this,hN(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const r=n.displayName??void 0,l=n.email??void 0,h=n.phoneNumber??void 0,g=n.photoURL??void 0,w=n.tenantId??void 0,E=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:N,isAnonymous:k,providerData:z,stsTokenManager:X}=n;ue(S&&X,t,"internal-error");const G=Sc.fromJSON(this.name,X);ue(typeof S=="string",t,"internal-error"),Ao(r,t.name),Ao(l,t.name),ue(typeof N=="boolean",t,"internal-error"),ue(typeof k=="boolean",t,"internal-error"),Ao(h,t.name),Ao(g,t.name),Ao(w,t.name),Ao(E,t.name),Ao(y,t.name),Ao(T,t.name);const it=new ws({uid:S,auth:t,email:l,emailVerified:N,displayName:r,isAnonymous:k,photoURL:g,phoneNumber:h,tenantId:w,stsTokenManager:G,createdAt:y,lastLoginAt:T});return z&&Array.isArray(z)&&(it.providerData=z.map(nt=>({...nt}))),E&&(it._redirectEventId=E),it}static async _fromIdTokenResponse(t,n,r=!1){const l=new Sc;l.updateFromServerResponse(n);const h=new ws({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:r});return await Td(h),h}static async _fromGetAccountInfoResponse(t,n,r){const l=n.users[0];ue(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?tv(l.providerUserInfo):[],g=!(l.email&&l.passwordHash)&&!h?.length,w=new Sc;w.updateFromIdToken(r);const E=new ws({uid:l.localId,auth:t,stsTokenManager:w,isAnonymous:g}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new lm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(E,y),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;function Pa(e){Va(e instanceof Function,"Expected a class definition");let t=cx.get(e);return t?(Va(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cx.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ev.type="NONE";const ux=ev;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(e,t,n){return`firebase:${e}:${t}:${n}`}class Ic{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:l,name:h}=this.auth;this.fullUserKey=nd(this.userKey,l.apiKey,h),this.fullPersistenceKey=nd("persistence",l.apiKey,h),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await _d(this.auth,{idToken:t}).catch(()=>{});return n?ws._fromGetAccountInfoResponse(this.auth,n,t):null}return ws._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Ic(Pa(ux),t,r);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let h=l[0]||Pa(ux);const g=nd(r,t.config.apiKey,t.name);let w=null;for(const y of n)try{const T=await y._get(g);if(T){let S;if(typeof T=="string"){const N=await _d(t,{idToken:T}).catch(()=>{});if(!N)break;S=await ws._fromGetAccountInfoResponse(t,N,T)}else S=ws._fromJSON(t,T);y!==h&&(w=S),h=y;break}}catch{}const E=l.filter(y=>y._shouldAllowMigration);return!h._shouldAllowMigration||!E.length?new Ic(h,t,r):(h=E[0],w&&await h._set(g,w.toJSON()),await Promise.all(n.map(async y=>{if(y!==h)try{await y._remove(g)}catch{}})),new Ic(h,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ov(t))return"Blackberry";if(lv(t))return"Webos";if(iv(t))return"Safari";if((t.includes("chrome/")||rv(t))&&!t.includes("edge/"))return"Chrome";if(av(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function nv(e=Qi()){return/firefox\//i.test(e)}function iv(e=Qi()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rv(e=Qi()){return/crios\//i.test(e)}function sv(e=Qi()){return/iemobile/i.test(e)}function av(e=Qi()){return/android/i.test(e)}function ov(e=Qi()){return/blackberry/i.test(e)}function lv(e=Qi()){return/webos/i.test(e)}function pp(e=Qi()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function AN(e=Qi()){return pp(e)&&!!window.navigator?.standalone}function xN(){return f4()&&document.documentMode===10}function cv(e=Qi()){return pp(e)||av(e)||lv(e)||ov(e)||/windows phone/i.test(e)||sv(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(e,t=[]){let n;switch(e){case"Browser":n=hx(Qi());break;case"Worker":n=`${hx(Qi())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=h=>new Promise((g,w)=>{try{const E=t(h);g(E)}catch(E){w(E)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(e,t={}){return Hc(e,"GET","/v2/passwordPolicy",gp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=6;class vN{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<t.length;l++)r=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t,n,r,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fx(this),this.idTokenSubscription=new fx(this),this.beforeStateQueue=new wN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Pa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ic.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await _d(this,{idToken:t}),r=await ws._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ns(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,g=r?._redirectEventId,w=await this.tryRedirectSignIn(t);(!h||h===g)&&w?.user&&(r=w.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Td(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ns(this.app))return Promise.reject(Al(this));const n=t?Ti(t):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ue(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(Al(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ns(this.app)?Promise.reject(Al(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pa(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await _N(this),n=new vN(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ml("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Pa(t)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ic.create(this,[Pa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,l){if(this._deleted)return()=>{};const h=typeof n=="function"?n:n.next.bind(n);let g=!1;const w=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(w,this,"internal-error"),w.then(()=>{g||h(this.currentUser)}),typeof n=="function"){const E=t.addObserver(n,r,l);return()=>{g=!0,E()}}else{const E=t.addObserver(n);return()=>{g=!0,E()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=uv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&eN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function s0(e){return Ti(e)}class fx{constructor(t){this.auth=t,this.observer=null,this.addObserver=A4(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bN(e){yp=e}function SN(e){return yp.loadJS(e)}function IN(){return yp.gapiScript}function RN(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(e,t){const n=zo(e,"auth");if(n.isInitialized()){const l=n.getImmediate(),h=n.getOptions();if(Oo(h,t??{}))return l;Js(l,"already-initialized")}return n.initialize({options:t})}function DN(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Pa);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function ON(e,t,n){const r=s0(e);ue(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const l=!1,h=hv(t),{host:g,port:w}=MN(t),E=w===null?"":`:${w}`,y={url:`${h}//${g}${E}/`},T=Object.freeze({host:g,port:w,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(Oo(y,r.config.emulator)&&Oo(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Ol(g)?(ip(`${h}//${g}${E}`),rp("Auth",!0)):PN()}function hv(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function MN(e){const t=hv(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const h=l[1];return{host:h,port:dx(r.substr(h.length+1))}}else{const[h,g]=r.split(":");return{host:h,port:dx(g)}}}function dx(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function PN(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ma("not implemented")}_getIdTokenResponse(t){return Ma("not implemented")}_linkToIdToken(t,n){return Ma("not implemented")}_getReauthenticationResolver(t){return Ma("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(e,t){return cN(e,"POST","/v1/accounts:signInWithIdp",gp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="http://localhost";class Cl extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Cl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Js("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:l,...h}=n;if(!r||!l)return null;const g=new Cl(r,l);return g.idToken=h.idToken||void 0,g.accessToken=h.accessToken||void 0,g.secret=h.secret,g.nonce=h.nonce,g.pendingToken=h.pendingToken||null,g}_getIdTokenResponse(t){const n=this.buildRequest();return Rc(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Rc(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Rc(t,n)}buildRequest(){const t={requestUri:LN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ch(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Ep{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Sh{constructor(){super("facebook.com")}static credential(t){return Cl._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _o.credentialFromTaggedObject(t)}static credentialFromError(t){return _o.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _o.credential(t.oauthAccessToken)}catch{return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Sh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Cl._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Oa.credentialFromTaggedObject(t)}static credentialFromError(t){return Oa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Oa.credential(n,r)}catch{return null}}}Oa.GOOGLE_SIGN_IN_METHOD="google.com";Oa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Sh{constructor(){super("github.com")}static credential(t){return Cl._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return To.credentialFromTaggedObject(t)}static credentialFromError(t){return To.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Sh{constructor(){super("twitter.com")}static credential(t,n){return Cl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return vo.credentialFromTaggedObject(t)}static credentialFromError(t){return vo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return vo.credential(n,r)}catch{return null}}}vo.TWITTER_SIGN_IN_METHOD="twitter.com";vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,l=!1){const h=await ws._fromIdTokenResponse(t,r,l),g=gx(r);return new Oc({user:h,providerId:g,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const l=gx(r);return new Oc({user:t,providerId:l,_tokenResponse:r,operationType:n})}}function gx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends as{constructor(t,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,l){return new vd(t,n,r,l)}}function dv(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?vd._fromErrorAndOperation(e,h,t,r):h})}async function kN(e,t,n=!1){const r=await oh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Oc._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(e,t,n=!1){const{auth:r}=e;if(ns(r.app))return Promise.reject(Al(r));const l="reauthenticate";try{const h=await oh(e,dv(r,l,t,e),n);ue(h.idToken,r,"internal-error");const g=mp(h.idToken);ue(g,r,"internal-error");const{sub:w}=g;return ue(e.uid===w,r,"user-mismatch"),Oc._forOperation(e,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Js(r,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(e,t,n=!1){if(ns(e.app))return Promise.reject(Al(e));const r="signIn",l=await dv(e,r,t),h=await Oc._fromIdTokenResponse(e,r,l);return n||await e._updateCurrentUser(h.user),h}function UN(e,t,n,r){return Ti(e).onIdTokenChanged(t,n,r)}function FN(e,t,n){return Ti(e).beforeAuthStateChanged(t,n)}function gv(e,t,n,r){return Ti(e).onAuthStateChanged(t,n,r)}function zN(e){return Ti(e).signOut()}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=1e3,jN=10;class pv extends mv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&t(n,l,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((g,w,E)=>{this.notifyListeners(g,E)});return}const r=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const g=this.storage.getItem(r);!n&&this.localCache[r]===g||this.notifyListeners(r,g)},h=this.storage.getItem(r);xN()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,jN):l()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},HN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}pv.type="LOCAL";const GN=pv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv extends mv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}yv.type="SESSION";const Ev=yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const r=new a0(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:l,data:h}=n.data,g=this.handlersMap[l];if(!g?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const w=Array.from(g).map(async y=>y(n.origin,h)),E=await qN(w);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:E})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}a0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,g;return new Promise((w,E)=>{const y=Ap("",20);l.port1.start();const T=setTimeout(()=>{E(new Error("unsupported_event"))},r);g={messageChannel:l,onMessage(S){const N=S;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(T),h=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),w(N.data.response);break;default:clearTimeout(T),clearTimeout(h),E(new Error("invalid_response"));break}}},this.handlers.add(g),l.port1.addEventListener("message",g.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{g&&this.removeMessageHandler(g)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function YN(e){js().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function KN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WN(){return navigator?.serviceWorker?.controller||null}function QN(){return Av()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="firebaseLocalStorageDb",ZN=1,bd="firebaseLocalStorage",wv="fbase_key";class Ih{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function o0(e,t){return e.transaction([bd],t?"readwrite":"readonly").objectStore(bd)}function JN(){const e=indexedDB.deleteDatabase(xv);return new Ih(e).toPromise()}function cm(){const e=indexedDB.open(xv,ZN);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(bd,{keyPath:wv})}catch(l){n(l)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(bd)?t(r):(r.close(),await JN(),t(await cm()))})})}async function mx(e,t,n){const r=o0(e,!0).put({[wv]:t,value:n});return new Ih(r).toPromise()}async function $N(e,t){const n=o0(e,!1).get(t),r=await new Ih(n).toPromise();return r===void 0?null:r.value}function px(e,t){const n=o0(e,!0).delete(t);return new Ih(n).toPromise()}const tD=800,eD=3;class _v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>eD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Av()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=a0._getInstance(QN()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KN(),!this.activeServiceWorker)return;this.sender=new XN(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||WN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await cm();return await mx(t,Cd,"1"),await px(t,Cd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mx(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>$N(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>px(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=o0(l,!1).getAll();return new Ih(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_v.type="LOCAL";const nD=_v;new bh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(e,t){return t?Pa(t):(ue(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends fv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Rc(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Rc(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Rc(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function iD(e){return VN(e.auth,new xp(e),e.bypassAuthState)}function rD(e){const{auth:t,user:n}=e;return ue(n,t,"internal-error"),BN(n,new xp(e),e.bypassAuthState)}async function sD(e){const{auth:t,user:n}=e;return ue(n,t,"internal-error"),kN(n,new xp(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(t,n,r,l,h=!1){this.auth=t,this.resolver=r,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:l,tenantId:h,error:g,type:w}=t;if(g){this.reject(g);return}const E={auth:this.auth,requestUri:n,sessionId:r,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(w)(E))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return iD;case"linkViaPopup":case"linkViaRedirect":return sD;case"reauthViaPopup":case"reauthViaRedirect":return rD;default:Js(this.auth,"internal-error")}}resolve(t){Va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Va(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=new bh(2e3,1e4);async function oD(e,t,n){if(ns(e.app))return Promise.reject(Ts(e,"operation-not-supported-in-this-environment"));const r=s0(e);nN(e,t,Ep);const l=Tv(r,n);return new ml(r,"signInViaPopup",t,l).executeNotNull()}class ml extends vv{constructor(t,n,r,l,h){super(t,n,l,h),this.provider=r,this.authWindow=null,this.pollId=null,ml.currentPopupAction&&ml.currentPopupAction.cancel(),ml.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ue(t,this.auth,"internal-error"),t}async onExecution(){Va(this.filter.length===1,"Popup operations only handle one event");const t=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ml.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,aD.get())};t()}}ml.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="pendingRedirect",id=new Map;class cD extends vv{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=id.get(this.auth._key());if(!t){try{const r=await uD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}id.set(this.auth._key(),t)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uD(e,t){const n=dD(t),r=fD(e);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function hD(e,t){id.set(e._key(),t)}function fD(e){return Pa(e._redirectPersistence)}function dD(e){return nd(lD,e.config.apiKey,e.name)}async function gD(e,t,n=!1){if(ns(e.app))return Promise.reject(Al(e));const r=s0(e),l=Tv(r,t),g=await new cD(r,l,n).execute();return g&&!n&&(delete g.user._redirectEventId,await r._persistUserIfCurrent(g.user),await r._setRedirectUser(null,t)),g}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=600*1e3;class pD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!yD(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!Cv(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Ts(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mD&&this.cachedEventUids.clear(),this.cachedEventUids.has(yx(t))}saveEventToCache(t){this.cachedEventUids.add(yx(t)),this.lastProcessedEventTime=Date.now()}}function yx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Cv({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function yD(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cv(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(e,t={}){return Hc(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xD=/^https?/;async function wD(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ED(e);for(const n of t)try{if(_D(n))return}catch{}Js(e,"unauthorized-domain")}function _D(e){const t=om(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const g=new URL(e);return g.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&g.hostname===r}if(!xD.test(n))return!1;if(AD.test(e))return r===e;const l=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new bh(3e4,6e4);function Ex(){const e=js().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function vD(e){return new Promise((t,n)=>{function r(){Ex(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ex(),n(Ts(e,"network-request-failed"))},timeout:TD.get()})}if(js().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(js().gapi?.load)r();else{const l=RN("iframefcb");return js()[l]=()=>{gapi.load?r():n(Ts(e,"network-request-failed"))},SN(`${IN()}?onload=${l}`).catch(h=>n(h))}}).catch(t=>{throw rd=null,t})}let rd=null;function CD(e){return rd=rd||vD(e),rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new bh(5e3,15e3),SD="__/auth/iframe",ID="emulator/auth/iframe",RD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ND=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DD(e){const t=e.config;ue(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?dp(t,ID):`https://${e.config.authDomain}/${SD}`,r={apiKey:t.apiKey,appName:e.name,v:Pl},l=ND.get(e.config.apiHost);l&&(r.eid=l);const h=e._getFrameworks();return h.length&&(r.fw=h.join(",")),`${n}?${Ch(r).slice(1)}`}async function OD(e){const t=await CD(e),n=js().gapi;return ue(n,e,"internal-error"),t.open({where:document.body,url:DD(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RD,dontclear:!0},r=>new Promise(async(l,h)=>{await r.restyle({setHideOnLeave:!1});const g=Ts(e,"network-request-failed"),w=js().setTimeout(()=>{h(g)},bD.get());function E(){js().clearTimeout(w),l(r)}r.ping(E).then(E,()=>{h(g)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PD=500,LD=600,kD="_blank",BD="http://localhost";class Ax{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VD(e,t,n,r=PD,l=LD){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),g=Math.max((window.screen.availWidth-r)/2,0).toString();let w="";const E={...MD,width:r.toString(),height:l.toString(),top:h,left:g},y=Qi().toLowerCase();n&&(w=rv(y)?kD:n),nv(y)&&(t=t||BD,E.scrollbars="yes");const T=Object.entries(E).reduce((N,[k,z])=>`${N}${k}=${z},`,"");if(AN(y)&&w!=="_self")return UD(t||"",w),new Ax(null);const S=window.open(t||"",w,T);ue(S,e,"popup-blocked");try{S.focus()}catch{}return new Ax(S)}function UD(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="__/auth/handler",zD="emulator/auth/handler",HD=encodeURIComponent("fac");async function xx(e,t,n,r,l,h){ue(e.config.authDomain,e,"auth-domain-config-required"),ue(e.config.apiKey,e,"invalid-api-key");const g={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Pl,eventId:l};if(t instanceof Ep){t.setDefaultLanguage(e.languageCode),g.providerId=t.providerId||"",E4(t.getCustomParameters())||(g.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,S]of Object.entries({}))g[T]=S}if(t instanceof Sh){const T=t.getScopes().filter(S=>S!=="");T.length>0&&(g.scopes=T.join(","))}e.tenantId&&(g.tid=e.tenantId);const w=g;for(const T of Object.keys(w))w[T]===void 0&&delete w[T];const E=await e._getAppCheckToken(),y=E?`#${HD}=${encodeURIComponent(E)}`:"";return`${jD(e)}?${Ch(w).slice(1)}${y}`}function jD({config:e}){return e.emulator?dp(e,zD):`https://${e.authDomain}/${FD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="webStorageSupport";class GD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ev,this._completeRedirectFn=gD,this._overrideRedirectResult=hD}async _openPopup(t,n,r,l){Va(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await xx(t,n,r,om(),l);return VD(t,h,Ap())}async _openRedirect(t,n,r,l){await this._originValidation(t);const h=await xx(t,n,r,om(),l);return YN(h),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:h}=this.eventManagers[n];return l?Promise.resolve(l):(Va(h,"If manager is not set, promise should be"),h)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await OD(t),r=new pD(t);return n.register("authEvent",l=>(ue(l?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Dg,{type:Dg},l=>{const h=l?.[0]?.[Dg];h!==void 0&&n(!!h),Js(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wD(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return cv()||iv()||pp()}}const qD=GD;var wx="@firebase/auth",_x="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KD(e){Cs(new ss("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:g,authDomain:w}=r.options;ue(g&&!g.includes(":"),"invalid-api-key",{appName:r.name});const E={apiKey:g,authDomain:w,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uv(e)},y=new CN(r,l,h,E);return DN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Cs(new ss("auth-internal",t=>{const n=s0(t.getProvider("auth").getImmediate());return(r=>new XD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(wx,_x,YD(e)),pr(wx,_x,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=300,QD=pT("authIdTokenMaxAge")||WD;let Tx=null;const ZD=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QD)return;const l=n?.token;Tx!==l&&(Tx=l,await fetch(e,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function JD(e=n0()){const t=zo(e,"auth");if(t.isInitialized())return t.getImmediate();const n=NN(e,{popupRedirectResolver:qD,persistence:[nD,GN,Ev]}),r=pT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(r,location.origin);if(location.origin===h.origin){const g=ZD(h.toString());FN(n,g,()=>g(n.currentUser)),UN(n,w=>g(w))}}const l=dT("auth");return l&&ON(n,`http://${l}`),n}function $D(){return document.getElementsByTagName("head")?.[0]??document}bN({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=l=>{const h=Ts("internal-error");h.customData=l,n(h)},r.type="text/javascript",r.charset="UTF-8",$D().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KD("Browser");var vx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Io,bv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(H,U){function V(){}V.prototype=U.prototype,H.F=U.prototype,H.prototype=new V,H.prototype.constructor=H,H.D=function(tt,W,Z){for(var Y=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)Y[Jt-2]=arguments[Jt];return U.prototype[W].apply(tt,Y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(H,U,V){V||(V=0);const tt=Array(16);if(typeof U=="string")for(var W=0;W<16;++W)tt[W]=U.charCodeAt(V++)|U.charCodeAt(V++)<<8|U.charCodeAt(V++)<<16|U.charCodeAt(V++)<<24;else for(W=0;W<16;++W)tt[W]=U[V++]|U[V++]<<8|U[V++]<<16|U[V++]<<24;U=H.g[0],V=H.g[1],W=H.g[2];let Z=H.g[3],Y;Y=U+(Z^V&(W^Z))+tt[0]+3614090360&4294967295,U=V+(Y<<7&4294967295|Y>>>25),Y=Z+(W^U&(V^W))+tt[1]+3905402710&4294967295,Z=U+(Y<<12&4294967295|Y>>>20),Y=W+(V^Z&(U^V))+tt[2]+606105819&4294967295,W=Z+(Y<<17&4294967295|Y>>>15),Y=V+(U^W&(Z^U))+tt[3]+3250441966&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=U+(Z^V&(W^Z))+tt[4]+4118548399&4294967295,U=V+(Y<<7&4294967295|Y>>>25),Y=Z+(W^U&(V^W))+tt[5]+1200080426&4294967295,Z=U+(Y<<12&4294967295|Y>>>20),Y=W+(V^Z&(U^V))+tt[6]+2821735955&4294967295,W=Z+(Y<<17&4294967295|Y>>>15),Y=V+(U^W&(Z^U))+tt[7]+4249261313&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=U+(Z^V&(W^Z))+tt[8]+1770035416&4294967295,U=V+(Y<<7&4294967295|Y>>>25),Y=Z+(W^U&(V^W))+tt[9]+2336552879&4294967295,Z=U+(Y<<12&4294967295|Y>>>20),Y=W+(V^Z&(U^V))+tt[10]+4294925233&4294967295,W=Z+(Y<<17&4294967295|Y>>>15),Y=V+(U^W&(Z^U))+tt[11]+2304563134&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=U+(Z^V&(W^Z))+tt[12]+1804603682&4294967295,U=V+(Y<<7&4294967295|Y>>>25),Y=Z+(W^U&(V^W))+tt[13]+4254626195&4294967295,Z=U+(Y<<12&4294967295|Y>>>20),Y=W+(V^Z&(U^V))+tt[14]+2792965006&4294967295,W=Z+(Y<<17&4294967295|Y>>>15),Y=V+(U^W&(Z^U))+tt[15]+1236535329&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=U+(W^Z&(V^W))+tt[1]+4129170786&4294967295,U=V+(Y<<5&4294967295|Y>>>27),Y=Z+(V^W&(U^V))+tt[6]+3225465664&4294967295,Z=U+(Y<<9&4294967295|Y>>>23),Y=W+(U^V&(Z^U))+tt[11]+643717713&4294967295,W=Z+(Y<<14&4294967295|Y>>>18),Y=V+(Z^U&(W^Z))+tt[0]+3921069994&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=U+(W^Z&(V^W))+tt[5]+3593408605&4294967295,U=V+(Y<<5&4294967295|Y>>>27),Y=Z+(V^W&(U^V))+tt[10]+38016083&4294967295,Z=U+(Y<<9&4294967295|Y>>>23),Y=W+(U^V&(Z^U))+tt[15]+3634488961&4294967295,W=Z+(Y<<14&4294967295|Y>>>18),Y=V+(Z^U&(W^Z))+tt[4]+3889429448&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=U+(W^Z&(V^W))+tt[9]+568446438&4294967295,U=V+(Y<<5&4294967295|Y>>>27),Y=Z+(V^W&(U^V))+tt[14]+3275163606&4294967295,Z=U+(Y<<9&4294967295|Y>>>23),Y=W+(U^V&(Z^U))+tt[3]+4107603335&4294967295,W=Z+(Y<<14&4294967295|Y>>>18),Y=V+(Z^U&(W^Z))+tt[8]+1163531501&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=U+(W^Z&(V^W))+tt[13]+2850285829&4294967295,U=V+(Y<<5&4294967295|Y>>>27),Y=Z+(V^W&(U^V))+tt[2]+4243563512&4294967295,Z=U+(Y<<9&4294967295|Y>>>23),Y=W+(U^V&(Z^U))+tt[7]+1735328473&4294967295,W=Z+(Y<<14&4294967295|Y>>>18),Y=V+(Z^U&(W^Z))+tt[12]+2368359562&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=U+(V^W^Z)+tt[5]+4294588738&4294967295,U=V+(Y<<4&4294967295|Y>>>28),Y=Z+(U^V^W)+tt[8]+2272392833&4294967295,Z=U+(Y<<11&4294967295|Y>>>21),Y=W+(Z^U^V)+tt[11]+1839030562&4294967295,W=Z+(Y<<16&4294967295|Y>>>16),Y=V+(W^Z^U)+tt[14]+4259657740&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=U+(V^W^Z)+tt[1]+2763975236&4294967295,U=V+(Y<<4&4294967295|Y>>>28),Y=Z+(U^V^W)+tt[4]+1272893353&4294967295,Z=U+(Y<<11&4294967295|Y>>>21),Y=W+(Z^U^V)+tt[7]+4139469664&4294967295,W=Z+(Y<<16&4294967295|Y>>>16),Y=V+(W^Z^U)+tt[10]+3200236656&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=U+(V^W^Z)+tt[13]+681279174&4294967295,U=V+(Y<<4&4294967295|Y>>>28),Y=Z+(U^V^W)+tt[0]+3936430074&4294967295,Z=U+(Y<<11&4294967295|Y>>>21),Y=W+(Z^U^V)+tt[3]+3572445317&4294967295,W=Z+(Y<<16&4294967295|Y>>>16),Y=V+(W^Z^U)+tt[6]+76029189&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=U+(V^W^Z)+tt[9]+3654602809&4294967295,U=V+(Y<<4&4294967295|Y>>>28),Y=Z+(U^V^W)+tt[12]+3873151461&4294967295,Z=U+(Y<<11&4294967295|Y>>>21),Y=W+(Z^U^V)+tt[15]+530742520&4294967295,W=Z+(Y<<16&4294967295|Y>>>16),Y=V+(W^Z^U)+tt[2]+3299628645&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=U+(W^(V|~Z))+tt[0]+4096336452&4294967295,U=V+(Y<<6&4294967295|Y>>>26),Y=Z+(V^(U|~W))+tt[7]+1126891415&4294967295,Z=U+(Y<<10&4294967295|Y>>>22),Y=W+(U^(Z|~V))+tt[14]+2878612391&4294967295,W=Z+(Y<<15&4294967295|Y>>>17),Y=V+(Z^(W|~U))+tt[5]+4237533241&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=U+(W^(V|~Z))+tt[12]+1700485571&4294967295,U=V+(Y<<6&4294967295|Y>>>26),Y=Z+(V^(U|~W))+tt[3]+2399980690&4294967295,Z=U+(Y<<10&4294967295|Y>>>22),Y=W+(U^(Z|~V))+tt[10]+4293915773&4294967295,W=Z+(Y<<15&4294967295|Y>>>17),Y=V+(Z^(W|~U))+tt[1]+2240044497&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=U+(W^(V|~Z))+tt[8]+1873313359&4294967295,U=V+(Y<<6&4294967295|Y>>>26),Y=Z+(V^(U|~W))+tt[15]+4264355552&4294967295,Z=U+(Y<<10&4294967295|Y>>>22),Y=W+(U^(Z|~V))+tt[6]+2734768916&4294967295,W=Z+(Y<<15&4294967295|Y>>>17),Y=V+(Z^(W|~U))+tt[13]+1309151649&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=U+(W^(V|~Z))+tt[4]+4149444226&4294967295,U=V+(Y<<6&4294967295|Y>>>26),Y=Z+(V^(U|~W))+tt[11]+3174756917&4294967295,Z=U+(Y<<10&4294967295|Y>>>22),Y=W+(U^(Z|~V))+tt[2]+718787259&4294967295,W=Z+(Y<<15&4294967295|Y>>>17),Y=V+(Z^(W|~U))+tt[9]+3951481745&4294967295,H.g[0]=H.g[0]+U&4294967295,H.g[1]=H.g[1]+(W+(Y<<21&4294967295|Y>>>11))&4294967295,H.g[2]=H.g[2]+W&4294967295,H.g[3]=H.g[3]+Z&4294967295}r.prototype.v=function(H,U){U===void 0&&(U=H.length);const V=U-this.blockSize,tt=this.C;let W=this.h,Z=0;for(;Z<U;){if(W==0)for(;Z<=V;)l(this,H,Z),Z+=this.blockSize;if(typeof H=="string"){for(;Z<U;)if(tt[W++]=H.charCodeAt(Z++),W==this.blockSize){l(this,tt),W=0;break}}else for(;Z<U;)if(tt[W++]=H[Z++],W==this.blockSize){l(this,tt),W=0;break}}this.h=W,this.o+=U},r.prototype.A=function(){var H=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);H[0]=128;for(var U=1;U<H.length-8;++U)H[U]=0;U=this.o*8;for(var V=H.length-8;V<H.length;++V)H[V]=U&255,U/=256;for(this.v(H),H=Array(16),U=0,V=0;V<4;++V)for(let tt=0;tt<32;tt+=8)H[U++]=this.g[V]>>>tt&255;return H};function h(H,U){var V=w;return Object.prototype.hasOwnProperty.call(V,H)?V[H]:V[H]=U(H)}function g(H,U){this.h=U;const V=[];let tt=!0;for(let W=H.length-1;W>=0;W--){const Z=H[W]|0;tt&&Z==U||(V[W]=Z,tt=!1)}this.g=V}var w={};function E(H){return-128<=H&&H<128?h(H,function(U){return new g([U|0],U<0?-1:0)}):new g([H|0],H<0?-1:0)}function y(H){if(isNaN(H)||!isFinite(H))return S;if(H<0)return G(y(-H));const U=[];let V=1;for(let tt=0;H>=V;tt++)U[tt]=H/V|0,V*=4294967296;return new g(U,0)}function T(H,U){if(H.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(H.charAt(0)=="-")return G(T(H.substring(1),U));if(H.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=y(Math.pow(U,8));let tt=S;for(let Z=0;Z<H.length;Z+=8){var W=Math.min(8,H.length-Z);const Y=parseInt(H.substring(Z,Z+W),U);W<8?(W=y(Math.pow(U,W)),tt=tt.j(W).add(y(Y))):(tt=tt.j(V),tt=tt.add(y(Y)))}return tt}var S=E(0),N=E(1),k=E(16777216);e=g.prototype,e.m=function(){if(X(this))return-G(this).m();let H=0,U=1;for(let V=0;V<this.g.length;V++){const tt=this.i(V);H+=(tt>=0?tt:4294967296+tt)*U,U*=4294967296}return H},e.toString=function(H){if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(z(this))return"0";if(X(this))return"-"+G(this).toString(H);const U=y(Math.pow(H,6));var V=this;let tt="";for(;;){const W=At(V,U).g;V=it(V,W.j(U));let Z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(H);if(V=W,z(V))return Z+tt;for(;Z.length<6;)Z="0"+Z;tt=Z+tt}},e.i=function(H){return H<0?0:H<this.g.length?this.g[H]:this.h};function z(H){if(H.h!=0)return!1;for(let U=0;U<H.g.length;U++)if(H.g[U]!=0)return!1;return!0}function X(H){return H.h==-1}e.l=function(H){return H=it(this,H),X(H)?-1:z(H)?0:1};function G(H){const U=H.g.length,V=[];for(let tt=0;tt<U;tt++)V[tt]=~H.g[tt];return new g(V,~H.h).add(N)}e.abs=function(){return X(this)?G(this):this},e.add=function(H){const U=Math.max(this.g.length,H.g.length),V=[];let tt=0;for(let W=0;W<=U;W++){let Z=tt+(this.i(W)&65535)+(H.i(W)&65535),Y=(Z>>>16)+(this.i(W)>>>16)+(H.i(W)>>>16);tt=Y>>>16,Z&=65535,Y&=65535,V[W]=Y<<16|Z}return new g(V,V[V.length-1]&-2147483648?-1:0)};function it(H,U){return H.add(G(U))}e.j=function(H){if(z(this)||z(H))return S;if(X(this))return X(H)?G(this).j(G(H)):G(G(this).j(H));if(X(H))return G(this.j(G(H)));if(this.l(k)<0&&H.l(k)<0)return y(this.m()*H.m());const U=this.g.length+H.g.length,V=[];for(var tt=0;tt<2*U;tt++)V[tt]=0;for(tt=0;tt<this.g.length;tt++)for(let W=0;W<H.g.length;W++){const Z=this.i(tt)>>>16,Y=this.i(tt)&65535,Jt=H.i(W)>>>16,ht=H.i(W)&65535;V[2*tt+2*W]+=Y*ht,nt(V,2*tt+2*W),V[2*tt+2*W+1]+=Z*ht,nt(V,2*tt+2*W+1),V[2*tt+2*W+1]+=Y*Jt,nt(V,2*tt+2*W+1),V[2*tt+2*W+2]+=Z*Jt,nt(V,2*tt+2*W+2)}for(H=0;H<U;H++)V[H]=V[2*H+1]<<16|V[2*H];for(H=U;H<2*U;H++)V[H]=0;return new g(V,0)};function nt(H,U){for(;(H[U]&65535)!=H[U];)H[U+1]+=H[U]>>>16,H[U]&=65535,U++}function K(H,U){this.g=H,this.h=U}function At(H,U){if(z(U))throw Error("division by zero");if(z(H))return new K(S,S);if(X(H))return U=At(G(H),U),new K(G(U.g),G(U.h));if(X(U))return U=At(H,G(U)),new K(G(U.g),U.h);if(H.g.length>30){if(X(H)||X(U))throw Error("slowDivide_ only works with positive integers.");for(var V=N,tt=U;tt.l(H)<=0;)V=wt(V),tt=wt(tt);var W=Rt(V,1),Z=Rt(tt,1);for(tt=Rt(tt,2),V=Rt(V,2);!z(tt);){var Y=Z.add(tt);Y.l(H)<=0&&(W=W.add(V),Z=Y),tt=Rt(tt,1),V=Rt(V,1)}return U=it(H,W.j(U)),new K(W,U)}for(W=S;H.l(U)>=0;){for(V=Math.max(1,Math.floor(H.m()/U.m())),tt=Math.ceil(Math.log(V)/Math.LN2),tt=tt<=48?1:Math.pow(2,tt-48),Z=y(V),Y=Z.j(U);X(Y)||Y.l(H)>0;)V-=tt,Z=y(V),Y=Z.j(U);z(Z)&&(Z=N),W=W.add(Z),H=it(H,Y)}return new K(W,H)}e.B=function(H){return At(this,H).h},e.and=function(H){const U=Math.max(this.g.length,H.g.length),V=[];for(let tt=0;tt<U;tt++)V[tt]=this.i(tt)&H.i(tt);return new g(V,this.h&H.h)},e.or=function(H){const U=Math.max(this.g.length,H.g.length),V=[];for(let tt=0;tt<U;tt++)V[tt]=this.i(tt)|H.i(tt);return new g(V,this.h|H.h)},e.xor=function(H){const U=Math.max(this.g.length,H.g.length),V=[];for(let tt=0;tt<U;tt++)V[tt]=this.i(tt)^H.i(tt);return new g(V,this.h^H.h)};function wt(H){const U=H.g.length+1,V=[];for(let tt=0;tt<U;tt++)V[tt]=H.i(tt)<<1|H.i(tt-1)>>>31;return new g(V,H.h)}function Rt(H,U){const V=U>>5;U%=32;const tt=H.g.length-V,W=[];for(let Z=0;Z<tt;Z++)W[Z]=U>0?H.i(Z+V)>>>U|H.i(Z+V+1)<<32-U:H.i(Z+V);return new g(W,H.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bv=r,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.B,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=y,g.fromString=T,Io=g}).apply(typeof vx<"u"?vx:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sv,Fu,Iv,sd,um,Rv,Nv,Dv;(function(){var e,t=Object.defineProperty;function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var I=0;I<A.length;++I){var D=A[I];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function l(A,I){if(I)t:{var D=r;A=A.split(".");for(var F=0;F<A.length-1;F++){var ot=A[F];if(!(ot in D))break t;D=D[ot]}A=A[A.length-1],F=D[A],I=I(F),I!=F&&I!=null&&t(D,A,{configurable:!0,writable:!0,value:I})}}l("Symbol.dispose",function(A){return A||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(A){return A||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(A){return A||function(I){var D=[],F;for(F in I)Object.prototype.hasOwnProperty.call(I,F)&&D.push([F,I[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},g=this||self;function w(A){var I=typeof A;return I=="object"&&A!=null||I=="function"}function E(A,I,D){return A.call.apply(A.bind,arguments)}function y(A,I,D){return y=E,y.apply(null,arguments)}function T(A,I){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),A.apply(this,F)}}function S(A,I){function D(){}D.prototype=I.prototype,A.Z=I.prototype,A.prototype=new D,A.prototype.constructor=A,A.Ob=function(F,ot,Et){for(var Pt=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)Pt[ae-2]=arguments[ae];return I.prototype[ot].apply(F,Pt)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?A=>A&&AsyncContext.Snapshot.wrap(A):A=>A;function k(A){const I=A.length;if(I>0){const D=Array(I);for(let F=0;F<I;F++)D[F]=A[F];return D}return[]}function z(A,I){for(let F=1;F<arguments.length;F++){const ot=arguments[F];var D=typeof ot;if(D=D!="object"?D:ot?Array.isArray(ot)?"array":D:"null",D=="array"||D=="object"&&typeof ot.length=="number"){D=A.length||0;const Et=ot.length||0;A.length=D+Et;for(let Pt=0;Pt<Et;Pt++)A[D+Pt]=ot[Pt]}else A.push(ot)}}class X{constructor(I,D){this.i=I,this.j=D,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function G(A){g.setTimeout(()=>{throw A},0)}function it(){var A=H;let I=null;return A.g&&(I=A.g,A.g=A.g.next,A.g||(A.h=null),I.next=null),I}class nt{constructor(){this.h=this.g=null}add(I,D){const F=K.get();F.set(I,D),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new X(()=>new At,A=>A.reset());class At{constructor(){this.next=this.g=this.h=null}set(I,D){this.h=I,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let wt,Rt=!1,H=new nt,U=()=>{const A=Promise.resolve(void 0);wt=()=>{A.then(V)}};function V(){for(var A;A=it();){try{A.h.call(A.g)}catch(D){G(D)}var I=K;I.j(A),I.h<100&&(I.h++,A.next=I.g,I.g=A)}Rt=!1}function tt(){this.u=this.u,this.C=this.C}tt.prototype.u=!1,tt.prototype.dispose=function(){this.u||(this.u=!0,this.N())},tt.prototype[Symbol.dispose]=function(){this.dispose()},tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(A,I){this.type=A,this.g=this.target=I,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var A=!1,I=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const D=()=>{};g.addEventListener("test",D,I),g.removeEventListener("test",D,I)}catch{}return A})();function Y(A){return/^[\s\xa0]*$/.test(A)}function Jt(A,I){W.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A&&this.init(A,I)}S(Jt,W),Jt.prototype.init=function(A,I){const D=this.type=A.type,F=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;this.target=A.target||A.srcElement,this.g=I,I=A.relatedTarget,I||(D=="mouseover"?I=A.fromElement:D=="mouseout"&&(I=A.toElement)),this.relatedTarget=I,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=A.pointerType,this.state=A.state,this.i=A,A.defaultPrevented&&Jt.Z.h.call(this)},Jt.prototype.h=function(){Jt.Z.h.call(this);const A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var ht="closure_listenable_"+(Math.random()*1e6|0),yt=0;function xt(A,I,D,F,ot){this.listener=A,this.proxy=null,this.src=I,this.type=D,this.capture=!!F,this.ha=ot,this.key=++yt,this.da=this.fa=!1}function Ft(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function $t(A,I,D){for(const F in A)I.call(D,A[F],F,A)}function J(A,I){for(const D in A)I.call(void 0,A[D],D,A)}function bt(A){const I={};for(const D in A)I[D]=A[D];return I}const Bt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vt(A,I){let D,F;for(let ot=1;ot<arguments.length;ot++){F=arguments[ot];for(D in F)A[D]=F[D];for(let Et=0;Et<Bt.length;Et++)D=Bt[Et],Object.prototype.hasOwnProperty.call(F,D)&&(A[D]=F[D])}}function zt(A){this.src=A,this.g={},this.h=0}zt.prototype.add=function(A,I,D,F,ot){const Et=A.toString();A=this.g[Et],A||(A=this.g[Et]=[],this.h++);const Pt=Ot(A,I,F,ot);return Pt>-1?(I=A[Pt],D||(I.fa=!1)):(I=new xt(I,this.src,Et,!!F,ot),I.fa=D,A.push(I)),I};function Ee(A,I){const D=I.type;if(D in A.g){var F=A.g[D],ot=Array.prototype.indexOf.call(F,I,void 0),Et;(Et=ot>=0)&&Array.prototype.splice.call(F,ot,1),Et&&(Ft(I),A.g[D].length==0&&(delete A.g[D],A.h--))}}function Ot(A,I,D,F){for(let ot=0;ot<A.length;++ot){const Et=A[ot];if(!Et.da&&Et.listener==I&&Et.capture==!!D&&Et.ha==F)return ot}return-1}var qn="closure_lm_"+(Math.random()*1e6|0),ce={};function vi(A,I,D,F,ot){if(Array.isArray(I)){for(let Et=0;Et<I.length;Et++)vi(A,I[Et],D,F,ot);return null}return D=qe(D),A&&A[ht]?A.J(I,D,w(F)?!!F.capture:!1,ot):os(A,I,D,!1,F,ot)}function os(A,I,D,F,ot,Et){if(!I)throw Error("Invalid event type");const Pt=w(ot)?!!ot.capture:!!ot;let ae=cs(A);if(ae||(A[qn]=ae=new zt(A)),D=ae.add(I,D,F,Pt,Et),D.proxy)return D;if(F=Xn(),D.proxy=F,F.src=A,F.listener=D,A.addEventListener)Z||(ot=Pt),ot===void 0&&(ot=!1),A.addEventListener(I.toString(),F,ot);else if(A.attachEvent)A.attachEvent(Er(I.toString()),F);else if(A.addListener&&A.removeListener)A.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Xn(){function A(D){return I.call(A.src,A.listener,D)}const I=sr;return A}function ls(A,I,D,F,ot){if(Array.isArray(I))for(var Et=0;Et<I.length;Et++)ls(A,I[Et],D,F,ot);else F=w(F)?!!F.capture:!!F,D=qe(D),A&&A[ht]?(A=A.i,Et=String(I).toString(),Et in A.g&&(I=A.g[Et],D=Ot(I,D,F,ot),D>-1&&(Ft(I[D]),Array.prototype.splice.call(I,D,1),I.length==0&&(delete A.g[Et],A.h--)))):A&&(A=cs(A))&&(I=A.g[I.toString()],A=-1,I&&(A=Ot(I,D,F,ot)),(D=A>-1?I[A]:null)&&we(D))}function we(A){if(typeof A!="number"&&A&&!A.da){var I=A.src;if(I&&I[ht])Ee(I.i,A);else{var D=A.type,F=A.proxy;I.removeEventListener?I.removeEventListener(D,F,A.capture):I.detachEvent?I.detachEvent(Er(D),F):I.addListener&&I.removeListener&&I.removeListener(F),(D=cs(I))?(Ee(D,A),D.h==0&&(D.src=null,I[qn]=null)):Ft(A)}}}function Er(A){return A in ce?ce[A]:ce[A]="on"+A}function sr(A,I){if(A.da)A=!0;else{I=new Jt(I,this);const D=A.listener,F=A.ha||A.src;A.fa&&we(A),A=D.call(F,I)}return A}function cs(A){return A=A[qn],A instanceof zt?A:null}var Fe="__closure_events_fn_"+(Math.random()*1e9>>>0);function qe(A){return typeof A=="function"?A:(A[Fe]||(A[Fe]=function(I){return A.handleEvent(I)}),A[Fe])}function Zt(){tt.call(this),this.i=new zt(this),this.M=this,this.G=null}S(Zt,tt),Zt.prototype[ht]=!0,Zt.prototype.removeEventListener=function(A,I,D,F){ls(this,A,I,D,F)};function Sn(A,I){var D,F=A.G;if(F)for(D=[];F;F=F.G)D.push(F);if(A=A.M,F=I.type||I,typeof I=="string")I=new W(I,A);else if(I instanceof W)I.target=I.target||A;else{var ot=I;I=new W(F,A),Vt(I,ot)}ot=!0;let Et,Pt;if(D)for(Pt=D.length-1;Pt>=0;Pt--)Et=I.g=D[Pt],ot=Ht(Et,F,!0,I)&&ot;if(Et=I.g=A,ot=Ht(Et,F,!0,I)&&ot,ot=Ht(Et,F,!1,I)&&ot,D)for(Pt=0;Pt<D.length;Pt++)Et=I.g=D[Pt],ot=Ht(Et,F,!1,I)&&ot}Zt.prototype.N=function(){if(Zt.Z.N.call(this),this.i){var A=this.i;for(const I in A.g){const D=A.g[I];for(let F=0;F<D.length;F++)Ft(D[F]);delete A.g[I],A.h--}}this.G=null},Zt.prototype.J=function(A,I,D,F){return this.i.add(String(A),I,!1,D,F)},Zt.prototype.K=function(A,I,D,F){return this.i.add(String(A),I,!0,D,F)};function Ht(A,I,D,F){if(I=A.i.g[String(I)],!I)return!0;I=I.concat();let ot=!0;for(let Et=0;Et<I.length;++Et){const Pt=I[Et];if(Pt&&!Pt.da&&Pt.capture==D){const ae=Pt.listener,an=Pt.ha||Pt.src;Pt.fa&&Ee(A.i,Pt),ot=ae.call(an,F)!==!1&&ot}}return ot&&!F.defaultPrevented}function Ga(A,I){if(typeof A!="function")if(A&&typeof A.handleEvent=="function")A=y(A.handleEvent,A);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:g.setTimeout(A,I||0)}function qa(A){A.g=Ga(()=>{A.g=null,A.i&&(A.i=!1,qa(A))},A.l);const I=A.h;A.h=null,A.m.apply(null,I)}class Ar extends tt{constructor(I,D){super(),this.m=I,this.l=D,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:qa(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(A){tt.call(this),this.h=A,this.g={}}S(us,tt);var ti=[];function oi(A){$t(A.g,function(I,D){this.g.hasOwnProperty(D)&&we(I)},A),A.g={}}us.prototype.N=function(){us.Z.N.call(this),oi(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=g.JSON.stringify,Xe=g.JSON.parse,Bl=class{stringify(A){return g.JSON.stringify(A,void 0)}parse(A){return g.JSON.parse(A,void 0)}};function ra(){}function Vl(){}var Ye={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){W.call(this,"d")}S(kt,W);function Ke(){W.call(this,"c")}S(Ke,W);var Ae={},We=null;function Hr(){return We=We||new Zt}Ae.Ia="serverreachability";function sa(A){W.call(this,Ae.Ia,A)}S(sa,W);function hs(A){const I=Hr();Sn(I,new sa(I))}Ae.STAT_EVENT="statevent";function Te(A,I){W.call(this,Ae.STAT_EVENT,A),this.stat=I}S(Te,W);function $e(A){const I=Hr();Sn(I,new Te(I,A))}Ae.Ja="timingevent";function qo(A,I){W.call(this,Ae.Ja,A),this.size=I}S(qo,W);function fs(A,I){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){A()},I)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function aa(A,I,D,F,ot,Et){A.info(function(){if(A.g)if(Et){var Pt="",ae=Et.split("&");for(let Ue=0;Ue<ae.length;Ue++){var an=ae[Ue].split("=");if(an.length>1){const vn=an[0];an=an[1];const Fi=vn.split("_");Pt=Fi.length>=2&&Fi[1]=="type"?Pt+(vn+"="+an+"&"):Pt+(vn+"=redacted&")}}}else Pt=null;else Pt=Et;return"XMLHTTP REQ ("+F+") [attempt "+ot+"]: "+I+`
`+D+`
`+Pt})}function kn(A,I,D,F,ot,Et,Pt){A.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ot+"]: "+I+`
`+D+`
`+Et+" "+Pt})}function ki(A,I,D,F){A.info(function(){return"XMLHTTP TEXT ("+I+"): "+Kn(A,D)+(F?" "+F:"")})}function Xa(A,I){A.info(function(){return"TIMEOUT: "+I})}ei.prototype.info=function(){};function Kn(A,I){if(!A.g)return I;if(!I)return null;try{const Et=JSON.parse(I);if(Et){for(A=0;A<Et.length;A++)if(Array.isArray(Et[A])){var D=Et[A];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ot=F[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(let Pt=1;Pt<F.length;Pt++)F[Pt]=""}}}}return Yn(Et)}catch{return I}}var In={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xr;function Bn(){}S(Bn,ra),Bn.prototype.g=function(){return new XMLHttpRequest},xr=new Bn;function Zi(A){return encodeURIComponent(String(A))}function Bi(A){var I=1;A=A.split(":");const D=[];for(;I>0&&A.length;)D.push(A.shift()),I--;return A.length&&D.push(A.join(":")),D}function Ut(A,I,D,F){this.j=A,this.i=I,this.l=D,this.S=F||1,this.V=new us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ji}function Ji(){this.i=null,this.g="",this.h=!1}var bs={},pn={};function Ci(A,I,D){A.M=1,A.A=pi(un(I)),A.u=D,A.R=!0,wr(A,null)}function wr(A,I){A.F=Date.now(),oa(A),A.B=un(A.A);var D=A.B,F=A.S;Array.isArray(F)||(F=[String(F)]),sn(D.i,"t",F),A.C=0,D=A.j.L,A.h=new Ji,A.g=Os(A.j,D?I:null,!A.u),A.P>0&&(A.O=new Ar(y(A.Y,A,A.g),A.P)),I=A.V,D=A.g,F=A.ba;var ot="readystatechange";Array.isArray(ot)||(ot&&(ti[0]=ot.toString()),ot=ti);for(let Et=0;Et<ot.length;Et++){const Pt=vi(D,ot[Et],F||I.handleEvent,!1,I.h||I);if(!Pt)break;I.g[Pt.key]=Pt}I=A.J?bt(A.J):{},A.u?(A.v||(A.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.B,A.v,A.u,I)):(A.v="GET",A.g.ea(A.B,A.v,null,I)),hs(),aa(A.i,A.v,A.B,A.l,A.S,A.u)}Ut.prototype.ba=function(A){A=A.target;const I=this.O;I&&li(A)==3?I.j():this.Y(A)},Ut.prototype.Y=function(A){try{if(A==this.g)t:{const ae=li(this.g),an=this.g.ya(),Ue=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||Sr(this.g)))){this.K||ae!=4||an==7||(an==8||Ue<=0?hs(3):hs(2)),fn(this);var I=this.g.ca();this.X=I;var D=_r(this);if(this.o=I==200,kn(this.i,this.v,this.B,this.l,this.S,ae,I),this.o){if(this.U&&!this.L){e:{if(this.g){var F,ot=this.g;if((F=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(F)){var Et=F;break e}}Et=null}if(A=Et)ki(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,A);else{this.o=!1,this.m=3,$e(12),Tr(this),He(this);break t}}if(this.R){A=!0;let vn;for(;!this.K&&this.C<D.length;)if(vn=Ul(this,D),vn==pn){ae==4&&(this.m=4,$e(14),A=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==bs){this.m=4,$e(15),ki(this.i,this.l,D,"[Invalid Chunk]"),A=!1;break}else ki(this.i,this.l,vn,null),$i(this,vn);if(ze(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||D.length!=0||this.h.h||(this.m=1,$e(16),A=!1),this.o=this.o&&A,!A)ki(this.i,this.l,D,"[Invalid Chunked Response]"),Tr(this),He(this);else if(D.length>0&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.aa&&!Pt.P&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),mt(Pt),Pt.P=!0,$e(11))}}else ki(this.i,this.l,D,null),$i(this,D);ae==4&&Tr(this),this.o&&!this.K&&(ae==4?Ds(this.j,this):(this.o=!1,oa(this)))}else Ir(this.g),I==400&&D.indexOf("Unknown SID")>0?(this.m=3,$e(12)):(this.m=0,$e(13)),Tr(this),He(this)}}}catch{}finally{}};function _r(A){if(!ze(A))return A.g.la();const I=Sr(A.g);if(I==="")return"";let D="";const F=I.length,ot=li(A.g)==4;if(!A.h.i){if(typeof TextDecoder>"u")return Tr(A),He(A),"";A.h.i=new g.TextDecoder}for(let Et=0;Et<F;Et++)A.h.h=!0,D+=A.h.i.decode(I[Et],{stream:!(ot&&Et==F-1)});return I.length=0,A.h.g+=D,A.C=0,A.h.g}function ze(A){return A.g?A.v=="GET"&&A.M!=2&&A.j.Aa:!1}function Ul(A,I){var D=A.C,F=I.indexOf(`
`,D);return F==-1?pn:(D=Number(I.substring(D,F)),isNaN(D)?bs:(F+=1,F+D>I.length?pn:(I=I.slice(F,F+D),A.C=F+D,I)))}Ut.prototype.cancel=function(){this.K=!0,Tr(this)};function oa(A){A.T=Date.now()+A.H,Wn(A,A.H)}function Wn(A,I){if(A.D!=null)throw Error("WatchDog timer not null");A.D=fs(y(A.aa,A),I)}function fn(A){A.D&&(g.clearTimeout(A.D),A.D=null)}Ut.prototype.aa=function(){this.D=null;const A=Date.now();A-this.T>=0?(Xa(this.i,this.B),this.M!=2&&(hs(),$e(17)),Tr(this),this.m=2,He(this)):Wn(this,this.T-A)};function He(A){A.j.I==0||A.K||Ds(A.j,A)}function Tr(A){fn(A);var I=A.O;I&&typeof I.dispose=="function"&&I.dispose(),A.O=null,oi(A.V),A.g&&(I=A.g,A.g=null,I.abort(),I.dispose())}function $i(A,I){try{var D=A.j;if(D.I!=0&&(D.g==A||ar(D.h,A))){if(!A.L&&ar(D.h,A)&&D.I==3){try{var F=D.Ba.g.parse(I)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ot=F;if(ot[0]==0){t:if(!D.v){if(D.g)if(D.g.F+3e3<A.F)_n(D),Rr(D);else break t;Wo(D),$e(18)}}else D.xa=ot[1],0<D.xa-D.K&&ot[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=fs(y(D.Va,D),6e3));Le(D.h)<=1&&D.ta&&(D.ta=void 0)}else ps(D,11)}else if((A.L||D.g==A)&&_n(D),!Y(I))for(ot=D.Ba.g.parse(I),I=0;I<ot.length;I++){let Ue=ot[I];const vn=Ue[0];if(!(vn<=D.K))if(D.K=vn,Ue=Ue[1],D.I==2)if(Ue[0]=="c"){D.M=Ue[1],D.ba=Ue[2];const Fi=Ue[3];Fi!=null&&(D.ka=Fi,D.j.info("VER="+D.ka));const Xr=Ue[4];Xr!=null&&(D.za=Xr,D.j.info("SVER="+D.za));const Ei=Ue[5];Ei!=null&&typeof Ei=="number"&&Ei>0&&(F=1.5*Ei,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const er=A.g;if(er){const Dr=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var Et=F.h;Et.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(Et.j=Et.l,Et.g=new Set,Et.h&&(Ya(Et,Et.h),Et.h=null))}if(F.G){const ys=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;ys&&(F.wa=ys,ne(F.J,F.G,ys))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-A.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Pt=A;if(F.na=zl(F,F.L?F.ba:null,F.W),Pt.L){xe(F.h,Pt);var ae=Pt,an=F.O;an&&(ae.H=an),ae.D&&(fn(ae),oa(ae)),F.g=Pt}else Nr(F);D.i.length>0&&pa(D)}else Ue[0]!="stop"&&Ue[0]!="close"||ps(D,7);else D.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ps(D,7):Rs(D):Ue[0]!="noop"&&D.l&&D.l.qa(Ue),D.A=0)}}hs(4)}catch{}}var Xo=class{constructor(A,I){this.g=A,this.map=I}};function Ct(A){this.l=A||10,g.PerformanceNavigationTiming?(A=g.performance.getEntriesByType("navigation"),A=A.length>0&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function la(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function Le(A){return A.h?1:A.g?A.g.size:0}function ar(A,I){return A.h?A.h==I:A.g?A.g.has(I):!1}function Ya(A,I){A.g?A.g.add(I):A.h=I}function xe(A,I){A.h&&A.h==I?A.h=null:A.g&&A.g.has(I)&&A.g.delete(I)}Ct.prototype.cancel=function(){if(this.i=ve(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function ve(A){if(A.h!=null)return A.i.concat(A.h.G);if(A.g!=null&&A.g.size!==0){let I=A.i;for(const D of A.g.values())I=I.concat(D.G);return I}return k(A.i)}var pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yo(A,I){if(A){A=A.split("&");for(let D=0;D<A.length;D++){const F=A[D].indexOf("=");let ot,Et=null;F>=0?(ot=A[D].substring(0,F),Et=A[D].substring(F+1)):ot=A[D],I(ot,Et?decodeURIComponent(Et.replace(/\+/g," ")):"")}}}function tr(A){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;A instanceof tr?(this.l=A.l,rn(this,A.j),this.o=A.o,this.g=A.g,Vi(this,A.u),this.h=A.h,Ss(this,Ko(A.i)),this.m=A.m):A&&(I=String(A).match(pe))?(this.l=!1,rn(this,I[1]||"",!0),this.o=ca(I[2]||""),this.g=ca(I[3]||"",!0),Vi(this,I[4]),this.h=ca(I[5]||"",!0),Ss(this,I[6]||"",!0),this.m=ca(I[7]||"")):(this.l=!1,this.i=new En(null,this.l))}tr.prototype.toString=function(){const A=[];var I=this.j;I&&A.push(yn(I,Vn,!0),":");var D=this.g;return(D||I=="file")&&(A.push("//"),(I=this.o)&&A.push(yn(I,Vn,!0),"@"),A.push(Zi(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&A.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&A.push("/"),A.push(yn(D,D.charAt(0)=="/"?j:ct,!0))),(D=this.i.toString())&&A.push("?",D),(D=this.m)&&A.push("#",yn(D,Rn)),A.join("")},tr.prototype.resolve=function(A){const I=un(this);let D=!!A.j;D?rn(I,A.j):D=!!A.o,D?I.o=A.o:D=!!A.g,D?I.g=A.g:D=A.u!=null;var F=A.h;if(D)Vi(I,A.u);else if(D=!!A.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ot=I.h.lastIndexOf("/");ot!=-1&&(F=I.h.slice(0,ot+1)+F)}if(ot=F,ot==".."||ot==".")F="";else if(ot.indexOf("./")!=-1||ot.indexOf("/.")!=-1){F=ot.lastIndexOf("/",0)==0,ot=ot.split("/");const Et=[];for(let Pt=0;Pt<ot.length;){const ae=ot[Pt++];ae=="."?F&&Pt==ot.length&&Et.push(""):ae==".."?((Et.length>1||Et.length==1&&Et[0]!="")&&Et.pop(),F&&Pt==ot.length&&Et.push("")):(Et.push(ae),F=!0)}F=Et.join("/")}else F=ot}return D?I.h=F:D=A.i.toString()!=="",D?Ss(I,Ko(A.i)):D=!!A.m,D&&(I.m=A.m),I};function un(A){return new tr(A)}function rn(A,I,D){A.j=D?ca(I,!0):I,A.j&&(A.j=A.j.replace(/:$/,""))}function Vi(A,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);A.u=I}else A.u=null}function Ss(A,I,D){I instanceof En?(A.i=I,ha(A.i,A.l)):(D||(I=yn(I,Xt)),A.i=new En(I,A.l))}function ne(A,I,D){A.i.set(I,D)}function pi(A){return ne(A,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),A}function ca(A,I){return A?I?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function yn(A,I,D){return typeof A=="string"?(A=encodeURI(A).replace(I,je),D&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function je(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var Vn=/[#\/\?@]/g,ct=/[#\?:]/g,j=/[#\?]/g,Xt=/[#\?@]/g,Rn=/#/g;function En(A,I){this.h=this.g=null,this.i=A||null,this.j=!!I}function ds(A){A.g||(A.g=new Map,A.h=0,A.i&&Yo(A.i,function(I,D){A.add(decodeURIComponent(I.replace(/\+/g," ")),D)}))}e=En.prototype,e.add=function(A,I){ds(this),this.i=null,A=vr(this,A);let D=this.g.get(A);return D||this.g.set(A,D=[]),D.push(I),this.h+=1,this};function ua(A,I){ds(A),I=vr(A,I),A.g.has(I)&&(A.i=null,A.h-=A.g.get(I).length,A.g.delete(I))}function yi(A,I){return ds(A),I=vr(A,I),A.g.has(I)}e.forEach=function(A,I){ds(this),this.g.forEach(function(D,F){D.forEach(function(ot){A.call(I,ot,F,this)},this)},this)};function Yt(A,I){ds(A);let D=[];if(typeof I=="string")yi(A,I)&&(D=D.concat(A.g.get(vr(A,I))));else for(A=Array.from(A.g.values()),I=0;I<A.length;I++)D=D.concat(A[I]);return D}e.set=function(A,I){return ds(this),this.i=null,A=vr(this,A),yi(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[I]),this.h+=1,this},e.get=function(A,I){return A?(A=Yt(this,A),A.length>0?String(A[0]):I):I};function sn(A,I,D){ua(A,I),D.length>0&&(A.i=null,A.g.set(vr(A,I),k(D)),A.h+=D.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],I=Array.from(this.g.keys());for(let F=0;F<I.length;F++){var D=I[F];const ot=Zi(D);D=Yt(this,D);for(let Et=0;Et<D.length;Et++){let Pt=ot;D[Et]!==""&&(Pt+="="+Zi(D[Et])),A.push(Pt)}}return this.i=A.join("&")};function Ko(A){const I=new En;return I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),I}function vr(A,I){return I=String(I),A.j&&(I=I.toLowerCase()),I}function ha(A,I){I&&!A.j&&(ds(A),A.i=null,A.g.forEach(function(D,F){const ot=F.toLowerCase();F!=ot&&(ua(this,F),sn(this,ot,D))},A)),A.j=I}function Is(A,I){const D=new ei;if(g.Image){const F=new Image;F.onload=T(bi,D,"TestLoadImage: loaded",!0,I,F),F.onerror=T(bi,D,"TestLoadImage: error",!1,I,F),F.onabort=T(bi,D,"TestLoadImage: abort",!1,I,F),F.ontimeout=T(bi,D,"TestLoadImage: timeout",!1,I,F),g.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=A}else I(!1)}function jr(A,I){const D=new ei,F=new AbortController,ot=setTimeout(()=>{F.abort(),bi(D,"TestPingServer: timeout",!1,I)},1e4);fetch(A,{signal:F.signal}).then(Et=>{clearTimeout(ot),Et.ok?bi(D,"TestPingServer: ok",!0,I):bi(D,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ot),bi(D,"TestPingServer: error",!1,I)})}function bi(A,I,D,F,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),F(D)}catch{}}function Nn(){this.g=new Bl}function Cr(A){this.i=A.Sb||null,this.h=A.ab||!1}S(Cr,ra),Cr.prototype.g=function(){return new Ui(this.i,this.h)};function Ui(A,I){Zt.call(this),this.H=A,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Ui,Zt),e=Ui.prototype,e.open=function(A,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=A,this.D=I,this.readyState=1,ie(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};A&&(I.body=A),(this.H||g).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},e.Pa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,ie(this)),this.g&&(this.readyState=3,ie(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kt(this)}else A.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kt(A){A.j.read().then(A.Ma.bind(A)).catch(A.ga.bind(A))}e.Ma=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var I=A.value?A.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!A.done}))&&(this.response=this.responseText+=I)}A.done?Si(this):ie(this),this.readyState==3&&Kt(this)}},e.Oa=function(A){this.g&&(this.response=this.responseText=A,Si(this))},e.Na=function(A){this.g&&(this.response=A,Si(this))},e.ga=function(){this.g&&Si(this)};function Si(A){A.readyState=4,A.l=null,A.j=null,A.B=null,ie(A)}e.setRequestHeader=function(A,I){this.A.append(A,I)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],I=this.h.entries();for(var D=I.next();!D.done;)D=D.value,A.push(D[0]+": "+D[1]),D=I.next();return A.join(`\r
`)};function ie(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function dn(A){let I="";return $t(A,function(D,F){I+=F,I+=":",I+=D,I+=`\r
`}),I}function or(A,I,D){t:{for(F in D){var F=!1;break t}F=!0}F||(D=dn(D),typeof A=="string"?D!=null&&Zi(D):ne(A,I,D))}function Ze(A){Zt.call(this),this.headers=new Map,this.L=A||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Ze,Zt);var fa=/^https?$/i,Gr=["POST","PUT"];e=Ze.prototype,e.Fa=function(A){this.H=A},e.ea=function(A,I,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);I=I?I.toUpperCase():"GET",this.D=A,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xr.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(I,String(A),!0),this.B=!1}catch(Et){da(this,Et);return}if(A=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ot in F)D.set(ot,F[ot]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Et of F.keys())D.set(Et,F.get(Et));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(Et=>Et.toLowerCase()=="content-type"),ot=g.FormData&&A instanceof g.FormData,!(Array.prototype.indexOf.call(Gr,I,void 0)>=0)||F||ot||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Et,Pt]of D)this.g.setRequestHeader(Et,Pt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(A),this.v=!1}catch(Et){da(this,Et)}};function da(A,I){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=I,A.o=5,br(A),An(A)}function br(A){A.A||(A.A=!0,Sn(A,"complete"),Sn(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=A||7,Sn(this,"complete"),Sn(this,"abort"),An(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),An(this,!0)),Ze.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?gs(this):this.Xa())},e.Xa=function(){gs(this)};function gs(A){if(A.h&&typeof h<"u"){if(A.v&&li(A)==4)setTimeout(A.Ca.bind(A),0);else if(Sn(A,"readystatechange"),li(A)==4){A.h=!1;try{const Et=A.ca();t:switch(Et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break t;default:I=!1}var D;if(!(D=I)){var F;if(F=Et===0){let Pt=String(A.D).match(pe)[1]||null;!Pt&&g.self&&g.self.location&&(Pt=g.self.location.protocol.slice(0,-1)),F=!fa.test(Pt?Pt.toLowerCase():"")}D=F}if(D)Sn(A,"complete"),Sn(A,"success");else{A.o=6;try{var ot=li(A)>2?A.g.statusText:""}catch{ot=""}A.l=ot+" ["+A.ca()+"]",br(A)}}finally{An(A)}}}}function An(A,I){if(A.g){A.m&&(clearTimeout(A.m),A.m=null);const D=A.g;A.g=null,I||Sn(A,"ready");try{D.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function li(A){return A.g?A.g.readyState:0}e.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(A){if(this.g){var I=this.g.responseText;return A&&I.indexOf(A)==0&&(I=I.substring(A.length)),Xe(I)}};function Sr(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.F){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function Ir(A){const I={};A=(A.g&&li(A)>=2&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<A.length;F++){if(Y(A[F]))continue;var D=Bi(A[F]);const ot=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Et=I[ot]||[];I[ot]=Et,Et.push(D)}J(I,function(F){return F.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(A,I,D){return D&&D.internalChannelParams&&D.internalChannelParams[A]||I}function ga(A){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Un("failFast",!1,A),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Un("baseRetryDelayMs",5e3,A),this.Za=Un("retryDelaySeedMs",1e4,A),this.Ta=Un("forwardChannelMaxRetries",2,A),this.va=Un("forwardChannelRequestTimeoutMs",2e4,A),this.ma=A&&A.xmlHttpFactory||void 0,this.Ua=A&&A.Rb||void 0,this.Aa=A&&A.useFetchStreams||!1,this.O=void 0,this.L=A&&A.supportsCrossDomainXhr||!1,this.M="",this.h=new Ct(A&&A.concurrentRequestLimit),this.Ba=new Nn,this.S=A&&A.fastHandshake||!1,this.R=A&&A.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=A&&A.Pb||!1,A&&A.ua&&this.j.ua(),A&&A.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&A&&A.detectBufferingProxy||!1,this.ia=void 0,A&&A.longPollingTimeout&&A.longPollingTimeout>0&&(this.ia=A.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=ga.prototype,e.ka=8,e.I=1,e.connect=function(A,I,D,F){$e(0),this.W=A,this.H=I||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=zl(this,null,this.W),pa(this)};function Rs(A){if(ma(A),A.I==3){var I=A.V++,D=un(A.J);if(ne(D,"SID",A.M),ne(D,"RID",I),ne(D,"TYPE","terminate"),Ns(A,D),I=new Ut(A,A.j,I),I.M=2,I.A=pi(un(D)),D=!1,g.navigator&&g.navigator.sendBeacon)try{D=g.navigator.sendBeacon(I.A.toString(),"")}catch{}!D&&g.Image&&(new Image().src=I.A,D=!0),D||(I.g=Os(I.j,null),I.g.ea(I.A)),I.F=Date.now(),oa(I)}Fl(A)}function Rr(A){A.g&&(mt(A),A.g.cancel(),A.g=null)}function ma(A){Rr(A),A.v&&(g.clearTimeout(A.v),A.v=null),_n(A),A.h.cancel(),A.m&&(typeof A.m=="number"&&g.clearTimeout(A.m),A.m=null)}function pa(A){if(!la(A.h)&&!A.m){A.m=!0;var I=A.Ea;wt||U(),Rt||(wt(),Rt=!0),H.add(I,A),A.D=0}}function Qc(A,I){return Le(A.h)>=A.h.j-(A.m?1:0)?!1:A.m?(A.i=I.G.concat(A.i),!0):A.I==1||A.I==2||A.D>=(A.Sa?0:A.Ta)?!1:(A.m=fs(y(A.Ea,A,I),Qo(A,A.D)),A.D++,!0)}e.Ea=function(A){if(this.m)if(this.m=null,this.I==1){if(!A){this.V=Math.floor(Math.random()*1e5),A=this.V++;const ot=new Ut(this,this.j,A);let Et=this.o;if(this.U&&(Et?(Et=bt(Et),Vt(Et,this.U)):Et=this.U),this.u!==null||this.R||(ot.J=Et,Et=null),this.S)t:{for(var I=0,D=0;D<this.i.length;D++){e:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break e}F=void 0}if(F===void 0)break;if(I+=F,I>4096){I=D;break t}if(I===4096||D===this.i.length-1){I=D+1;break t}}I=1e3}else I=1e3;I=ms(this,ot,I),D=un(this.J),ne(D,"RID",A),ne(D,"CVER",22),this.G&&ne(D,"X-HTTP-Session-Id",this.G),Ns(this,D),Et&&(this.R?I="headers="+Zi(dn(Et))+"&"+I:this.u&&or(D,this.u,Et)),Ya(this.h,ot),this.Ra&&ne(D,"TYPE","init"),this.S?(ne(D,"$req",I),ne(D,"SID","null"),ot.U=!0,Ci(ot,D,null)):Ci(ot,D,I),this.I=2}}else this.I==3&&(A?Ve(this,A):this.i.length==0||la(this.h)||Ve(this))};function Ve(A,I){var D;I?D=I.l:D=A.V++;const F=un(A.J);ne(F,"SID",A.M),ne(F,"RID",D),ne(F,"AID",A.K),Ns(A,F),A.u&&A.o&&or(F,A.u,A.o),D=new Ut(A,A.j,D,A.D+1),A.u===null&&(D.J=A.o),I&&(A.i=I.G.concat(A.i)),I=ms(A,D,1e3),D.H=Math.round(A.va*.5)+Math.round(A.va*.5*Math.random()),Ya(A.h,D),Ci(D,F,I)}function Ns(A,I){A.H&&$t(A.H,function(D,F){ne(I,F,D)}),A.l&&$t({},function(D,F){ne(I,F,D)})}function ms(A,I,D){D=Math.min(A.i.length,D);const F=A.l?y(A.l.Ka,A.l,A):null;t:{var ot=A.i;let ae=-1;for(;;){const an=["count="+D];ae==-1?D>0?(ae=ot[0].g,an.push("ofs="+ae)):ae=0:an.push("ofs="+ae);let Ue=!0;for(let vn=0;vn<D;vn++){var Et=ot[vn].g;const Fi=ot[vn].map;if(Et-=ae,Et<0)ae=Math.max(0,ot[vn].g-100),Ue=!1;else try{Et="req"+Et+"_"||"";try{var Pt=Fi instanceof Map?Fi:Object.entries(Fi);for(const[Xr,Ei]of Pt){let er=Ei;w(Ei)&&(er=Yn(Ei)),an.push(Et+Xr+"="+encodeURIComponent(er))}}catch(Xr){throw an.push(Et+"type="+encodeURIComponent("_badmap")),Xr}}catch{F&&F(Fi)}}if(Ue){Pt=an.join("&");break t}}Pt=void 0}return A=A.i.splice(0,D),I.G=A,Pt}function Nr(A){if(!A.g&&!A.v){A.Y=1;var I=A.Da;wt||U(),Rt||(wt(),Rt=!0),H.add(I,A),A.A=0}}function Wo(A){return A.g||A.v||A.A>=3?!1:(A.Y++,A.v=fs(y(A.Da,A),Qo(A,A.A)),A.A++,!0)}e.Da=function(){if(this.v=null,de(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var A=4*this.T;this.j.info("BP detection timer enabled: "+A),this.B=fs(y(this.Wa,this),A)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$e(10),Rr(this),de(this))};function mt(A){A.B!=null&&(g.clearTimeout(A.B),A.B=null)}function de(A){A.g=new Ut(A,A.j,"rpc",A.Y),A.u===null&&(A.g.J=A.o),A.g.P=0;var I=un(A.na);ne(I,"RID","rpc"),ne(I,"SID",A.M),ne(I,"AID",A.K),ne(I,"CI",A.F?"0":"1"),!A.F&&A.ia&&ne(I,"TO",A.ia),ne(I,"TYPE","xmlhttp"),Ns(A,I),A.u&&A.o&&or(I,A.u,A.o),A.O&&(A.g.H=A.O);var D=A.g;A=A.ba,D.M=1,D.A=pi(un(I)),D.u=null,D.R=!0,wr(D,A)}e.Va=function(){this.C!=null&&(this.C=null,Rr(this),Wo(this),$e(19))};function _n(A){A.C!=null&&(g.clearTimeout(A.C),A.C=null)}function Ds(A,I){var D=null;if(A.g==I){_n(A),mt(A),A.g=null;var F=2}else if(ar(A.h,I))D=I.G,xe(A.h,I),F=1;else return;if(A.I!=0){if(I.o)if(F==1){D=I.u?I.u.length:0,I=Date.now()-I.F;var ot=A.D;F=Hr(),Sn(F,new qo(F,D)),pa(A)}else Nr(A);else if(ot=I.m,ot==3||ot==0&&I.X>0||!(F==1&&Qc(A,I)||F==2&&Wo(A)))switch(D&&D.length>0&&(I=A.h,I.i=I.i.concat(D)),ot){case 1:ps(A,5);break;case 4:ps(A,10);break;case 3:ps(A,6);break;default:ps(A,2)}}}function Qo(A,I){let D=A.Qa+Math.floor(Math.random()*A.Za);return A.isActive()||(D*=2),D*I}function ps(A,I){if(A.j.info("Error code "+I),I==2){var D=y(A.bb,A),F=A.Ua;const ot=!F;F=new tr(F||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||rn(F,"https"),pi(F),ot?Is(F.toString(),D):jr(F.toString(),D)}else $e(2);A.I=0,A.l&&A.l.pa(I),Fl(A),ma(A)}e.bb=function(A){A?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function Fl(A){if(A.I=0,A.ja=[],A.l){const I=ve(A.h);(I.length!=0||A.i.length!=0)&&(z(A.ja,I),z(A.ja,A.i),A.h.i.length=0,k(A.i),A.i.length=0),A.l.oa()}}function zl(A,I,D){var F=D instanceof tr?un(D):new tr(D);if(F.g!="")I&&(F.g=I+"."+F.g),Vi(F,F.u);else{var ot=g.location;F=ot.protocol,I=I?I+"."+ot.hostname:ot.hostname,ot=+ot.port;const Et=new tr(null);F&&rn(Et,F),I&&(Et.g=I),ot&&Vi(Et,ot),D&&(Et.h=D),F=Et}return D=A.G,I=A.wa,D&&I&&ne(F,D,I),ne(F,"VER",A.ka),Ns(A,F),F}function Os(A,I,D){if(I&&!A.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=A.Aa&&!A.ma?new Ze(new Cr({ab:D})):new Ze(A.ma),I.Fa(A.L),I}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tn(){}e=Tn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Ms(){}Ms.prototype.g=function(A,I){return new Ce(A,I)};function Ce(A,I){Zt.call(this),this.g=new ga(I),this.l=A,this.h=I&&I.messageUrlParams||null,A=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(A?A["X-WebChannel-Content-Type"]=I.messageContentType:A={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(A?A["X-WebChannel-Client-Profile"]=I.sa:A={"X-WebChannel-Client-Profile":I.sa}),this.g.U=A,(A=I&&I.Qb)&&!Y(A)&&(this.g.u=A),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!Y(I)&&(this.g.G=I,A=this.h,A!==null&&I in A&&(A=this.h,I in A&&delete A[I])),this.j=new Ne(this)}S(Ce,Zt),Ce.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ce.prototype.close=function(){Rs(this.g)},Ce.prototype.o=function(A){var I=this.g;if(typeof A=="string"){var D={};D.__data__=A,A=D}else this.v&&(D={},D.__data__=Yn(A),A=D);I.i.push(new Xo(I.Ya++,A)),I.I==3&&pa(I)},Ce.prototype.N=function(){this.g.l=null,delete this.j,Rs(this.g),delete this.g,Ce.Z.N.call(this)};function Ps(A){kt.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var I=A.__sm__;if(I){t:{for(const D in I){A=D;break t}A=void 0}(this.i=A)&&(A=this.i,I=I!==null&&A in I?I[A]:void 0),this.data=I}else this.data=A}S(Ps,kt);function qr(){Ke.call(this),this.status=1}S(qr,Ke);function Ne(A){this.g=A}S(Ne,Tn),Ne.prototype.ra=function(){Sn(this.g,"a")},Ne.prototype.qa=function(A){Sn(this.g,new Ps(A))},Ne.prototype.pa=function(A){Sn(this.g,new qr)},Ne.prototype.oa=function(){Sn(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Ce.prototype.send=Ce.prototype.o,Ce.prototype.open=Ce.prototype.m,Ce.prototype.close=Ce.prototype.close,Dv=function(){return new Ms},Nv=function(){return Hr()},Rv=Ae,um={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},In.NO_ERROR=0,In.TIMEOUT=8,In.HTTP_ERROR=6,sd=In,mn.COMPLETE="complete",Iv=mn,Vl.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",Zt.prototype.listen=Zt.prototype.J,Fu=Vl,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,Sv=Ze}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const Cx="@firebase/firestore",bx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=new e0("@firebase/firestore");function pc(){return bl.logLevel}function jt(e,...t){if(bl.logLevel<=Oe.DEBUG){const n=t.map(wp);bl.debug(`Firestore (${jc}): ${e}`,...n)}}function Ua(e,...t){if(bl.logLevel<=Oe.ERROR){const n=t.map(wp);bl.error(`Firestore (${jc}): ${e}`,...n)}}function Mc(e,...t){if(bl.logLevel<=Oe.WARN){const n=t.map(wp);bl.warn(`Firestore (${jc}): ${e}`,...n)}}function wp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Ov(e,r,n)}function Ov(e,t,n){let r=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ua(r),new Error(r)}function Je(e,t,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,e||Ov(t,l,r)}function me(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends as{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class tO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Yi.UNAUTHENTICATED)))}shutdown(){}}class eO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class nO{constructor(t){this.t=t,this.currentUser=Yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Je(this.o===void 0,42304);let r=this.i;const l=E=>this.i!==r?(r=this.i,n(E)):Promise.resolve();let h=new Ro;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ro,t.enqueueRetryable((()=>l(this.currentUser)))};const g=()=>{const E=h;t.enqueueRetryable((async()=>{await E.promise,await l(this.currentUser)}))},w=E=>{jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),g())};this.t.onInit((E=>w(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?w(E):(jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ro)}}),0),g()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new Mv(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Je(t===null||typeof t=="string",2055,{h:t}),new Yi(t)}}class iO{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rO{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new iO(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Yi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sO{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Je(this.o===void 0,3512);const r=h=>{h.error!=null&&jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const g=h.token!==this.m;return this.m=h.token,jt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>r(h)))};const l=h=>{jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>l(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=aO(40);for(let h=0;h<l.length;++h)r.length<20&&l[h]<n&&(r+=t.charAt(l[h]%62))}return r}}function Me(e,t){return e<t?-1:e>t?1:0}function hm(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const l=e.charAt(r),h=t.charAt(r);if(l!==h)return Og(l)===Og(h)?Me(l,h):Og(l)?1:-1}return Me(e.length,t.length)}const oO=55296,lO=57343;function Og(e){const t=e.charCodeAt(0);return t>=oO&&t<=lO}function Pc(e,t,n){return e.length===t.length&&e.every(((r,l)=>n(r,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="__name__";class Hs{constructor(t,n,r){n===void 0?n=0:n>t.length&&se(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&se(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Hs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Hs?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let l=0;l<r;l++){const h=Hs.compareSegments(t.get(l),n.get(l));if(h!==0)return h}return Me(t.length,n.length)}static compareSegments(t,n){const r=Hs.isNumericId(t),l=Hs.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Hs.extractNumericId(t).compare(Hs.extractNumericId(n)):hm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Io.fromString(t.substring(4,t.length-2))}}class On extends Hs{construct(t,n,r){return new On(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Wt(Dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new On(n)}static emptyPath(){return new On([])}}const cO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pi extends Hs{construct(t,n,r){return new Pi(t,n,r)}static isValidIdentifier(t){return cO.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ix}static keyField(){return new Pi([Ix])}static fromServerFormat(t){const n=[];let r="",l=0;const h=()=>{if(r.length===0)throw new Wt(Dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let g=!1;for(;l<t.length;){const w=t[l];if(w==="\\"){if(l+1===t.length)throw new Wt(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const E=t[l+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Wt(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=E,l+=2}else w==="`"?(g=!g,l++):w!=="."||g?(r+=w,l++):(h(),l++)}if(h(),g)throw new Wt(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pi(n)}static emptyPath(){return new Pi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.path=t}static fromPath(t){return new te(On.fromString(t))}static fromName(t){return new te(On.fromString(t).popFirst(5))}static empty(){return new te(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&On.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return On.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new te(new On(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(e,t,n){if(!n)throw new Wt(Dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function hO(e,t,n,r){if(t===!0&&r===!0)throw new Wt(Dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Rx(e){if(!te.isDocumentKey(e))throw new Wt(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Pv(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Tp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":se(12329,{type:typeof e})}function Sl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tp(e);throw new Wt(Dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e,t){const n={typeString:e};return t&&(n.value=t),n}function Rh(e,t){if(!Pv(e))throw new Wt(Dt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const l=t[r].typeString,h="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const g=e[r];if(l&&typeof g!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(h!==void 0&&g!==h.value){n=`Expected '${r}' field to equal '${h.value}'`;break}}if(n)throw new Wt(Dt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=-62135596800,Dx=1e6;class wn{static now(){return wn.fromMillis(Date.now())}static fromDate(t){return wn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Dx);return new wn(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Wt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Nx)throw new Wt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dx}_compareTo(t){return this.seconds===t.seconds?Me(this.nanoseconds,t.nanoseconds):Me(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Rh(t,wn._jsonSchema))return new wn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Nx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wn._jsonSchemaVersion="firestore/timestamp/1.0",wn._jsonSchema={type:ai("string",wn._jsonSchemaVersion),seconds:ai("number"),nanoseconds:ai("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(t){return new fe(t)}static min(){return new fe(new wn(0,0))}static max(){return new fe(new wn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=-1;function fO(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,l=fe.fromTimestamp(r===1e9?new wn(n+1,0):new wn(n,r));return new Mo(l,te.empty(),t)}function dO(e){return new Mo(e.readTime,e.key,lh)}class Mo{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Mo(fe.min(),te.empty(),lh)}static max(){return new Mo(fe.max(),te.empty(),lh)}}function gO(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=te.comparator(e.documentKey,t.documentKey),n!==0?n:Me(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(e){if(e.code!==Dt.FAILED_PRECONDITION||e.message!==mO)throw e;jt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new It(((r,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(r,l)},this.catchCallback=h=>{this.wrapFailure(n,h).next(r,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof It?n:It.resolve(n)}catch(n){return It.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):It.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):It.reject(n)}static resolve(t){return new It(((n,r)=>{n(t)}))}static reject(t){return new It(((n,r)=>{r(t)}))}static waitFor(t){return new It(((n,r)=>{let l=0,h=0,g=!1;t.forEach((w=>{++l,w.next((()=>{++h,g&&h===l&&n()}),(E=>r(E)))})),g=!0,h===l&&n()}))}static or(t){let n=It.resolve(!1);for(const r of t)n=n.next((l=>l?It.resolve(l):r()));return n}static forEach(t,n){const r=[];return t.forEach(((l,h)=>{r.push(n.call(this,l,h))})),this.waitFor(r)}static mapArray(t,n){return new It(((r,l)=>{const h=t.length,g=new Array(h);let w=0;for(let E=0;E<h;E++){const y=E;n(t[y]).next((T=>{g[y]=T,++w,w===h&&r(g)}),(T=>l(T)))}}))}static doWhile(t,n){return new It(((r,l)=>{const h=()=>{t()===!0?n().next((()=>{h()}),l):r()};h()}))}}function yO(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qc(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}l0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=-1;function c0(e){return e==null}function Sd(e){return e===0&&1/e==-1/0}function EO(e){return typeof e=="number"&&Number.isInteger(e)&&!Sd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="";function AO(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ox(t)),t=xO(e.get(n),t);return Ox(t)}function xO(e,t){let n=t;const r=e.length;for(let l=0;l<r;l++){const h=e.charAt(l);switch(h){case"\0":n+="";break;case Lv:n+="";break;default:n+=h}}return n}function Ox(e){return e+Lv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ho(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function kv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,n){this.comparator=t,this.root=n||Mi.EMPTY}insert(t,n){return new Ln(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mi.BLACK,null,null))}remove(t){return new Ln(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(t,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gf(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gf(this.root,t,this.comparator,!0)}}class Gf{constructor(t,n,r,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=n?r(t.key,n):1,n&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Mi{constructor(t,n,r,l,h){this.key=t,this.value=n,this.color=r??Mi.RED,this.left=l??Mi.EMPTY,this.right=h??Mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,l,h){return new Mi(t??this.key,n??this.value,r??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let l=this;const h=r(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,n,r),null):h===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Mi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Mi.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw se(27949);return t+(this.isRed()?0:1)}}Mi.EMPTY=null,Mi.RED=!0,Mi.BLACK=!1;Mi.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(t,n,r,l,h){return this}insert(t,n,r){return new Mi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this.comparator=t,this.data=new Ln(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Px(this.data.getIterator())}getIteratorFrom(t){return new Px(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof mi)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=r.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new mi(this.comparator);return n.data=t,n}}class Px{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.fields=t,t.sort(Pi.comparator)}static empty(){return new Fr([])}unionWith(t){let n=new mi(Pi.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Fr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Pc(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Bv("Invalid base64 string: "+h):h}})(t);return new Li(n)}static fromUint8Array(t){const n=(function(l){let h="";for(let g=0;g<l.length;++g)h+=String.fromCharCode(l[g]);return h})(t);return new Li(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Me(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Li.EMPTY_BYTE_STRING=new Li("");const wO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(e){if(Je(!!e,39018),typeof e=="string"){let t=0;const n=wO.exec(e);if(Je(!!n,46558,{timestamp:e}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$n(e.seconds),nanos:$n(e.nanos)}}function $n(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Lo(e){return typeof e=="string"?Li.fromBase64String(e):Li.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="server_timestamp",Uv="__type__",Fv="__previous_value__",zv="__local_write_time__";function Cp(e){return(e?.mapValue?.fields||{})[Uv]?.stringValue===Vv}function u0(e){const t=e.mapValue.fields[Fv];return Cp(t)?u0(t):t}function ch(e){const t=Po(e.mapValue.fields[zv].timestampValue);return new wn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(t,n,r,l,h,g,w,E,y,T){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=E,this.useFetchStreams=y,this.isUsingEmulator=T}}const Id="(default)";class uh{constructor(t,n){this.projectId=t,this.database=n||Id}static empty(){return new uh("","")}get isDefaultDatabase(){return this.database===Id}isEqual(t){return t instanceof uh&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__type__",TO="__max__",qf={mapValue:{}},jv="__vector__",Rd="value";function ko(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cp(e)?4:CO(e)?9007199254740991:vO(e)?10:11:se(28295,{value:e})}function $s(e,t){if(e===t)return!0;const n=ko(e);if(n!==ko(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ch(e).isEqual(ch(t));case 3:return(function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const g=Po(l.timestampValue),w=Po(h.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(l,h){return Lo(l.bytesValue).isEqual(Lo(h.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(l,h){return $n(l.geoPointValue.latitude)===$n(h.geoPointValue.latitude)&&$n(l.geoPointValue.longitude)===$n(h.geoPointValue.longitude)})(e,t);case 2:return(function(l,h){if("integerValue"in l&&"integerValue"in h)return $n(l.integerValue)===$n(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const g=$n(l.doubleValue),w=$n(h.doubleValue);return g===w?Sd(g)===Sd(w):isNaN(g)&&isNaN(w)}return!1})(e,t);case 9:return Pc(e.arrayValue.values||[],t.arrayValue.values||[],$s);case 10:case 11:return(function(l,h){const g=l.mapValue.fields||{},w=h.mapValue.fields||{};if(Mx(g)!==Mx(w))return!1;for(const E in g)if(g.hasOwnProperty(E)&&(w[E]===void 0||!$s(g[E],w[E])))return!1;return!0})(e,t);default:return se(52216,{left:e})}}function hh(e,t){return(e.values||[]).find((n=>$s(n,t)))!==void 0}function Lc(e,t){if(e===t)return 0;const n=ko(e),r=ko(t);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(e.booleanValue,t.booleanValue);case 2:return(function(h,g){const w=$n(h.integerValue||h.doubleValue),E=$n(g.integerValue||g.doubleValue);return w<E?-1:w>E?1:w===E?0:isNaN(w)?isNaN(E)?0:-1:1})(e,t);case 3:return Lx(e.timestampValue,t.timestampValue);case 4:return Lx(ch(e),ch(t));case 5:return hm(e.stringValue,t.stringValue);case 6:return(function(h,g){const w=Lo(h),E=Lo(g);return w.compareTo(E)})(e.bytesValue,t.bytesValue);case 7:return(function(h,g){const w=h.split("/"),E=g.split("/");for(let y=0;y<w.length&&y<E.length;y++){const T=Me(w[y],E[y]);if(T!==0)return T}return Me(w.length,E.length)})(e.referenceValue,t.referenceValue);case 8:return(function(h,g){const w=Me($n(h.latitude),$n(g.latitude));return w!==0?w:Me($n(h.longitude),$n(g.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return kx(e.arrayValue,t.arrayValue);case 10:return(function(h,g){const w=h.fields||{},E=g.fields||{},y=w[Rd]?.arrayValue,T=E[Rd]?.arrayValue,S=Me(y?.values?.length||0,T?.values?.length||0);return S!==0?S:kx(y,T)})(e.mapValue,t.mapValue);case 11:return(function(h,g){if(h===qf.mapValue&&g===qf.mapValue)return 0;if(h===qf.mapValue)return 1;if(g===qf.mapValue)return-1;const w=h.fields||{},E=Object.keys(w),y=g.fields||{},T=Object.keys(y);E.sort(),T.sort();for(let S=0;S<E.length&&S<T.length;++S){const N=hm(E[S],T[S]);if(N!==0)return N;const k=Lc(w[E[S]],y[T[S]]);if(k!==0)return k}return Me(E.length,T.length)})(e.mapValue,t.mapValue);default:throw se(23264,{he:n})}}function Lx(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Me(e,t);const n=Po(e),r=Po(t),l=Me(n.seconds,r.seconds);return l!==0?l:Me(n.nanos,r.nanos)}function kx(e,t){const n=e.values||[],r=t.values||[];for(let l=0;l<n.length&&l<r.length;++l){const h=Lc(n[l],r[l]);if(h)return h}return Me(n.length,r.length)}function kc(e){return fm(e)}function fm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Po(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Lo(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return te.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",l=!0;for(const h of n.values||[])l?l=!1:r+=",",r+=fm(h);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",h=!0;for(const g of r)h?h=!1:l+=",",l+=`${g}:${fm(n.fields[g])}`;return l+"}"})(e.mapValue):se(61005,{value:e})}function ad(e){switch(ko(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=u0(e);return t?16+ad(t):16;case 5:return 2*e.stringValue.length;case 6:return Lo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,h)=>l+ad(h)),0)})(e.arrayValue);case 10:case 11:return(function(r){let l=0;return Ho(r.fields,((h,g)=>{l+=h.length+ad(g)})),l})(e.mapValue);default:throw se(13486,{value:e})}}function dm(e){return!!e&&"integerValue"in e}function bp(e){return!!e&&"arrayValue"in e}function Bx(e){return!!e&&"nullValue"in e}function Vx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function od(e){return!!e&&"mapValue"in e}function vO(e){return(e?.mapValue?.fields||{})[Hv]?.stringValue===jv}function Wu(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ho(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Wu(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Wu(e.arrayValue.values[n]);return t}return{...e}}function CO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===TO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.value=t}static empty(){return new gr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!od(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wu(n)}setAll(t){let n=Pi.emptyPath(),r={},l=[];t.forEach(((g,w)=>{if(!n.isImmediateParentOf(w)){const E=this.getFieldsMap(n);this.applyChanges(E,r,l),r={},l=[],n=w.popLast()}g?r[w.lastSegment()]=Wu(g):l.push(w.lastSegment())}));const h=this.getFieldsMap(n);this.applyChanges(h,r,l)}delete(t){const n=this.field(t.popLast());od(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return $s(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let l=n.mapValue.fields[t.get(r)];od(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,r){Ho(n,((l,h)=>t[l]=h));for(const l of r)delete t[l]}clone(){return new gr(Wu(this.value))}}function Gv(e){const t=[];return Ho(e.fields,((n,r)=>{const l=new Pi([n]);if(od(r)){const h=Gv(r.mapValue).fields;if(h.length===0)t.push(l);else for(const g of h)t.push(l.child(g))}else t.push(l)})),new Fr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n,r,l,h,g,w){this.key=t,this.documentType=n,this.version=r,this.readTime=l,this.createTime=h,this.data=g,this.documentState=w}static newInvalidDocument(t){return new Ki(t,0,fe.min(),fe.min(),fe.min(),gr.empty(),0)}static newFoundDocument(t,n,r,l){return new Ki(t,1,n,fe.min(),r,l,0)}static newNoDocument(t,n){return new Ki(t,2,n,fe.min(),fe.min(),gr.empty(),0)}static newUnknownDocument(t,n){return new Ki(t,3,n,fe.min(),fe.min(),gr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ki&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,n){this.position=t,this.inclusive=n}}function Ux(e,t,n){let r=0;for(let l=0;l<e.position.length;l++){const h=t[l],g=e.position[l];if(h.field.isKeyField()?r=te.comparator(te.fromName(g.referenceValue),n.key):r=Lc(g,n.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fx(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$s(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,n="asc"){this.field=t,this.dir=n}}function bO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{}class di extends qv{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new IO(t,n,r):n==="array-contains"?new DO(t,r):n==="in"?new OO(t,r):n==="not-in"?new MO(t,r):n==="array-contains-any"?new PO(t,r):new di(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new RO(t,r):new NO(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lc(n,this.value)):n!==null&&ko(this.value)===ko(n)&&this.matchesComparison(Lc(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends qv{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ta(t,n)}matches(t){return Xv(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xv(e){return e.op==="and"}function Yv(e){return SO(e)&&Xv(e)}function SO(e){for(const t of e.filters)if(t instanceof ta)return!1;return!0}function gm(e){if(e instanceof di)return e.field.canonicalString()+e.op.toString()+kc(e.value);if(Yv(e))return e.filters.map((t=>gm(t))).join(",");{const t=e.filters.map((n=>gm(n))).join(",");return`${e.op}(${t})`}}function Kv(e,t){return e instanceof di?(function(r,l){return l instanceof di&&r.op===l.op&&r.field.isEqual(l.field)&&$s(r.value,l.value)})(e,t):e instanceof ta?(function(r,l){return l instanceof ta&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((h,g,w)=>h&&Kv(g,l.filters[w])),!0):!1})(e,t):void se(19439)}function Wv(e){return e instanceof di?(function(n){return`${n.field.canonicalString()} ${n.op} ${kc(n.value)}`})(e):e instanceof ta?(function(n){return n.op.toString()+" {"+n.getFilters().map(Wv).join(" ,")+"}"})(e):"Filter"}class IO extends di{constructor(t,n,r){super(t,n,r),this.key=te.fromName(r.referenceValue)}matches(t){const n=te.comparator(t.key,this.key);return this.matchesComparison(n)}}class RO extends di{constructor(t,n){super(t,"in",n),this.keys=Qv("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class NO extends di{constructor(t,n){super(t,"not-in",n),this.keys=Qv("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Qv(e,t){return(t.arrayValue?.values||[]).map((n=>te.fromName(n.referenceValue)))}class DO extends di{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return bp(n)&&hh(n.arrayValue,this.value)}}class OO extends di{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&hh(this.value.arrayValue,n)}}class MO extends di{constructor(t,n){super(t,"not-in",n)}matches(t){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hh(this.value.arrayValue,n)}}class PO extends di{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!bp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(t,n=null,r=[],l=[],h=null,g=null,w=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=h,this.startAt=g,this.endAt=w,this.Te=null}}function zx(e,t=null,n=[],r=[],l=null,h=null,g=null){return new LO(e,t,n,r,l,h,g)}function Sp(e){const t=me(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>gm(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(h){return h.field.canonicalString()+h.dir})(r))).join(","),c0(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>kc(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>kc(r))).join(",")),t.Te=n}return t.Te}function Ip(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Kv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fx(e.startAt,t.startAt)&&Fx(e.endAt,t.endAt)}function mm(e){return te.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(t,n=null,r=[],l=[],h=null,g="F",w=null,E=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=h,this.limitType=g,this.startAt=w,this.endAt=E,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kO(e,t,n,r,l,h,g,w){return new h0(e,t,n,r,l,h,g,w)}function Rp(e){return new h0(e)}function Hx(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function BO(e){return e.collectionGroup!==null}function Qu(e){const t=me(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),n.add(h.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new mi(Pi.comparator);return g.filters.forEach((E=>{E.getFlattenedFilters().forEach((y=>{y.isInequality()&&(w=w.add(y.field))}))})),w})(t).forEach((h=>{n.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new Dd(h,r))})),n.has(Pi.keyField().canonicalString())||t.Ie.push(new Dd(Pi.keyField(),r))}return t.Ie}function Gs(e){const t=me(e);return t.Ee||(t.Ee=VO(t,Qu(e))),t.Ee}function VO(e,t){if(e.limitType==="F")return zx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((l=>{const h=l.dir==="desc"?"asc":"desc";return new Dd(l.field,h)}));const n=e.endAt?new Nd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nd(e.startAt.position,e.startAt.inclusive):null;return zx(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function pm(e,t,n){return new h0(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function f0(e,t){return Ip(Gs(e),Gs(t))&&e.limitType===t.limitType}function Zv(e){return`${Sp(Gs(e))}|lt:${e.limitType}`}function yc(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>Wv(l))).join(", ")}]`),c0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(g){return`${g.field.canonicalString()} (${g.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>kc(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>kc(l))).join(",")),`Target(${r})`})(Gs(e))}; limitType=${e.limitType})`}function d0(e,t){return t.isFoundDocument()&&(function(r,l){const h=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):te.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)})(e,t)&&(function(r,l){for(const h of Qu(r))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0})(e,t)&&(function(r,l){for(const h of r.filters)if(!h.matches(l))return!1;return!0})(e,t)&&(function(r,l){return!(r.startAt&&!(function(g,w,E){const y=Ux(g,w,E);return g.inclusive?y<=0:y<0})(r.startAt,Qu(r),l)||r.endAt&&!(function(g,w,E){const y=Ux(g,w,E);return g.inclusive?y>=0:y>0})(r.endAt,Qu(r),l))})(e,t)}function UO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jv(e){return(t,n)=>{let r=!1;for(const l of Qu(e)){const h=FO(l,t,n);if(h!==0)return h;r=r||l.field.isKeyField()}return 0}}function FO(e,t,n){const r=e.field.isKeyField()?te.comparator(t.key,n.key):(function(h,g,w){const E=g.data.field(h),y=w.data.field(h);return E!==null&&y!==null?Lc(E,y):se(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[l,h]of r)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),l=this.inner[r];if(l===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ho(this.inner,((n,r)=>{for(const[l,h]of r)t(l,h)}))}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Ln(te.comparator);function Fa(){return zO}const $v=new Ln(te.comparator);function zu(...e){let t=$v;for(const n of e)t=t.insert(n.key,n);return t}function tC(e){let t=$v;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function pl(){return Zu()}function eC(){return Zu()}function Zu(){return new Ll((e=>e.toString()),((e,t)=>e.isEqual(t)))}const HO=new Ln(te.comparator),jO=new mi(te.comparator);function Pe(...e){let t=jO;for(const n of e)t=t.add(n);return t}const GO=new mi(Me);function qO(){return GO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(t)?"-0":t}}function nC(e){return{integerValue:""+e}}function XO(e,t){return EO(t)?nC(t):Np(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this._=void 0}}function YO(e,t,n){return e instanceof fh?(function(l,h){const g={fields:{[Uv]:{stringValue:Vv},[zv]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Cp(h)&&(h=u0(h)),h&&(g.fields[Fv]=h),{mapValue:g}})(n,t):e instanceof dh?rC(e,t):e instanceof gh?sC(e,t):(function(l,h){const g=iC(l,h),w=jx(g)+jx(l.Ae);return dm(g)&&dm(l.Ae)?nC(w):Np(l.serializer,w)})(e,t)}function KO(e,t,n){return e instanceof dh?rC(e,t):e instanceof gh?sC(e,t):n}function iC(e,t){return e instanceof Od?(function(r){return dm(r)||(function(h){return!!h&&"doubleValue"in h})(r)})(t)?t:{integerValue:0}:null}class fh extends g0{}class dh extends g0{constructor(t){super(),this.elements=t}}function rC(e,t){const n=aC(t);for(const r of e.elements)n.some((l=>$s(l,r)))||n.push(r);return{arrayValue:{values:n}}}class gh extends g0{constructor(t){super(),this.elements=t}}function sC(e,t){let n=aC(t);for(const r of e.elements)n=n.filter((l=>!$s(l,r)));return{arrayValue:{values:n}}}class Od extends g0{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function jx(e){return $n(e.integerValue||e.doubleValue)}function aC(e){return bp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(t,n){this.field=t,this.transform=n}}function QO(e,t){return e.field.isEqual(t.field)&&(function(r,l){return r instanceof dh&&l instanceof dh||r instanceof gh&&l instanceof gh?Pc(r.elements,l.elements,$s):r instanceof Od&&l instanceof Od?$s(r.Ae,l.Ae):r instanceof fh&&l instanceof fh})(e.transform,t.transform)}class ZO{constructor(t,n){this.version=t,this.transformResults=n}}class qs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qs}static exists(t){return new qs(void 0,t)}static updateTime(t){return new qs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ld(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class m0{}function oC(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new cC(e.key,qs.none()):new Nh(e.key,e.data,qs.none());{const n=e.data,r=gr.empty();let l=new mi(Pi.comparator);for(let h of t.fields)if(!l.has(h)){let g=n.field(h);g===null&&h.length>1&&(h=h.popLast(),g=n.field(h)),g===null?r.delete(h):r.set(h,g),l=l.add(h)}return new jo(e.key,r,new Fr(l.toArray()),qs.none())}}function JO(e,t,n){e instanceof Nh?(function(l,h,g){const w=l.value.clone(),E=qx(l.fieldTransforms,h,g.transformResults);w.setAll(E),h.convertToFoundDocument(g.version,w).setHasCommittedMutations()})(e,t,n):e instanceof jo?(function(l,h,g){if(!ld(l.precondition,h))return void h.convertToUnknownDocument(g.version);const w=qx(l.fieldTransforms,h,g.transformResults),E=h.data;E.setAll(lC(l)),E.setAll(w),h.convertToFoundDocument(g.version,E).setHasCommittedMutations()})(e,t,n):(function(l,h,g){h.convertToNoDocument(g.version).setHasCommittedMutations()})(0,t,n)}function Ju(e,t,n,r){return e instanceof Nh?(function(h,g,w,E){if(!ld(h.precondition,g))return w;const y=h.value.clone(),T=Xx(h.fieldTransforms,E,g);return y.setAll(T),g.convertToFoundDocument(g.version,y).setHasLocalMutations(),null})(e,t,n,r):e instanceof jo?(function(h,g,w,E){if(!ld(h.precondition,g))return w;const y=Xx(h.fieldTransforms,E,g),T=g.data;return T.setAll(lC(h)),T.setAll(y),g.convertToFoundDocument(g.version,T).setHasLocalMutations(),w===null?null:w.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((S=>S.field)))})(e,t,n,r):(function(h,g,w){return ld(h.precondition,g)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w})(e,t,n)}function $O(e,t){let n=null;for(const r of e.fieldTransforms){const l=t.data.field(r.field),h=iC(r.transform,l||null);h!=null&&(n===null&&(n=gr.empty()),n.set(r.field,h))}return n||null}function Gx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Pc(r,l,((h,g)=>QO(h,g)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nh extends m0{constructor(t,n,r,l=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class jo extends m0{constructor(t,n,r,l,h=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function lC(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function qx(e,t,n){const r=new Map;Je(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let l=0;l<n.length;l++){const h=e[l],g=h.transform,w=t.data.field(h.field);r.set(h.field,KO(g,w,n[l]))}return r}function Xx(e,t,n){const r=new Map;for(const l of e){const h=l.transform,g=n.data.field(l.field);r.set(l.field,YO(h,g,t))}return r}class cC extends m0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tM extends m0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(t,n,r,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&JO(h,t,r[l])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ju(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ju(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=eC();return this.mutations.forEach((l=>{const h=t.get(l.key),g=h.overlayedDocument;let w=this.applyToLocalView(g,h.mutatedFields);w=n.has(l.key)?null:w;const E=oC(g,w);E!==null&&r.set(l.key,E),g.isValidDocument()||g.convertToNoDocument(fe.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Pe())}isEqual(t){return this.batchId===t.batchId&&Pc(this.mutations,t.mutations,((n,r)=>Gx(n,r)))&&Pc(this.baseMutations,t.baseMutations,((n,r)=>Gx(n,r)))}}class Dp{constructor(t,n,r,l){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(t,n,r){Je(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let l=(function(){return HO})();const h=t.mutations;for(let g=0;g<h.length;g++)l=l.insert(h[g].key,r[g].version);return new Dp(t,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri,Be;function rM(e){switch(e){case Dt.OK:return se(64938);case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0;default:return se(15467,{code:e})}}function uC(e){if(e===void 0)return Ua("GRPC error has no .code"),Dt.UNKNOWN;switch(e){case ri.OK:return Dt.OK;case ri.CANCELLED:return Dt.CANCELLED;case ri.UNKNOWN:return Dt.UNKNOWN;case ri.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case ri.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case ri.INTERNAL:return Dt.INTERNAL;case ri.UNAVAILABLE:return Dt.UNAVAILABLE;case ri.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case ri.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case ri.NOT_FOUND:return Dt.NOT_FOUND;case ri.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case ri.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case ri.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case ri.ABORTED:return Dt.ABORTED;case ri.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case ri.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case ri.DATA_LOSS:return Dt.DATA_LOSS;default:return se(39323,{code:e})}}(Be=ri||(ri={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new Io([4294967295,4294967295],0);function Yx(e){const t=sM().encode(e),n=new bv;return n.update(t),new Uint8Array(n.digest())}function Kx(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new Io([n,r],0),new Io([l,h],0)]}class Op{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hu(`Invalid padding: ${n}`);if(r<0)throw new Hu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Hu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Hu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Io.fromNumber(this.ge)}ye(t,n,r){let l=t.add(n.multiply(Io.fromNumber(r)));return l.compare(aM)===1&&(l=new Io([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Yx(t),[r,l]=Kx(n);for(let h=0;h<this.hashCount;h++){const g=this.ye(r,l,h);if(!this.we(g))return!1}return!0}static create(t,n,r){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),g=new Op(h,l,n);return r.forEach((w=>g.insert(w))),g}insert(t){if(this.ge===0)return;const n=Yx(t),[r,l]=Kx(n);for(let h=0;h<this.hashCount;h++){const g=this.ye(r,l,h);this.Se(g)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,n,r,l,h){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const l=new Map;return l.set(t,Dh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new p0(fe.min(),l,new Ln(Me),Fa(),Pe())}}class Dh{constructor(t,n,r,l,h){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Dh(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t,n,r,l){this.be=t,this.removedTargetIds=n,this.key=r,this.De=l}}class hC{constructor(t,n){this.targetId=t,this.Ce=n}}class fC{constructor(t,n,r=Li.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Wx{constructor(){this.ve=0,this.Fe=Qx(),this.Me=Li.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pe(),n=Pe(),r=Pe();return this.Fe.forEach(((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:se(38017,{changeType:h})}})),new Dh(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Qx()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oM{constructor(t){this.Ge=t,this.ze=new Map,this.je=Fa(),this.Je=Xf(),this.He=Xf(),this.Ye=new Ln(Me)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:se(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,r=t.Ce.count,l=this.ot(n);if(l){const h=l.target;if(mm(h))if(r===0){const g=new te(h.path);this.et(n,g,Ki.newNoDocument(g,fe.min()))}else Je(r===1,20013,{expectedCount:r});else{const g=this._t(n);if(g!==r){const w=this.ut(t),E=w?this.ct(w,t,g):1;if(E!==0){this.it(n);const y=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:h=0}=n;let g,w;try{g=Lo(r).toUint8Array()}catch(E){if(E instanceof Bv)return Mc("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{w=new Op(g,l,h)}catch(E){return Mc(E instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return w.ge===0?null:w}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((h=>{const g=this.Ge.ht(),w=`projects/${g.projectId}/databases/${g.database}/documents/${h.path.canonicalString()}`;t.mightContain(w)||(this.et(n,h,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((h,g)=>{const w=this.ot(g);if(w){if(h.current&&mm(w.target)){const E=new te(w.target.path);this.It(E).has(g)||this.Et(g,E)||this.et(g,E,Ki.newNoDocument(E,t))}h.Be&&(n.set(g,h.ke()),h.qe())}}));let r=Pe();this.He.forEach(((h,g)=>{let w=!0;g.forEachWhile((E=>{const y=this.ot(E);return!y||y.purpose==="TargetPurposeLimboResolution"||(w=!1,!1)})),w&&(r=r.add(h))})),this.je.forEach(((h,g)=>g.setReadTime(t)));const l=new p0(t,n,this.Ye,this.je,r);return this.je=Fa(),this.Je=Xf(),this.He=Xf(),this.Ye=new Ln(Me),l}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Wx,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new mi(Me),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new mi(Me),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||jt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Wx),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Xf(){return new Ln(te.comparator)}function Qx(){return new Ln(te.comparator)}const lM={asc:"ASCENDING",desc:"DESCENDING"},cM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uM={and:"AND",or:"OR"};class hM{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ym(e,t){return e.useProto3Json||c0(t)?t:{value:t}}function Md(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dC(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fM(e,t){return Md(e,t.toTimestamp())}function Xs(e){return Je(!!e,49232),fe.fromTimestamp((function(n){const r=Po(n);return new wn(r.seconds,r.nanos)})(e))}function Mp(e,t){return Em(e,t).canonicalString()}function Em(e,t){const n=(function(l){return new On(["projects",l.projectId,"databases",l.database])})(e).child("documents");return t===void 0?n:n.child(t)}function gC(e){const t=On.fromString(e);return Je(AC(t),10190,{key:t.toString()}),t}function Am(e,t){return Mp(e.databaseId,t.path)}function Mg(e,t){const n=gC(t);if(n.get(1)!==e.databaseId.projectId)throw new Wt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new te(pC(n))}function mC(e,t){return Mp(e.databaseId,t)}function dM(e){const t=gC(e);return t.length===4?On.emptyPath():pC(t)}function xm(e){return new On(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pC(e){return Je(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Zx(e,t,n){return{name:Am(e,t),fields:n.value.mapValue.fields}}function gM(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:se(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=(function(y,T){return y.useProto3Json?(Je(T===void 0||typeof T=="string",58123),Li.fromBase64String(T||"")):(Je(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Li.fromUint8Array(T||new Uint8Array))})(e,t.targetChange.resumeToken),g=t.targetChange.cause,w=g&&(function(y){const T=y.code===void 0?Dt.UNKNOWN:uC(y.code);return new Wt(T,y.message||"")})(g);n=new fC(r,l,h,w||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const l=Mg(e,r.document.name),h=Xs(r.document.updateTime),g=r.document.createTime?Xs(r.document.createTime):fe.min(),w=new gr({mapValue:{fields:r.document.fields}}),E=Ki.newFoundDocument(l,h,g,w),y=r.targetIds||[],T=r.removedTargetIds||[];n=new cd(y,T,E.key,E)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const l=Mg(e,r.document),h=r.readTime?Xs(r.readTime):fe.min(),g=Ki.newNoDocument(l,h),w=r.removedTargetIds||[];n=new cd([],w,g.key,g)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const l=Mg(e,r.document),h=r.removedTargetIds||[];n=new cd([],h,l,null)}else{if(!("filter"in t))return se(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:l=0,unchangedNames:h}=r,g=new iM(l,h),w=r.targetId;n=new hC(w,g)}}return n}function mM(e,t){let n;if(t instanceof Nh)n={update:Zx(e,t.key,t.value)};else if(t instanceof cC)n={delete:Am(e,t.key)};else if(t instanceof jo)n={update:Zx(e,t.key,t.data),updateMask:vM(t.fieldMask)};else{if(!(t instanceof tM))return se(16599,{Vt:t.type});n={verify:Am(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(h,g){const w=g.transform;if(w instanceof fh)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof dh)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof gh)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Od)return{fieldPath:g.field.canonicalString(),increment:w.Ae};throw se(20930,{transform:g.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(l,h){return h.updateTime!==void 0?{updateTime:fM(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:se(27497)})(e,t.precondition)),n}function pM(e,t){return e&&e.length>0?(Je(t!==void 0,14353),e.map((n=>(function(l,h){let g=l.updateTime?Xs(l.updateTime):Xs(h);return g.isEqual(fe.min())&&(g=Xs(h)),new ZO(g,l.transformResults||[])})(n,t)))):[]}function yM(e,t){return{documents:[mC(e,t.path)]}}function EM(e,t){const n={structuredQuery:{}},r=t.path;let l;t.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mC(e,l);const h=(function(y){if(y.length!==0)return EC(ta.create(y,"and"))})(t.filters);h&&(n.structuredQuery.where=h);const g=(function(y){if(y.length!==0)return y.map((T=>(function(N){return{field:Ec(N.field),direction:wM(N.dir)}})(T)))})(t.orderBy);g&&(n.structuredQuery.orderBy=g);const w=ym(e,t.limit);return w!==null&&(n.structuredQuery.limit=w),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function AM(e){let t=dM(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){Je(r===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let h=[];n.where&&(h=(function(S){const N=yC(S);return N instanceof ta&&Yv(N)?N.getFilters():[N]})(n.where));let g=[];n.orderBy&&(g=(function(S){return S.map((N=>(function(z){return new Dd(Ac(z.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(N)))})(n.orderBy));let w=null;n.limit&&(w=(function(S){let N;return N=typeof S=="object"?S.value:S,c0(N)?null:N})(n.limit));let E=null;n.startAt&&(E=(function(S){const N=!!S.before,k=S.values||[];return new Nd(k,N)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const N=!S.before,k=S.values||[];return new Nd(k,N)})(n.endAt)),kO(t,l,g,h,w,"F",E,y)}function xM(e,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function yC(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ac(n.unaryFilter.field);return di.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Ac(n.unaryFilter.field);return di.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Ac(n.unaryFilter.field);return di.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Ac(n.unaryFilter.field);return di.create(g,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}})(e):e.fieldFilter!==void 0?(function(n){return di.create(Ac(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return ta.create(n.compositeFilter.filters.map((r=>yC(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return se(1026)}})(n.compositeFilter.op))})(e):se(30097,{filter:e})}function wM(e){return lM[e]}function _M(e){return cM[e]}function TM(e){return uM[e]}function Ec(e){return{fieldPath:e.canonicalString()}}function Ac(e){return Pi.fromServerFormat(e.fieldPath)}function EC(e){return e instanceof di?(function(n){if(n.op==="=="){if(Vx(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NAN"}};if(Bx(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vx(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NOT_NAN"}};if(Bx(n.value))return{unaryFilter:{field:Ec(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ec(n.field),op:_M(n.op),value:n.value}}})(e):e instanceof ta?(function(n){const r=n.getFilters().map((l=>EC(l)));return r.length===1?r[0]:{compositeFilter:{op:TM(n.op),filters:r}}})(e):se(54877,{filter:e})}function vM(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function AC(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t,n,r,l,h=fe.min(),g=fe.min(),w=Li.EMPTY_BYTE_STRING,E=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=E}withSequenceNumber(t){return new Co(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(t){this.yt=t}}function bM(e){const t=AM({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.Cn=new IM}addToCollectionParentIndex(t,n){return this.Cn.add(n),It.resolve()}getCollectionParents(t,n){return It.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return It.resolve()}deleteFieldIndex(t,n){return It.resolve()}deleteAllFieldIndexes(t){return It.resolve()}createTargetIndexes(t,n){return It.resolve()}getDocumentsMatchingTarget(t,n){return It.resolve(null)}getIndexType(t,n){return It.resolve(0)}getFieldIndexes(t,n){return It.resolve([])}getNextCollectionGroupToUpdate(t){return It.resolve(null)}getMinOffset(t,n){return It.resolve(Mo.min())}getMinOffsetFromCollectionGroup(t,n){return It.resolve(Mo.min())}updateCollectionGroup(t,n,r){return It.resolve()}updateIndexEntries(t,n){return It.resolve()}}class IM{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n]||new mi(On.comparator),h=!l.has(r);return this.index[n]=l.add(r),h}has(t){const n=t.lastSegment(),r=t.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(t){return(this.index[t]||new mi(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xC=41943040;class dr{static withCacheSize(t){return new dr(t,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(xC,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Bc(0)}static cr(){return new Bc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="LruGarbageCollector",RM=1048576;function tw([e,t],[n,r]){const l=Me(e,n);return l===0?Me(t,r):l}class NM{constructor(t){this.Ir=t,this.buffer=new mi(tw),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DM{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){jt($x,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qc(n)?jt($x,"Ignoring IndexedDB error during garbage collection: ",n):await Gc(n)}await this.Vr(3e5)}))}}class OM{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return It.resolve(l0.ce);const r=new NM(n);return this.mr.forEachTarget(t,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(jt("LruGarbageCollector","Garbage collection skipped; disabled"),It.resolve(Jx)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jx):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,l,h,g,w,E,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,g=Date.now(),this.nthSequenceNumber(t,l)))).next((S=>(r=S,w=Date.now(),this.removeTargets(t,r,n)))).next((S=>(h=S,E=Date.now(),this.removeOrphanedDocuments(t,r)))).next((S=>(y=Date.now(),pc()<=Oe.DEBUG&&jt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${g-T}ms
	Determined least recently used ${l} in `+(w-g)+`ms
	Removed ${h} targets in `+(E-w)+`ms
	Removed ${S} documents in `+(y-E)+`ms
Total Duration: ${y-T}ms`),It.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:S}))))}}function MM(e,t){return new OM(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.changes=new Ll((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ki.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?It.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(t,n,r,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(r!==null&&Ju(r.mutation,l,Fr.empty(),wn.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,Pe()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=Pe()){const l=pl();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,r).next((h=>{let g=zu();return h.forEach(((w,E)=>{g=g.insert(w,E.overlayedDocument)})),g}))))}getOverlayedDocuments(t,n){const r=pl();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,Pe())))}populateOverlays(t,n,r){const l=[];return r.forEach((h=>{n.has(h)||l.push(h)})),this.documentOverlayCache.getOverlays(t,l).next((h=>{h.forEach(((g,w)=>{n.set(g,w)}))}))}computeViews(t,n,r,l){let h=Fa();const g=Zu(),w=(function(){return Zu()})();return n.forEach(((E,y)=>{const T=r.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof jo)?h=h.insert(y.key,y):T!==void 0?(g.set(y.key,T.mutation.getFieldMask()),Ju(T.mutation,y,T.mutation.getFieldMask(),wn.now())):g.set(y.key,Fr.empty())})),this.recalculateAndSaveOverlays(t,h).next((E=>(E.forEach(((y,T)=>g.set(y,T))),n.forEach(((y,T)=>w.set(y,new LM(T,g.get(y)??null)))),w)))}recalculateAndSaveOverlays(t,n){const r=Zu();let l=new Ln(((g,w)=>g-w)),h=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((g=>{for(const w of g)w.keys().forEach((E=>{const y=n.get(E);if(y===null)return;let T=r.get(E)||Fr.empty();T=w.applyToLocalView(y,T),r.set(E,T);const S=(l.get(w.batchId)||Pe()).add(E);l=l.insert(w.batchId,S)}))})).next((()=>{const g=[],w=l.getReverseIterator();for(;w.hasNext();){const E=w.getNext(),y=E.key,T=E.value,S=eC();T.forEach((N=>{if(!h.has(N)){const k=oC(n.get(N),r.get(N));k!==null&&S.set(N,k),h=h.add(N)}})),g.push(this.documentOverlayCache.saveOverlays(t,y,S))}return It.waitFor(g)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,l){return(function(g){return te.isDocumentKey(g.path)&&g.collectionGroup===null&&g.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):BO(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,l):this.getDocumentsMatchingCollectionQuery(t,n,r,l)}getNextDocuments(t,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,l).next((h=>{const g=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,l-h.size):It.resolve(pl());let w=lh,E=h;return g.next((y=>It.forEach(y,((T,S)=>(w<S.largestBatchId&&(w=S.largestBatchId),h.get(T)?It.resolve():this.remoteDocumentCache.getEntry(t,T).next((N=>{E=E.insert(T,N)}))))).next((()=>this.populateOverlays(t,y,h))).next((()=>this.computeViews(t,E,y,Pe()))).next((T=>({batchId:w,changes:tC(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new te(n)).next((r=>{let l=zu();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,l){const h=n.collectionGroup;let g=zu();return this.indexManager.getCollectionParents(t,h).next((w=>It.forEach(w,(E=>{const y=(function(S,N){return new h0(N,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,E.child(h));return this.getDocumentsMatchingCollectionQuery(t,y,r,l).next((T=>{T.forEach(((S,N)=>{g=g.insert(S,N)}))}))})).next((()=>g))))}getDocumentsMatchingCollectionQuery(t,n,r,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((g=>(h=g,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,h,l)))).next((g=>{h.forEach(((E,y)=>{const T=y.getKey();g.get(T)===null&&(g=g.insert(T,Ki.newInvalidDocument(T)))}));let w=zu();return g.forEach(((E,y)=>{const T=h.get(E);T!==void 0&&Ju(T.mutation,y,Fr.empty(),wn.now()),d0(n,y)&&(w=w.insert(E,y))})),w}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return It.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Xs(l.createTime)}})(n)),It.resolve()}getNamedQuery(t,n){return It.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:bM(l.bundledQuery),readTime:Xs(l.readTime)}})(n)),It.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.overlays=new Ln(te.comparator),this.qr=new Map}getOverlay(t,n){return It.resolve(this.overlays.get(n))}getOverlays(t,n){const r=pl();return It.forEach(n,(l=>this.getOverlay(t,l).next((h=>{h!==null&&r.set(l,h)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((l,h)=>{this.St(t,n,h)})),It.resolve()}removeOverlaysForBatchId(t,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(r)),It.resolve()}getOverlaysForCollection(t,n,r){const l=pl(),h=n.length+1,g=new te(n.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const E=w.getNext().value,y=E.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===h&&E.largestBatchId>r&&l.set(E.getKey(),E)}return It.resolve(l)}getOverlaysForCollectionGroup(t,n,r,l){let h=new Ln(((y,T)=>y-T));const g=this.overlays.getIterator();for(;g.hasNext();){const y=g.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=h.get(y.largestBatchId);T===null&&(T=pl(),h=h.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const w=pl(),E=h.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((y,T)=>w.set(y,T))),!(w.size()>=l)););return It.resolve(w)}St(t,n,r){const l=this.overlays.get(r.key);if(l!==null){const g=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,g)}this.overlays=this.overlays.insert(r.key,new nM(n,r));let h=this.qr.get(n);h===void 0&&(h=Pe(),this.qr.set(n,h)),this.qr.set(n,h.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.sessionToken=Li.EMPTY_BYTE_STRING}getSessionToken(t){return It.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,It.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.Qr=new mi(_i.$r),this.Ur=new mi(_i.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new _i(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new _i(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new te(new On([])),r=new _i(n,t),l=new _i(n,t+1),h=[];return this.Ur.forEachInRange([r,l],(g=>{this.Gr(g),h.push(g.key)})),h}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new te(new On([])),r=new _i(n,t),l=new _i(n,t+1);let h=Pe();return this.Ur.forEachInRange([r,l],(g=>{h=h.add(g.key)})),h}containsKey(t){const n=new _i(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class _i{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return te.comparator(t.key,n.key)||Me(t.Yr,n.Yr)}static Kr(t,n){return Me(t.Yr,n.Yr)||te.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new mi(_i.$r)}checkEmpty(t){return It.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const g=new eM(h,n,r,l);this.mutationQueue.push(g);for(const w of l)this.Zr=this.Zr.add(new _i(w.key,h)),this.indexManager.addToCollectionParentIndex(t,w.key.path.popLast());return It.resolve(g)}lookupMutationBatch(t,n){return It.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,l=this.ei(r),h=l<0?0:l;return It.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return It.resolve(this.mutationQueue.length===0?vp:this.tr-1)}getAllMutationBatches(t){return It.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new _i(n,0),l=new _i(n,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([r,l],(g=>{const w=this.Xr(g.Yr);h.push(w)})),It.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new mi(Me);return n.forEach((l=>{const h=new _i(l,0),g=new _i(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,g],(w=>{r=r.add(w.Yr)}))})),It.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,l=r.length+1;let h=r;te.isDocumentKey(h)||(h=h.child(""));const g=new _i(new te(h),0);let w=new mi(Me);return this.Zr.forEachWhile((E=>{const y=E.key.path;return!!r.isPrefixOf(y)&&(y.length===l&&(w=w.add(E.Yr)),!0)}),g),It.resolve(this.ti(w))}ti(t){const n=[];return t.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return It.forEach(n.mutations,(l=>{const h=new _i(l.key,n.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new _i(n,0),l=this.Zr.firstAfterOrEqual(r);return It.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,It.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(t){this.ri=t,this.docs=(function(){return new Ln(te.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,l=this.docs.get(r),h=l?l.size:0,g=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:g}),this.size+=g-h,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return It.resolve(r?r.document.mutableCopy():Ki.newInvalidDocument(n))}getEntries(t,n){let r=Fa();return n.forEach((l=>{const h=this.docs.get(l);r=r.insert(l,h?h.document.mutableCopy():Ki.newInvalidDocument(l))})),It.resolve(r)}getDocumentsMatchingQuery(t,n,r,l){let h=Fa();const g=n.path,w=new te(g.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(w);for(;E.hasNext();){const{key:y,value:{document:T}}=E.getNext();if(!g.isPrefixOf(y.path))break;y.path.length>g.length+1||gO(dO(T),r)<=0||(l.has(T.key)||d0(n,T))&&(h=h.insert(T.key,T.mutableCopy()))}return It.resolve(h)}getAllFromCollectionGroup(t,n,r,l){se(9500)}ii(t,n){return It.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new HM(this)}getSize(t){return It.resolve(this.size)}}class HM extends PM{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(r)})),It.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(t){this.persistence=t,this.si=new Ll((n=>Sp(n)),Ip),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Pp,this.targetCount=0,this.ai=Bc.ur()}forEachTarget(t,n){return this.si.forEach(((r,l)=>n(l))),It.resolve()}getLastRemoteSnapshotVersion(t){return It.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return It.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),It.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),It.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Bc(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,It.resolve()}updateTargetData(t,n){return this.Pr(n),It.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,It.resolve()}removeTargets(t,n,r){let l=0;const h=[];return this.si.forEach(((g,w)=>{w.sequenceNumber<=n&&r.get(w.targetId)===null&&(this.si.delete(g),h.push(this.removeMatchingKeysForTargetId(t,w.targetId)),l++)})),It.waitFor(h).next((()=>l))}getTargetCount(t){return It.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return It.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),It.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,h=[];return l&&n.forEach((g=>{h.push(l.markPotentiallyOrphaned(t,g))})),It.waitFor(h)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),It.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return It.resolve(r)}containsKey(t,n){return It.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(t,n){this.ui={},this.overlays={},this.ci=new l0(0),this.li=!1,this.li=!0,this.hi=new UM,this.referenceDelegate=t(this),this.Pi=new jM(this),this.indexManager=new SM,this.remoteDocumentCache=(function(l){return new zM(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new CM(n),this.Ii=new BM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new VM,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new FM(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){jt("MemoryPersistence","Starting transaction:",t);const l=new GM(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((h=>this.referenceDelegate.di(l).next((()=>h)))).toPromise().then((h=>(l.raiseOnCommittedEvent(),h)))}Ai(t,n){return It.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class GM extends pO{constructor(t){super(),this.currentSequenceNumber=t}}class Lp{constructor(t){this.persistence=t,this.Ri=new Pp,this.Vi=null}static mi(t){return new Lp(t)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),It.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),It.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),It.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((h=>this.fi.add(h.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return It.forEach(this.fi,(r=>{const l=te.fromPath(r);return this.gi(t,l).next((h=>{h||n.removeEntry(l,fe.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return It.or([()=>It.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Pd{constructor(t,n){this.persistence=t,this.pi=new Ll((r=>AO(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=MM(this,n)}static mi(t,n){return new Pd(t,n)}Ei(){}di(t){return It.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((l=>r+l))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return It.forEach(this.pi,((r,l)=>this.br(t,r,l).next((h=>h?It.resolve():n(l)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,(g=>this.br(t,g,n).next((w=>{w||(r++,h.removeEntry(g,fe.min()))})))).next((()=>h.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),It.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),It.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),It.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),It.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ad(t.data.value)),n}br(t,n,r){return It.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return It.resolve(l!==void 0&&l>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t,n,r,l){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=l}static As(t,n){let r=Pe(),l=Pe();for(const h of n.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new kp(t,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return d4()?8:yO(Qi())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,l){const h={result:null};return this.ys(t,n).next((g=>{h.result=g})).next((()=>{if(!h.result)return this.ws(t,n,l,r).next((g=>{h.result=g}))})).next((()=>{if(h.result)return;const g=new qM;return this.Ss(t,n,g).next((w=>{if(h.result=w,this.Vs)return this.bs(t,n,g,w.size)}))})).next((()=>h.result))}bs(t,n,r,l){return r.documentReadCount<this.fs?(pc()<=Oe.DEBUG&&jt("QueryEngine","SDK will not create cache indexes for query:",yc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),It.resolve()):(pc()<=Oe.DEBUG&&jt("QueryEngine","Query:",yc(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(pc()<=Oe.DEBUG&&jt("QueryEngine","The SDK decides to create cache indexes for query:",yc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gs(n))):It.resolve())}ys(t,n){if(Hx(n))return It.resolve(null);let r=Gs(n);return this.indexManager.getIndexType(t,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=pm(n,null,"F"),r=Gs(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((h=>{const g=Pe(...h);return this.ps.getDocuments(t,g).next((w=>this.indexManager.getMinOffset(t,r).next((E=>{const y=this.Ds(n,w);return this.Cs(n,y,g,E.readTime)?this.ys(t,pm(n,null,"F")):this.vs(t,y,n,E)}))))})))))}ws(t,n,r,l){return Hx(n)||l.isEqual(fe.min())?It.resolve(null):this.ps.getDocuments(t,r).next((h=>{const g=this.Ds(n,h);return this.Cs(n,g,r,l)?It.resolve(null):(pc()<=Oe.DEBUG&&jt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),yc(n)),this.vs(t,g,n,fO(l,lh)).next((w=>w)))}))}Ds(t,n){let r=new mi(Jv(t));return n.forEach(((l,h)=>{d0(t,h)&&(r=r.add(h))})),r}Cs(t,n,r,l){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const h=t.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,n,r){return pc()<=Oe.DEBUG&&jt("QueryEngine","Using full collection scan to execute query:",yc(n)),this.ps.getDocumentsMatchingQuery(t,n,Mo.min(),r)}vs(t,n,r,l){return this.ps.getDocumentsMatchingQuery(t,r,l).next((h=>(n.forEach((g=>{h=h.insert(g.key,g)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",YM=3e8;class KM{constructor(t,n,r,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new Ln(Me),this.xs=new Ll((h=>Sp(h)),Ip),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new kM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function WM(e,t,n,r){return new KM(e,t,n,r)}async function _C(e,t){const n=me(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((h=>(l=h,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((h=>{const g=[],w=[];let E=Pe();for(const y of l){g.push(y.batchId);for(const T of y.mutations)E=E.add(T.key)}for(const y of h){w.push(y.batchId);for(const T of y.mutations)E=E.add(T.key)}return n.localDocuments.getDocuments(r,E).next((y=>({Ls:y,removedBatchIds:g,addedBatchIds:w})))}))}))}function QM(e,t){const n=me(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=t.batch.keys(),h=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(w,E,y,T){const S=y.batch,N=S.keys();let k=It.resolve();return N.forEach((z=>{k=k.next((()=>T.getEntry(E,z))).next((X=>{const G=y.docVersions.get(z);Je(G!==null,48541),X.version.compareTo(G)<0&&(S.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),T.addEntry(X)))}))})),k.next((()=>w.mutationQueue.removeMutationBatch(E,S)))})(n,r,t,h).next((()=>h.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(w){let E=Pe();for(let y=0;y<w.mutationResults.length;++y)w.mutationResults[y].transformResults.length>0&&(E=E.add(w.batch.mutations[y].key));return E})(t)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function TC(e){const t=me(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function ZM(e,t){const n=me(e),r=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const g=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const w=[];t.targetChanges.forEach(((T,S)=>{const N=l.get(S);if(!N)return;w.push(n.Pi.removeMatchingKeys(h,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(h,T.addedDocuments,S))));let k=N.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(S)!==null?k=k.withResumeToken(Li.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):T.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(T.resumeToken,r)),l=l.insert(S,k),(function(X,G,it){return X.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=YM?!0:it.addedDocuments.size+it.modifiedDocuments.size+it.removedDocuments.size>0})(N,k,T)&&w.push(n.Pi.updateTargetData(h,k))}));let E=Fa(),y=Pe();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&w.push(n.persistence.referenceDelegate.updateLimboDocument(h,T))})),w.push(JM(h,g,t.documentUpdates).next((T=>{E=T.ks,y=T.qs}))),!r.isEqual(fe.min())){const T=n.Pi.getLastRemoteSnapshotVersion(h).next((S=>n.Pi.setTargetsMetadata(h,h.currentSequenceNumber,r)));w.push(T)}return It.waitFor(w).next((()=>g.apply(h))).next((()=>n.localDocuments.getLocalViewOfDocuments(h,E,y))).next((()=>E))})).then((h=>(n.Ms=l,h)))}function JM(e,t,n){let r=Pe(),l=Pe();return n.forEach((h=>r=r.add(h))),t.getEntries(e,r).next((h=>{let g=Fa();return n.forEach(((w,E)=>{const y=h.get(w);E.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(w)),E.isNoDocument()&&E.version.isEqual(fe.min())?(t.removeEntry(w,E.readTime),g=g.insert(w,E)):!y.isValidDocument()||E.version.compareTo(y.version)>0||E.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(E),g=g.insert(w,E)):jt(Bp,"Ignoring outdated watch update for ",w,". Current version:",y.version," Watch version:",E.version)})),{ks:g,qs:l}}))}function $M(e,t){const n=me(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=vp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function t5(e,t){const n=me(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,t).next((h=>h?(l=h,It.resolve(l)):n.Pi.allocateTargetId(r).next((g=>(l=new Co(t,g,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function wm(e,t,n){const r=me(e),l=r.Ms.get(t),h=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",h,(g=>r.persistence.referenceDelegate.removeTarget(g,l)))}catch(g){if(!qc(g))throw g;jt(Bp,`Failed to update sequence numbers for target ${t}: ${g}`)}r.Ms=r.Ms.remove(t),r.xs.delete(l.target)}function ew(e,t,n){const r=me(e);let l=fe.min(),h=Pe();return r.persistence.runTransaction("Execute query","readwrite",(g=>(function(E,y,T){const S=me(E),N=S.xs.get(T);return N!==void 0?It.resolve(S.Ms.get(N)):S.Pi.getTargetData(y,T)})(r,g,Gs(t)).next((w=>{if(w)return l=w.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(g,w.targetId).next((E=>{h=E}))})).next((()=>r.Fs.getDocumentsMatchingQuery(g,t,n?l:fe.min(),n?h:Pe()))).next((w=>(e5(r,UO(t),w),{documents:w,Qs:h})))))}function e5(e,t,n){let r=e.Os.get(t)||fe.min();n.forEach(((l,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)})),e.Os.set(t,r)}class nw{constructor(){this.activeTargetIds=qO()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class n5{constructor(){this.Mo=new nw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new nw,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="ConnectivityMonitor";class rw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){jt(iw,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){jt(iw,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf=null;function _m(){return Yf===null?Yf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yf++,"0x"+Yf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="RestConnection",r5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s5{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Id?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(t,n,r,l,h){const g=_m(),w=this.zo(t,n.toUriEncodedString());jt(Pg,`Sending RPC '${t}' ${g}:`,w,r);const E={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(E,l,h);const{host:y}=new URL(w),T=Ol(y);return this.Jo(t,w,E,r,T).then((S=>(jt(Pg,`Received RPC '${t}' ${g}: `,S),S)),(S=>{throw Mc(Pg,`RPC '${t}' ${g} failed with error: `,S,"url: ",w,"request:",r),S}))}Ho(t,n,r,l,h,g){return this.Go(t,n,r,l,h)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,h)=>t[h]=l)),r&&r.headers.forEach(((l,h)=>t[h]=l))}zo(t,n){const r=r5[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="WebChannelConnection";class o5 extends s5{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,l,h){const g=_m();return new Promise(((w,E)=>{const y=new Sv;y.setWithCredentials(!0),y.listenOnce(Iv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case sd.NO_ERROR:const S=y.getResponseJson();jt(Xi,`XHR for RPC '${t}' ${g} received:`,JSON.stringify(S)),w(S);break;case sd.TIMEOUT:jt(Xi,`RPC '${t}' ${g} timed out`),E(new Wt(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const N=y.getStatus();if(jt(Xi,`RPC '${t}' ${g} failed with status:`,N,"response text:",y.getResponseText()),N>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k?.error;if(z&&z.status&&z.message){const X=(function(it){const nt=it.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(nt)>=0?nt:Dt.UNKNOWN})(z.status);E(new Wt(X,z.message))}else E(new Wt(Dt.UNKNOWN,"Server responded with status "+y.getStatus()))}else E(new Wt(Dt.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:t,streamId:g,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{jt(Xi,`RPC '${t}' ${g} completed.`)}}));const T=JSON.stringify(l);jt(Xi,`RPC '${t}' ${g} sending request:`,l),y.send(n,"POST",T,r,15)}))}T_(t,n,r){const l=_m(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],g=Dv(),w=Nv(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(E.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(E.useFetchStreams=!0),this.jo(E.initMessageHeaders,n,r),E.encodeInitMessageHeaders=!0;const T=h.join("");jt(Xi,`Creating RPC '${t}' stream ${l}: ${T}`,E);const S=g.createWebChannel(T,E);this.I_(S);let N=!1,k=!1;const z=new a5({Yo:G=>{k?jt(Xi,`Not sending because RPC '${t}' stream ${l} is closed:`,G):(N||(jt(Xi,`Opening RPC '${t}' stream ${l} transport.`),S.open(),N=!0),jt(Xi,`RPC '${t}' stream ${l} sending:`,G),S.send(G))},Zo:()=>S.close()}),X=(G,it,nt)=>{G.listen(it,(K=>{try{nt(K)}catch(At){setTimeout((()=>{throw At}),0)}}))};return X(S,Fu.EventType.OPEN,(()=>{k||(jt(Xi,`RPC '${t}' stream ${l} transport opened.`),z.o_())})),X(S,Fu.EventType.CLOSE,(()=>{k||(k=!0,jt(Xi,`RPC '${t}' stream ${l} transport closed`),z.a_(),this.E_(S))})),X(S,Fu.EventType.ERROR,(G=>{k||(k=!0,Mc(Xi,`RPC '${t}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),z.a_(new Wt(Dt.UNAVAILABLE,"The operation could not be completed")))})),X(S,Fu.EventType.MESSAGE,(G=>{if(!k){const it=G.data[0];Je(!!it,16349);const nt=it,K=nt?.error||nt[0]?.error;if(K){jt(Xi,`RPC '${t}' stream ${l} received error:`,K);const At=K.status;let wt=(function(U){const V=ri[U];if(V!==void 0)return uC(V)})(At),Rt=K.message;wt===void 0&&(wt=Dt.INTERNAL,Rt="Unknown error status: "+At+" with message "+K.message),k=!0,z.a_(new Wt(wt,Rt)),S.close()}else jt(Xi,`RPC '${t}' stream ${l} received:`,it),z.u_(it)}})),X(w,Rv.STAT_EVENT,(G=>{G.stat===um.PROXY?jt(Xi,`RPC '${t}' stream ${l} detected buffering proxy`):G.stat===um.NOPROXY&&jt(Xi,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Lg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(e){return new hM(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t,n,r=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&jt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="PersistentStream";class CC{constructor(t,n,r,l,h,g,w,E){this.Mi=t,this.S_=r,this.b_=l,this.connection=h,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vC(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Dt.RESOURCE_EXHAUSTED?(Ua(n.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{t((()=>{const l=new Wt(Dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return jt(sw,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(jt(sw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l5 extends CC{constructor(t,n,r,l,h,g){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,g),this.serializer=h}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=gM(this.serializer,t),r=(function(h){if(!("targetChange"in h))return fe.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?fe.min():g.readTime?Xs(g.readTime):fe.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=xm(this.serializer),n.addTarget=(function(h,g){let w;const E=g.target;if(w=mm(E)?{documents:yM(h,E)}:{query:EM(h,E).ft},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=dC(h,g.resumeToken);const y=ym(h,g.expectedCount);y!==null&&(w.expectedCount=y)}else if(g.snapshotVersion.compareTo(fe.min())>0){w.readTime=Md(h,g.snapshotVersion.toTimestamp());const y=ym(h,g.expectedCount);y!==null&&(w.expectedCount=y)}return w})(this.serializer,t);const r=xM(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=xm(this.serializer),n.removeTarget=t,this.q_(n)}}class c5 extends CC{constructor(t,n,r,l,h,g){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,g),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Je(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Je(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Je(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=pM(t.writeResults,t.commitTime),r=Xs(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=xm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>mM(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{}class h5 extends u5{constructor(t,n,r,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Wt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Go(t,Em(n,r),l,h,g))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Wt(Dt.UNKNOWN,h.toString())}))}Ho(t,n,r,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([g,w])=>this.connection.Ho(t,Em(n,r),l,g,w,h))).catch((g=>{throw g.name==="FirebaseError"?(g.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Wt(Dt.UNKNOWN,g.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class f5{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ua(n),this.aa=!1):jt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il="RemoteStore";class d5{constructor(t,n,r,l,h){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((g=>{r.enqueueAndForget((async()=>{kl(this)&&(jt(Il,"Restarting streams for network reachability change."),await(async function(E){const y=me(E);y.Ea.add(4),await Oh(y),y.Ra.set("Unknown"),y.Ea.delete(4),await E0(y)})(this))}))})),this.Ra=new f5(r,l)}}async function E0(e){if(kl(e))for(const t of e.da)await t(!0)}async function Oh(e){for(const t of e.da)await t(!1)}function bC(e,t){const n=me(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),zp(n)?Fp(n):Xc(n).O_()&&Up(n,t))}function Vp(e,t){const n=me(e),r=Xc(n);n.Ia.delete(t),r.O_()&&SC(n,t),n.Ia.size===0&&(r.O_()?r.L_():kl(n)&&n.Ra.set("Unknown"))}function Up(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fe.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xc(e).Y_(t)}function SC(e,t){e.Va.Ue(t),Xc(e).Z_(t)}function Fp(e){e.Va=new oM({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Xc(e).start(),e.Ra.ua()}function zp(e){return kl(e)&&!Xc(e).x_()&&e.Ia.size>0}function kl(e){return me(e).Ea.size===0}function IC(e){e.Va=void 0}async function g5(e){e.Ra.set("Online")}async function m5(e){e.Ia.forEach(((t,n)=>{Up(e,t)}))}async function p5(e,t){IC(e),zp(e)?(e.Ra.ha(t),Fp(e)):e.Ra.set("Unknown")}async function y5(e,t,n){if(e.Ra.set("Online"),t instanceof fC&&t.state===2&&t.cause)try{await(async function(l,h){const g=h.cause;for(const w of h.targetIds)l.Ia.has(w)&&(await l.remoteSyncer.rejectListen(w,g),l.Ia.delete(w),l.Va.removeTarget(w))})(e,t)}catch(r){jt(Il,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ld(e,r)}else if(t instanceof cd?e.Va.Ze(t):t instanceof hC?e.Va.st(t):e.Va.tt(t),!n.isEqual(fe.min()))try{const r=await TC(e.localStore);n.compareTo(r)>=0&&await(function(h,g){const w=h.Va.Tt(g);return w.targetChanges.forEach(((E,y)=>{if(E.resumeToken.approximateByteSize()>0){const T=h.Ia.get(y);T&&h.Ia.set(y,T.withResumeToken(E.resumeToken,g))}})),w.targetMismatches.forEach(((E,y)=>{const T=h.Ia.get(E);if(!T)return;h.Ia.set(E,T.withResumeToken(Li.EMPTY_BYTE_STRING,T.snapshotVersion)),SC(h,E);const S=new Co(T.target,E,y,T.sequenceNumber);Up(h,S)})),h.remoteSyncer.applyRemoteEvent(w)})(e,n)}catch(r){jt(Il,"Failed to raise snapshot:",r),await Ld(e,r)}}async function Ld(e,t,n){if(!qc(t))throw t;e.Ea.add(1),await Oh(e),e.Ra.set("Offline"),n||(n=()=>TC(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{jt(Il,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await E0(e)}))}function RC(e,t){return t().catch((n=>Ld(e,n,t)))}async function A0(e){const t=me(e),n=Bo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:vp;for(;E5(t);)try{const l=await $M(t.localStore,r);if(l===null){t.Ta.length===0&&n.L_();break}r=l.batchId,A5(t,l)}catch(l){await Ld(t,l)}NC(t)&&DC(t)}function E5(e){return kl(e)&&e.Ta.length<10}function A5(e,t){e.Ta.push(t);const n=Bo(e);n.O_()&&n.X_&&n.ea(t.mutations)}function NC(e){return kl(e)&&!Bo(e).x_()&&e.Ta.length>0}function DC(e){Bo(e).start()}async function x5(e){Bo(e).ra()}async function w5(e){const t=Bo(e);for(const n of e.Ta)t.ea(n.mutations)}async function _5(e,t,n){const r=e.Ta.shift(),l=Dp.from(r,t,n);await RC(e,(()=>e.remoteSyncer.applySuccessfulWrite(l))),await A0(e)}async function T5(e,t){t&&Bo(e).X_&&await(async function(r,l){if((function(g){return rM(g)&&g!==Dt.ABORTED})(l.code)){const h=r.Ta.shift();Bo(r).B_(),await RC(r,(()=>r.remoteSyncer.rejectFailedWrite(h.batchId,l))),await A0(r)}})(e,t),NC(e)&&DC(e)}async function aw(e,t){const n=me(e);n.asyncQueue.verifyOperationInProgress(),jt(Il,"RemoteStore received new credentials");const r=kl(n);n.Ea.add(3),await Oh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await E0(n)}async function v5(e,t){const n=me(e);t?(n.Ea.delete(2),await E0(n)):t||(n.Ea.add(2),await Oh(n),n.Ra.set("Unknown"))}function Xc(e){return e.ma||(e.ma=(function(n,r,l){const h=me(n);return h.sa(),new l5(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(e.datastore,e.asyncQueue,{Xo:g5.bind(null,e),t_:m5.bind(null,e),r_:p5.bind(null,e),H_:y5.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),zp(e)?Fp(e):e.Ra.set("Unknown")):(await e.ma.stop(),IC(e))}))),e.ma}function Bo(e){return e.fa||(e.fa=(function(n,r,l){const h=me(n);return h.sa(),new c5(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:x5.bind(null,e),r_:T5.bind(null,e),ta:w5.bind(null,e),na:_5.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await A0(e)):(await e.fa.stop(),e.Ta.length>0&&(jt(Il,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(t,n,r,l,h){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=h,this.deferred=new Ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((g=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,l,h){const g=Date.now()+r,w=new Hp(t,n,g,l,h);return w.start(r),w}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(Dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jp(e,t){if(Ua("AsyncQueue",`${t}: ${e}`),qc(e))return new Wt(Dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{static emptySet(t){return new Nc(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=zu(),this.sortedSet=new Ln(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Nc)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=r.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Nc;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.ga=new Ln(te.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):se(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Vc{constructor(t,n,r,l,h,g,w,E,y){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=E,this.hasCachedResults=y}static fromInitialDocuments(t,n,r,l,h){const g=[];return n.forEach((w=>{g.push({type:0,doc:w})})),new Vc(t,n,Nc.emptySet(n),g,r,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&f0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class b5{constructor(){this.queries=lw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=me(n),h=l.queries;l.queries=lw(),h.forEach(((g,w)=>{for(const E of w.Sa)E.onError(r)}))})(this,new Wt(Dt.ABORTED,"Firestore shutting down"))}}function lw(){return new Ll((e=>Zv(e)),f0)}async function S5(e,t){const n=me(e);let r=3;const l=t.query;let h=n.queries.get(l);h?!h.ba()&&t.Da()&&(r=2):(h=new C5,r=t.Da()?0:1);try{switch(r){case 0:h.wa=await n.onListen(l,!0);break;case 1:h.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(g){const w=jp(g,`Initialization of query '${yc(t.query)}' failed`);return void t.onError(w)}n.queries.set(l,h),h.Sa.push(t),t.va(n.onlineState),h.wa&&t.Fa(h.wa)&&Gp(n)}async function I5(e,t){const n=me(e),r=t.query;let l=3;const h=n.queries.get(r);if(h){const g=h.Sa.indexOf(t);g>=0&&(h.Sa.splice(g,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function R5(e,t){const n=me(e);let r=!1;for(const l of t){const h=l.query,g=n.queries.get(h);if(g){for(const w of g.Sa)w.Fa(l)&&(r=!0);g.wa=l}}r&&Gp(n)}function N5(e,t,n){const r=me(e),l=r.queries.get(t);if(l)for(const h of l.Sa)h.onError(n);r.queries.delete(t)}function Gp(e){e.Ca.forEach((t=>{t.next()}))}var Tm,cw;(cw=Tm||(Tm={})).Ma="default",cw.Cache="cache";class D5{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const l of t.docChanges)l.type!==3&&r.push(l);t=new Vc(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Vc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t){this.key=t}}class MC{constructor(t){this.key=t}}class O5{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=Jv(t),this.tu=new Nc(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new ow,l=n?n.tu:this.tu;let h=n?n.mutatedKeys:this.mutatedKeys,g=l,w=!1;const E=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,S)=>{const N=l.get(T),k=d0(this.query,S)?S:null,z=!!N&&this.mutatedKeys.has(N.key),X=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let G=!1;N&&k?N.data.isEqual(k.data)?z!==X&&(r.track({type:3,doc:k}),G=!0):this.su(N,k)||(r.track({type:2,doc:k}),G=!0,(E&&this.eu(k,E)>0||y&&this.eu(k,y)<0)&&(w=!0)):!N&&k?(r.track({type:0,doc:k}),G=!0):N&&!k&&(r.track({type:1,doc:N}),G=!0,(E||y)&&(w=!0)),G&&(k?(g=g.add(k),h=X?h.add(T):h.delete(T)):(g=g.delete(T),h=h.delete(T)))})),this.query.limit!==null)for(;g.size>this.query.limit;){const T=this.query.limitType==="F"?g.last():g.first();g=g.delete(T.key),h=h.delete(T.key),r.track({type:1,doc:T})}return{tu:g,iu:r,Cs:w,mutatedKeys:h}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const g=t.iu.ya();g.sort(((T,S)=>(function(k,z){const X=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:G})}};return X(k)-X(z)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),l=l??!1;const w=n&&!l?this._u():[],E=this.Xa.size===0&&this.current&&!l?1:0,y=E!==this.Za;return this.Za=E,g.length!==0||y?{snapshot:new Vc(this.query,t.tu,h,g,t.mutatedKeys,E===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:w}:{au:w}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ow,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new MC(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new OC(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=Pe();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Vc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qp="SyncEngine";class M5{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class P5{constructor(t){this.key=t,this.hu=!1}}class L5{constructor(t,n,r,l,h,g){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.Pu={},this.Tu=new Ll((w=>Zv(w)),f0),this.Iu=new Map,this.Eu=new Set,this.du=new Ln(te.comparator),this.Au=new Map,this.Ru=new Pp,this.Vu={},this.mu=new Map,this.fu=Bc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k5(e,t,n=!0){const r=UC(e);let l;const h=r.Tu.get(t);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await PC(r,t,n,!0),l}async function B5(e,t){const n=UC(e);await PC(n,t,!0,!1)}async function PC(e,t,n,r){const l=await t5(e.localStore,Gs(t)),h=l.targetId,g=e.sharedClientState.addLocalQueryTarget(h,n);let w;return r&&(w=await V5(e,t,h,g==="current",l.resumeToken)),e.isPrimaryClient&&n&&bC(e.remoteStore,l),w}async function V5(e,t,n,r,l){e.pu=(S,N,k)=>(async function(X,G,it,nt){let K=G.view.ru(it);K.Cs&&(K=await ew(X.localStore,G.query,!1).then((({documents:H})=>G.view.ru(H,K))));const At=nt&&nt.targetChanges.get(G.targetId),wt=nt&&nt.targetMismatches.get(G.targetId)!=null,Rt=G.view.applyChanges(K,X.isPrimaryClient,At,wt);return hw(X,G.targetId,Rt.au),Rt.snapshot})(e,S,N,k);const h=await ew(e.localStore,t,!0),g=new O5(t,h.Qs),w=g.ru(h.documents),E=Dh.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",l),y=g.applyChanges(w,e.isPrimaryClient,E);hw(e,n,y.au);const T=new M5(t,n,g);return e.Tu.set(t,T),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),y.snapshot}async function U5(e,t,n){const r=me(e),l=r.Tu.get(t),h=r.Iu.get(l.targetId);if(h.length>1)return r.Iu.set(l.targetId,h.filter((g=>!f0(g,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await wm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Vp(r.remoteStore,l.targetId),vm(r,l.targetId)})).catch(Gc)):(vm(r,l.targetId),await wm(r.localStore,l.targetId,!0))}async function F5(e,t){const n=me(e),r=n.Tu.get(t),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vp(n.remoteStore,r.targetId))}async function z5(e,t,n){const r=K5(e);try{const l=await(function(g,w){const E=me(g),y=wn.now(),T=w.reduce(((k,z)=>k.add(z.key)),Pe());let S,N;return E.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let z=Fa(),X=Pe();return E.Ns.getEntries(k,T).next((G=>{z=G,z.forEach(((it,nt)=>{nt.isValidDocument()||(X=X.add(it))}))})).next((()=>E.localDocuments.getOverlayedDocuments(k,z))).next((G=>{S=G;const it=[];for(const nt of w){const K=$O(nt,S.get(nt.key).overlayedDocument);K!=null&&it.push(new jo(nt.key,K,Gv(K.value.mapValue),qs.exists(!0)))}return E.mutationQueue.addMutationBatch(k,y,it,w)})).next((G=>{N=G;const it=G.applyToLocalDocumentSet(S,X);return E.documentOverlayCache.saveOverlays(k,G.batchId,it)}))})).then((()=>({batchId:N.batchId,changes:tC(S)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(l.batchId),(function(g,w,E){let y=g.Vu[g.currentUser.toKey()];y||(y=new Ln(Me)),y=y.insert(w,E),g.Vu[g.currentUser.toKey()]=y})(r,l.batchId,n),await Mh(r,l.changes),await A0(r.remoteStore)}catch(l){const h=jp(l,"Failed to persist write");n.reject(h)}}async function LC(e,t){const n=me(e);try{const r=await ZM(n.localStore,t);t.targetChanges.forEach(((l,h)=>{const g=n.Au.get(h);g&&(Je(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?g.hu=!0:l.modifiedDocuments.size>0?Je(g.hu,14607):l.removedDocuments.size>0&&(Je(g.hu,42227),g.hu=!1))})),await Mh(n,r,t)}catch(r){await Gc(r)}}function uw(e,t,n){const r=me(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((h,g)=>{const w=g.view.va(t);w.snapshot&&l.push(w.snapshot)})),(function(g,w){const E=me(g);E.onlineState=w;let y=!1;E.queries.forEach(((T,S)=>{for(const N of S.Sa)N.va(w)&&(y=!0)})),y&&Gp(E)})(r.eventManager,t),l.length&&r.Pu.H_(l),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function H5(e,t,n){const r=me(e);r.sharedClientState.updateQueryState(t,"rejected",n);const l=r.Au.get(t),h=l&&l.key;if(h){let g=new Ln(te.comparator);g=g.insert(h,Ki.newNoDocument(h,fe.min()));const w=Pe().add(h),E=new p0(fe.min(),new Map,new Ln(Me),g,w);await LC(r,E),r.du=r.du.remove(h),r.Au.delete(t),Xp(r)}else await wm(r.localStore,t,!1).then((()=>vm(r,t,n))).catch(Gc)}async function j5(e,t){const n=me(e),r=t.batch.batchId;try{const l=await QM(n.localStore,t);BC(n,r,null),kC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mh(n,l)}catch(l){await Gc(l)}}async function G5(e,t,n){const r=me(e);try{const l=await(function(g,w){const E=me(g);return E.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return E.mutationQueue.lookupMutationBatch(y,w).next((S=>(Je(S!==null,37113),T=S.keys(),E.mutationQueue.removeMutationBatch(y,S)))).next((()=>E.mutationQueue.performConsistencyCheck(y))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(y,T,w))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>E.localDocuments.getDocuments(y,T)))}))})(r.localStore,t);BC(r,t,n),kC(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Mh(r,l)}catch(l){await Gc(l)}}function kC(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function BC(e,t,n){const r=me(e);let l=r.Vu[r.currentUser.toKey()];if(l){const h=l.get(t);h&&(n?h.reject(n):h.resolve(),l=l.remove(t)),r.Vu[r.currentUser.toKey()]=l}}function vm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||VC(e,r)}))}function VC(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Vp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Xp(e))}function hw(e,t,n){for(const r of n)r instanceof OC?(e.Ru.addReference(r.key,t),q5(e,r)):r instanceof MC?(jt(qp,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||VC(e,r.key)):se(19791,{wu:r})}function q5(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(jt(qp,"New document in limbo: "+n),e.Eu.add(r),Xp(e))}function Xp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new te(On.fromString(t)),r=e.fu.next();e.Au.set(r,new P5(n)),e.du=e.du.insert(n,r),bC(e.remoteStore,new Co(Gs(Rp(n.path)),r,"TargetPurposeLimboResolution",l0.ce))}}async function Mh(e,t,n){const r=me(e),l=[],h=[],g=[];r.Tu.isEmpty()||(r.Tu.forEach(((w,E)=>{g.push(r.pu(E,t,n).then((y=>{if((y||n)&&r.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(E.targetId)?.current;r.sharedClientState.updateQueryState(E.targetId,T?"current":"not-current")}if(y){l.push(y);const T=kp.As(E.targetId,y);h.push(T)}})))})),await Promise.all(g),r.Pu.H_(l),await(async function(E,y){const T=me(E);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>It.forEach(y,(N=>It.forEach(N.Es,(k=>T.persistence.referenceDelegate.addReference(S,N.targetId,k))).next((()=>It.forEach(N.ds,(k=>T.persistence.referenceDelegate.removeReference(S,N.targetId,k)))))))))}catch(S){if(!qc(S))throw S;jt(Bp,"Failed to update sequence numbers: "+S)}for(const S of y){const N=S.targetId;if(!S.fromCache){const k=T.Ms.get(N),z=k.snapshotVersion,X=k.withLastLimboFreeSnapshotVersion(z);T.Ms=T.Ms.insert(N,X)}}})(r.localStore,h))}async function X5(e,t){const n=me(e);if(!n.currentUser.isEqual(t)){jt(qp,"User change. New user:",t.toKey());const r=await _C(n.localStore,t);n.currentUser=t,(function(h,g){h.mu.forEach((w=>{w.forEach((E=>{E.reject(new Wt(Dt.CANCELLED,g))}))})),h.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Mh(n,r.Ls)}}function Y5(e,t){const n=me(e),r=n.Au.get(t);if(r&&r.hu)return Pe().add(r.key);{let l=Pe();const h=n.Iu.get(t);if(!h)return l;for(const g of h){const w=n.Tu.get(g);l=l.unionWith(w.view.nu)}return l}}function UC(e){const t=me(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=LC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y5.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=H5.bind(null,t),t.Pu.H_=R5.bind(null,t.eventManager),t.Pu.yu=N5.bind(null,t.eventManager),t}function K5(e){const t=me(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=j5.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=G5.bind(null,t),t}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=y0(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return WM(this.persistence,new XM,t.initialUser,this.serializer)}Cu(t){return new wC(Lp.mi,this.serializer)}Du(t){return new n5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class W5 extends kd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Je(this.persistence.referenceDelegate instanceof Pd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new DM(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new wC((r=>Pd.mi(r,n)),this.serializer)}}class Cm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X5.bind(null,this.syncEngine),await v5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new b5})()}createDatastore(t){const n=y0(t.databaseInfo.databaseId),r=(function(h){return new o5(h)})(t.databaseInfo);return(function(h,g,w,E){return new h5(h,g,w,E)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,l,h,g,w){return new d5(r,l,h,g,w)})(this.localStore,this.datastore,t.asyncQueue,(n=>uw(this.syncEngine,n,0)),(function(){return rw.v()?new rw:new i5})())}createSyncEngine(t,n){return(function(l,h,g,w,E,y,T){const S=new L5(l,h,g,w,E,y);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=me(n);jt(Il,"RemoteStore shutting down."),r.Ea.add(5),await Oh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Cm.provider={build:()=>new Cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ua("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="FirestoreClient";class Z5{constructor(t,n,r,l,h){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Yi.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,(async g=>{jt(Vo,"Received user=",g.uid),await this.authCredentialListener(g),this.user=g})),this.appCheckCredentials.start(r,(g=>(jt(Vo,"Received new app check token=",g),this.appCheckCredentialListener(g,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=jp(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function kg(e,t){e.asyncQueue.verifyOperationInProgress(),jt(Vo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async l=>{r.isEqual(l)||(await _C(t.localStore,l),r=l)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function fw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await J5(e);jt(Vo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>aw(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,l)=>aw(t.remoteStore,l))),e._onlineComponents=t}async function J5(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){jt(Vo,"Using user provided OfflineComponentProvider");try{await kg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Dt.FAILED_PRECONDITION||l.code===Dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Mc("Error using user provided cache. Falling back to memory cache: "+n),await kg(e,new kd)}}else jt(Vo,"Using default OfflineComponentProvider"),await kg(e,new W5(void 0));return e._offlineComponents}async function FC(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(jt(Vo,"Using user provided OnlineComponentProvider"),await fw(e,e._uninitializedComponentsProvider._online)):(jt(Vo,"Using default OnlineComponentProvider"),await fw(e,new Cm))),e._onlineComponents}function $5(e){return FC(e).then((t=>t.syncEngine))}async function t9(e){const t=await FC(e),n=t.eventManager;return n.onListen=k5.bind(null,t.syncEngine),n.onUnlisten=U5.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=B5.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=F5.bind(null,t.syncEngine),n}function e9(e,t,n={}){const r=new Ro;return e.asyncQueue.enqueueAndForget((async()=>(function(h,g,w,E,y){const T=new Q5({next:N=>{T.Nu(),g.enqueueAndForget((()=>I5(h,S)));const k=N.docs.has(w);!k&&N.fromCache?y.reject(new Wt(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&N.fromCache&&E&&E.source==="server"?y.reject(new Wt(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(N)},error:N=>y.reject(N)}),S=new D5(Rp(w.path),T,{includeMetadataChanges:!0,qa:!0});return S5(h,S)})(await t9(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="firestore.googleapis.com",gw=!0;class mw{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HC,this.ssl=gw}else this.host=t.host,this.ssl=t.ssl??gw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xC;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<RM)throw new Wt(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}hO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zC(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Wt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Wt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Wt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Yp{constructor(t,n,r,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tO;switch(r.type){case"firstParty":return new rO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Wt(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=dw.get(n);r&&(jt("ComponentProvider","Removing Datastore"),dw.delete(n),r.terminate())})(this),Promise.resolve()}}function n9(e,t,n,r={}){e=Sl(e,Yp);const l=Ol(t),h=e._getSettings(),g={...h,emulatorOptions:e._getEmulatorOptions()},w=`${t}:${n}`;l&&(ip(`https://${w}`),rp("Firestore",!0)),h.host!==HC&&h.host!==w&&Mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...h,host:w,ssl:l,emulatorOptions:r};if(!Oo(E,g)&&(e._setSettings(E),r.mockUserToken)){let y,T;if(typeof r.mockUserToken=="string")y=r.mockUserToken,T=Yi.MOCK_USER;else{y=yT(r.mockUserToken,e._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new Wt(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Yi(S)}e._authCredentials=new eO(new Mv(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Kp(this.firestore,t,this._query)}}class gi{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new gi(this.firestore,t,this._key)}toJSON(){return{type:gi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Rh(n,gi._jsonSchema))return new gi(t,r||null,new te(On.fromString(n.referencePath)))}}gi._jsonSchemaVersion="firestore/documentReference/1.0",gi._jsonSchema={type:ai("string",gi._jsonSchemaVersion),referencePath:ai("string")};class mh extends Kp{constructor(t,n,r){super(t,n,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new gi(this.firestore,null,new te(t))}withConverter(t){return new mh(this.firestore,t,this._path)}}function No(e,t,...n){if(e=Ti(e),arguments.length===1&&(t=_p.newId()),uO("doc","path",t),e instanceof Yp){const r=On.fromString(t,...n);return Rx(r),new gi(e,null,new te(r))}{if(!(e instanceof gi||e instanceof mh))throw new Wt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(On.fromString(t,...n));return Rx(r),new gi(e.firestore,e instanceof mh?e.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="AsyncQueue";class yw{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vC(this,"async_queue_retry"),this._c=()=>{const r=Lg();r&&jt(pw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Lg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Lg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ro;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!qc(t))throw t;jt(pw,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ua("INTERNAL UNHANDLED ERROR: ",Ew(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Hp.createAndSchedule(this,t,n,r,(h=>this.hc(h)));return this.tc.push(l),l}uc(){this.nc&&se(47125,{Pc:Ew(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Ew(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class x0 extends Yp{constructor(t,n,r,l){super(t,n,r,l),this.type="firestore",this._queue=new yw,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new yw(t),this._firestoreClient=void 0,await t}}}function i9(e,t){const n=typeof e=="object"?e:n0(),r=typeof e=="string"?e:Id,l=zo(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const h=gT("firestore");h&&n9(l,...h)}return l}function jC(e){if(e._terminated)throw new Wt(Dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||r9(e),e._firestoreClient}function r9(e){const t=e._freezeSettings(),n=(function(l,h,g,w){return new _O(l,h,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,zC(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Z5(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this._byteString=t}static fromBase64String(t){try{return new is(Li.fromBase64String(t))}catch(n){throw new Wt(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new is(Li.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:is._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Rh(t,is._jsonSchema))return is.fromBase64String(t.bytes)}}is._jsonSchemaVersion="firestore/bytes/1.0",is._jsonSchema={type:ai("string",is._jsonSchemaVersion),bytes:ai("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Wt(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Wt(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wt(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Me(this._lat,t._lat)||Me(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ys._jsonSchemaVersion}}static fromJSON(t){if(Rh(t,Ys._jsonSchema))return new Ys(t.latitude,t.longitude)}}Ys._jsonSchemaVersion="firestore/geoPoint/1.0",Ys._jsonSchema={type:ai("string",Ys._jsonSchemaVersion),latitude:ai("number"),longitude:ai("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,l){if(r.length!==l.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==l[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Rh(t,Ks._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ks(t.vectorValues);throw new Wt(Dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:ai("string",Ks._jsonSchemaVersion),vectorValues:ai("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=/^__.*__$/;class a9{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new jo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Nh(t,this.data,n,this.fieldTransforms)}}class GC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new jo(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function qC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:e})}}class Wp{constructor(t,n,r,l,h,g){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Wp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Bd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(qC(this.Ac)&&s9.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class o9{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||y0(t)}Cc(t,n,r,l=!1){return new Wp({Ac:t,methodName:n,Dc:r,path:Pi.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XC(e){const t=e._freezeSettings(),n=y0(e._databaseId);return new o9(e._databaseId,!!t.ignoreUndefinedProperties,n)}function l9(e,t,n,r,l,h={}){const g=e.Cc(h.merge||h.mergeFields?2:0,t,n,l);Zp("Data must be an object, but it was:",g,r);const w=YC(r,g);let E,y;if(h.merge)E=new Fr(g.fieldMask),y=g.fieldTransforms;else if(h.mergeFields){const T=[];for(const S of h.mergeFields){const N=bm(t,S,n);if(!g.contains(N))throw new Wt(Dt.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);WC(T,N)||T.push(N)}E=new Fr(T),y=g.fieldTransforms.filter((S=>E.covers(S.field)))}else E=null,y=g.fieldTransforms;return new a9(new gr(w),E,y)}class T0 extends _0{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof T0}}class Qp extends _0{_toFieldTransform(t){return new WO(t.path,new fh)}isEqual(t){return t instanceof Qp}}function c9(e,t,n,r){const l=e.Cc(1,t,n);Zp("Data must be an object, but it was:",l,r);const h=[],g=gr.empty();Ho(r,((E,y)=>{const T=Jp(t,E,n);y=Ti(y);const S=l.yc(T);if(y instanceof T0)h.push(T);else{const N=v0(y,S);N!=null&&(h.push(T),g.set(T,N))}}));const w=new Fr(h);return new GC(g,w,l.fieldTransforms)}function u9(e,t,n,r,l,h){const g=e.Cc(1,t,n),w=[bm(t,r,n)],E=[l];if(h.length%2!=0)throw new Wt(Dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<h.length;N+=2)w.push(bm(t,h[N])),E.push(h[N+1]);const y=[],T=gr.empty();for(let N=w.length-1;N>=0;--N)if(!WC(y,w[N])){const k=w[N];let z=E[N];z=Ti(z);const X=g.yc(k);if(z instanceof T0)y.push(k);else{const G=v0(z,X);G!=null&&(y.push(k),T.set(k,G))}}const S=new Fr(y);return new GC(T,S,g.fieldTransforms)}function v0(e,t){if(KC(e=Ti(e)))return Zp("Unsupported field value:",t,e),YC(e,t);if(e instanceof _0)return(function(r,l){if(!qC(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(l);h&&l.fieldTransforms.push(h)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,l){const h=[];let g=0;for(const w of r){let E=v0(w,l.wc(g));E==null&&(E={nullValue:"NULL_VALUE"}),h.push(E),g++}return{arrayValue:{values:h}}})(e,t)}return(function(r,l){if((r=Ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XO(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=wn.fromDate(r);return{timestampValue:Md(l.serializer,h)}}if(r instanceof wn){const h=new wn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(l.serializer,h)}}if(r instanceof Ys)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof is)return{bytesValue:dC(l.serializer,r._byteString)};if(r instanceof gi){const h=l.databaseId,g=r.firestore._databaseId;if(!g.isEqual(h))throw l.Sc(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Mp(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Ks)return(function(g,w){return{mapValue:{fields:{[Hv]:{stringValue:jv},[Rd]:{arrayValue:{values:g.toArray().map((y=>{if(typeof y!="number")throw w.Sc("VectorValues must only contain numeric values.");return Np(w.serializer,y)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Tp(r)}`)})(e,t)}function YC(e,t){const n={};return kv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ho(e,((r,l)=>{const h=v0(l,t.mc(r));h!=null&&(n[r]=h)})),{mapValue:{fields:n}}}function KC(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof wn||e instanceof Ys||e instanceof is||e instanceof gi||e instanceof _0||e instanceof Ks)}function Zp(e,t,n){if(!KC(n)||!Pv(n)){const r=Tp(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function bm(e,t,n){if((t=Ti(t))instanceof w0)return t._internalPath;if(typeof t=="string")return Jp(e,t);throw Bd("Field path arguments must be of type string or ",e,!1,void 0,n)}const h9=new RegExp("[~\\*/\\[\\]]");function Jp(e,t,n){if(t.search(h9)>=0)throw Bd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new w0(...t.split("."))._internalPath}catch{throw Bd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Bd(e,t,n,r,l){const h=r&&!r.isEmpty(),g=l!==void 0;let w=`Function ${t}() called with invalid data`;n&&(w+=" (via `toFirestore()`)"),w+=". ";let E="";return(h||g)&&(E+=" (found",h&&(E+=` in field ${r}`),g&&(E+=` in document ${l}`),E+=")"),new Wt(Dt.INVALID_ARGUMENT,w+e+E)}function WC(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(t,n,r,l,h){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new f9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ZC("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f9 extends QC{data(){return super.data()}}function ZC(e,t){return typeof t=="string"?Jp(e,t):t instanceof w0?t._internalPath:t._delegate._internalPath}class d9{convertValue(t,n="none"){switch(ko(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $n(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Lo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw se(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ho(t,((l,h)=>{r[l]=this.convertValue(h,n)})),r}convertVectorValue(t){const n=t.fields?.[Rd].arrayValue?.values?.map((r=>$n(r.doubleValue)));return new Ks(n)}convertGeoPoint(t){return new Ys($n(t.latitude),$n(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=u0(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ch(t));default:return null}}convertTimestamp(t){const n=Po(t);return new wn(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=On.fromString(t);Je(AC(r),9688,{name:t});const l=new uh(r.get(1),r.get(3)),h=new te(r.popFirst(5));return l.isEqual(n)||Ua(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class ju{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xl extends QC{constructor(t,n,r,l,h,g){super(t,n,r,l,g),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(ZC("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=xl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xl._jsonSchemaVersion="firestore/documentSnapshot/1.0",xl._jsonSchema={type:ai("string",xl._jsonSchemaVersion),bundleSource:ai("string","DocumentSnapshot"),bundleName:ai("string"),bundle:ai("string")};class ud extends xl{data(t={}){return super.data(t)}}class $u{constructor(t,n,r,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new ju(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new ud(this._firestore,this._userDataWriter,r.key,r,new ju(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Wt(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,h){if(l._snapshot.oldDocs.isEmpty()){let g=0;return l._snapshot.docChanges.map((w=>{const E=new ud(l._firestore,l._userDataWriter,w.doc.key,w.doc,new ju(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter);return w.doc,{type:"added",doc:E,oldIndex:-1,newIndex:g++}}))}{let g=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((w=>h||w.type!==3)).map((w=>{const E=new ud(l._firestore,l._userDataWriter,w.doc.key,w.doc,new ju(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return w.type!==0&&(y=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),w.type!==1&&(g=g.add(w.doc),T=g.indexOf(w.doc.key)),{type:m9(w.type),doc:E,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$u._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=_p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((h=>{h._document!==null&&(n.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function m9(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(e){e=Sl(e,gi);const t=Sl(e.firestore,x0);return e9(jC(t),e._key).then((n=>E9(t,e,n)))}$u._jsonSchemaVersion="firestore/querySnapshot/1.0",$u._jsonSchema={type:ai("string",$u._jsonSchemaVersion),bundleSource:ai("string","QuerySnapshot"),bundleName:ai("string"),bundle:ai("string")};class p9 extends d9{constructor(t){super(),this.firestore=t}convertBytes(t){return new is(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new gi(this.firestore,null,n)}}function y9(e,t,n){e=Sl(e,gi);const r=Sl(e.firestore,x0),l=g9(e.converter,t);return JC(r,[l9(XC(r),"setDoc",e._key,l,e.converter!==null,n).toMutation(e._key,qs.none())])}function Ud(e,t,n,...r){e=Sl(e,gi);const l=Sl(e.firestore,x0),h=XC(l);let g;return g=typeof(t=Ti(t))=="string"||t instanceof w0?u9(h,"updateDoc",e._key,t,n,r):c9(h,"updateDoc",e._key,t),JC(l,[g.toMutation(e._key,qs.exists(!0))])}function JC(e,t){return(function(r,l){const h=new Ro;return r.asyncQueue.enqueueAndForget((async()=>z5(await $5(r),l,h))),h.promise})(jC(e),t)}function E9(e,t,n){const r=n.docs.get(t._key),l=new p9(e);return new xl(e,l,t._key,r,new ju(n.hasPendingWrites,n.fromCache),t.converter)}function A9(){return new Qp("serverTimestamp")}(function(t,n=!0){(function(l){jc=l})(Pl),Cs(new ss("firestore",((r,{instanceIdentifier:l,options:h})=>{const g=r.getProvider("app").getImmediate(),w=new x0(new nO(r.getProvider("auth-internal")),new sO(g,r.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Wt(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uh(y.options.projectId,T)})(g,l),g);return h={useFetchStreams:n,...h},w._setSettings(h),w}),"PUBLIC").setMultipleInstances(!0)),pr(Cx,bx,t),pr(Cx,bx,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebasestorage.googleapis.com",x9="storageBucket",w9=120*1e3,_9=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends as{constructor(t,n,r=0){super(Bg(t),`Firebase Storage: ${n} (${Bg(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ia.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Bg(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ea;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ea||(ea={}));function Bg(e){return"storage/"+e}function T9(){const e="An unknown error occurred, please check the error payload for server response.";return new ia(ea.UNKNOWN,e)}function v9(){return new ia(ea.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function C9(){return new ia(ea.CANCELED,"User canceled the upload/download.")}function b9(e){return new ia(ea.INVALID_URL,"Invalid URL '"+e+"'.")}function S9(e){return new ia(ea.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Aw(e){return new ia(ea.INVALID_ARGUMENT,e)}function tb(){return new ia(ea.APP_DELETED,"The Firebase app was deleted.")}function I9(e){return new ia(ea.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=_s.makeFromUrl(t,n)}catch{return new _s(t,"")}if(r.path==="")return r;throw S9(t)}static makeFromUrl(t,n){let r=null;const l="([A-Za-z0-9.\\-_]+)";function h(At){At.path.charAt(At.path.length-1)==="/"&&(At.path_=At.path_.slice(0,-1))}const g="(/(.*))?$",w=new RegExp("^gs://"+l+g,"i"),E={bucket:1,path:3};function y(At){At.path_=decodeURIComponent(At.path)}const T="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",k=new RegExp(`^https?://${S}/${T}/b/${l}/o${N}`,"i"),z={bucket:1,path:3},X=n===$C?"(?:storage.googleapis.com|storage.cloud.google.com)":n,G="([^?#]*)",it=new RegExp(`^https?://${X}/${l}/${G}`,"i"),K=[{regex:w,indices:E,postModify:h},{regex:k,indices:z,postModify:y},{regex:it,indices:{bucket:1,path:2},postModify:y}];for(let At=0;At<K.length;At++){const wt=K[At],Rt=wt.regex.exec(t);if(Rt){const H=Rt[wt.indices.bucket];let U=Rt[wt.indices.path];U||(U=""),r=new _s(H,U),wt.postModify(r);break}}if(r==null)throw b9(t);return r}}class R9{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(e,t,n){let r=1,l=null,h=null,g=!1,w=0;function E(){return w===2}let y=!1;function T(...G){y||(y=!0,t.apply(null,G))}function S(G){l=setTimeout(()=>{l=null,e(k,E())},G)}function N(){h&&clearTimeout(h)}function k(G,...it){if(y){N();return}if(G){N(),T.call(null,G,...it);return}if(E()||g){N(),T.call(null,G,...it);return}r<64&&(r*=2);let K;w===1?(w=2,K=0):K=(r+Math.random())*1e3,S(K)}let z=!1;function X(G){z||(z=!0,N(),!y&&(l!==null?(G||(w=2),clearTimeout(l),S(0)):G||(w=1)))}return S(0),h=setTimeout(()=>{g=!0,X(!0)},n),X}function D9(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(e){return e!==void 0}function xw(e,t,n,r){if(r<t)throw Aw(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Aw(`Invalid value for '${e}'. Expected ${n} or less.`)}function M9(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const l=t(r)+"="+t(e[r]);n=n+l+"&"}return n=n.slice(0,-1),n}var Fd;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Fd||(Fd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(e,t){const n=e>=500&&e<600,l=[408,429].indexOf(e)!==-1,h=t.indexOf(e)!==-1;return n||l||h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(t,n,r,l,h,g,w,E,y,T,S,N=!0,k=!1){this.url_=t,this.method_=n,this.headers_=r,this.body_=l,this.successCodes_=h,this.additionalRetryCodes_=g,this.callback_=w,this.errorCallback_=E,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=S,this.retry=N,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,X)=>{this.resolve_=z,this.reject_=X,this.start_()})}start_(){const t=(r,l)=>{if(l){r(!1,new Kf(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const g=w=>{const E=w.loaded,y=w.lengthComputable?w.total:-1;this.progressCallback_!==null&&this.progressCallback_(E,y)};this.progressCallback_!==null&&h.addUploadProgressListener(g),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(g),this.pendingConnection_=null;const w=h.getErrorCode()===Fd.NO_ERROR,E=h.getStatus();if(!w||P9(E,this.additionalRetryCodes_)&&this.retry){const T=h.getErrorCode()===Fd.ABORT;r(!1,new Kf(!1,null,T));return}const y=this.successCodes_.indexOf(E)!==-1;r(!0,new Kf(y,h))})},n=(r,l)=>{const h=this.resolve_,g=this.reject_,w=l.connection;if(l.wasSuccessCode)try{const E=this.callback_(w,w.getResponse());O9(E)?h(E):h()}catch(E){g(E)}else if(w!==null){const E=T9();E.serverResponse=w.getErrorText(),this.errorCallback_?g(this.errorCallback_(w,E)):g(E)}else if(l.canceled){const E=this.appDelete_?tb():C9();g(E)}else{const E=v9();g(E)}};this.canceled_?n(!1,new Kf(!1,null,!0)):this.backoffId_=N9(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&D9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kf{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function k9(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function B9(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function V9(e,t){t&&(e["X-Firebase-GMPID"]=t)}function U9(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function F9(e,t,n,r,l,h,g=!0,w=!1){const E=M9(e.urlParams),y=e.url+E,T=Object.assign({},e.headers);return V9(T,t),k9(T,n),B9(T,h),U9(T,r),new L9(y,e.method,T,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,l,g,w)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function H9(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(t,n){this._service=t,n instanceof _s?this._location=n:this._location=_s.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new zd(t,n)}get root(){const t=new _s(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H9(this._location.path)}get storage(){return this._service}get parent(){const t=z9(this._location.path);if(t===null)return null;const n=new _s(this._location.bucket,t);return new zd(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw I9(t)}}function ww(e,t){const n=t?.[x9];return n==null?null:_s.makeFromBucketSpec(n,e)}function j9(e,t,n,r={}){e.host=`${t}:${n}`;const l=Ol(t);l&&(ip(`https://${e.host}/b`),rp("Storage",!0)),e._isUsingEmulator=!0,e._protocol=l?"https":"http";const{mockUserToken:h}=r;h&&(e._overrideAuthToken=typeof h=="string"?h:yT(h,e.app.options.projectId))}class G9{constructor(t,n,r,l,h,g=!1){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=l,this._firebaseVersion=h,this._isUsingEmulator=g,this._bucket=null,this._host=$C,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=w9,this._maxUploadRetryTime=_9,this._requests=new Set,l!=null?this._bucket=_s.makeFromBucketSpec(l,this._host):this._bucket=ww(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=_s.makeFromBucketSpec(this._url,t):this._bucket=ww(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){xw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){xw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new zd(this,t)}_makeRequest(t,n,r,l,h=!0){if(this._deleted)return new R9(tb());{const g=F9(t,this._appId,r,l,n,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(g),g.getPromise().then(()=>this._requests.delete(g),()=>this._requests.delete(g)),g}}async makeRequestWithTokens(t,n){const[r,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,l).getPromise()}}const _w="@firebase/storage",Tw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="storage";function q9(e=n0(),t){e=Ti(e);const r=zo(e,eb).getImmediate({identifier:t}),l=gT("storage");return l&&X9(r,...l),r}function X9(e,t,n,r={}){j9(e,t,n,r)}function Y9(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return new G9(n,r,l,t,Pl)}function K9(){Cs(new ss(eb,Y9,"PUBLIC").setMultipleInstances(!0)),pr(_w,Tw,""),pr(_w,Tw,"esm2020")}K9();const W9={apiKey:"AIzaSyCLL-yZ9m6vgZ04Yj0x-wDjtxkJOzCiEMc",authDomain:"basecamp-app-e6386.firebaseapp.com",projectId:"basecamp-app-e6386",storageBucket:"basecamp-app-e6386.firebasestorage.app",messagingSenderId:"929651436196",appId:"1:929651436196:web:790b5001a09d8db991d431",measurementId:"G-L0L3JE5SCM"},C0=vT(W9);Q6(C0);const hd=JD(C0),Do=i9(C0);q9(C0);const nb=st.createContext(),Q9=({children:e})=>{const[t,n]=st.useState(null),[r,l]=st.useState(null);return st.useEffect(()=>{const h=gv(hd,async g=>{if(g){n(g);const w=No(Do,"profiles",g.uid),E=await Vd(w);E.exists()?l(E.data()):l(null)}else n(null),l(null)});return()=>h()},[]),Tt.jsx(nb.Provider,{value:{user:t,setUser:n,profile:r,setProfile:l},children:e})},ib=()=>st.useContext(nb);function Z9({lang:e}){const{user:t,profile:n,setProfile:r}=ib(),g=e==="zh"?[{id:1,text:"找同事喝咖啡(掃描QRCODE以完成任務)",point:10},{id:2,text:"和同事吃午餐(掃描QRCODE以完成任務)",point:10},{id:3,text:"共用辦公設備",point:10},{id:4,text:"一起參加公司活動",point:20},{id:5,text:"認識實習生(掃描QRCODE以完成任務)連結gmail",point:20},{id:6,text:"分享工作經驗",point:15},{id:7,text:"參與團隊會議並提出建議",point:15},{id:8,text:"組織團隊建設活動",point:25},{id:9,text:"參加公司志願者活動",point:30},{id:10,text:"推薦優秀人才加入公司",point:50},{id:11,text:"與同事合作完成專案",point:40},{id:12,text:"參加跨部門合作",point:35},{id:13,text:"完成編輯個人檔案",point:15}]:[{id:1,text:"Have coffee with colleagues",point:10},{id:2,text:"Have lunch together",point:10},{id:3,text:"Share office equipment",point:10},{id:4,text:"Participate in company events",point:20},{id:5,text:"Get to know interns",point:20},{id:6,text:"Share work experience",point:15},{id:7,text:"Attend team meetings and provide suggestions",point:15},{id:8,text:"Organize team-building activities",point:25},{id:9,text:"Join company volunteer activities",point:30},{id:10,text:"Refer talented individuals to join the company",point:50},{id:11,text:"Collaborate with colleagues to complete projects",point:40},{id:12,text:"Participate in cross-departmental collaboration",point:35},{id:13,text:"Complete and edit personal profile",point:15}],[w,E]=st.useState(n?.completedIds||[]),[y,T]=st.useState("tasks");st.useEffect(()=>{E(n?.completedIds||[])},[n]);const S=async N=>{if(!t||!n||w.includes(N.id))return;const k=(n.scores||0)+N.point,z=[...w,N.id],X=No(Do,"profiles",t.uid);await Ud(X,{scores:k,completedIds:z}),r({...n,scores:k,completedIds:z}),E(z)};return Tt.jsxs("div",{className:"page-container",style:{textAlign:"center"},children:[Tt.jsx("h2",{children:e==="zh"?"社交任務":"Social Tasks"}),Tt.jsx("p",{children:e==="zh"?"完成與同梯互動的任務":"Complete social tasks with colleagues"}),Tt.jsxs("div",{style:{marginBottom:"20px"},children:[Tt.jsx("button",{onClick:()=>T("tasks"),style:{marginRight:"10px",backgroundColor:y==="tasks"?"#4caf50":"#eee",color:y==="tasks"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:e==="zh"?"任務列表":"Task List"}),Tt.jsx("button",{onClick:()=>T("completed"),style:{backgroundColor:y==="completed"?"#4caf50":"#eee",color:y==="completed"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:"6px",cursor:"pointer"},children:e==="zh"?"已完成任務":"Completed Tasks"})]}),y==="completed"&&Tt.jsx(FA,{tasks:g.filter(N=>w.includes(N.id)),completedIds:w,onComplete:()=>{},lang:e}),y==="tasks"&&Tt.jsx(FA,{tasks:g.filter(N=>!w.includes(N.id)),completedIds:w,onComplete:S,lang:e})]})}const rb=st.createContext({});function J9(e){const t=st.useRef(null);return t.current===null&&(t.current=e()),t.current}const $p=typeof window<"u",$9=$p?st.useLayoutEffect:st.useEffect,ty=st.createContext(null);function ey(e,t){e.indexOf(t)===-1&&e.push(t)}function ny(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const za=(e,t,n)=>n>t?t:n<e?e:n;let iy=()=>{};const Ha={},sb=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function ab(e){return typeof e=="object"&&e!==null}const ob=e=>/^0[^.\s]+$/u.test(e);function ry(e){let t;return()=>(t===void 0&&(t=e()),t)}const rs=e=>e,t7=(e,t)=>n=>t(e(n)),Ph=(...e)=>e.reduce(t7),ph=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class sy{constructor(){this.subscriptions=[]}add(t){return ey(this.subscriptions,t),()=>ny(this.subscriptions,t)}notify(t,n,r){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,n,r);else for(let h=0;h<l;h++){const g=this.subscriptions[h];g&&g(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ws=e=>e*1e3,Qs=e=>e/1e3;function lb(e,t){return t?e*(1e3/t):0}const cb=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,e7=1e-7,n7=12;function i7(e,t,n,r,l){let h,g,w=0;do g=t+(n-t)/2,h=cb(g,r,l)-e,h>0?n=g:t=g;while(Math.abs(h)>e7&&++w<n7);return g}function Lh(e,t,n,r){if(e===t&&n===r)return rs;const l=h=>i7(h,0,1,e,n);return h=>h===0||h===1?h:cb(l(h),t,r)}const ub=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,hb=e=>t=>1-e(1-t),fb=Lh(.33,1.53,.69,.99),ay=hb(fb),db=ub(ay),gb=e=>(e*=2)<1?.5*ay(e):.5*(2-Math.pow(2,-10*(e-1))),oy=e=>1-Math.sin(Math.acos(e)),mb=hb(oy),pb=ub(oy),r7=Lh(.42,0,1,1),s7=Lh(0,0,.58,1),yb=Lh(.42,0,.58,1),a7=e=>Array.isArray(e)&&typeof e[0]!="number",Eb=e=>Array.isArray(e)&&typeof e[0]=="number",o7={linear:rs,easeIn:r7,easeInOut:yb,easeOut:s7,circIn:oy,circInOut:pb,circOut:mb,backIn:ay,backInOut:db,backOut:fb,anticipate:gb},l7=e=>typeof e=="string",vw=e=>{if(Eb(e)){iy(e.length===4);const[t,n,r,l]=e;return Lh(t,n,r,l)}else if(l7(e))return o7[e];return e},Wf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function c7(e,t){let n=new Set,r=new Set,l=!1,h=!1;const g=new WeakSet;let w={delta:0,timestamp:0,isProcessing:!1};function E(T){g.has(T)&&(y.schedule(T),e()),T(w)}const y={schedule:(T,S=!1,N=!1)=>{const z=N&&l?n:r;return S&&g.add(T),z.has(T)||z.add(T),T},cancel:T=>{r.delete(T),g.delete(T)},process:T=>{if(w=T,l){h=!0;return}l=!0,[n,r]=[r,n],n.forEach(E),n.clear(),l=!1,h&&(h=!1,y.process(T))}};return y}const u7=40;function Ab(e,t){let n=!1,r=!0;const l={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,g=Wf.reduce((K,At)=>(K[At]=c7(h),K),{}),{setup:w,read:E,resolveKeyframes:y,preUpdate:T,update:S,preRender:N,render:k,postRender:z}=g,X=()=>{const K=Ha.useManualTiming?l.timestamp:performance.now();n=!1,Ha.useManualTiming||(l.delta=r?1e3/60:Math.max(Math.min(K-l.timestamp,u7),1)),l.timestamp=K,l.isProcessing=!0,w.process(l),E.process(l),y.process(l),T.process(l),S.process(l),N.process(l),k.process(l),z.process(l),l.isProcessing=!1,n&&t&&(r=!1,e(X))},G=()=>{n=!0,r=!0,l.isProcessing||e(X)};return{schedule:Wf.reduce((K,At)=>{const wt=g[At];return K[At]=(Rt,H=!1,U=!1)=>(n||G(),wt.schedule(Rt,H,U)),K},{}),cancel:K=>{for(let At=0;At<Wf.length;At++)g[Wf[At]].cancel(K)},state:l,steps:g}}const{schedule:bn,cancel:Uo,state:Oi,steps:Vg}=Ab(typeof requestAnimationFrame<"u"?requestAnimationFrame:rs,!0);let fd;function h7(){fd=void 0}const mr={now:()=>(fd===void 0&&mr.set(Oi.isProcessing||Ha.useManualTiming?Oi.timestamp:performance.now()),fd),set:e=>{fd=e,queueMicrotask(h7)}},xb=e=>t=>typeof t=="string"&&t.startsWith(e),ly=xb("--"),f7=xb("var(--"),cy=e=>f7(e)?d7.test(e.split("/*")[0].trim()):!1,d7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},yh={...Yc,transform:e=>za(0,1,e)},Qf={...Yc,default:1},th=e=>Math.round(e*1e5)/1e5,uy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function g7(e){return e==null}const m7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hy=(e,t)=>n=>!!(typeof n=="string"&&m7.test(n)&&n.startsWith(e)||t&&!g7(n)&&Object.prototype.hasOwnProperty.call(n,t)),wb=(e,t,n)=>r=>{if(typeof r!="string")return r;const[l,h,g,w]=r.match(uy);return{[e]:parseFloat(l),[t]:parseFloat(h),[n]:parseFloat(g),alpha:w!==void 0?parseFloat(w):1}},p7=e=>za(0,255,e),Ug={...Yc,transform:e=>Math.round(p7(e))},yl={test:hy("rgb","red"),parse:wb("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ug.transform(e)+", "+Ug.transform(t)+", "+Ug.transform(n)+", "+th(yh.transform(r))+")"};function y7(e){let t="",n="",r="",l="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),l=e.substring(4,5),t+=t,n+=n,r+=r,l+=l),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:l?parseInt(l,16)/255:1}}const Sm={test:hy("#"),parse:y7,transform:yl.transform},kh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wo=kh("deg"),Zs=kh("%"),le=kh("px"),E7=kh("vh"),A7=kh("vw"),Cw={...Zs,parse:e=>Zs.parse(e)/100,transform:e=>Zs.transform(e*100)},xc={test:hy("hsl","hue"),parse:wb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Zs.transform(th(t))+", "+Zs.transform(th(n))+", "+th(yh.transform(r))+")"},si={test:e=>yl.test(e)||Sm.test(e)||xc.test(e),parse:e=>yl.test(e)?yl.parse(e):xc.test(e)?xc.parse(e):Sm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?yl.transform(e):xc.transform(e),getAnimatableNone:e=>{const t=si.parse(e);return t.alpha=0,si.transform(t)}},x7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function w7(e){return isNaN(e)&&typeof e=="string"&&(e.match(uy)?.length||0)+(e.match(x7)?.length||0)>0}const _b="number",Tb="color",_7="var",T7="var(",bw="${}",v7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Eh(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},l=[];let h=0;const w=t.replace(v7,E=>(si.test(E)?(r.color.push(h),l.push(Tb),n.push(si.parse(E))):E.startsWith(T7)?(r.var.push(h),l.push(_7),n.push(E)):(r.number.push(h),l.push(_b),n.push(parseFloat(E))),++h,bw)).split(bw);return{values:n,split:w,indexes:r,types:l}}function vb(e){return Eh(e).values}function Cb(e){const{split:t,types:n}=Eh(e),r=t.length;return l=>{let h="";for(let g=0;g<r;g++)if(h+=t[g],l[g]!==void 0){const w=n[g];w===_b?h+=th(l[g]):w===Tb?h+=si.transform(l[g]):h+=l[g]}return h}}const C7=e=>typeof e=="number"?0:si.test(e)?si.getAnimatableNone(e):e;function b7(e){const t=vb(e);return Cb(e)(t.map(C7))}const Fo={test:w7,parse:vb,createTransformer:Cb,getAnimatableNone:b7};function Fg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function S7({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let l=0,h=0,g=0;if(!t)l=h=g=n;else{const w=n<.5?n*(1+t):n+t-n*t,E=2*n-w;l=Fg(E,w,e+1/3),h=Fg(E,w,e),g=Fg(E,w,e-1/3)}return{red:Math.round(l*255),green:Math.round(h*255),blue:Math.round(g*255),alpha:r}}function Hd(e,t){return n=>n>0?t:e}const Mn=(e,t,n)=>e+(t-e)*n,zg=(e,t,n)=>{const r=e*e,l=n*(t*t-r)+r;return l<0?0:Math.sqrt(l)},I7=[Sm,yl,xc],R7=e=>I7.find(t=>t.test(e));function Sw(e){const t=R7(e);if(!t)return!1;let n=t.parse(e);return t===xc&&(n=S7(n)),n}const Iw=(e,t)=>{const n=Sw(e),r=Sw(t);if(!n||!r)return Hd(e,t);const l={...n};return h=>(l.red=zg(n.red,r.red,h),l.green=zg(n.green,r.green,h),l.blue=zg(n.blue,r.blue,h),l.alpha=Mn(n.alpha,r.alpha,h),yl.transform(l))},Im=new Set(["none","hidden"]);function N7(e,t){return Im.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function D7(e,t){return n=>Mn(e,t,n)}function fy(e){return typeof e=="number"?D7:typeof e=="string"?cy(e)?Hd:si.test(e)?Iw:P7:Array.isArray(e)?bb:typeof e=="object"?si.test(e)?Iw:O7:Hd}function bb(e,t){const n=[...e],r=n.length,l=e.map((h,g)=>fy(h)(h,t[g]));return h=>{for(let g=0;g<r;g++)n[g]=l[g](h);return n}}function O7(e,t){const n={...e,...t},r={};for(const l in n)e[l]!==void 0&&t[l]!==void 0&&(r[l]=fy(e[l])(e[l],t[l]));return l=>{for(const h in r)n[h]=r[h](l);return n}}function M7(e,t){const n=[],r={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const h=t.types[l],g=e.indexes[h][r[h]],w=e.values[g]??0;n[l]=w,r[h]++}return n}const P7=(e,t)=>{const n=Fo.createTransformer(t),r=Eh(e),l=Eh(t);return r.indexes.var.length===l.indexes.var.length&&r.indexes.color.length===l.indexes.color.length&&r.indexes.number.length>=l.indexes.number.length?Im.has(e)&&!l.values.length||Im.has(t)&&!r.values.length?N7(e,t):Ph(bb(M7(r,l),l.values),n):Hd(e,t)};function Sb(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Mn(e,t,n):fy(e)(e,t)}const L7=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>bn.update(t,n),stop:()=>Uo(t),now:()=>Oi.isProcessing?Oi.timestamp:mr.now()}},Ib=(e,t,n=10)=>{let r="";const l=Math.max(Math.round(t/n),2);for(let h=0;h<l;h++)r+=Math.round(e(h/(l-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},jd=2e4;function dy(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<jd;)t+=n,r=e.next(t);return t>=jd?1/0:t}function k7(e,t=100,n){const r=n({...e,keyframes:[0,t]}),l=Math.min(dy(r),jd);return{type:"keyframes",ease:h=>r.next(l*h).value/t,duration:Qs(l)}}const B7=5;function Rb(e,t,n){const r=Math.max(t-B7,0);return lb(n-e(r),t-r)}const Gn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hg=.001;function V7({duration:e=Gn.duration,bounce:t=Gn.bounce,velocity:n=Gn.velocity,mass:r=Gn.mass}){let l,h,g=1-t;g=za(Gn.minDamping,Gn.maxDamping,g),e=za(Gn.minDuration,Gn.maxDuration,Qs(e)),g<1?(l=y=>{const T=y*g,S=T*e,N=T-n,k=Rm(y,g),z=Math.exp(-S);return Hg-N/k*z},h=y=>{const S=y*g*e,N=S*n+n,k=Math.pow(g,2)*Math.pow(y,2)*e,z=Math.exp(-S),X=Rm(Math.pow(y,2),g);return(-l(y)+Hg>0?-1:1)*((N-k)*z)/X}):(l=y=>{const T=Math.exp(-y*e),S=(y-n)*e+1;return-Hg+T*S},h=y=>{const T=Math.exp(-y*e),S=(n-y)*(e*e);return T*S});const w=5/e,E=F7(l,h,w);if(e=Ws(e),isNaN(E))return{stiffness:Gn.stiffness,damping:Gn.damping,duration:e};{const y=Math.pow(E,2)*r;return{stiffness:y,damping:g*2*Math.sqrt(r*y),duration:e}}}const U7=12;function F7(e,t,n){let r=n;for(let l=1;l<U7;l++)r=r-e(r)/t(r);return r}function Rm(e,t){return e*Math.sqrt(1-t*t)}const z7=["duration","bounce"],H7=["stiffness","damping","mass"];function Rw(e,t){return t.some(n=>e[n]!==void 0)}function j7(e){let t={velocity:Gn.velocity,stiffness:Gn.stiffness,damping:Gn.damping,mass:Gn.mass,isResolvedFromDuration:!1,...e};if(!Rw(e,H7)&&Rw(e,z7))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),l=r*r,h=2*za(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:Gn.mass,stiffness:l,damping:h}}else{const n=V7(e);t={...t,...n,mass:Gn.mass},t.isResolvedFromDuration=!0}return t}function Gd(e=Gn.visualDuration,t=Gn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:l}=n;const h=n.keyframes[0],g=n.keyframes[n.keyframes.length-1],w={done:!1,value:h},{stiffness:E,damping:y,mass:T,duration:S,velocity:N,isResolvedFromDuration:k}=j7({...n,velocity:-Qs(n.velocity||0)}),z=N||0,X=y/(2*Math.sqrt(E*T)),G=g-h,it=Qs(Math.sqrt(E/T)),nt=Math.abs(G)<5;r||(r=nt?Gn.restSpeed.granular:Gn.restSpeed.default),l||(l=nt?Gn.restDelta.granular:Gn.restDelta.default);let K;if(X<1){const wt=Rm(it,X);K=Rt=>{const H=Math.exp(-X*it*Rt);return g-H*((z+X*it*G)/wt*Math.sin(wt*Rt)+G*Math.cos(wt*Rt))}}else if(X===1)K=wt=>g-Math.exp(-it*wt)*(G+(z+it*G)*wt);else{const wt=it*Math.sqrt(X*X-1);K=Rt=>{const H=Math.exp(-X*it*Rt),U=Math.min(wt*Rt,300);return g-H*((z+X*it*G)*Math.sinh(U)+wt*G*Math.cosh(U))/wt}}const At={calculatedDuration:k&&S||null,next:wt=>{const Rt=K(wt);if(k)w.done=wt>=S;else{let H=wt===0?z:0;X<1&&(H=wt===0?Ws(z):Rb(K,wt,Rt));const U=Math.abs(H)<=r,V=Math.abs(g-Rt)<=l;w.done=U&&V}return w.value=w.done?g:Rt,w},toString:()=>{const wt=Math.min(dy(At),jd),Rt=Ib(H=>At.next(wt*H).value,wt,30);return wt+"ms "+Rt},toTransition:()=>{}};return At}Gd.applyToOptions=e=>{const t=k7(e,100,Gd);return e.ease=t.ease,e.duration=Ws(t.duration),e.type="keyframes",e};function Nm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:l=10,bounceStiffness:h=500,modifyTarget:g,min:w,max:E,restDelta:y=.5,restSpeed:T}){const S=e[0],N={done:!1,value:S},k=U=>w!==void 0&&U<w||E!==void 0&&U>E,z=U=>w===void 0?E:E===void 0||Math.abs(w-U)<Math.abs(E-U)?w:E;let X=n*t;const G=S+X,it=g===void 0?G:g(G);it!==G&&(X=it-S);const nt=U=>-X*Math.exp(-U/r),K=U=>it+nt(U),At=U=>{const V=nt(U),tt=K(U);N.done=Math.abs(V)<=y,N.value=N.done?it:tt};let wt,Rt;const H=U=>{k(N.value)&&(wt=U,Rt=Gd({keyframes:[N.value,z(N.value)],velocity:Rb(K,U,N.value),damping:l,stiffness:h,restDelta:y,restSpeed:T}))};return H(0),{calculatedDuration:null,next:U=>{let V=!1;return!Rt&&wt===void 0&&(V=!0,At(U),H(U)),wt!==void 0&&U>=wt?Rt.next(U-wt):(!V&&At(U),N)}}}function G7(e,t,n){const r=[],l=n||Ha.mix||Sb,h=e.length-1;for(let g=0;g<h;g++){let w=l(e[g],e[g+1]);if(t){const E=Array.isArray(t)?t[g]||rs:t;w=Ph(E,w)}r.push(w)}return r}function q7(e,t,{clamp:n=!0,ease:r,mixer:l}={}){const h=e.length;if(iy(h===t.length),h===1)return()=>t[0];if(h===2&&t[0]===t[1])return()=>t[1];const g=e[0]===e[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const w=G7(t,r,l),E=w.length,y=T=>{if(g&&T<e[0])return t[0];let S=0;if(E>1)for(;S<e.length-2&&!(T<e[S+1]);S++);const N=ph(e[S],e[S+1],T);return w[S](N)};return n?T=>y(za(e[0],e[h-1],T)):y}function X7(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const l=ph(0,t,r);e.push(Mn(n,1,l))}}function Y7(e){const t=[0];return X7(t,e.length-1),t}function K7(e,t){return e.map(n=>n*t)}function W7(e,t){return e.map(()=>t||yb).splice(0,e.length-1)}function eh({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const l=a7(r)?r.map(vw):vw(r),h={done:!1,value:t[0]},g=K7(n&&n.length===t.length?n:Y7(t),e),w=q7(g,t,{ease:Array.isArray(l)?l:W7(t,l)});return{calculatedDuration:e,next:E=>(h.value=w(E),h.done=E>=e,h)}}const Q7=e=>e!==null;function gy(e,{repeat:t,repeatType:n="loop"},r,l=1){const h=e.filter(Q7),w=l<0||t&&n!=="loop"&&t%2===1?0:h.length-1;return!w||r===void 0?h[w]:r}const Z7={decay:Nm,inertia:Nm,tween:eh,keyframes:eh,spring:Gd};function Nb(e){typeof e.type=="string"&&(e.type=Z7[e.type])}class my{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const J7=e=>e/100;class py extends my{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==mr.now()&&this.tick(mr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Nb(t);const{type:n=eh,repeat:r=0,repeatDelay:l=0,repeatType:h,velocity:g=0}=t;let{keyframes:w}=t;const E=n||eh;E!==eh&&typeof w[0]!="number"&&(this.mixKeyframes=Ph(J7,Sb(w[0],w[1])),w=[0,100]);const y=E({...t,keyframes:w});h==="mirror"&&(this.mirroredGenerator=E({...t,keyframes:[...w].reverse(),velocity:-g})),y.calculatedDuration===null&&(y.calculatedDuration=dy(y));const{calculatedDuration:T}=y;this.calculatedDuration=T,this.resolvedDuration=T+l,this.totalDuration=this.resolvedDuration*(r+1)-l,this.generator=y}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:l,mixKeyframes:h,mirroredGenerator:g,resolvedDuration:w,calculatedDuration:E}=this;if(this.startTime===null)return r.next(0);const{delay:y=0,keyframes:T,repeat:S,repeatType:N,repeatDelay:k,type:z,onUpdate:X,finalKeyframe:G}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const it=this.currentTime-y*(this.playbackSpeed>=0?1:-1),nt=this.playbackSpeed>=0?it<0:it>l;this.currentTime=Math.max(it,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let K=this.currentTime,At=r;if(S){const U=Math.min(this.currentTime,l)/w;let V=Math.floor(U),tt=U%1;!tt&&U>=1&&(tt=1),tt===1&&V--,V=Math.min(V,S+1),!!(V%2)&&(N==="reverse"?(tt=1-tt,k&&(tt-=k/w)):N==="mirror"&&(At=g)),K=za(0,1,tt)*w}const wt=nt?{done:!1,value:T[0]}:At.next(K);h&&(wt.value=h(wt.value));let{done:Rt}=wt;!nt&&E!==null&&(Rt=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Rt);return H&&z!==Nm&&(wt.value=gy(T,this.options,G,this.speed)),X&&X(wt.value),H&&this.finish(),wt}then(t,n){return this.finished.then(t,n)}get duration(){return Qs(this.calculatedDuration)}get time(){return Qs(this.currentTime)}set time(t){t=Ws(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(mr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Qs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=L7,startTime:n}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function $7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const El=e=>e*180/Math.PI,Dm=e=>{const t=El(Math.atan2(e[1],e[0]));return Om(t)},tP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Dm,rotateZ:Dm,skewX:e=>El(Math.atan(e[1])),skewY:e=>El(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Om=e=>(e=e%360,e<0&&(e+=360),e),Nw=Dm,Dw=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ow=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),eP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Dw,scaleY:Ow,scale:e=>(Dw(e)+Ow(e))/2,rotateX:e=>Om(El(Math.atan2(e[6],e[5]))),rotateY:e=>Om(El(Math.atan2(-e[2],e[0]))),rotateZ:Nw,rotate:Nw,skewX:e=>El(Math.atan(e[4])),skewY:e=>El(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Mm(e){return e.includes("scale")?1:0}function Pm(e,t){if(!e||e==="none")return Mm(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,l;if(n)r=eP,l=n;else{const w=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tP,l=w}if(!l)return Mm(t);const h=r[t],g=l[1].split(",").map(iP);return typeof h=="function"?h(g):g[h]}const nP=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Pm(n,t)};function iP(e){return parseFloat(e.trim())}const Kc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wc=new Set(Kc),Mw=e=>e===Yc||e===le,rP=new Set(["x","y","z"]),sP=Kc.filter(e=>!rP.has(e));function aP(e){const t=[];return sP.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const wl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Pm(t,"x"),y:(e,{transform:t})=>Pm(t,"y")};wl.translateX=wl.x;wl.translateY=wl.y;const _l=new Set;let Lm=!1,km=!1,Bm=!1;function Db(){if(km){const e=Array.from(_l).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const l=aP(r);l.length&&(n.set(r,l),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const l=n.get(r);l&&l.forEach(([h,g])=>{r.getValue(h)?.set(g)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}km=!1,Lm=!1,_l.forEach(e=>e.complete(Bm)),_l.clear()}function Ob(){_l.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(km=!0)})}function oP(){Bm=!0,Ob(),Db(),Bm=!1}class yy{constructor(t,n,r,l,h,g=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=l,this.element=h,this.isAsync=g}scheduleResolve(){this.state="scheduled",this.isAsync?(_l.add(this),Lm||(Lm=!0,bn.read(Ob),bn.resolveKeyframes(Db))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:l}=this;if(t[0]===null){const h=l?.get(),g=t[t.length-1];if(h!==void 0)t[0]=h;else if(r&&n){const w=r.readValue(n,g);w!=null&&(t[0]=w)}t[0]===void 0&&(t[0]=g),l&&h===void 0&&l.set(t[0])}$7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),_l.delete(this)}cancel(){this.state==="scheduled"&&(_l.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lP=e=>e.startsWith("--");function cP(e,t,n){lP(t)?e.style.setProperty(t,n):e.style[t]=n}const uP=ry(()=>window.ScrollTimeline!==void 0),hP={};function fP(e,t){const n=ry(e);return()=>hP[t]??n()}const Mb=fP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Pw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gu([0,.65,.55,1]),circOut:Gu([.55,0,1,.45]),backIn:Gu([.31,.01,.66,-.59]),backOut:Gu([.33,1.53,.69,.99])};function Pb(e,t){if(e)return typeof e=="function"?Mb()?Ib(e,t):"ease-out":Eb(e)?Gu(e):Array.isArray(e)?e.map(n=>Pb(n,t)||Pw.easeOut):Pw[e]}function dP(e,t,n,{delay:r=0,duration:l=300,repeat:h=0,repeatType:g="loop",ease:w="easeOut",times:E}={},y=void 0){const T={[t]:n};E&&(T.offset=E);const S=Pb(w,l);Array.isArray(S)&&(T.easing=S);const N={delay:r,duration:l,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:h+1,direction:g==="reverse"?"alternate":"normal"};return y&&(N.pseudoElement=y),e.animate(T,N)}function Lb(e){return typeof e=="function"&&"applyToOptions"in e}function gP({type:e,...t}){return Lb(e)&&Mb()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class mP extends my{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:l,pseudoElement:h,allowFlatten:g=!1,finalKeyframe:w,onComplete:E}=t;this.isPseudoElement=!!h,this.allowFlatten=g,this.options=t,iy(typeof t.type!="string");const y=gP(t);this.animation=dP(n,r,l,y,h),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!h){const T=gy(l,this.options,w,this.speed);this.updateMotionValue?this.updateMotionValue(T):cP(n,r,T),this.animation.cancel()}E?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Qs(Number(t))}get time(){return Qs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ws(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&uP()?(this.animation.timeline=t,rs):n(this)}}const kb={anticipate:gb,backInOut:db,circInOut:pb};function pP(e){return e in kb}function yP(e){typeof e.ease=="string"&&pP(e.ease)&&(e.ease=kb[e.ease])}const Lw=10;class EP extends mP{constructor(t){yP(t),Nb(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:l,element:h,...g}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const w=new py({...g,autoplay:!1}),E=Ws(this.finishedTime??this.time);n.setWithVelocity(w.sample(E-Lw).value,w.sample(E).value,Lw),w.stop()}}const kw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fo.test(e)||e==="0")&&!e.startsWith("url("));function AP(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function xP(e,t,n,r){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const h=e[e.length-1],g=kw(l,t),w=kw(h,t);return!g||!w?!1:AP(e)||(n==="spring"||Lb(n))&&r}function Vm(e){e.duration=0,e.type}const wP=new Set(["opacity","clipPath","filter","transform"]),_P=ry(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function TP(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:l,damping:h,type:g}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:E,transformTemplate:y}=t.owner.getProps();return _P()&&n&&wP.has(n)&&(n!=="transform"||!y)&&!E&&!r&&l!=="mirror"&&h!==0&&g!=="inertia"}const vP=40;class CP extends my{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:l=0,repeatDelay:h=0,repeatType:g="loop",keyframes:w,name:E,motionValue:y,element:T,...S}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mr.now();const N={autoplay:t,delay:n,type:r,repeat:l,repeatDelay:h,repeatType:g,name:E,motionValue:y,element:T,...S},k=T?.KeyframeResolver||yy;this.keyframeResolver=new k(w,(z,X,G)=>this.onKeyframesResolved(z,X,N,!G),E,y,T),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,l){this.keyframeResolver=void 0;const{name:h,type:g,velocity:w,delay:E,isHandoff:y,onUpdate:T}=r;this.resolvedAt=mr.now(),xP(t,h,g,w)||((Ha.instantAnimations||!E)&&T?.(gy(t,r,n)),t[0]=t[t.length-1],Vm(r),r.repeat=0);const N={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>vP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},k=!y&&TP(N)?new EP({...N,element:N.motionValue.owner.current}):new py(N);k.finished.then(()=>this.notifyFinished()).catch(rs),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),oP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const bP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SP(e){const t=bP.exec(e);if(!t)return[,];const[,n,r,l]=t;return[`--${n??r}`,l]}function Bb(e,t,n=1){const[r,l]=SP(e);if(!r)return;const h=window.getComputedStyle(t).getPropertyValue(r);if(h){const g=h.trim();return sb(g)?parseFloat(g):g}return cy(l)?Bb(l,t,n+1):l}function Ey(e,t){return e?.[t]??e?.default??e}const Vb=new Set(["width","height","top","left","right","bottom",...Kc]),IP={test:e=>e==="auto",parse:e=>e},Ub=e=>t=>t.test(e),Fb=[Yc,le,Zs,wo,A7,E7,IP],Bw=e=>Fb.find(Ub(e));function RP(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ob(e):!0}const NP=new Set(["brightness","contrast","saturate","opacity"]);function DP(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(uy)||[];if(!r)return e;const l=n.replace(r,"");let h=NP.has(t)?1:0;return r!==n&&(h*=100),t+"("+h+l+")"}const OP=/\b([a-z-]*)\(.*?\)/gu,Um={...Fo,getAnimatableNone:e=>{const t=e.match(OP);return t?t.map(DP).join(" "):e}},Vw={...Yc,transform:Math.round},MP={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:Qf,scaleX:Qf,scaleY:Qf,scaleZ:Qf,skew:wo,skewX:wo,skewY:wo,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:yh,originX:Cw,originY:Cw,originZ:le},Ay={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...MP,zIndex:Vw,fillOpacity:yh,strokeOpacity:yh,numOctaves:Vw},PP={...Ay,color:si,backgroundColor:si,outlineColor:si,fill:si,stroke:si,borderColor:si,borderTopColor:si,borderRightColor:si,borderBottomColor:si,borderLeftColor:si,filter:Um,WebkitFilter:Um},zb=e=>PP[e];function Hb(e,t){let n=zb(e);return n!==Um&&(n=Fo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const LP=new Set(["auto","none","0"]);function kP(e,t,n){let r=0,l;for(;r<e.length&&!l;){const h=e[r];typeof h=="string"&&!LP.has(h)&&Eh(h).values.length&&(l=e[r]),r++}if(l&&n)for(const h of t)e[h]=Hb(n,l)}class BP extends yy{constructor(t,n,r,l,h){super(t,n,r,l,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let E=0;E<t.length;E++){let y=t[E];if(typeof y=="string"&&(y=y.trim(),cy(y))){const T=Bb(y,n.current);T!==void 0&&(t[E]=T),E===t.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!Vb.has(r)||t.length!==2)return;const[l,h]=t,g=Bw(l),w=Bw(h);if(g!==w)if(Mw(g)&&Mw(w))for(let E=0;E<t.length;E++){const y=t[E];typeof y=="string"&&(t[E]=parseFloat(y))}else wl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let l=0;l<t.length;l++)(t[l]===null||RP(t[l]))&&r.push(l);r.length&&kP(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&t.getValue(r,l).jump(l,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const l=t.getValue(n);l&&l.jump(this.measuredOrigin,!1);const h=r.length-1,g=r[h];r[h]=wl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),this.removedTransforms?.length&&this.removedTransforms.forEach(([w,E])=>{t.getValue(w).set(E)}),this.resolveNoneKeyframes()}}function VP(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const l=n?.[e]??r.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const jb=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function UP(e){return ab(e)&&"offsetHeight"in e}const Uw=30,FP=e=>!isNaN(parseFloat(e));class zP{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const l=mr.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=mr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=FP(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new sy);const r=this.events[t].add(n);return t==="change"?()=>{r(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Uw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Uw);return lb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uc(e,t){return new zP(e,t)}const{schedule:xy}=Ab(queueMicrotask,!1),xs={x:!1,y:!1};function Gb(){return xs.x||xs.y}function HP(e){return e==="x"||e==="y"?xs[e]?null:(xs[e]=!0,()=>{xs[e]=!1}):xs.x||xs.y?null:(xs.x=xs.y=!0,()=>{xs.x=xs.y=!1})}function qb(e,t){const n=VP(e),r=new AbortController,l={passive:!0,...t,signal:r.signal};return[n,l,()=>r.abort()]}function Fw(e){return!(e.pointerType==="touch"||Gb())}function jP(e,t,n={}){const[r,l,h]=qb(e,n),g=w=>{if(!Fw(w))return;const{target:E}=w,y=t(E,w);if(typeof y!="function"||!E)return;const T=S=>{Fw(S)&&(y(S),E.removeEventListener("pointerleave",T))};E.addEventListener("pointerleave",T,l)};return r.forEach(w=>{w.addEventListener("pointerenter",g,l)}),h}const Xb=(e,t)=>t?e===t?!0:Xb(e,t.parentElement):!1,wy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,GP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qP(e){return GP.has(e.tagName)||e.tabIndex!==-1}const dd=new WeakSet;function zw(e){return t=>{t.key==="Enter"&&e(t)}}function jg(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const XP=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=zw(()=>{if(dd.has(n))return;jg(n,"down");const l=zw(()=>{jg(n,"up")}),h=()=>jg(n,"cancel");n.addEventListener("keyup",l,t),n.addEventListener("blur",h,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Hw(e){return wy(e)&&!Gb()}function YP(e,t,n={}){const[r,l,h]=qb(e,n),g=w=>{const E=w.currentTarget;if(!Hw(w))return;dd.add(E);const y=t(E,w),T=(k,z)=>{window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",N),dd.has(E)&&dd.delete(E),Hw(k)&&typeof y=="function"&&y(k,{success:z})},S=k=>{T(k,E===window||E===document||n.useGlobalTarget||Xb(E,k.target))},N=k=>{T(k,!1)};window.addEventListener("pointerup",S,l),window.addEventListener("pointercancel",N,l)};return r.forEach(w=>{(n.useGlobalTarget?window:w).addEventListener("pointerdown",g,l),UP(w)&&(w.addEventListener("focus",y=>XP(y,l)),!qP(w)&&!w.hasAttribute("tabindex")&&(w.tabIndex=0))}),h}function Yb(e){return ab(e)&&"ownerSVGElement"in e}function KP(e){return Yb(e)&&e.tagName==="svg"}const Wi=e=>!!(e&&e.getVelocity),WP=[...Fb,si,Fo],QP=e=>WP.find(Ub(e)),Kb=st.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function ZP(e=!0){const t=st.useContext(ty);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:l}=t,h=st.useId();st.useEffect(()=>{if(e)return l(h)},[e]);const g=st.useCallback(()=>e&&r&&r(h),[h,r,e]);return!n&&r?[!1,g]:[!0]}const Wb=st.createContext({strict:!1}),jw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fc={};for(const e in jw)Fc[e]={isEnabled:t=>jw[e].some(n=>!!t[n])};function JP(e){for(const t in e)Fc[t]={...Fc[t],...e[t]}}const $P=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$P.has(e)}let Qb=e=>!qd(e);function tL(e){typeof e=="function"&&(Qb=t=>t.startsWith("on")?!qd(t):e(t))}try{tL(require("@emotion/is-prop-valid").default)}catch{}function eL(e,t,n){const r={};for(const l in e)l==="values"&&typeof e.values=="object"||(Qb(l)||n===!0&&qd(l)||!t&&!qd(l)||e.draggable&&l.startsWith("onDrag"))&&(r[l]=e[l]);return r}const b0=st.createContext({});function S0(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ah(e){return typeof e=="string"||Array.isArray(e)}const _y=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ty=["initial",..._y];function I0(e){return S0(e.animate)||Ty.some(t=>Ah(e[t]))}function Zb(e){return!!(I0(e)||e.variants)}function nL(e,t){if(I0(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ah(n)?n:void 0,animate:Ah(r)?r:void 0}}return e.inherit!==!1?t:{}}function iL(e){const{initial:t,animate:n}=nL(e,st.useContext(b0));return st.useMemo(()=>({initial:t,animate:n}),[Gw(t),Gw(n)])}function Gw(e){return Array.isArray(e)?e.join(" "):e}const xh={};function rL(e){for(const t in e)xh[t]=e[t],ly(t)&&(xh[t].isCSSVariable=!0)}function Jb(e,{layout:t,layoutId:n}){return Wc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!xh[e]||e==="opacity")}const sL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aL=Kc.length;function oL(e,t,n){let r="",l=!0;for(let h=0;h<aL;h++){const g=Kc[h],w=e[g];if(w===void 0)continue;let E=!0;if(typeof w=="number"?E=w===(g.startsWith("scale")?1:0):E=parseFloat(w)===0,!E||n){const y=jb(w,Ay[g]);if(!E){l=!1;const T=sL[g]||g;r+=`${T}(${y}) `}n&&(t[g]=y)}}return r=r.trim(),n?r=n(t,l?"":r):l&&(r="none"),r}function vy(e,t,n){const{style:r,vars:l,transformOrigin:h}=e;let g=!1,w=!1;for(const E in t){const y=t[E];if(Wc.has(E)){g=!0;continue}else if(ly(E)){l[E]=y;continue}else{const T=jb(y,Ay[E]);E.startsWith("origin")?(w=!0,h[E]=T):r[E]=T}}if(t.transform||(g||n?r.transform=oL(t,e.transform,n):r.transform&&(r.transform="none")),w){const{originX:E="50%",originY:y="50%",originZ:T=0}=h;r.transformOrigin=`${E} ${y} ${T}`}}const Cy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $b(e,t,n){for(const r in t)!Wi(t[r])&&!Jb(r,n)&&(e[r]=t[r])}function lL({transformTemplate:e},t){return st.useMemo(()=>{const n=Cy();return vy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function cL(e,t){const n=e.style||{},r={};return $b(r,n,e),Object.assign(r,lL(e,t)),r}function uL(e,t){const n={},r=cL(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const hL={offset:"stroke-dashoffset",array:"stroke-dasharray"},fL={offset:"strokeDashoffset",array:"strokeDasharray"};function dL(e,t,n=1,r=0,l=!0){e.pathLength=1;const h=l?hL:fL;e[h.offset]=le.transform(-r);const g=le.transform(t),w=le.transform(n);e[h.array]=`${g} ${w}`}function tS(e,{attrX:t,attrY:n,attrScale:r,pathLength:l,pathSpacing:h=1,pathOffset:g=0,...w},E,y,T){if(vy(e,w,y),E){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:S,style:N}=e;S.transform&&(N.transform=S.transform,delete S.transform),(N.transform||S.transformOrigin)&&(N.transformOrigin=S.transformOrigin??"50% 50%",delete S.transformOrigin),N.transform&&(N.transformBox=T?.transformBox??"fill-box",delete S.transformBox),t!==void 0&&(S.x=t),n!==void 0&&(S.y=n),r!==void 0&&(S.scale=r),l!==void 0&&dL(S,l,h,g,!1)}const eS=()=>({...Cy(),attrs:{}}),nS=e=>typeof e=="string"&&e.toLowerCase()==="svg";function gL(e,t,n,r){const l=st.useMemo(()=>{const h=eS();return tS(h,t,nS(r),e.transformTemplate,e.style),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};$b(h,e.style,e),l.style={...h,...l.style}}return l}const mL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function by(e){return typeof e!="string"||e.includes("-")?!1:!!(mL.indexOf(e)>-1||/[A-Z]/u.test(e))}function pL(e,t,n,{latestValues:r},l,h=!1){const w=(by(e)?gL:uL)(t,r,l,e),E=eL(t,typeof e=="string",h),y=e!==st.Fragment?{...E,...w,ref:n}:{},{children:T}=t,S=st.useMemo(()=>Wi(T)?T.get():T,[T]);return st.createElement(e,{...y,children:S})}function qw(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Sy(e,t,n,r){if(typeof t=="function"){const[l,h]=qw(r);t=t(n!==void 0?n:e.custom,l,h)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,h]=qw(r);t=t(n!==void 0?n:e.custom,l,h)}return t}function gd(e){return Wi(e)?e.get():e}function yL({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,l){return{latestValues:EL(n,r,l,e),renderState:t()}}function EL(e,t,n,r){const l={},h=r(e,{});for(const N in h)l[N]=gd(h[N]);let{initial:g,animate:w}=e;const E=I0(e),y=Zb(e);t&&y&&!E&&e.inherit!==!1&&(g===void 0&&(g=t.initial),w===void 0&&(w=t.animate));let T=n?n.initial===!1:!1;T=T||g===!1;const S=T?w:g;if(S&&typeof S!="boolean"&&!S0(S)){const N=Array.isArray(S)?S:[S];for(let k=0;k<N.length;k++){const z=Sy(e,N[k]);if(z){const{transitionEnd:X,transition:G,...it}=z;for(const nt in it){let K=it[nt];if(Array.isArray(K)){const At=T?K.length-1:0;K=K[At]}K!==null&&(l[nt]=K)}for(const nt in X)l[nt]=X[nt]}}}return l}const iS=e=>(t,n)=>{const r=st.useContext(b0),l=st.useContext(ty),h=()=>yL(e,t,r,l);return n?h():J9(h)};function Iy(e,t,n){const{style:r}=e,l={};for(const h in r)(Wi(r[h])||t.style&&Wi(t.style[h])||Jb(h,e)||n?.getValue(h)?.liveStyle!==void 0)&&(l[h]=r[h]);return l}const AL=iS({scrapeMotionValuesFromProps:Iy,createRenderState:Cy});function rS(e,t,n){const r=Iy(e,t,n);for(const l in e)if(Wi(e[l])||Wi(t[l])){const h=Kc.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;r[h]=e[l]}return r}const xL=iS({scrapeMotionValuesFromProps:rS,createRenderState:eS}),wL=Symbol.for("motionComponentSymbol");function wc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function _L(e,t,n){return st.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):wc(n)&&(n.current=r))},[t])}const Ry=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TL="framerAppearId",sS="data-"+Ry(TL),aS=st.createContext({});function vL(e,t,n,r,l){const{visualElement:h}=st.useContext(b0),g=st.useContext(Wb),w=st.useContext(ty),E=st.useContext(Kb).reducedMotion,y=st.useRef(null);r=r||g.renderer,!y.current&&r&&(y.current=r(e,{visualState:t,parent:h,props:n,presenceContext:w,blockInitialAnimation:w?w.initial===!1:!1,reducedMotionConfig:E}));const T=y.current,S=st.useContext(aS);T&&!T.projection&&l&&(T.type==="html"||T.type==="svg")&&CL(y.current,n,l,S);const N=st.useRef(!1);st.useInsertionEffect(()=>{T&&N.current&&T.update(n,w)});const k=n[sS],z=st.useRef(!!k&&!window.MotionHandoffIsComplete?.(k)&&window.MotionHasOptimisedAnimation?.(k));return $9(()=>{T&&(N.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),T.scheduleRenderMicrotask(),z.current&&T.animationState&&T.animationState.animateChanges())}),st.useEffect(()=>{T&&(!z.current&&T.animationState&&T.animationState.animateChanges(),z.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(k)}),z.current=!1),T.enteringChildren=void 0)}),T}function CL(e,t,n,r){const{layoutId:l,layout:h,drag:g,dragConstraints:w,layoutScroll:E,layoutRoot:y,layoutCrossfade:T}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:oS(e.parent)),e.projection.setOptions({layoutId:l,layout:h,alwaysMeasureLayout:!!g||w&&wc(w),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:r,crossfade:T,layoutScroll:E,layoutRoot:y})}function oS(e){if(e)return e.options.allowProjection!==!1?e.projection:oS(e.parent)}function Gg(e,{forwardMotionProps:t=!1}={},n,r){n&&JP(n);const l=by(e)?xL:AL;function h(w,E){let y;const T={...st.useContext(Kb),...w,layoutId:bL(w)},{isStatic:S}=T,N=iL(w),k=l(w,S);if(!S&&$p){SL();const z=IL(T);y=z.MeasureLayout,N.visualElement=vL(e,k,T,r,z.ProjectionNode)}return Tt.jsxs(b0.Provider,{value:N,children:[y&&N.visualElement?Tt.jsx(y,{visualElement:N.visualElement,...T}):null,pL(e,w,_L(k,N.visualElement,E),k,S,t)]})}h.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const g=st.forwardRef(h);return g[wL]=e,g}function bL({layoutId:e}){const t=st.useContext(rb).id;return t&&e!==void 0?t+"-"+e:e}function SL(e,t){st.useContext(Wb).strict}function IL(e){const{drag:t,layout:n}=Fc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function RL(e,t){if(typeof Proxy>"u")return Gg;const n=new Map,r=(h,g)=>Gg(h,g,e,t),l=(h,g)=>r(h,g);return new Proxy(l,{get:(h,g)=>g==="create"?r:(n.has(g)||n.set(g,Gg(g,void 0,e,t)),n.get(g))})}function lS({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function NL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function DL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function qg(e){return e===void 0||e===1}function Fm({scale:e,scaleX:t,scaleY:n}){return!qg(e)||!qg(t)||!qg(n)}function dl(e){return Fm(e)||cS(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function cS(e){return Xw(e.x)||Xw(e.y)}function Xw(e){return e&&e!=="0%"}function Xd(e,t,n){const r=e-n,l=t*r;return n+l}function Yw(e,t,n,r,l){return l!==void 0&&(e=Xd(e,l,r)),Xd(e,n,r)+t}function zm(e,t=0,n=1,r,l){e.min=Yw(e.min,t,n,r,l),e.max=Yw(e.max,t,n,r,l)}function uS(e,{x:t,y:n}){zm(e.x,t.translate,t.scale,t.originPoint),zm(e.y,n.translate,n.scale,n.originPoint)}const Kw=.999999999999,Ww=1.0000000000001;function OL(e,t,n,r=!1){const l=n.length;if(!l)return;t.x=t.y=1;let h,g;for(let w=0;w<l;w++){h=n[w],g=h.projectionDelta;const{visualElement:E}=h.options;E&&E.props.style&&E.props.style.display==="contents"||(r&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Tc(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),g&&(t.x*=g.x.scale,t.y*=g.y.scale,uS(e,g)),r&&dl(h.latestValues)&&Tc(e,h.latestValues))}t.x<Ww&&t.x>Kw&&(t.x=1),t.y<Ww&&t.y>Kw&&(t.y=1)}function _c(e,t){e.min=e.min+t,e.max=e.max+t}function Qw(e,t,n,r,l=.5){const h=Mn(e.min,e.max,l);zm(e,t,n,h,r)}function Tc(e,t){Qw(e.x,t.x,t.scaleX,t.scale,t.originX),Qw(e.y,t.y,t.scaleY,t.scale,t.originY)}function hS(e,t){return lS(DL(e.getBoundingClientRect(),t))}function ML(e,t,n){const r=hS(e,n),{scroll:l}=t;return l&&(_c(r.x,l.offset.x),_c(r.y,l.offset.y)),r}const Zw=()=>({translate:0,scale:1,origin:0,originPoint:0}),vc=()=>({x:Zw(),y:Zw()}),Jw=()=>({min:0,max:0}),Jn=()=>({x:Jw(),y:Jw()}),Hm={current:null},fS={current:!1};function PL(){if(fS.current=!0,!!$p)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Hm.current=e.matches;e.addEventListener("change",t),t()}else Hm.current=!1}const LL=new WeakMap;function kL(e,t,n){for(const r in t){const l=t[r],h=n[r];if(Wi(l))e.addValue(r,l);else if(Wi(h))e.addValue(r,Uc(l,{owner:e}));else if(h!==l)if(e.hasValue(r)){const g=e.getValue(r);g.liveStyle===!0?g.jump(l):g.hasAnimated||g.set(l)}else{const g=e.getStaticValue(r);e.addValue(r,Uc(g!==void 0?g:l,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const $w=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class BL{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:l,blockInitialAnimation:h,visualState:g},w={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=mr.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,bn.render(this.render,!1,!0))};const{latestValues:E,renderState:y}=g;this.latestValues=E,this.baseTarget={...E},this.initialValues=n.initial?{...E}:{},this.renderState=y,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=w,this.blockInitialAnimation=!!h,this.isControllingVariants=I0(n),this.isVariantNode=Zb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:T,...S}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in S){const k=S[N];E[N]!==void 0&&Wi(k)&&k.set(E[N])}}mount(t){this.current=t,LL.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),fS.current||PL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hm.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Uo(this.notifyUpdate),Uo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Wc.has(t);r&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",g=>{this.latestValues[t]=g,this.props.onUpdate&&bn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{l(),h&&h(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Fc){const n=Fc[t];if(!n)continue;const{isEnabled:r,Feature:l}=n;if(!this.features[t]&&l&&r(this.props)&&(this.features[t]=new l(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<$w.length;r++){const l=$w[r];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const h="on"+l,g=t[h];g&&(this.propEventSubscriptions[l]=this.on(l,g))}this.prevMotionValues=kL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Uc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(sb(r)||ob(r))?r=parseFloat(r):!QP(r)&&Fo.test(n)&&(r=Hb(t,n)),this.setBaseTarget(t,Wi(r)?r.get():r)),Wi(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=Sy(this.props,n,this.presenceContext?.custom);h&&(r=h[t])}if(n&&r!==void 0)return r;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Wi(l)?l:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new sy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){xy.render(this.render)}}class dS extends BL{constructor(){super(...arguments),this.KeyframeResolver=BP}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Wi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function gS(e,{style:t,vars:n},r,l){const h=e.style;let g;for(g in t)h[g]=t[g];l?.applyProjectionStyles(h,r);for(g in n)h.setProperty(g,n[g])}function VL(e){return window.getComputedStyle(e)}class UL extends dS{constructor(){super(...arguments),this.type="html",this.renderInstance=gS}readValueFromInstance(t,n){if(Wc.has(n))return this.projection?.isProjecting?Mm(n):nP(t,n);{const r=VL(t),l=(ly(n)?r.getPropertyValue(n):r[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return hS(t,n)}build(t,n,r){vy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Iy(t,n,r)}}const mS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FL(e,t,n,r){gS(e,t,void 0,r);for(const l in t.attrs)e.setAttribute(mS.has(l)?l:Ry(l),t.attrs[l])}class zL extends dS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Jn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Wc.has(n)){const r=zb(n);return r&&r.default||0}return n=mS.has(n)?n:Ry(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return rS(t,n,r)}build(t,n,r){tS(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,l){FL(t,n,r,l)}mount(t){this.isSVGTag=nS(t.tagName),super.mount(t)}}const HL=(e,t)=>by(e)?new zL(t):new UL(t,{allowProjection:e!==st.Fragment});function Dc(e,t,n){const r=e.getProps();return Sy(r,t,n!==void 0?n:r.custom,e)}const jm=e=>Array.isArray(e);function jL(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Uc(n))}function GL(e){return jm(e)?e[e.length-1]||0:e}function qL(e,t){const n=Dc(e,t);let{transitionEnd:r={},transition:l={},...h}=n||{};h={...h,...r};for(const g in h){const w=GL(h[g]);jL(e,g,w)}}function XL(e){return!!(Wi(e)&&e.add)}function Gm(e,t){const n=e.getValue("willChange");if(XL(n))return n.add(t);if(!n&&Ha.WillChange){const r=new Ha.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function pS(e){return e.props[sS]}const YL=e=>e!==null;function KL(e,{repeat:t,repeatType:n="loop"},r){const l=e.filter(YL),h=t&&n!=="loop"&&t%2===1?0:l.length-1;return l[h]}const WL={type:"spring",stiffness:500,damping:25,restSpeed:10},QL=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ZL={type:"keyframes",duration:.8},JL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$L=(e,{keyframes:t})=>t.length>2?ZL:Wc.has(e)?e.startsWith("scale")?QL(t[1]):WL:JL;function tk({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:l,repeat:h,repeatType:g,repeatDelay:w,from:E,elapsed:y,...T}){return!!Object.keys(T).length}const Ny=(e,t,n,r={},l,h)=>g=>{const w=Ey(r,e)||{},E=w.delay||r.delay||0;let{elapsed:y=0}=r;y=y-Ws(E);const T={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...w,delay:-y,onUpdate:N=>{t.set(N),w.onUpdate&&w.onUpdate(N)},onComplete:()=>{g(),w.onComplete&&w.onComplete()},name:e,motionValue:t,element:h?void 0:l};tk(w)||Object.assign(T,$L(e,T)),T.duration&&(T.duration=Ws(T.duration)),T.repeatDelay&&(T.repeatDelay=Ws(T.repeatDelay)),T.from!==void 0&&(T.keyframes[0]=T.from);let S=!1;if((T.type===!1||T.duration===0&&!T.repeatDelay)&&(Vm(T),T.delay===0&&(S=!0)),(Ha.instantAnimations||Ha.skipAnimations)&&(S=!0,Vm(T),T.delay=0),T.allowFlatten=!w.type&&!w.ease,S&&!h&&t.get()!==void 0){const N=KL(T.keyframes,w);if(N!==void 0){bn.update(()=>{T.onUpdate(N),T.onComplete()});return}}return w.isSync?new py(T):new CP(T)};function ek({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function yS(e,t,{delay:n=0,transitionOverride:r,type:l}={}){let{transition:h=e.getDefaultTransition(),transitionEnd:g,...w}=t;r&&(h=r);const E=[],y=l&&e.animationState&&e.animationState.getState()[l];for(const T in w){const S=e.getValue(T,e.latestValues[T]??null),N=w[T];if(N===void 0||y&&ek(y,T))continue;const k={delay:n,...Ey(h||{},T)},z=S.get();if(z!==void 0&&!S.isAnimating&&!Array.isArray(N)&&N===z&&!k.velocity)continue;let X=!1;if(window.MotionHandoffAnimation){const it=pS(e);if(it){const nt=window.MotionHandoffAnimation(it,T,bn);nt!==null&&(k.startTime=nt,X=!0)}}Gm(e,T),S.start(Ny(T,S,N,e.shouldReduceMotion&&Vb.has(T)?{type:!1}:k,e,X));const G=S.animation;G&&E.push(G)}return g&&Promise.all(E).then(()=>{bn.update(()=>{g&&qL(e,g)})}),E}function ES(e,t,n,r=0,l=1){const h=Array.from(e).sort((y,T)=>y.sortNodePosition(T)).indexOf(t),g=e.size,w=(g-1)*r;return typeof n=="function"?n(h,g):l===1?h*r:w-h*r}function qm(e,t,n={}){const r=Dc(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(l=n.transitionOverride);const h=r?()=>Promise.all(yS(e,r,n)):()=>Promise.resolve(),g=e.variantChildren&&e.variantChildren.size?(E=0)=>{const{delayChildren:y=0,staggerChildren:T,staggerDirection:S}=l;return nk(e,t,E,y,T,S,n)}:()=>Promise.resolve(),{when:w}=l;if(w){const[E,y]=w==="beforeChildren"?[h,g]:[g,h];return E().then(()=>y())}else return Promise.all([h(),g(n.delay)])}function nk(e,t,n=0,r=0,l=0,h=1,g){const w=[];for(const E of e.variantChildren)E.notify("AnimationStart",t),w.push(qm(E,t,{...g,delay:n+(typeof r=="function"?0:r)+ES(e.variantChildren,E,r,l,h)}).then(()=>E.notify("AnimationComplete",t)));return Promise.all(w)}function ik(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const l=t.map(h=>qm(e,h,n));r=Promise.all(l)}else if(typeof t=="string")r=qm(e,t,n);else{const l=typeof t=="function"?Dc(e,t,n.custom):t;r=Promise.all(yS(e,l,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function AS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const rk=Ty.length;function xS(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?xS(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<rk;n++){const r=Ty[n],l=e.props[r];(Ah(l)||l===!1)&&(t[r]=l)}return t}const sk=[..._y].reverse(),ak=_y.length;function ok(e){return t=>Promise.all(t.map(({animation:n,options:r})=>ik(e,n,r)))}function lk(e){let t=ok(e),n=t_(),r=!0;const l=E=>(y,T)=>{const S=Dc(e,T,E==="exit"?e.presenceContext?.custom:void 0);if(S){const{transition:N,transitionEnd:k,...z}=S;y={...y,...z,...k}}return y};function h(E){t=E(e)}function g(E){const{props:y}=e,T=xS(e.parent)||{},S=[],N=new Set;let k={},z=1/0;for(let G=0;G<ak;G++){const it=sk[G],nt=n[it],K=y[it]!==void 0?y[it]:T[it],At=Ah(K),wt=it===E?nt.isActive:null;wt===!1&&(z=G);let Rt=K===T[it]&&K!==y[it]&&At;if(Rt&&r&&e.manuallyAnimateOnMount&&(Rt=!1),nt.protectedKeys={...k},!nt.isActive&&wt===null||!K&&!nt.prevProp||S0(K)||typeof K=="boolean")continue;const H=ck(nt.prevProp,K);let U=H||it===E&&nt.isActive&&!Rt&&At||G>z&&At,V=!1;const tt=Array.isArray(K)?K:[K];let W=tt.reduce(l(it),{});wt===!1&&(W={});const{prevResolvedValues:Z={}}=nt,Y={...Z,...W},Jt=xt=>{U=!0,N.has(xt)&&(V=!0,N.delete(xt)),nt.needsAnimating[xt]=!0;const Ft=e.getValue(xt);Ft&&(Ft.liveStyle=!1)};for(const xt in Y){const Ft=W[xt],$t=Z[xt];if(k.hasOwnProperty(xt))continue;let J=!1;jm(Ft)&&jm($t)?J=!AS(Ft,$t):J=Ft!==$t,J?Ft!=null?Jt(xt):N.add(xt):Ft!==void 0&&N.has(xt)?Jt(xt):nt.protectedKeys[xt]=!0}nt.prevProp=K,nt.prevResolvedValues=W,nt.isActive&&(k={...k,...W}),r&&e.blockInitialAnimation&&(U=!1);const ht=Rt&&H;U&&(!ht||V)&&S.push(...tt.map(xt=>{const Ft={type:it};if(typeof xt=="string"&&r&&!ht&&e.manuallyAnimateOnMount&&e.parent){const{parent:$t}=e,J=Dc($t,xt);if($t.enteringChildren&&J){const{delayChildren:bt}=J.transition||{};Ft.delay=ES($t.enteringChildren,e,bt)}}return{animation:xt,options:Ft}}))}if(N.size){const G={};if(typeof y.initial!="boolean"){const it=Dc(e,Array.isArray(y.initial)?y.initial[0]:y.initial);it&&it.transition&&(G.transition=it.transition)}N.forEach(it=>{const nt=e.getBaseTarget(it),K=e.getValue(it);K&&(K.liveStyle=!0),G[it]=nt??null}),S.push({animation:G})}let X=!!S.length;return r&&(y.initial===!1||y.initial===y.animate)&&!e.manuallyAnimateOnMount&&(X=!1),r=!1,X?t(S):Promise.resolve()}function w(E,y){if(n[E].isActive===y)return Promise.resolve();e.variantChildren?.forEach(S=>S.animationState?.setActive(E,y)),n[E].isActive=y;const T=g(E);for(const S in n)n[S].protectedKeys={};return T}return{animateChanges:g,setActive:w,setAnimateFunction:h,getState:()=>n,reset:()=>{n=t_(),r=!0}}}function ck(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!AS(t,e):!1}function hl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function t_(){return{animate:hl(!0),whileInView:hl(),whileHover:hl(),whileTap:hl(),whileDrag:hl(),whileFocus:hl(),exit:hl()}}class Go{constructor(t){this.isMounted=!1,this.node=t}update(){}}class uk extends Go{constructor(t){super(t),t.animationState||(t.animationState=lk(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();S0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let hk=0;class fk extends Go{constructor(){super(...arguments),this.id=hk++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const l=this.node.animationState.setActive("exit",!t);n&&!t&&l.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const dk={animation:{Feature:uk},exit:{Feature:fk}};function wh(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Bh(e){return{point:{x:e.pageX,y:e.pageY}}}const gk=e=>t=>wy(t)&&e(t,Bh(t));function nh(e,t,n,r){return wh(e,t,gk(n),r)}const wS=1e-4,mk=1-wS,pk=1+wS,_S=.01,yk=0-_S,Ek=0+_S;function rr(e){return e.max-e.min}function Ak(e,t,n){return Math.abs(e-t)<=n}function e_(e,t,n,r=.5){e.origin=r,e.originPoint=Mn(t.min,t.max,e.origin),e.scale=rr(n)/rr(t),e.translate=Mn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=mk&&e.scale<=pk||isNaN(e.scale))&&(e.scale=1),(e.translate>=yk&&e.translate<=Ek||isNaN(e.translate))&&(e.translate=0)}function ih(e,t,n,r){e_(e.x,t.x,n.x,r?r.originX:void 0),e_(e.y,t.y,n.y,r?r.originY:void 0)}function n_(e,t,n){e.min=n.min+t.min,e.max=e.min+rr(t)}function xk(e,t,n){n_(e.x,t.x,n.x),n_(e.y,t.y,n.y)}function i_(e,t,n){e.min=t.min-n.min,e.max=e.min+rr(t)}function rh(e,t,n){i_(e.x,t.x,n.x),i_(e.y,t.y,n.y)}function es(e){return[e("x"),e("y")]}const TS=({current:e})=>e?e.ownerDocument.defaultView:null,r_=(e,t)=>Math.abs(e-t);function wk(e,t){const n=r_(e.x,t.x),r=r_(e.y,t.y);return Math.sqrt(n**2+r**2)}class vS{constructor(t,n,{transformPagePoint:r,contextWindow:l=window,dragSnapToOrigin:h=!1,distanceThreshold:g=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Yg(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,z=wk(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!z)return;const{point:X}=N,{timestamp:G}=Oi;this.history.push({...X,timestamp:G});const{onStart:it,onMove:nt}=this.handlers;k||(it&&it(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),nt&&nt(this.lastMoveEvent,N)},this.handlePointerMove=(N,k)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=Xg(k,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(N,k)=>{this.end();const{onEnd:z,onSessionEnd:X,resumeAnimation:G}=this.handlers;if(this.dragSnapToOrigin&&G&&G(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const it=Yg(N.type==="pointercancel"?this.lastMoveEventInfo:Xg(k,this.transformPagePoint),this.history);this.startEvent&&z&&z(N,it),X&&X(N,it)},!wy(t))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=g,this.contextWindow=l||window;const w=Bh(t),E=Xg(w,this.transformPagePoint),{point:y}=E,{timestamp:T}=Oi;this.history=[{...y,timestamp:T}];const{onSessionStart:S}=n;S&&S(t,Yg(E,this.history)),this.removeListeners=Ph(nh(this.contextWindow,"pointermove",this.handlePointerMove),nh(this.contextWindow,"pointerup",this.handlePointerUp),nh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Uo(this.updatePoint)}}function Xg(e,t){return t?{point:t(e.point)}:e}function s_(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Yg({point:e},t){return{point:e,delta:s_(e,CS(t)),offset:s_(e,_k(t)),velocity:Tk(t,.1)}}function _k(e){return e[0]}function CS(e){return e[e.length-1]}function Tk(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const l=CS(e);for(;n>=0&&(r=e[n],!(l.timestamp-r.timestamp>Ws(t)));)n--;if(!r)return{x:0,y:0};const h=Qs(l.timestamp-r.timestamp);if(h===0)return{x:0,y:0};const g={x:(l.x-r.x)/h,y:(l.y-r.y)/h};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function vk(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Mn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Mn(n,e,r.max):Math.min(e,n)),e}function a_(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Ck(e,{top:t,left:n,bottom:r,right:l}){return{x:a_(e.x,n,l),y:a_(e.y,t,r)}}function o_(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function bk(e,t){return{x:o_(e.x,t.x),y:o_(e.y,t.y)}}function Sk(e,t){let n=.5;const r=rr(e),l=rr(t);return l>r?n=ph(t.min,t.max-r,e.min):r>l&&(n=ph(e.min,e.max-l,t.min)),za(0,1,n)}function Ik(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Xm=.35;function Rk(e=Xm){return e===!1?e=0:e===!0&&(e=Xm),{x:l_(e,"left","right"),y:l_(e,"top","bottom")}}function l_(e,t,n){return{min:c_(e,t),max:c_(e,n)}}function c_(e,t){return typeof e=="number"?e:e[t]||0}const Nk=new WeakMap;class Dk{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const h=S=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bh(S).point)},g=(S,N)=>{const{drag:k,dragPropagation:z,onDragStart:X}=this.getProps();if(k&&!z&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HP(k),!this.openDragLock))return;this.latestPointerEvent=S,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),es(it=>{let nt=this.getAxisMotionValue(it).get()||0;if(Zs.test(nt)){const{projection:K}=this.visualElement;if(K&&K.layout){const At=K.layout.layoutBox[it];At&&(nt=rr(At)*(parseFloat(nt)/100))}}this.originPoint[it]=nt}),X&&bn.postRender(()=>X(S,N)),Gm(this.visualElement,"transform");const{animationState:G}=this.visualElement;G&&G.setActive("whileDrag",!0)},w=(S,N)=>{this.latestPointerEvent=S,this.latestPanInfo=N;const{dragPropagation:k,dragDirectionLock:z,onDirectionLock:X,onDrag:G}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:it}=N;if(z&&this.currentDirection===null){this.currentDirection=Ok(it),this.currentDirection!==null&&X&&X(this.currentDirection);return}this.updateAxis("x",N.point,it),this.updateAxis("y",N.point,it),this.visualElement.render(),G&&G(S,N)},E=(S,N)=>{this.latestPointerEvent=S,this.latestPanInfo=N,this.stop(S,N),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>es(S=>this.getAnimationState(S)==="paused"&&this.getAxisMotionValue(S).animation?.play()),{dragSnapToOrigin:T}=this.getProps();this.panSession=new vS(t,{onSessionStart:h,onStart:g,onMove:w,onSessionEnd:E,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:T,distanceThreshold:r,contextWindow:TS(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,l=n||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!l||!r)return;const{velocity:g}=l;this.startAnimation(g);const{onDragEnd:w}=this.getProps();w&&bn.postRender(()=>w(r,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:l}=this.getProps();if(!r||!Zf(t,l,this.currentDirection))return;const h=this.getAxisMotionValue(t);let g=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(g=vk(g,this.constraints[t],this.elastic[t])),h.set(g)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&wc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Ck(r.layoutBox,t):this.constraints=!1,this.elastic=Rk(n),l!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&es(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=Ik(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!wc(t))return!1;const r=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const h=ML(r,l.root,this.visualElement.getTransformPagePoint());let g=bk(l.layout.layoutBox,h);if(n){const w=n(NL(g));this.hasMutatedConstraints=!!w,w&&(g=lS(w))}return g}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:l,dragTransition:h,dragSnapToOrigin:g,onDragTransitionEnd:w}=this.getProps(),E=this.constraints||{},y=es(T=>{if(!Zf(T,n,this.currentDirection))return;let S=E&&E[T]||{};g&&(S={min:0,max:0});const N=l?200:1e6,k=l?40:1e7,z={type:"inertia",velocity:r?t[T]:0,bounceStiffness:N,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...h,...S};return this.startAxisValueAnimation(T,z)});return Promise.all(y).then(w)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Gm(this.visualElement,t),r.start(Ny(t,r,0,n,this.visualElement,!1))}stopAnimation(){es(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){es(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),l=r[n];return l||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){es(n=>{const{drag:r}=this.getProps();if(!Zf(n,r,this.currentDirection))return;const{projection:l}=this.visualElement,h=this.getAxisMotionValue(n);if(l&&l.layout){const{min:g,max:w}=l.layout.layoutBox[n];h.set(t[n]-Mn(g,w,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wc(n)||!r||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};es(g=>{const w=this.getAxisMotionValue(g);if(w&&this.constraints!==!1){const E=w.get();l[g]=Sk({min:E,max:E},this.constraints[g])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),es(g=>{if(!Zf(g,t,null))return;const w=this.getAxisMotionValue(g),{min:E,max:y}=this.constraints[g];w.set(Mn(E,y,l[g]))})}addListeners(){if(!this.visualElement.current)return;Nk.set(this.visualElement,this);const t=this.visualElement.current,n=nh(t,"pointerdown",E=>{const{drag:y,dragListener:T=!0}=this.getProps();y&&T&&this.start(E)}),r=()=>{const{dragConstraints:E}=this.getProps();wc(E)&&E.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,h=l.addEventListener("measure",r);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),bn.read(r);const g=wh(window,"resize",()=>this.scalePositionWithinConstraints()),w=l.addEventListener("didUpdate",(({delta:E,hasLayoutChanged:y})=>{this.isDragging&&y&&(es(T=>{const S=this.getAxisMotionValue(T);S&&(this.originPoint[T]+=E[T].translate,S.set(S.get()+E[T].translate))}),this.visualElement.render())}));return()=>{g(),n(),h(),w&&w()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:l=!1,dragConstraints:h=!1,dragElastic:g=Xm,dragMomentum:w=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:l,dragConstraints:h,dragElastic:g,dragMomentum:w}}}function Zf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Ok(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Mk extends Go{constructor(t){super(t),this.removeGroupControls=rs,this.removeListeners=rs,this.controls=new Dk(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const u_=e=>(t,n)=>{e&&bn.postRender(()=>e(t,n))};class Pk extends Go{constructor(){super(...arguments),this.removePointerDownListener=rs}onPointerDown(t){this.session=new vS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:l}=this.node.getProps();return{onSessionStart:u_(t),onStart:u_(n),onMove:r,onEnd:(h,g)=>{delete this.session,l&&bn.postRender(()=>l(h,g))}}}mount(){this.removePointerDownListener=nh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const md={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function h_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Uu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(le.test(e))e=parseFloat(e);else return e;const n=h_(e,t.target.x),r=h_(e,t.target.y);return`${n}% ${r}%`}},Lk={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,l=Fo.parse(e);if(l.length>5)return r;const h=Fo.createTransformer(e),g=typeof l[0]!="number"?1:0,w=n.x.scale*t.x,E=n.y.scale*t.y;l[0+g]/=w,l[1+g]/=E;const y=Mn(w,E,.5);return typeof l[2+g]=="number"&&(l[2+g]/=y),typeof l[3+g]=="number"&&(l[3+g]/=y),h(l)}};let Kg=!1;class kk extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:l}=this.props,{projection:h}=t;rL(Bk),h&&(n.group&&n.group.add(h),r&&r.register&&l&&r.register(h),Kg&&h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),md.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:l,isPresent:h}=this.props,{projection:g}=r;return g&&(g.isPresent=h,Kg=!0,l||t.layoutDependency!==n||n===void 0||t.isPresent!==h?g.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?g.promote():g.relegate()||bn.postRender(()=>{const w=g.getStack();(!w||!w.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),xy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:l}=t;Kg=!0,l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),r&&r.deregister&&r.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function bS(e){const[t,n]=ZP(),r=st.useContext(rb);return Tt.jsx(kk,{...e,layoutGroup:r,switchLayoutGroup:st.useContext(aS),isPresent:t,safeToRemove:n})}const Bk={borderRadius:{...Uu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uu,borderTopRightRadius:Uu,borderBottomLeftRadius:Uu,borderBottomRightRadius:Uu,boxShadow:Lk};function Vk(e,t,n){const r=Wi(e)?e:Uc(e);return r.start(Ny("",r,t,n)),r.animation}const Uk=(e,t)=>e.depth-t.depth;class Fk{constructor(){this.children=[],this.isDirty=!1}add(t){ey(this.children,t),this.isDirty=!0}remove(t){ny(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Uk),this.isDirty=!1,this.children.forEach(t)}}function zk(e,t){const n=mr.now(),r=({timestamp:l})=>{const h=l-n;h>=t&&(Uo(r),e(h-t))};return bn.setup(r,!0),()=>Uo(r)}const SS=["TopLeft","TopRight","BottomLeft","BottomRight"],Hk=SS.length,f_=e=>typeof e=="string"?parseFloat(e):e,d_=e=>typeof e=="number"||le.test(e);function jk(e,t,n,r,l,h){l?(e.opacity=Mn(0,n.opacity??1,Gk(r)),e.opacityExit=Mn(t.opacity??1,0,qk(r))):h&&(e.opacity=Mn(t.opacity??1,n.opacity??1,r));for(let g=0;g<Hk;g++){const w=`border${SS[g]}Radius`;let E=g_(t,w),y=g_(n,w);if(E===void 0&&y===void 0)continue;E||(E=0),y||(y=0),E===0||y===0||d_(E)===d_(y)?(e[w]=Math.max(Mn(f_(E),f_(y),r),0),(Zs.test(y)||Zs.test(E))&&(e[w]+="%")):e[w]=y}(t.rotate||n.rotate)&&(e.rotate=Mn(t.rotate||0,n.rotate||0,r))}function g_(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Gk=IS(0,.5,mb),qk=IS(.5,.95,rs);function IS(e,t,n){return r=>r<e?0:r>t?1:n(ph(e,t,r))}function m_(e,t){e.min=t.min,e.max=t.max}function ts(e,t){m_(e.x,t.x),m_(e.y,t.y)}function p_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function y_(e,t,n,r,l){return e-=t,e=Xd(e,1/n,r),l!==void 0&&(e=Xd(e,1/l,r)),e}function Xk(e,t=0,n=1,r=.5,l,h=e,g=e){if(Zs.test(t)&&(t=parseFloat(t),t=Mn(g.min,g.max,t/100)-g.min),typeof t!="number")return;let w=Mn(h.min,h.max,r);e===h&&(w-=t),e.min=y_(e.min,t,n,w,l),e.max=y_(e.max,t,n,w,l)}function E_(e,t,[n,r,l],h,g){Xk(e,t[n],t[r],t[l],t.scale,h,g)}const Yk=["x","scaleX","originX"],Kk=["y","scaleY","originY"];function A_(e,t,n,r){E_(e.x,t,Yk,n?n.x:void 0,r?r.x:void 0),E_(e.y,t,Kk,n?n.y:void 0,r?r.y:void 0)}function x_(e){return e.translate===0&&e.scale===1}function RS(e){return x_(e.x)&&x_(e.y)}function w_(e,t){return e.min===t.min&&e.max===t.max}function Wk(e,t){return w_(e.x,t.x)&&w_(e.y,t.y)}function __(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function NS(e,t){return __(e.x,t.x)&&__(e.y,t.y)}function T_(e){return rr(e.x)/rr(e.y)}function v_(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Qk{constructor(){this.members=[]}add(t){ey(this.members,t),t.scheduleRender()}remove(t){if(ny(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(l=>t===l);if(n===0)return!1;let r;for(let l=n;l>=0;l--){const h=this.members[l];if(h.isPresent!==!1){r=h;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zk(e,t,n){let r="";const l=e.x.translate/t.x,h=e.y.translate/t.y,g=n?.z||0;if((l||h||g)&&(r=`translate3d(${l}px, ${h}px, ${g}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:y,rotate:T,rotateX:S,rotateY:N,skewX:k,skewY:z}=n;y&&(r=`perspective(${y}px) ${r}`),T&&(r+=`rotate(${T}deg) `),S&&(r+=`rotateX(${S}deg) `),N&&(r+=`rotateY(${N}deg) `),k&&(r+=`skewX(${k}deg) `),z&&(r+=`skewY(${z}deg) `)}const w=e.x.scale*t.x,E=e.y.scale*t.y;return(w!==1||E!==1)&&(r+=`scale(${w}, ${E})`),r||"none"}const Wg=["","X","Y","Z"],Jk=1e3;let $k=0;function Qg(e,t,n,r){const{latestValues:l}=t;l[e]&&(n[e]=l[e],t.setStaticValue(e,0),r&&(r[e]=0))}function DS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=pS(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bn,!(l||h))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&DS(r)}function OS({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:l}){return class{constructor(g={},w=t?.()){this.id=$k++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nB),this.nodes.forEach(aB),this.nodes.forEach(oB),this.nodes.forEach(iB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=w?w.root||w:this,this.path=w?[...w.path,w]:[],this.parent=w,this.depth=w?w.depth+1:0;for(let E=0;E<this.path.length;E++)this.path[E].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fk)}addEventListener(g,w){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new sy),this.eventHandlers.get(g).add(w)}notifyListeners(g,...w){const E=this.eventHandlers.get(g);E&&E.notify(...w)}hasListeners(g){return this.eventHandlers.has(g)}mount(g){if(this.instance)return;this.isSVG=Yb(g)&&!KP(g),this.instance=g;const{layoutId:w,layout:E,visualElement:y}=this.options;if(y&&!y.current&&y.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(E||w)&&(this.isLayoutDirty=!0),e){let T,S=0;const N=()=>this.root.updateBlockedByResize=!1;bn.read(()=>{S=window.innerWidth}),e(g,()=>{const k=window.innerWidth;k!==S&&(S=k,this.root.updateBlockedByResize=!0,T&&T(),T=zk(N,250),md.hasAnimatedSinceResize&&(md.hasAnimatedSinceResize=!1,this.nodes.forEach(S_)))})}w&&this.root.registerSharedNode(w,this),this.options.animate!==!1&&y&&(w||E)&&this.addEventListener("didUpdate",({delta:T,hasLayoutChanged:S,hasRelativeLayoutChanged:N,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const z=this.options.transition||y.getDefaultTransition()||fB,{onLayoutAnimationStart:X,onLayoutAnimationComplete:G}=y.getProps(),it=!this.targetLayout||!NS(this.targetLayout,k),nt=!S&&N;if(this.options.layoutRoot||this.resumeFrom||nt||S&&(it||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const K={...Ey(z,"layout"),onPlay:X,onComplete:G};(y.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K),this.setAnimationOrigin(T,nt)}else S||S_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Uo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lB),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&DS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let T=0;T<this.path.length;T++){const S=this.path[T];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:w,layout:E}=this.options;if(w===void 0&&!E)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(b_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sB),this.nodes.forEach(tB),this.nodes.forEach(eB)):this.nodes.forEach(b_),this.clearAllSnapshots();const w=mr.now();Oi.delta=za(0,1e3/60,w-Oi.timestamp),Oi.timestamp=w,Oi.isProcessing=!0,Vg.update.process(Oi),Vg.preRender.process(Oi),Vg.render.process(Oi),Oi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rB),this.sharedNodes.forEach(cB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rr(this.snapshot.measuredBox.x)&&!rr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let E=0;E<this.path.length;E++)this.path[E].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:w}=this.options;w&&w.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let w=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(w=!1),w&&this.instance){const E=r(this.instance);this.scroll={animationId:this.root.animationId,phase:g,isRoot:E,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:E}}}resetTransform(){if(!l)return;const g=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,w=this.projectionDelta&&!RS(this.projectionDelta),E=this.getTransformTemplate(),y=E?E(this.latestValues,""):void 0,T=y!==this.prevTransformTemplateValue;g&&this.instance&&(w||dl(this.latestValues)||T)&&(l(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const w=this.measurePageBox();let E=this.removeElementScroll(w);return g&&(E=this.removeTransform(E)),dB(E),{animationId:this.root.animationId,measuredBox:w,layoutBox:E,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:g}=this.options;if(!g)return Jn();const w=g.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(gB))){const{scroll:y}=this.root;y&&(_c(w.x,y.offset.x),_c(w.y,y.offset.y))}return w}removeElementScroll(g){const w=Jn();if(ts(w,g),this.scroll?.wasRoot)return w;for(let E=0;E<this.path.length;E++){const y=this.path[E],{scroll:T,options:S}=y;y!==this.root&&T&&S.layoutScroll&&(T.wasRoot&&ts(w,g),_c(w.x,T.offset.x),_c(w.y,T.offset.y))}return w}applyTransform(g,w=!1){const E=Jn();ts(E,g);for(let y=0;y<this.path.length;y++){const T=this.path[y];!w&&T.options.layoutScroll&&T.scroll&&T!==T.root&&Tc(E,{x:-T.scroll.offset.x,y:-T.scroll.offset.y}),dl(T.latestValues)&&Tc(E,T.latestValues)}return dl(this.latestValues)&&Tc(E,this.latestValues),E}removeTransform(g){const w=Jn();ts(w,g);for(let E=0;E<this.path.length;E++){const y=this.path[E];if(!y.instance||!dl(y.latestValues))continue;Fm(y.latestValues)&&y.updateSnapshot();const T=Jn(),S=y.measurePageBox();ts(T,S),A_(w,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,T)}return dl(this.latestValues)&&A_(w,this.latestValues),w}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Oi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){const w=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=w.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=w.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=w.isSharedProjectionDirty);const E=!!this.resumingFrom||this!==w;if(!(g||E&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:T,layoutId:S}=this.options;if(!(!this.layout||!(T||S))){if(this.resolvedRelativeTargetAt=Oi.timestamp,!this.targetDelta&&!this.relativeTarget){const N=this.getClosestProjectingParent();N&&N.layout&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jn(),this.relativeTargetOrigin=Jn(),rh(this.relativeTargetOrigin,this.layout.layoutBox,N.layout.layoutBox),ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Jn(),this.targetWithTransforms=Jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ts(this.target,this.layout.layoutBox),uS(this.target,this.targetDelta)):ts(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const N=this.getClosestProjectingParent();N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jn(),this.relativeTargetOrigin=Jn(),rh(this.relativeTargetOrigin,this.target,N.target),ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Fm(this.parent.latestValues)||cS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const g=this.getLead(),w=!!this.resumingFrom||this!==g;let E=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(E=!1),w&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(E=!1),this.resolvedRelativeTargetAt===Oi.timestamp&&(E=!1),E)return;const{layout:y,layoutId:T}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||T))return;ts(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,N=this.treeScale.y;OL(this.layoutCorrected,this.treeScale,this.path,w),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=Jn());const{target:k}=g;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(p_(this.prevProjectionDelta.x,this.projectionDelta.x),p_(this.prevProjectionDelta.y,this.projectionDelta.y)),ih(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==N||!v_(this.projectionDelta.x,this.prevProjectionDelta.x)||!v_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){if(this.options.visualElement?.scheduleRender(),g){const w=this.getStack();w&&w.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vc(),this.projectionDelta=vc(),this.projectionDeltaWithTransform=vc()}setAnimationOrigin(g,w=!1){const E=this.snapshot,y=E?E.latestValues:{},T={...this.latestValues},S=vc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!w;const N=Jn(),k=E?E.source:void 0,z=this.layout?this.layout.source:void 0,X=k!==z,G=this.getStack(),it=!G||G.members.length<=1,nt=!!(X&&!it&&this.options.crossfade===!0&&!this.path.some(hB));this.animationProgress=0;let K;this.mixTargetDelta=At=>{const wt=At/1e3;I_(S.x,g.x,wt),I_(S.y,g.y,wt),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rh(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uB(this.relativeTarget,this.relativeTargetOrigin,N,wt),K&&Wk(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=Jn()),ts(K,this.relativeTarget)),X&&(this.animationValues=T,jk(T,y,this.latestValues,wt,nt,it)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=wt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Uo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{md.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Uc(0)),this.currentAnimation=Vk(this.motionValue,[0,1e3],{...g,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),g.onUpdate&&g.onUpdate(w)},onStop:()=>{},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:w,target:E,layout:y,latestValues:T}=g;if(!(!w||!E||!y)){if(this!==g&&this.layout&&y&&MS(this.options.animationType,this.layout.layoutBox,y.layoutBox)){E=this.target||Jn();const S=rr(this.layout.layoutBox.x);E.x.min=g.target.x.min,E.x.max=E.x.min+S;const N=rr(this.layout.layoutBox.y);E.y.min=g.target.y.min,E.y.max=E.y.min+N}ts(w,E),Tc(w,T),ih(this.projectionDeltaWithTransform,this.layoutCorrected,w,T)}}registerSharedNode(g,w){this.sharedNodes.has(g)||this.sharedNodes.set(g,new Qk),this.sharedNodes.get(g).add(w);const y=w.options.initialPromotionConfig;w.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(w):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){const{layoutId:g}=this.options;return g?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:g}=this.options;return g?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:w,preserveFollowOpacity:E}={}){const y=this.getStack();y&&y.promote(this,E),g&&(this.projectionDelta=void 0,this.needsReset=!0),w&&this.setOptions({transition:w})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetSkewAndRotation(){const{visualElement:g}=this.options;if(!g)return;let w=!1;const{latestValues:E}=g;if((E.z||E.rotate||E.rotateX||E.rotateY||E.rotateZ||E.skewX||E.skewY)&&(w=!0),!w)return;const y={};E.z&&Qg("z",g,y,this.animationValues);for(let T=0;T<Wg.length;T++)Qg(`rotate${Wg[T]}`,g,y,this.animationValues),Qg(`skew${Wg[T]}`,g,y,this.animationValues);g.render();for(const T in y)g.setStaticValue(T,y[T]),this.animationValues&&(this.animationValues[T]=y[T]);g.scheduleRender()}applyProjectionStyles(g,w){if(!this.instance||this.isSVG)return;if(!this.isVisible){g.visibility="hidden";return}const E=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,g.visibility="",g.opacity="",g.pointerEvents=gd(w?.pointerEvents)||"",g.transform=E?E(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=gd(w?.pointerEvents)||""),this.hasProjected&&!dl(this.latestValues)&&(g.transform=E?E({},""):"none",this.hasProjected=!1);return}g.visibility="";const T=y.animationValues||y.latestValues;this.applyTransformsToTarget();let S=Zk(this.projectionDeltaWithTransform,this.treeScale,T);E&&(S=E(T,S)),g.transform=S;const{x:N,y:k}=this.projectionDelta;g.transformOrigin=`${N.origin*100}% ${k.origin*100}% 0`,y.animationValues?g.opacity=y===this?T.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:g.opacity=y===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const z in xh){if(T[z]===void 0)continue;const{correct:X,applyTo:G,isCSSVariable:it}=xh[z],nt=S==="none"?T[z]:X(T[z],y);if(G){const K=G.length;for(let At=0;At<K;At++)g[G[At]]=nt}else it?this.options.visualElement.renderState.vars[z]=nt:g[z]=nt}this.options.layoutId&&(g.pointerEvents=y===this?gd(w?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>g.currentAnimation?.stop()),this.root.nodes.forEach(C_),this.root.sharedNodes.clear()}}}function tB(e){e.updateLayout()}function eB(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:l}=e.options,h=t.source!==e.layout.source;l==="size"?es(T=>{const S=h?t.measuredBox[T]:t.layoutBox[T],N=rr(S);S.min=n[T].min,S.max=S.min+N}):MS(l,t.layoutBox,n)&&es(T=>{const S=h?t.measuredBox[T]:t.layoutBox[T],N=rr(n[T]);S.max=S.min+N,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[T].max=e.relativeTarget[T].min+N)});const g=vc();ih(g,n,t.layoutBox);const w=vc();h?ih(w,e.applyTransform(r,!0),t.measuredBox):ih(w,n,t.layoutBox);const E=!RS(g);let y=!1;if(!e.resumeFrom){const T=e.getClosestProjectingParent();if(T&&!T.resumeFrom){const{snapshot:S,layout:N}=T;if(S&&N){const k=Jn();rh(k,t.layoutBox,S.layoutBox);const z=Jn();rh(z,n,N.layoutBox),NS(k,z)||(y=!0),T.options.layoutRoot&&(e.relativeTarget=z,e.relativeTargetOrigin=k,e.relativeParent=T)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:w,layoutDelta:g,hasLayoutChanged:E,hasRelativeLayoutChanged:y})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function nB(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function iB(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function rB(e){e.clearSnapshot()}function C_(e){e.clearMeasurements()}function b_(e){e.isLayoutDirty=!1}function sB(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function S_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function aB(e){e.resolveTargetDelta()}function oB(e){e.calcProjection()}function lB(e){e.resetSkewAndRotation()}function cB(e){e.removeLeadSnapshot()}function I_(e,t,n){e.translate=Mn(t.translate,0,n),e.scale=Mn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function R_(e,t,n,r){e.min=Mn(t.min,n.min,r),e.max=Mn(t.max,n.max,r)}function uB(e,t,n,r){R_(e.x,t.x,n.x,r),R_(e.y,t.y,n.y,r)}function hB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const fB={duration:.45,ease:[.4,0,.1,1]},N_=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),D_=N_("applewebkit/")&&!N_("chrome/")?Math.round:rs;function O_(e){e.min=D_(e.min),e.max=D_(e.max)}function dB(e){O_(e.x),O_(e.y)}function MS(e,t,n){return e==="position"||e==="preserve-aspect"&&!Ak(T_(t),T_(n),.2)}function gB(e){return e!==e.root&&e.scroll?.wasRoot}const mB=OS({attachResizeListener:(e,t)=>wh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zg={current:void 0},PS=OS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zg.current){const e=new mB({});e.mount(window),e.setOptions({layoutScroll:!0}),Zg.current=e}return Zg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),pB={pan:{Feature:Pk},drag:{Feature:Mk,ProjectionNode:PS,MeasureLayout:bS}};function M_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,h=r[l];h&&bn.postRender(()=>h(t,Bh(t)))}class yB extends Go{mount(){const{current:t}=this.node;t&&(this.unmount=jP(t,(n,r)=>(M_(this.node,r,"Start"),l=>M_(this.node,l,"End"))))}unmount(){}}class EB extends Go{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ph(wh(this.node.current,"focus",()=>this.onFocus()),wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function P_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),h=r[l];h&&bn.postRender(()=>h(t,Bh(t)))}class AB extends Go{mount(){const{current:t}=this.node;t&&(this.unmount=YP(t,(n,r)=>(P_(this.node,r,"Start"),(l,{success:h})=>P_(this.node,l,h?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ym=new WeakMap,Jg=new WeakMap,xB=e=>{const t=Ym.get(e.target);t&&t(e)},wB=e=>{e.forEach(xB)};function _B({root:e,...t}){const n=e||document;Jg.has(n)||Jg.set(n,{});const r=Jg.get(n),l=JSON.stringify(t);return r[l]||(r[l]=new IntersectionObserver(wB,{root:e,...t})),r[l]}function TB(e,t,n){const r=_B(t);return Ym.set(e,n),r.observe(e),()=>{Ym.delete(e),r.unobserve(e)}}const vB={some:0,all:1};class CB extends Go{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:l="some",once:h}=t,g={root:n?n.current:void 0,rootMargin:r,threshold:typeof l=="number"?l:vB[l]},w=E=>{const{isIntersecting:y}=E;if(this.isInView===y||(this.isInView=y,h&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:T,onViewportLeave:S}=this.node.getProps(),N=y?T:S;N&&N(E)};return TB(this.node.current,g,w)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(bB(t,n))&&this.startObserver()}unmount(){}}function bB({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SB={inView:{Feature:CB},tap:{Feature:AB},focus:{Feature:EB},hover:{Feature:yB}},IB={layout:{ProjectionNode:PS,MeasureLayout:bS}},RB={...dk,...SB,...pB,...IB},NB=RL(RB,HL);function DB({lang:e}){const t=[{id:1,text_zh:"咖啡券",text_en:"Coffee Coupon",points:30},{id:2,text_zh:"小點心",text_en:"Snack",points:50},{id:3,text_zh:"電影票",text_en:"Movie Ticket",points:200},{id:4,text_zh:"購物禮券",text_en:"Shopping Voucher",points:100},{id:5,text_zh:"電子產品折扣",text_en:"Electronics Discount",points:300}],{user:n,profile:r,setProfile:l}=ib(),[h,g]=st.useState([]),[w,E]=st.useState("progress"),[y,T]=st.useState([]),S=[50,100,250,500],N=async z=>{if(!n||y.includes(z))return;const X=20,G=No(Do,"profiles",n.uid);await Ud(G,{scores:(r.scores||0)+X,claimedMilestones:[...r.claimedMilestones||[],z]}),l({...r,scores:(r.scores||0)+X,claimedMilestones:[...r.claimedMilestones||[],z]}),T([...y,z]),alert(`🎉 你獲得額外 ${X} 分！`)};st.useEffect(()=>{if(!n)return;(async()=>{const X=No(Do,"profiles",n.uid),G=await Vd(X);if(G.exists()){const it=G.data();g(it.redeemedIds||[])}})()},[n]);const k=async z=>{if(!(!r||!n)&&r.scores>=z.points&&!h.includes(z.id)){const X=r.scores-z.points,G=[...h,z.id],it=No(Do,"profiles",n.uid);await Ud(it,{scores:X,redeemedIds:G}),l({...r,scores:X}),g(G),alert(e==="zh"?"🎉 兌換成功！":"🎉 Redeemed!")}};return Tt.jsxs("div",{className:"page-container",style:{maxWidth:500,margin:"0 auto",textAlign:"center"},children:[Tt.jsx("h2",{children:e==="zh"?"獎勵頁面":"Rewards Page"}),Tt.jsxs("div",{style:{marginBottom:20},children:[Tt.jsx("button",{onClick:()=>E("progress"),style:{marginRight:10,backgroundColor:w==="progress"?"#4caf50":"#eee",color:w==="progress"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:e==="zh"?"分數進度":"Progress"}),Tt.jsx("button",{onClick:()=>E("list"),style:{backgroundColor:w==="list"?"#4caf50":"#eee",color:w==="list"?"#fff":"#000",padding:"8px 16px",border:"none",borderRadius:6,cursor:"pointer"},children:e==="zh"?"可兌換獎勵":"Reward List"})]}),w==="progress"&&Tt.jsxs("div",{children:[Tt.jsxs("p",{children:[e==="zh"?"你的分數: ":"Your Score: "," ",r?.scores||0]}),Tt.jsx("div",{style:{height:50,width:500,backgroundColor:"#eee",borderRadius:15,overflow:"hidden",marginBottom:10},children:Tt.jsxs("div",{style:{position:"relative",height:50,backgroundColor:"#eee",borderRadius:15,marginBottom:20},children:[Tt.jsx("div",{style:{width:`${Math.min(r?.scores/S[S.length-1],1)*100}%`,height:"100%",background:"linear-gradient(90deg, #4caf50, #00e676)",borderRadius:15,transition:"width 0.5s ease-out"}}),S.map((z,X)=>{const G=r?.scores>=z,it=r?.claimedMilestones?.includes(z);return Tt.jsx(NB.span,{style:{position:"absolute",left:`${Math.min(z/S[S.length-1],1)*100}%`,top:0,transform:"translateX(-80%)",fontSize:35,cursor:G?"pointer":"default"},whileHover:G&&!it?{scale:1.3,rotate:-5}:{},whileTap:G&&!it?{scale:.9}:{},animate:it?{scale:[1.2,.8,1],rotate:[0,10,-10,0]}:{},transition:{duration:.5},onClick:()=>G&&!it&&N(z),children:it?"📦":"🎁"},X)})]})})]}),w==="list"&&Tt.jsx("ul",{style:{listStyle:"none",padding:0},children:t.map(z=>{const X=h.includes(z.id);return Tt.jsxs("li",{style:{marginBottom:10,padding:10,border:"1px solid #ccc",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:X?"#f6fff6":"#fff"},children:[Tt.jsxs("span",{children:[e==="zh"?z.text_zh:z.text_en," - ",z.points," ",e==="zh"?"分":"pts"]}),Tt.jsx("button",{onClick:()=>k(z),disabled:X||(r?.scores||0)<z.points,style:{padding:"5px 10px",border:"none",borderRadius:6,backgroundColor:X?"#9e9e9e":"#4caf50",color:"#fff",cursor:X||(r?.scores||0)<z.points?"not-allowed":"pointer"},children:X?e==="zh"?"已兌換":"Redeemed":e==="zh"?"兌換":"Redeem"})]},z.id)})})]})}var OB=Object.defineProperty,Yd=Object.getOwnPropertySymbols,LS=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable,L_=(e,t,n)=>t in e?OB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Km=(e,t)=>{for(var n in t||(t={}))LS.call(t,n)&&L_(e,n,t[n]);if(Yd)for(var n of Yd(t))kS.call(t,n)&&L_(e,n,t[n]);return e},Wm=(e,t)=>{var n={};for(var r in e)LS.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Yd)for(var r of Yd(e))t.indexOf(r)<0&&kS.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Rl;(e=>{const t=class Re{constructor(E,y,T,S){if(this.version=E,this.errorCorrectionLevel=y,this.modules=[],this.isFunction=[],E<Re.MIN_VERSION||E>Re.MAX_VERSION)throw new RangeError("Version value out of range");if(S<-1||S>7)throw new RangeError("Mask value out of range");this.size=E*4+17;let N=[];for(let z=0;z<this.size;z++)N.push(!1);for(let z=0;z<this.size;z++)this.modules.push(N.slice()),this.isFunction.push(N.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(T);if(this.drawCodewords(k),S==-1){let z=1e9;for(let X=0;X<8;X++){this.applyMask(X),this.drawFormatBits(X);const G=this.getPenaltyScore();G<z&&(S=X,z=G),this.applyMask(X)}}l(0<=S&&S<=7),this.mask=S,this.applyMask(S),this.drawFormatBits(S),this.isFunction=[]}static encodeText(E,y){const T=e.QrSegment.makeSegments(E);return Re.encodeSegments(T,y)}static encodeBinary(E,y){const T=e.QrSegment.makeBytes(E);return Re.encodeSegments([T],y)}static encodeSegments(E,y,T=1,S=40,N=-1,k=!0){if(!(Re.MIN_VERSION<=T&&T<=S&&S<=Re.MAX_VERSION)||N<-1||N>7)throw new RangeError("Invalid value");let z,X;for(z=T;;z++){const K=Re.getNumDataCodewords(z,y)*8,At=g.getTotalBits(E,z);if(At<=K){X=At;break}if(z>=S)throw new RangeError("Data too long")}for(const K of[Re.Ecc.MEDIUM,Re.Ecc.QUARTILE,Re.Ecc.HIGH])k&&X<=Re.getNumDataCodewords(z,K)*8&&(y=K);let G=[];for(const K of E){n(K.mode.modeBits,4,G),n(K.numChars,K.mode.numCharCountBits(z),G);for(const At of K.getData())G.push(At)}l(G.length==X);const it=Re.getNumDataCodewords(z,y)*8;l(G.length<=it),n(0,Math.min(4,it-G.length),G),n(0,(8-G.length%8)%8,G),l(G.length%8==0);for(let K=236;G.length<it;K^=253)n(K,8,G);let nt=[];for(;nt.length*8<G.length;)nt.push(0);return G.forEach((K,At)=>nt[At>>>3]|=K<<7-(At&7)),new Re(z,y,nt,N)}getModule(E,y){return 0<=E&&E<this.size&&0<=y&&y<this.size&&this.modules[y][E]}getModules(){return this.modules}drawFunctionPatterns(){for(let T=0;T<this.size;T++)this.setFunctionModule(6,T,T%2==0),this.setFunctionModule(T,6,T%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const E=this.getAlignmentPatternPositions(),y=E.length;for(let T=0;T<y;T++)for(let S=0;S<y;S++)T==0&&S==0||T==0&&S==y-1||T==y-1&&S==0||this.drawAlignmentPattern(E[T],E[S]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(E){const y=this.errorCorrectionLevel.formatBits<<3|E;let T=y;for(let N=0;N<10;N++)T=T<<1^(T>>>9)*1335;const S=(y<<10|T)^21522;l(S>>>15==0);for(let N=0;N<=5;N++)this.setFunctionModule(8,N,r(S,N));this.setFunctionModule(8,7,r(S,6)),this.setFunctionModule(8,8,r(S,7)),this.setFunctionModule(7,8,r(S,8));for(let N=9;N<15;N++)this.setFunctionModule(14-N,8,r(S,N));for(let N=0;N<8;N++)this.setFunctionModule(this.size-1-N,8,r(S,N));for(let N=8;N<15;N++)this.setFunctionModule(8,this.size-15+N,r(S,N));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let E=this.version;for(let T=0;T<12;T++)E=E<<1^(E>>>11)*7973;const y=this.version<<12|E;l(y>>>18==0);for(let T=0;T<18;T++){const S=r(y,T),N=this.size-11+T%3,k=Math.floor(T/3);this.setFunctionModule(N,k,S),this.setFunctionModule(k,N,S)}}drawFinderPattern(E,y){for(let T=-4;T<=4;T++)for(let S=-4;S<=4;S++){const N=Math.max(Math.abs(S),Math.abs(T)),k=E+S,z=y+T;0<=k&&k<this.size&&0<=z&&z<this.size&&this.setFunctionModule(k,z,N!=2&&N!=4)}}drawAlignmentPattern(E,y){for(let T=-2;T<=2;T++)for(let S=-2;S<=2;S++)this.setFunctionModule(E+S,y+T,Math.max(Math.abs(S),Math.abs(T))!=1)}setFunctionModule(E,y,T){this.modules[y][E]=T,this.isFunction[y][E]=!0}addEccAndInterleave(E){const y=this.version,T=this.errorCorrectionLevel;if(E.length!=Re.getNumDataCodewords(y,T))throw new RangeError("Invalid argument");const S=Re.NUM_ERROR_CORRECTION_BLOCKS[T.ordinal][y],N=Re.ECC_CODEWORDS_PER_BLOCK[T.ordinal][y],k=Math.floor(Re.getNumRawDataModules(y)/8),z=S-k%S,X=Math.floor(k/S);let G=[];const it=Re.reedSolomonComputeDivisor(N);for(let K=0,At=0;K<S;K++){let wt=E.slice(At,At+X-N+(K<z?0:1));At+=wt.length;const Rt=Re.reedSolomonComputeRemainder(wt,it);K<z&&wt.push(0),G.push(wt.concat(Rt))}let nt=[];for(let K=0;K<G[0].length;K++)G.forEach((At,wt)=>{(K!=X-N||wt>=z)&&nt.push(At[K])});return l(nt.length==k),nt}drawCodewords(E){if(E.length!=Math.floor(Re.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let y=0;for(let T=this.size-1;T>=1;T-=2){T==6&&(T=5);for(let S=0;S<this.size;S++)for(let N=0;N<2;N++){const k=T-N,X=(T+1&2)==0?this.size-1-S:S;!this.isFunction[X][k]&&y<E.length*8&&(this.modules[X][k]=r(E[y>>>3],7-(y&7)),y++)}}l(y==E.length*8)}applyMask(E){if(E<0||E>7)throw new RangeError("Mask value out of range");for(let y=0;y<this.size;y++)for(let T=0;T<this.size;T++){let S;switch(E){case 0:S=(T+y)%2==0;break;case 1:S=y%2==0;break;case 2:S=T%3==0;break;case 3:S=(T+y)%3==0;break;case 4:S=(Math.floor(T/3)+Math.floor(y/2))%2==0;break;case 5:S=T*y%2+T*y%3==0;break;case 6:S=(T*y%2+T*y%3)%2==0;break;case 7:S=((T+y)%2+T*y%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[y][T]&&S&&(this.modules[y][T]=!this.modules[y][T])}}getPenaltyScore(){let E=0;for(let N=0;N<this.size;N++){let k=!1,z=0,X=[0,0,0,0,0,0,0];for(let G=0;G<this.size;G++)this.modules[N][G]==k?(z++,z==5?E+=Re.PENALTY_N1:z>5&&E++):(this.finderPenaltyAddHistory(z,X),k||(E+=this.finderPenaltyCountPatterns(X)*Re.PENALTY_N3),k=this.modules[N][G],z=1);E+=this.finderPenaltyTerminateAndCount(k,z,X)*Re.PENALTY_N3}for(let N=0;N<this.size;N++){let k=!1,z=0,X=[0,0,0,0,0,0,0];for(let G=0;G<this.size;G++)this.modules[G][N]==k?(z++,z==5?E+=Re.PENALTY_N1:z>5&&E++):(this.finderPenaltyAddHistory(z,X),k||(E+=this.finderPenaltyCountPatterns(X)*Re.PENALTY_N3),k=this.modules[G][N],z=1);E+=this.finderPenaltyTerminateAndCount(k,z,X)*Re.PENALTY_N3}for(let N=0;N<this.size-1;N++)for(let k=0;k<this.size-1;k++){const z=this.modules[N][k];z==this.modules[N][k+1]&&z==this.modules[N+1][k]&&z==this.modules[N+1][k+1]&&(E+=Re.PENALTY_N2)}let y=0;for(const N of this.modules)y=N.reduce((k,z)=>k+(z?1:0),y);const T=this.size*this.size,S=Math.ceil(Math.abs(y*20-T*10)/T)-1;return l(0<=S&&S<=9),E+=S*Re.PENALTY_N4,l(0<=E&&E<=2568888),E}getAlignmentPatternPositions(){if(this.version==1)return[];{const E=Math.floor(this.version/7)+2,y=this.version==32?26:Math.ceil((this.version*4+4)/(E*2-2))*2;let T=[6];for(let S=this.size-7;T.length<E;S-=y)T.splice(1,0,S);return T}}static getNumRawDataModules(E){if(E<Re.MIN_VERSION||E>Re.MAX_VERSION)throw new RangeError("Version number out of range");let y=(16*E+128)*E+64;if(E>=2){const T=Math.floor(E/7)+2;y-=(25*T-10)*T-55,E>=7&&(y-=36)}return l(208<=y&&y<=29648),y}static getNumDataCodewords(E,y){return Math.floor(Re.getNumRawDataModules(E)/8)-Re.ECC_CODEWORDS_PER_BLOCK[y.ordinal][E]*Re.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][E]}static reedSolomonComputeDivisor(E){if(E<1||E>255)throw new RangeError("Degree out of range");let y=[];for(let S=0;S<E-1;S++)y.push(0);y.push(1);let T=1;for(let S=0;S<E;S++){for(let N=0;N<y.length;N++)y[N]=Re.reedSolomonMultiply(y[N],T),N+1<y.length&&(y[N]^=y[N+1]);T=Re.reedSolomonMultiply(T,2)}return y}static reedSolomonComputeRemainder(E,y){let T=y.map(S=>0);for(const S of E){const N=S^T.shift();T.push(0),y.forEach((k,z)=>T[z]^=Re.reedSolomonMultiply(k,N))}return T}static reedSolomonMultiply(E,y){if(E>>>8||y>>>8)throw new RangeError("Byte out of range");let T=0;for(let S=7;S>=0;S--)T=T<<1^(T>>>7)*285,T^=(y>>>S&1)*E;return l(T>>>8==0),T}finderPenaltyCountPatterns(E){const y=E[1];l(y<=this.size*3);const T=y>0&&E[2]==y&&E[3]==y*3&&E[4]==y&&E[5]==y;return(T&&E[0]>=y*4&&E[6]>=y?1:0)+(T&&E[6]>=y*4&&E[0]>=y?1:0)}finderPenaltyTerminateAndCount(E,y,T){return E&&(this.finderPenaltyAddHistory(y,T),y=0),y+=this.size,this.finderPenaltyAddHistory(y,T),this.finderPenaltyCountPatterns(T)}finderPenaltyAddHistory(E,y){y[0]==0&&(E+=this.size),y.pop(),y.unshift(E)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(w,E,y){if(E<0||E>31||w>>>E)throw new RangeError("Value out of range");for(let T=E-1;T>=0;T--)y.push(w>>>T&1)}function r(w,E){return(w>>>E&1)!=0}function l(w){if(!w)throw new Error("Assertion error")}const h=class Hn{constructor(E,y,T){if(this.mode=E,this.numChars=y,this.bitData=T,y<0)throw new RangeError("Invalid argument");this.bitData=T.slice()}static makeBytes(E){let y=[];for(const T of E)n(T,8,y);return new Hn(Hn.Mode.BYTE,E.length,y)}static makeNumeric(E){if(!Hn.isNumeric(E))throw new RangeError("String contains non-numeric characters");let y=[];for(let T=0;T<E.length;){const S=Math.min(E.length-T,3);n(parseInt(E.substring(T,T+S),10),S*3+1,y),T+=S}return new Hn(Hn.Mode.NUMERIC,E.length,y)}static makeAlphanumeric(E){if(!Hn.isAlphanumeric(E))throw new RangeError("String contains unencodable characters in alphanumeric mode");let y=[],T;for(T=0;T+2<=E.length;T+=2){let S=Hn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(T))*45;S+=Hn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(T+1)),n(S,11,y)}return T<E.length&&n(Hn.ALPHANUMERIC_CHARSET.indexOf(E.charAt(T)),6,y),new Hn(Hn.Mode.ALPHANUMERIC,E.length,y)}static makeSegments(E){return E==""?[]:Hn.isNumeric(E)?[Hn.makeNumeric(E)]:Hn.isAlphanumeric(E)?[Hn.makeAlphanumeric(E)]:[Hn.makeBytes(Hn.toUtf8ByteArray(E))]}static makeEci(E){let y=[];if(E<0)throw new RangeError("ECI assignment value out of range");if(E<128)n(E,8,y);else if(E<16384)n(2,2,y),n(E,14,y);else if(E<1e6)n(6,3,y),n(E,21,y);else throw new RangeError("ECI assignment value out of range");return new Hn(Hn.Mode.ECI,0,y)}static isNumeric(E){return Hn.NUMERIC_REGEX.test(E)}static isAlphanumeric(E){return Hn.ALPHANUMERIC_REGEX.test(E)}getData(){return this.bitData.slice()}static getTotalBits(E,y){let T=0;for(const S of E){const N=S.mode.numCharCountBits(y);if(S.numChars>=1<<N)return 1/0;T+=4+N+S.bitData.length}return T}static toUtf8ByteArray(E){E=encodeURI(E);let y=[];for(let T=0;T<E.length;T++)E.charAt(T)!="%"?y.push(E.charCodeAt(T)):(y.push(parseInt(E.substring(T+1,T+3),16)),T+=2);return y}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=h;e.QrSegment=h})(Rl||(Rl={}));(e=>{(t=>{const n=class{constructor(l,h){this.ordinal=l,this.formatBits=h}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Rl||(Rl={}));(e=>{(t=>{const n=class{constructor(l,h){this.modeBits=l,this.numBitsCharCount=h}numCharCountBits(l){return this.numBitsCharCount[Math.floor((l+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Rl||(Rl={}));var Cc=Rl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var MB={L:Cc.QrCode.Ecc.LOW,M:Cc.QrCode.Ecc.MEDIUM,Q:Cc.QrCode.Ecc.QUARTILE,H:Cc.QrCode.Ecc.HIGH},BS=128,VS="L",US="#FFFFFF",FS="#000000",zS=!1,HS=1,PB=4,LB=0,kB=.1;function jS(e,t=0){const n=[];return e.forEach(function(r,l){let h=null;r.forEach(function(g,w){if(!g&&h!==null){n.push(`M${h+t} ${l+t}h${w-h}v1H${h+t}z`),h=null;return}if(w===r.length-1){if(!g)return;h===null?n.push(`M${w+t},${l+t} h1v1H${w+t}z`):n.push(`M${h+t},${l+t} h${w+1-h}v1H${h+t}z`);return}g&&h===null&&(h=w)})}),n.join("")}function GS(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((l,h)=>h<t.x||h>=t.x+t.w?l:!1))}function BB(e,t,n,r){if(r==null)return null;const l=e.length+n*2,h=Math.floor(t*kB),g=l/t,w=(r.width||h)*g,E=(r.height||h)*g,y=r.x==null?e.length/2-w/2:r.x*g,T=r.y==null?e.length/2-E/2:r.y*g,S=r.opacity==null?1:r.opacity;let N=null;if(r.excavate){let z=Math.floor(y),X=Math.floor(T),G=Math.ceil(w+y-z),it=Math.ceil(E+T-X);N={x:z,y:X,w:G,h:it}}const k=r.crossOrigin;return{x:y,y:T,h:E,w,excavation:N,opacity:S,crossOrigin:k}}function VB(e,t){return t!=null?Math.max(Math.floor(t),0):e?PB:LB}function qS({value:e,level:t,minVersion:n,includeMargin:r,marginSize:l,imageSettings:h,size:g,boostLevel:w}){let E=fi.useMemo(()=>{const z=(Array.isArray(e)?e:[e]).reduce((X,G)=>(X.push(...Cc.QrSegment.makeSegments(G)),X),[]);return Cc.QrCode.encodeSegments(z,MB[t],n,void 0,void 0,w)},[e,t,n,w]);const{cells:y,margin:T,numCells:S,calculatedImageSettings:N}=fi.useMemo(()=>{let k=E.getModules();const z=VB(r,l),X=k.length+z*2,G=BB(k,g,z,h);return{cells:k,margin:z,numCells:X,calculatedImageSettings:G}},[E,g,h,r,l]);return{qrcode:E,margin:T,cells:y,numCells:S,calculatedImageSettings:N}}var UB=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),XS=fi.forwardRef(function(t,n){const r=t,{value:l,size:h=BS,level:g=VS,bgColor:w=US,fgColor:E=FS,includeMargin:y=zS,minVersion:T=HS,boostLevel:S,marginSize:N,imageSettings:k}=r,X=Wm(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:G}=X,it=Wm(X,["style"]),nt=k?.src,K=fi.useRef(null),At=fi.useRef(null),wt=fi.useCallback(Jt=>{K.current=Jt,typeof n=="function"?n(Jt):n&&(n.current=Jt)},[n]),[Rt,H]=fi.useState(!1),{margin:U,cells:V,numCells:tt,calculatedImageSettings:W}=qS({value:l,level:g,minVersion:T,boostLevel:S,includeMargin:y,marginSize:N,imageSettings:k,size:h});fi.useEffect(()=>{if(K.current!=null){const Jt=K.current,ht=Jt.getContext("2d");if(!ht)return;let yt=V;const xt=At.current,Ft=W!=null&&xt!==null&&xt.complete&&xt.naturalHeight!==0&&xt.naturalWidth!==0;Ft&&W.excavation!=null&&(yt=GS(V,W.excavation));const $t=window.devicePixelRatio||1;Jt.height=Jt.width=h*$t;const J=h/tt*$t;ht.scale(J,J),ht.fillStyle=w,ht.fillRect(0,0,tt,tt),ht.fillStyle=E,UB?ht.fill(new Path2D(jS(yt,U))):V.forEach(function(bt,Bt){bt.forEach(function(Vt,zt){Vt&&ht.fillRect(zt+U,Bt+U,1,1)})}),W&&(ht.globalAlpha=W.opacity),Ft&&ht.drawImage(xt,W.x+U,W.y+U,W.w,W.h)}}),fi.useEffect(()=>{H(!1)},[nt]);const Z=Km({height:h,width:h},G);let Y=null;return nt!=null&&(Y=fi.createElement("img",{src:nt,key:nt,style:{display:"none"},onLoad:()=>{H(!0)},ref:At,crossOrigin:W?.crossOrigin})),fi.createElement(fi.Fragment,null,fi.createElement("canvas",Km({style:Z,height:h,width:h,ref:wt,role:"img"},it)),Y)});XS.displayName="QRCodeCanvas";var FB=fi.forwardRef(function(t,n){const r=t,{value:l,size:h=BS,level:g=VS,bgColor:w=US,fgColor:E=FS,includeMargin:y=zS,minVersion:T=HS,boostLevel:S,title:N,marginSize:k,imageSettings:z}=r,X=Wm(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:G,cells:it,numCells:nt,calculatedImageSettings:K}=qS({value:l,level:g,minVersion:T,boostLevel:S,includeMargin:y,marginSize:k,imageSettings:z,size:h});let At=it,wt=null;z!=null&&K!=null&&(K.excavation!=null&&(At=GS(it,K.excavation)),wt=fi.createElement("image",{href:z.src,height:K.h,width:K.w,x:K.x+G,y:K.y+G,preserveAspectRatio:"none",opacity:K.opacity,crossOrigin:K.crossOrigin}));const Rt=jS(At,G);return fi.createElement("svg",Km({height:h,width:h,viewBox:`0 0 ${nt} ${nt}`,ref:n,role:"img"},X),!!N&&fi.createElement("title",null,N),fi.createElement("path",{fill:w,d:`M0,0 h${nt}v${nt}H0z`,shapeRendering:"crispEdges"}),fi.createElement("path",{fill:E,d:Rt,shapeRendering:"crispEdges"}),wt)});FB.displayName="QRCodeSVG";function zB({profile:e}){if(!e)return null;const t={name:e.name,title:e.title,years:e.years,factory:e.factory,phone:e.phone,birthday:e.birthday,email:e.email};return Tt.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[Tt.jsx("h3",{className:"font-semibold text-sm",children:"我的 QR Code"}),Tt.jsx(XS,{value:JSON.stringify(t),size:180,bgColor:"#ffffff",fgColor:"#000000",level:"Q",includeMargin:!0})]})}var Gt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Gt||(Gt={}));var k_=new Map([[Gt.QR_CODE,"QR_CODE"],[Gt.AZTEC,"AZTEC"],[Gt.CODABAR,"CODABAR"],[Gt.CODE_39,"CODE_39"],[Gt.CODE_93,"CODE_93"],[Gt.CODE_128,"CODE_128"],[Gt.DATA_MATRIX,"DATA_MATRIX"],[Gt.MAXICODE,"MAXICODE"],[Gt.ITF,"ITF"],[Gt.EAN_13,"EAN_13"],[Gt.EAN_8,"EAN_8"],[Gt.PDF_417,"PDF_417"],[Gt.RSS_14,"RSS_14"],[Gt.RSS_EXPANDED,"RSS_EXPANDED"],[Gt.UPC_A,"UPC_A"],[Gt.UPC_E,"UPC_E"],[Gt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),B_;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(B_||(B_={}));function HB(e){return Object.values(Gt).includes(e)}var Kd;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Kd||(Kd={}));var jB=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Kd.SCAN_TYPE_CAMERA,Kd.SCAN_TYPE_FILE],e})(),YS=(function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!k_.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,k_.get(t))},e})(),V_=(function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Qm;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Qm||(Qm={}));var GB=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Qm.UNKWOWN_ERROR}},e})(),qB=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function Da(e){return typeof e>"u"||e===null}var bc=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),KS=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(l),g=Object.keys(t),w=0,E=g;w<E.length;w++){var y=E[w];if(h.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},e})(),qu={exports:{}},XB=qu.exports,U_;function YB(){return U_||(U_=1,(function(e,t){(function(n,r){r(t)})(XB,(function(n){function r(M){return M==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,s){M.__proto__=s}||function(M,s){for(var o in s)s.hasOwnProperty(o)&&(M[o]=s[o])};function h(M,s){l(M,s);function o(){this.constructor=M}M.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function g(M,s){var o=Object.setPrototypeOf;o?o(M,s):M.__proto__=s}function w(M,s){s===void 0&&(s=M.constructor);var o=Error.captureStackTrace;o&&o(M,s)}var E=(function(M){h(s,M);function s(o){var c=this.constructor,f=M.call(this,o)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),g(f,c.prototype),w(f),f}return s})(Error);class y extends E{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}y.kind="Exception";class T extends y{}T.kind="ArgumentException";class S extends y{}S.kind="IllegalArgumentException";class N{constructor(s){if(this.binarizer=s,s===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,c,f){const d=this.binarizer.getLuminanceSource().crop(s,o,c,f);return new N(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends y{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class z{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class X{static arraycopy(s,o,c,f,d){for(;d--;)c[f++]=s[o++]}static currentTimeMillis(){return Date.now()}}class G extends y{}G.kind="IndexOutOfBoundsException";class it extends G{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}it.kind="ArrayIndexOutOfBoundsException";class nt{static fill(s,o){for(let c=0,f=s.length;c<f;c++)s[c]=o}static fillWithin(s,o,c,f){nt.rangeCheck(s.length,o,c);for(let d=o;d<c;d++)s[d]=f}static rangeCheck(s,o,c){if(o>c)throw new S("fromIndex("+o+") > toIndex("+c+")");if(o<0)throw new it(o);if(c>s)throw new it(c)}static asList(...s){return s}static create(s,o,c){return Array.from({length:s}).map(d=>Array.from({length:o}).fill(c))}static createInt32Array(s,o,c){return Array.from({length:s}).map(d=>Int32Array.from({length:o}).fill(c))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let c=0,f=s.length;c<f;c++)if(s[c]!==o[c])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const c of s)o=31*o+c;return o}static fillUint8Array(s,o){for(let c=0;c!==s.length;c++)s[c]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const c=new Uint8Array(o);return c.set(s),c}return s.slice(0,o)}static copyOfRange(s,o,c){const f=c-o,d=new Int32Array(f);return X.arraycopy(s,o,d,0,f),d}static binarySearch(s,o,c){c===void 0&&(c=nt.numberComparator);let f=0,d=s.length-1;for(;f<=d;){const p=d+f>>1,x=c(o,s[p]);if(x>0)f=p+1;else if(x<0)d=p-1;else return p}return-f-1}static numberComparator(s,o){return s-o}}class K{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let c=31;return o=s<<16,o!==0&&(c-=16,s=o),o=s<<8,o!==0&&(c-=8,s=o),o=s<<4,o!==0&&(c-=4,s=o),o=s<<2,o!==0&&(c-=2,s=o),c-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class At{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=At.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=At.makeArray(s);X.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const c=this.bits;let f=Math.floor(s/32),d=c[f];d&=~((1<<(s&31))-1);const p=c.length;for(;d===0;){if(++f===p)return o;d=c[f]}const x=f*32+K.numberOfTrailingZeros(d);return x>o?o:x}getNextUnset(s){const o=this.size;if(s>=o)return o;const c=this.bits;let f=Math.floor(s/32),d=~c[f];d&=~((1<<(s&31))-1);const p=c.length;for(;d===0;){if(++f===p)return o;d=~c[f]}const x=f*32+K.numberOfTrailingZeros(d);return x>o?o:x}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new S;if(o===s)return;o--;const c=Math.floor(s/32),f=Math.floor(o/32),d=this.bits;for(let p=c;p<=f;p++){const x=p>c?0:s&31,b=(2<<(p<f?31:o&31))-(1<<x);d[p]|=b}}clear(){const s=this.bits.length,o=this.bits;for(let c=0;c<s;c++)o[c]=0}isRange(s,o,c){if(o<s||s<0||o>this.size)throw new S;if(o===s)return!0;o--;const f=Math.floor(s/32),d=Math.floor(o/32),p=this.bits;for(let x=f;x<=d;x++){const v=x>f?0:s&31,R=(2<<(x<d?31:o&31))-(1<<v)&4294967295;if((p[x]&R)!==(c?R:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let c=o;c>0;c--)this.appendBit((s>>c-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let c=0;c<o;c++)this.appendBit(s.get(c))}xor(s){if(this.size!==s.size)throw new S("Sizes don't match");const o=this.bits;for(let c=0,f=o.length;c<f;c++)o[c]^=s.bits[c]}toBytes(s,o,c,f){for(let d=0;d<f;d++){let p=0;for(let x=0;x<8;x++)this.get(s)&&(p|=1<<7-x),s++;o[c+d]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),c=o+1,f=this.bits;for(let d=0;d<c;d++){let p=f[d];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[o-d]=p}if(this.size!==c*32){const d=c*32-this.size;let p=s[0]>>>d;for(let x=1;x<c;x++){const v=s[x];p|=v<<32-d,s[x-1]=p,p=v>>>d}s[c-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof At))return!1;const o=s;return this.size===o.size&&nt.equals(this.bits,o.bits)}hashCode(){return 31*this.size+nt.hashCode(this.bits)}toString(){let s="";for(let o=0,c=this.size;o<c;o++)(o&7)===0&&(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new At(this.size,this.bits.slice())}}var wt;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(wt||(wt={}));var Rt=wt;class H extends y{static getFormatInstance(){return new H}}H.kind="FormatException";var U;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(U||(U={}));class V{constructor(s,o,c,...f){this.valueIdentifier=s,this.name=c,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,V.VALUE_IDENTIFIER_TO_ECI.set(s,this),V.NAME_TO_ECI.set(c,this);const d=this.values;for(let p=0,x=d.length;p!==x;p++){const v=d[p];V.VALUES_TO_ECI.set(v,this)}for(const p of f)V.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new H("incorect value");const o=V.VALUES_TO_ECI.get(s);if(o===void 0)throw new H("incorect value");return o}static getCharacterSetECIByName(s){const o=V.NAME_TO_ECI.get(s);if(o===void 0)throw new H("incorect value");return o}equals(s){if(!(s instanceof V))return!1;const o=s;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(U.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(U.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(U.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(U.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(U.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(U.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(U.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(U.Big5,28,"Big5"),V.GB18030=new V(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(U.EUC_KR,30,"EUC_KR","EUC-KR");class tt extends y{}tt.kind="UnsupportedOperationException";class W{static decode(s,o){const c=this.encodingName(o);return this.customDecoder?this.customDecoder(s,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(s,c):new TextDecoder(c).decode(s)}static shouldDecodeOnFallback(s){return!W.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const c=this.encodingName(o);return this.customEncoder?this.customEncoder(s,c):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof V?s:V.getCharacterSetECIByName(s)}static decodeFallback(s,o){const c=this.encodingCharacterSet(o);if(W.isDecodeFallbackSupported(c)){let f="";for(let d=0,p=s.length;d<p;d++){let x=s[d].toString(16);x.length<2&&(x="0"+x),f+="%"+x}return decodeURIComponent(f)}if(c.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new tt(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(V.UTF8)||s.equals(V.ISO8859_1)||s.equals(V.ASCII)}static encodeFallback(s){const c=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let d=0;d<c.length;d++)f.push(c[d].charCodeAt(0));return new Uint8Array(f)}}class Z{static castAsNonUtf8Char(s,o=null){const c=o?o.getName():this.ISO88591;return W.decode(new Uint8Array([s]),c)}static guessEncoding(s,o){if(o!=null&&o.get(Rt.CHARACTER_SET)!==void 0)return o.get(Rt.CHARACTER_SET).toString();const c=s.length;let f=!0,d=!0,p=!0,x=0,v=0,b=0,R=0,P=0,L=0,q=0,$=0,et=0,lt=0,gt=0;const Mt=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let Lt=0;Lt<c&&(f||d||p);Lt++){const Nt=s[Lt]&255;p&&(x>0?(Nt&128)===0?p=!1:x--:(Nt&128)!==0&&((Nt&64)===0?p=!1:(x++,(Nt&32)===0?v++:(x++,(Nt&16)===0?b++:(x++,(Nt&8)===0?R++:p=!1))))),f&&(Nt>127&&Nt<160?f=!1:Nt>159&&(Nt<192||Nt===215||Nt===247)&&gt++),d&&(P>0?Nt<64||Nt===127||Nt>252?d=!1:P--:Nt===128||Nt===160||Nt>239?d=!1:Nt>160&&Nt<224?(L++,$=0,q++,q>et&&(et=q)):Nt>127?(P++,q=0,$++,$>lt&&(lt=$)):(q=0,$=0))}return p&&x>0&&(p=!1),d&&P>0&&(d=!1),p&&(Mt||v+b+R>0)?Z.UTF8:d&&(Z.ASSUME_SHIFT_JIS||et>=3||lt>=3)?Z.SHIFT_JIS:f&&d?et===2&&L===2||gt*10>=c?Z.SHIFT_JIS:Z.ISO88591:f?Z.ISO88591:d?Z.SHIFT_JIS:p?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let c=-1;function f(p,x,v,b,R,P){if(p==="%%")return"%";if(o[++c]===void 0)return;p=b?parseInt(b.substr(1)):void 0;let L=R?parseInt(R.substr(1)):void 0,q;switch(P){case"s":q=o[c];break;case"c":q=o[c][0];break;case"f":q=parseFloat(o[c]).toFixed(p);break;case"p":q=parseFloat(o[c]).toPrecision(p);break;case"e":q=parseFloat(o[c]).toExponential(p);break;case"x":q=parseInt(o[c]).toString(L||16);break;case"d":q=parseFloat(parseInt(o[c],L||10).toPrecision(p)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(L);let $=parseInt(v),et=v&&v[0]+""=="0"?"0":" ";for(;q.length<$;)q=x!==void 0?q+et:et+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,f)}static getBytes(s,o){return W.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}Z.SHIFT_JIS=V.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=V.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=V.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class Y{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,c){for(let f=o;o<o+c;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class Jt{constructor(s,o,c,f){if(this.width=s,this.height=o,this.rowSize=c,this.bits=f,o==null&&(o=s),this.height=o,s<1||o<1)throw new S("Both dimensions must be greater than 0");c==null&&(c=Math.floor((s+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,c=s[0].length,f=new Jt(c,o);for(let d=0;d<o;d++){const p=s[d];for(let x=0;x<c;x++)p[x]&&f.set(x,d)}return f}static parseFromString(s,o,c){if(s===null)throw new S("stringRepresentation cannot be null");const f=new Array(s.length);let d=0,p=0,x=-1,v=0,b=0;for(;b<s.length;)if(s.charAt(b)===`
`||s.charAt(b)==="\r"){if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new S("row lengths do not match");p=d,v++}b++}else if(s.substring(b,b+o.length)===o)b+=o.length,f[d]=!0,d++;else if(s.substring(b,b+c.length)===c)b+=c.length,f[d]=!1,d++;else throw new S("illegal character encountered: "+s.substring(b));if(d>p){if(x===-1)x=d-p;else if(d-p!==x)throw new S("row lengths do not match");v++}const R=new Jt(x,v);for(let P=0;P<d;P++)f[P]&&R.set(Math.floor(P%x),Math.floor(P/x));return R}get(s,o){const c=o*this.rowSize+Math.floor(s/32);return(this.bits[c]>>>(s&31)&1)!==0}set(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]|=1<<(s&31)&4294967295}unset(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]&=~(1<<(s&31)&4294967295)}flip(s,o){const c=o*this.rowSize+Math.floor(s/32);this.bits[c]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new S("input matrix dimensions do not match");const o=new At(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let d=0,p=this.height;d<p;d++){const x=d*c,v=s.getRow(d,o).getBitArray();for(let b=0;b<c;b++)f[x+b]^=v[b]}}clear(){const s=this.bits,o=s.length;for(let c=0;c<o;c++)s[c]=0}setRegion(s,o,c,f){if(o<0||s<0)throw new S("Left and top must be nonnegative");if(f<1||c<1)throw new S("Height and width must be at least 1");const d=s+c,p=o+f;if(p>this.height||d>this.width)throw new S("The region must fit inside the matrix");const x=this.rowSize,v=this.bits;for(let b=o;b<p;b++){const R=b*x;for(let P=s;P<d;P++)v[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new At(this.width):o.clear();const c=this.rowSize,f=this.bits,d=s*c;for(let p=0;p<c;p++)o.setBulk(p*32,f[d+p]);return o}setRow(s,o){X.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let c=new At(s),f=new At(s);for(let d=0,p=Math.floor((o+1)/2);d<p;d++)c=this.getRow(d,c),f=this.getRow(o-1-d,f),c.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,c)}getEnclosingRectangle(){const s=this.width,o=this.height,c=this.rowSize,f=this.bits;let d=s,p=o,x=-1,v=-1;for(let b=0;b<o;b++)for(let R=0;R<c;R++){const P=f[b*c+R];if(P!==0){if(b<p&&(p=b),b>v&&(v=b),R*32<d){let L=0;for(;(P<<31-L&4294967295)===0;)L++;R*32+L<d&&(d=R*32+L)}if(R*32+31>x){let L=31;for(;!(P>>>L);)L--;R*32+L>x&&(x=R*32+L)}}}return x<d||v<p?null:Int32Array.from([d,p,x-d+1,v-p+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let c=0;for(;c<o.length&&o[c]===0;)c++;if(c===o.length)return null;const f=c/s;let d=c%s*32;const p=o[c];let x=0;for(;(p<<31-x&4294967295)===0;)x++;return d+=x,Int32Array.from([d,f])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let c=o.length-1;for(;c>=0&&o[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/s);let d=Math.floor(c%s)*32;const p=o[c];let x=31;for(;!(p>>>x);)x--;return d+=x,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof Jt))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&nt.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+nt.hashCode(this.bits),s}toString(s="X ",o="  ",c=`
`){return this.buildToString(s,o,c)}buildToString(s,o,c){let f=new Y;for(let d=0,p=this.height;d<p;d++){for(let x=0,v=this.width;x<v;x++)f.append(this.get(x,d)?s:o);f.append(c)}return f.toString()}clone(){return new Jt(this.width,this.height,this.rowSize,this.bits.slice())}}class ht extends y{static getNotFoundInstance(){return new ht}}ht.kind="NotFoundException";class yt extends z{constructor(s){super(s),this.luminances=yt.EMPTY,this.buckets=new Int32Array(yt.LUMINANCE_BUCKETS)}getBlackRow(s,o){const c=this.getLuminanceSource(),f=c.getWidth();o==null||o.getSize()<f?o=new At(f):o.clear(),this.initArrays(f);const d=c.getRow(s,this.luminances),p=this.buckets;for(let v=0;v<f;v++)p[(d[v]&255)>>yt.LUMINANCE_SHIFT]++;const x=yt.estimateBlackPoint(p);if(f<3)for(let v=0;v<f;v++)(d[v]&255)<x&&o.set(v);else{let v=d[0]&255,b=d[1]&255;for(let R=1;R<f-1;R++){const P=d[R+1]&255;(b*4-v-P)/2<x&&o.set(R),v=b,b=P}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight(),f=new Jt(o,c);this.initArrays(o);const d=this.buckets;for(let v=1;v<5;v++){const b=Math.floor(c*v/5),R=s.getRow(b,this.luminances),P=Math.floor(o*4/5);for(let L=Math.floor(o/5);L<P;L++){const q=R[L]&255;d[q>>yt.LUMINANCE_SHIFT]++}}const p=yt.estimateBlackPoint(d),x=s.getMatrix();for(let v=0;v<c;v++){const b=v*o;for(let R=0;R<o;R++)(x[b+R]&255)<p&&f.set(R,v)}return f}createBinarizer(s){return new yt(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let c=0;c<yt.LUMINANCE_BUCKETS;c++)o[c]=0}static estimateBlackPoint(s){const o=s.length;let c=0,f=0,d=0;for(let R=0;R<o;R++)s[R]>d&&(f=R,d=s[R]),s[R]>c&&(c=s[R]);let p=0,x=0;for(let R=0;R<o;R++){const P=R-f,L=s[R]*P*P;L>x&&(p=R,x=L)}if(f>p){const R=f;f=p,p=R}if(p-f<=o/16)throw new ht;let v=p-1,b=-1;for(let R=p-1;R>f;R--){const P=R-f,L=P*P*(p-R)*(c-s[R]);L>b&&(v=R,b=L)}return v<<yt.LUMINANCE_SHIFT}}yt.LUMINANCE_BITS=5,yt.LUMINANCE_SHIFT=8-yt.LUMINANCE_BITS,yt.LUMINANCE_BUCKETS=1<<yt.LUMINANCE_BITS,yt.EMPTY=Uint8ClampedArray.from([0]);class xt extends yt{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),c=s.getHeight();if(o>=xt.MINIMUM_DIMENSION&&c>=xt.MINIMUM_DIMENSION){const f=s.getMatrix();let d=o>>xt.BLOCK_SIZE_POWER;(o&xt.BLOCK_SIZE_MASK)!==0&&d++;let p=c>>xt.BLOCK_SIZE_POWER;(c&xt.BLOCK_SIZE_MASK)!==0&&p++;const x=xt.calculateBlackPoints(f,d,p,o,c),v=new Jt(o,c);xt.calculateThresholdForBlock(f,d,p,o,c,x,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new xt(s)}static calculateThresholdForBlock(s,o,c,f,d,p,x){const v=d-xt.BLOCK_SIZE,b=f-xt.BLOCK_SIZE;for(let R=0;R<c;R++){let P=R<<xt.BLOCK_SIZE_POWER;P>v&&(P=v);const L=xt.cap(R,2,c-3);for(let q=0;q<o;q++){let $=q<<xt.BLOCK_SIZE_POWER;$>b&&($=b);const et=xt.cap(q,2,o-3);let lt=0;for(let Mt=-2;Mt<=2;Mt++){const Lt=p[L+Mt];lt+=Lt[et-2]+Lt[et-1]+Lt[et]+Lt[et+1]+Lt[et+2]}const gt=lt/25;xt.thresholdBlock(s,$,P,gt,f,x)}}}static cap(s,o,c){return s<o?o:s>c?c:s}static thresholdBlock(s,o,c,f,d,p){for(let x=0,v=c*d+o;x<xt.BLOCK_SIZE;x++,v+=d)for(let b=0;b<xt.BLOCK_SIZE;b++)(s[v+b]&255)<=f&&p.set(o+b,c+x)}static calculateBlackPoints(s,o,c,f,d){const p=d-xt.BLOCK_SIZE,x=f-xt.BLOCK_SIZE,v=new Array(c);for(let b=0;b<c;b++){v[b]=new Int32Array(o);let R=b<<xt.BLOCK_SIZE_POWER;R>p&&(R=p);for(let P=0;P<o;P++){let L=P<<xt.BLOCK_SIZE_POWER;L>x&&(L=x);let q=0,$=255,et=0;for(let gt=0,Mt=R*f+L;gt<xt.BLOCK_SIZE;gt++,Mt+=f){for(let Lt=0;Lt<xt.BLOCK_SIZE;Lt++){const Nt=s[Mt+Lt]&255;q+=Nt,Nt<$&&($=Nt),Nt>et&&(et=Nt)}if(et-$>xt.MIN_DYNAMIC_RANGE)for(gt++,Mt+=f;gt<xt.BLOCK_SIZE;gt++,Mt+=f)for(let Lt=0;Lt<xt.BLOCK_SIZE;Lt++)q+=s[Mt+Lt]&255}let lt=q>>xt.BLOCK_SIZE_POWER*2;if(et-$<=xt.MIN_DYNAMIC_RANGE&&(lt=$/2,b>0&&P>0)){const gt=(v[b-1][P]+2*v[b][P-1]+v[b-1][P-1])/4;$<gt&&(lt=gt)}v[b][P]=lt}}return v}}xt.BLOCK_SIZE_POWER=3,xt.BLOCK_SIZE=1<<xt.BLOCK_SIZE_POWER,xt.BLOCK_SIZE_MASK=xt.BLOCK_SIZE-1,xt.MINIMUM_DIMENSION=xt.BLOCK_SIZE*5,xt.MIN_DYNAMIC_RANGE=24;class Ft{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,c,f){throw new tt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new tt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new tt("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new Y;for(let c=0;c<this.height;c++){const f=this.getRow(c,s);for(let d=0;d<this.width;d++){const p=f[d]&255;let x;p<64?x="#":p<128?x="+":p<192?x=".":x=" ",o.append(x)}o.append(`
`)}return o.toString()}}class $t extends Ft{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const c=this.delegate.getRow(s,o),f=this.getWidth();for(let d=0;d<f;d++)c[d]=255-(c[d]&255);return c}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(o);for(let f=0;f<o;f++)c[f]=255-(s[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,c,f){return new $t(this.delegate.crop(s,o,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new $t(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new $t(this.delegate.rotateCounterClockwise45())}}class J extends Ft{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=J.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return J.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,c){const f=new Uint8ClampedArray(o*c);for(let d=0,p=0,x=s.length;d<x;d+=4,p++){let v;if(s[d+3]===0)v=255;else{const R=s[d],P=s[d+1],L=s[d+2];v=306*R+601*P+117*L+512>>10}f[p]=v}return f}getRow(s,o){if(s<0||s>=this.getHeight())throw new S("Requested row is outside the image: "+s);const c=this.getWidth(),f=s*c;return o===null?o=this.buffer.slice(f,f+c):(o.length<c&&(o=new Uint8ClampedArray(c)),o.set(this.buffer.slice(f,f+c))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,c,f){return super.crop(s,o,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),c=o.getContext("2d"),f=s*J.DEGREE_TO_RADIANS,d=this.canvas.width,p=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*p),v=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*p);return o.width=x,o.height=v,c.translate(x/2,v/2),c.rotate(f),c.drawImage(this.canvas,d/-2,p/-2),this.buffer=J.makeBufferFromCanvasImageData(o),this}invert(){return new $t(this)}}J.DEGREE_TO_RADIANS=Math.PI/180;class bt{constructor(s,o,c){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Bt=(globalThis||Ff||self||window||void 0)&&(globalThis||Ff||self||window||void 0).__awaiter||function(M,s,o,c){function f(d){return d instanceof o?d:new o(function(p){p(d)})}return new(o||(o=Promise))(function(d,p){function x(R){try{b(c.next(R))}catch(P){p(P)}}function v(R){try{b(c.throw(R))}catch(P){p(P)}}function b(R){R.done?d(R.value):f(R.value).then(x,v)}b((c=c.apply(M,s||[])).next())})};class Vt{constructor(s,o=500,c){this.reader=s,this.timeBetweenScansMillis=o,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Bt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const c of s){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const d=c.deviceId||c.id,p=c.label||`Video device ${o.length+1}`,x=c.groupId,v={deviceId:d,label:p,kind:f,groupId:x};o.push(v)}return o})}getVideoInputDevices(){return Bt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new bt(o.deviceId,o.label))})}findDeviceById(s){return Bt(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(c=>c.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return Bt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return Bt(this,void 0,void 0,function*(){this.reset();let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(s,o){return Bt(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(c,o)})}decodeOnceFromStream(s,o){return Bt(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(s,o,c){return Bt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,c)})}decodeFromVideoDevice(s,o,c){return Bt(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,c)})}decodeFromConstraints(s,o,c){return Bt(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,o,c)})}decodeFromStream(s,o,c){return Bt(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return Bt(this,void 0,void 0,function*(){const c=this.prepareVideoElement(o);return this.addVideoSource(c,s),this.videoElement=c,this.stream=s,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(s){return new Promise((o,c)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Bt(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const c=document.getElementById(s);if(!c)throw new T(`element with id '${s}' not found`);if(c.nodeName.toLowerCase()!==o.toLowerCase())throw new T(`element with id '${s}' must be an ${o} element`);return c}decodeFromImage(s,o){if(!s&&!o)throw new T("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new T("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,c){if(s===void 0&&o===void 0)throw new T("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,c):this.decodeFromVideoElementContinuously(s,c)}decodeFromImageElement(s){if(!s)throw new T("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let c;return this.isImageLoaded(o)?c=this.decodeOnce(o,!1,!0):c=this._decodeOnLoadImage(o),c}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const c=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(c,o)}_decodeFromVideoElementSetup(s){if(!s)throw new T("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new T("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const c=this._decodeOnLoadImage(o);return o.src=s,c}decodeFromVideoUrl(s){if(!s)throw new T("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElement(o);return o.src=s,c}decodeFromVideoUrlContinuously(s,o){if(!s)throw new T("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,o);return c.src=s,f}_decodeOnLoadImage(s){return new Promise((o,c)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,c),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Bt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return Bt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,c=!0){this._stopAsyncDecode=!1;const f=(d,p)=>{if(this._stopAsyncDecode){p(new ht("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(s);d(x)}catch(x){const v=o&&x instanceof ht,R=(x instanceof k||x instanceof H)&&c;if(v||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,p);p(x)}};return new Promise((d,p)=>f(d,p))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);o(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof k||f instanceof H,p=f instanceof ht;(d||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,c){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,c=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),c=new J(o),f=new xt(c);return new N(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let c,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(c=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(c=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),o.style.width=c+"px",o.style.height=f+"px",o.width=c,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class zt{constructor(s,o,c=o==null?0:8*o.length,f,d,p=X.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=c,this.resultPoints=f,this.format=d,this.timestamp=p,this.text=s,this.rawBytes=o,c==null?this.numBits=o==null?0:8*o.length:this.numBits=c,this.resultPoints=f,this.format=d,this.resultMetadata=null,p==null?this.timestamp=X.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const c=new Array(o.length+s.length);X.arraycopy(o,0,c,0,o.length),X.arraycopy(s,0,c,o.length,s.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ee;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ee||(Ee={}));var Ot=Ee,qn;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(qn||(qn={}));var ce=qn;class vi{constructor(s,o,c,f,d=-1,p=-1){this.rawBytes=s,this.text=o,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class os{exp(s){return this.expTable[s]}log(s){if(s===0)throw new S;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class Xn{constructor(s,o){if(o.length===0)throw new S;this.field=s;const c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),X.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let c;if(s===1){c=0;for(let p=0,x=o.length;p!==x;p++){const v=o[p];c=os.addOrSubtract(c,v)}return c}c=o[0];const f=o.length,d=this.field;for(let p=1;p<f;p++)c=os.addOrSubtract(d.multiply(s,c),o[p]);return c}addOrSubtract(s){if(!this.field.equals(s.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){const p=o;o=c,c=p}let f=new Int32Array(c.length);const d=c.length-o.length;X.arraycopy(c,0,f,0,d);for(let p=d;p<c.length;p++)f[p]=os.addOrSubtract(o[p-d],c[p]);return new Xn(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,c=o.length,f=s.coefficients,d=f.length,p=new Int32Array(c+d-1),x=this.field;for(let v=0;v<c;v++){const b=o[v];for(let R=0;R<d;R++)p[v+R]=os.addOrSubtract(p[v+R],x.multiply(b,f[R]))}return new Xn(x,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,c=this.field,f=new Int32Array(o),d=this.coefficients;for(let p=0;p<o;p++)f[p]=c.multiply(d[p],s);return new Xn(c,f)}multiplyByMonomial(s,o){if(s<0)throw new S;if(o===0)return this.field.getZero();const c=this.coefficients,f=c.length,d=new Int32Array(f+s),p=this.field;for(let x=0;x<f;x++)d[x]=p.multiply(c[x],o);return new Xn(p,d)}divide(s){if(!this.field.equals(s.field))throw new S("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new S("Divide by 0");const o=this.field;let c=o.getZero(),f=this;const d=s.getCoefficient(s.getDegree()),p=o.inverse(d);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const x=f.getDegree()-s.getDegree(),v=o.multiply(f.getCoefficient(f.getDegree()),p),b=s.multiplyByMonomial(x,v),R=o.buildMonomial(x,v);c=c.addOrSubtract(R),f=f.addOrSubtract(b)}return[c,f]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);if(c!==0){if(c<0?(s+=" - ",c=-c):s.length>0&&(s+=" + "),o===0||c!==1){const f=this.field.log(c);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class ls extends y{}ls.kind="ArithmeticException";class we extends os{constructor(s,o,c){super(),this.primitive=s,this.size=o,this.generatorBase=c;const f=new Int32Array(o);let d=1;for(let x=0;x<o;x++)f[x]=d,d*=2,d>=o&&(d^=s,d&=o-1);this.expTable=f;const p=new Int32Array(o);for(let x=0;x<o-1;x++)p[f[x]]=x;this.logTable=p,this.zero=new Xn(this,Int32Array.from([0])),this.one=new Xn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new S;if(o===0)return this.zero;const c=new Int32Array(s+1);return c[0]=o,new Xn(this,c)}inverse(s){if(s===0)throw new ls;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;class Er extends y{}Er.kind="ReedSolomonException";class sr extends y{}sr.kind="IllegalStateException";class cs{constructor(s){this.field=s}decode(s,o){const c=this.field,f=new Xn(c,s),d=new Int32Array(o);let p=!0;for(let q=0;q<o;q++){const $=f.evaluateAt(c.exp(q+c.getGeneratorBase()));d[d.length-1-q]=$,$!==0&&(p=!1)}if(p)return;const x=new Xn(c,d),v=this.runEuclideanAlgorithm(c.buildMonomial(o,1),x,o),b=v[0],R=v[1],P=this.findErrorLocations(b),L=this.findErrorMagnitudes(R,P);for(let q=0;q<P.length;q++){const $=s.length-1-c.log(P[q]);if($<0)throw new Er("Bad error location");s[$]=we.addOrSubtract(s[$],L[q])}}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){const q=s;s=o,o=q}const f=this.field;let d=s,p=o,x=f.getZero(),v=f.getOne();for(;p.getDegree()>=(c/2|0);){let q=d,$=x;if(d=p,x=v,d.isZero())throw new Er("r_{i-1} was zero");p=q;let et=f.getZero();const lt=d.getCoefficient(d.getDegree()),gt=f.inverse(lt);for(;p.getDegree()>=d.getDegree()&&!p.isZero();){const Mt=p.getDegree()-d.getDegree(),Lt=f.multiply(p.getCoefficient(p.getDegree()),gt);et=et.addOrSubtract(f.buildMonomial(Mt,Lt)),p=p.addOrSubtract(d.multiplyByMonomial(Mt,Lt))}if(v=et.multiply(x).addOrSubtract($),p.getDegree()>=d.getDegree())throw new sr("Division algorithm failed to reduce polynomial?")}const b=v.getCoefficient(0);if(b===0)throw new Er("sigmaTilde(0) was zero");const R=f.inverse(b),P=v.multiplyScalar(R),L=p.multiplyScalar(R);return[P,L]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const c=new Int32Array(o);let f=0;const d=this.field;for(let p=1;p<d.getSize()&&f<o;p++)s.evaluateAt(p)===0&&(c[f]=d.inverse(p),f++);if(f!==o)throw new Er("Error locator degree does not match number of roots");return c}findErrorMagnitudes(s,o){const c=o.length,f=new Int32Array(c),d=this.field;for(let p=0;p<c;p++){const x=d.inverse(o[p]);let v=1;for(let b=0;b<c;b++)if(p!==b){const R=d.multiply(o[b],x),P=(R&1)===0?R|1:R&-2;v=d.multiply(v,P)}f[p]=d.multiply(s.evaluateAt(x),d.inverse(v)),d.getGeneratorBase()!==0&&(f[p]=d.multiply(f[p],x))}return f}}var Fe;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(Fe||(Fe={}));class qe{decode(s){this.ddata=s;let o=s.getBits(),c=this.extractBits(o),f=this.correctBits(c),d=qe.convertBoolArrayToByteArray(f),p=qe.getEncodedData(f),x=new vi(d,p,null,null);return x.setNumBits(f.length),x}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,c=Fe.UPPER,f=Fe.UPPER,d="",p=0;for(;p<o;)if(f===Fe.BINARY){if(o-p<5)break;let x=qe.readCode(s,p,5);if(p+=5,x===0){if(o-p<11)break;x=qe.readCode(s,p,11)+31,p+=11}for(let v=0;v<x;v++){if(o-p<8){p=o;break}const b=qe.readCode(s,p,8);d+=Z.castAsNonUtf8Char(b),p+=8}f=c}else{let x=f===Fe.DIGIT?4:5;if(o-p<x)break;let v=qe.readCode(s,p,x);p+=x;let b=qe.getCharacter(f,v);b.startsWith("CTRL_")?(c=f,f=qe.getTable(b.charAt(5)),b.charAt(6)==="L"&&(c=f)):(d+=b,f=c)}return d}static getTable(s){switch(s){case"L":return Fe.LOWER;case"P":return Fe.PUNCT;case"M":return Fe.MIXED;case"D":return Fe.DIGIT;case"B":return Fe.BINARY;case"U":default:return Fe.UPPER}}static getCharacter(s,o){switch(s){case Fe.UPPER:return qe.UPPER_TABLE[o];case Fe.LOWER:return qe.LOWER_TABLE[o];case Fe.MIXED:return qe.MIXED_TABLE[o];case Fe.PUNCT:return qe.PUNCT_TABLE[o];case Fe.DIGIT:return qe.DIGIT_TABLE[o];default:throw new sr("Bad table")}}correctBits(s){let o,c;this.ddata.getNbLayers()<=2?(c=6,o=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,o=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,o=we.AZTEC_DATA_10):(c=12,o=we.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=s.length/c;if(d<f)throw new H;let p=s.length%c,x=new Int32Array(d);for(let L=0;L<d;L++,p+=c)x[L]=qe.readCode(s,p,c);try{new cs(o).decode(x,d-f)}catch(L){throw new H(L)}let v=(1<<c)-1,b=0;for(let L=0;L<f;L++){let q=x[L];if(q===0||q===v)throw new H;(q===1||q===v-1)&&b++}let R=new Array(f*c-b),P=0;for(let L=0;L<f;L++){let q=x[L];if(q===1||q===v-1)R.fill(q>1,P,P+c-1),P+=c-1;else for(let $=c-1;$>=0;--$)R[P++]=(q&1<<$)!==0}return R}extractBits(s){let o=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(o?11:14)+c*4,d=new Int32Array(f),p=new Array(this.totalBitsInLayer(c,o));if(o)for(let x=0;x<d.length;x++)d[x]=x;else{let x=f+1+2*K.truncDivision(K.truncDivision(f,2)-1,15),v=f/2,b=K.truncDivision(x,2);for(let R=0;R<v;R++){let P=R+K.truncDivision(R,15);d[v-R-1]=b-P-1,d[v+R]=b+P+1}}for(let x=0,v=0;x<c;x++){let b=(c-x)*4+(o?9:12),R=x*2,P=f-1-R;for(let L=0;L<b;L++){let q=L*2;for(let $=0;$<2;$++)p[v+q+$]=s.get(d[R+$],d[R+L]),p[v+2*b+q+$]=s.get(d[R+L],d[P-$]),p[v+4*b+q+$]=s.get(d[P-$],d[P-L]),p[v+6*b+q+$]=s.get(d[P-L],d[R+$])}v+=b*8}return p}static readCode(s,o,c){let f=0;for(let d=o;d<o+c;d++)f<<=1,s[d]&&(f|=1);return f}static readByte(s,o){let c=s.length-o;return c>=8?qe.readCode(s,o,8):qe.readCode(s,o,c)<<8-c}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let c=0;c<o.length;c++)o[c]=qe.readByte(s,8*c);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}qe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Zt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,c,f){const d=s-c,p=o-f;return Math.sqrt(d*d+p*p)}static sum(s){let o=0;for(let c=0,f=s.length;c!==f;c++){const d=s[c];o+=d}return o}}class Sn{static floatToIntBits(s){return s}}Sn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ht{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Ht){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Sn.floatToIntBits(this.x)+Sn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),c=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let d,p,x;if(c>=o&&c>=f?(p=s[0],d=s[1],x=s[2]):f>=c&&f>=o?(p=s[1],d=s[0],x=s[2]):(p=s[2],d=s[0],x=s[1]),this.crossProductZ(d,p,x)<0){const v=d;d=x,x=v}s[0]=d,s[1]=p,s[2]=x}static distance(s,o){return Zt.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,c){const f=o.x,d=o.y;return(c.x-f)*(s.y-d)-(c.y-d)*(s.x-f)}}class Ga{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class qa extends Ga{constructor(s,o,c,f,d){super(s,o),this.compact=c,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ar{constructor(s,o,c,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=Ar.INIT_SIZE),c==null&&(c=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const d=o/2|0;if(this.leftInit=c-d,this.rightInit=c+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ht}detect(){let s=this.leftInit,o=this.rightInit,c=this.upInit,f=this.downInit,d=!1,p=!0,x=!1,v=!1,b=!1,R=!1,P=!1;const L=this.width,q=this.height;for(;p;){p=!1;let $=!0;for(;($||!v)&&o<L;)$=this.containsBlackPoint(c,f,o,!1),$?(o++,p=!0,v=!0):v||o++;if(o>=L){d=!0;break}let et=!0;for(;(et||!b)&&f<q;)et=this.containsBlackPoint(s,o,f,!0),et?(f++,p=!0,b=!0):b||f++;if(f>=q){d=!0;break}let lt=!0;for(;(lt||!R)&&s>=0;)lt=this.containsBlackPoint(c,f,s,!1),lt?(s--,p=!0,R=!0):R||s--;if(s<0){d=!0;break}let gt=!0;for(;(gt||!P)&&c>=0;)gt=this.containsBlackPoint(s,o,c,!0),gt?(c--,p=!0,P=!0):P||c--;if(c<0){d=!0;break}p&&(x=!0)}if(!d&&x){const $=o-s;let et=null;for(let Lt=1;et===null&&Lt<$;Lt++)et=this.getBlackPointOnSegment(s,f-Lt,s+Lt,f);if(et==null)throw new ht;let lt=null;for(let Lt=1;lt===null&&Lt<$;Lt++)lt=this.getBlackPointOnSegment(s,c+Lt,s+Lt,c);if(lt==null)throw new ht;let gt=null;for(let Lt=1;gt===null&&Lt<$;Lt++)gt=this.getBlackPointOnSegment(o,c+Lt,o-Lt,c);if(gt==null)throw new ht;let Mt=null;for(let Lt=1;Mt===null&&Lt<$;Lt++)Mt=this.getBlackPointOnSegment(o,f-Lt,o-Lt,f);if(Mt==null)throw new ht;return this.centerEdges(Mt,et,gt,lt)}else throw new ht}getBlackPointOnSegment(s,o,c,f){const d=Zt.round(Zt.distance(s,o,c,f)),p=(c-s)/d,x=(f-o)/d,v=this.image;for(let b=0;b<d;b++){const R=Zt.round(s+b*p),P=Zt.round(o+b*x);if(v.get(R,P))return new Ht(R,P)}return null}centerEdges(s,o,c,f){const d=s.getX(),p=s.getY(),x=o.getX(),v=o.getY(),b=c.getX(),R=c.getY(),P=f.getX(),L=f.getY(),q=Ar.CORR;return d<this.width/2?[new Ht(P-q,L+q),new Ht(x+q,v+q),new Ht(b-q,R-q),new Ht(d+q,p-q)]:[new Ht(P+q,L+q),new Ht(x+q,v-q),new Ht(b-q,R+q),new Ht(d-q,p-q)]}containsBlackPoint(s,o,c,f){const d=this.image;if(f){for(let p=s;p<=o;p++)if(d.get(p,c))return!0}else for(let p=s;p<=o;p++)if(d.get(c,p))return!0;return!1}}Ar.INIT_SIZE=10,Ar.CORR=1;class us{static checkAndNudgePoints(s,o){const c=s.getWidth(),f=s.getHeight();let d=!0;for(let p=0;p<o.length&&d;p+=2){const x=Math.floor(o[p]),v=Math.floor(o[p+1]);if(x<-1||x>c||v<-1||v>f)throw new ht;d=!1,x===-1?(o[p]=0,d=!0):x===c&&(o[p]=c-1,d=!0),v===-1?(o[p+1]=0,d=!0):v===f&&(o[p+1]=f-1,d=!0)}d=!0;for(let p=o.length-2;p>=0&&d;p-=2){const x=Math.floor(o[p]),v=Math.floor(o[p+1]);if(x<-1||x>c||v<-1||v>f)throw new ht;d=!1,x===-1?(o[p]=0,d=!0):x===c&&(o[p]=c-1,d=!0),v===-1?(o[p+1]=0,d=!0):v===f&&(o[p+1]=f-1,d=!0)}}}class ti{constructor(s,o,c,f,d,p,x,v,b){this.a11=s,this.a21=o,this.a31=c,this.a12=f,this.a22=d,this.a32=p,this.a13=x,this.a23=v,this.a33=b}static quadrilateralToQuadrilateral(s,o,c,f,d,p,x,v,b,R,P,L,q,$,et,lt){const gt=ti.quadrilateralToSquare(s,o,c,f,d,p,x,v);return ti.squareToQuadrilateral(b,R,P,L,q,$,et,lt).times(gt)}transformPoints(s){const o=s.length,c=this.a11,f=this.a12,d=this.a13,p=this.a21,x=this.a22,v=this.a23,b=this.a31,R=this.a32,P=this.a33;for(let L=0;L<o;L+=2){const q=s[L],$=s[L+1],et=d*q+v*$+P;s[L]=(c*q+p*$+b)/et,s[L+1]=(f*q+x*$+R)/et}}transformPointsWithValues(s,o){const c=this.a11,f=this.a12,d=this.a13,p=this.a21,x=this.a22,v=this.a23,b=this.a31,R=this.a32,P=this.a33,L=s.length;for(let q=0;q<L;q++){const $=s[q],et=o[q],lt=d*$+v*et+P;s[q]=(c*$+p*et+b)/lt,o[q]=(f*$+x*et+R)/lt}}static squareToQuadrilateral(s,o,c,f,d,p,x,v){const b=s-c+d-x,R=o-f+p-v;if(b===0&&R===0)return new ti(c-s,d-c,s,f-o,p-f,o,0,0,1);{const P=c-d,L=x-d,q=f-p,$=v-p,et=P*$-L*q,lt=(b*$-L*R)/et,gt=(P*R-b*q)/et;return new ti(c-s+lt*c,x-s+gt*x,s,f-o+lt*f,v-o+gt*v,o,lt,gt,1)}}static quadrilateralToSquare(s,o,c,f,d,p,x,v){return ti.squareToQuadrilateral(s,o,c,f,d,p,x,v).buildAdjoint()}buildAdjoint(){return new ti(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new ti(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class oi extends us{sampleGrid(s,o,c,f,d,p,x,v,b,R,P,L,q,$,et,lt,gt,Mt,Lt){const Nt=ti.quadrilateralToQuadrilateral(f,d,p,x,v,b,R,P,L,q,$,et,lt,gt,Mt,Lt);return this.sampleGridWithTransform(s,o,c,Nt)}sampleGridWithTransform(s,o,c,f){if(o<=0||c<=0)throw new ht;const d=new Jt(o,c),p=new Float32Array(2*o);for(let x=0;x<c;x++){const v=p.length,b=x+.5;for(let R=0;R<v;R+=2)p[R]=R/2+.5,p[R+1]=b;f.transformPoints(p),us.checkAndNudgePoints(s,p);try{for(let R=0;R<v;R+=2)s.get(Math.floor(p[R]),Math.floor(p[R+1]))&&d.set(R/2,x)}catch{throw new ht}}return d}}class Yn{static setGridSampler(s){Yn.gridSampler=s}static getInstance(){return Yn.gridSampler}}Yn.gridSampler=new oi;class Xe{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new Ht(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Bl{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),c=this.getBullsEyeCorners(o);if(s){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),d=this.getMatrixCornerPoints(c);return new qa(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ht;let o=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(c,o);let f=0;for(let p=0;p<4;p++){let x=c[(this.shift+p)%4];this.compact?(f<<=7,f+=x>>1&127):(f<<=10,f+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,o){let c=0;s.forEach((f,d,p)=>{let x=(f>>o-2<<1)+(f&1);c=(c<<3)+x}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(K.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new ht}getCorrectedParameterData(s,o){let c,f;o?(c=7,f=2):(c=10,f=4);let d=c-f,p=new Int32Array(c);for(let v=c-1;v>=0;--v)p[v]=s&15,s>>=4;try{new cs(we.AZTEC_PARAM).decode(p,d)}catch{throw new ht}let x=0;for(let v=0;v<f;v++)x=(x<<4)+p[v];return x}getBullsEyeCorners(s){let o=s,c=s,f=s,d=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(o,p,1,-1),L=this.getFirstDifferent(c,p,1,1),q=this.getFirstDifferent(f,p,-1,1),$=this.getFirstDifferent(d,p,-1,-1);if(this.nbCenterLayers>2){let et=this.distancePoint($,P)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(et<.75||et>1.25||!this.isWhiteOrBlackRectangle(P,L,q,$))break}o=P,c=L,f=q,d=$,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ht;this.compact=this.nbCenterLayers===5;let x=new Ht(o.getX()+.5,o.getY()-.5),v=new Ht(c.getX()+.5,c.getY()+.5),b=new Ht(f.getX()-.5,f.getY()+.5),R=new Ht(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,v,b,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,c,f;try{let x=new Ar(this.image).detect();s=x[0],o=x[1],c=x[2],f=x[3]}catch{let v=this.image.getWidth()/2,b=this.image.getHeight()/2;s=this.getFirstDifferent(new Xe(v+7,b-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Xe(v+7,b+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Xe(v-7,b+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Xe(v-7,b-7),!1,-1,-1).toResultPoint()}let d=Zt.round((s.getX()+f.getX()+o.getX()+c.getX())/4),p=Zt.round((s.getY()+f.getY()+o.getY()+c.getY())/4);try{let x=new Ar(this.image,15,d,p).detect();s=x[0],o=x[1],c=x[2],f=x[3]}catch{s=this.getFirstDifferent(new Xe(d+7,p-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Xe(d+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Xe(d-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Xe(d-7,p-7),!1,-1,-1).toResultPoint()}return d=Zt.round((s.getX()+f.getX()+o.getX()+c.getX())/4),p=Zt.round((s.getY()+f.getY()+o.getY()+c.getY())/4),new Xe(d,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,c,f,d){let p=Yn.getInstance(),x=this.getDimension(),v=x/2-this.nbCenterLayers,b=x/2+this.nbCenterLayers;return p.sampleGrid(s,x,x,v,v,b,v,b,b,v,b,o.getX(),o.getY(),c.getX(),c.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(s,o,c){let f=0,d=this.distanceResultPoint(s,o),p=d/c,x=s.getX(),v=s.getY(),b=p*(o.getX()-s.getX())/d,R=p*(o.getY()-s.getY())/d;for(let P=0;P<c;P++)this.image.get(Zt.round(x+P*b),Zt.round(v+P*R))&&(f|=1<<c-P-1);return f}isWhiteOrBlackRectangle(s,o,c,f){let d=3;s=new Xe(s.getX()-d,s.getY()+d),o=new Xe(o.getX()-d,o.getY()-d),c=new Xe(c.getX()+d,c.getY()-d),f=new Xe(f.getX()+d,f.getY()+d);let p=this.getColor(f,s);if(p===0)return!1;let x=this.getColor(s,o);return x!==p||(x=this.getColor(o,c),x!==p)?!1:(x=this.getColor(c,f),x===p)}getColor(s,o){let c=this.distancePoint(s,o),f=(o.getX()-s.getX())/c,d=(o.getY()-s.getY())/c,p=0,x=s.getX(),v=s.getY(),b=this.image.get(s.getX(),s.getY()),R=Math.ceil(c);for(let L=0;L<R;L++)x+=f,v+=d,this.image.get(Zt.round(x),Zt.round(v))!==b&&p++;let P=p/c;return P>.1&&P<.9?0:P<=.1===b?1:-1}getFirstDifferent(s,o,c,f){let d=s.getX()+c,p=s.getY()+f;for(;this.isValid(d,p)&&this.image.get(d,p)===o;)d+=c,p+=f;for(d-=c,p-=f;this.isValid(d,p)&&this.image.get(d,p)===o;)d+=c;for(d-=c;this.isValid(d,p)&&this.image.get(d,p)===o;)p+=f;return p-=f,new Xe(d,p)}expandSquare(s,o,c){let f=c/(2*o),d=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),x=(s[0].getX()+s[2].getX())/2,v=(s[0].getY()+s[2].getY())/2,b=new Ht(x+f*d,v+f*p),R=new Ht(x-f*d,v-f*p);d=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),x=(s[1].getX()+s[3].getX())/2,v=(s[1].getY()+s[3].getY())/2;let P=new Ht(x+f*d,v+f*p),L=new Ht(x-f*d,v-f*p);return[b,P,R,L]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=Zt.round(s.getX()),c=Zt.round(s.getY());return this.isValid(o,c)}distancePoint(s,o){return Zt.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return Zt.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class ra{decode(s,o=null){let c=null,f=new Bl(s.getBlackMatrix()),d=null,p=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),p=new qe().decode(R)}catch(R){c=R}if(p==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),p=new qe().decode(R)}catch(R){throw c??R}let x=new zt(p.getText(),p.getRawBytes(),p.getNumBits(),d,Ot.AZTEC,X.currentTimeMillis()),v=p.getByteSegments();v!=null&&x.putMetadata(ce.BYTE_SEGMENTS,v);let b=p.getECLevel();return b!=null&&x.putMetadata(ce.ERROR_CORRECTION_LEVEL,b),x}reportFoundResultPoints(s,o){if(s!=null){let c=s.get(Rt.NEED_RESULT_POINT_CALLBACK);c!=null&&o.forEach((f,d,p)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class Vl extends Vt{constructor(s=500){super(new ra,s)}}class Ye{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get(Rt.TRY_HARDER)===!0&&s.isRotateSupported()){const d=s.rotateCounterClockwise(),p=this.doDecode(d,o),x=p.getResultMetadata();let v=270;x!==null&&x.get(ce.ORIENTATION)===!0&&(v=v+x.get(ce.ORIENTATION)%360),p.putMetadata(ce.ORIENTATION,v);const b=p.getResultPoints();if(b!==null){const R=d.getHeight();for(let P=0;P<b.length;P++)b[P]=new Ht(R-b[P].getY()-1,b[P].getX())}return p}else throw new ht}}reset(){}doDecode(s,o){const c=s.getWidth(),f=s.getHeight();let d=new At(c);const p=o&&o.get(Rt.TRY_HARDER)===!0,x=Math.max(1,f>>(p?8:5));let v;p?v=f:v=15;const b=Math.trunc(f/2);for(let R=0;R<v;R++){const P=Math.trunc((R+1)/2),L=(R&1)===0,q=b+x*(L?P:-P);if(q<0||q>=f)break;try{d=s.getBlackRow(q,d)}catch{continue}for(let $=0;$<2;$++){if($===1&&(d.reverse(),o&&o.get(Rt.NEED_RESULT_POINT_CALLBACK)===!0)){const et=new Map;o.forEach((lt,gt)=>et.set(gt,lt)),et.delete(Rt.NEED_RESULT_POINT_CALLBACK),o=et}try{const et=this.decodeRow(q,d,o);if($===1){et.putMetadata(ce.ORIENTATION,180);const lt=et.getResultPoints();lt!==null&&(lt[0]=new Ht(c-lt[0].getX()-1,lt[0].getY()),lt[1]=new Ht(c-lt[1].getX()-1,lt[1].getY()))}return et}catch{}}}throw new ht}static recordPattern(s,o,c){const f=c.length;for(let b=0;b<f;b++)c[b]=0;const d=s.getSize();if(o>=d)throw new ht;let p=!s.get(o),x=0,v=o;for(;v<d;){if(s.get(v)!==p)c[x]++;else{if(++x===f)break;c[x]=1,p=!p}v++}if(!(x===f||x===f-1&&v===d))throw new ht}static recordPatternInReverse(s,o,c){let f=c.length,d=s.get(o);for(;o>0&&f>=0;)s.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new ht;Ye.recordPattern(s,o+1,c)}static patternMatchVariance(s,o,c){const f=s.length;let d=0,p=0;for(let b=0;b<f;b++)d+=s[b],p+=o[b];if(d<p)return Number.POSITIVE_INFINITY;const x=d/p;c*=x;let v=0;for(let b=0;b<f;b++){const R=s[b],P=o[b]*x,L=R>P?R-P:P-R;if(L>c)return Number.POSITIVE_INFINITY;v+=L}return v/d}}class kt extends Ye{static findStartPattern(s){const o=s.getSize(),c=s.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),p=c,x=!1;const v=6;for(let b=c;b<o;b++)if(s.get(b)!==x)d[f]++;else{if(f===v-1){let R=kt.MAX_AVG_VARIANCE,P=-1;for(let L=kt.CODE_START_A;L<=kt.CODE_START_C;L++){const q=Ye.patternMatchVariance(d,kt.CODE_PATTERNS[L],kt.MAX_INDIVIDUAL_VARIANCE);q<R&&(R=q,P=L)}if(P>=0&&s.isRange(Math.max(0,p-(b-p)/2),p,!1))return Int32Array.from([p,b,P]);p+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,x=!x}throw new ht}static decodeCode(s,o,c){Ye.recordPattern(s,c,o);let f=kt.MAX_AVG_VARIANCE,d=-1;for(let p=0;p<kt.CODE_PATTERNS.length;p++){const x=kt.CODE_PATTERNS[p],v=this.patternMatchVariance(o,x,kt.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,d=p)}if(d>=0)return d;throw new ht}decodeRow(s,o,c){const f=c&&c.get(Rt.ASSUME_GS1)===!0,d=kt.findStartPattern(o),p=d[2];let x=0;const v=new Uint8Array(20);v[x++]=p;let b;switch(p){case kt.CODE_START_A:b=kt.CODE_CODE_A;break;case kt.CODE_START_B:b=kt.CODE_CODE_B;break;case kt.CODE_START_C:b=kt.CODE_CODE_C;break;default:throw new H}let R=!1,P=!1,L="",q=d[0],$=d[1];const et=Int32Array.from([0,0,0,0,0,0]);let lt=0,gt=0,Mt=p,Lt=0,Nt=!0,ge=!1,he=!1;for(;!R;){const ks=P;switch(P=!1,lt=gt,gt=kt.decodeCode(o,et,$),v[x++]=gt,gt!==kt.CODE_STOP&&(Nt=!0),gt!==kt.CODE_STOP&&(Lt++,Mt+=Lt*gt),q=$,$+=et.reduce((Or,Uh)=>Or+Uh,0),gt){case kt.CODE_START_A:case kt.CODE_START_B:case kt.CODE_START_C:throw new H}switch(b){case kt.CODE_CODE_A:if(gt<64)he===ge?L+=String.fromCharCode(32+gt):L+=String.fromCharCode(32+gt+128),he=!1;else if(gt<96)he===ge?L+=String.fromCharCode(gt-64):L+=String.fromCharCode(gt+64),he=!1;else switch(gt!==kt.CODE_STOP&&(Nt=!1),gt){case kt.CODE_FNC_1:f&&(L.length===0?L+="]C1":L+="");break;case kt.CODE_FNC_2:case kt.CODE_FNC_3:break;case kt.CODE_FNC_4_A:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case kt.CODE_SHIFT:P=!0,b=kt.CODE_CODE_B;break;case kt.CODE_CODE_B:b=kt.CODE_CODE_B;break;case kt.CODE_CODE_C:b=kt.CODE_CODE_C;break;case kt.CODE_STOP:R=!0;break}break;case kt.CODE_CODE_B:if(gt<96)he===ge?L+=String.fromCharCode(32+gt):L+=String.fromCharCode(32+gt+128),he=!1;else switch(gt!==kt.CODE_STOP&&(Nt=!1),gt){case kt.CODE_FNC_1:f&&(L.length===0?L+="]C1":L+="");break;case kt.CODE_FNC_2:case kt.CODE_FNC_3:break;case kt.CODE_FNC_4_B:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case kt.CODE_SHIFT:P=!0,b=kt.CODE_CODE_A;break;case kt.CODE_CODE_A:b=kt.CODE_CODE_A;break;case kt.CODE_CODE_C:b=kt.CODE_CODE_C;break;case kt.CODE_STOP:R=!0;break}break;case kt.CODE_CODE_C:if(gt<100)gt<10&&(L+="0"),L+=gt;else switch(gt!==kt.CODE_STOP&&(Nt=!1),gt){case kt.CODE_FNC_1:f&&(L.length===0?L+="]C1":L+="");break;case kt.CODE_CODE_A:b=kt.CODE_CODE_A;break;case kt.CODE_CODE_B:b=kt.CODE_CODE_B;break;case kt.CODE_STOP:R=!0;break}break}ks&&(b=b===kt.CODE_CODE_A?kt.CODE_CODE_B:kt.CODE_CODE_A)}const Ii=$-q;if($=o.getNextUnset($),!o.isRange($,Math.min(o.getSize(),$+($-q)/2),!1))throw new ht;if(Mt-=Lt*lt,Mt%103!==lt)throw new k;const cr=L.length;if(cr===0)throw new ht;cr>0&&Nt&&(b===kt.CODE_CODE_C?L=L.substring(0,cr-2):L=L.substring(0,cr-1));const Hi=(d[1]+d[0])/2,tn=q+Ii/2,ci=v.length,ji=new Uint8Array(ci);for(let ks=0;ks<ci;ks++)ji[ks]=v[ks];const ya=[new Ht(Hi,s),new Ht(tn,s)];return new zt(L,ji,0,ya,Ot.CODE_128,new Date().getTime())}}kt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],kt.MAX_AVG_VARIANCE=.25,kt.MAX_INDIVIDUAL_VARIANCE=.7,kt.CODE_SHIFT=98,kt.CODE_CODE_C=99,kt.CODE_CODE_B=100,kt.CODE_CODE_A=101,kt.CODE_FNC_1=102,kt.CODE_FNC_2=97,kt.CODE_FNC_3=96,kt.CODE_FNC_4_A=101,kt.CODE_FNC_4_B=100,kt.CODE_START_A=103,kt.CODE_START_B=104,kt.CODE_START_C=105,kt.CODE_STOP=106;class Ke extends Ye{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=Ke.findAsteriskPattern(o,f),p=o.getNextSet(d[1]),x=o.getSize(),v,b;do{Ke.recordPattern(o,p,f);let et=Ke.toNarrowWidePattern(f);if(et<0)throw new ht;v=Ke.patternToChar(et),this.decodeRowResult+=v,b=p;for(let lt of f)p+=lt;p=o.getNextSet(p)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let et of f)R+=et;let P=p-b-R;if(p!==x&&P*2<R)throw new ht;if(this.usingCheckDigit){let et=this.decodeRowResult.length-1,lt=0;for(let gt=0;gt<et;gt++)lt+=Ke.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(gt));if(this.decodeRowResult.charAt(et)!==Ke.ALPHABET_STRING.charAt(lt%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,et)}if(this.decodeRowResult.length===0)throw new ht;let L;this.extendedMode?L=Ke.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let q=(d[1]+d[0])/2,$=b+R/2;return new zt(L,null,0,[new Ht(q,s),new Ht($,s)],Ot.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let c=s.getSize(),f=s.getNextSet(0),d=0,p=f,x=!1,v=o.length;for(let b=f;b<c;b++)if(s.get(b)!==x)o[d]++;else{if(d===v-1){if(this.toNarrowWidePattern(o)===Ke.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((b-p)/2)),p,!1))return[p,b];p+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,x=!x}throw new ht}static toNarrowWidePattern(s){let o=s.length,c=0,f;do{let d=2147483647;for(let v of s)v<d&&v>c&&(d=v);c=d,f=0;let p=0,x=0;for(let v=0;v<o;v++){let b=s[v];b>c&&(x|=1<<o-1-v,f++,p+=b)}if(f===3){for(let v=0;v<o&&f>0;v++){let b=s[v];if(b>c&&(f--,b*2>=p))return-1}return x}}while(f>3);return-1}static patternToChar(s){for(let o=0;o<Ke.CHARACTER_ENCODINGS.length;o++)if(Ke.CHARACTER_ENCODINGS[o]===s)return Ke.ALPHABET_STRING.charAt(o);if(s===Ke.ASTERISK_ENCODING)return"*";throw new ht}static decodeExtended(s){let o=s.length,c="";for(let f=0;f<o;f++){let d=s.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let p=s.charAt(f+1),x="\0";switch(d){case"+":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)+32);else throw new H;break;case"$":if(p>="A"&&p<="Z")x=String.fromCharCode(p.charCodeAt(0)-64);else throw new H;break;case"%":if(p>="A"&&p<="E")x=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")x=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")x=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")x="\0";else if(p==="V")x="@";else if(p==="W")x="`";else if(p==="X"||p==="Y"||p==="Z")x="";else throw new H;break;case"/":if(p>="A"&&p<="O")x=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")x=":";else throw new H;break}c+=x,f++}else c+=d}return c}}Ke.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ke.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ke.ASTERISK_ENCODING=148;class Ae extends Ye{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,c){let f=this.decodeStart(o),d=this.decodeEnd(o),p=new Y;Ae.decodeMiddle(o,f[1],d[0],p);let x=p.toString(),v=null;c!=null&&(v=c.get(Rt.ALLOWED_LENGTHS)),v==null&&(v=Ae.DEFAULT_ALLOWED_LENGTHS);let b=x.length,R=!1,P=0;for(let $ of v){if(b===$){R=!0;break}$>P&&(P=$)}if(!R&&b>P&&(R=!0),!R)throw new H;const L=[new Ht(f[1],s),new Ht(d[0],s)];return new zt(x,null,0,L,Ot.ITF,new Date().getTime())}static decodeMiddle(s,o,c,f){let d=new Int32Array(10),p=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),p.fill(0),x.fill(0);o<c;){Ye.recordPattern(s,o,d);for(let b=0;b<5;b++){let R=2*b;p[b]=d[R],x[b]=d[R+1]}let v=Ae.decodeDigit(p);f.append(v.toString()),v=this.decodeDigit(x),f.append(v.toString()),d.forEach(function(b){o+=b})}}decodeStart(s){let o=Ae.skipWhiteSpace(s),c=Ae.findGuardPattern(s,o,Ae.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(s,c[0]),c}validateQuietZone(s,o){let c=this.narrowLineWidth*10;c=c<o?c:o;for(let f=o-1;c>0&&f>=0&&!s.get(f);f--)c--;if(c!==0)throw new ht}static skipWhiteSpace(s){const o=s.getSize(),c=s.getNextSet(0);if(c===o)throw new ht;return c}decodeEnd(s){s.reverse();try{let o=Ae.skipWhiteSpace(s),c;try{c=Ae.findGuardPattern(s,o,Ae.END_PATTERN_REVERSED[0])}catch(d){d instanceof ht&&(c=Ae.findGuardPattern(s,o,Ae.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,c[0]);let f=c[0];return c[0]=s.getSize()-c[1],c[1]=s.getSize()-f,c}finally{s.reverse()}}static findGuardPattern(s,o,c){let f=c.length,d=new Int32Array(f),p=s.getSize(),x=!1,v=0,b=o;d.fill(0);for(let R=o;R<p;R++)if(s.get(R)!==x)d[v]++;else{if(v===f-1){if(Ye.patternMatchVariance(d,c,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return[b,R];b+=d[0]+d[1],X.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,x=!x}throw new ht}static decodeDigit(s){let o=Ae.MAX_AVG_VARIANCE,c=-1,f=Ae.PATTERNS.length;for(let d=0;d<f;d++){let p=Ae.PATTERNS[d],x=Ye.patternMatchVariance(s,p,Ae.MAX_INDIVIDUAL_VARIANCE);x<o?(o=x,c=d):x===o&&(c=-1)}if(c>=0)return c%10;throw new ht}}Ae.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ae.MAX_AVG_VARIANCE=.38,Ae.MAX_INDIVIDUAL_VARIANCE=.5,Ae.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ae.START_PATTERN=Int32Array.from([1,1,1,1]),Ae.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class We extends Ye{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,c,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),c=We.findGuardPattern(s,f,!1,this.START_END_PATTERN,d);let p=c[0];f=c[1];let x=p-(f-p);x>=0&&(o=s.isRange(x,p,!1))}return c}static checkChecksum(s){return We.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return We.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let f=o-1;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}c*=3;for(let f=o-2;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}return(1e3-c)%10}static decodeEnd(s,o){return We.findGuardPattern(s,o,!1,We.START_END_PATTERN,new Int32Array(We.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,c,f){return this.findGuardPattern(s,o,c,f,new Int32Array(f.length))}static findGuardPattern(s,o,c,f,d){let p=s.getSize();o=c?s.getNextUnset(o):s.getNextSet(o);let x=0,v=o,b=f.length,R=c;for(let P=o;P<p;P++)if(s.get(P)!==R)d[x]++;else{if(x===b-1){if(Ye.patternMatchVariance(d,f,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return Int32Array.from([v,P]);v+=d[0]+d[1];let L=d.slice(2,d.length-1);for(let q=0;q<x-1;q++)d[q]=L[q];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,R=!R}throw new ht}static decodeDigit(s,o,c,f){this.recordPattern(s,c,o);let d=this.MAX_AVG_VARIANCE,p=-1,x=f.length;for(let v=0;v<x;v++){let b=f[v],R=Ye.patternMatchVariance(o,b,We.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,p=v)}if(p>=0)return p;throw new ht}}We.MAX_AVG_VARIANCE=.48,We.MAX_INDIVIDUAL_VARIANCE=.7,We.START_END_PATTERN=Int32Array.from([1,1,1]),We.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),We.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),We.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,c,f),p=f.toString(),x=Hr.parseExtensionString(p),v=[new Ht((c[0]+c[1])/2,s),new Ht(d,s)],b=new zt(p,null,0,v,Ot.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&b.putAllMetadata(x),b}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1],x=0;for(let b=0;b<5&&p<d;b++){let R=We.decodeDigit(s,f,p,We.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let P of f)p+=P;R>=10&&(x|=1<<4-b),b!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==5)throw new ht;let v=this.determineCheckDigit(x);if(Hr.extensionChecksum(c.toString())!==v)throw new ht;return p}static extensionChecksum(s){let o=s.length,c=0;for(let f=o-2;f>=0;f-=2)c+=s.charAt(f).charCodeAt(0)-48;c*=3;for(let f=o-1;f>=0;f-=2)c+=s.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new ht}static parseExtensionString(s){if(s.length!==5)return null;let o=Hr.parseExtension5String(s);return o==null?null:new Map([[ce.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let c=parseInt(s.substring(1)),f=(c/100).toString(),d=c%100,p=d<10?"0"+d:d.toString();return o+f+"."+p}}class sa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,c){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,c,f),p=f.toString(),x=sa.parseExtensionString(p),v=[new Ht((c[0]+c[1])/2,s),new Ht(d,s)],b=new zt(p,null,0,v,Ot.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&b.putAllMetadata(x),b}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1],x=0;for(let v=0;v<2&&p<d;v++){let b=We.decodeDigit(s,f,p,We.L_AND_G_PATTERNS);c+=String.fromCharCode(48+b%10);for(let R of f)p+=R;b>=10&&(x|=1<<1-v),v!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(c.length!==2)throw new ht;if(parseInt(c.toString())%4!==x)throw new ht;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[ce.ISSUE_NUMBER,parseInt(s)]])}}class hs{static decodeRow(s,o,c){let f=We.findGuardPattern(o,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hr().decodeRow(s,o,f)}catch{return new sa().decodeRow(s,o,f)}}}hs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Te extends We{constructor(){super(),this.decodeRowStringBuffer="",Te.L_AND_G_PATTERNS=Te.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=Te.L_PATTERNS[s-10],c=new Int32Array(o.length);for(let f=0;f<o.length;f++)c[f]=o[o.length-f-1];Te.L_AND_G_PATTERNS[s]=c}}decodeRow(s,o,c){let f=Te.findStartGuardPattern(o),d=c==null?null:c.get(Rt.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Nt=new Ht((f[0]+f[1])/2,s);d.foundPossibleResultPoint(Nt)}let p=this.decodeMiddle(o,f,this.decodeRowStringBuffer),x=p.rowOffset,v=p.resultString;if(d!=null){const Nt=new Ht(x,s);d.foundPossibleResultPoint(Nt)}let b=this.decodeEnd(o,x);if(d!=null){const Nt=new Ht((b[0]+b[1])/2,s);d.foundPossibleResultPoint(Nt)}let R=b[1],P=R+(R-b[0]);if(P>=o.getSize()||!o.isRange(R,P,!1))throw new ht;let L=v.toString();if(L.length<8)throw new H;if(!Te.checkChecksum(L))throw new k;let q=(f[1]+f[0])/2,$=(b[1]+b[0])/2,et=this.getBarcodeFormat(),lt=[new Ht(q,s),new Ht($,s)],gt=new zt(L,null,0,lt,et,new Date().getTime()),Mt=0;try{let Nt=hs.decodeRow(s,o,b[1]);gt.putMetadata(ce.UPC_EAN_EXTENSION,Nt.getText()),gt.putAllMetadata(Nt.getResultMetadata()),gt.addResultPoints(Nt.getResultPoints()),Mt=Nt.getText().length}catch{}let Lt=c==null?null:c.get(Rt.ALLOWED_EAN_EXTENSIONS);if(Lt!=null){let Nt=!1;for(let ge in Lt)if(Mt.toString()===ge){Nt=!0;break}if(!Nt)throw new ht}return gt}decodeEnd(s,o){return Te.findGuardPattern(s,o,!1,Te.START_END_PATTERN,new Int32Array(Te.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Te.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let c=parseInt(s.charAt(o-1),10);return Te.getStandardUPCEANChecksum(s.substring(0,o-1))===c}static getStandardUPCEANChecksum(s){let o=s.length,c=0;for(let f=o-1;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}c*=3;for(let f=o-2;f>=0;f-=2){let d=s.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new H;c+=d}return(1e3-c)%10}}class $e extends Te{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1],x=0;for(let b=0;b<6&&p<d;b++){let R=Te.decodeDigit(s,f,p,Te.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let P of f)p+=P;R>=10&&(x|=1<<5-b)}c=$e.determineFirstDigit(c,x),p=Te.findGuardPattern(s,p,!0,Te.MIDDLE_PATTERN,new Int32Array(Te.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&p<d;b++){let R=Te.decodeDigit(s,f,p,Te.L_PATTERNS);c+=String.fromCharCode(48+R);for(let P of f)p+=P}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Ot.EAN_13}static determineFirstDigit(s,o){for(let c=0;c<10;c++)if(o===this.FIRST_DIGIT_ENCODINGS[c])return s=String.fromCharCode(48+c)+s,s;throw new ht}}$e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class qo extends Te{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p=o[1];for(let v=0;v<4&&p<d;v++){let b=Te.decodeDigit(s,f,p,Te.L_PATTERNS);c+=String.fromCharCode(48+b);for(let R of f)p+=R}p=Te.findGuardPattern(s,p,!0,Te.MIDDLE_PATTERN,new Int32Array(Te.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&p<d;v++){let b=Te.decodeDigit(s,f,p,Te.L_PATTERNS);c+=String.fromCharCode(48+b);for(let R of f)p+=R}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Ot.EAN_8}}class fs extends Te{constructor(){super(...arguments),this.ean13Reader=new $e}getBarcodeFormat(){return Ot.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,c))}decodeMiddle(s,o,c){return this.ean13Reader.decodeMiddle(s,o,c)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let c=new zt(o.substring(1),null,null,s.getResultPoints(),Ot.UPC_A);return s.getResultMetadata()!=null&&c.putAllMetadata(s.getResultMetadata()),c}else throw new ht}reset(){this.ean13Reader.reset()}}class ei extends Te{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,c){const f=this.decodeMiddleCounters.map(b=>b);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=s.getSize();let p=o[1],x=0;for(let b=0;b<6&&p<d;b++){const R=ei.decodeDigit(s,f,p,ei.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let P of f)p+=P;R>=10&&(x|=1<<5-b)}let v=ei.determineNumSysAndCheckDigit(c,x);return{rowOffset:p,resultString:v}}decodeEnd(s,o){return ei.findGuardPatternWithoutCounters(s,o,!0,ei.MIDDLE_END_PATTERN)}checkChecksum(s){return Te.checkChecksum(ei.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let d=String.fromCharCode(48+c),p=String.fromCharCode(48+f);return d+s+p}throw ht.getNotFoundInstance()}getBarcodeFormat(){return Ot.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),c=new Y;c.append(s.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:c.appendChars(o,0,2),c.append(f),c.append("0000"),c.appendChars(o,2,3);break;case 3:c.appendChars(o,0,3),c.append("00000"),c.appendChars(o,3,2);break;case 4:c.appendChars(o,0,4),c.append("00000"),c.append(o[4]);break;default:c.appendChars(o,0,5),c.append("0000"),c.append(f);break}return s.length>=8&&c.append(s.charAt(7)),c.toString()}}ei.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ei.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class aa extends Ye{constructor(s){super();let o=s==null?null:s.get(Rt.POSSIBLE_FORMATS),c=[];r(o)?(c.push(new $e),c.push(new fs),c.push(new qo),c.push(new ei)):(o.indexOf(Ot.EAN_13)>-1&&c.push(new $e),o.indexOf(Ot.UPC_A)>-1&&c.push(new fs),o.indexOf(Ot.EAN_8)>-1&&c.push(new qo),o.indexOf(Ot.UPC_E)>-1&&c.push(new ei)),this.readers=c}decodeRow(s,o,c){for(let f of this.readers)try{const d=f.decodeRow(s,o,c),p=d.getBarcodeFormat()===Ot.EAN_13&&d.getText().charAt(0)==="0",x=c==null?null:c.get(Rt.POSSIBLE_FORMATS),v=x==null||x.includes(Ot.UPC_A);if(p&&v){const b=d.getRawBytes(),R=new zt(d.getText().substring(1),b,b?b.length:null,d.getResultPoints(),Ot.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new ht}reset(){for(let s of this.readers)s.reset()}}class kn extends Ye{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let c=0;c<o.length;c++)if(Ye.patternMatchVariance(s,o[c],kn.MAX_INDIVIDUAL_VARIANCE)<kn.MAX_AVG_VARIANCE)return c;throw new ht}static count(s){return Zt.sum(new Int32Array(s))}static increment(s,o){let c=0,f=o[0];for(let d=1;d<s.length;d++)o[d]>f&&(f=o[d],c=d);s[c]++}static decrement(s,o){let c=0,f=o[0];for(let d=1;d<s.length;d++)o[d]<f&&(f=o[d],c=d);s[c]--}static isFinderPattern(s){let o=s[0]+s[1],c=o+s[2]+s[3],f=o/c;if(f>=kn.MIN_FINDER_PATTERN_RATIO&&f<=kn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let x of s)x>p&&(p=x),x<d&&(d=x);return p<10*d}return!1}}kn.MAX_AVG_VARIANCE=.2,kn.MAX_INDIVIDUAL_VARIANCE=.45,kn.MIN_FINDER_PATTERN_RATIO=9.5/12,kn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ki{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof ki))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Xa{constructor(s,o,c,f,d){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ht(c,d)),this.resultPoints.push(new Ht(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Xa))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class Kn{constructor(){}static getRSSvalue(s,o,c){let f=0;for(let v of s)f+=v;let d=0,p=0,x=s.length;for(let v=0;v<x-1;v++){let b;for(b=1,p|=1<<v;b<s[v];b++,p&=~(1<<v)){let R=Kn.combins(f-b-1,x-v-2);if(c&&p===0&&f-b-(x-v-1)>=x-v-1&&(R-=Kn.combins(f-b-(x-v),x-v-2)),x-v-1>1){let P=0;for(let L=f-b-(x-v-2);L>o;L--)P+=Kn.combins(f-b-L-1,x-v-3);R-=P*(x-1-v)}else f-b>o&&R--;d+=R}f-=b}return d}static combins(s,o){let c,f;s-o>o?(f=o,c=s-o):(f=s-o,c=o);let d=1,p=1;for(let x=s;x>c;x--)d*=x,p<=f&&(d/=p,p++);for(;p<=f;)d/=p,p++;return d}}class In{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let c=12*o,f=new At(c),d=0,x=s[0].getRightChar().getValue();for(let v=11;v>=0;--v)(x&1<<v)!=0&&f.set(d),d++;for(let v=1;v<s.length;++v){let b=s[v],R=b.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&f.set(d),d++;if(b.getRightChar()!=null){let P=b.getRightChar().getValue();for(let L=11;L>=0;--L)(P&1<<L)!=0&&f.set(d),d++}}return f}}class mn{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class xr{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Bn extends xr{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Bn.FNC1}}Bn.FNC1="$";class Zi extends xr{constructor(s,o,c){super(s),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Bi extends xr{constructor(s,o,c){if(super(s),o<0||o>10||c<0||c>10)throw new H;this.firstDigit=o,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Bi.FNC1}isSecondDigitFNC1(){return this.secondDigit===Bi.FNC1}isAnyFNC1(){return this.firstDigit===Bi.FNC1||this.secondDigit===Bi.FNC1}}Bi.FNC1=10;class Ut{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ht;let o=s.substring(0,2);for(let d of Ut.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(2,d[2],s):Ut.processFixedAI(2,d[1],s);if(s.length<3)throw new ht;let c=s.substring(0,3);for(let d of Ut.THREE_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(3,d[2],s):Ut.processFixedAI(3,d[1],s);for(let d of Ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(4,d[2],s):Ut.processFixedAI(4,d[1],s);if(s.length<4)throw new ht;let f=s.substring(0,4);for(let d of Ut.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===Ut.VARIABLE_LENGTH?Ut.processVariableAI(4,d[2],s):Ut.processFixedAI(4,d[1],s);throw new ht}static processFixedAI(s,o,c){if(c.length<s)throw new ht;let f=c.substring(0,s);if(c.length<s+o)throw new ht;let d=c.substring(s,s+o),p=c.substring(s+o),x="("+f+")"+d,v=Ut.parseFieldsInGeneralPurpose(p);return v==null?x:x+v}static processVariableAI(s,o,c){let f=c.substring(0,s),d;c.length<s+o?d=c.length:d=s+o;let p=c.substring(s,d),x=c.substring(d),v="("+f+")"+p,b=Ut.parseFieldsInGeneralPurpose(x);return b==null?v:v+b}}Ut.VARIABLE_LENGTH=[],Ut.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ut.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ut.VARIABLE_LENGTH,20],["22",Ut.VARIABLE_LENGTH,29],["30",Ut.VARIABLE_LENGTH,8],["37",Ut.VARIABLE_LENGTH,8],["90",Ut.VARIABLE_LENGTH,30],["91",Ut.VARIABLE_LENGTH,30],["92",Ut.VARIABLE_LENGTH,30],["93",Ut.VARIABLE_LENGTH,30],["94",Ut.VARIABLE_LENGTH,30],["95",Ut.VARIABLE_LENGTH,30],["96",Ut.VARIABLE_LENGTH,30],["97",Ut.VARIABLE_LENGTH,3],["98",Ut.VARIABLE_LENGTH,30],["99",Ut.VARIABLE_LENGTH,30]],Ut.THREE_DIGIT_DATA_LENGTH=[["240",Ut.VARIABLE_LENGTH,30],["241",Ut.VARIABLE_LENGTH,30],["242",Ut.VARIABLE_LENGTH,6],["250",Ut.VARIABLE_LENGTH,30],["251",Ut.VARIABLE_LENGTH,30],["253",Ut.VARIABLE_LENGTH,17],["254",Ut.VARIABLE_LENGTH,20],["400",Ut.VARIABLE_LENGTH,30],["401",Ut.VARIABLE_LENGTH,30],["402",17],["403",Ut.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ut.VARIABLE_LENGTH,20],["421",Ut.VARIABLE_LENGTH,15],["422",3],["423",Ut.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ut.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ut.VARIABLE_LENGTH,15],["391",Ut.VARIABLE_LENGTH,18],["392",Ut.VARIABLE_LENGTH,15],["393",Ut.VARIABLE_LENGTH,18],["703",Ut.VARIABLE_LENGTH,30]],Ut.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ut.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ut.VARIABLE_LENGTH,20],["8003",Ut.VARIABLE_LENGTH,30],["8004",Ut.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ut.VARIABLE_LENGTH,30],["8008",Ut.VARIABLE_LENGTH,12],["8018",18],["8020",Ut.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ut.VARIABLE_LENGTH,70],["8200",Ut.VARIABLE_LENGTH,70]];class Ji{constructor(s){this.buffer=new Y,this.information=s}decodeAllCodes(s,o){let c=o,f=null;do{let d=this.decodeGeneralPurposeField(c,f),p=Ut.parseFieldsInGeneralPurpose(d.getNewString());if(p!=null&&s.append(p),d.isRemaining()?f=""+d.getRemainingValue():f=null,c===d.getNewPosition())break;c=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Bi(this.information.getSize(),Bi.FNC1,Bi.FNC1):new Bi(this.information.getSize(),d-1,Bi.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),c=(o-8)/11,f=(o-8)%11;return new Bi(s+7,c,f)}extractNumericValueFromBitArray(s,o){return Ji.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,c){let f=0;for(let d=0;d<c;++d)s.get(o+d)&&(f|=1<<c-d-1);return f}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Zi(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Zi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let c=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(c!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Zi(this.current.getPosition(),this.buffer.toString()):o=new Zi(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new mn(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Zi(this.current.getPosition(),this.buffer.toString());return new mn(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Zi(this.current.getPosition(),this.buffer.toString());return new mn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Zi(this.current.getPosition(),this.buffer.toString());return new mn(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new Bn(s+5,Bn.FNC1);if(o>=5&&o<15)return new Bn(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,7);if(c>=64&&c<90)return new Bn(s+7,""+(c+1));if(c>=90&&c<116)return new Bn(s+7,""+(c+7));let f=this.extractNumericValueFromBitArray(s,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new H}return new Bn(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,6);return c>=16&&c<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new Bn(s+5,Bn.FNC1);if(o>=5&&o<15)return new Bn(s+5,"0"+(o-5));let c=this.extractNumericValueFromBitArray(s,6);if(c>=32&&c<58)return new Bn(s+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new sr("Decoding invalid alphanumeric value: "+c)}return new Bn(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class bs{constructor(s){this.information=s,this.generalDecoder=new Ji(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pn extends bs{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,c)}encodeCompressedGtinWithoutAI(s,o,c){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&s.append("0"),d/10===0&&s.append("0"),s.append(d)}pn.appendCheckDigit(s,c)}static appendCheckDigit(s,o){let c=0;for(let f=0;f<13;f++){let d=s.charAt(f+o).charCodeAt(0)-48;c+=(f&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),s.append(c)}}pn.GTIN_SIZE=40;class Ci extends pn{constructor(s){super(s)}parseInformation(){let s=new Y;s.append("(01)");let o=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Ci.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,Ci.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,Ci.HEADER_SIZE+44)}}Ci.HEADER_SIZE=4;class wr extends bs{constructor(s){super(s)}parseInformation(){let s=new Y;return this.getGeneralDecoder().decodeAllCodes(s,wr.HEADER_SIZE)}}wr.HEADER_SIZE=5;class _r extends pn{constructor(s){super(s)}encodeCompressedWeight(s,o,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,c);this.addWeightCode(s,f);let d=this.checkWeight(f),p=1e5;for(let x=0;x<5;++x)d/p===0&&s.append("0"),p/=10;s.append(d)}}class ze extends _r{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=ze.HEADER_SIZE+_r.GTIN_SIZE+ze.WEIGHT_SIZE)throw new ht;let s=new Y;return this.encodeCompressedGtin(s,ze.HEADER_SIZE),this.encodeCompressedWeight(s,ze.HEADER_SIZE+_r.GTIN_SIZE,ze.WEIGHT_SIZE),s.toString()}}ze.HEADER_SIZE=5,ze.WEIGHT_SIZE=15;class Ul extends ze{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class oa extends ze{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Wn extends pn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Wn.HEADER_SIZE+pn.GTIN_SIZE)throw new ht;let s=new Y;this.encodeCompressedGtin(s,Wn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Wn.HEADER_SIZE+pn.GTIN_SIZE,Wn.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(Wn.HEADER_SIZE+pn.GTIN_SIZE+Wn.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}Wn.HEADER_SIZE=8,Wn.LAST_DIGIT_SIZE=2;class fn extends pn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<fn.HEADER_SIZE+pn.GTIN_SIZE)throw new ht;let s=new Y;this.encodeCompressedGtin(s,fn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+pn.GTIN_SIZE,fn.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(fn.HEADER_SIZE+pn.GTIN_SIZE+fn.LAST_DIGIT_SIZE,fn.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(fn.HEADER_SIZE+pn.GTIN_SIZE+fn.LAST_DIGIT_SIZE+fn.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}fn.HEADER_SIZE=8,fn.LAST_DIGIT_SIZE=2,fn.FIRST_THREE_DIGITS_SIZE=10;class He extends _r{constructor(s,o,c){super(s),this.dateCode=c,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=He.HEADER_SIZE+He.GTIN_SIZE+He.WEIGHT_SIZE+He.DATE_SIZE)throw new ht;let s=new Y;return this.encodeCompressedGtin(s,He.HEADER_SIZE),this.encodeCompressedWeight(s,He.HEADER_SIZE+He.GTIN_SIZE,He.WEIGHT_SIZE),this.encodeCompressedDate(s,He.HEADER_SIZE+He.GTIN_SIZE+He.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,He.DATE_SIZE);if(c==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=c%32;c/=32;let d=c%12+1;c/=12;let p=c;p/10==0&&s.append("0"),s.append(p),d/10==0&&s.append("0"),s.append(d),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}He.HEADER_SIZE=8,He.WEIGHT_SIZE=20,He.DATE_SIZE=16;function Tr(M){try{if(M.get(1))return new Ci(M);if(!M.get(2))return new wr(M);switch(Ji.extractNumericValueFromBitArray(M,1,4)){case 4:return new Ul(M);case 5:return new oa(M)}switch(Ji.extractNumericValueFromBitArray(M,1,5)){case 12:return new Wn(M);case 13:return new fn(M)}switch(Ji.extractNumericValueFromBitArray(M,1,7)){case 56:return new He(M,"310","11");case 57:return new He(M,"320","11");case 58:return new He(M,"310","13");case 59:return new He(M,"320","13");case 60:return new He(M,"310","15");case 61:return new He(M,"320","15");case 62:return new He(M,"310","17");case 63:return new He(M,"320","17")}}catch(s){throw console.log(s),new sr("unknown decoder: "+M)}}class $i{constructor(s,o,c,f){this.leftchar=s,this.rightchar=o,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof $i?$i.equalsOrNull(s.leftchar,o.leftchar)&&$i.equalsOrNull(s.rightchar,o.rightchar)&&$i.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:$i.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xo{constructor(s,o,c){this.pairs=s,this.rowNumber=o,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof Xo?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let c;return s.forEach((f,d)=>{o.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Ct extends kn{constructor(s){super(...arguments),this.pairs=new Array(Ct.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,c){this.pairs.length=0,this.startFromEven=!1;try{return Ct.constructResult(this.decodeRow2pairs(s,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Ct.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(d){if(d instanceof ht){if(!this.pairs.length)throw new ht;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new ht}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let c=o;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!Ct.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(f);try{return this.checkRows(d,c+1)}catch(p){this.verbose&&console.log(p)}}throw new ht}static isValidSequence(s){for(let o of Ct.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let c=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=o[f]){c=!1;break}if(c)return!0}return!1}storeRow(s,o){let c=0,f=!1,d=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>s){d=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),c++}d||f||Ct.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Xo(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let c of o)if(c.getPairs().length!==s.length){for(let f of c.getPairs())for(let d of s)if($i.equals(f,d))break}}static isPartialRow(s,o){for(let c of o){let f=!0;for(let d of s){let p=!1;for(let x of c.getPairs())if(d.equals(x)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=In.buildBitArray(s),f=Tr(o).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],p[0],p[1]];return new zt(f,null,null,x,Ot.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),c=s.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let v=this.pairs.get(x);f+=v.getLeftChar().getChecksumPortion(),d++;let b=v.getRightChar();b!=null&&(f+=b.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(s,o){let c;return s.get(o)?(c=s.getNextUnset(o),c=s.getNextSet(c)):(c=s.getNextSet(o),c=s.getNextUnset(c)),c}retrieveNextPair(s,o,c){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,p=!0,x=-1;do this.findNextPair(s,o,x),d=this.parseFoundFinderPattern(s,c,f),d==null?x=Ct.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let v=this.decodeDataCharacter(s,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new ht;let b;try{b=this.decodeDataCharacter(s,d,f,!1)}catch(R){b=null,this.verbose&&console.log(R)}return new $i(v,b,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=s.getSize(),p;c>=0?p=c:this.isEmptyPair(o)?p=0:p=o[o.length-1].getFinderPattern().getStartEnd()[1];let x=o.length%2!=0;this.startFromEven&&(x=!x);let v=!1;for(;p<d&&(v=!s.get(p),!!v);)p++;let b=0,R=p;for(let P=p;P<d;P++)if(s.get(P)!=v)f[b]++;else{if(b==3){if(x&&Ct.reverseCounters(f),Ct.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=P;return}x&&Ct.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,b--}else b++;f[b]=1,v=!v}throw new ht}static reverseCounters(s){let o=s.length;for(let c=0;c<o/2;++c){let f=s[c];s[c]=s[o-c-1],s[o-c-1]=f}}parseFoundFinderPattern(s,o,c){let f,d,p;if(c){let b=this.startEnd[0]-1;for(;b>=0&&!s.get(b);)b--;b++,f=this.startEnd[0]-b,d=b,p=this.startEnd[1]}else d=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let x=this.getDecodeFinderCounters();X.arraycopy(x,0,x,1,x.length-1),x[0]=f;let v;try{v=this.parseFinderValue(x,Ct.FINDER_PATTERNS)}catch{return null}return new Xa(v,[d,p],d,p,o)}decodeDataCharacter(s,o,c,f){let d=this.getDataCharacterCounters();for(let tn=0;tn<d.length;tn++)d[tn]=0;if(f)Ct.recordPatternInReverse(s,o.getStartEnd()[0],d);else{Ct.recordPattern(s,o.getStartEnd()[1],d);for(let tn=0,ci=d.length-1;tn<ci;tn++,ci--){let ji=d[tn];d[tn]=d[ci],d[ci]=ji}}let p=17,x=Zt.sum(new Int32Array(d))/p,v=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(x-v)/v>.3)throw new ht;let b=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let tn=0;tn<d.length;tn++){let ci=1*d[tn]/x,ji=ci+.5;if(ji<1){if(ci<.3)throw new ht;ji=1}else if(ji>8){if(ci>8.7)throw new ht;ji=8}let ya=tn/2;(tn&1)==0?(b[ya]=ji,P[ya]=ci-ji):(R[ya]=ji,L[ya]=ci-ji)}this.adjustOddEvenCounts(p);let q=4*o.getValue()+(c?0:2)+(f?0:1)-1,$=0,et=0;for(let tn=b.length-1;tn>=0;tn--){if(Ct.isNotA1left(o,c,f)){let ci=Ct.WEIGHTS[q][2*tn];et+=b[tn]*ci}$+=b[tn]}let lt=0;for(let tn=R.length-1;tn>=0;tn--)if(Ct.isNotA1left(o,c,f)){let ci=Ct.WEIGHTS[q][2*tn+1];lt+=R[tn]*ci}let gt=et+lt;if(($&1)!=0||$>13||$<4)throw new ht;let Mt=(13-$)/2,Lt=Ct.SYMBOL_WIDEST[Mt],Nt=9-Lt,ge=Kn.getRSSvalue(b,Lt,!0),he=Kn.getRSSvalue(R,Nt,!1),Ii=Ct.EVEN_TOTAL_SUBSET[Mt],cr=Ct.GSUM[Mt],Hi=ge*Ii+he+cr;return new ki(Hi,gt)}static isNotA1left(s,o,c){return!(s.getValue()==0&&o&&c)}adjustOddEvenCounts(s){let o=Zt.sum(new Int32Array(this.getOddCounts())),c=Zt.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let p=!1,x=!1;c>13?x=!0:c<4&&(p=!0);let v=o+c-s,b=(o&1)==1,R=(c&1)==0;if(v==1)if(b){if(R)throw new ht;d=!0}else{if(!R)throw new ht;x=!0}else if(v==-1)if(b){if(R)throw new ht;f=!0}else{if(!R)throw new ht;p=!0}else if(v==0){if(b){if(!R)throw new ht;o<c?(f=!0,x=!0):(d=!0,p=!0)}else if(R)throw new ht}else throw new ht;if(f){if(d)throw new ht;Ct.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ct.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new ht;Ct.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ct.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.SYMBOL_WIDEST=[7,5,4,3,1],Ct.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ct.GSUM=[0,348,1388,2948,3988],Ct.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ct.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ct.FINDER_PAT_A=0,Ct.FINDER_PAT_B=1,Ct.FINDER_PAT_C=2,Ct.FINDER_PAT_D=3,Ct.FINDER_PAT_E=4,Ct.FINDER_PAT_F=5,Ct.FINDER_PATTERN_SEQUENCES=[[Ct.FINDER_PAT_A,Ct.FINDER_PAT_A],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_B,Ct.FINDER_PAT_B],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_C,Ct.FINDER_PAT_B,Ct.FINDER_PAT_D],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_E,Ct.FINDER_PAT_B,Ct.FINDER_PAT_D,Ct.FINDER_PAT_C],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_E,Ct.FINDER_PAT_B,Ct.FINDER_PAT_D,Ct.FINDER_PAT_D,Ct.FINDER_PAT_F],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_E,Ct.FINDER_PAT_B,Ct.FINDER_PAT_D,Ct.FINDER_PAT_E,Ct.FINDER_PAT_F,Ct.FINDER_PAT_F],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_A,Ct.FINDER_PAT_B,Ct.FINDER_PAT_B,Ct.FINDER_PAT_C,Ct.FINDER_PAT_C,Ct.FINDER_PAT_D,Ct.FINDER_PAT_D],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_A,Ct.FINDER_PAT_B,Ct.FINDER_PAT_B,Ct.FINDER_PAT_C,Ct.FINDER_PAT_C,Ct.FINDER_PAT_D,Ct.FINDER_PAT_E,Ct.FINDER_PAT_E],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_A,Ct.FINDER_PAT_B,Ct.FINDER_PAT_B,Ct.FINDER_PAT_C,Ct.FINDER_PAT_C,Ct.FINDER_PAT_D,Ct.FINDER_PAT_E,Ct.FINDER_PAT_F,Ct.FINDER_PAT_F],[Ct.FINDER_PAT_A,Ct.FINDER_PAT_A,Ct.FINDER_PAT_B,Ct.FINDER_PAT_B,Ct.FINDER_PAT_C,Ct.FINDER_PAT_D,Ct.FINDER_PAT_D,Ct.FINDER_PAT_E,Ct.FINDER_PAT_E,Ct.FINDER_PAT_F,Ct.FINDER_PAT_F]],Ct.MAX_PAIRS=11;class la extends ki{constructor(s,o,c){super(s,o),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Le extends kn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,c){const f=this.decodePair(o,!1,s,c);Le.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,s,c);Le.addOrTally(this.possibleRightPairs,d),o.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Le.checkChecksum(p,x))return Le.constructResult(p,x)}throw new ht}static addOrTally(s,o){if(o==null)return;let c=!1;for(let f of s)if(f.getValue()===o.getValue()){f.incrementCount(),c=!0;break}c||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let c=4537077*s.getValue()+o.getValue(),f=new String(c).toString(),d=new Y;for(let b=13-f.length;b>0;b--)d.append("0");d.append(f);let p=0;for(let b=0;b<13;b++){let R=d.charAt(b).charCodeAt(0)-48;p+=(b&1)===0?3*R:R}p=10-p%10,p===10&&(p=0),d.append(p.toString());let x=s.getFinderPattern().getResultPoints(),v=o.getFinderPattern().getResultPoints();return new zt(d.toString(),null,0,[x[0],x[1],v[0],v[1]],Ot.RSS_14,new Date().getTime())}static checkChecksum(s,o){let c=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(s,o,c,f){try{let d=this.findFinderPattern(s,o),p=this.parseFoundFinderPattern(s,c,o,d),x=f==null?null:f.get(Rt.NEED_RESULT_POINT_CALLBACK);if(x!=null){let R=(d[0]+d[1])/2;o&&(R=s.getSize()-1-R),x.foundPossibleResultPoint(new Ht(R,c))}let v=this.decodeDataCharacter(s,p,!0),b=this.decodeDataCharacter(s,p,!1);return new la(1597*v.getValue()+b.getValue(),v.getChecksumPortion()+4*b.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,o,c){let f=this.getDataCharacterCounters();for(let lt=0;lt<f.length;lt++)f[lt]=0;if(c)Ye.recordPatternInReverse(s,o.getStartEnd()[0],f);else{Ye.recordPattern(s,o.getStartEnd()[1]+1,f);for(let lt=0,gt=f.length-1;lt<gt;lt++,gt--){let Mt=f[lt];f[lt]=f[gt],f[gt]=Mt}}let d=c?16:15,p=Zt.sum(new Int32Array(f))/d,x=this.getOddCounts(),v=this.getEvenCounts(),b=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let lt=0;lt<f.length;lt++){let gt=f[lt]/p,Mt=Math.floor(gt+.5);Mt<1?Mt=1:Mt>8&&(Mt=8);let Lt=Math.floor(lt/2);(lt&1)===0?(x[Lt]=Mt,b[Lt]=gt-Mt):(v[Lt]=Mt,R[Lt]=gt-Mt)}this.adjustOddEvenCounts(c,d);let P=0,L=0;for(let lt=x.length-1;lt>=0;lt--)L*=9,L+=x[lt],P+=x[lt];let q=0,$=0;for(let lt=v.length-1;lt>=0;lt--)q*=9,q+=v[lt],$+=v[lt];let et=L+3*q;if(c){if((P&1)!==0||P>12||P<4)throw new ht;let lt=(12-P)/2,gt=Le.OUTSIDE_ODD_WIDEST[lt],Mt=9-gt,Lt=Kn.getRSSvalue(x,gt,!1),Nt=Kn.getRSSvalue(v,Mt,!0),ge=Le.OUTSIDE_EVEN_TOTAL_SUBSET[lt],he=Le.OUTSIDE_GSUM[lt];return new ki(Lt*ge+Nt+he,et)}else{if(($&1)!==0||$>10||$<4)throw new ht;let lt=(10-$)/2,gt=Le.INSIDE_ODD_WIDEST[lt],Mt=9-gt,Lt=Kn.getRSSvalue(x,gt,!0),Nt=Kn.getRSSvalue(v,Mt,!1),ge=Le.INSIDE_ODD_TOTAL_SUBSET[lt],he=Le.INSIDE_GSUM[lt];return new ki(Nt*ge+Lt+he,et)}}findFinderPattern(s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=s.getSize(),d=!1,p=0;for(;p<f&&(d=!s.get(p),o!==d);)p++;let x=0,v=p;for(let b=p;b<f;b++)if(s.get(b)!==d)c[x]++;else{if(x===3){if(kn.isFinderPattern(c))return[v,b];v+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,d=!d}throw new ht}parseFoundFinderPattern(s,o,c,f){let d=s.get(f[0]),p=f[0]-1;for(;p>=0&&d!==s.get(p);)p--;p++;const x=f[0]-p,v=this.getDecodeFinderCounters(),b=new Int32Array(v.length);X.arraycopy(v,0,b,1,v.length-1),b[0]=x;const R=this.parseFinderValue(b,Le.FINDER_PATTERNS);let P=p,L=f[1];return c&&(P=s.getSize()-1-P,L=s.getSize()-1-L),new Xa(R,[p,f[1]],P,L,o)}adjustOddEvenCounts(s,o){let c=Zt.sum(new Int32Array(this.getOddCounts())),f=Zt.sum(new Int32Array(this.getEvenCounts())),d=!1,p=!1,x=!1,v=!1;s?(c>12?p=!0:c<4&&(d=!0),f>12?v=!0:f<4&&(x=!0)):(c>11?p=!0:c<5&&(d=!0),f>10?v=!0:f<4&&(x=!0));let b=c+f-o,R=(c&1)===(s?1:0),P=(f&1)===1;if(b===1)if(R){if(P)throw new ht;p=!0}else{if(!P)throw new ht;v=!0}else if(b===-1)if(R){if(P)throw new ht;d=!0}else{if(!P)throw new ht;x=!0}else if(b===0){if(R){if(!P)throw new ht;c<f?(d=!0,v=!0):(p=!0,x=!0)}else if(P)throw new ht}else throw new ht;if(d){if(p)throw new ht;kn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&kn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(v)throw new ht;kn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&kn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Le.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Le.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Le.OUTSIDE_GSUM=[0,161,961,2015,2715],Le.INSIDE_GSUM=[0,336,1036,1516],Le.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Le.INSIDE_ODD_WIDEST=[2,4,6,8],Le.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ar extends Ye{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const c=s?s.get(Rt.POSSIBLE_FORMATS):null,f=s&&s.get(Rt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Ot.EAN_13)||c.includes(Ot.UPC_A)||c.includes(Ot.EAN_8)||c.includes(Ot.UPC_E))&&this.readers.push(new aa(s)),c.includes(Ot.CODE_39)&&this.readers.push(new Ke(f)),c.includes(Ot.CODE_128)&&this.readers.push(new kt),c.includes(Ot.ITF)&&this.readers.push(new Ae),c.includes(Ot.RSS_14)&&this.readers.push(new Le),c.includes(Ot.RSS_EXPANDED)&&this.readers.push(new Ct(this.verbose))):(this.readers.push(new aa(s)),this.readers.push(new Ke),this.readers.push(new aa(s)),this.readers.push(new kt),this.readers.push(new Ae),this.readers.push(new Le),this.readers.push(new Ct(this.verbose)))}decodeRow(s,o,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,o,c)}catch{}throw new ht}reset(){this.readers.forEach(s=>s.reset())}}class Ya extends Vt{constructor(s=500,o){super(new ar(o),s,o)}}class xe{constructor(s,o,c){this.ecCodewords=s,this.ecBlocks=[o],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ve{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pe{constructor(s,o,c,f,d,p){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=p;let x=0;const v=p.getECCodewords(),b=p.getECBlocks();for(let R of b)x+=R.getCount()*(R.getDataCodewords()+v);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if((s&1)!==0||(o&1)!==0)throw new H;for(let c of pe.VERSIONS)if(c.symbolSizeRows===s&&c.symbolSizeColumns===o)return c;throw new H}toString(){return""+this.versionNumber}static buildVersions(){return[new pe(1,10,10,8,8,new xe(5,new ve(1,3))),new pe(2,12,12,10,10,new xe(7,new ve(1,5))),new pe(3,14,14,12,12,new xe(10,new ve(1,8))),new pe(4,16,16,14,14,new xe(12,new ve(1,12))),new pe(5,18,18,16,16,new xe(14,new ve(1,18))),new pe(6,20,20,18,18,new xe(18,new ve(1,22))),new pe(7,22,22,20,20,new xe(20,new ve(1,30))),new pe(8,24,24,22,22,new xe(24,new ve(1,36))),new pe(9,26,26,24,24,new xe(28,new ve(1,44))),new pe(10,32,32,14,14,new xe(36,new ve(1,62))),new pe(11,36,36,16,16,new xe(42,new ve(1,86))),new pe(12,40,40,18,18,new xe(48,new ve(1,114))),new pe(13,44,44,20,20,new xe(56,new ve(1,144))),new pe(14,48,48,22,22,new xe(68,new ve(1,174))),new pe(15,52,52,24,24,new xe(42,new ve(2,102))),new pe(16,64,64,14,14,new xe(56,new ve(2,140))),new pe(17,72,72,16,16,new xe(36,new ve(4,92))),new pe(18,80,80,18,18,new xe(48,new ve(4,114))),new pe(19,88,88,20,20,new xe(56,new ve(4,144))),new pe(20,96,96,22,22,new xe(68,new ve(4,174))),new pe(21,104,104,24,24,new xe(56,new ve(6,136))),new pe(22,120,120,18,18,new xe(68,new ve(6,175))),new pe(23,132,132,20,20,new xe(62,new ve(8,163))),new pe(24,144,144,22,22,new xe(62,new ve(8,156),new ve(2,155))),new pe(25,8,18,6,16,new xe(7,new ve(1,5))),new pe(26,8,32,6,14,new xe(11,new ve(1,10))),new pe(27,12,26,10,24,new xe(14,new ve(1,16))),new pe(28,12,36,10,16,new xe(18,new ve(1,22))),new pe(29,16,36,14,16,new xe(24,new ve(1,32))),new pe(30,16,48,14,22,new xe(28,new ve(1,49)))]}}pe.VERSIONS=pe.buildVersions();class Yo{constructor(s){const o=s.getHeight();if(o<8||o>144||(o&1)!==0)throw new H;this.version=Yo.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new Jt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),c=s.getWidth();return pe.getVersionForDimensions(o,c)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,c=4,f=0;const d=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let x=!1,v=!1,b=!1,R=!1;do if(c===d&&f===0&&!x)s[o++]=this.readCorner1(d,p)&255,c-=2,f+=2,x=!0;else if(c===d-2&&f===0&&(p&3)!==0&&!v)s[o++]=this.readCorner2(d,p)&255,c-=2,f+=2,v=!0;else if(c===d+4&&f===2&&(p&7)===0&&!b)s[o++]=this.readCorner3(d,p)&255,c-=2,f+=2,b=!0;else if(c===d-2&&f===0&&(p&7)===4&&!R)s[o++]=this.readCorner4(d,p)&255,c-=2,f+=2,R=!0;else{do c<d&&f>=0&&!this.readMappingMatrix.get(f,c)&&(s[o++]=this.readUtah(c,f,d,p)&255),c-=2,f+=2;while(c>=0&&f<p);c+=1,f+=3;do c>=0&&f<p&&!this.readMappingMatrix.get(f,c)&&(s[o++]=this.readUtah(c,f,d,p)&255),c+=2,f-=2;while(c<d&&f>=0);c+=3,f+=1}while(c<d||f<p);if(o!==this.version.getTotalCodewords())throw new H;return s}readModule(s,o,c,f){return s<0&&(s+=c,o+=4-(c+4&7)),o<0&&(o+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,c,f){let d=0;return this.readModule(s-2,o-2,c,f)&&(d|=1),d<<=1,this.readModule(s-2,o-1,c,f)&&(d|=1),d<<=1,this.readModule(s-1,o-2,c,f)&&(d|=1),d<<=1,this.readModule(s-1,o-1,c,f)&&(d|=1),d<<=1,this.readModule(s-1,o,c,f)&&(d|=1),d<<=1,this.readModule(s,o-2,c,f)&&(d|=1),d<<=1,this.readModule(s,o-1,c,f)&&(d|=1),d<<=1,this.readModule(s,o,c,f)&&(d|=1),d}readCorner1(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,1,s,o)&&(c|=1),c<<=1,this.readModule(s-1,2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}readCorner2(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-4,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner3(s,o){let c=0;return this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(0,o-3,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-3,s,o)&&(c|=1),c<<=1,this.readModule(1,o-2,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c}readCorner4(s,o){let c=0;return this.readModule(s-3,0,s,o)&&(c|=1),c<<=1,this.readModule(s-2,0,s,o)&&(c|=1),c<<=1,this.readModule(s-1,0,s,o)&&(c|=1),c<<=1,this.readModule(0,o-2,s,o)&&(c|=1),c<<=1,this.readModule(0,o-1,s,o)&&(c|=1),c<<=1,this.readModule(1,o-1,s,o)&&(c|=1),c<<=1,this.readModule(2,o-1,s,o)&&(c|=1),c<<=1,this.readModule(3,o-1,s,o)&&(c|=1),c}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new S("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),p=o/f|0,x=c/d|0,v=p*f,b=x*d,R=new Jt(b,v);for(let P=0;P<p;++P){const L=P*f;for(let q=0;q<x;++q){const $=q*d;for(let et=0;et<f;++et){const lt=P*(f+2)+1+et,gt=L+et;for(let Mt=0;Mt<d;++Mt){const Lt=q*(d+2)+1+Mt;if(s.get(Lt,lt)){const Nt=$+Mt;R.set(Nt,gt)}}}}}return R}}class tr{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const c=o.getECBlocks();let f=0;const d=c.getECBlocks();for(let et of d)f+=et.getCount();const p=new Array(f);let x=0;for(let et of d)for(let lt=0;lt<et.getCount();lt++){const gt=et.getDataCodewords(),Mt=c.getECCodewords()+gt;p[x++]=new tr(gt,new Uint8Array(Mt))}const b=p[0].codewords.length-c.getECCodewords(),R=b-1;let P=0;for(let et=0;et<R;et++)for(let lt=0;lt<x;lt++)p[lt].codewords[et]=s[P++];const L=o.getVersionNumber()===24,q=L?8:x;for(let et=0;et<q;et++)p[et].codewords[b-1]=s[P++];const $=p[0].codewords.length;for(let et=b;et<$;et++)for(let lt=0;lt<x;lt++){const gt=L?(lt+8)%x:lt,Mt=L&&gt>7?et-1:et;p[gt].codewords[Mt]=s[P++]}if(P!==s.length)throw new S;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class un{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new S(""+s);let o=0,c=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(c>0){const p=8-c,x=s<p?s:p,v=p-x,b=255>>8-x<<v;o=(d[f]&b)>>v,s-=x,c+=x,c===8&&(c=0,f++)}if(s>0){for(;s>=8;)o=o<<8|d[f]&255,f++,s-=8;if(s>0){const p=8-s,x=255>>p<<p;o=o<<s|(d[f]&x)>>p,c+=s}}return this.bitOffset=c,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rn;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(rn||(rn={}));class Vi{static decode(s){const o=new un(s),c=new Y,f=new Y,d=new Array;let p=rn.ASCII_ENCODE;do if(p===rn.ASCII_ENCODE)p=this.decodeAsciiSegment(o,c,f);else{switch(p){case rn.C40_ENCODE:this.decodeC40Segment(o,c);break;case rn.TEXT_ENCODE:this.decodeTextSegment(o,c);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,c);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(o,c);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(o,c,d);break;default:throw new H}p=rn.ASCII_ENCODE}while(p!==rn.PAD_ENCODE&&o.available()>0);return f.length()>0&&c.append(f.toString()),new vi(s,c.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,o,c){let f=!1;do{let d=s.readBits(8);if(d===0)throw new H;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),rn.ASCII_ENCODE;if(d===129)return rn.PAD_ENCODE;if(d<=229){const p=d-130;p<10&&o.append("0"),o.append(""+p)}else switch(d){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),c.insert(0,"");break;case 237:o.append("[)>06"),c.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new H;break}}while(s.available()>0);return rn.ASCII_ENCODE}static decodeC40Segment(s,o){let c=!1;const f=[];let d=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),f);for(let x=0;x<3;x++){const v=f[x];switch(d){case 0:if(v<3)d=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[v];c?(o.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):o.append(b)}else throw new H;break;case 1:c?(o.append(String.fromCharCode(v+128)),c=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[v];c?(o.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):o.append(b)}else switch(v){case 27:o.append("");break;case 30:c=!0;break;default:throw new H}d=0;break;case 3:c?(o.append(String.fromCharCode(v+224)),c=!1):o.append(String.fromCharCode(v+96)),d=0;break;default:throw new H}}}while(s.available()>0)}static decodeTextSegment(s,o){let c=!1,f=[],d=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),f);for(let x=0;x<3;x++){const v=f[x];switch(d){case 0:if(v<3)d=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[v];c?(o.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):o.append(b)}else throw new H;break;case 1:c?(o.append(String.fromCharCode(v+128)),c=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[v];c?(o.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):o.append(b)}else switch(v){case 27:o.append("");break;case 30:c=!0;break;default:throw new H}d=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[v];c?(o.append(String.fromCharCode(b.charCodeAt(0)+128)),c=!1):o.append(b),d=0}else throw new H;break;default:throw new H}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const c=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),c);for(let d=0;d<3;d++){const p=c[d];switch(p){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(p<14)o.append(String.fromCharCode(p+44));else if(p<40)o.append(String.fromCharCode(p+51));else throw new H;break}}}while(s.available()>0)}static parseTwoBytes(s,o,c){let f=(s<<8)+o-1,d=Math.floor(f/1600);c[0]=d,f-=d*1600,d=Math.floor(f/40),c[1]=d,c[2]=f-d*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let c=0;c<4;c++){let f=s.readBits(6);if(f===31){const d=8-s.getBitOffset();d!==8&&s.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,o,c){let f=1+s.getByteOffset();const d=this.unrandomize255State(s.readBits(8),f++);let p;if(d===0?p=s.available()/8|0:d<250?p=d:p=250*(d-249)+this.unrandomize255State(s.readBits(8),f++),p<0)throw new H;const x=new Uint8Array(p);for(let v=0;v<p;v++){if(s.available()<8)throw new H;x[v]=this.unrandomize255State(s.readBits(8),f++)}c.push(x);try{o.append(W.decode(x,Z.ISO88591))}catch(v){throw new sr("Platform does not support required encoding: "+v.message)}}static unrandomize255State(s,o){const c=149*o%255+1,f=s-c;return f>=0?f:f+256}}Vi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vi.TEXT_SHIFT2_SET_CHARS=Vi.C40_SHIFT2_SET_CHARS,Vi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ss{constructor(){this.rsDecoder=new cs(we.DATA_MATRIX_FIELD_256)}decode(s){const o=new Yo(s),c=o.getVersion(),f=o.readCodewords(),d=tr.getDataBlocks(f,c);let p=0;for(let b of d)p+=b.getNumDataCodewords();const x=new Uint8Array(p),v=d.length;for(let b=0;b<v;b++){const R=d[b],P=R.getCodewords(),L=R.getNumDataCodewords();this.correctErrors(P,L);for(let q=0;q<L;q++)x[q*v+b]=P[q]}return Vi.decode(x)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new k}for(let f=0;f<o;f++)s[f]=c[f]}}class ne{constructor(s){this.image=s,this.rectangleDetector=new Ar(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new ht;o=this.shiftToModuleCenter(o);const c=o[0],f=o[1],d=o[2],p=o[3];let x=this.transitionsBetween(c,p)+1,v=this.transitionsBetween(d,p)+1;(x&1)===1&&(x+=1),(v&1)===1&&(v+=1),4*x<7*v&&4*v<7*x&&(x=v=Math.max(x,v));let b=ne.sampleGrid(this.image,c,f,d,p,x,v);return new Ga(b,[c,f,d,p])}static shiftPoint(s,o,c){let f=(o.getX()-s.getX())/(c+1),d=(o.getY()-s.getY())/(c+1);return new Ht(s.getX()+f,s.getY()+d)}static moveAway(s,o,c){let f=s.getX(),d=s.getY();return f<o?f-=1:f+=1,d<c?d-=1:d+=1,new Ht(f,d)}detectSolid1(s){let o=s[0],c=s[1],f=s[3],d=s[2],p=this.transitionsBetween(o,c),x=this.transitionsBetween(c,f),v=this.transitionsBetween(f,d),b=this.transitionsBetween(d,o),R=p,P=[d,o,c,f];return R>x&&(R=x,P[0]=o,P[1]=c,P[2]=f,P[3]=d),R>v&&(R=v,P[0]=c,P[1]=f,P[2]=d,P[3]=o),R>b&&(P[0]=f,P[1]=d,P[2]=o,P[3]=c),P}detectSolid2(s){let o=s[0],c=s[1],f=s[2],d=s[3],p=this.transitionsBetween(o,d),x=ne.shiftPoint(c,f,(p+1)*4),v=ne.shiftPoint(f,c,(p+1)*4),b=this.transitionsBetween(x,o),R=this.transitionsBetween(v,d);return b<R?(s[0]=o,s[1]=c,s[2]=f,s[3]=d):(s[0]=c,s[1]=f,s[2]=d,s[3]=o),s}correctTopRight(s){let o=s[0],c=s[1],f=s[2],d=s[3],p=this.transitionsBetween(o,d),x=this.transitionsBetween(c,d),v=ne.shiftPoint(o,c,(x+1)*4),b=ne.shiftPoint(f,c,(p+1)*4);p=this.transitionsBetween(v,d),x=this.transitionsBetween(b,d);let R=new Ht(d.getX()+(f.getX()-c.getX())/(p+1),d.getY()+(f.getY()-c.getY())/(p+1)),P=new Ht(d.getX()+(o.getX()-c.getX())/(x+1),d.getY()+(o.getY()-c.getY())/(x+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let L=this.transitionsBetween(v,R)+this.transitionsBetween(b,R),q=this.transitionsBetween(v,P)+this.transitionsBetween(b,P);return L>q?R:P}shiftToModuleCenter(s){let o=s[0],c=s[1],f=s[2],d=s[3],p=this.transitionsBetween(o,d)+1,x=this.transitionsBetween(f,d)+1,v=ne.shiftPoint(o,c,x*4),b=ne.shiftPoint(f,c,p*4);p=this.transitionsBetween(v,d)+1,x=this.transitionsBetween(b,d)+1,(p&1)===1&&(p+=1),(x&1)===1&&(x+=1);let R=(o.getX()+c.getX()+f.getX()+d.getX())/4,P=(o.getY()+c.getY()+f.getY()+d.getY())/4;o=ne.moveAway(o,R,P),c=ne.moveAway(c,R,P),f=ne.moveAway(f,R,P),d=ne.moveAway(d,R,P);let L,q;return v=ne.shiftPoint(o,c,x*4),v=ne.shiftPoint(v,d,p*4),L=ne.shiftPoint(c,o,x*4),L=ne.shiftPoint(L,f,p*4),b=ne.shiftPoint(f,d,x*4),b=ne.shiftPoint(b,c,p*4),q=ne.shiftPoint(d,f,x*4),q=ne.shiftPoint(q,o,p*4),[v,L,b,q]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,c,f,d,p,x){return Yn.getInstance().sampleGrid(s,p,x,.5,.5,p-.5,.5,p-.5,x-.5,.5,x-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(s,o){let c=Math.trunc(s.getX()),f=Math.trunc(s.getY()),d=Math.trunc(o.getX()),p=Math.trunc(o.getY()),x=Math.abs(p-f)>Math.abs(d-c);if(x){let et=c;c=f,f=et,et=d,d=p,p=et}let v=Math.abs(d-c),b=Math.abs(p-f),R=-v/2,P=f<p?1:-1,L=c<d?1:-1,q=0,$=this.image.get(x?f:c,x?c:f);for(let et=c,lt=f;et!==d;et+=L){let gt=this.image.get(x?lt:et,x?et:lt);if(gt!==$&&(q++,$=gt),R+=b,R>0){if(lt===p)break;lt+=P,R-=v}}return q}}class pi{constructor(){this.decoder=new Ss}decode(s,o=null){let c,f;if(o!=null&&o.has(Rt.PURE_BARCODE)){const b=pi.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(b),f=pi.NO_POINTS}else{const b=new ne(s.getBlackMatrix()).detect();c=this.decoder.decode(b.getBits()),f=b.getPoints()}const d=c.getRawBytes(),p=new zt(c.getText(),d,8*d.length,f,Ot.DATA_MATRIX,X.currentTimeMillis()),x=c.getByteSegments();x!=null&&p.putMetadata(ce.BYTE_SEGMENTS,x);const v=c.getECLevel();return v!=null&&p.putMetadata(ce.ERROR_CORRECTION_LEVEL,v),p}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o==null||c==null)throw new ht;const f=this.moduleSize(o,s);let d=o[1];const p=c[1];let x=o[0];const b=(c[0]-x+1)/f,R=(p-d+1)/f;if(b<=0||R<=0)throw new ht;const P=f/2;d+=P,x+=P;const L=new Jt(b,R);for(let q=0;q<R;q++){const $=d+q*f;for(let et=0;et<b;et++)s.get(x+et*f,$)&&L.set(et,q)}return L}static moduleSize(s,o){const c=o.getWidth();let f=s[0];const d=s[1];for(;f<c&&o.get(f,d);)f++;if(f===c)throw new ht;const p=f-s[0];if(p===0)throw new ht;return p}}pi.NO_POINTS=[];class ca extends Vt{constructor(s=500){super(new pi,s)}}var yn;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(yn||(yn={}));class je{constructor(s,o,c){this.value=s,this.stringValue=o,this.bits=c,je.FOR_BITS.set(c,this),je.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return je.L;case"M":return je.M;case"Q":return je.Q;case"H":return je.H;default:throw new T(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof je))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=je.FOR_BITS.size)throw new S;return je.FOR_BITS.get(s)}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.L=new je(yn.L,"L",1),je.M=new je(yn.M,"M",0),je.Q=new je(yn.Q,"Q",3),je.H=new je(yn.H,"H",2);class Vn{constructor(s){this.errorCorrectionLevel=je.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return K.bitCount(s^o)}static decodeFormatInformation(s,o){const c=Vn.doDecodeFormatInformation(s,o);return c!==null?c:Vn.doDecodeFormatInformation(s^Vn.FORMAT_INFO_MASK_QR,o^Vn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let c=Number.MAX_SAFE_INTEGER,f=0;for(const d of Vn.FORMAT_INFO_DECODE_LOOKUP){const p=d[0];if(p===s||p===o)return new Vn(d[1]);let x=Vn.numBitsDiffering(s,p);x<c&&(f=d[1],c=x),s!==o&&(x=Vn.numBitsDiffering(o,p),x<c&&(f=d[1],c=x))}return c<=3?new Vn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Vn))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Vn.FORMAT_INFO_MASK_QR=21522,Vn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ct{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const c of o)s+=c.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class j{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xt{constructor(s,o,...c){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=c;let f=0;const d=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const x of p)f+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new H;try{return this.getVersionForNumber((s-17)/4)}catch{throw new H}}static getVersionForNumber(s){if(s<1||s>40)throw new S;return Xt.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<Xt.VERSION_DECODE_INFO.length;f++){const d=Xt.VERSION_DECODE_INFO[f];if(d===s)return Xt.getVersionForNumber(f+7);const p=Vn.numBitsDiffering(s,d);p<o&&(c=f+7,o=p)}return o<=3?Xt.getVersionForNumber(c):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new Jt(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const d=this.alignmentPatternCenters[f]-2;for(let p=0;p<c;p++)f===0&&(p===0||p===c-1)||f===c-1&&p===0||o.setRegion(this.alignmentPatternCenters[p]-2,d,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}Xt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xt.VERSIONS=[new Xt(1,new Int32Array(0),new ct(7,new j(1,19)),new ct(10,new j(1,16)),new ct(13,new j(1,13)),new ct(17,new j(1,9))),new Xt(2,Int32Array.from([6,18]),new ct(10,new j(1,34)),new ct(16,new j(1,28)),new ct(22,new j(1,22)),new ct(28,new j(1,16))),new Xt(3,Int32Array.from([6,22]),new ct(15,new j(1,55)),new ct(26,new j(1,44)),new ct(18,new j(2,17)),new ct(22,new j(2,13))),new Xt(4,Int32Array.from([6,26]),new ct(20,new j(1,80)),new ct(18,new j(2,32)),new ct(26,new j(2,24)),new ct(16,new j(4,9))),new Xt(5,Int32Array.from([6,30]),new ct(26,new j(1,108)),new ct(24,new j(2,43)),new ct(18,new j(2,15),new j(2,16)),new ct(22,new j(2,11),new j(2,12))),new Xt(6,Int32Array.from([6,34]),new ct(18,new j(2,68)),new ct(16,new j(4,27)),new ct(24,new j(4,19)),new ct(28,new j(4,15))),new Xt(7,Int32Array.from([6,22,38]),new ct(20,new j(2,78)),new ct(18,new j(4,31)),new ct(18,new j(2,14),new j(4,15)),new ct(26,new j(4,13),new j(1,14))),new Xt(8,Int32Array.from([6,24,42]),new ct(24,new j(2,97)),new ct(22,new j(2,38),new j(2,39)),new ct(22,new j(4,18),new j(2,19)),new ct(26,new j(4,14),new j(2,15))),new Xt(9,Int32Array.from([6,26,46]),new ct(30,new j(2,116)),new ct(22,new j(3,36),new j(2,37)),new ct(20,new j(4,16),new j(4,17)),new ct(24,new j(4,12),new j(4,13))),new Xt(10,Int32Array.from([6,28,50]),new ct(18,new j(2,68),new j(2,69)),new ct(26,new j(4,43),new j(1,44)),new ct(24,new j(6,19),new j(2,20)),new ct(28,new j(6,15),new j(2,16))),new Xt(11,Int32Array.from([6,30,54]),new ct(20,new j(4,81)),new ct(30,new j(1,50),new j(4,51)),new ct(28,new j(4,22),new j(4,23)),new ct(24,new j(3,12),new j(8,13))),new Xt(12,Int32Array.from([6,32,58]),new ct(24,new j(2,92),new j(2,93)),new ct(22,new j(6,36),new j(2,37)),new ct(26,new j(4,20),new j(6,21)),new ct(28,new j(7,14),new j(4,15))),new Xt(13,Int32Array.from([6,34,62]),new ct(26,new j(4,107)),new ct(22,new j(8,37),new j(1,38)),new ct(24,new j(8,20),new j(4,21)),new ct(22,new j(12,11),new j(4,12))),new Xt(14,Int32Array.from([6,26,46,66]),new ct(30,new j(3,115),new j(1,116)),new ct(24,new j(4,40),new j(5,41)),new ct(20,new j(11,16),new j(5,17)),new ct(24,new j(11,12),new j(5,13))),new Xt(15,Int32Array.from([6,26,48,70]),new ct(22,new j(5,87),new j(1,88)),new ct(24,new j(5,41),new j(5,42)),new ct(30,new j(5,24),new j(7,25)),new ct(24,new j(11,12),new j(7,13))),new Xt(16,Int32Array.from([6,26,50,74]),new ct(24,new j(5,98),new j(1,99)),new ct(28,new j(7,45),new j(3,46)),new ct(24,new j(15,19),new j(2,20)),new ct(30,new j(3,15),new j(13,16))),new Xt(17,Int32Array.from([6,30,54,78]),new ct(28,new j(1,107),new j(5,108)),new ct(28,new j(10,46),new j(1,47)),new ct(28,new j(1,22),new j(15,23)),new ct(28,new j(2,14),new j(17,15))),new Xt(18,Int32Array.from([6,30,56,82]),new ct(30,new j(5,120),new j(1,121)),new ct(26,new j(9,43),new j(4,44)),new ct(28,new j(17,22),new j(1,23)),new ct(28,new j(2,14),new j(19,15))),new Xt(19,Int32Array.from([6,30,58,86]),new ct(28,new j(3,113),new j(4,114)),new ct(26,new j(3,44),new j(11,45)),new ct(26,new j(17,21),new j(4,22)),new ct(26,new j(9,13),new j(16,14))),new Xt(20,Int32Array.from([6,34,62,90]),new ct(28,new j(3,107),new j(5,108)),new ct(26,new j(3,41),new j(13,42)),new ct(30,new j(15,24),new j(5,25)),new ct(28,new j(15,15),new j(10,16))),new Xt(21,Int32Array.from([6,28,50,72,94]),new ct(28,new j(4,116),new j(4,117)),new ct(26,new j(17,42)),new ct(28,new j(17,22),new j(6,23)),new ct(30,new j(19,16),new j(6,17))),new Xt(22,Int32Array.from([6,26,50,74,98]),new ct(28,new j(2,111),new j(7,112)),new ct(28,new j(17,46)),new ct(30,new j(7,24),new j(16,25)),new ct(24,new j(34,13))),new Xt(23,Int32Array.from([6,30,54,78,102]),new ct(30,new j(4,121),new j(5,122)),new ct(28,new j(4,47),new j(14,48)),new ct(30,new j(11,24),new j(14,25)),new ct(30,new j(16,15),new j(14,16))),new Xt(24,Int32Array.from([6,28,54,80,106]),new ct(30,new j(6,117),new j(4,118)),new ct(28,new j(6,45),new j(14,46)),new ct(30,new j(11,24),new j(16,25)),new ct(30,new j(30,16),new j(2,17))),new Xt(25,Int32Array.from([6,32,58,84,110]),new ct(26,new j(8,106),new j(4,107)),new ct(28,new j(8,47),new j(13,48)),new ct(30,new j(7,24),new j(22,25)),new ct(30,new j(22,15),new j(13,16))),new Xt(26,Int32Array.from([6,30,58,86,114]),new ct(28,new j(10,114),new j(2,115)),new ct(28,new j(19,46),new j(4,47)),new ct(28,new j(28,22),new j(6,23)),new ct(30,new j(33,16),new j(4,17))),new Xt(27,Int32Array.from([6,34,62,90,118]),new ct(30,new j(8,122),new j(4,123)),new ct(28,new j(22,45),new j(3,46)),new ct(30,new j(8,23),new j(26,24)),new ct(30,new j(12,15),new j(28,16))),new Xt(28,Int32Array.from([6,26,50,74,98,122]),new ct(30,new j(3,117),new j(10,118)),new ct(28,new j(3,45),new j(23,46)),new ct(30,new j(4,24),new j(31,25)),new ct(30,new j(11,15),new j(31,16))),new Xt(29,Int32Array.from([6,30,54,78,102,126]),new ct(30,new j(7,116),new j(7,117)),new ct(28,new j(21,45),new j(7,46)),new ct(30,new j(1,23),new j(37,24)),new ct(30,new j(19,15),new j(26,16))),new Xt(30,Int32Array.from([6,26,52,78,104,130]),new ct(30,new j(5,115),new j(10,116)),new ct(28,new j(19,47),new j(10,48)),new ct(30,new j(15,24),new j(25,25)),new ct(30,new j(23,15),new j(25,16))),new Xt(31,Int32Array.from([6,30,56,82,108,134]),new ct(30,new j(13,115),new j(3,116)),new ct(28,new j(2,46),new j(29,47)),new ct(30,new j(42,24),new j(1,25)),new ct(30,new j(23,15),new j(28,16))),new Xt(32,Int32Array.from([6,34,60,86,112,138]),new ct(30,new j(17,115)),new ct(28,new j(10,46),new j(23,47)),new ct(30,new j(10,24),new j(35,25)),new ct(30,new j(19,15),new j(35,16))),new Xt(33,Int32Array.from([6,30,58,86,114,142]),new ct(30,new j(17,115),new j(1,116)),new ct(28,new j(14,46),new j(21,47)),new ct(30,new j(29,24),new j(19,25)),new ct(30,new j(11,15),new j(46,16))),new Xt(34,Int32Array.from([6,34,62,90,118,146]),new ct(30,new j(13,115),new j(6,116)),new ct(28,new j(14,46),new j(23,47)),new ct(30,new j(44,24),new j(7,25)),new ct(30,new j(59,16),new j(1,17))),new Xt(35,Int32Array.from([6,30,54,78,102,126,150]),new ct(30,new j(12,121),new j(7,122)),new ct(28,new j(12,47),new j(26,48)),new ct(30,new j(39,24),new j(14,25)),new ct(30,new j(22,15),new j(41,16))),new Xt(36,Int32Array.from([6,24,50,76,102,128,154]),new ct(30,new j(6,121),new j(14,122)),new ct(28,new j(6,47),new j(34,48)),new ct(30,new j(46,24),new j(10,25)),new ct(30,new j(2,15),new j(64,16))),new Xt(37,Int32Array.from([6,28,54,80,106,132,158]),new ct(30,new j(17,122),new j(4,123)),new ct(28,new j(29,46),new j(14,47)),new ct(30,new j(49,24),new j(10,25)),new ct(30,new j(24,15),new j(46,16))),new Xt(38,Int32Array.from([6,32,58,84,110,136,162]),new ct(30,new j(4,122),new j(18,123)),new ct(28,new j(13,46),new j(32,47)),new ct(30,new j(48,24),new j(14,25)),new ct(30,new j(42,15),new j(32,16))),new Xt(39,Int32Array.from([6,26,54,82,110,138,166]),new ct(30,new j(20,117),new j(4,118)),new ct(28,new j(40,47),new j(7,48)),new ct(30,new j(43,24),new j(22,25)),new ct(30,new j(10,15),new j(67,16))),new Xt(40,Int32Array.from([6,30,58,86,114,142,170]),new ct(30,new j(19,118),new j(6,119)),new ct(28,new j(18,47),new j(31,48)),new ct(30,new j(34,24),new j(34,25)),new ct(30,new j(20,15),new j(61,16)))];var Rn;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class En{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let c=0;c<o;c++)for(let f=0;f<o;f++)this.isMasked(c,f)&&s.flip(f,c)}}En.values=new Map([[Rn.DATA_MASK_000,new En(Rn.DATA_MASK_000,(M,s)=>(M+s&1)===0)],[Rn.DATA_MASK_001,new En(Rn.DATA_MASK_001,(M,s)=>(M&1)===0)],[Rn.DATA_MASK_010,new En(Rn.DATA_MASK_010,(M,s)=>s%3===0)],[Rn.DATA_MASK_011,new En(Rn.DATA_MASK_011,(M,s)=>(M+s)%3===0)],[Rn.DATA_MASK_100,new En(Rn.DATA_MASK_100,(M,s)=>(Math.floor(M/2)+Math.floor(s/3)&1)===0)],[Rn.DATA_MASK_101,new En(Rn.DATA_MASK_101,(M,s)=>M*s%6===0)],[Rn.DATA_MASK_110,new En(Rn.DATA_MASK_110,(M,s)=>M*s%6<3)],[Rn.DATA_MASK_111,new En(Rn.DATA_MASK_111,(M,s)=>(M+s+M*s%3&1)===0)]]);class ds{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new H;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);const o=this.bitMatrix.getHeight();let c=0;const f=o-7;for(let d=o-1;d>=f;d--)c=this.copyBit(8,d,c);for(let d=o-8;d<o;d++)c=this.copyBit(d,8,c);if(this.parsedFormatInfo=Vn.decodeFormatInformation(s,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return Xt.getVersionForNumber(o);let c=0;const f=s-11;for(let p=5;p>=0;p--)for(let x=s-9;x>=f;x--)c=this.copyBit(x,p,c);let d=Xt.decodeVersionInformation(c);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;c=0;for(let p=5;p>=0;p--)for(let x=s-9;x>=f;x--)c=this.copyBit(p,x,c);if(d=Xt.decodeVersionInformation(c),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new H}copyBit(s,o,c){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?c<<1|1:c<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),c=En.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let p=!0;const x=new Uint8Array(o.getTotalCodewords());let v=0,b=0,R=0;for(let P=f-1;P>0;P-=2){P===6&&P--;for(let L=0;L<f;L++){const q=p?f-1-L:L;for(let $=0;$<2;$++)d.get(P-$,q)||(R++,b<<=1,this.bitMatrix.get(P-$,q)&&(b|=1),R===8&&(x[v++]=b,R=0,b=0))}p=!p}if(v!==o.getTotalCodewords())throw new H;return x}remask(){if(this.parsedFormatInfo===null)return;const s=En.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,c=s.getWidth();o<c;o++)for(let f=o+1,d=s.getHeight();f<d;f++)s.get(o,f)!==s.get(f,o)&&(s.flip(f,o),s.flip(o,f))}}class ua{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,c){if(s.length!==o.getTotalCodewords())throw new S;const f=o.getECBlocksForLevel(c);let d=0;const p=f.getECBlocks();for(const $ of p)d+=$.getCount();const x=new Array(d);let v=0;for(const $ of p)for(let et=0;et<$.getCount();et++){const lt=$.getDataCodewords(),gt=f.getECCodewordsPerBlock()+lt;x[v++]=new ua(lt,new Uint8Array(gt))}const b=x[0].codewords.length;let R=x.length-1;for(;R>=0&&x[R].codewords.length!==b;)R--;R++;const P=b-f.getECCodewordsPerBlock();let L=0;for(let $=0;$<P;$++)for(let et=0;et<v;et++)x[et].codewords[$]=s[L++];for(let $=R;$<v;$++)x[$].codewords[P]=s[L++];const q=x[0].codewords.length;for(let $=P;$<q;$++)for(let et=0;et<v;et++){const lt=et<R?$:$+1;x[et].codewords[lt]=s[L++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var yi;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(yi||(yi={}));class Yt{constructor(s,o,c,f){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=c,this.bits=f,Yt.FOR_BITS.set(f,this),Yt.FOR_VALUE.set(s,this)}static forBits(s){const o=Yt.FOR_BITS.get(s);if(o===void 0)throw new S;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let c;return o<=9?c=0:o<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Yt))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}Yt.FOR_BITS=new Map,Yt.FOR_VALUE=new Map,Yt.TERMINATOR=new Yt(yi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Yt.NUMERIC=new Yt(yi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Yt.ALPHANUMERIC=new Yt(yi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Yt.STRUCTURED_APPEND=new Yt(yi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Yt.BYTE=new Yt(yi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Yt.ECI=new Yt(yi.ECI,"ECI",Int32Array.from([0,0,0]),7),Yt.KANJI=new Yt(yi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Yt.FNC1_FIRST_POSITION=new Yt(yi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Yt.FNC1_SECOND_POSITION=new Yt(yi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Yt.HANZI=new Yt(yi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class sn{static decode(s,o,c,f){const d=new un(s);let p=new Y;const x=new Array;let v=-1,b=-1;try{let R=null,P=!1,L;do{if(d.available()<4)L=Yt.TERMINATOR;else{const q=d.readBits(4);L=Yt.forBits(q)}switch(L){case Yt.TERMINATOR:break;case Yt.FNC1_FIRST_POSITION:case Yt.FNC1_SECOND_POSITION:P=!0;break;case Yt.STRUCTURED_APPEND:if(d.available()<16)throw new H;v=d.readBits(8),b=d.readBits(8);break;case Yt.ECI:const q=sn.parseECIValue(d);if(R=V.getCharacterSetECIByValue(q),R===null)throw new H;break;case Yt.HANZI:const $=d.readBits(4),et=d.readBits(L.getCharacterCountBits(o));$===sn.GB2312_SUBSET&&sn.decodeHanziSegment(d,p,et);break;default:const lt=d.readBits(L.getCharacterCountBits(o));switch(L){case Yt.NUMERIC:sn.decodeNumericSegment(d,p,lt);break;case Yt.ALPHANUMERIC:sn.decodeAlphanumericSegment(d,p,lt,P);break;case Yt.BYTE:sn.decodeByteSegment(d,p,lt,R,x,f);break;case Yt.KANJI:sn.decodeKanjiSegment(d,p,lt);break;default:throw new H}break}}while(L!==Yt.TERMINATOR)}catch{throw new H}return new vi(s,p.toString(),x.length===0?null:x,c===null?null:c.toString(),v,b)}static decodeHanziSegment(s,o,c){if(c*13>s.available())throw new H;const f=new Uint8Array(2*c);let d=0;for(;c>0;){const p=s.readBits(13);let x=p/96<<8&4294967295|p%96;x<959?x+=41377:x+=42657,f[d]=x>>8&255,f[d+1]=x&255,d+=2,c--}try{o.append(W.decode(f,Z.GB2312))}catch(p){throw new H(p)}}static decodeKanjiSegment(s,o,c){if(c*13>s.available())throw new H;const f=new Uint8Array(2*c);let d=0;for(;c>0;){const p=s.readBits(13);let x=p/192<<8&4294967295|p%192;x<7936?x+=33088:x+=49472,f[d]=x>>8,f[d+1]=x,d+=2,c--}try{o.append(W.decode(f,Z.SHIFT_JIS))}catch(p){throw new H(p)}}static decodeByteSegment(s,o,c,f,d,p){if(8*c>s.available())throw new H;const x=new Uint8Array(c);for(let b=0;b<c;b++)x[b]=s.readBits(8);let v;f===null?v=Z.guessEncoding(x,p):v=f.getName();try{o.append(W.decode(x,v))}catch(b){throw new H(b)}d.push(x)}static toAlphaNumericChar(s){if(s>=sn.ALPHANUMERIC_CHARS.length)throw new H;return sn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,c,f){const d=o.length();for(;c>1;){if(s.available()<11)throw new H;const p=s.readBits(11);o.append(sn.toAlphaNumericChar(Math.floor(p/45))),o.append(sn.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(s.available()<6)throw new H;o.append(sn.toAlphaNumericChar(s.readBits(6)))}if(f)for(let p=d;p<o.length();p++)o.charAt(p)==="%"&&(p<o.length()-1&&o.charAt(p+1)==="%"?o.deleteCharAt(p+1):o.setCharAt(p,""))}static decodeNumericSegment(s,o,c){for(;c>=3;){if(s.available()<10)throw new H;const f=s.readBits(10);if(f>=1e3)throw new H;o.append(sn.toAlphaNumericChar(Math.floor(f/100))),o.append(sn.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(sn.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(s.available()<7)throw new H;const f=s.readBits(7);if(f>=100)throw new H;o.append(sn.toAlphaNumericChar(Math.floor(f/10))),o.append(sn.toAlphaNumericChar(f%10))}else if(c===1){if(s.available()<4)throw new H;const f=s.readBits(4);if(f>=10)throw new H;o.append(sn.toAlphaNumericChar(f))}}static parseECIValue(s){const o=s.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const c=s.readBits(8);return(o&63)<<8&4294967295|c}if((o&224)===192){const c=s.readBits(16);return(o&31)<<16&4294967295|c}throw new H}}sn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",sn.GB2312_SUBSET=1;class Ko{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class vr{constructor(){this.rsDecoder=new cs(we.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(Jt.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const c=new ds(s);let f=null;try{return this.decodeBitMatrixParser(c,o)}catch(d){f=d}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const d=this.decodeBitMatrixParser(c,o);return d.setOther(new Ko(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(s,o){const c=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),p=ua.getDataBlocks(d,c,f);let x=0;for(const R of p)x+=R.getNumDataCodewords();const v=new Uint8Array(x);let b=0;for(const R of p){const P=R.getCodewords(),L=R.getNumDataCodewords();this.correctErrors(P,L);for(let q=0;q<L;q++)v[b++]=P[q]}return sn.decode(v,c,f,o)}correctErrors(s,o){const c=new Int32Array(s);try{this.rsDecoder.decode(c,s.length-o)}catch{throw new k}for(let f=0;f<o;f++)s[f]=c[f]}}class ha extends Ht{constructor(s,o,c){super(s,o),this.estimatedModuleSize=c}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const f=(this.getX()+o)/2,d=(this.getY()+s)/2,p=(this.estimatedModuleSize+c)/2;return new ha(f,d,p)}}class Is{constructor(s,o,c,f,d,p,x){this.image=s,this.startX=o,this.startY=c,this.width=f,this.height=d,this.moduleSize=p,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,c=this.width,f=s+c,d=this.startY+o/2,p=new Int32Array(3),x=this.image;for(let v=0;v<o;v++){const b=d+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));p[0]=0,p[1]=0,p[2]=0;let R=s;for(;R<f&&!x.get(R,b);)R++;let P=0;for(;R<f;){if(x.get(R,b))if(P===1)p[1]++;else if(P===2){if(this.foundPatternCross(p)){const L=this.handlePossibleCenter(p,b,R);if(L!==null)return L}p[0]=p[2],p[1]=1,p[2]=0,P=1}else p[++P]++;else P===1&&P++,p[P]++;R++}if(this.foundPatternCross(p)){const L=this.handlePossibleCenter(p,b,f);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ht}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,c=o/2;for(let f=0;f<3;f++)if(Math.abs(o-s[f])>=c)return!1;return!0}crossCheckVertical(s,o,c,f){const d=this.image,p=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let v=s;for(;v>=0&&d.get(o,v)&&x[1]<=c;)x[1]++,v--;if(v<0||x[1]>c)return NaN;for(;v>=0&&!d.get(o,v)&&x[0]<=c;)x[0]++,v--;if(x[0]>c)return NaN;for(v=s+1;v<p&&d.get(o,v)&&x[1]<=c;)x[1]++,v++;if(v===p||x[1]>c)return NaN;for(;v<p&&!d.get(o,v)&&x[2]<=c;)x[2]++,v++;if(x[2]>c)return NaN;const b=x[0]+x[1]+x[2];return 5*Math.abs(b-f)>=2*f?NaN:this.foundPatternCross(x)?Is.centerFromEnd(x,v):NaN}handlePossibleCenter(s,o,c){const f=s[0]+s[1]+s[2],d=Is.centerFromEnd(s,c),p=this.crossCheckVertical(o,d,2*s[1],f);if(!isNaN(p)){const x=(s[0]+s[1]+s[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(x,p,d))return b.combineEstimate(p,d,x);const v=new ha(d,p,x);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class jr extends Ht{constructor(s,o,c,f){super(s,o),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,c){if(Math.abs(o-this.getY())<=s&&Math.abs(c-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,c){const f=this.count+1,d=(this.count*this.getX()+o)/f,p=(this.count*this.getY()+s)/f,x=(this.count*this.estimatedModuleSize+c)/f;return new jr(d,p,x,f)}}class bi{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nn{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get(Rt.TRY_HARDER)!==void 0,c=s!=null&&s.get(Rt.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),p=f.getWidth();let x=Math.floor(3*d/(4*Nn.MAX_MODULES));(x<Nn.MIN_SKIP||o)&&(x=Nn.MIN_SKIP);let v=!1;const b=new Int32Array(5);for(let P=x-1;P<d&&!v;P+=x){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let L=0;for(let q=0;q<p;q++)if(f.get(q,P))(L&1)===1&&L++,b[L]++;else if((L&1)===0)if(L===4)if(Nn.foundPatternCross(b)){if(this.handlePossibleCenter(b,P,q,c)===!0)if(x=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const et=this.findRowSkip();et>b[2]&&(P+=et-b[2]-x,q=p-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,L=3;continue}L=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,L=3;else b[++L]++;else b[L]++;Nn.foundPatternCross(b)&&this.handlePossibleCenter(b,P,p,c)===!0&&(x=b[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Ht.orderBestPatterns(R),new bi(R)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let d=0;d<5;d++){const p=s[d];if(p===0)return!1;o+=p}if(o<7)return!1;const c=o/7,f=c/2;return Math.abs(c-s[0])<f&&Math.abs(c-s[1])<f&&Math.abs(3*c-s[2])<3*f&&Math.abs(c-s[3])<f&&Math.abs(c-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,c,f){const d=this.getCrossCheckStateCount();let p=0;const x=this.image;for(;s>=p&&o>=p&&x.get(o-p,s-p);)d[2]++,p++;if(s<p||o<p)return!1;for(;s>=p&&o>=p&&!x.get(o-p,s-p)&&d[1]<=c;)d[1]++,p++;if(s<p||o<p||d[1]>c)return!1;for(;s>=p&&o>=p&&x.get(o-p,s-p)&&d[0]<=c;)d[0]++,p++;if(d[0]>c)return!1;const v=x.getHeight(),b=x.getWidth();for(p=1;s+p<v&&o+p<b&&x.get(o+p,s+p);)d[2]++,p++;if(s+p>=v||o+p>=b)return!1;for(;s+p<v&&o+p<b&&!x.get(o+p,s+p)&&d[3]<c;)d[3]++,p++;if(s+p>=v||o+p>=b||d[3]>=c)return!1;for(;s+p<v&&o+p<b&&x.get(o+p,s+p)&&d[4]<c;)d[4]++,p++;if(d[4]>=c)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&Nn.foundPatternCross(d)}crossCheckVertical(s,o,c,f){const d=this.image,p=d.getHeight(),x=this.getCrossCheckStateCount();let v=s;for(;v>=0&&d.get(o,v);)x[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(o,v)&&x[1]<=c;)x[1]++,v--;if(v<0||x[1]>c)return NaN;for(;v>=0&&d.get(o,v)&&x[0]<=c;)x[0]++,v--;if(x[0]>c)return NaN;for(v=s+1;v<p&&d.get(o,v);)x[2]++,v++;if(v===p)return NaN;for(;v<p&&!d.get(o,v)&&x[3]<c;)x[3]++,v++;if(v===p||x[3]>=c)return NaN;for(;v<p&&d.get(o,v)&&x[4]<c;)x[4]++,v++;if(x[4]>=c)return NaN;const b=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(b-f)>=2*f?NaN:Nn.foundPatternCross(x)?Nn.centerFromEnd(x,v):NaN}crossCheckHorizontal(s,o,c,f){const d=this.image,p=d.getWidth(),x=this.getCrossCheckStateCount();let v=s;for(;v>=0&&d.get(v,o);)x[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(v,o)&&x[1]<=c;)x[1]++,v--;if(v<0||x[1]>c)return NaN;for(;v>=0&&d.get(v,o)&&x[0]<=c;)x[0]++,v--;if(x[0]>c)return NaN;for(v=s+1;v<p&&d.get(v,o);)x[2]++,v++;if(v===p)return NaN;for(;v<p&&!d.get(v,o)&&x[3]<c;)x[3]++,v++;if(v===p||x[3]>=c)return NaN;for(;v<p&&d.get(v,o)&&x[4]<c;)x[4]++,v++;if(x[4]>=c)return NaN;const b=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(b-f)>=f?NaN:Nn.foundPatternCross(x)?Nn.centerFromEnd(x,v):NaN}handlePossibleCenter(s,o,c,f){const d=s[0]+s[1]+s[2]+s[3]+s[4];let p=Nn.centerFromEnd(s,c),x=this.crossCheckVertical(o,Math.floor(p),s[2],d);if(!isNaN(x)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(x),s[2],d),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(x),Math.floor(p),s[2],d)))){const v=d/7;let b=!1;const R=this.possibleCenters;for(let P=0,L=R.length;P<L;P++){const q=R[P];if(q.aboutEquals(v,x,p)){R[P]=q.combineEstimate(x,p,v),b=!0;break}}if(!b){const P=new jr(p,x,v);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const c of this.possibleCenters)if(c.getCount()>=Nn.CENTER_QUORUM)if(o==null)o=c;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-c.getX())-Math.abs(o.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=Nn.CENTER_QUORUM&&(s++,o+=p.getEstimatedModuleSize());if(s<3)return!1;const f=o/c;let d=0;for(const p of this.possibleCenters)d+=Math.abs(p.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ht;const o=this.possibleCenters;let c;if(s>3){let f=0,d=0;for(const v of this.possibleCenters){const b=v.getEstimatedModuleSize();f+=b,d+=b*b}c=f/s;let p=Math.sqrt(d/s-c*c);o.sort((v,b)=>{const R=Math.abs(b.getEstimatedModuleSize()-c),P=Math.abs(v.getEstimatedModuleSize()-c);return R<P?-1:R>P?1:0});const x=Math.max(.2*c,p);for(let v=0;v<o.length&&o.length>3;v++){const b=o[v];Math.abs(b.getEstimatedModuleSize()-c)>x&&(o.splice(v,1),v--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();c=f/o.length,o.sort((d,p)=>{if(p.getCount()===d.getCount()){const x=Math.abs(p.getEstimatedModuleSize()-c),v=Math.abs(d.getEstimatedModuleSize()-c);return x<v?1:x>v?-1:0}else return p.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Nn.CENTER_QUORUM=2,Nn.MIN_SKIP=3,Nn.MAX_MODULES=57;class Cr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(Rt.NEED_RESULT_POINT_CALLBACK);const c=new Nn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(c)}processFinderPatternInfo(s){const o=s.getTopLeft(),c=s.getTopRight(),f=s.getBottomLeft(),d=this.calculateModuleSize(o,c,f);if(d<1)throw new ht("No pattern found in proccess finder.");const p=Cr.computeDimension(o,c,f,d),x=Xt.getProvisionalVersionForDimension(p),v=x.getDimensionForVersion()-7;let b=null;if(x.getAlignmentPatternCenters().length>0){const q=c.getX()-o.getX()+f.getX(),$=c.getY()-o.getY()+f.getY(),et=1-3/v,lt=Math.floor(o.getX()+et*(q-o.getX())),gt=Math.floor(o.getY()+et*($-o.getY()));for(let Mt=4;Mt<=16;Mt<<=1)try{b=this.findAlignmentInRegion(d,lt,gt,Mt);break}catch(Lt){if(!(Lt instanceof ht))throw Lt}}const R=Cr.createTransform(o,c,f,b,p),P=Cr.sampleGrid(this.image,R,p);let L;return b===null?L=[f,o,c]:L=[f,o,c,b],new Ga(P,L)}static createTransform(s,o,c,f,d){const p=d-3.5;let x,v,b,R;return f!==null?(x=f.getX(),v=f.getY(),b=p-3,R=b):(x=o.getX()-s.getX()+c.getX(),v=o.getY()-s.getY()+c.getY(),b=p,R=p),ti.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,b,R,3.5,p,s.getX(),s.getY(),o.getX(),o.getY(),x,v,c.getX(),c.getY())}static sampleGrid(s,o,c){return Yn.getInstance().sampleGridWithTransform(s,c,c,o)}static computeDimension(s,o,c,f){const d=Zt.round(Ht.distance(s,o)/f),p=Zt.round(Ht.distance(s,c)/f);let x=Math.floor((d+p)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ht("Dimensions could be not found.")}return x}calculateModuleSize(s,o,c){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,c))/2}calculateModuleSizeOneWay(s,o){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,c,f){let d=this.sizeOfBlackWhiteBlackRun(s,o,c,f),p=1,x=s-(c-s);x<0?(p=s/(s-x),x=0):x>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(x-s),x=this.image.getWidth()-1);let v=Math.floor(o-(f-o)*p);return p=1,v<0?(p=o/(o-v),v=0):v>=this.image.getHeight()&&(p=(this.image.getHeight()-1-o)/(v-o),v=this.image.getHeight()-1),x=Math.floor(s+(x-s)*p),d+=this.sizeOfBlackWhiteBlackRun(s,o,x,v),d-1}sizeOfBlackWhiteBlackRun(s,o,c,f){const d=Math.abs(f-o)>Math.abs(c-s);if(d){let q=s;s=o,o=q,q=c,c=f,f=q}const p=Math.abs(c-s),x=Math.abs(f-o);let v=-p/2;const b=s<c?1:-1,R=o<f?1:-1;let P=0;const L=c+b;for(let q=s,$=o;q!==L;q+=b){const et=d?$:q,lt=d?q:$;if(P===1===this.image.get(et,lt)){if(P===2)return Zt.distance(q,$,s,o);P++}if(v+=x,v>0){if($===f)break;$+=R,v-=p}}return P===2?Zt.distance(c+b,f,s,o):NaN}findAlignmentInRegion(s,o,c,f){const d=Math.floor(f*s),p=Math.max(0,o-d),x=Math.min(this.image.getWidth()-1,o+d);if(x-p<s*3)throw new ht("Alignment top exceeds estimated module size.");const v=Math.max(0,c-d),b=Math.min(this.image.getHeight()-1,c+d);if(b-v<s*3)throw new ht("Alignment bottom exceeds estimated module size.");return new Is(this.image,p,v,x-p,b-v,s,this.resultPointCallback).find()}}class Ui{constructor(){this.decoder=new vr}getDecoder(){return this.decoder}decode(s,o){let c,f;if(o!=null&&o.get(Rt.PURE_BARCODE)!==void 0){const v=Ui.extractPureBits(s.getBlackMatrix());c=this.decoder.decodeBitMatrix(v,o),f=Ui.NO_POINTS}else{const v=new Cr(s.getBlackMatrix()).detect(o);c=this.decoder.decodeBitMatrix(v.getBits(),o),f=v.getPoints()}c.getOther()instanceof Ko&&c.getOther().applyMirroredCorrection(f);const d=new zt(c.getText(),c.getRawBytes(),void 0,f,Ot.QR_CODE,void 0),p=c.getByteSegments();p!==null&&d.putMetadata(ce.BYTE_SEGMENTS,p);const x=c.getECLevel();return x!==null&&d.putMetadata(ce.ERROR_CORRECTION_LEVEL,x),c.hasStructuredAppend()&&(d.putMetadata(ce.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),d.putMetadata(ce.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(o===null||c===null)throw new ht;const f=this.moduleSize(o,s);let d=o[1],p=c[1],x=o[0],v=c[0];if(x>=v||d>=p)throw new ht;if(p-d!==v-x&&(v=x+(p-d),v>=s.getWidth()))throw new ht;const b=Math.round((v-x+1)/f),R=Math.round((p-d+1)/f);if(b<=0||R<=0)throw new ht;if(R!==b)throw new ht;const P=Math.floor(f/2);d+=P,x+=P;const L=x+Math.floor((b-1)*f)-v;if(L>0){if(L>P)throw new ht;x-=L}const q=d+Math.floor((R-1)*f)-p;if(q>0){if(q>P)throw new ht;d-=q}const $=new Jt(b,R);for(let et=0;et<R;et++){const lt=d+Math.floor(et*f);for(let gt=0;gt<b;gt++)s.get(x+Math.floor(gt*f),lt)&&$.set(gt,et)}return $}static moduleSize(s,o){const c=o.getHeight(),f=o.getWidth();let d=s[0],p=s[1],x=!0,v=0;for(;d<f&&p<c;){if(x!==o.get(d,p)){if(++v===5)break;x=!x}d++,p++}if(d===f||p===c)throw new ht;return(d-s[0])/7}}Ui.NO_POINTS=new Array;class Kt{PDF417Common(){}static getBitCountSum(s){return Zt.sum(s)}static toIntArray(s){if(s==null||!s.length)return Kt.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let c=0;for(const f of s)o[c++]=f;return o}static getCodeword(s){const o=nt.binarySearch(Kt.SYMBOL_TABLE,s&262143);return o<0?-1:(Kt.CODEWORD_TABLE[o]-1)%Kt.NUMBER_OF_CODEWORDS}}Kt.NUMBER_OF_CODEWORDS=929,Kt.MAX_CODEWORDS_IN_BARCODE=Kt.NUMBER_OF_CODEWORDS-1,Kt.MIN_ROWS_IN_BARCODE=3,Kt.MAX_ROWS_IN_BARCODE=90,Kt.MODULES_IN_CODEWORD=17,Kt.MODULES_IN_STOP_PATTERN=18,Kt.BARS_IN_MODULE=8,Kt.EMPTY_INT_ARRAY=new Int32Array([]),Kt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Kt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Si{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ie{static detectMultiple(s,o,c){let f=s.getBlackMatrix(),d=ie.detect(c,f);return d.length||(f=f.clone(),f.rotate180(),d=ie.detect(c,f)),new Si(f,d)}static detect(s,o){const c=new Array;let f=0,d=0,p=!1;for(;f<o.getHeight();){const x=ie.findVertices(o,f,d);if(x[0]==null&&x[3]==null){if(!p)break;p=!1,d=0;for(const v of c)v[1]!=null&&(f=Math.trunc(Math.max(f,v[1].getY()))),v[3]!=null&&(f=Math.max(f,Math.trunc(v[3].getY())));f+=ie.ROW_STEP;continue}if(p=!0,c.push(x),!s)break;x[2]!=null?(d=Math.trunc(x[2].getX()),f=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),f=Math.trunc(x[4].getY()))}return c}static findVertices(s,o,c){const f=s.getHeight(),d=s.getWidth(),p=new Array(8);return ie.copyToResult(p,ie.findRowsWithPattern(s,f,d,o,c,ie.START_PATTERN),ie.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY())),ie.copyToResult(p,ie.findRowsWithPattern(s,f,d,o,c,ie.STOP_PATTERN),ie.INDEXES_STOP_PATTERN),p}static copyToResult(s,o,c){for(let f=0;f<c.length;f++)s[c[f]]=o[f]}static findRowsWithPattern(s,o,c,f,d,p){const x=new Array(4);let v=!1;const b=new Int32Array(p.length);for(;f<o;f+=ie.ROW_STEP){let P=ie.findGuardPattern(s,d,f,c,!1,p,b);if(P!=null){for(;f>0;){const L=ie.findGuardPattern(s,d,--f,c,!1,p,b);if(L!=null)P=L;else{f++;break}}x[0]=new Ht(P[0],f),x[1]=new Ht(P[1],f),v=!0;break}}let R=f+1;if(v){let P=0,L=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;R<o;R++){const q=ie.findGuardPattern(s,L[0],R,c,!1,p,b);if(q!=null&&Math.abs(L[0]-q[0])<ie.MAX_PATTERN_DRIFT&&Math.abs(L[1]-q[1])<ie.MAX_PATTERN_DRIFT)L=q,P=0;else{if(P>ie.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,x[2]=new Ht(L[0],R),x[3]=new Ht(L[1],R)}return R-f<ie.BARCODE_MIN_HEIGHT&&nt.fill(x,null),x}static findGuardPattern(s,o,c,f,d,p,x){nt.fillWithin(x,0,x.length,0);let v=o,b=0;for(;s.get(v,c)&&v>0&&b++<ie.MAX_PIXEL_DRIFT;)v--;let R=v,P=0,L=p.length;for(let q=d;R<f;R++)if(s.get(R,c)!==q)x[P]++;else{if(P===L-1){if(ie.patternMatchVariance(x,p,ie.MAX_INDIVIDUAL_VARIANCE)<ie.MAX_AVG_VARIANCE)return new Int32Array([v,R]);v+=x[0]+x[1],X.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,q=!q}return P===L-1&&ie.patternMatchVariance(x,p,ie.MAX_INDIVIDUAL_VARIANCE)<ie.MAX_AVG_VARIANCE?new Int32Array([v,R-1]):null}static patternMatchVariance(s,o,c){let f=s.length,d=0,p=0;for(let b=0;b<f;b++)d+=s[b],p+=o[b];if(d<p)return 1/0;let x=d/p;c*=x;let v=0;for(let b=0;b<f;b++){let R=s[b],P=o[b]*x,L=R>P?R-P:P-R;if(L>c)return 1/0;v+=L}return v/d}}ie.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ie.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ie.MAX_AVG_VARIANCE=.42,ie.MAX_INDIVIDUAL_VARIANCE=.8,ie.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ie.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ie.MAX_PIXEL_DRIFT=3,ie.MAX_PATTERN_DRIFT=5,ie.SKIPPED_ROW_COUNT_MAX=25,ie.ROW_STEP=5,ie.BARCODE_MIN_HEIGHT=10;class dn{constructor(s,o){if(o.length===0)throw new S;this.field=s;let c=o.length;if(c>1&&o[0]===0){let f=1;for(;f<c&&o[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),X.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)o=this.field.add(this.field.multiply(s,o),this.coefficients[f]);return o}add(s){if(!this.field.equals(s.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,c=s.coefficients;if(o.length>c.length){let p=o;o=c,c=p}let f=new Int32Array(c.length),d=c.length-o.length;X.arraycopy(c,0,f,0,d);for(let p=d;p<c.length;p++)f[p]=this.field.add(o[p-d],c[p]);return new dn(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new S("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof dn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new dn(this.field,new Int32Array([0]));let o=this.coefficients,c=o.length,f=s.coefficients,d=f.length,p=new Int32Array(c+d-1);for(let x=0;x<c;x++){let v=o[x];for(let b=0;b<d;b++)p[x+b]=this.field.add(p[x+b],this.field.multiply(v,f[b]))}return new dn(this.field,p)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.subtract(0,this.coefficients[c]);return new dn(this.field,o)}multiplyScalar(s){if(s===0)return new dn(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,c=new Int32Array(o);for(let f=0;f<o;f++)c[f]=this.field.multiply(this.coefficients[f],s);return new dn(this.field,c)}multiplyByMonomial(s,o){if(s<0)throw new S;if(o===0)return new dn(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+s);for(let d=0;d<c;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new dn(this.field,f)}toString(){let s=new Y;for(let o=this.getDegree();o>=0;o--){let c=this.getCoefficient(o);c!==0&&(c<0?(s.append(" - "),c=-c):s.length()>0&&s.append(" + "),(o===0||c!==1)&&s.append(c),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class or{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new S;return this.logTable[s]}inverse(s){if(s===0)throw new ls;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Ze extends or{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let c=1;for(let f=0;f<s;f++)this.expTable[f]=c,c=c*o%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new dn(this,new Int32Array([0])),this.one=new dn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new S;if(o===0)return this.zero;let c=new Int32Array(s+1);return c[0]=o,new dn(this,c)}}Ze.PDF417_GF=new Ze(Kt.NUMBER_OF_CODEWORDS,3);class fa{constructor(){this.field=Ze.PDF417_GF}decode(s,o,c){let f=new dn(this.field,s),d=new Int32Array(o),p=!1;for(let $=o;$>0;$--){let et=f.evaluateAt(this.field.exp($));d[o-$]=et,et!==0&&(p=!0)}if(!p)return 0;let x=this.field.getOne();if(c!=null)for(const $ of c){let et=this.field.exp(s.length-1-$),lt=new dn(this.field,new Int32Array([this.field.subtract(0,et),1]));x=x.multiply(lt)}let v=new dn(this.field,d),b=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),v,o),R=b[0],P=b[1],L=this.findErrorLocations(R),q=this.findErrorMagnitudes(P,R,L);for(let $=0;$<L.length;$++){let et=s.length-1-this.field.log(L[$]);if(et<0)throw k.getChecksumInstance();s[et]=this.field.subtract(s[et],q[$])}return L.length}runEuclideanAlgorithm(s,o,c){if(s.getDegree()<o.getDegree()){let L=s;s=o,o=L}let f=s,d=o,p=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(c/2);){let L=f,q=p;if(f=d,p=x,f.isZero())throw k.getChecksumInstance();d=L;let $=this.field.getZero(),et=f.getCoefficient(f.getDegree()),lt=this.field.inverse(et);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let gt=d.getDegree()-f.getDegree(),Mt=this.field.multiply(d.getCoefficient(d.getDegree()),lt);$=$.add(this.field.buildMonomial(gt,Mt)),d=d.subtract(f.multiplyByMonomial(gt,Mt))}x=$.multiply(p).subtract(q).negative()}let v=x.getCoefficient(0);if(v===0)throw k.getChecksumInstance();let b=this.field.inverse(v),R=x.multiply(b),P=d.multiply(b);return[R,P]}findErrorLocations(s){let o=s.getDegree(),c=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)s.evaluateAt(d)===0&&(c[f]=this.field.inverse(d),f++);if(f!==o)throw k.getChecksumInstance();return c}findErrorMagnitudes(s,o,c){let f=o.getDegree(),d=new Int32Array(f);for(let b=1;b<=f;b++)d[f-b]=this.field.multiply(b,o.getCoefficient(b));let p=new dn(this.field,d),x=c.length,v=new Int32Array(x);for(let b=0;b<x;b++){let R=this.field.inverse(c[b]),P=this.field.subtract(0,s.evaluateAt(R)),L=this.field.inverse(p.evaluateAt(R));v[b]=this.field.multiply(P,L)}return v}}class Gr{constructor(s,o,c,f,d){s instanceof Gr?this.constructor_2(s):this.constructor_1(s,o,c,f,d)}constructor_1(s,o,c,f,d){const p=o==null||c==null,x=f==null||d==null;if(p&&x)throw new ht;p?(o=new Ht(0,f.getY()),c=new Ht(0,d.getY())):x&&(f=new Ht(s.getWidth()-1,o.getY()),d=new Ht(s.getWidth()-1,c.getY())),this.image=s,this.topLeft=o,this.bottomLeft=c,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new Gr(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,c){let f=this.topLeft,d=this.bottomLeft,p=this.topRight,x=this.bottomRight;if(s>0){let v=c?this.topLeft:this.topRight,b=Math.trunc(v.getY()-s);b<0&&(b=0);let R=new Ht(v.getX(),b);c?f=R:p=R}if(o>0){let v=c?this.bottomLeft:this.bottomRight,b=Math.trunc(v.getY()+o);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let R=new Ht(v.getX(),b);c?d=R:x=R}return new Gr(this.image,f,d,p,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class da{constructor(s,o,c,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=c,this.rowCount=o+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class br{constructor(){this.buffer=""}static form(s,o){let c=-1;function f(p,x,v,b,R,P){if(p==="%%")return"%";if(o[++c]===void 0)return;p=b?parseInt(b.substr(1)):void 0;let L=R?parseInt(R.substr(1)):void 0,q;switch(P){case"s":q=o[c];break;case"c":q=o[c][0];break;case"f":q=parseFloat(o[c]).toFixed(p);break;case"p":q=parseFloat(o[c]).toPrecision(p);break;case"e":q=parseFloat(o[c]).toExponential(p);break;case"x":q=parseInt(o[c]).toString(L||16);break;case"d":q=parseFloat(parseInt(o[c],L||10).toPrecision(p)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(L);let $=parseInt(v),et=v&&v[0]+""=="0"?"0":" ";for(;q.length<$;)q=x!==void 0?q+et:et+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,f)}format(s,...o){this.buffer+=br.form(s,o)}toString(){return this.buffer}}class gs{constructor(s){this.boundingBox=new Gr(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let c=1;c<gs.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(s)-c;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(s)+c,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new br;let o=0;for(const c of this.codewords){if(c==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,c.getRowNumber(),c.getValue())}return s.toString()}}gs.MAX_NEARBY_DISTANCE=5;class An{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[c,f]of this.values.entries()){const d={getKey:()=>c,getValue:()=>f};d.getValue()>s?(s=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===s&&o.push(d.getKey())}return Kt.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class li extends gs{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),d=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),v=-1,b=1,R=0;for(let P=p;P<x;P++){if(o[P]==null)continue;let L=o[P],q=L.getRowNumber()-v;if(q===0)R++;else if(q===1)b=Math.max(b,R),R=1,v=L.getRowNumber();else if(q<0||L.getRowNumber()>=s.getRowCount()||q>P)o[P]=null;else{let $;b>2?$=(b-2)*q:$=q;let et=$>=P;for(let lt=1;lt<=$&&!et;lt++)et=o[P-lt]!=null;et?o[P]=null:(v=L.getRowNumber(),R=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=this.getCodewords(),v=-1;for(let b=d;b<p;b++){if(x[b]==null)continue;let R=x[b];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-v;P===0||(P===1?v=R.getRowNumber():R.getRowNumber()>=s.getRowCount()?x[b]=null:v=R.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new An,c=new An,f=new An,d=new An;for(let x of s){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let v=x.getValue()%30,b=x.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:c.setValue(v*3+1);break;case 1:d.setValue(v/3),f.setValue(v%3);break;case 2:o.setValue(v+1);break}}if(o.getValue().length===0||c.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<Kt.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>Kt.MAX_ROWS_IN_BARCODE)return null;let p=new da(o.getValue()[0],c.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,o){for(let c=0;c<s.length;c++){let f=s[c];if(s[c]==null)continue;let d=f.getValue()%30,p=f.getRowNumber();if(p>o.getRowCount()){s[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(s[c]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(s[c]=null);break;case 2:d+1!==o.getColumnCount()&&(s[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Sr{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Kt.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let c=this.detectionResultColumns[o].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,c))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<s.length;c++)if(s[c]!=null&&o[c]!=null&&s[c].getRowNumber()===o[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[c];d!=null&&(d.setRowNumber(s[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),d=0;for(let p=this.barcodeColumnCount+1;p>0&&d<this.ADJUST_ROW_NUMBER_SKIP;p--){let x=this.detectionResultColumns[p].getCodewords()[c];x!=null&&(d=Sr.adjustRowNumberIfValid(f,d,x),x.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let c=0;c<o.length;c++){if(o[c]==null)continue;let f=o[c].getRowNumber(),d=0;for(let p=1;p<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;p++){let x=this.detectionResultColumns[p].getCodewords()[c];x!=null&&(d=Sr.adjustRowNumberIfValid(f,d,x),x.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(s)?(c.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,c){if(!this.detectionResultColumns[s-1])return;let f=c[o],d=this.detectionResultColumns[s-1].getCodewords(),p=d;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let x=new Array(14);x[2]=d[o],x[3]=p[o],o>0&&(x[0]=c[o-1],x[4]=d[o-1],x[5]=p[o-1]),o>1&&(x[8]=c[o-2],x[10]=d[o-2],x[11]=p[o-2]),o<c.length-1&&(x[1]=c[o+1],x[6]=d[o+1],x[7]=p[o+1]),o<c.length-2&&(x[9]=c[o+2],x[12]=d[o+2],x[13]=p[o+2]);for(let v of x)if(Sr.adjustRowNumber(f,v))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new br;for(let c=0;c<s.getCodewords().length;c++){o.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[c];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class Ir{constructor(s,o,c,f){this.rowNumber=Ir.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Ir.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Ir.BARCODE_ROW_UNKNOWN=-1;class Un{static initialize(){for(let s=0;s<Kt.SYMBOL_TABLE.length;s++){let o=Kt.SYMBOL_TABLE[s],c=o&1;for(let f=0;f<Kt.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===c;)d+=1,o>>=1;c=o&1,Un.RATIOS_TABLE[s]||(Un.RATIOS_TABLE[s]=new Array(Kt.BARS_IN_MODULE)),Un.RATIOS_TABLE[s][Kt.BARS_IN_MODULE-f-1]=Math.fround(d/Kt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=Un.getDecodedCodewordValue(Un.sampleBitCounts(s));return o!==-1?o:Un.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=Zt.sum(s),c=new Int32Array(Kt.BARS_IN_MODULE),f=0,d=0;for(let p=0;p<Kt.MODULES_IN_CODEWORD;p++){let x=o/(2*Kt.MODULES_IN_CODEWORD)+p*o/Kt.MODULES_IN_CODEWORD;d+s[f]<=x&&(d+=s[f],f++),c[f]++}return c}static getDecodedCodewordValue(s){let o=Un.getBitValue(s);return Kt.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let c=0;c<s.length;c++)for(let f=0;f<s[c];f++)o=o<<1|(c%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=Zt.sum(s),c=new Array(Kt.BARS_IN_MODULE);if(o>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(s[p]/o);let f=Sn.MAX_VALUE,d=-1;this.bSymbolTableReady||Un.initialize();for(let p=0;p<Un.RATIOS_TABLE.length;p++){let x=0,v=Un.RATIOS_TABLE[p];for(let b=0;b<Kt.BARS_IN_MODULE;b++){let R=Math.fround(v[b]-c[b]);if(x+=Math.fround(R*R),x>=f)break}x<f&&(f=x,d=Kt.SYMBOL_TABLE[p])}return d}}Un.bSymbolTableReady=!1,Un.RATIOS_TABLE=new Array(Kt.SYMBOL_TABLE.length).map(M=>new Array(Kt.BARS_IN_MODULE));class ga{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Rs{static parseLong(s,o=void 0){return parseInt(s,o)}}class Rr extends y{}Rr.kind="NullPointerException";class ma{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,c){if(s==null)throw new Rr;if(o<0||o>s.length||c<0||o+c>s.length||o+c<0)throw new G;if(c===0)return;for(let f=0;f<c;f++)this.write(s[o+f])}flush(){}close(){}}class pa extends y{}class Qc extends ma{constructor(s=32){if(super(),this.count=0,s<0)throw new S("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let c=this.buf.length<<1;if(c-s<0&&(c=s),c<0){if(s<0)throw new pa;c=K.MAX_VALUE}this.buf=nt.copyOfUint8Array(this.buf,c)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,c){if(o<0||o>s.length||c<0||o+c-s.length>0)throw new G;this.ensureCapacity(this.count+c),X.arraycopy(s,o,this.buf,this.count,c),this.count+=c}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return nt.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Ve;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ve||(Ve={}));function Ns(){if(typeof window<"u")return window.BigInt||null;if(typeof Ff<"u")return Ff.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ms;function Nr(M){if(typeof ms>"u"&&(ms=Ns()),ms===null)throw new Error("BigInt is not supported!");return ms(M)}function Wo(){let M=[];M[0]=Nr(1);let s=Nr(900);M[1]=s;for(let o=2;o<16;o++)M[o]=M[o-1]*s;return M}class mt{static decode(s,o){let c=new Y(""),f=V.ISO8859_1;c.enableDecoding(f);let d=1,p=s[d++],x=new ga;for(;d<s[0];){switch(p){case mt.TEXT_COMPACTION_MODE_LATCH:d=mt.textCompaction(s,d,c);break;case mt.BYTE_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:d=mt.byteCompaction(p,s,f,d,c);break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d++]);break;case mt.NUMERIC_COMPACTION_MODE_LATCH:d=mt.numericCompaction(s,d,c);break;case mt.ECI_CHARSET:V.getCharacterSetECIByValue(s[d++]);break;case mt.ECI_GENERAL_PURPOSE:d+=2;break;case mt.ECI_USER_DEFINED:d++;break;case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=mt.decodeMacroBlock(s,d,x);break;case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:throw new H;default:d--,d=mt.textCompaction(s,d,c);break}if(d<s.length)p=s[d++];else throw H.getFormatInstance()}if(c.length()===0)throw H.getFormatInstance();let v=new vi(null,c.toString(),null,o);return v.setOther(x),v}static decodeMacroBlock(s,o,c){if(o+mt.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw H.getFormatInstance();let f=new Int32Array(mt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<mt.NUMBER_OF_SEQUENCE_CODEWORDS;x++,o++)f[x]=s[o];c.setSegmentIndex(K.parseInt(mt.decodeBase900toBase10(f,mt.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new Y;o=mt.textCompaction(s,o,d),c.setFileId(d.toString());let p=-1;for(s[o]===mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=o+1);o<s[0];)switch(s[o]){case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new Y;o=mt.textCompaction(s,o+1,x),c.setFileName(x.toString());break;case mt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new Y;o=mt.textCompaction(s,o+1,v),c.setSender(v.toString());break;case mt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new Y;o=mt.textCompaction(s,o+1,b),c.setAddressee(b.toString());break;case mt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Y;o=mt.numericCompaction(s,o+1,R),c.setSegmentCount(K.parseInt(R.toString()));break;case mt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Y;o=mt.numericCompaction(s,o+1,P),c.setTimestamp(Rs.parseLong(P.toString()));break;case mt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new Y;o=mt.numericCompaction(s,o+1,L),c.setChecksum(K.parseInt(L.toString()));break;case mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new Y;o=mt.numericCompaction(s,o+1,q),c.setFileSize(Rs.parseLong(q.toString()));break;default:throw H.getFormatInstance()}break;case mt.MACRO_PDF417_TERMINATOR:o++,c.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(p!==-1){let x=o-p;c.isLastSegment()&&x--,c.setOptionalData(nt.copyOfRange(s,p,p+x))}return o}static textCompaction(s,o,c){let f=new Int32Array((s[0]-o)*2),d=new Int32Array((s[0]-o)*2),p=0,x=!1;for(;o<s[0]&&!x;){let v=s[o++];if(v<mt.TEXT_COMPACTION_MODE_LATCH)f[p]=v/30,f[p+1]=v%30,p+=2;else switch(v){case mt.TEXT_COMPACTION_MODE_LATCH:f[p++]=mt.TEXT_COMPACTION_MODE_LATCH;break;case mt.BYTE_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.NUMERIC_COMPACTION_MODE_LATCH:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:o--,x=!0;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=s[o++],d[p]=v,p++;break}}return mt.decodeTextCompaction(f,d,p,c),o}static decodeTextCompaction(s,o,c,f){let d=Ve.ALPHA,p=Ve.ALPHA,x=0;for(;x<c;){let v=s[x],b="";switch(d){case Ve.ALPHA:if(v<26)b=String.fromCharCode(65+v);else switch(v){case 26:b=" ";break;case mt.LL:d=Ve.LOWER;break;case mt.ML:d=Ve.MIXED;break;case mt.PS:p=d,d=Ve.PUNCT_SHIFT;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.LOWER:if(v<26)b=String.fromCharCode(97+v);else switch(v){case 26:b=" ";break;case mt.AS:p=d,d=Ve.ALPHA_SHIFT;break;case mt.ML:d=Ve.MIXED;break;case mt.PS:p=d,d=Ve.PUNCT_SHIFT;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.MIXED:if(v<mt.PL)b=mt.MIXED_CHARS[v];else switch(v){case mt.PL:d=Ve.PUNCT;break;case 26:b=" ";break;case mt.LL:d=Ve.LOWER;break;case mt.AL:d=Ve.ALPHA;break;case mt.PS:p=d,d=Ve.PUNCT_SHIFT;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.PUNCT:if(v<mt.PAL)b=mt.PUNCT_CHARS[v];else switch(v){case mt.PAL:d=Ve.ALPHA;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.ALPHA_SHIFT:if(d=p,v<26)b=String.fromCharCode(65+v);else switch(v){case 26:b=" ";break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break;case Ve.PUNCT_SHIFT:if(d=p,v<mt.PAL)b=mt.PUNCT_CHARS[v];else switch(v){case mt.PAL:d=Ve.ALPHA;break;case mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[x]);break;case mt.TEXT_COMPACTION_MODE_LATCH:d=Ve.ALPHA;break}break}b!==""&&f.append(b),x++}}static byteCompaction(s,o,c,f,d){let p=new Qc,x=0,v=0,b=!1;switch(s){case mt.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=o[f++];for(;f<o[0]&&!b;)switch(R[x++]=P,v=900*v+P,P=o[f++],P){case mt.TEXT_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH:case mt.NUMERIC_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:f--,b=!0;break;default:if(x%5===0&&x>0){for(let L=0;L<6;++L)p.write(Number(Nr(v)>>Nr(8*(5-L))));v=0,x=0}break}f===o[0]&&P<mt.TEXT_COMPACTION_MODE_LATCH&&(R[x++]=P);for(let L=0;L<x;L++)p.write(R[L]);break;case mt.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!b;){let L=o[f++];if(L<mt.TEXT_COMPACTION_MODE_LATCH)x++,v=900*v+L;else switch(L){case mt.TEXT_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH:case mt.NUMERIC_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:f--,b=!0;break}if(x%5===0&&x>0){for(let q=0;q<6;++q)p.write(Number(Nr(v)>>Nr(8*(5-q))));v=0,x=0}}break}return d.append(W.decode(p.toByteArray(),c)),f}static numericCompaction(s,o,c){let f=0,d=!1,p=new Int32Array(mt.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!d;){let x=s[o++];if(o===s[0]&&(d=!0),x<mt.TEXT_COMPACTION_MODE_LATCH)p[f]=x,f++;else switch(x){case mt.TEXT_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH:case mt.BYTE_COMPACTION_MODE_LATCH_6:case mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case mt.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%mt.MAX_NUMERIC_CODEWORDS===0||x===mt.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(c.append(mt.decodeBase900toBase10(p,f)),f=0)}return o}static decodeBase900toBase10(s,o){let c=Nr(0);for(let d=0;d<o;d++)c+=mt.EXP900[o-d-1]*Nr(s[d]);let f=c.toString();if(f.charAt(0)!=="1")throw new H;return f.substring(1)}}mt.TEXT_COMPACTION_MODE_LATCH=900,mt.BYTE_COMPACTION_MODE_LATCH=901,mt.NUMERIC_COMPACTION_MODE_LATCH=902,mt.BYTE_COMPACTION_MODE_LATCH_6=924,mt.ECI_USER_DEFINED=925,mt.ECI_GENERAL_PURPOSE=926,mt.ECI_CHARSET=927,mt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,mt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,mt.MACRO_PDF417_TERMINATOR=922,mt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,mt.MAX_NUMERIC_CODEWORDS=15,mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,mt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,mt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,mt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,mt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,mt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,mt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,mt.PL=25,mt.LL=27,mt.AS=27,mt.ML=28,mt.AL=28,mt.PS=29,mt.PAL=29,mt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,mt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",mt.EXP900=Ns()?Wo():[],mt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class de{constructor(){}static decode(s,o,c,f,d,p,x){let v=new Gr(s,o,c,f,d),b=null,R=null,P;for(let $=!0;;$=!1){if(o!=null&&(b=de.getRowIndicatorColumn(s,v,o,!0,p,x)),f!=null&&(R=de.getRowIndicatorColumn(s,v,f,!1,p,x)),P=de.merge(b,R),P==null)throw ht.getNotFoundInstance();let et=P.getBoundingBox();if($&&et!=null&&(et.getMinY()<v.getMinY()||et.getMaxY()>v.getMaxY()))v=et;else break}P.setBoundingBox(v);let L=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,b),P.setDetectionResultColumn(L,R);let q=b!=null;for(let $=1;$<=L;$++){let et=q?$:L-$;if(P.getDetectionResultColumn(et)!==void 0)continue;let lt;et===0||et===L?lt=new li(v,et===0):lt=new gs(v),P.setDetectionResultColumn(et,lt);let gt=-1,Mt=gt;for(let Lt=v.getMinY();Lt<=v.getMaxY();Lt++){if(gt=de.getStartColumn(P,et,Lt,q),gt<0||gt>v.getMaxX()){if(Mt===-1)continue;gt=Mt}let Nt=de.detectCodeword(s,v.getMinX(),v.getMaxX(),q,gt,Lt,p,x);Nt!=null&&(lt.setCodeword(Lt,Nt),Mt=gt,p=Math.min(p,Nt.getWidth()),x=Math.max(x,Nt.getWidth()))}}return de.createDecoderResult(P)}static merge(s,o){if(s==null&&o==null)return null;let c=de.getBarcodeMetadata(s,o);if(c==null)return null;let f=Gr.merge(de.adjustBoundingBox(s),de.adjustBoundingBox(o));return new Sr(c,f)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let c=de.getMax(o),f=0;for(let x of o)if(f+=c-x,x>0)break;let d=s.getCodewords();for(let x=0;f>0&&d[x]==null;x++)f--;let p=0;for(let x=o.length-1;x>=0&&(p+=c-o[x],!(o[x]>0));x--);for(let x=d.length-1;p>0&&d[x]==null;x--)p--;return s.getBoundingBox().addMissingRows(f,p,s.isLeft())}static getMax(s){let o=-1;for(let c of s)o=Math.max(o,c);return o}static getBarcodeMetadata(s,o){let c;if(s==null||(c=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(s,o,c,f,d,p){let x=new li(o,f);for(let v=0;v<2;v++){let b=v===0?1:-1,R=Math.trunc(Math.trunc(c.getX()));for(let P=Math.trunc(Math.trunc(c.getY()));P<=o.getMaxY()&&P>=o.getMinY();P+=b){let L=de.detectCodeword(s,0,s.getWidth(),f,R,P,d,p);L!=null&&(x.setCodeword(P,L),f?R=L.getStartX():R=L.getEndX())}}return x}static adjustCodewordCount(s,o){let c=o[0][1],f=c.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-de.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(d<1||d>Kt.MAX_CODEWORDS_IN_BARCODE)throw ht.getNotFoundInstance();c.setValue(d)}else f[0]!==d&&c.setValue(d)}static createDecoderResult(s){let o=de.createBarcodeMatrix(s);de.adjustCodewordCount(s,o);let c=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],p=new Array;for(let v=0;v<s.getBarcodeRowCount();v++)for(let b=0;b<s.getBarcodeColumnCount();b++){let R=o[v][b+1].getValue(),P=v*s.getBarcodeColumnCount()+b;R.length===0?c.push(P):R.length===1?f[P]=R[0]:(p.push(P),d.push(R))}let x=new Array(d.length);for(let v=0;v<x.length;v++)x[v]=d[v];return de.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,Kt.toIntArray(c),Kt.toIntArray(p),x)}static createDecoderResultFromAmbiguousValues(s,o,c,f,d){let p=new Int32Array(f.length),x=100;for(;x-- >0;){for(let v=0;v<p.length;v++)o[f[v]]=d[v][p[v]];try{return de.decodeCodewords(o,s,c)}catch(v){if(!(v instanceof k))throw v}if(p.length===0)throw k.getChecksumInstance();for(let v=0;v<p.length;v++)if(p[v]<d[v].length-1){p[v]++;break}else if(p[v]=0,v===p.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new An;let c=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let p=d.getRowNumber();if(p>=0){if(p>=o.length)continue;o[p][c].setValue(d.getValue())}}}c++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,c,f){let d=f?1:-1,p=null;if(de.isValidBarcodeColumn(s,o-d)&&(p=s.getDetectionResultColumn(o-d).getCodeword(c)),p!=null)return f?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(o).getCodewordNearby(c),p!=null)return f?p.getStartX():p.getEndX();if(de.isValidBarcodeColumn(s,o-d)&&(p=s.getDetectionResultColumn(o-d).getCodewordNearby(c)),p!=null)return f?p.getEndX():p.getStartX();let x=0;for(;de.isValidBarcodeColumn(s,o-d);){o-=d;for(let v of s.getDetectionResultColumn(o).getCodewords())if(v!=null)return(f?v.getEndX():v.getStartX())+d*x*(v.getEndX()-v.getStartX());x++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,c,f,d,p,x,v){d=de.adjustCodewordStartColumn(s,o,c,f,d,p);let b=de.getModuleBitCount(s,o,c,f,d,p);if(b==null)return null;let R,P=Zt.sum(b);if(f)R=d+P;else{for(let $=0;$<b.length/2;$++){let et=b[$];b[$]=b[b.length-1-$],b[b.length-1-$]=et}R=d,d=R-P}if(!de.checkCodewordSkew(P,x,v))return null;let L=Un.getDecodedValue(b),q=Kt.getCodeword(L);return q===-1?null:new Ir(d,R,de.getCodewordBucketNumber(L),q)}static getModuleBitCount(s,o,c,f,d,p){let x=d,v=new Int32Array(8),b=0,R=f?1:-1,P=f;for(;(f?x<c:x>=o)&&b<v.length;)s.get(x,p)===P?(v[b]++,x+=R):(b++,P=!P);return b===v.length||x===(f?c:o)&&b===v.length-1?v:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,c,f,d,p){let x=d,v=f?-1:1;for(let b=0;b<2;b++){for(;(f?x>=o:x<c)&&f===s.get(x,p);){if(Math.abs(d-x)>de.CODEWORD_SKEW_SIZE)return d;x+=v}v=-v,f=!f}return x}static checkCodewordSkew(s,o,c){return o-de.CODEWORD_SKEW_SIZE<=s&&s<=c+de.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,c){if(s.length===0)throw H.getFormatInstance();let f=1<<o+1,d=de.correctErrors(s,c,f);de.verifyCodewordCount(s,f);let p=mt.decode(s,""+o);return p.setErrorsCorrected(d),p.setErasures(c.length),p}static correctErrors(s,o,c){if(o!=null&&o.length>c/2+de.MAX_ERRORS||c<0||c>de.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return de.errorCorrection.decode(s,c,o)}static verifyCodewordCount(s,o){if(s.length<4)throw H.getFormatInstance();let c=s[0];if(c>s.length)throw H.getFormatInstance();if(c===0)if(o<s.length)s[0]=s.length-o;else throw H.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),c=0,f=o.length-1;for(;!((s&1)!==c&&(c=s&1,f--,f<0));)o[f]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return de.getCodewordBucketNumber(de.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new br;for(let c=0;c<s.length;c++){o.format("Row %2d: ",c);for(let f=0;f<s[c].length;f++){let d=s[c][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}de.CODEWORD_SKEW_SIZE=2,de.MAX_ERRORS=3,de.MAX_EC_CODEWORDS=512,de.errorCorrection=new fa;class _n{decode(s,o=null){let c=_n.decode(s,o,!1);if(c==null||c.length===0||c[0]==null)throw ht.getNotFoundInstance();return c[0]}decodeMultiple(s,o=null){try{return _n.decode(s,o,!0)}catch(c){throw c instanceof H||c instanceof k?ht.getNotFoundInstance():c}}static decode(s,o,c){const f=new Array,d=ie.detectMultiple(s,o,c);for(const p of d.getPoints()){const x=de.decode(d.getBits(),p[4],p[5],p[6],p[7],_n.getMinCodewordWidth(p),_n.getMaxCodewordWidth(p)),v=new zt(x.getText(),x.getRawBytes(),void 0,p,Ot.PDF_417);v.putMetadata(ce.ERROR_CORRECTION_LEVEL,x.getECLevel());const b=x.getOther();b!=null&&v.putMetadata(ce.PDF417_EXTRA_METADATA,b),f.push(v)}return f.map(p=>p)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?K.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(_n.getMaxWidth(s[0],s[4]),_n.getMaxWidth(s[6],s[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(s[1],s[5]),_n.getMaxWidth(s[7],s[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(_n.getMinWidth(s[0],s[4]),_n.getMinWidth(s[6],s[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(s[1],s[5]),_n.getMinWidth(s[7],s[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ds extends y{}Ds.kind="ReaderException";class Qo{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!r(s)&&s.get(Rt.TRY_HARDER)===!0,c=r(s)?null:s.get(Rt.POSSIBLE_FORMATS),f=new Array;if(!r(c)){const d=c.some(p=>p===Ot.UPC_A||p===Ot.UPC_E||p===Ot.EAN_13||p===Ot.EAN_8||p===Ot.CODABAR||p===Ot.CODE_39||p===Ot.CODE_93||p===Ot.CODE_128||p===Ot.ITF||p===Ot.RSS_14||p===Ot.RSS_EXPANDED);d&&!o&&f.push(new ar(s,this.verbose)),c.includes(Ot.QR_CODE)&&f.push(new Ui),c.includes(Ot.DATA_MATRIX)&&f.push(new pi),c.includes(Ot.AZTEC)&&f.push(new ra),c.includes(Ot.PDF_417)&&f.push(new _n),d&&o&&f.push(new ar(s,this.verbose))}f.length===0&&(o||f.push(new ar(s,this.verbose)),f.push(new Ui),f.push(new pi),f.push(new ra),f.push(new _n),o&&f.push(new ar(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Ds("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(c){if(c instanceof Ds)continue}throw new ht("No MultiFormat Readers were able to detect the code.")}}class ps extends Vt{constructor(s=null,o=500){const c=new Qo;c.setHints(s),super(c,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class Fl extends Vt{constructor(s=500){super(new _n,s)}}class zl extends Vt{constructor(s=500){super(new Ui,s)}}var Os;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(Os||(Os={}));var Tn=Os;class Ms{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Xn(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let c=o[o.length-1];const f=this.field;for(let d=o.length;d<=s;d++){const p=c.multiply(new Xn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(p),c=p}}return o[s]}encode(s,o){if(o===0)throw new S("No error correction bytes");const c=s.length-o;if(c<=0)throw new S("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(c);X.arraycopy(s,0,d,0,c);let p=new Xn(this.field,d);p=p.multiplyByMonomial(o,1);const v=p.divide(f)[1].getCoefficients(),b=o-v.length;for(let R=0;R<b;R++)s[c+R]=0;X.arraycopy(v,0,s,c+b,v.length)}}class Ce{constructor(){}static applyMaskPenaltyRule1(s){return Ce.applyMaskPenaltyRule1Internal(s,!0)+Ce.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const c=s.getArray(),f=s.getWidth(),d=s.getHeight();for(let p=0;p<d-1;p++){const x=c[p];for(let v=0;v<f-1;v++){const b=x[v];b===x[v+1]&&b===c[p+1][v]&&b===c[p+1][v+1]&&o++}}return Ce.N2*o}static applyMaskPenaltyRule3(s){let o=0;const c=s.getArray(),f=s.getWidth(),d=s.getHeight();for(let p=0;p<d;p++)for(let x=0;x<f;x++){const v=c[p];x+6<f&&v[x]===1&&v[x+1]===0&&v[x+2]===1&&v[x+3]===1&&v[x+4]===1&&v[x+5]===0&&v[x+6]===1&&(Ce.isWhiteHorizontal(v,x-4,x)||Ce.isWhiteHorizontal(v,x+7,x+11))&&o++,p+6<d&&c[p][x]===1&&c[p+1][x]===0&&c[p+2][x]===1&&c[p+3][x]===1&&c[p+4][x]===1&&c[p+5][x]===0&&c[p+6][x]===1&&(Ce.isWhiteVertical(c,x,p-4,p)||Ce.isWhiteVertical(c,x,p+7,p+11))&&o++}return o*Ce.N3}static isWhiteHorizontal(s,o,c){o=Math.max(o,0),c=Math.min(c,s.length);for(let f=o;f<c;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,o,c,f){c=Math.max(c,0),f=Math.min(f,s.length);for(let d=c;d<f;d++)if(s[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const c=s.getArray(),f=s.getWidth(),d=s.getHeight();for(let v=0;v<d;v++){const b=c[v];for(let R=0;R<f;R++)b[R]===1&&o++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-p)*10/p)*Ce.N4}static getDataMaskBit(s,o,c){let f,d;switch(s){case 0:f=c+o&1;break;case 1:f=c&1;break;case 2:f=o%3;break;case 3:f=(c+o)%3;break;case 4:f=Math.floor(c/2)+Math.floor(o/3)&1;break;case 5:d=c*o,f=(d&1)+d%3;break;case 6:d=c*o,f=(d&1)+d%3&1;break;case 7:d=c*o,f=d%3+(c+o&1)&1;break;default:throw new S("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,o){let c=0;const f=o?s.getHeight():s.getWidth(),d=o?s.getWidth():s.getHeight(),p=s.getArray();for(let x=0;x<f;x++){let v=0,b=-1;for(let R=0;R<d;R++){const P=o?p[x][R]:p[R][x];P===b?v++:(v>=5&&(c+=Ce.N1+(v-5)),v=1,b=P)}v>=5&&(c+=Ce.N1+(v-5))}return c}}Ce.N1=3,Ce.N2=3,Ce.N3=40,Ce.N4=10;class Ps{constructor(s,o){this.width=s,this.height=o;const c=new Array(o);for(let f=0;f!==o;f++)c[f]=new Uint8Array(s);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,c){this.bytes[o][s]=c}setBoolean(s,o,c){this.bytes[o][s]=c?1:0}clear(s){for(const o of this.bytes)nt.fill(o,s)}equals(s){if(!(s instanceof Ps))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let c=0,f=this.height;c<f;++c){const d=this.bytes[c],p=o.bytes[c];for(let x=0,v=this.width;x<v;++x)if(d[x]!==p[x])return!1}return!0}toString(){const s=new Y;for(let o=0,c=this.height;o<c;++o){const f=this.bytes[o];for(let d=0,p=this.width;d<p;++d)switch(f[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class qr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new Y;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<qr.NUM_MASK_PATTERNS}}qr.NUM_MASK_PATTERNS=8;class Ne extends y{}Ne.kind="WriterException";class A{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,c,f,d){A.clearMatrix(d),A.embedBasicPatterns(c,d),A.embedTypeInfo(o,f,d),A.maybeEmbedVersionInfo(c,d),A.embedDataBits(s,f,d)}static embedBasicPatterns(s,o){A.embedPositionDetectionPatternsAndSeparators(o),A.embedDarkDotAtLeftBottomCorner(o),A.maybeEmbedPositionAdjustmentPatterns(s,o),A.embedTimingPatterns(o)}static embedTypeInfo(s,o,c){const f=new At;A.makeTypeInfoBits(s,o,f);for(let d=0,p=f.getSize();d<p;++d){const x=f.get(f.getSize()-1-d),v=A.TYPE_INFO_COORDINATES[d],b=v[0],R=v[1];if(c.setBoolean(b,R,x),d<8){const P=c.getWidth()-d-1;c.setBoolean(P,8,x)}else{const L=c.getHeight()-7+(d-8);c.setBoolean(8,L,x)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const c=new At;A.makeVersionInfoBits(s,c);let f=17;for(let d=0;d<6;++d)for(let p=0;p<3;++p){const x=c.get(f);f--,o.setBoolean(d,o.getHeight()-11+p,x),o.setBoolean(o.getHeight()-11+p,d,x)}}static embedDataBits(s,o,c){let f=0,d=-1,p=c.getWidth()-1,x=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);x>=0&&x<c.getHeight();){for(let v=0;v<2;++v){const b=p-v;if(!A.isEmpty(c.get(b,x)))continue;let R;f<s.getSize()?(R=s.get(f),++f):R=!1,o!==255&&Ce.getDataMaskBit(o,b,x)&&(R=!R),c.setBoolean(b,x,R)}x+=d}d=-d,x+=d,p-=2}if(f!==s.getSize())throw new Ne("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-K.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new S("0 polynomial");const c=A.findMSBSet(o);for(s<<=c-1;A.findMSBSet(s)>=c;)s^=o<<A.findMSBSet(s)-c;return s}static makeTypeInfoBits(s,o,c){if(!qr.isValidMaskPattern(o))throw new Ne("Invalid mask pattern");const f=s.getBits()<<3|o;c.appendBits(f,5);const d=A.calculateBCHCode(f,A.TYPE_INFO_POLY);c.appendBits(d,10);const p=new At;if(p.appendBits(A.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new Ne("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const c=A.calculateBCHCode(s.getVersionNumber(),A.VERSION_INFO_POLY);if(o.appendBits(c,12),o.getSize()!==18)throw new Ne("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const c=(o+1)%2;A.isEmpty(s.get(o,6))&&s.setNumber(o,6,c),A.isEmpty(s.get(6,o))&&s.setNumber(6,o,c)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new Ne;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,c){for(let f=0;f<8;++f){if(!A.isEmpty(c.get(s+f,o)))throw new Ne;c.setNumber(s+f,o,0)}}static embedVerticalSeparationPattern(s,o,c){for(let f=0;f<7;++f){if(!A.isEmpty(c.get(s,o+f)))throw new Ne;c.setNumber(s,o+f,0)}}static embedPositionAdjustmentPattern(s,o,c){for(let f=0;f<5;++f){const d=A.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)c.setNumber(s+p,o+f,d[p])}}static embedPositionDetectionPattern(s,o,c){for(let f=0;f<7;++f){const d=A.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)c.setNumber(s+p,o+f,d[p])}}static embedPositionDetectionPatternsAndSeparators(s){const o=A.POSITION_DETECTION_PATTERN[0].length;A.embedPositionDetectionPattern(0,0,s),A.embedPositionDetectionPattern(s.getWidth()-o,0,s),A.embedPositionDetectionPattern(0,s.getWidth()-o,s);const c=8;A.embedHorizontalSeparationPattern(0,c-1,s),A.embedHorizontalSeparationPattern(s.getWidth()-c,c-1,s),A.embedHorizontalSeparationPattern(0,s.getWidth()-c,s);const f=7;A.embedVerticalSeparationPattern(f,0,s),A.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),A.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const c=s.getVersionNumber()-1,f=A.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let d=0,p=f.length;d!==p;d++){const x=f[d];if(x>=0)for(let v=0;v!==p;v++){const b=f[v];b>=0&&A.isEmpty(o.get(b,x))&&A.embedPositionAdjustmentPattern(b-2,x-2,o)}}}}A.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),A.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),A.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),A.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),A.VERSION_INFO_POLY=7973,A.TYPE_INFO_POLY=1335,A.TYPE_INFO_MASK_PATTERN=21522;class I{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(s){return Ce.applyMaskPenaltyRule1(s)+Ce.applyMaskPenaltyRule2(s)+Ce.applyMaskPenaltyRule3(s)+Ce.applyMaskPenaltyRule4(s)}static encode(s,o,c=null){let f=D.DEFAULT_BYTE_MODE_ENCODING;const d=c!==null&&c.get(Tn.CHARACTER_SET)!==void 0;d&&(f=c.get(Tn.CHARACTER_SET).toString());const p=this.chooseMode(s,f),x=new At;if(p===Yt.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==f)){const Lt=V.getCharacterSetECIByName(f);Lt!==void 0&&this.appendECI(Lt,x)}this.appendModeInfo(p,x);const v=new At;this.appendBytes(s,p,v,f);let b;if(c!==null&&c.get(Tn.QR_VERSION)!==void 0){const Lt=Number.parseInt(c.get(Tn.QR_VERSION).toString(),10);b=Xt.getVersionForNumber(Lt);const Nt=this.calculateBitsNeeded(p,x,v,b);if(!this.willFit(Nt,b,o))throw new Ne("Data too big for requested version")}else b=this.recommendVersion(o,p,x,v);const R=new At;R.appendBitArray(x);const P=p===Yt.BYTE?v.getSizeInBytes():s.length;this.appendLengthInfo(P,b,p,R),R.appendBitArray(v);const L=b.getECBlocksForLevel(o),q=b.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(q,R);const $=this.interleaveWithECBytes(R,b.getTotalCodewords(),q,L.getNumBlocks()),et=new qr;et.setECLevel(o),et.setMode(p),et.setVersion(b);const lt=b.getDimensionForVersion(),gt=new Ps(lt,lt),Mt=this.chooseMaskPattern($,o,b,gt);return et.setMaskPattern(Mt),A.buildMatrix($,o,b,Mt,gt),et.setMatrix(gt),et}static recommendVersion(s,o,c,f){const d=this.calculateBitsNeeded(o,c,f,Xt.getVersionForNumber(1)),p=this.chooseVersion(d,s),x=this.calculateBitsNeeded(o,c,f,p);return this.chooseVersion(x,s)}static calculateBitsNeeded(s,o,c,f){return o.getSize()+s.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(s){return s<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return Yt.KANJI;let c=!1,f=!1;for(let d=0,p=s.length;d<p;++d){const x=s.charAt(d);if(D.isDigit(x))c=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)f=!0;else return Yt.BYTE}return f?Yt.ALPHANUMERIC:c?Yt.NUMERIC:Yt.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=W.encode(s,V.SJIS)}catch{return!1}const c=o.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,o,c,f){let d=Number.MAX_SAFE_INTEGER,p=-1;for(let x=0;x<qr.NUM_MASK_PATTERNS;x++){A.buildMatrix(s,o,c,x,f);let v=this.calculateMaskPenalty(f);v<d&&(d=v,p=x)}return p}static chooseVersion(s,o){for(let c=1;c<=40;c++){const f=Xt.getVersionForNumber(c);if(D.willFit(s,f,o))return f}throw new Ne("Data too big")}static willFit(s,o,c){const f=o.getTotalCodewords(),p=o.getECBlocksForLevel(c).getTotalECCodewords(),x=f-p,v=(s+7)/8;return x>=v}static terminateBits(s,o){const c=s*8;if(o.getSize()>c)throw new Ne("data bits cannot fit in the QR Code"+o.getSize()+" > "+c);for(let p=0;p<4&&o.getSize()<c;++p)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let p=f;p<8;p++)o.appendBit(!1);const d=s-o.getSizeInBytes();for(let p=0;p<d;++p)o.appendBits((p&1)===0?236:17,8);if(o.getSize()!==c)throw new Ne("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,c,f,d,p){if(f>=c)throw new Ne("Block ID too large");const x=s%c,v=c-x,b=Math.floor(s/c),R=b+1,P=Math.floor(o/c),L=P+1,q=b-P,$=R-L;if(q!==$)throw new Ne("EC bytes mismatch");if(c!==v+x)throw new Ne("RS blocks mismatch");if(s!==(P+q)*v+(L+$)*x)throw new Ne("Total bytes mismatch");f<v?(d[0]=P,p[0]=q):(d[0]=L,p[0]=$)}static interleaveWithECBytes(s,o,c,f){if(s.getSizeInBytes()!==c)throw new Ne("Number of bits and data bytes does not match");let d=0,p=0,x=0;const v=new Array;for(let R=0;R<f;++R){const P=new Int32Array(1),L=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,c,f,R,P,L);const q=P[0],$=new Uint8Array(q);s.toBytes(8*d,$,0,q);const et=D.generateECBytes($,L[0]);v.push(new I($,et)),p=Math.max(p,q),x=Math.max(x,et.length),d+=P[0]}if(c!==d)throw new Ne("Data bytes does not match offset");const b=new At;for(let R=0;R<p;++R)for(const P of v){const L=P.getDataBytes();R<L.length&&b.appendBits(L[R],8)}for(let R=0;R<x;++R)for(const P of v){const L=P.getErrorCorrectionBytes();R<L.length&&b.appendBits(L[R],8)}if(o!==b.getSizeInBytes())throw new Ne("Interleaving error: "+o+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(s,o){const c=s.length,f=new Int32Array(c+o);for(let p=0;p<c;p++)f[p]=s[p]&255;new Ms(we.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let p=0;p<o;p++)d[p]=f[c+p];return d}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,c,f){const d=c.getCharacterCountBits(o);if(s>=1<<d)throw new Ne(s+" is bigger than "+((1<<d)-1));f.appendBits(s,d)}static appendBytes(s,o,c,f){switch(o){case Yt.NUMERIC:D.appendNumericBytes(s,c);break;case Yt.ALPHANUMERIC:D.appendAlphanumericBytes(s,c);break;case Yt.BYTE:D.append8BitBytes(s,c,f);break;case Yt.KANJI:D.appendKanjiBytes(s,c);break;default:throw new Ne("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=D.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const c=s.length;let f=0;for(;f<c;){const d=D.getDigit(s.charAt(f));if(f+2<c){const p=D.getDigit(s.charAt(f+1)),x=D.getDigit(s.charAt(f+2));o.appendBits(d*100+p*10+x,10),f+=3}else if(f+1<c){const p=D.getDigit(s.charAt(f+1));o.appendBits(d*10+p,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(s,o){const c=s.length;let f=0;for(;f<c;){const d=D.getAlphanumericCode(s.charCodeAt(f));if(d===-1)throw new Ne;if(f+1<c){const p=D.getAlphanumericCode(s.charCodeAt(f+1));if(p===-1)throw new Ne;o.appendBits(d*45+p,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(s,o,c){let f;try{f=W.encode(s,c)}catch(d){throw new Ne(d)}for(let d=0,p=f.length;d!==p;d++){const x=f[d];o.appendBits(x,8)}}static appendKanjiBytes(s,o){let c;try{c=W.encode(s,V.SJIS)}catch(d){throw new Ne(d)}const f=c.length;for(let d=0;d<f;d+=2){const p=c[d]&255,x=c[d+1]&255,v=p<<8&4294967295|x;let b=-1;if(v>=33088&&v<=40956?b=v-33088:v>=57408&&v<=60351&&(b=v-49472),b===-1)throw new Ne("Invalid byte sequence");const R=(b>>8)*192+(b&255);o.appendBits(R,13)}}static appendECI(s,o){o.appendBits(Yt.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(s,o,c,f=null){if(s.length===0)throw new S("Found empty contents");if(o<0||c<0)throw new S("Requested dimensions are too small: "+o+"x"+c);let d=je.L,p=F.QUIET_ZONE_SIZE;f!==null&&(f.get(Tn.ERROR_CORRECTION)!==void 0&&(d=je.fromString(f.get(Tn.ERROR_CORRECTION).toString())),f.get(Tn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Tn.MARGIN).toString(),10)));const x=D.encode(s,d,f);return this.renderResult(x,o,c,p)}writeToDom(s,o,c,f,d=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(o,c,f,d);s&&s.appendChild(p)}renderResult(s,o,c,f){const d=s.getMatrix();if(d===null)throw new sr;const p=d.getWidth(),x=d.getHeight(),v=p+f*2,b=x+f*2,R=Math.max(o,v),P=Math.max(c,b),L=Math.min(Math.floor(R/v),Math.floor(P/b)),q=Math.floor((R-p*L)/2),$=Math.floor((P-x*L)/2),et=this.createSVGElement(R,P);for(let lt=0,gt=$;lt<x;lt++,gt+=L)for(let Mt=0,Lt=q;Mt<p;Mt++,Lt+=L)if(d.get(Mt,lt)===1){const Nt=this.createSvgRectElement(Lt,gt,L,L);et.appendChild(Nt)}return et}createSVGElement(s,o){const c=document.createElementNS(F.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",o.toString()),c}createSvgRectElement(s,o,c,f){const d=document.createElementNS(F.SVG_NS,"rect");return d.setAttributeNS(null,"x",s.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class ot{encode(s,o,c,f,d){if(s.length===0)throw new S("Found empty contents");if(o!==Ot.QR_CODE)throw new S("Can only encode QR_CODE, but got "+o);if(c<0||f<0)throw new S(`Requested dimensions are too small: ${c}x${f}`);let p=je.L,x=ot.QUIET_ZONE_SIZE;d!==null&&(d.get(Tn.ERROR_CORRECTION)!==void 0&&(p=je.fromString(d.get(Tn.ERROR_CORRECTION).toString())),d.get(Tn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(Tn.MARGIN).toString(),10)));const v=D.encode(s,p,d);return ot.renderResult(v,c,f,x)}static renderResult(s,o,c,f){const d=s.getMatrix();if(d===null)throw new sr;const p=d.getWidth(),x=d.getHeight(),v=p+f*2,b=x+f*2,R=Math.max(o,v),P=Math.max(c,b),L=Math.min(Math.floor(R/v),Math.floor(P/b)),q=Math.floor((R-p*L)/2),$=Math.floor((P-x*L)/2),et=new Jt(R,P);for(let lt=0,gt=$;lt<x;lt++,gt+=L)for(let Mt=0,Lt=q;Mt<p;Mt++,Lt+=L)d.get(Mt,lt)===1&&et.setRegion(Lt,gt,L,L);return et}}ot.QUIET_ZONE_SIZE=4;class Et{encode(s,o,c,f,d){let p;switch(o){case Ot.QR_CODE:p=new ot;break;default:throw new S("No encoder available for format "+o)}return p.encode(s,o,c,f,d)}}class Pt extends Ft{constructor(s,o,c,f,d,p,x,v){if(super(p,x),this.yuvData=s,this.dataWidth=o,this.dataHeight=c,this.left=f,this.top=d,f+p>o||d+x>c)throw new S("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(p,x)}getRow(s,o){if(s<0||s>=this.getHeight())throw new S("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(s+this.top)*this.dataWidth+this.left;return X.arraycopy(this.yuvData,f,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const c=s*o,f=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return X.arraycopy(this.yuvData,d,f,0,c),f;for(let p=0;p<o;p++){const x=p*s;X.arraycopy(this.yuvData,d,f,x,s),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,c,f){return new Pt(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,c,f,!1)}renderThumbnail(){const s=this.getWidth()/Pt.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Pt.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let p=0;p<o;p++){const x=p*s;for(let v=0;v<s;v++){const b=f[d+v*Pt.THUMBNAIL_SCALE_FACTOR]&255;c[x+v]=4278190080|b*65793}d+=this.dataWidth*Pt.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/Pt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const c=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const p=d+s/2;for(let x=d,v=d+s-1;x<p;x++,v--){const b=c[x];c[x]=c[v],c[v]=b}}}invert(){return new $t(this)}}Pt.THUMBNAIL_SCALE_FACTOR=2;class ae extends Ft{constructor(s,o,c,f,d,p,x){if(super(o,c),this.dataWidth=f,this.dataHeight=d,this.left=p,this.top=x,s.BYTES_PER_ELEMENT===4){const v=o*c,b=new Uint8ClampedArray(v);for(let R=0;R<v;R++){const P=s[R],L=P>>16&255,q=P>>7&510,$=P&255;b[R]=(L+q+$)/4&255}this.luminances=b}else this.luminances=s;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+c>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new S("Requested row is outside the image: "+s);const c=this.getWidth();(o==null||o.length<c)&&(o=new Uint8ClampedArray(c));const f=(s+this.top)*this.dataWidth+this.left;return X.arraycopy(this.luminances,f,o,0,c),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const c=s*o,f=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return X.arraycopy(this.luminances,d,f,0,c),f;for(let p=0;p<o;p++){const x=p*s;X.arraycopy(this.luminances,d,f,x,s),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,c,f){return new ae(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new $t(this)}}class an extends V{static forName(s){return this.getCharacterSetECIByName(s)}}class Ue{}Ue.ISO_8859_1=V.ISO8859_1;class vn{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Fi{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class Xr{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ei extends Xr{constructor(s,o,c){super(s),this.value=o,this.bitCount=c}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new Ei(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ei(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+K.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class er extends Ei{constructor(s,o,c){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=c}appendTo(s,o){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):c===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+c],8)}addBinaryShift(s,o){return new er(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Dr(M,s,o){return new er(M,s,o)}function ys(M,s,o){return new Ei(M,s,o)}const R0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ls=0,Zo=1,nr=2,Ka=3,zi=4,N0=new Ei(null,0,0),Wa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Vh(M){for(let s of M)nt.fill(s,-1);return M[Ls][zi]=0,M[Zo][zi]=0,M[Zo][Ls]=28,M[Ka][zi]=0,M[nr][zi]=0,M[nr][Ls]=15,M}const Zc=Vh(nt.createInt32Array(6,6));class lr{constructor(s,o,c,f){this.token=s,this.mode=o,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let c=this.bitCount,f=this.token;if(s!==this.mode){let p=Wa[this.mode][s];f=ys(f,p&65535,p>>16),c+=p>>16}let d=s===nr?4:5;return f=ys(f,o,d),new lr(f,s,0,c+d)}shiftAndAppend(s,o){let c=this.token,f=this.mode===nr?4:5;return c=ys(c,Zc[this.mode][s],f),c=ys(c,o,5),new lr(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let o=this.token,c=this.mode,f=this.bitCount;if(this.mode===zi||this.mode===nr){let x=Wa[c][Ls];o=ys(o,x&65535,x>>16),f+=x>>16,c=Ls}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new lr(o,c,this.binaryShiftByteCount+1,f+d);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Dr(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new lr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(Wa[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=lr.calculateBinaryShiftCost(s)-lr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())o.unshift(f);let c=new At;for(const f of o)f.appendTo(c,s);return c}toString(){return Z.format("%s bits=%d bytes=%d",R0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}lr.INITIAL_STATE=new lr(N0,Ls,0,0);function Jc(M){const s=Z.getCharCode(" "),o=Z.getCharCode("."),c=Z.getCharCode(",");M[Ls][s]=1;const f=Z.getCharCode("Z"),d=Z.getCharCode("A");for(let L=d;L<=f;L++)M[Ls][L]=L-d+2;M[Zo][s]=1;const p=Z.getCharCode("z"),x=Z.getCharCode("a");for(let L=x;L<=p;L++)M[Zo][L]=L-x+2;M[nr][s]=1;const v=Z.getCharCode("9"),b=Z.getCharCode("0");for(let L=b;L<=v;L++)M[nr][L]=L-b+2;M[nr][c]=12,M[nr][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<R.length;L++)M[Ka][Z.getCharCode(R[L])]=L;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<P.length;L++)Z.getCharCode(P[L])>0&&(M[zi][Z.getCharCode(P[L])]=L);return M}const Hl=Jc(nt.createInt32Array(5,256));class Qa{constructor(s){this.text=s}encode(){const s=Z.getCharCode(" "),o=Z.getCharCode(`
`);let c=Fi.singletonList(lr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let p,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Z.getCharCode("\r"):p=x===o?2:0;break;case Z.getCharCode("."):p=x===s?3:0;break;case Z.getCharCode(","):p=x===s?4:0;break;case Z.getCharCode(":"):p=x===s?5:0;break;default:p=0}p>0?(c=Qa.updateStateListForPair(c,d,p),d++):c=this.updateStateListForChar(c,d)}return Fi.min(c,(d,p)=>d.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const c=[];for(let f of s)this.updateStateForChar(f,o,c);return Qa.simplifyStates(c)}updateStateForChar(s,o,c){let f=this.text[o]&255,d=Hl[s.getMode()][f]>0,p=null;for(let x=0;x<=zi;x++){let v=Hl[x][f];if(v>0){if(p==null&&(p=s.endBinaryShift(o)),!d||x===s.getMode()||x===nr){const b=p.latchAndAppend(x,v);c.push(b)}if(!d&&Zc[s.getMode()][x]>=0){const b=p.shiftAndAppend(x,v);c.push(b)}}}if(s.getBinaryShiftByteCount()>0||Hl[s.getMode()][f]===0){let x=s.addBinaryShiftChar(o);c.push(x)}}static updateStateListForPair(s,o,c){const f=[];for(let d of s)this.updateStateForPair(d,o,c,f);return this.simplifyStates(f)}static updateStateForPair(s,o,c,f){let d=s.endBinaryShift(o);if(f.push(d.latchAndAppend(zi,c)),s.getMode()!==zi&&f.push(d.shiftAndAppend(zi,c)),c===3||c===4){let p=d.latchAndAppend(nr,16-c).latchAndAppend(nr,1);f.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(p)}}static simplifyStates(s){let o=[];for(const c of s){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(d)&&(o=o.filter(p=>p!==d))}f&&o.push(c)}return o}}class De{constructor(){}static encodeBytes(s){return De.encode(s,De.DEFAULT_EC_PERCENT,De.DEFAULT_AZTEC_LAYERS)}static encode(s,o,c){let f=new Qa(s).encode(),d=K.truncDivision(f.getSize()*o,100)+11,p=f.getSize()+d,x,v,b,R,P;if(c!==De.DEFAULT_AZTEC_LAYERS){if(x=c<0,v=Math.abs(c),v>(x?De.MAX_NB_BITS_COMPACT:De.MAX_NB_BITS))throw new S(Z.format("Illegal value %s for layers",c));b=De.totalBitsInLayer(v,x),R=De.WORD_SIZE[v];let Nt=b-b%R;if(P=De.stuffBits(f,R),P.getSize()+d>Nt)throw new S("Data to large for user specified layer");if(x&&P.getSize()>R*64)throw new S("Data to large for user specified layer")}else{R=0,P=null;for(let Nt=0;;Nt++){if(Nt>De.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(x=Nt<=3,v=x?Nt+1:Nt,b=De.totalBitsInLayer(v,x),p>b)continue;(P==null||R!==De.WORD_SIZE[v])&&(R=De.WORD_SIZE[v],P=De.stuffBits(f,R));let ge=b-b%R;if(!(x&&P.getSize()>R*64)&&P.getSize()+d<=ge)break}}let L=De.generateCheckWords(P,b,R),q=P.getSize()/R,$=De.generateModeMessage(x,v,q),et=(x?11:14)+v*4,lt=new Int32Array(et),gt;if(x){gt=et;for(let Nt=0;Nt<lt.length;Nt++)lt[Nt]=Nt}else{gt=et+1+2*K.truncDivision(K.truncDivision(et,2)-1,15);let Nt=K.truncDivision(et,2),ge=K.truncDivision(gt,2);for(let he=0;he<Nt;he++){let Ii=he+K.truncDivision(he,15);lt[Nt-he-1]=ge-Ii-1,lt[Nt+he]=ge+Ii+1}}let Mt=new Jt(gt);for(let Nt=0,ge=0;Nt<v;Nt++){let he=(v-Nt)*4+(x?9:12);for(let Ii=0;Ii<he;Ii++){let cr=Ii*2;for(let Hi=0;Hi<2;Hi++)L.get(ge+cr+Hi)&&Mt.set(lt[Nt*2+Hi],lt[Nt*2+Ii]),L.get(ge+he*2+cr+Hi)&&Mt.set(lt[Nt*2+Ii],lt[et-1-Nt*2-Hi]),L.get(ge+he*4+cr+Hi)&&Mt.set(lt[et-1-Nt*2-Hi],lt[et-1-Nt*2-Ii]),L.get(ge+he*6+cr+Hi)&&Mt.set(lt[et-1-Nt*2-Ii],lt[Nt*2+Hi])}ge+=he*8}if(De.drawModeMessage(Mt,x,gt,$),x)De.drawBullsEye(Mt,K.truncDivision(gt,2),5);else{De.drawBullsEye(Mt,K.truncDivision(gt,2),7);for(let Nt=0,ge=0;Nt<K.truncDivision(et,2)-1;Nt+=15,ge+=16)for(let he=K.truncDivision(gt,2)&1;he<gt;he+=2)Mt.set(K.truncDivision(gt,2)-ge,he),Mt.set(K.truncDivision(gt,2)+ge,he),Mt.set(he,K.truncDivision(gt,2)-ge),Mt.set(he,K.truncDivision(gt,2)+ge)}let Lt=new vn;return Lt.setCompact(x),Lt.setSize(gt),Lt.setLayers(v),Lt.setCodeWords(q),Lt.setMatrix(Mt),Lt}static drawBullsEye(s,o,c){for(let f=0;f<c;f+=2)for(let d=o-f;d<=o+f;d++)s.set(d,o-f),s.set(d,o+f),s.set(o-f,d),s.set(o+f,d);s.set(o-c,o-c),s.set(o-c+1,o-c),s.set(o-c,o-c+1),s.set(o+c,o-c),s.set(o+c,o-c+1),s.set(o+c,o+c-1)}static generateModeMessage(s,o,c){let f=new At;return s?(f.appendBits(o-1,2),f.appendBits(c-1,6),f=De.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(c-1,11),f=De.generateCheckWords(f,40,4)),f}static drawModeMessage(s,o,c,f){let d=K.truncDivision(c,2);if(o)for(let p=0;p<7;p++){let x=d-3+p;f.get(p)&&s.set(x,d-5),f.get(p+7)&&s.set(d+5,x),f.get(20-p)&&s.set(x,d+5),f.get(27-p)&&s.set(d-5,x)}else for(let p=0;p<10;p++){let x=d-5+p+K.truncDivision(p,5);f.get(p)&&s.set(x,d-7),f.get(p+10)&&s.set(d+7,x),f.get(29-p)&&s.set(x,d+7),f.get(39-p)&&s.set(d-7,x)}}static generateCheckWords(s,o,c){let f=s.getSize()/c,d=new Ms(De.getGF(c)),p=K.truncDivision(o,c),x=De.bitsToWords(s,c,p);d.encode(x,p-f);let v=o%c,b=new At;b.appendBits(0,v);for(const R of Array.from(x))b.appendBits(R,c);return b}static bitsToWords(s,o,c){let f=new Int32Array(c),d,p;for(d=0,p=s.getSize()/o;d<p;d++){let x=0;for(let v=0;v<o;v++)x|=s.get(d*o+v)?1<<o-v-1:0;f[d]=x}return f}static getGF(s){switch(s){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new S("Unsupported word size "+s)}}static stuffBits(s,o){let c=new At,f=s.getSize(),d=(1<<o)-2;for(let p=0;p<f;p+=o){let x=0;for(let v=0;v<o;v++)(p+v>=f||s.get(p+v))&&(x|=1<<o-1-v);(x&d)===d?(c.appendBits(x&d,o),p--):(x&d)===0?(c.appendBits(x|1,o),p--):c.appendBits(x,o)}return c}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}De.DEFAULT_EC_PERCENT=33,De.DEFAULT_AZTEC_LAYERS=0,De.MAX_NB_BITS=32,De.MAX_NB_BITS_COMPACT=4,De.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class jl{encode(s,o,c,f){return this.encodeWithHints(s,o,c,f,null)}encodeWithHints(s,o,c,f,d){let p=Ue.ISO_8859_1,x=De.DEFAULT_EC_PERCENT,v=De.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Tn.CHARACTER_SET)&&(p=an.forName(d.get(Tn.CHARACTER_SET).toString())),d.has(Tn.ERROR_CORRECTION)&&(x=K.parseInt(d.get(Tn.ERROR_CORRECTION).toString())),d.has(Tn.AZTEC_LAYERS)&&(v=K.parseInt(d.get(Tn.AZTEC_LAYERS).toString()))),jl.encodeLayers(s,o,c,f,p,x,v)}static encodeLayers(s,o,c,f,d,p,x){if(o!==Ot.AZTEC)throw new S("Can only encode AZTEC, but got "+o);let v=De.encode(Z.getBytes(s,d),p,x);return jl.renderResult(v,c,f)}static renderResult(s,o,c){let f=s.getMatrix();if(f==null)throw new sr;let d=f.getWidth(),p=f.getHeight(),x=Math.max(o,d),v=Math.max(c,p),b=Math.min(x/d,v/p),R=(x-d*b)/2,P=(v-p*b)/2,L=new Jt(x,v);for(let q=0,$=P;q<p;q++,$+=b)for(let et=0,lt=R;et<d;et++,lt+=b)f.get(et,q)&&L.setRegion(lt,$,b,b);return L}}n.AbstractExpandedDecoder=bs,n.ArgumentException=T,n.ArithmeticException=ls,n.AztecCode=vn,n.AztecCodeReader=ra,n.AztecCodeWriter=jl,n.AztecDecoder=qe,n.AztecDetector=Bl,n.AztecDetectorResult=qa,n.AztecEncoder=De,n.AztecHighLevelEncoder=Qa,n.AztecPoint=Xe,n.BarcodeFormat=Ot,n.Binarizer=z,n.BinaryBitmap=N,n.BitArray=At,n.BitMatrix=Jt,n.BitSource=un,n.BrowserAztecCodeReader=Vl,n.BrowserBarcodeReader=Ya,n.BrowserCodeReader=Vt,n.BrowserDatamatrixCodeReader=ca,n.BrowserMultiFormatReader=ps,n.BrowserPDF417Reader=Fl,n.BrowserQRCodeReader=zl,n.BrowserQRCodeSvgWriter=F,n.CharacterSetECI=V,n.ChecksumException=k,n.Code128Reader=kt,n.Code39Reader=Ke,n.DataMatrixDecodedBitStreamParser=Vi,n.DataMatrixReader=pi,n.DecodeHintType=Rt,n.DecoderResult=vi,n.DefaultGridSampler=oi,n.DetectorResult=Ga,n.EAN13Reader=$e,n.EncodeHintType=Tn,n.Exception=y,n.FormatException=H,n.GenericGF=we,n.GenericGFPoly=Xn,n.GlobalHistogramBinarizer=yt,n.GridSampler=us,n.GridSamplerInstance=Yn,n.HTMLCanvasElementLuminanceSource=J,n.HybridBinarizer=xt,n.ITFReader=Ae,n.IllegalArgumentException=S,n.IllegalStateException=sr,n.InvertedLuminanceSource=$t,n.LuminanceSource=Ft,n.MathUtils=Zt,n.MultiFormatOneDReader=ar,n.MultiFormatReader=Qo,n.MultiFormatWriter=Et,n.NotFoundException=ht,n.OneDReader=Ye,n.PDF417DecodedBitStreamParser=mt,n.PDF417DecoderErrorCorrection=fa,n.PDF417Reader=_n,n.PDF417ResultMetadata=ga,n.PerspectiveTransform=ti,n.PlanarYUVLuminanceSource=Pt,n.QRCodeByteMatrix=Ps,n.QRCodeDataMask=En,n.QRCodeDecodedBitStreamParser=sn,n.QRCodeDecoderErrorCorrectionLevel=je,n.QRCodeDecoderFormatInformation=Vn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=qr,n.QRCodeMaskUtil=Ce,n.QRCodeMatrixUtil=A,n.QRCodeMode=Yt,n.QRCodeReader=Ui,n.QRCodeVersion=Xt,n.QRCodeWriter=ot,n.RGBLuminanceSource=ae,n.RSS14Reader=Le,n.RSSExpandedReader=Ct,n.ReaderException=Ds,n.ReedSolomonDecoder=cs,n.ReedSolomonEncoder=Ms,n.ReedSolomonException=Er,n.Result=zt,n.ResultMetadataType=ce,n.ResultPoint=Ht,n.StringUtils=Z,n.UnsupportedOperationException=tt,n.VideoInputDevice=bt,n.WhiteRectangleDetector=Ar,n.WriterException=Ne,n.ZXingArrays=nt,n.ZXingCharset=an,n.ZXingInteger=K,n.ZXingStandardCharsets=Ue,n.ZXingStringBuilder=Y,n.ZXingStringEncoding=W,n.ZXingSystem=X,n.createAbstractExpandedDecoder=Tr,Object.defineProperty(n,"__esModule",{value:!0})}))})(qu,qu.exports)),qu.exports}var xn=YB();const KB=Y_(xn),WB=hI({__proto__:null,default:KB},[xn]);var F_=(function(){function e(t,n,r){if(this.formatMap=new Map([[Gt.QR_CODE,xn.BarcodeFormat.QR_CODE],[Gt.AZTEC,xn.BarcodeFormat.AZTEC],[Gt.CODABAR,xn.BarcodeFormat.CODABAR],[Gt.CODE_39,xn.BarcodeFormat.CODE_39],[Gt.CODE_93,xn.BarcodeFormat.CODE_93],[Gt.CODE_128,xn.BarcodeFormat.CODE_128],[Gt.DATA_MATRIX,xn.BarcodeFormat.DATA_MATRIX],[Gt.MAXICODE,xn.BarcodeFormat.MAXICODE],[Gt.ITF,xn.BarcodeFormat.ITF],[Gt.EAN_13,xn.BarcodeFormat.EAN_13],[Gt.EAN_8,xn.BarcodeFormat.EAN_8],[Gt.PDF_417,xn.BarcodeFormat.PDF_417],[Gt.RSS_14,xn.BarcodeFormat.RSS_14],[Gt.RSS_EXPANDED,xn.BarcodeFormat.RSS_EXPANDED],[Gt.UPC_A,xn.BarcodeFormat.UPC_A],[Gt.UPC_E,xn.BarcodeFormat.UPC_E],[Gt.UPC_EAN_EXTENSION,xn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!WB)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var l=this.createZXingFormats(t),h=new Map;h.set(xn.DecodeHintType.POSSIBLE_FORMATS,l),h.set(xn.DecodeHintType.TRY_HARDER,!1),this.hints=h}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,l){try{r(n.decode(t))}catch(h){l(h)}})},e.prototype.decode=function(t){var n=new xn.MultiFormatReader(this.verbose,this.hints),r=new xn.HTMLCanvasElementLuminanceSource(t),l=new xn.BinaryBitmap(new xn.HybridBinarizer(r)),h=n.decode(l);return{text:h.text,format:YS.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,l){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,l=t;r<l.length;r++){var h=l[r];this.formatMap.has(h)?n.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),QB=function(e,t,n,r){function l(h){return h instanceof n?h:new n(function(g){g(h)})}return new(n||(n=Promise))(function(h,g){function w(T){try{y(r.next(T))}catch(S){g(S)}}function E(T){try{y(r.throw(T))}catch(S){g(S)}}function y(T){T.done?h(T.value):l(T.value).then(w,E)}y((r=r.apply(e,t||[])).next())})},ZB=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,l,h,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(T){return E([y,T])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(h=y[0]&2?l.return:y[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,y[1])).done)return h;switch(l=0,h&&(y=[y[0]&2,h.value]),y[0]){case 0:case 1:h=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!h||y[1]>h[0]&&y[1]<h[3])){n.label=y[1];break}if(y[0]===6&&n.label<h[1]){n.label=h[1],h=y;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(y);break}h[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(T){y=[6,T],l=0}finally{r=h=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},z_=(function(){function e(t,n,r){if(this.formatMap=new Map([[Gt.QR_CODE,"qr_code"],[Gt.AZTEC,"aztec"],[Gt.CODABAR,"codabar"],[Gt.CODE_39,"code_39"],[Gt.CODE_93,"code_93"],[Gt.CODE_128,"code_128"],[Gt.DATA_MATRIX,"data_matrix"],[Gt.ITF,"itf"],[Gt.EAN_13,"ean_13"],[Gt.EAN_8,"ean_8"],[Gt.PDF_417,"pdf417"],[Gt.UPC_A,"upc_a"],[Gt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var l=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return QB(this,void 0,void 0,function(){var n,r;return ZB(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:YS.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,l=0,h=t;l<h.length;l++){var g=h[l],w=g.boundingBox.width*g.boundingBox.height;w>r&&(r=w,n=g)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,l=t;r<l.length;r++){var h=l[r];this.formatMap.has(h)?n.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,l){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),H_=function(e,t,n,r){function l(h){return h instanceof n?h:new n(function(g){g(h)})}return new(n||(n=Promise))(function(h,g){function w(T){try{y(r.next(T))}catch(S){g(S)}}function E(T){try{y(r.throw(T))}catch(S){g(S)}}function y(T){T.done?h(T.value):l(T.value).then(w,E)}y((r=r.apply(e,t||[])).next())})},j_=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,l,h,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(T){return E([y,T])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(h=y[0]&2?l.return:y[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,y[1])).done)return h;switch(l=0,h&&(y=[y[0]&2,h.value]),y[0]){case 0:case 1:h=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!h||y[1]>h[0]&&y[1]<h[3])){n.label=y[1];break}if(y[0]===6&&n.label<h[1]){n.label=h[1],h=y;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(y);break}h[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(T){y=[6,T],l=0}finally{r=h=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},JB=(function(){function e(t,n,r,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&z_.isSupported()?(this.primaryDecoder=new z_(t,r,l),this.secondaryDecoder=new F_(t,r,l)):this.primaryDecoder=new F_(t,r,l)}return e.prototype.decodeAsync=function(t){return H_(this,void 0,void 0,function(){var n;return j_(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return H_(this,void 0,void 0,function(){var n,r;return j_(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,l.sent()];case 3:if(r=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var l=r[n];t+=l}var h=t/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),Dy=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(r[h]=l[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Wd=function(e,t,n,r){function l(h){return h instanceof n?h:new n(function(g){g(h)})}return new(n||(n=Promise))(function(h,g){function w(T){try{y(r.next(T))}catch(S){g(S)}}function E(T){try{y(r.throw(T))}catch(S){g(S)}}function y(T){T.done?h(T.value):l(T.value).then(w,E)}y((r=r.apply(e,t||[])).next())})},Qd=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,l,h,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(T){return E([y,T])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(h=y[0]&2?l.return:y[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,y[1])).done)return h;switch(l=0,h&&(y=[y[0]&2,h.value]),y[0]){case 0:case 1:h=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!h||y[1]>h[0]&&y[1]<h[3])){n.label=y[1];break}if(y[0]===6&&n.label<h[1]){n.label=h[1],h=y;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(y);break}h[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(T){y=[6,T],l=0}finally{r=h=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},WS=(function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e})(),$B=(function(e){Dy(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var l={advanced:[r]};return this.track.applyConstraints(l)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(WS),tV=(function(e){Dy(t,e);function t(n){return e.call(this,"zoom",n)||this}return t})($B),eV=(function(e){Dy(t,e);function t(n){return e.call(this,"torch",n)||this}return t})(WS),nV=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new tV(this.track)},e.prototype.torchFeature=function(){return new eV(this.track)},e})(),iV=(function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,l=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,l),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,l){return Wd(this,void 0,void 0,function(){var h,g;return Qd(this,function(w){switch(w.label){case 0:return h=new e(t,n,l),r.aspectRatio?(g={aspectRatio:r.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:w.sent(),w.label=2;case 2:return h.setupSurface(),[2,h]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Wd(this,void 0,void 0,function(){return Qd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var l=t.mediaStream.getVideoTracks(),h=l.length,g=0;t.mediaStream.getVideoTracks().forEach(function(w){t.mediaStream.removeTrack(w),w.stop(),++g,g>=h&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new nV(this.getFirstTrackOrFail())},e})(),rV=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Wd(this,void 0,void 0,function(){return Qd(this,function(l){return[2,iV.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Wd(this,void 0,void 0,function(){var n,r;return Qd(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=l.sent(),[2,new e(r)]}})})},e})(),G_=function(e,t,n,r){function l(h){return h instanceof n?h:new n(function(g){g(h)})}return new(n||(n=Promise))(function(h,g){function w(T){try{y(r.next(T))}catch(S){g(S)}}function E(T){try{y(r.throw(T))}catch(S){g(S)}}function y(T){T.done?h(T.value):l(T.value).then(w,E)}y((r=r.apply(e,t||[])).next())})},q_=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,l,h,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(T){return E([y,T])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(h=y[0]&2?l.return:y[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,y[1])).done)return h;switch(l=0,h&&(y=[y[0]&2,h.value]),y[0]){case 0:case 1:h=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!h||y[1]>h[0]&&y[1]<h[3])){n.label=y[1];break}if(y[0]===6&&n.label<h[1]){n.label=h[1],h=y;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(y);break}h[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(T){y=[6,T],l=0}finally{r=h=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},sV=(function(){function e(){}return e.failIfNotSupported=function(){return G_(this,void 0,void 0,function(){return q_(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return G_(this,void 0,void 0,function(){return q_(this,function(n){return[2,rV.create(t)]})})},e})(),aV=function(e,t,n,r){function l(h){return h instanceof n?h:new n(function(g){g(h)})}return new(n||(n=Promise))(function(h,g){function w(T){try{y(r.next(T))}catch(S){g(S)}}function E(T){try{y(r.throw(T))}catch(S){g(S)}}function y(T){T.done?h(T.value):l(T.value).then(w,E)}y((r=r.apply(e,t||[])).next())})},oV=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,l,h,g;return g={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function w(y){return function(T){return E([y,T])}}function E(y){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(r=1,l&&(h=y[0]&2?l.return:y[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,y[1])).done)return h;switch(l=0,h&&(y=[y[0]&2,h.value]),y[0]){case 0:case 1:h=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!h||y[1]>h[0]&&y[1]<h[3])){n.label=y[1];break}if(y[0]===6&&n.label<h[1]){n.label=h[1],h=y;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(y);break}h[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(T){y=[6,T],l=0}finally{r=h=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},lV=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=bc.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=bc.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return aV(this,void 0,void 0,function(){var t,n,r,l,h,g,w;return oV(this,function(E){switch(E.label){case 0:return t=function(y){for(var T=y.getVideoTracks(),S=0,N=T;S<N.length;S++){var k=N[S];k.enabled=!1,k.stop(),y.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=E.sent(),l=[],h=0,g=r;h<g.length;h++)w=g[h],w.kind==="videoinput"&&l.push({id:w.deviceId,label:w.label});return t(n),[2,l]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(h){for(var g=[],w=0,E=h;w<E.length;w++){var y=E[w];y.kind==="video"&&g.push({id:y.id,label:y.label})}t(g)},l=MediaStreamTrack;l.getSources(r)})},e})(),jn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(jn||(jn={}));var cV=(function(){function e(){this.state=jn.NOT_STARTED,this.onGoingTransactionNewState=jn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===jn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=jn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===jn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=jn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==jn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case jn.UNKNOWN:throw"Transition from unknown is not allowed";case jn.NOT_STARTED:this.failIfNewStateIs(t,[jn.PAUSED]);break;case jn.SCANNING:break;case jn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,l=n;r<l.length;r++){var h=l[r];if(t===h)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),uV=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===jn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==jn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===jn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===jn.PAUSED},e})(),hV=(function(){function e(){}return e.create=function(){return new uV(new cV)},e})(),fV=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,l){r.__proto__=l}||function(r,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(r[h]=l[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ur=(function(e){fV(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(jB),dV=(function(){function e(t,n){this.logger=n,this.fps=Ur.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Ur.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?KS.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Da(this.qrbox)},e.create=function(t,n){return new e(t,n)},e})(),gV=(function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new qB(this.verbose),this.qrcode=new JB(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=hV.create()}return e.prototype.start=function(t,n,r,l){var h=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;l?g=l:g=this.verbose?this.logger.log:function(){};var w=dV.create(n,this.logger);this.clearElement();var E=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=E,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:Ur.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var S=this,N=this.stateManagerProxy.startTransition(jn.SCANNING);return new Promise(function(k,z){var X=y?w.videoConstraints:S.createVideoConstraints(t);if(!X){N.cancel(),z("videoConstraints should be defined");return}var G={};(!y||w.aspectRatio)&&(G.aspectRatio=w.aspectRatio);var it={onRenderSurfaceReady:function(nt,K){S.setupUi(nt,K,w),S.isScanning=!0,S.foreverScan(w,r,g)}};sV.failIfNotSupported().then(function(nt){nt.create(X).then(function(K){return K.render(h.element,G,it).then(function(At){S.renderedCamera=At,N.execute(),k(null)}).catch(function(At){N.cancel(),z(At)})}).catch(function(K){N.cancel(),z(bc.errorGettingUserMedia(K))})}).catch(function(nt){N.cancel(),z(bc.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(jn.PAUSED),this.showPausedState(),(Da(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(jn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(jn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var h=document.getElementById(Ur.SHADED_REGION_ELEMENT_ID);h&&t.element.removeChild(h)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),r(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Da(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,h){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var g=new Image;g.onload=function(){var w=g.width,E=g.height,y=document.getElementById(r.elementId),T=y.clientWidth?y.clientWidth:Ur.DEFAULT_WIDTH,S=Math.max(y.clientHeight?y.clientHeight:E,Ur.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(w,E,T,S);if(n){var k=r.createCanvasElement(T,S,"qr-canvas-visible");k.style.display="inline-block",y.appendChild(k);var z=k.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=T,z.canvas.height=S,z.drawImage(g,0,0,w,E,N.x,N.y,N.width,N.height)}var X=Ur.FILE_SCAN_HIDDEN_CANVAS_PADDING,G=Math.max(g.width,N.width),it=Math.max(g.height,N.height),nt=G+2*X,K=it+2*X,At=r.createCanvasElement(nt,K);y.appendChild(At);var wt=At.getContext("2d");if(!wt)throw"Unable to get 2d context from canvas";wt.canvas.width=nt,wt.canvas.height=K,wt.drawImage(g,0,0,w,E,X,X,G,it);try{r.qrcode.decodeRobustlyAsync(At).then(function(Rt){l(V_.createFromQrcodeResult(Rt))}).catch(h)}catch(Rt){h("QR code parse error, error = ".concat(Rt))}},g.onerror=h,g.onabort=h,g.onstalled=h,g.onsuspend=h,g.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return lV.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!KS.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Gt.QR_CODE,Gt.AZTEC,Gt.CODABAR,Gt.CODE_39,Gt.CODE_93,Gt.CODE_128,Gt.DATA_MATRIX,Gt.MAXICODE,Gt.ITF,Gt.EAN_13,Gt.EAN_8,Gt.PDF_417,Gt.RSS_14,Gt.RSS_EXPANDED,Gt.UPC_A,Gt.UPC_E,Gt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],l=0,h=t.formatsToSupport;l<h.length;l++){var g=h[l];HB(g)?r.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Da(t))return!0;if(!Da(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Da(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Da(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var l=this,h=r.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(t,n,h),w=function(y){if(y<Ur.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ur.MIN_QR_BOX_SIZE,"px.")},E=function(y){return y>t&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};w(g.width),w(g.height),g.width=E(g.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var l=Da(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(t,n,l);h.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=r.isShadedBoxEnabled()&&h.height<=n,w={x:0,y:0,width:t,height:n},E=g?this.getShadedRegionBounds(t,n,h):w,y=this.createCanvasElement(E.width,E.height),T={willReadFrequently:!0},S=y.getContext("2d",T);S.canvas.width=E.width,S.canvas.height=E.height,this.element.append(y),g&&this.possiblyInsertShadingElement(this.element,t,n,h),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=S,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=bc.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return t(l.text,V_.createFromQrcodeResult(l)),r.possiblyUpdateShaders(!0),!0}).catch(function(l){r.possiblyUpdateShaders(!1);var h=bc.codeParseError(l);return n(h,GB.createFrom(h)),!1})},e.prototype.foreverScan=function(t,n,r){var l=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),g=h.videoWidth/h.clientWidth,w=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*g,y=this.qrRegion.height*w,T=this.qrRegion.x*g,S=this.qrRegion.y*w;this.context.drawImage(h,T,S,E,y,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(t,n,r)},l.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(k){!k&&t.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,r).finally(function(){N()})):N()}).catch(function(k){l.logger.logError("Error happend while scanning context",k),N()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",l={user:!0,environment:!0},h="exact",g=function(z){if(z in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},w=Object.keys(t);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var E=Object.keys(t)[0];if(E!==n&&E!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(E===n){var y=t.facingMode;if(typeof y=="string"){if(g(y))return{facingMode:y}}else if(typeof y=="object")if(h in y){if(g(y["".concat(h)]))return{facingMode:{exact:y["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var T=typeof y;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var S=t.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(h in S)return{deviceId:{exact:S["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var N=typeof S;throw"Invalid type of 'deviceId' = ".concat(N)}}}var k=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},e.prototype.computeCanvasDrawConfig=function(t,n,r,l){if(t<=r&&n<=l){var h=(r-t)/2,g=(l-n)/2;return{x:h,y:g,width:t,height:n}}else{var w=t,E=n;return t>r&&(n=r/t*n,t=r),n>l&&(t=l/n*t,n=l),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(E)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,l)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Ur.BORDER_SHADER_MATCH_COLOR:Ur.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var l=t,h=n,g=document.createElement("canvas");return g.style.width="".concat(l,"px"),g.style.height="".concat(h,"px"),g.style.display="none",g.id=Da(r)?"qr-canvas":r,g},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,l){if(!(n-l.width<1||r-l.height<1)){var h=document.createElement("div");h.style.position="absolute";var g=(n-l.width)/2,w=(r-l.height)/2;if(h.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Ur.SHADED_REGION_ELEMENT_ID),n-l.width<11||r-l.height<11)this.hasBorderShaders=!1;else{var E=5,y=40;this.insertShaderBorders(h,y,E,-E,null,0,!0),this.insertShaderBorders(h,y,E,-E,null,0,!1),this.insertShaderBorders(h,y,E,null,-E,0,!0),this.insertShaderBorders(h,y,E,null,-E,0,!1),this.insertShaderBorders(h,E,y+E,-E,null,-E,!0),this.insertShaderBorders(h,E,y+E,null,-E,-E,!0),this.insertShaderBorders(h,E,y+E,-E,null,-E,!1),this.insertShaderBorders(h,E,y+E,null,-E,-E,!1),this.hasBorderShaders=!0}t.append(h)}},e.prototype.insertShaderBorders=function(t,n,r,l,h,g,w){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=Ur.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(n,"px"),E.style.height="".concat(r,"px"),l!==null&&(E.style.top="".concat(l,"px")),h!==null&&(E.style.bottom="".concat(h,"px")),w?E.style.left="".concat(g,"px"):E.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),t.appendChild(E)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),X_;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(X_||(X_={}));function mV({onScan:e}){const t=st.useRef(null),n=st.useRef(!1),[r,l]=st.useState(!1);return st.useEffect(()=>{const h="reader",g=async()=>{const E=new gV(h);t.current=E;try{await E.start({facingMode:"environment"},{fps:10,qrbox:250},async y=>{try{const T=JSON.parse(y);console.log("掃描結果:",T),e(T),await w(),l(!1)}catch(T){console.error("QR Code 不是 JSON 格式",T)}},y=>{})}catch(y){console.error("啟動 QRScanner 失敗",y),l(!1)}},w=async()=>{if(n.current)return;n.current=!0;const E=t.current;if(!E){n.current=!1;return}try{await E.getState()==="SCANNING"&&await E.stop(),await E.clear()}catch(y){console.warn("停止/清理掃描器失敗",y)}finally{t.current=null,n.current=!1}};return r?g():w(),()=>{w()}},[r,e]),Tt.jsxs("div",{className:"flex flex-col items-center",children:[Tt.jsx("button",{onClick:()=>l(h=>!h),className:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition",children:r?"關閉掃描":"開啟相機掃描"}),Tt.jsx("div",{id:"reader",className:`mt-2 w-64 h-64 bg-gray-100 rounded-lg ${r?"":"hidden"}`})]})}const pV=new Oa,Jf={zh:{loginBtn:"使用 Google 登入",logoutBtn:"登出",scores:"🏆 積分",name:"名字",title:"職稱",years:"年資",factory:"工廠",phone:"電話",birthday:"生日"},en:{loginBtn:"Sign in with Google",logoutBtn:"Logout",scores:"🏆 Scores",name:"Name",title:"Title",years:"Years",factory:"Factory",phone:"Phone",birthday:"Birthday"}};function yV({lang:e="zh"}){const[t,n]=st.useState(null),[r,l]=st.useState(null),[h,g]=st.useState(null),[w,E]=st.useState(!1),[y,T]=st.useState(null);st.useEffect(()=>{const X=gv(hd,async G=>{if(G){n(G);const it=No(Do,"profiles",G.uid),nt=await Vd(it);nt.exists()&&l(nt.data())}else n(null),l(null)});return()=>X()},[]);const S=async()=>{try{const G=(await oD(hd,pV)).user;n(G);const it=No(Do,"profiles",G.uid),nt=await Vd(it);if(nt.exists())l(nt.data());else{const K={name:G.displayName||"",title:"",years:0,factory:"",phone:"",birthday:"",email:G.email||"",photoURL:G.photoURL||"",createdAt:A9(),scores:0};await y9(it,K),l(K)}}catch(X){console.error("登入失敗",X)}},N=async()=>{try{await zN(hd),n(null),l(null)}catch(X){console.error("登出失敗",X)}},k=async(X,G)=>{if(!t)return;const it=No(Do,"profiles",t.uid);let nt=G;(X==="years"||X==="phone")&&(nt=G.replace(/\D/g,"")),await Ud(it,{[X]:nt}),l(K=>({...K,[X]:nt})),g(null)},z=(X,G,it="text")=>{const nt=Jf[e][G]||G;return h===X?Tt.jsx("input",{type:it,value:r?.[X]||"",onChange:K=>l(At=>({...At,[X]:K.target.value})),onBlur:K=>k(X,K.target.value),onKeyDown:K=>K.key==="Enter"&&k(X,K.target.value),autoFocus:!0,className:"field-input"}):Tt.jsx("p",{className:"field-text",onClick:()=>g(X),children:r?.[X]||nt})};return Tt.jsx("div",{className:"page-container",children:t?Tt.jsxs("div",{className:"card-container",children:[Tt.jsxs("div",{className:"profile-header",children:[Tt.jsx("img",{src:r?.photoURL||t.photoURL,alt:"avatar",className:"avatar"}),Tt.jsxs("div",{className:"profile-info",children:[Tt.jsx("h2",{children:z("name","name")}),Tt.jsx("p",{className:"email",children:r?.email||t.email}),z("title","title"),z("years","years"),z("factory","factory"),z("phone","phone"),z("birthday","birthday"),Tt.jsxs("p",{children:[Jf[e].scores,": ",r?.scores||0]})]})]}),Tt.jsxs("div",{className:"card-buttons",children:[Tt.jsx("button",{onClick:()=>E(X=>!X),children:w?"隱藏 QR Code":"產生 QR Code"}),w&&Tt.jsx(zB,{profile:r}),Tt.jsx(mV,{onScan:T}),y&&Tt.jsx("pre",{className:"scan-result",children:JSON.stringify(y,null,2)}),Tt.jsx("button",{onClick:N,children:Jf[e].logoutBtn})]})]}):Tt.jsx("button",{className:"login-btn",onClick:S,children:Jf[e].loginBtn})})}const EV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAClCAYAAADvezeCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAACdhJREFUeF7t3XtwVFcBx/HvPpJAAuRBIAGa8ihICRSE2oLWqdJ2yihWq0il4uCgte2Io+PgqH+go305Y8vUsepotTroKDNW6Wgr09IK2GkZi7VTwIQaqS3hkRATkkAePJJd/zi7hZwl2YTs3nv37O/T+c225yzTzb2/DefuvbsbQbwyF9gOtAJvWHMiOe2jwCkgnsiDQHjAPURyUBj4DqbU5xO3ybwAlL1zT5EcUwo8zaXLncwRoDb5B0RyRS3wb0yJY4nbwXIG+KT5YyLB9wmgi/TFtvN9IIJIQEWABzBl7UvcjjS7gHJEAqYc8xLgaMqdzDHgGkQCYgFwiNSijiZngU8h4rPVQDcjX28PN5vRulx8EAG+hynhaJck6fIiMBERj1QAz2HK15+4zXaOA4sQybKFwFukFtCLnAM+jUiWrAF6yN56e7j5ARBFJEOiwMOYcnm1JEmXl4FKREapEnNRVBz/f3PbaQaWIHKZFgOHSS1WkHIeWIfICK3FXAQVtN/ag+VHQAEiaUSBRzGlCcp6e7j5OzAZkUFMwlzsZBcnl/I/4D2IWK7FvPnALkwu5jywHpGEdZiLm3JlvT3c/BSty/NaAfBDTBlcK3cye4EqJO9UYS5isgvhYlqBpUjeuA7zpgK7CC6nD7gLcd7ncHO9Pdz8AihEnFMI/ASzk/O13Mn8E5iCOKMac3GSvaPzOW3A+5CctwxzUZK9gxWzLr8XyVlfwJz0yPclSbr8CihCckYR8DNSd6QyeF4HpiGBNxV4hdQdqKRPO/B+JLBuAFpI3XHK8NMPbABCSGCEMAdLWm9nLr8BxiC+GwM8QeoOUkaf/UAN4psrgFdJ3TFK5tIBfADx3I2YkxX2DlEynxjwFbQu90QI+BLmJIXW295mKzAWyZqxwBZSN7ziXeqA6UjGXYk5GWFvcMX7dALLkYz5IOYkhL2hFf8SAzaidfmohDAHN7n28Q35lCeBYmTEioHfkrpBleDlIDATGbYZmIMZe0MqwU0XcAuS1s2YjWVvQCX4iQFfR+vySwoBX0OvbbuQp4AS5B0lmIMVe0MpuZtDwFUIszAHKfYGUnI/XcAKfObnV9Tdivmwy6n2hDihEPgM5jLml6w5p4WAb6L1dj7lT8A48sA4zEGIvQEU93MImIPDZgMNpP7gSv6kG/gwHvJqDf4hYCfmQ3gkfxVgvh4mhlmXxwdO554QsInUZ7KiPAOMJ4eNx/wQ9g+mKMn8F5hLDpqDefD2D6QodnqA28iSbKzBP4JZb0+yJ0QuoQC4Ewhz4UsJAikM3EfqM1RRhptngVICaALwHKkPWFFGmsPAPALkaqCR1AeqKJebXuB2MmC0a/DbgReACntCZBSiwBrM9Sy7MaX3VBh4iNRnnqJkOs8DZVymy3n3RRmwDX10gHjnCOZseJ09kU7YHkijFvM/UbnFSzWYL89aZU+kM5I1+CpG+deFyChEgTswn7iwC7N8yYgI8AipayNF8Ss7gXKGId0avBz4M/pqCwmeY5h1+QF74mJDrcEXYN4vqXJLEE3DfD78HfbExQZbg6/BnDadYE+IBEgEWI3p6U7MdeZDigCPkbrmUZSg50VgIpaL1+AVwHZg6UVjIrmkCfOWuNeTA8mCLwT2JQdFctxa4HdgliRrgKcx1+WKuGAViXV5CG9P3CzGHAxIftpA4jerR7qimK+K88ppe0DySg/e9m3I18FFcp4KLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4TQUXp6ng4jQVXJymgovTVHBxmgouTlPBxWkquDhNBRenqeDiNBVcnKaCi9NUcHFa1B6QIYSgatYErlw4kZKKMUSiIfseGRfrj9PdcY6jdSdpeqODeDxu30WGoIIP06QZ47n5nvlUv6vUnvJMW2MXOx+v59jBdntKBqGCD8Os6yazcuMiCgoLWD5nFQun3UB58WSi4QL7rhnXH+un80wr9U172RHeyur7r2fHj/9F/a5j9l3lElTwNCqnj2flxkVUldXw+fd+m+oJ0+27ZN24olKmlV7FkprlbHnlQW7dAKdaejlad9K+q1h0kJnG8rvmES2Isn7ZJl/KfbGJJdWsX/YtCiJF3HR3LaFw9o8Bcp0KPoSKK0qYVlvOjbM/xtTSmfa0L8qLJ7Oidq15bPPK7WmxqOBDqFkwEYD5U5ZaM/6aX70MgJprKqwZsangQygpLwSgbOwka8ZfZWMrASgpL7JmxKaCDyEcMZsnEg7WsXg08XjCUe2+dLSFxGkquDhNBRenqeDiNBVcnKaCi9NUcHGaCi5OU8HFaSq4OE0FF6ep4OI0FVycpoKL01RwcZoKLk5TwcVpKrg4zeuCxxK3+vyx/JTc/57xuuDdiVvPf1AJhC57INu8LnhH4rZvwKjki057INu8LngL5lmsguenN+2BbPO64HGgHojYE+K8c8ARezDbvC44wLPAGHtQnPc80G8PZpsfBX/KHpC88KQ94AU/Cr4POAz02hPirBjwjD3oBT8KHsc8m8faE+KkOPA3oM2e8IIfBQd4BPOa+Dl7QpwTAjbZg17xq+AngIcB8/Gt4qo45phrjz3hFb8KDrAZ87r4eXtCnBEDvmEPesnPgncBXwQK0Kl7V90H/Mce9JKfBQf4I2Yj+P04JPO2AQ/Yg14LQrG+iyl64MRi5qLH/liwrizoj5vzJfH+QP7FFwMOAOsS/+6rIBQ8BnwW2GVP+K27/SwAnb2+vMI1qM7eVuDC4wuQOOZ6k9u4cOWor4JQcDAbYwXwWOK/A3G9+LF6843CB0/8w5rxV32zeTxH6wL3jcc7gOsxJ/ICISgFB/NqypeBuzG/1X0veWvjaZobOtndsI0TpxvtaV909raxve7XdDT1BOWLYJPLkM3ASi5cEh0IQbyq7zXg98B0YC6m6L5942nL26eovWkqb7Ye4OqqaykuHG/fxTOdZ9rYsvch2rqb2P7oPjqaeuy7eCm5X14D7gR+nhgLlCAWHKAV2ArsBt4NTBkw66Hu9rO0H++mevEY9rz1FwiFKCkspTBSRCgUIp7lf/pifZzsaebVxr/yyz3309Z9nF1PHKThpWb7oXrtCHAP8FXg7YFTweHbb8YRCAELgY8Dq4HagdPeqJ5Tyi33LqByxjh7yjOdzb3sfLyOw/t8O+g9AvyBC2cnPb/8daRyoeC2mcASzPKlCijFo+vLQ5FQaPbSqsoZiyurx5UXFYcLwlk/hon1x+I97ed6Gve3tTS83NTS3xf36qW385i3mLUCDcB+oI4ALkOG8n8uq3EDMZcE5gAAAABJRU5ErkJggg==",AV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACVCAYAAAC3i3MLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAC3pJREFUeF7t3VtsFPcVx/GvbwJaau4LTbiYWk2NoUppaFGJEdSAwgsuyKFNWpQ+VKnSpFUieGmblqhKmqhCLg2xo9L2pSBHbbiYSoWYu6FEfQA5ESUJ4BgnLpes8YIdG3zdnT5MQcqZWe/M/nf2Ys5HOi9n7P3Pf/bnmZ3ZWW8e6TUBqASWAPOBB4BJQDEwBHQD14D3gbPAMeAdIMq9pwBYDCwHvgqUA9Oxt2EB9ra6AVwA3gNOAU3ALUaZscD3gSPAMGD5rE6gFvga94ZvAX8BbuLcFolqAPgnsA4oIscVAD/C3qPIiSZbb2H/JY5Gi4B/4ZxzstUGfI8cVQm8i3NSqahhoA6YyuhwP7ADiOGcayrqbeCb5Ihi4E2ckwiiuoAfkNt+iv2aRc4t1RUD/gyMIYuVAP/BufJB12+BfHJLIfBHnHMJut4GQmShCuA6zhVOV+0FxpMbJgFHcc4hXfUR9lld1lgLDOJc0XRXM/Ypbjabjn3aLdc93dUDLCULfB24jXMFM1VvYR8estEY4N841zlTdR2YSwZ9EbiMc8UyXVvJTjtxrmum6xz2iU/S8mTDo3HACeAbckEiJSUlrF69mpUrVzJ37lxCoRBTp05lYGCAjo4OwuEwzc3NNDY20tTURF9fn3wIL36MfdaRLX4BvCybiRQXF1NZWckjjzzCgw8+SCgUIhQKUVRUREdHB9evX+fDDz/k0KFDHDx4kCtXrsiH8OIAsAb7TC1ttuBM84i1YsUK6+TJk1YsFrO86u3ttWpqaqxQKOR4vAQ1CHyZ7LAIn9d45syZY23fvt0aGBiQm2REBw8etJYsWeJ4PA+1kTQqxb5kLlfCtaZPn24dOXJEztWXW7duWRs3bnQ8doLaR3bwfHU5Pz/feumll6zBwUG5CXzZt2+fNXHiRMfjj1A3SeOF2V04V8C1HnroIau9vV3OL2k7d+60xo4d6xhnhPo2mbUe5zq51oQJE6z9+/fLKSft4sWL1rx58xzjjFC1pEEFzoFdq6yszOru7pbzMtbQ0OAYa4R6F/s9uUwYA1zCuU6OKioqsk6ePCmnaiwcDlszZ850jBenhoB5BOwYzoEdVVxcbJ0/f17OJ2VeeOEFx5gj1HfJjJ/gXBfXqq2tlVNMmdOnT/vZa/8dn/ychT2AfREsobq6Op5++mnZTplYLMbChQs5e/asXOTmMPBD4EvADPzN2a8YcBVoBQ7h4RaUyspKjh49Ktsp9eKLL7J582bZdjOI/eZup1yQCi/jTKyjZs+ebfX398s/hJTbs2ePY+xcrFOnTsmppVx3d7c1efJkx9hx6mcE5B2cgznqtddek+sfiGg0apWVlTnGz6Vavny5nFZgfBz238IHr+9iT8PD7hhg7dq1shWI/Px8qqqqZDunpHP9fYy1jABu+1iFM6mOmj9/vgx+oI4dO+ZYh1yqc+fOySkFJhaLWdOmTXOsQ5zytLMA73ug+bLhpqKiQrYCtWTJEvLygnxNHJxJkyYxf76nzZoSeXl5PPzww7Idj+cV8xqgObLh5r777pOtQI0ZM4YpU6bIdk6YMWOGbAXOx5izZSMerwHydJ9NKJT+m90yMWYqZGK9fYz5BdmIx2uAPi8bboqLje4MSMrkyZNlKydkYr0nTpwoW/F8Tjbi8RqgXtlw09XVJVuBKyjI1DsVZvLzvW761Llx44ZsxeP5w4le797rlg03HR0dspU1ysrKKC8vD/RFt2VZnDlzhvb2drkoK/h4fnpkIx6vAWqTDTdJ3tCUFk8++SQbNwZ/28tzzz3Hq6++KttZ4dq1a7IVj6fnG7wfwt6TDTcnTpyQrayRrkNGYaHXv8n0isVinDp1SrbjeV824vG6Ve+8jTGilpYWLl26JNsqC5w+fZqbN2/Ktpte4LxsxuM1QDeB07LpZs+ePbKlskBDQ4NsxXMM+94gT7wGCOybrxOqqanh9u3bsq0yKBKJ8Prrr8t2PPtlYyR+AvRXPBzGwuEwdXV1sq0yaMuWLfT0eDqx6sPnTWV+AvQR0CibbjZv3kxzc7NsqwxoamqipqZGtuN5E4+XbO7wEyCAX+FhL9Tf38+6dev8XHdQAfj4449Zv349w8PDcpGbAeA3spmI3wA1Y/8vm4Ta29upqKjggw8+kItUGpw5c4aKigo6Oz3fnfoHfFz/ucNvgACexz5WJtTS0sLixYupr68nFkvrBx/vWdFolO3bt7N06VIuX74sF8fTQRKfnIXkAnQF+J1sxtPT08OGDRtYuHAhe/fu9bo7VT4NDQ1RX19PeXk5Tz31FP39/fJHRvJr4FPZ9KKQ5D6R+CdgBT7+RcjZs2eprq5mwoQJrFy5klWrVlFSUkIoFGLatGmMHTtW/oonPnbRWaWzszPpde/v7yccDn/ms/HHjx+nt9fTe97S3v9XMjnoBOftjKOytm7dKu/yDMSmTZscY4/iSuoQptRdGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGfF8A2+qPgE6PDzM0NAQ0WiUaDSKZVl3Kxlefy9d9yr7GSfZT4jk5eXdrYKCAgoLC+9WKkQiEdmKy/OIyV52D9ry5cs93cy/YMEC2QrEokWLZMtVdXU1u3fvlu2s4CfYeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBHP/x+otrZWtrJCNn9T9EhaW1uzdpv6Jf99/ais48ePf+YrCYKya9cux9ijuPQQpsxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlpBCok00fSoHVsimVlpayenXCH0tKQ0MDV69ele2sF+Q2aWxspLW1VbbdNAKefjAoj+K8Oumo6upqecE2ZZYtW+YYz62y7Up0kNukurraMV6cehRDeghTRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSMaIGVEA6SMaICUEQ2QMqIBUkY0QMqIBkgZ0QApIxogZUQDpIxogJQRDZAyogFSRjRAyogGSBnRACkjGiBlRAOkjGiAlBENkDKiAVJGNEDKiAZIGdEAKSOmAeqXDTeDg4OypQI0MDAgW/H0yYZfpgG6LBtuIpGIbKkA+djenp6/kaQlQG1tbViWJdsqAJZl0dbWJtvxeHr+RmIaoAgedoPXrl2jpaVFtlUALl68yCeffCLbbvqAG7Lpl2mALKBJNt3U19fLlgrAG2+8IVvxHMd+/oyYBgjgb7LhZtu2bX6OzSoJkUiEbdu2yXY8np63RFIRoH8ACU+zurq6ePzxx4lGo3KRSoFoNMpjjz1GV1eXXORmAPt5M5aKAHUDu2XTzeHDh6mqqvI6SU/Gjx8vW66GhoZkKxBeT6GLi4tlK2ldXV2sWbOGI0eOyEXx7AY+lc1keP7e+ASeB6qBMXKBdODAAebNm8emTZt44oknCIVC8kd8KSkpkS1XGzZsYOrUqeTl5clFKROLxQiHw7Ltau7cubLlW0dHBzt27KCmpsbrC2ew9z7Py2ayUrk1XwF+LpuJLFiwgNLSUqZMmcK4cePk4oQuXLjg5y8va1RVVTFr1izZTqivr49IJEJrayvnzp2Ti714BfilbCYrlQEqBt4H7pcLVNa4DJQDPXJBslLxGuiOT4Eq4LZcoLLCbeA7pDA8QVmH84vNtDJbMWAtOeRZnJPQylw9Sw56FHu3KSejlb66TQq+1jKTFgFXcU5MK/i6ir39c94kYCswhHOSWqmvIeD32Nt9VPkKsA/7BZ2ctJZ5RbG37wOMcjOAZ4CTaJhMK4a9HZ/B3q5pl8oLickYB8wEZgOzAG9vbN3beoH/Au3YFwYT3o8VpP8BOx/K48GQwasAAAAASUVORK5CYII=",xV="/basecamp-app/assets/setting_icon-fnFuyX_C.png",wV={zh:[{title:"公司環境",path:"/explore"},{title:"交通資訊",path:"/info"},{title:"社交任務",path:"/social"},{title:"獎勵兌換",path:"/rewards"},{title:"個人資訊",path:"/settings"}],en:[{title:"Environment",path:"/explore"},{title:"Transport Info",path:"/info"},{title:"Social Tasks",path:"/social"},{title:"Rewards",path:"/rewards"},{title:"Profile",path:"/settings"}]};function _V({lang:e}){const t=wV[e],n=[{title:e==="zh"?"公司生活":"Company Life",items:t.slice(0,2),icons:[EV]},{title:e==="zh"?"社交獎勵":"Social & Rewards",items:t.slice(2,4),icons:[AV]},{title:e==="zh"?"設定":"Settings",items:t.slice(4,5),icons:[xV]}];return Tt.jsxs("div",{className:"home-container",children:[Tt.jsx("h1",{children:"BaseCamp"}),Tt.jsx("div",{className:"menu-container",children:n.map((r,l)=>Tt.jsxs("div",{className:"menu-row-wrapper",children:[Tt.jsxs("div",{className:"menu-row-title",children:[Tt.jsx("div",{className:"row-icons",children:r.icons.map((h,g)=>Tt.jsx("img",{src:h,alt:`icon-${g}`,className:"row-icon"},g))}),Tt.jsx("span",{className:"row-title-text",children:r.title})]}),Tt.jsx("div",{className:"menu-row",children:r.items.map((h,g)=>Tt.jsx($d,{to:h.path,className:"menu-button",children:h.title},g))})]},l))})]})}function TV(){const[e,t]=st.useState("zh");return Tt.jsx(Q9,{children:Tt.jsxs(LR,{children:[Tt.jsxs(fR,{children:[Tt.jsx(xo,{path:"/",element:Tt.jsx(_V,{lang:e})}),Tt.jsx(xo,{path:"/explore",element:Tt.jsx(QR,{lang:e})}),Tt.jsx(xo,{path:"/info",element:Tt.jsx(YR,{lang:e})}),Tt.jsx(xo,{path:"/social",element:Tt.jsx(Z9,{lang:e})}),Tt.jsx(xo,{path:"/rewards",element:Tt.jsx(DB,{lang:e})}),Tt.jsx(xo,{path:"/settings",element:Tt.jsx(yV,{lang:e,setLang:t})}),Tt.jsx(xo,{path:"/mailbox",element:Tt.jsx(qR,{})})]}),Tt.jsxs("div",{className:"bottom-buttons",children:[Tt.jsx("button",{className:"lang-button",onClick:()=>t(e==="zh"?"en":"zh"),children:e==="zh"?"English":"中文"}),Tt.jsx($d,{to:"/",className:"home-button",children:e==="zh"?"首頁":"Home"})]})]})})}wI.createRoot(document.getElementById("root")).render(Tt.jsx(st.StrictMode,{children:Tt.jsx(TV,{})}));
